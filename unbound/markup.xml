<ui>

	<!-- account_leveling_elements -->
	<block className="IconAlDataItem">
		<params>
			<param name="name" value="'accountLevelingRewardImage'"/>
		</params>
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _iconSize"/>
		<bind name="style" value="'height'; _iconSize"/>
		<bind name="style" value="'backgroundImage'; _imageData"/>
	</block>
	<block className="BoomAnimation">
		<bind name="visible" value="isVisible"/>
		<bind name="var" value="{isVisible: true}"/>
		<bind name="dispatch" value="'addedToStage'; 'delayedAddedToStage'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 3"/>
		<bind name="catch" value="'delayedAddedToStage'; {isVisible: false}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../animations/spine/account_leveling/explosion/explosion.skel"/>
		</style>
	</block>
	<block className="BGAnimation">
		<styleClass value="$Fullsize"/>
		<style>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../animations/spine/account_leveling/fog/fog.skel"/>
		</style>
	</block>

	<!-- achievements -->
	<block className="AchievementAppearAnimation">
		<bind name="appear" value="'addedToStage';	_animationOn ? 0.15 : 0; _animationOn ? 0.15 * $index + _delay : 0;
									{alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="primaryEntityDH" value="'achievementEntity'; CC.achievement; id"/>
		<style>
			<marginRight value="24px"/>
		</style>
		<block className="AchievementIcon" type="ublock">
			<bind name="build!" value="{	_id: achievementEntity.id,
						_amount: amount,
						_size: 56,
						_isPostBattle: true}"/>
		</block>
	</block>

	<!-- background_animated_switcher -->
	<block className="BackgroundAnimatedSwitcher">
		<styleClass value="$Fullsize"/>
		<block className="BackgroundAnimatedSwitcher" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{	_bgSymbol: _bgSymbol,
						_isSpine: _isSpine ? _isSpine : false,
						_isFogEnabled: _isFogEnabled ? _isFogEnabled : false }"/>
		</block>
	</block>

	<!-- buttons -->
	<block className="DefaultButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="var" value="{showOperationsLock: false}"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="watch" value="'isIconBtn'; _type == SC.Ui_styles.BUTTON_TYPE.ICON || _type == SC.Ui_styles.BUTTON_TYPE.ICON_SECONDARY"/>
		<bind name="watch" value="'isSecondaryBtn'; _type ==  SC.Ui_styles.BUTTON_TYPE.SECONDARY || _type == SC.Ui_styles.BUTTON_TYPE.ICON_SECONDARY"/>
		<bind name="watch" value="'isOperationsLocked'; _isTransactionBtn &amp;&amp; operationsAccountLocked"/>
		<bind name="watch" value="'enabled'; _enabled &amp;&amp; !isOperationsLocked"/>
		<bind name="ubFocus" value="_focusIndex; _defaultFocused; _enabled &amp;&amp; _focusIndex != null &amp;&amp; !isIconBtn; false"/>
		<bind name="keyboard" value="$isFocused &amp;&amp; enabled ? Keyboard.ENTER : null; 'click'; '$isDown'; _clickInterval ? _clickInterval : 0"/>
		<bind name="keyboard" value="$isFocused &amp;&amp; enabled ? Keyboard.SPACE : null; 'click'; '$isDown'; _clickInterval ? _clickInterval : 0"/>
		<bind name="watch" value="'isDisabledVisual'; !_enabled || (isOperationsLocked &amp;&amp; showOperationsLock)"/>
		<bind name="watch" value="'isDown'; !isDisabledVisual &amp;&amp; (mouseDown || $isDown)"/>
		<bind name="watch" value="'isRollover'; !isDisabledVisual &amp;&amp; rollOver"/>
		<bind name="dispatchDelayReset" value="'operationsAccountLocked' + varChanged; 'operationsAccountLockedChanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.3"/>
		<bind name="catch" value="'operationsAccountLockedChanged'; {showOperationsLock: operationsAccountLocked}"/>
		<bind name="name" value="_name ? _name : null"/>
		<bind name="watch" value="'backgroundImage'; isDisabledVisual &amp;&amp; _type	? 'url:../service_kit/buttons/backgrounds/' + _type + '_disabled.png' :
									_type 						? 'url:../service_kit/buttons/backgrounds/' + _type + '.png' :
									isDisabledVisual 			? 'url:../service_kit/buttons/backgrounds/default_disabled.png'
																: 'url:../service_kit/buttons/backgrounds/default.png'"/>
		<bind name="watch" value="'defaultBackgroundImage';	_type 				? 'url:../service_kit/buttons/backgrounds/' + _type + '.png'
																: 'url:../service_kit/buttons/backgrounds/default.png'"/>
		<bind name="watch" value="'focusImage';	_type 	? 'url:../service_kit/buttons/backgrounds/' + _type + '_focused.png'
										: 'url:../service_kit/buttons/backgrounds/default_focused.png'"/>
		<bind name="style" value="'width';	isIconBtn	? '24px' :
							_width		? _width
										: 'auto'"/>
		<bind name="style" value="'height';	isIconBtn			? '24px' :
							_size == 2	? '48px' :
							_size == 0	? '24px'
												: '32px'"/>
		<bind name="watch" value="'ctRollOver'; isSecondaryBtn	?	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
														redOffset: 45, greenOffset: 45, blueOffset: 45, alphaOffset: 0}
												:	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
														redOffset: 15, greenOffset: 15, blueOffset: 15, alphaOffset: 0}"/>
		<bind name="watch" value="'ctDown';  isSecondaryBtn	?	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
													redOffset: -45, greenOffset: -45, blueOffset: -45, alphaOffset: 0}
											:	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
													redOffset: -15, greenOffset: -15, blueOffset: -15, alphaOffset: 0}"/>
		<block>
			<bind name="name" value="enabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<background9Slice value="[10,10]"/>
			</style>
			<bind name="style" value="'backgroundImage'; backgroundImage"/>
		</block>
		<block>
			<bind name="visible" value="isDown || isRollover"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<background9Slice value="[10,10]"/>
			</style>
			<bind name="style" value="'backgroundImage'; backgroundImage"/>
			<bind name="colorTransform" value="	isRollover &amp;&amp; !isDown	? ctRollOver :
								isDown					? ctDown
														: {}"/>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<align value="middle|center"/>
			</style>
			<bind name="style" value="'width'; _width ? '100%' : 'auto'"/>
			<bind name="alpha" value="	isDown	|| isDisabledVisual		? 0.45 :
						isRollover						? 1.1 :
						isSecondaryBtn					? 0.75
														: 0.9"/>
			<block>
				<bind name="visible" value="$isFocused &amp;&amp; !isDisabledVisual"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<background9Slice value="[2,2]"/>
				</style>
				<bind name="style" value="'backgroundImage'; focusImage"/>
			</block>
			<block type="text">
				<bind name="visible" value="_label &amp;&amp; !isIconBtn"/>
				<style>
					<multiline value="false"/>
					<textAlign value="center"/>
				</style>
				<bind name="style" value="'width'; _width ? '100%' : 'auto'"/>
				<bind name="style" value="'minWidth';	_width		? 0 :
										_isExternal ? 78
													: 110"/>
				<bind name="style" value="'marginLeft';	_isExternal			? '28px' :
										_size == 0	? '8px'
															: '12px'"/>
				<bind name="style" value="'marginRight'; _isExternal			? '28px' :
										_size == 0	? '8px'
															: '12px'"/>
				<bind name="class" value="	_type == SC.Ui_styles.BUTTON_TYPE.ACCENT &amp;&amp; _size == 2	? '$TextDefaultBold26NM' :
							_size == 2												? '$TextDefaultBold18NM' :
							_size == 0												? '$TextDefaultBold12NM'
																							: '$TextDefaultBoldNM'"/>
				<bind name="style" value="'dropShadowFilter'; '1 45 0x000000 1 2.0 2.0 0.3 1'"/>
				<bind name="text" value="toUpperCase(tr(_label))"/>
			</block>
			<block>
				<bind name="visible" value="isIconBtn"/>
				<style>
					<width value="24px"/>
					<height value="24px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/buttons/icons/' + _icon + '.png'"/>
			</block>
			<block>
				<bind name="visible" value="_isExternal"/>
				<params>
					<param name="name" value="externalArrow"/>
				</params>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<right value="8px"/>
					<width value="14px"/>
					<height value="14px"/>
					<backgroundImage value="url:../service_kit/buttons/icons/out.png"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="enabled"/>
			<bind name="gui" value="'click'; _method || _action || _request || _dispatch ? null :
							_name										? _name
																		: null; {}"/>
			<bind name="event" value="'click'; _method ? _method : null"/>
			<bind name="action" value="'click'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'click'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; _dispatch ? _dispatch : null; _dispatchParams ? _dispatchParams : {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
			<bind name="directEvent" value="'click'; _directEvent ? _directEvent : null; _directEventParams ? _directEventParams : {}"/>
			<bind name="soundSet" value="_type	? 'button_' + _type
								: 'button_default'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
		</block>
	</block>
	<block className="ImageButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_enabled &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_enabled &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<bind name="style" value="'width'; _width ? _width : '50px'"/>
		<bind name="style" value="'height'; _height ? _height : '50px'"/>
		<style>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'backgroundImage'; _backgroundImage"/>
		<block>
			<bind name="visible" value="_enabled"/>
			<bind name="name" value="_name"/>
			<bind name="soundSet" value="_soundSet ? _soundSet : 'button_context'"/>
			<bind name="event" value="'click'; _method ? _method : null"/>
			<bind name="action" value="'click'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'click'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; _dispatch ? _dispatch : null; _dispatchParams ? _dispatchParams : {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="style" value="'margin'; _hitAreaMargin ? _hitAreaMargin : '0px'"/>
		</block>
	</block>

	<!-- chat -->
	<block className="ClanSquadSwitchMenuItem">
		<style>
			<width value="100%"/>
			<height value="100%f"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="dataRefDH" value="'clanSquadEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'squadId'; []; clanSquadEntity.clanSquadLadderInfo.squadId"/>
		<bind name="watch" value="'selected'; _currentSquad == squadId"/>
		<bind name="action" value="'click'; 'AccountClanComponent.setClanSquad'; !(selected) ? {newSquadId: squadId} : null"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="selected"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
				<width value="100%"/>
				<height value="100%f"/>
			</style>
			<bind name="instance" value="'ClanSquadRatingInfo'; { _clanSquadEntityId: clanSquadEntity.id, _currentSquad: _currentSquad, _leadingSquadId: _leadingSquadId, _selected: selected }"/>
		</block>
	</block>
	<block className="SwitchClanSquadContextMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<styleClass value="$RightSubMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; false ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(false) ? {} : null"/>
		</block>
		<block>
			<styleClass value="$ContextMenuContent"/>
			<bind name="collectionRepeatDH" value="CC.clanSquadLadderInfo; 'ClanSquadSwitchMenuItem'; ''; {_currentSquad: _currentSquad, _leadingSquadId: _leadingSquadId}"/>
		</block>
	</block>
	<block className="ChatDropDownMenu">
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="watch" value="'isInBalancer'; balancerInfoEntity != null"/>
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'isFavorite'; ['channel.evIsFavoriteChanged']; channel.isFavorite"/>
		<bind name="watchDH" value="'channelOpened'; ['channel.evOpenChanged']; channel.opened"/>
		<bind name="dataRefDH" value="'entityAccount'; 'channelEntity.channel.user.ref'"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watch" value="'isInDivision'; entityAccount.hasComponent(CC.preBattlePlayerSimple)"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'groupIds'; ['channelEntity.elementInGroups.evGroupsChanged']; channelEntity.elementInGroups.groupIds"/>
		<bind name="watch" value="'isMyChannel'; isIn(ChannelGroup.MYCHANNELS, groupIds)"/>
		<bind name="firstEntityDH" value="'chatRestrictionsEntity'; CC.chatRestrictions"/>
		<bind name="watchDH" value="'isXmppChatBlocked';		['chatRestrictionsEntity.chatRestrictions.evBlockDockAndClanChatChanged'];
												chatRestrictionsEntity.chatRestrictions.isBlockDockAndClanChat"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watchDH" value="'role'; 		['selfPlayerEntity.clanman.evRoleChanged']; 	selfPlayerEntity.clanman.role"/>
		<bind name="watchDH" value="'clanId'; 	['selfPlayerEntity.clanman.evClanIdChanged']; 	selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged'];	clanTeamEntity.clanTeam.squadId"/>
		<bind name="watch" value="'canCreateClanBattle'; isIn(role, SC.Clan.CLAN_ROLE.CAN_INVITE)"/>
		<bind name="watch" value="'isSwitchClanSquadContextMenuVisible'; hasClanSquadModifier
														&amp;&amp; _isClanDivision
														&amp;&amp; isSelfPlayerCommander
														&amp;&amp;!isInBalancer
														&amp;&amp; canCreateClanBattle"/>
		<bind name="watchDH" value="'isTournamentRoomInfo'; []; tournamentRoomInfoEntity.hasComponent(CC.tournamentRoomInfo)"/>
		<bind name="watch" value="'isVisibleInviteInDivision'; 	!isTournamentRoomInfo
												&amp;&amp; !isInTrainingRoom
												&amp;&amp; (channel.typeIdent == 'private') 
												&amp;&amp; accountOnline
												&amp;&amp; (!isInDivision || (freePlaces &gt; 0))
												&amp;&amp; !isInBalancer
												&amp;&amp; !isSelfInParty"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'playersInDivision'"/>
		<bind name="collectionDH" value="CC.playerInvitedToPrebattleInfo; 'invitedPlayers'"/>
		<bind name="watch" value="'freePlaces'; (shipRestrictions.maxPlayers - playersInDivision.length - invitedPlayers.length)"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="collectionDH" value="CC.contactsGroup; 'contactsGroup'"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged']; !!entityAccount.contact.isIgnored"/>
		<bind name="watchDH" value="'canAddGroupEntitiesId'; ['entityAccount.elementInGroups.evCanAddGroupEntitiesChanged', 'chatEntity.chat.evRosterChanged']; (entityAccount.elementInGroups) ? entityAccount.elementInGroups.canAddGroupEntitiesId : chatEntity.chat.canAddGroupEntitiesId"/>
		<bind name="watch" value="'isPrivateChannel'; channel.typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PRIVATE"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; _dropDown ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(_dropDown) ? {} : null"/>
		</block>
		<block>
			<styleClass value="$ContextMenuContent"/>
			<block>
				<bind name="visible" value="_dropDown &amp;&amp; isMyChannel &amp;&amp; currentRegion != 'CN' &amp;&amp; !isXmppChatBlocked"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_CHANNEL_RENAME'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="dispatch" value="'click'; 'chatChannelRenameStart'"/>
			</block>
			<block>
				<bind name="visible" value="(channel.typeIdent != 'common') &amp;&amp; !(_isDivision) &amp;&amp; !(isMyChannel)"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="!isFavorite ? 'IDS_ADD_TO_FAVORITES' : 'IDS_REMOVE_FROM_FAVORITES'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'setChannelFavorite'; {channelId: channel.channelId, favorite: !(isFavorite)}"/>
			</block>
			<block>
				<bind name="visible" value="channelOpened &amp;&amp; !(_isDivision) "/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItemWithAction">
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_CHANNEL_CLOSE'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'leaveChannel'; {channelId: channel.channelId}"/>
				</block>
			</block>
			<block>
				<params>
					<param name="name" value="menuDismissDivision"/>
				</params>
				<bind name="visible" value="_isDivision &amp;&amp; isSelfPlayerCommander"/>
				<styleClass value="$ContextMenuListItem"/>
				<block className="MenuItemWithRequest">
					<styleClass value="$Fullsize"/>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="'IDS_DISMISS_DIVISION'"/>
					</block>
					<bind name="request" value="'click'; 'dismissDivision'; {subtitle : 'IDS_DISMISS_DIVISION_QUESTION'}"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="_isDivision"/>
				<styleClass value="$ContextMenuListItem"/>
				<block className="MenuItemWithRequest">
					<styleClass value="$Fullsize"/>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="'IDS_LEAVE_DIVISION'"/>
					</block>
					<bind name="request" value="'click'; 'leaveDivision'; {subtitle : 'IDS_LEAVE_DIVISION_QUESTION'}"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isSwitchClanSquadContextMenuVisible"/>
				<styleClass value="$ContextMenuListItem"/>
				<bind name="tooltip" value="'SwitchClanSquadContextMenu'; { _currentSquad: squadId, _leadingSquadId: leadingSquadId }; TooltipBehaviour.chainMenuBehavior; 'switchClanSquadContextMenu'"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$Fullsize"/>
					<bind name="selected" value="switchClanSquadContextMenu"/>
					<block>
						<style>
							<width value="100%"/>
							<height value="100%"/>
							<hitTest value="false"/>
						</style>
						<styleClass value="$ContextMenuListItemContent"/>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<styleClass value="$MiddleVAligned"/>
							<bind name="text" value="'IDS_SWITCH_CLAN_SQUAD'"/>
						</block>
						<block className="button_expand_h" type="native">
							<style>
								<position value="absolute"/>
								<right value="3px"/>
							</style>
							<styleClass value="$MouseDisable"/>
							<styleClass value="$MiddleVAligned"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="isVisibleInviteInDivision"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'alpha'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision)) ? 1 : 0.5 "/>
				<bind name="style" value="'hitTest'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision))"/>
				<block className="MenuItemWithAction">
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_INVITE_IN_DIVISION'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'inviteToDivision'; {playerId: entityAccount.accountSimple.dbId, playerName: pureName, inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON}"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="((groupIdsOfAccount==null) &amp;&amp; !(isIgnored) &amp;&amp; isPrivateChannel)"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_ADD_TO_CONTACTS'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'addContact'; {dbId: accountDbId}"/>
			</block>
			<block>
				<bind name="visible" value="!(isIgnored) &amp;&amp; ((canAddGroupEntitiesId.length &gt; 0) &amp;&amp; (contactsGroup.length &gt; 1)) &amp;&amp; isPrivateChannel"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_ADD_TO_GROUP'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<block className="button_expand_h" type="native">
					<style>
						<position value="absolute"/>
						<right value="6px"/>
					</style>
					<styleClass value="$MouseDisable"/>
					<styleClass value="$MiddleVAligned"/>
				</block>
				<bind name="tooltip" value="'MoveToGroupContextSubMenu'; {_entityAccountId: entityAccount.id, canAddGroupEntitiesId: canAddGroupEntitiesId, _dropDown: _dropDown}; TooltipBehaviour.submenu"/>
			</block>
			<block>
				<bind name="visible" value="isPrivateChannel"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$ContextMenuListItem"/>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="(!isIgnored) ? 'IDS_IGNORE_PLAYER' : 'IDS_NOT_IGNORE_PLAYER'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'userIgnoreContact'; {dbId: accountDbId, ignore: !(isIgnored)}"/>
				</block>
				<bind name="instance" value="'MenuItemReportPortChatMisbehaviour'; {_dbId: accountDbId, _channelId : channel.channelId}"/>
			</block>
			<block>
				<bind name="visible" value="((groupIdsOfAccount!=null) &amp;&amp; !(isIgnored) &amp;&amp; isPrivateChannel)"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItemWithAction">
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isPrivateChannel"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_PROFILE'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'navigateTo'; {	route: SC.Ui_windows.ROUTE.OVERLAY_BROWSER,
													data: {url: SC.Ui_windows.GUI_URL.PLAYER_STATS, accountId: accountDbId + ''}}"/>
			</block>
		</block>
	</block>
	<block className="ChatBoxHeader">
		<style>
			<width value="100%"/>
			<height value="100f%"/>
			<align value="middle"/>
		</style>
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="dispatch" value="'draggingChangedEv'; 'Tooltip.Close'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="watch" value="'contentType'; _isDivision ? 'division' : 'common'"/>
		<bind name="childParentScope" value="contentType; { _channelEntityId: _channelEntityId, _isClanChat:_isClanChat }; { division: 	'ChatBoxHeaderDivisionCommon',
																											common:		'ChatBoxHeaderCommon' }"/>
	</block>
	<block className="ChatBoxHeaderCommon">
		<bind name="watch" value="'isCloseButtonHidden'; _isClanChat "/>
		<style>
			<width value="100%"/>
			<paddingTop value="8px"/>
			<paddingBottom value="8px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="!(_isEditing)"/>
			<block>
				<style>
					<height value="100%f"/>
				</style>
				<bind name="style" value="'hitTest'; !(_isPasswordNeeded) &amp;&amp; !(_isInvitation)"/>
				<block className="button_dock" type="native">
					<params>
						<param name="name" value="ChatBoxHeader"/>
					</params>
					<bind name="style" value="'hitTest'; !(_isSteadyChannel)"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<marginTop value="-4px"/>
						<marginBottom value="-7px"/>
						<marginRight value="-4px"/>
						<marginLeft value="2px"/>
					</style>
					<bind name="tooltip" value="'ChatDropDownMenu'; {_dropDown: true, channelEntityId: _channelEntityId}; TooltipBehaviour.verticalInfoWidget"/>
				</block>
				<block>
					<style>
						<hitTest value="false"/>
						<marginLeft value="8px"/>
					</style>
					<bind name="instance" value="'ChannelTitleWithIcon'; {channelEntityId: _channelEntityId, _bold: true, _maxWidth: 350, _channelHeader: true}"/>
				</block>
				<block className="icon_navigate" type="native">
					<bind name="visible" value="!(_isPasswordNeeded || _isSteadyChannel || _isInvitation)"/>
					<style>
						<hitTest value="false"/>
						<marginLeft value="2px"/>
						<marginRight value="2px"/>
						<top value="60%"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<bind name="gotoAndStop!" value="'down'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<styleClass value="$MiddleVAlignedAbsolutely"/>
				<style>
					<right value="12px"/>
				</style>
				<bind name="instance" value="'ChatBoxHeaderControls'; { _channelEntityId: _channelEntityId, _showCloseButton: !isCloseButtonHidden }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isEditing"/>
			<style>
				<width value="100%"/>
				<height value="37px"/>
			</style>
			<bind name="instance" value="'ChannelHeaderEditing'; _isEditing ? {channelEntityId: _channelEntityId} : null"/>
		</block>
	</block>
	<block className="ChatBoxHeaderDivisionCommon">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'selfIsInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
		<bind name="watch" value="'isActiveDivisionControls'; !(_isSteadyChannel || (isFormationInBattle &amp;&amp; selfIsInBattle))"/>
		<bind name="watchDH" value="'isMercenary'; ['selfPlayerEntity.preBattlePlayerSimple.evIsMercenaryChanged']; selfPlayerEntity.preBattlePlayerSimple.isMercenary"/>
		<bind name="watch" value="'showPrimeTime'; !isMercenary &amp;&amp; _isClanDivision"/>
		<bind name="watch" value="'padding'; showPrimeTime ? 16 : 10"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'paddingTop'; padding"/>
		<bind name="style" value="'paddingBottom'; padding"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
				<height value="100%f"/>
			</style>
			<block>
				<bind name="instance" value="'DivisionHeaderButton'; {	_channelEntityId: _channelEntityId,
														_isClanDivision: _isClanDivision,
														_isActive: isActiveDivisionControls	}"/>
			</block>
			<block>
				<style>
					<height value="20px"/>
					<marginLeft value="41px"/>
				</style>
				<bind name="visible" value="showPrimeTime"/>
				<bind name="firstEntityDH" value="'fixedPrimeTimeEntity'; CC.clanBattlePrimeTime; 'fixed'"/>
				<bind name="collectionDH" value="CC.clanBattlePrimeTime; 'chosenPrimeTimes'; 'chosen'"/>
				<bind name="watch" value="'chosenPrimeTimeEntity'; chosenPrimeTimes[0]"/>
				<bind name="watch" value="'currentEntityId'; !!(fixedPrimeTimeEntity) ? fixedPrimeTimeEntity.id : chosenPrimeTimeEntity.id"/>
				<bind name="watch" value="'isPrimeTimeChosen'; !!(currentEntityId)"/>
				<block>
					<bind name="fade" value="isPrimeTimeChosen; 0.15; {alpha: 0}; {alpha: 1}"/>
					<style>
						<width value="100%f"/>
					</style>
					<bind name="instance" value="'PrimeTimeStereotype'; {	_entityId: currentEntityId, _isBold: true,
															_textColor: '$FontColorWhite', _showCountdown: true}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block type="text">
					<bind name="fade" value="!isPrimeTimeChosen; 0.15; {alpha: 0}; {alpha: 1}"/>
					<style>
						<width value="100%f"/>
						<multiline value="false"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<styleClass value="$FontColorOrange"/>
					<bind name="text" value="'IDS_CLAN_BATTLES_NO_CHOSEN_PRIMETIME'"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="12px"/>
			</style>
			<bind name="instance" value="'ChatBoxHeaderControls'; {_channelEntityId: _channelEntityId, _showCloseButton: isActiveDivisionControls}"/>
		</block>
	</block>
	<block className="DivisionHeaderButton">
		<style>
			<width value="100%f"/>
			<height value="36px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<marginLeft value="4px"/>
				<marginTop value="3px"/>
			</style>
			<bind name="instance" value="'DivisionHeaderLock'; {}"/>
		</block>
		<block>
			<block className="button_dock" type="native">
				<params>
					<param name="name" value="ChatBoxHeader"/>
				</params>
				<style>
					<width value="100%"/>
					<height value="32px"/>
					<position value="absolute"/>
					<marginRight value="-3px"/>
					<marginTop value="3px"/>
				</style>
				<bind name="style" value="'hitTest'; _isActive"/>
				<bind name="tooltip" value="'DivisionHeaderTooltip'; {_isClanDivision: _isClanDivision}"/>
				<bind name="tooltip" value="'ChatDropDownMenu'; {_dropDown: true, channelEntityId: _channelEntityId, _isDivision: true, _isClanDivision: _isClanDivision}; TooltipBehaviour.verticalInfoWidget"/>
			</block>
			<block>
				<style>
					<hitTest value="false"/>
					<marginBottom value="4px"/>
					<marginTop value="10px"/>
					<marginLeft value="4px"/>
					<marginRight value="3px"/>
				</style>
				<bind name="instance" value="'FormationHeader'; {_isClanDivision: _isClanDivision}"/>
			</block>
			<block className="icon_navigate" type="native">
				<bind name="visible" value="_isActive"/>
				<style>
					<hitTest value="false"/>
					<marginRight value="2px"/>
					<marginTop value="11px"/>
				</style>
				<bind name="gotoAndStop!" value="'down'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatBoxContentInvitation">
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginBottom value="30px"/>
				<align value="middle|center"/>
			</style>
			<bind name="instance" value="'InvitationToChatItem'; { _channelEntityId: _channelEntityId }"/>
		</block>
	</block>
	<block className="ChatBoxContentEnterPassword">
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginBottom value="48px"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'EnterPasswordChatItem'; { _channelEntityId: _channelEntityId }"/>
			</block>
		</block>
	</block>
	<block className="ChatBoxContentCommon">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="collectionDH" value="CC.channelParticipant; 'participants'; 'channelParticipants_' + channelEntity.id + '.sorted'"/>
		<bind name="watch" value="'isVisibleParticipantsPanel'; participants.length != 0"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ClanChatDailyMessage'; (channelEntity.channel.typeIdent == 'clan') ? {} : null"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="child" value="isChatServerAvailable; {_channelEntityId: _channelEntityId, _isInputEnabled: _isInputEnabled};	'ServerIsUnavailable';
																														'MessageBoxPanel'"/>
			</block>
			<block>
				<bind name="visible" value="isVisibleParticipantsPanel"/>
				<style>
					<height value="100%"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<height value="100%"/>
				</style>
				<bind name="instance" value="'ParticipantsPanel'; isVisibleParticipantsPanel ? { _channelEntity: channelEntity, _participants: participants } : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatBoxContentDivision">
		<bind name="firstEntityDH" value="'divisionEntranceInfoEntity'; CC.divisionEntranceInfo"/>
		<bind name="watchDH" value="'isDivisionAvailable'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evisDivisionAvailableChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.isDivisionAvailable"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="firstEntityDH" value="'divisionRatingEntity'; CC.divisionRating"/>
		<bind name="watchDH" value="'divisionLeagueName'; ['divisionRatingEntity.divisionRating.evChanged']; divisionRatingEntity.divisionRating.leagueName"/>
		<bind name="watchDH" value="'divisionLeagueProgress'; ['divisionRatingEntity.divisionRating.evChanged']; divisionRatingEntity.divisionRating.leagueProgress"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watchDH" value="'battleType'; ['selectedBattleTypeEntity.battleType.evSelectionChanged']; selectedBattleTypeEntity.battleType.type"/>
		<bind name="watch" value="'isRatingBattle'; battleType == SC.Common.BATTLE_TYPES.RATING_BATTLE &amp;&amp; divisionLeagueName &amp;&amp; divisionLeagueProgress "/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
				<height value="36px"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'FormationStatuses'; {_divisionsAvailable: isDivisionAvailable}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="isRatingBattle"/>
			<style>
				<width value="100%"/>
				<height value="36px"/>
			</style>
			<block>
				<style>
					<marginTop value="4px"/>
					<marginLeft value="9px"/>
				</style>
				<bind name="instance" value="'FormationRatingBattleLeague'; isRatingBattle	? { _rating: divisionLeagueProgress,
																				_leagueName: divisionLeagueName}
																			: null"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<style>
					<height value="100%"/>
				</style>
				<bind name="instance" value="'FormationResizableMainElement'; { _channelEntityId: _channelEntityId}"/>
			</block>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'MessageBoxPanel'; isChatServerAvailable ? { _channelEntityId: _channelEntityId, _isInputEnabled: _isInputEnabled} : null"/>
				<bind name="instance" value="'ServerIsUnavailable'; !isChatServerAvailable ? {} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatBoxContent">
		<styleClass value="$Fullsize"/>
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="watch" value="'contentType'; _isInvitation 		? 'invite' :
								_isPasswordNeeded 	? 'password' :
								_isDivision 		? 'division'
													: 'common'"/>
		<bind name="childParentScope" value="contentType; {	_channelEntityId: _channelEntityId,
											_isInputEnabled: _isInputEnabled }; {invite: 	'ChatBoxContentInvitation',
																				password:	'ChatBoxContentEnterPassword',
																				division:	'ChatBoxContentDivision',
																				common:		'ChatBoxContentCommon' }"/>
	</block>
	<block className="ChatBox">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="actionIsDisplay" value="'setChannelChatBoxIsDisplay'; {entityId: channelEntityId}"/>
		<bind name="draggableWindow" value="'chatBoxDragZone'; 'chatBoxPosition'; channelEntity.channel.channelId"/>
		<bind name="changeDispatch" value="dragging; 'draggingChangedEv'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; true"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'subKey'; channelEntity.channel.channelId"/>
		<bind name="watch" value="'chatBoxPositionX';	(userPrefs.chatBoxPositionX &amp;&amp; userPrefs.chatBoxPositionX[subKey])		?	userPrefs.chatBoxPositionX[subKey]	: undefined"/>
		<bind name="watch" value="'chatBoxPositionY';	(userPrefs.chatBoxPositionY &amp;&amp; userPrefs.chatBoxPositionY[subKey])		?	userPrefs.chatBoxPositionY[subKey]	: undefined"/>
		<bind name="watch" value="'dragPositionsWasSet'; (userPrefs.chatBoxPositionX &amp;&amp; userPrefs.chatBoxPositionX[subKey]) &amp;&amp; (userPrefs.chatBoxPositionY &amp;&amp; userPrefs.chatBoxPositionY[subKey])"/>
		<bind name="changeDispatch" value="chatBoxPositionX &amp;&amp; dragPositionsWasSet;	'chatBoxPositionXchanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="changeDispatch" value="chatBoxPositionY &amp;&amp; dragPositionsWasSet;	'chatBoxPositionYchanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="action" value="'chatBoxPositionXchanged' ; 'setUserPref' ; {value : chatBoxPositionX, name : 'chatBoxPositionX', subName: subKey}"/>
		<bind name="action" value="'chatBoxPositionYchanged' ; 'setUserPref' ; {value : chatBoxPositionY, name : 'chatBoxPositionY', subName: subKey}"/>
		<bind name="left" value="chatBoxPositionX"/>
		<bind name="top" value="chatBoxPositionY"/>
		<bind name="watch" value="'chatBoxWidth';	(userPrefs.chatBoxWidth &amp;&amp; userPrefs.chatBoxWidth[subKey])		?	userPrefs.chatBoxWidth[subKey]	: undefined"/>
		<bind name="watch" value="'chatBoxHeight';	(userPrefs.chatBoxHeight &amp;&amp; userPrefs.chatBoxHeight[subKey])	?	userPrefs.chatBoxHeight[subKey]	: undefined"/>
		<bind name="width" value="chatBoxWidth"/>
		<bind name="height" value="chatBoxHeight"/>
		<bind name="var" value="{isEditing: false}"/>
		<bind name="catch" value="'chatChannelRenameStart';		{isEditing : true}"/>
		<bind name="catch" value="'chatChannelRenameCancelled';	{isEditing : false}"/>
		<bind name="catch" value="'chatChannelRenameSuccessed';	{isEditing: false}"/>
		<bind name="watchDH" value="'typeIdent'; 		['channelEntity.channel.evTypeChanged']; channelEntity.channel.typeIdent"/>
		<bind name="watchDH" value="'isInvitation';		['channelEntity.channel.evOpenChanged', 'channelEntity.channel.evInvitationRefused']; channelEntity.channel.isInvitation"/>
		<bind name="watchDH" value="'isPasswordNeeded';	['channelEntity.channel.evOpenChanged']; channelEntity.channel.isWaitingPassword"/>
		<bind name="watch" value="'isDivision'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE"/>
		<bind name="watch" value="'isClanChat'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN"/>
		<bind name="watch" value="'isTrainingRoom'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM"/>
		<bind name="watch" value="'isSteadyChannel'; isClanChat || isTrainingRoom"/>
		<bind name="firstEntityDH" value="'chatRestrictionsEntity'; CC.chatRestrictions"/>
		<bind name="watchDH" value="'isXmppChatBlocked';		['chatRestrictionsEntity.chatRestrictions.evBlockDockAndClanChatChanged'];
												chatRestrictionsEntity.chatRestrictions.isBlockDockAndClanChat"/>
		<bind name="watchDH" value="'isPrebattleChatBlocked';['chatRestrictionsEntity.chatRestrictions.evBlockPrebattleChatChanged'];
												chatRestrictionsEntity.chatRestrictions.isBlockPrebattleChat"/>
		<bind name="watch" value="'isInputEnabled'; 	!(isXmppChatBlocked &amp;&amp; isIn(typeIdent, SC.Channel.CHANNEL_TYPE_IDENT_VALUE.DOCK_AND_CLAN)) &amp;&amp;
									!(isPrebattleChatBlocked &amp;&amp; isIn(typeIdent, SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE_AND_TRAINING))"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'selectedBattleType'; selectedBattleTypes[0].battleType.type"/>
		<bind name="watch" value="'isClanDivision'; selectedBattleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<bind name="class" value="isDivision ? '$ChatBoxDivisionSize' : '$ChatBoxDefaultSize'"/>
		<styleClass value="$ChatBoxDefaultPosition"/>
		<block className="InfotipPanelBg">
			<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
			<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
					<styleClass value="$Fullsize"/>
					<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:true }"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-2px"/>
				</style>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<params>
						<param name="name" value="chatBoxDragZone"/>
					</params>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'ChatBoxHeader'; { 	_channelEntityId: channelEntityId, 
													_isInvitation: isInvitation, 
													_isPasswordNeeded: isPasswordNeeded, 
													_isDivision: isDivision,
													_isTrainingRoom: isTrainingRoom,
													_isClanDivision: isClanDivision,
													_isClanChat:isClanChat,
													_isEditing: isEditing,
													_isSteadyChannel: isSteadyChannel }"/>
				</block>
			</block>
			<block>
				<style>
					<marginLeft value="-1px"/>
					<marginRight value="-1px"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'ChatBoxContent'; { _channelEntityId: channelEntityId,
												_isPasswordNeeded: isPasswordNeeded,
												_isInvitation: isInvitation,
												_isDivision: isDivision,
												_isClanDivision: isClanDivision,
												_isInputEnabled: isInputEnabled  }"/>
			</block>
		</block>
		<bind name="watch" value="'restrict'; chatBoxState != WindowTooltipState.pinned ? {} : { down: true, left: true }"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="ResizeFrame">
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<bind name="visible" value="!(restrict.up)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP'"/>
					<style>
						<position value="absolute"/>
						<width value="100%"/>
						<height value="6px"/>
						<top value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_top"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.down)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN'"/>
					<style>
						<position value="absolute"/>
						<width value="100%"/>
						<height value="6px"/>
						<bottom value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_bottom"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.left)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_LEFT'"/>
					<style>
						<position value="absolute"/>
						<width value="6px"/>
						<height value="100%"/>
						<left value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_left"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.right)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_RIGHT'"/>
					<style>
						<position value="absolute"/>
						<width value="6px"/>
						<height value="100%"/>
						<right value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_right"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.up || restrict.left)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_LEFT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<top value="-5px"/>
						<left value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_top_left"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.up || restrict.right)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_RIGHT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<top value="-5px"/>
						<right value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_top_right"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.down || restrict.left)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_LEFT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<bottom value="-5px"/>
						<left value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_bottom_left"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.down || restrict.right)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_RIGHT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<bottom value="-5px"/>
						<right value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_bottom_right"/>
					</params>
				</block>
			</block>
		</block>
		<bind name="resize" value="'grip_top';			'up'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_bottom';		'down'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_left';			'left'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_right';			'right'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_top_left';		'up,left'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_top_right';		'up,right'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_bottom_left';	'down,left'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_bottom_right';	'down,right'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
	</block>
	<block className="ParticipantsPanel">
		<bind name="watchDH" value="'channelTypeIdent'; ['_channelEntity.channel.evTypeChanged']; _channelEntity.channel.typeIdent"/>
		<bind name="watch" value="'isSteadyChannel'; isIn(channelTypeIdent, [SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM])"/>
		<style>
			<width value="220px"/>
			<height value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<bind name="visible" value="!isSteadyChannel"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="ChatInvitePlayerButton" type="ublock">
					<style>
						<width value="100%"/>
					</style>
					<bind name="build!" value="{	_channelId: _channelEntity.channel.channelId }"/>
				</block>
			</block>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<height value="100%f"/>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_participants; 'ChatParticipantItem';  {	_playerContext: {type: 'channelParticipants', channelTypeIdent: channelTypeIdent, clubEntityId: clubEntityId, clubLeaderDbId: leaderDbId},
																	_channelId: _channelEntity.channel.channelId	}"/>
			</block>
		</block>
	</block>
	<block className="MessageBoxPanel">
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<scrollbar value="ModernScrollBar"/>
				<scrollbarAlign value="right"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerChat"/>
				<scrollArea value="ModernScrollArea"/>
				<scrollbarTrackMode value="scrollToCursor"/>
				<wheelScrollSpeed value="30"/>
				<overflow value="scroll"/>
				<layout value="lesta.unbound.layout.measure.CarouselVariableItemSizeLayout"/>
				<itemWidth value="260px"/>
				<itemHeight value="22px"/>
			</style>
			<bind name="controller" value="'lesta.unbound.controls.ControllerAutoScroll'"/>
			<bind name="event" value="'addedToStage'; instantScrollToLastItem"/>
			<bind name="generatorDH" value="CC.channelMessage; 'ChannelMessageRenderer'; 'byChannel.' + _channelEntityId; {_currentChannelEntityId: _channelEntityId}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
				<marginRight value="2px"/>
				<marginBottom value="2px"/>
			</style>
			<bind name="instance" value="'InputTextPanel'; { _channelEntityId: _channelEntityId,	_isInputEnabled: _isInputEnabled }"/>
		</block>
	</block>
	<block className="InputTextPanel">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="37px"/>
				<marginRight value="4px"/>
				<marginLeft value="4px"/>
			</style>
			<block className="text_input_caps_enter" type="native">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="_isInputEnabled"/>
				<bind name="name" value="'text_input'"/>
				<params>
					<param name="restrict" value="^&lt;&gt;"/>
					<param name="actAsButton" value="true"/>
					<param name="maxChars" value="512"/>
					<param name="noTranslate" value="true"/>
				</params>
				<bind name="enabled" value="_isInputEnabled"/>
				<bind name="ubFocus" value="0; true; true"/>
				<bind name="sync" value="'text'; 'change'; 'inputText'"/>
				<bind name="action" value="'textInputEnter'; (inputText.length &gt; 0) ? 'sendMessage' : null; {channelId: channelEntity.channel.channelId, message:inputText}"/>
				<bind name="catch" value="'textInputEnter'; {inputText : ''}"/>
				<bind name="catch" value="'sendButtonEnter'; {inputText : ''}"/>
			</block>
			<block className="text_input_caps" type="native">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="!_isInputEnabled"/>
				<params>
					<param name="enabled" value="false"/>
				</params>
				<bind name="defaultText" value="tr('IDS_CHAT_BLOCKED')"/>
				<bind name="ubFocus" value="1; false; false; false"/>
			</block>
			<block className="button_dock" type="native">
				<bind name="visible" value="_isInputEnabled"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_SEND_MESSAGE'}"/>
				<styleClass value="$TextInputEnterButton"/>
				<bind name="enabled" value="inputText.length &gt; 0 &amp;&amp; _isInputEnabled"/>
				<bind name="action" value="'buttonClick'; 'sendMessage'; {channelId: channelEntity.channel.channelId, message:inputText}"/>
				<bind name="dispatch" value="'buttonClick'; 'sendButtonEnter'"/>
			</block>
		</block>
	</block>
	<block className="ClanChatDailyMessage">
		<style>
			<width value="100%"/>
			<marginTop value="8px"/>
			<marginLeft value="8px"/>
			<marginRight value="8px"/>
		</style>
		<bind name="visible" value="(messageOfTheDay || isEditingRole) &amp;&amp; !isXmppChatBlocked &amp;&amp; !isDescriptionTextFieldsBlocked"/>
		<bind name="dataRefDH" value="'messageEntity'; '$dataRef.ref'"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
		<bind name="watchDH" value="'messageOfTheDay'; ['clanEntity.clanExtended.evMessageOfTheDayChanged']; clanEntity.clanExtended.messageOfTheDay"/>
		<bind name="watchDH" value="'messageOfTheDayState'; ['clanEntity.clanExtended.evMessageOfTheDayStateChanged']; clanEntity.clanExtended.messageOfTheDayState"/>
		<bind name="firstEntityDH" value="'chatRestrictionsEntity'; CC.chatRestrictions"/>
		<bind name="watchDH" value="'isXmppChatBlocked';	['chatRestrictionsEntity.chatRestrictions.evBlockDockAndClanChatChanged'];
										chatRestrictionsEntity.chatRestrictions.isBlockDockAndClanChat"/>
		<bind name="watchDH" value="'isDescriptionTextFieldsBlocked';	['chatRestrictionsEntity.chatRestrictions.evBlockDescriptionTextFieldsChanged'];
										chatRestrictionsEntity.chatRestrictions.isBlockDescriptionTextFields"/>
		<bind name="watch" value="'isMessageExists'; messageOfTheDay.length &gt; 0"/>
		<bind name="watch" value="'isEditingRole'; role == 'commander' || role == 'executive_officer'"/>
		<bind name="watch" value="'isAttentionMessageState'; messageOfTheDayState != SC.Clan.CLAN_MESSAGE_OF_THE_DAY_STATE.DEFAULT"/>
		<bind name="watch" value="'attentionMessage'; 'IDS_CLAN_CHAT_EDIT_MOTD_REASON_' + SC.Clan.CLAN_MESSAGE_OF_THE_DAY_STATE.VALUE_TO_NAME[messageOfTheDayState]"/>
		<bind name="var" value="{InputFieldVisibility: false}"/>
		<bind name="catch" value="'changeFieldVisibility'"/>
		<bind name="firstEntityDH" value="'divisionEntranceInfoEntity'; CC.divisionEntranceInfo"/>
		<bind name="watchDH" value="'commentStatus'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evCommentStatusChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.commentStatus"/>
		<bind name="watchDH" value="'isBanned'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evIsBannedChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.isBanned"/>
		<block>
			<bind name="visible" value="!InputFieldVisibility &amp;&amp; (messageOfTheDay || (isEditingRole &amp;&amp; !isAttentionMessageState))"/>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginBottom value="4px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="transition" value="rollOver &amp;&amp; isEditingRole &amp;&amp; !isAttentionMessageState; 0.15; {alpha: 1}; {alpha: 1.3}"/>
				<bind name="dispatch" value="'click'; isEditingRole &amp;&amp; !isAttentionMessageState ? 'changeFieldVisibility' : null;
			 																		{InputFieldVisibility: true}"/>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-3"/>
					</style>
					<bind name="style" value="'noTranslate'; messageOfTheDay.length &gt; 0"/>
					<styleClass value="$TextDefaultNM"/>
					<bind name="class" value="messageOfTheDay ? null : '$FontColorBlueish'"/>
					<bind name="text" value="isMessageExists ? messageOfTheDay : 'IDS_CLAN_CHAT_EDIT_MOTD_DEFAULT_TEXT'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isEditingRole &amp;&amp; !isAttentionMessageState"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_CHAT_EDIT_MOTD_TOOLTIP'}"/>
				<style>
					<marginBottom value="-8px"/>
					<marginTop value="-6px"/>
					<marginLeft value="8px"/>
				</style>
				<bind name="instance" value="'ImageButton'; {_width: '23px',
											_height: '23px',
											_enabled: true,
											_dispatch: 'changeFieldVisibility',
											_dispatchParams: {InputFieldVisibility: true},
											_backgroundImage: 'url:../service_kit/buttons/context/pencil.png'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="InputFieldVisibility"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="text_area_elastic_enter" type="native">
					<bind name="watch" value="'maxChars'; 180"/>
					<params>
						<param name="actAsButton" value="true"/>
						<param name="maxChars" value="180"/>
						<param name="noTranslate" value="true"/>
					</params>
					<bind name="controller" value="'lesta.dialogs.dock.controllers.ElasticBlockController'"/>
					<bind name="minNumLines" value="1"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="action" value="'textInputEnter'; 'AccountClanComponent.setMessageOfTheDay'; { message: txtMessage }"/>
					<bind name="dispatch" value="'textInputEnter';'changeFieldVisibility'; {InputFieldVisibility: false}"/>
					<bind name="text" value="messageOfTheDay"/>
					<bind name="ubFocus" value="0; InputFieldVisibility; true; true"/>
					<bind name="sync" value="'text'; 'change'; 'txtMessage'"/>
					<block>
						<styleClass value="$TextAreaEnterButton"/>
						<bind name="tooltip" value="'SimpleStatusTooltip'; (txtMessage.length &gt; maxChars) ? {_text: 'IDS_MAX_STATUS_LENGTH', _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING} : null"/>
						<bind name="tooltip" value="'SimpleStatusTooltip'; (txtMessage.length &lt;= maxChars) ? {_text: 'IDS_HINT_ADD_SEEKER_STATUS'} : null"/>
						<block className="button_dock" type="native">
							<styleClass value="$FullsizeAbsolute"/>
							<bind name="action" value="'click'; 'AccountClanComponent.setMessageOfTheDay'; { message: txtMessage }"/>
							<bind name="dispatch" value="'buttonClick';'changeFieldVisibility'; {InputFieldVisibility: false}"/>
							<bind name="style" value="'hitTest'; (commentStatus == 'submitted') &amp;&amp; (txtMessage.length &lt;= maxChars) ? false : true"/>
							<bind name="enabled" value="(txtMessage.length &lt;= maxChars)"/>
						</block>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<bottom value="3"/>
							<right value="56"/>
						</style>
						<bind name="fade" value="(isBanned || (commentStatus != 'submitted')); 0.1;
								{top: 10, alpha: 0}; {top: 0, alpha: 1}; {top: 10, alpha: 0}"/>
						<bind name="instance" value="'CharCounter'; { _string: txtMessage, _maxChars: maxChars}"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<marginLeft value="8px"/>
					<marginRight value="6px"/>
				</style>
				<bind name="instance" value="'CloseButton'; {
				_event: 'changeFieldVisibility',
				_eventData: { InputFieldVisibility: false },
				_tooltipText: 'IDS_CLAN_CHAT_EDIT_MOTD_EXIT_TOOLTIP'
			}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isEditingRole &amp;&amp; isAttentionMessageState"/>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginBottom value="4px"/>
				<marginLeft value="4px"/>
				<marginRight value="4px"/>
			</style>
			<bind name="instance" value="'StatusLine'; {	_width: '100%',
										_text: attentionMessage,
										_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
										_textClass: '$TextDefaultNM'
									}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<marginLeft value="-8px"/>
				<marginRight value="-8px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ChannelHeaderEditing">
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="watchDH" value="'channelName'; ['channelEntity.channel.evNameChanged', 'channelEntity.channel.user', 'channelEntity.channel.user.ref.accountName.evChanged']; (channelEntity.channel.nameIds != null)	? tr(channelEntity.channel.nameIds) :
																																									 (channelEntity.channel.user.ref != null)	? channelEntity.channel.user.ref.accountName.nickName
																																									 											: channelEntity.channel.name"/>
		<bind name="var" value="{ textInput: channelName,
				 isWrongName: false,
				 isRenameComplete: false }"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evNameChanged'; 'evRenameChannelSuccessed'"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evRenameChannelErrorNameExist'; 'evRenameChannelErrorNameExist'"/>
		<bind name="dispatch" value="'evRenameChannelErrorNameExist';  ((channelEntity.channel.name==textInput) || (textInput == '')) ? 'evRenameChannelSuccessed' : null"/>
		<bind name="catch" value="'evRenameChannelErrorNameExist'; { isWrongName :		true,
													isRenameComplete :	false}"/>
		<bind name="dispatch" value="'evRenameChannelSuccessed'; 'chatChannelRenameSuccessed'"/>
		<bind name="catch" value="'evRenameChannelSuccessed'; {	isWrongName :		false,
												isRenameComplete :	true}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginTop value="9px"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginLeft value="8px"/>
					<marginRight value="5px"/>
				</style>
				<block>
					<style>
						<width value="19px"/>
						<height value="19px"/>
					</style>
					<bind name="style" value="'backgroundImage';		'url:../service_kit/chat_channels/'+
													(channelEntity.channel.isSecured ? 'group_closed' : channelEntity.channel.typeIdent)
													+'.png'"/>
				</block>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<marginTop value="-5px"/>
						<marginRight value="9px"/>
						<marginLeft value="7px"/>
					</style>
					<block>
						<styleClass value="$Fullsize"/>
						<block className="text_input_caps_enter" type="native">
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_ENTER_CHANNEL_NAME'}"/>
							<style>
								<height value="29px"/>
								<width value="100%"/>
							</style>
							<block>
								<style>
									<width value="100%"/>
								</style>
								<block>
									<style>
										<position value="absolute"/>
										<width value="100%"/>
										<bottom value="-6px"/>
									</style>
									<bind name="instance" value="'WrongTextInputNotification'; isWrongName	? 	{_maxWidth : 350, _startTop: 10,
																							 	 _text: (textInput.length &lt; 3)	? tr('IDS_HINT_TITLE_TOO_SHORT')
																																: (tr('IDS_WRONG_TITLE') + '. ' + tr('IDS_TRY_ANOTHER_TITLE'))}
																							:	null"/>
								</block>
							</block>
							<params>
								<param name="actAsButton" value="true"/>
								<param name="maxChars" value="32"/>
								<param name="restrict" value="^&lt;&gt;"/>
								<param name="noTranslate" value="true"/>
							</params>
							<bind name="ubFocus" value="0; true; true; true"/>
							<bind name="text" value="channelName"/>
							<bind name="sync" value="'text'; 'change'; 'textInput'"/>
							<bind name="catch" value="'change'; {isWrongName : false}"/>
							<bind name="action" value="'textInputEnter'; 'renameChannel';
														{channelId: channelEntity.channel.channelId,
														 newName: (textInput == '') ?	channelEntity.channel.name
																						  :	(textInput.length &gt; 2)  ? textInput 
																						 							: channelEntity.channel.name}"/>
							<block className="button_dock" type="native">
								<styleClass value="$TextInputEnterButton"/>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CHANNEL_RENAME'}"/>
								<bind name="action" value="'buttonClick'; 'renameChannel';
														{channelId: channelEntity.channel.channelId,
														 newName: (textInput == '') ?	channelEntity.channel.name
																						  :	(textInput.length &gt; 2)  ? textInput 
																						 							: channelEntity.channel.name}"/>
							</block>
						</block>
						<block>
							<style>
								<marginLeft value="13px"/>
								<marginTop value="10px"/>
							</style>
							<bind name="instance" value="'CloseButton'; {
							_event: 'chatChannelRenameCancelled',
							_tooltipText: 'IDS_CANCEL' 
						}"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatParticipantItem">
		<bind name="dataRefDH" value="'participantEntity'; '$dataRef.ref'"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
		</style>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'PlayerContactItemWithRollover'; {_entityAccountId: participantEntity.id, _isShort: true, _playerContext: _playerContext, _channelId: _channelId }"/>
		</block>
	</block>
	<block className="OpenChannelElement">
		<bind name="dataRefDH" value="'itemEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'channelEntity'; itemEntity.id"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watch" value="'_active'; chatBoxVisible"/>
		<bind name="watchDH" value="'isChatBoxOpened'; ['channelEntity.channel.evChatBoxOpenChanged']; channelEntity.channel.isChatBoxOpened"/>
		<bind name="watchDH" value="'isPasswordNeeded';['channelEntity.channel.evOpenChanged'];channelEntity.channel.isWaitingPassword"/>
		<bind name="watchDH" value="'groupExpanded'; ['parentGroup.groupViewElements.evStateChanged']; parentGroup.groupViewElements.expanded"/>
		<bind name="watchDH" value="'isInvitation';['channelEntity.channel.evOpenChanged', 'channelEntity.channel.evInvitationRefused']; channelEntity.channel.isInvitation"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'selectedBattleType'; selectedBattleTypes[0].battleType.type"/>
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watch" value="'isClanDivision'; selectedBattleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<style>
			<height value="27px"/>
			<marginRight value="4px"/>
		</style>
		<bind name="clickSplit"/>
		<bind name="action" value="'left_click'; 'setChatBoxOpenedState'; {channelId: channelEntity.channel.channelId, opened: !(isChatBoxOpened)}"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evUpChannelWindow'; 'Tooltip.Open'; {behaviour: TooltipBehaviour.window}; true"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'channelTypeIdent';['channel.evTypeChanged']; channel.typeIdent"/>
		<bind name="watch" value="'isDivision'; channelTypeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE"/>
		<bind name="watch" value="'isSteadyChannel'; isIn(channelTypeIdent, [SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM])"/>
		<block>
			<style>
				<height value="100%"/>
			</style>
			<block className="OpenChannelElementBackground" type="ublock">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="build!" value="{	_rollOver: rollOver ? rollOver : false,
							_mouseDown: mouseDown ? mouseDown : false }"/>
			</block>
			<block>
				<style>
					<height value="100%"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="name" value="'openChannel_' + channelTypeIdent"/>
				<style>
					<height value="100%"/>
				</style>
				<bind name="menu" value="!isSteadyChannel	? 'ChatDropDownMenu' : 'EmptyItem' ;
						!isSteadyChannel	? { _dropDown: false, channelEntityId: itemEntity.id, _isDivision: isDivision }
											: null; null; null; 'chatDropDownMenuVisible'"/>
				<bind name="tooltip" value="'ChatBox'; {channelEntityId: channelEntity.id}; TooltipBehaviour.window; 'chatBoxVisible'; 'chatBoxState'; isChatBoxOpened"/>
				<bind name="tooltip" value="'OpenedChannelHintTooltip'; {	_isSteadyChannel: isSteadyChannel, _isChatBoxOpened: isChatBoxOpened, _isDivision: isDivision}"/>
				<bind name="transition" value="rollOver || _active || chatDropDownMenuVisible; 0.15; {alpha: _active ? 0.9 : 0.6 }; {alpha: 1}"/>
				<block>
					<bind name="transition" value="rollOver || isInvitation; 0.15; {alpha: _active ? 0.8 : 0.65}; {alpha: 1.0}"/>
					<style>
						<height value="100%"/>
						<marginLeft value="8px"/>
						<marginRight value="8px"/>
					</style>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<bind name="instance" value="'ChannelTitleWithIcon'; {channelEntityId: channelEntity.id, _bold: isDivision, _maxWidth: 120, _isClanDivision: isClanDivision}"/>
					</block>
					<block>
						<bind name="visible" value="!(isSteadyChannel)"/>
						<style>
							<marginTop value="8px"/>
							<marginLeft value="4px"/>
						</style>
						<block>
							<bind name="transition" value="rollOver || _active; 0.15; { alpha: _active ? 1 : 0.5 }; {alpha: 1.0}"/>
							<style>
								<marginLeft value="2px"/>
								<marginTop value="1px"/>
							</style>
							<bind name="instance" value="'CloseButton'; {
							_action: !(isInvitation || isPasswordNeeded)	? 'leaveChannel'
																			: isInvitation	? 'refuseInvitation'
																							: 'cancelEnterPassword',
							_actionParams: { channelId: channelEntity.channel.channelId },
							_tooltipText: isInvitation	? 'IDS_HINT_REJECT_INVITE'
														: 'IDS_CHANNEL_CLOSE'
						}"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ChannelTitleWithIcon">
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'countNewMessages'; ['channel.evCountNewMessagesChanged']; channel.countNewMessages"/>
		<bind name="watchDH" value="'isInvitation';['channel.evOpenChanged', 'channel.evInvitationRefused']; channel.isInvitation"/>
		<bind name="watchDH" value="'accountOnline'; ['channel.user.ref.accountStatus.evOnlineChanged']; channel.user.ref.accountStatus.online"/>
		<bind name="watchDH" value="'inBattle'; ['channel.user.ref.accountStatus.evInBattleChanged']; channel.user.ref.accountStatus.inBattle"/>
		<bind name="watchDH" value="'channelTypeIdent'; ['channel.evTypeChanged']; channel.typeIdent"/>
		<bind name="watch" value="'isDivision'; channelTypeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE "/>
		<bind name="watch" value="'isClanChat'; channelTypeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN "/>
		<bind name="watchDH" value="'rawChannelName'; ['channel.evNameChanged', 'channel.user', 'channel.user.ref.accountName.evChanged'];		(channel.nameIds != null)		? tr(channel.nameIds) :
																																(channel.user.ref != null)		? channel.user.ref.accountName.nickName
																																								: channel.name"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'isMercenary'; ['selfPlayerEntity.preBattlePlayerSimple.evIsMercenaryChanged']; selfPlayerEntity.preBattlePlayerSimple.isMercenary"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'preBattleOwnerId'; ['preBattleEntity.preBattle.evOwnerIdChanged']; preBattleEntity.preBattle.ownerId"/>
		<bind name="primaryEntityDH" value="'preBattleOwnerPlayerEntity'; CC.preBattlePlayerSimple; preBattleOwnerId"/>
		<bind name="watchDH" value="'clanId'; ['preBattleOwnerPlayerEntity.clanman.evClanIdChanged']; preBattleOwnerPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged']; clanTeamEntity.clanTeam.squadId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="watch" value="'isLeadingSquad'; squadId == leadingSquadId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watchDH" value="'selfClanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'selfClanEntity'; CC.clan; selfClanId"/>
		<bind name="watchDH" value="'selfClanTag'; ['selfClanEntity.clan.evTagChanged']; selfClanEntity.clan.tag"/>
		<bind name="watchDH" value="'selfClanName'; ['selfClanEntity.clanExtended.evNameChanged']; selfClanEntity.clanExtended.name"/>
		<bind name="watch" value="'isShowClanSquadModifier'; hasClanSquadModifier &amp;&amp; !isMercenary"/>
		<bind name="name" value="_channelHeader	? '' :
				isDivision		? ('channelTitle_' + channelTypeIdent) :
				isClanChat		? ('channelTitle_' + clanTag)
 								: ''"/>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="19px"/>
					<height value="19px"/>
					<marginTop value="4px"/>
					<marginRight value="2px"/>
				</style>
				<bind name="style" value="'backgroundImage';		'url:../service_kit/chat_channels/'+
												(	isInvitation						? 'group_open' :
													channel.isSecured					? 'group_closed' :
													isDivision							? 'division'
																						: channelTypeIdent)
												+'.png'"/>
			</block>
			<block>
				<bind name="style" value="'marginTop'; _bold ? '-1px' : 'auto'"/>
				<block>
					<bind name="visible" value="(!(accountOnline) || inBattle) &amp;&amp; (channel.user.ref != null)"/>
					<style>
						<marginLeft value="1px"/>
						<marginRight value="1px"/>
					</style>
					<bind name="style" value="'marginTop'; _bold ? '3px' : '2px'"/>
					<block className="icon_player_status" type="native">
						<bind name="gotoAndStop!" value="inBattle ? 'in_battle'
												 : 'not_ready'"/>
					</block>
				</block>
				<block type="text">
					<bind name="name" value="_channelHeader	? '' :
							isDivision 		? ('channelName_' + channelTypeIdent) :
							isClanChat		? ('channelName_' + clanInfo.tag)
											: ''"/>
					<style>
						<multiline value="false"/>
					</style>
					<styleClass value="$FontFamilyDefault"/>
					<style>
						<noTranslate value="true"/>
					</style>
					<bind name="style" value="'maxWidth'; _maxWidth"/>
					<bind name="style" value="'alpha';	isDivision 														? 1 :
										!accountOnline &amp;&amp; _channelHeader &amp;&amp; (channel.user.ref != null)	? 0.45
																										: 0.75"/>
					<bind name="style" value="'marginTop'; ((_channelName.length &gt; 27) &amp;&amp; (_channelHeader)) ? '2px' : '0px'"/>
					<bind name="class" value="((_channelName.length &gt; 27) &amp;&amp; (_channelHeader)) ? '$FontSize14' : '$FontSizeLarge'"/>
					<bind name="class" value="_bold ? '$Bold' : '$None'"/>
					<bind name="class" value="isDivision		? '$FontColorGolden'
											: '$FontColorWhite'"/>
					<bind name="watch" value="'_channelName'; 	isClanChat						?	'['+selfClanTag+'] ' + selfClanName :
												isDivision &amp;&amp; _isClanDivision	?	'['+clanTag+'] ' + tr( isShowClanSquadModifier ? 'IDS_CLAN_SQUAD_' + squadId : 'IDS_DIVISION' ) :
											 	isDivision						? 	tr('IDS_DIVISION')
																				: (rawChannelName + ((channel.ownerNickName != null &amp;&amp; _isSearch)	? ' (' + channel.ownerNickName + ')'
																																					: ''))"/>
					<bind name="text" value="!isClanChat					?	_channelName :
							selfClanTag &amp;&amp; selfClanName	?	_channelName : 'IDS_CLAN_CHAT_HEADER'"/>
				</block>
				<block>
					<bind name="watch" value="'isLeadingIconVisible'; isDivision &amp;&amp; _isClanDivision &amp;&amp; isShowClanSquadModifier &amp;&amp; isLeadingSquad"/>
					<bind name="visible" value="isLeadingIconVisible"/>
					<style>
						<hitTest value="false"/>
						<marginRight value="4px"/>
						<marginLeft value="4px"/>
						<marginTop value="4px"/>
					</style>
					<bind name="instance" value="'LeadingClanSquadIcon'; isLeadingIconVisible ? { _isGolden: true } : null"/>
				</block>
				<block type="text">
					<bind name="fade" value="countNewMessages != 0; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<styleClass value="$TextDefault"/>
					<style>
						<marginTop value="2px"/>
					</style>
					<bind name="class" value="_bold ? '$Bold' : '$None'"/>
					<bind name="class" value="isDivision	? '$FontColorGolden':
							isClanChat	? '$FontColorWhite'
										: '$None'"/>
					<bind name="class" value="_channelHeader ? '$FontColorBlueish' : '$None'"/>
					<bind name="style" value="'width'; countNewMessages &lt; 10 ? 7 : 16"/>
					<bind name="pureText" value="(countNewMessages==0) ? '' : '(' + countNewMessages + ')'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="InvitationToChatItem">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'channelName'; ['channel.evNameChanged', 'channel.user', 'channel.user.ref.accountName.evChanged']; (channel.nameIds != null) ? tr(channel.nameIds) : (channel.user.ref != null) ? channel.user.ref.accountName.nickName : channel.name"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<style>
				<marginBottom value="12px"/>
			</style>
			<block type="text">
				<bind name="visible" value="channel.invitationFromEntityId == -1"/>
				<styleClass value="$TextDefault18NM"/>
				<style>
					<noTranslate value="true"/>
				</style>
				<bind name="text" value="channel.invitationFromNickName"/>
			</block>
			<bind name="instance" value="'PlayerContactItem'; (channel.invitationFromEntityId != -1) ? { _entityAccountId: channel.invitationFromEntityId, _notTrancated: true } : null"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefault18NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<bind name="text" value="'IDS_INVITE_TO_THE_CHANNEL'"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefault18NM"/>
			<style>
				<marginBottom value="16px"/>
				<noTranslate value="true"/>
			</style>
			<bind name="text" value="channelName"/>
		</block>
		<block>
			<style>
				<marginBottom value="16px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault20NM"/>
				<bind name="class" value="'$FontSizeHeader4'"/>
				<bind name="countdown" value="channel.refuseInvitationTimeExpiration; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="countdownText"/>
			</block>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_AUTOMATE_CANCEL'}"/>
		</block>
		<block>
			<bind name="instance" value="'DefaultButton';	{	_width: '210px',
												_enabled: true,
												_label: 'IDS_ACCEPT_INVITATION',
												_action: 'joinChannel',
												_actionParams: {channelId: channelEntity.channel.channelId}}
											"/>
		</block>
	</block>
	<block className="EnterPasswordChatItem">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evWrongPassword'; 'evWrongPassword'; {}; true"/>
		<bind name="var" value="{_wrongPassword: false}"/>
		<bind name="catch" value="'evWrongPassword'; {_wrongPassword : true}"/>
		<bind name="action" value="'passwordInputComplete'; 'joinChannel'; {channelId: channelEntity.channel.channelId, password: channelPasswordInput}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextClosedChannel"/>
				<style>
					<marginBottom value="6px"/>
				</style>
				<bind name="text" value="toUpperCase(tr('IDS_CLOSED_CHANNEL'))"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<styleClass value="$MiddleAligned"/>
				<default_text value="IDS_HINT_ENTER_PASSWORD"/>
			</block>
			<block>
				<style>
					<width value="200px"/>
					<marginTop value="10px"/>
					<height value="30px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<block className="text_input_caps_enter" type="native">
					<styleClass value="$Fullsize"/>
					<block>
						<block>
							<style>
								<position value="absolute"/>
								<width value="200px"/>
								<bottom value="-6px"/>
							</style>
							<bind name="instance" value="'WrongTextInputNotification'; _wrongPassword	? 	{_maxWidth : 200, _startTop: 10,
																							_text: tr('IDS_WRONG_PASSWORD_TRY_AGAIN')}
																						:	null"/>
						</block>
					</block>
					<params>
						<param name="actAsButton" value="true"/>
						<param name="maxChars" value="16"/>
						<param name="noTranslate" value="true"/>
					</params>
					<bind name="ubFocus" value="0; true; true; true"/>
					<bind name="sync" value="'text'; 'change'; 'channelPasswordInput'"/>
					<bind name="catch" value="'change'; {_wrongPassword : false}"/>
					<bind name="dispatch" value="'textInputEnter'; 'passwordInputComplete'"/>
					<block className="button_dock" type="native">
						<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_JOIN'}"/>
						<styleClass value="$TextInputEnterButton"/>
						<bind name="enabled" value="channelPasswordInput.length &gt; 0"/>
						<bind name="dispatch" value="'buttonClick'; 'passwordInputComplete'"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="ChatBoxHeaderControls">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="watchDH" value="'isInvitation'; 		['channelEntity.channel.evOpenChanged', 'channelEntity.channel.evInvitationRefused']; channelEntity.channel.isInvitation"/>
		<bind name="watchDH" value="'isPasswordNeeded'; 	['channelEntity.channel.evOpenChanged']; channelEntity.channel.isWaitingPassword"/>
		<bind name="watchDH" value="'typeIdent'; 		['channelEntity.channel.evTypeChanged']; channelEntity.channel.typeIdent"/>
		<bind name="watch" value="'isTrainingRoom'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM"/>
		<bind name="watch" value="'isDivision'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE "/>
		<bind name="firstEntityDH" value="'tournamentRoomInfoEntity'; CC.tournamentRoomInfo"/>
		<bind name="watchDH" value="'isTournamentRoomInfo'; []; tournamentRoomInfoEntity.hasComponent(CC.tournamentRoomInfo)"/>
		<style>
			<height value="100%f"/>
			<flow value="horizontal"/>
		</style>
		<block className="button_collapse" type="native">
			<bind name="name" value="'collapseChatWindow'"/>
			<params>
				<param name="name" value="button_collapse"/>
			</params>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_COLLAPSE_WINDOW'}"/>
			<bind name="dispatch" value="'click'; 'Tooltip.Close'"/>
			<bind name="action" value="'click'; 'setChatBoxOpenedState'; {channelId: channelEntity.channel.channelId, opened: false}"/>
		</block>
		<block>
			<params>
				<param name="name" value="ChatboxButtonClose"/>
			</params>
			<style>
				<marginLeft value="7px"/>
				<marginTop value="1px"/>
			</style>
			<bind name="instance" value="'CloseButton'; _showCloseButton ? { _action:	isTrainingRoom		? '' :
																		isInvitation		? 'refuseInvitation' :
																		isPasswordNeeded 	? 'cancelEnterPassword' :
																		!isDivision			? 'leaveChannel'
																							: '',
															_actionParams: isDivision || isTrainingRoom ? {} : { channelId: channelEntity.channel.channelId },
															_request:	isTrainingRoom	? 'closeTrainingRoom' :
																		isDivision		? 'leaveDivision'
																						: '',
															_requestParams: { subtitle:	'IDS_LEAVE_DIVISION_QUESTION' },
															_tooltipText:	isInvitation			? 'IDS_HINT_REJECT_INVITE' :
																			isTournamentRoomInfo	? 'IDS_TOURNAMENT_ROOM_QUITING' :
																			isTrainingRoom			? 'IDS_TRAINING_ROOM_QUITING' :
																			isDivision				? 'IDS_LEAVE_DIVISION'
																									: 'IDS_CHANNEL_CLOSE' }
														: null"/>
		</block>
	</block>
	<block className="OpenedChannelHintTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text:	_isChatBoxOpened	? 'IDS_HINT_COLLAPSE_WINDOW' :
																_isDivision		? 'IDS_HINT_EXPAND_WINDOW'
																				: 'IDS_HINT_LEFT_CLICK_TO_OPEN_CHAT' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!_isSteadyChannel"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; !_isSteadyChannel	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT,
																			_text: 'IDS_HINT_RIGHT_CLICK_FOR_CONTEXT_MENU' }
																		: null"/>
			</block>
		</block>
	</block>
	<block className="ChannelMessageRenderer">
		<style>
			<width value="100%"/>
			<position value="virtual"/>
		</style>
		<bind name="style" value="'hitTest'; ((messageEntity.channelMessage.extraData != null) || isSuspended ? false : true)"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="dataRefDH" value="'messageEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'senderDBId'; []; messageEntity.channelMessage.senderDBId"/>
		<bind name="entityDH" value="'currentChannelEntity'; _currentChannelEntityId"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; messageEntity.channelMessage.senderDBId"/>
		<bind name="watchDH" value="'isSuspended'; ['playerEntity.accountSimple.evSuspendedChanged']; playerEntity.accountSimple.suspended"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="menu" value="'ContactContextMenu';	senderDBId != selfPlayerDbId	?	{	_entityAccountId: playerEntity.id,
																				_playerContext: {type: 'startPrivateChat'}, 
																				_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON,
																				_channelId: currentChannelEntity.channel.channelId }
																		:	null; null; null; 'contactContextMenuVisible'"/>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="(mouseDown || contactContextMenuVisible || rollOver); 0.1; {alpha: 0}; {alpha: 1}"/>
			<block className="dock_submenu_item_bg" type="native">
				<bind name="transition" value="contactContextMenuVisible; 0.1; {alpha: 1}; {alpha: 0.7}"/>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="messageEntity.channelMessage.extraData == null"/>
			<block type="text">
				<style>
					<width value="38px"/>
					<marginLeft value="8px"/>
					<marginTop value="2px"/>
					<fontSize value="14"/>
					<fontFamily value="$DefaultFont"/>
				</style>
				<bind name="text" value="messageEntity.channelMessage.time"/>
			</block>
			<block type="text">
				<bind name="visible" value="!isSuspended"/>
				<styleClass value="$FontFamilyDefault"/>
				<style>
					<width value="100%"/>
					<marginRight value="10px"/>
					<leading value="-3"/>
					<fontSize value="16"/>
					<selectable value="true"/>
				</style>
				<bind name="text" value="messageEntity.channelMessage.message"/>
				<bind name="name" value="'MessageListItem_' + messageEntity.channelMessage.id"/>
			</block>
			<block type="text">
				<bind name="visible" value="isSuspended"/>
				<styleClass value="$TextDefault"/>
				<style>
					<width value="100%"/>
					<marginRight value="10px"/>
					<leading value="-3"/>
					<selectable value="false"/>
					<alpha value="0.4"/>
				</style>
				<bind name="text" value="'IDS_REMOVED_CHAT_MESSAGE'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'CVCMessageRenderer'; messageEntity.channelMessage.extraData != null ? {_entityId: messageEntity.id} : null"/>
		</block>
	</block>
	<block className="CVCMessageRenderer">
		<bind name="entityDH" value="'messageEntity'; _entityId"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<marginLeft value="8px"/>
				<marginTop value="2px"/>
				<width value="36px"/>
				<alpha value="0.25"/>
				<fontSize value="13"/>
				<fontFamily value="$DefaultFont"/>
			</style>
			<bind name="class" value="'$FontColorDefault'"/>
			<bind name="text" value="messageEntity.channelMessage.time"/>
		</block>
		<bind name="watch" value="'battleResultText';	messageEntity.channelMessage.extraData.battleResult == 'defeat'		? tr('IDS_DEFEAT') :
										messageEntity.channelMessage.extraData.battleResult == 'victory'	? tr('IDS_VICTORY')
																											: tr('IDS_DRAW')"/>
		<bind name="watch" value="'rating';			messageEntity.channelMessage.extraData.ratingDelta"/>
		<bind name="watch" value="'battleResult';	messageEntity.channelMessage.extraData.battleResult"/>
		<bind name="watch" value="'rating';			messageEntity.channelMessage.extraData.rating"/>
		<bind name="watch" value="'league';			messageEntity.channelMessage.extraData.league"/>
		<bind name="watch" value="'division';		messageEntity.channelMessage.extraData.division"/>
		<bind name="watch" value="'stage';			messageEntity.channelMessage.extraData.stage"/>
		<bind name="watch" value="'toLeagueId';		messageEntity.channelMessage.extraData.toLeagueId"/>
		<bind name="watch" value="'toDivisionId';	messageEntity.channelMessage.extraData.toDivisionId"/>
		<bind name="watch" value="'progress';		messageEntity.channelMessage.extraData.progress"/>
		<bind name="watch" value="'ratingDelta';		messageEntity.channelMessage.extraData.ratingDelta"/>
		<bind name="watch" value="'stageResult';		messageEntity.channelMessage.extraData.stageResult"/>
		<bind name="watch" value="'squadId';			messageEntity.channelMessage.extraData.squadId"/>
		<bind name="watch" value="'ratingDeltaStr';	ratingDelta &gt; 0 ? ('+' + ratingDelta) : ratingDelta"/>
		<bind name="watch" value="'clanLeagueStr';	(stageResult == 'division_victory') 	? 'IDS_CLAN_BATTLE_RAISED_DIVISION' :
									(stageResult == 'division_defeat') 		? 'IDS_CLAN_BATTLE_DESCENDED_DIVISION' :
									(stageResult == 'promotion_victory') 	? 'IDS_CLAN_BATTLE_RAISED_LEAGUE' :
									(stageResult == 'promotion_defeat') 	? 'IDS_CLAN_PROMOTION_LOSE_BATTLE_FOR_LEAGUE' :
									(stageResult == 'demotion_victory') 	? 'IDS_CLAN_DEMOTION_WON_BATTLE_FOR_LEAGUE' :
									(stageResult == 'demotion_defeat') 		? 'IDS_CLAN_BATTLE_DESCENDED_LEAGUE':
									(stage == 'promotion')					? subst('IDS_CLAN_PROMOTION_BATTLE_FOR_LEAGUE', [], {leagueIndex: toLeagueId}) :
									(stage == 'demotion')					? subst('IDS_CLAN_DEMOTION_BATTLE_FOR_LEAGUE', [], {leagueIndex: toLeagueId})
																			: ''"/>
		<bind name="watch" value="'place';		messageEntity.channelMessage.extraData.place"/>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="1px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-3px"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="16"/>
					</style>
					<bind name="class" value="	(battleResult == 'defeat') 	? '$FontColorCompareNegative':
								(battleResult == 'draw') 	? '$FontColorBlueish'
															: '$FontColorGreen'"/>
					<styleClass value="$FontFamilyDefaultBold"/>
					<bind name="text" value="battleResultText"/>
				</block>
				<block type="text">
					<bind name="visible" value="ratingDeltaStr != 0 "/>
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="16"/>
					</style>
					<bind name="class" value="'$FontFamilyDefaultBold'"/>
					<bind name="class" value="	(battleResult == 'defeat') 	? '$FontColorCompareNegative':
								(battleResult == 'draw') 	? '$FontColorBlueish'
															: '$FontColorGreen'"/>
					<bind name="text" value="ratingDeltaStr"/>
				</block>
				<block>
					<bind name="visible" value="progress != null"/>
					<style>
						<marginTop value="-4px"/>
					</style>
					<bind name="repeat" value="progress; 'ClanBattleResultsStarStatic'; { _width: '30px', _height: '30px', _smallSize: true }"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block type="text">
				<style>
					<marginRight value="4px"/>
					<leading value="-2"/>
					<fontSize value="16"/>
				</style>
				<bind name="class" value="(stage == 'league') 	? '$FontFamilyDefaultBold' 		: '$FontFamilyDefault'"/>
				<bind name="class" value="(stage == 'league') 	? 	(battleResult == 'defeat') 	? '$FontColorCompareNegative':
												  	(battleResult == 'draw') 	? '$FontColorBlueish'
																				: '$FontColorGreen'
												: '$FontColorDefault'"/>
				<bind name="text" value="clanLeagueStr"/>
			</block>
			<block>
				<style>
					<marginTop value="-3px"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="16"/>
					</style>
					<bind name="class" value="'$FontColorDefault'"/>
					<styleClass value="$FontFamilyDefault"/>
					<bind name="text" value="tr('IDS_CLAN_SQUAD_' + squadId) + ','"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="16"/>
					</style>
					<bind name="class" value="'$FontColorDefault'"/>
					<styleClass value="$FontFamilyDefault"/>
					<bind name="text" value="tr('IDS_CLAN_LEAGUE_' + league)"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="16"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$FontFamilyDefaultBold"/>
					<bind name="class" value="'$FontColorDefault'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_BATTLES_LOGO_DIVISION'}; TooltipBehaviour.simple"/>
					<bind name="text" value="toRoman(division)"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="16"/>
					</style>
					<styleClass value="$FontFamilyDefault"/>
					<bind name="class" value="'$FontColorDefault'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_BATTLES_LOGO_RATING'}; TooltipBehaviour.simple"/>
					<bind name="text" value="rating"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ClanSquadRatingInfo">
		<bind name="dataRefDH" value="'itemEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'clanSquadEntity'; _clanSquadEntityId ? _clanSquadEntityId : itemEntity.id"/>
		<bind name="watchDH" value="'league'; 	['clanSquadEntity.clanSquadLadderInfo.evLeagueIdChanged']; 		clanSquadEntity.clanSquadLadderInfo.leagueId"/>
		<bind name="watchDH" value="'division'; 	['clanSquadEntity.clanSquadLadderInfo.evDivisionIdChanged']; 	clanSquadEntity.clanSquadLadderInfo.divisionId"/>
		<bind name="watchDH" value="'rating'; 	['clanSquadEntity.clanSquadLadderInfo.evRatingChanged'];		clanSquadEntity.clanSquadLadderInfo.rating"/>
		<bind name="watch" value="'isLeading'; clanSquadEntity.clanSquadLadderInfo.squadId == _leadingSquadId"/>
		<bind name="watch" value="'selected'; _selected || _currentSquad == clanSquadEntity.clanSquadLadderInfo.squadId"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'alpha'; selected ? 1.0 : 0.8"/>
		<block>
			<style>
				<marginTop value="12px"/>
				<marginLeft value="12px"/>
				<marginBottom value="12px"/>
			</style>
			<block>
				<block type="text">
					<styleClass value="$TextDefaultBold18NM"/>
					<bind name="class" value="selected ? '$FontColorGolden' : '$FontColorDefault'"/>
					<bind name="text" value="tr('IDS_CLAN_SQUAD_' + clanSquadEntity.clanSquadLadderInfo.squadId)"/>
				</block>
				<block>
					<bind name="visible" value="isLeading"/>
					<style>
						<marginLeft value="8px"/>
						<marginTop value="-3px"/>
						<marginBottom value="-4px"/>
					</style>
					<bind name="instance" value="'LeadingClanSquadIcon'; isLeading ? { _isGolden: selected } : null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="8px"/>
						<leading value="-3"/>
					</style>
					<styleClass value="$TextDefault18NM"/>
					<bind name="text" value="tr('IDS_CLAN_LEAGUE_' + league)"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="8px"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextDefaultBold18NM"/>
					<bind name="text" value="toRoman(division)"/>
				</block>
				<block type="text">
					<style>
						<leading value="-3"/>
					</style>
					<styleClass value="$TextDefault18NM"/>
					<bind name="text" value="rating"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block type="text">
				<bind name="visible" value="isLeading"/>
				<style>
					<marginTop value="12px"/>
				</style>
				<styleClass value="$TextDefault18NM"/>
				<bind name="text" value="'IDS_LEADING_CLAN_SQUAD'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="selected"/>
			<style>
				<right value="12px"/>
				<top value="12px"/>
				<position value="absolute"/>
			</style>
			<block className="icon_check" type="native"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
	</block>
	<block className="DivisionHeaderTooltip">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged'];	clanTeamEntity.clanTeam.squadId"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="250px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_isClanDivision &amp;&amp; hasClanSquadModifier"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="collectionRepeatDH" value="CC.clanSquadLadderInfo; 'ClanSquadRatingInfo'; ''; {_currentSquad: squadId, _leadingSquadId: leadingSquadId}"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
				<marginLeft value="10px"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'MouseInstruction'; { _type: 'left', _instructionText: 'IDS_HINT_CLICK_TO_CHOOSE_ACTION', _maxWidth: 220 }"/>
		</block>
	</block>
	<block className="PrimeTimeStereotype">
		<bind name="entityDH" value="'primeTimeEntity'; _entityId"/>
		<bind name="watchDH" value="'primeTimeStartTime'; 	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeStartTime"/>
		<bind name="watchDH" value="'primeTimeFinishTime'; 	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift'; 		['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.daylightshift"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'isActivePrimeTime'; (primeTimeStartTime - daylightshift &lt;= serverTime) &amp;&amp; (serverTime &lt;= primeTimeFinishTime - daylightshift)"/>
		<bind name="watchDH" value="'primeTimeRealm'; 		['primeTimeEntity.clanBattlePrimeTime.evChanged']; primeTimeEntity.clanBattlePrimeTime.realm"/>
		<bind name="watchDH" value="'primeTimeIsChosen'; 	['primeTimeEntity.clanBattlePrimeTime.evChanged']; primeTimeEntity.clanBattlePrimeTime.isChosen"/>
		<bind name="watchDH" value="'primeTimeIsFixed'; 		['primeTimeEntity.clanBattlePrimeTime.evChanged']; primeTimeEntity.clanBattlePrimeTime.isFixed"/>
		<bind name="watch" value="'textSize'; _textSize ? _textSize : _isBig ? '$FontSizeLarge' : '$None'"/>
		<bind name="watch" value="'textColorClass'; _textColor ? _textColor : '$FontColorGolden'"/>
		<bind name="timeFormat" value="primeTimeFinishTime - daylightshift; 'hh:mm'; 'localFinishTime'; true"/>
		<bind name="timeFormat" value="primeTimeStartTime - daylightshift; 'hh:mm'; 'localStartTime'; true"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="watch" value="'isGlobal'; currentRegion != 'RU'"/>
		<bind name="watch" value="'realm'; ' / ' + tr('IDS_REALM_NO_TRANSLATE_' + toUpperCase(primeTimeRealm))"/>
		<style>
			<width value="100%f"/>
		</style>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<block type="text">
				<style>
					<multiline value="false"/>
				</style>
				<styleClass value="$TextDefaultNM"/>
				<bind name="class" value="textSize"/>
				<bind name="class" value="_isBold ? '$Bold' : '$None'"/>
				<bind name="class" value="textColorClass"/>
				<bind name="text" value="localStartTime + '' + localFinishTime + (isGlobal ? realm : '')"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- chat_notifications_panel -->
	<block className="ChatNotificationsPanel">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'routeEntityisInShipyard'; CC.route; SC.Ui_windows.ROUTE.SHIPYARD"/>
		<bind name="watchDH" value="'isInShipyard'; ['routeEntityisInShipyard.route.evIsActiveChanged']; routeEntityisInShipyard.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInStrategicActions'; CC.route; SC.Ui_windows.ROUTE.STRATEGIC_ACTIONS"/>
		<bind name="watchDH" value="'isInStrategicActions'; ['routeEntityisInStrategicActions.route.evIsActiveChanged']; routeEntityisInStrategicActions.route.isActive"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'showPortClockEntity'; CC.preference; 'ui.showPortClock'"/>
		<bind name="watchDH" value="'showPortClock'; ['showPortClockEntity.preference.evValueChanged']; showPortClockEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'selfVoiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEnabledEntity.preference.evValueChanged']; selfVoiceChatEnabledEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isLoadingBattle'; isIn('LoadingBattle', windowQueue)"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watch" value="'isNotificationLogHidden'; isLoadingBattle || isInStrategicActions"/>
		<bind name="primaryEntityDH" value="'selfPlayerVoiceChatEntity'; CC.playerVoiceState; selfPlayerName"/>
		<bind name="watchDH" value="'selfPlayerVoiceChatIsSpeaking'; ['selfPlayerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; selfPlayerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="watch" value="'isChatNotificationsPanelVisibility'; !isIn('ModalWindowSse', windowQueue)"/>
		<bind name="var" value="{_playerContext: {type: 'startPrivateChat'}}"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$BottomMenu"/>
			<style>
				<marginTop value="-1px"/>
			</style>
			<bind name="fade" value="isChatNotificationsPanelVisibility; isChatNotificationsPanelVisibility ? 0.15 : 0;	{alpha: 0, top: 10};
																										{alpha: 1, top: 0};
																										{alpha: 0, top: 10}; 1; isChatNotificationsPanelVisibility ? 0.1 : 0"/>
			<block>
				<styleClass value="$Fullsize"/>
				<block>
					<bind name="visible" value="!isInShipyard &amp;&amp; !isInStrategicActions"/>
					<styleClass value="$Fullsize"/>
					<block>
						<style>
							<marginLeft value="8px"/>
						</style>
						<block className="ContactsAndChannelsInfotipButton" type="ublock">
							<bind name="build!" value="{}"/>
						</block>
					</block>
					<block>
						<bind name="fade" value="(divisionDataEntity &amp;&amp; selfVoiceChatEnabled); 0.15; {scaleY: 0, ubScaleY: 0, alpha: 0}; {scaleY: 1, ubScaleY: 1, alpha: 1}; {scaleY: 0, ubScaleY: 0, alpha: 0}; 2; 1.5"/>
						<style>
							<marginLeft value="8px"/>
							<marginRight value="-7px"/>
							<marginTop value="4px"/>
							<width value="19px"/>
							<height value="17px"/>
						</style>
						<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isSpeaking: selfPlayerVoiceChatIsSpeaking}"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<height value="27px"/>
							<marginTop value="-2px"/>
							<marginLeft value="12px"/>
							<overflow value="scroll"/>
							<scrollArea value="ModernScrollAreaHorizontal"/>
							<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
							<wheelScrollSpeed value="100"/>
						</style>
						<bind name="collectionDH" value="CC.channel; 'openedChannels'; 'openedChannels'"/>
						<bind name="scopeHoldRepeat" value="openedChannels; 'OpenChannelElement'; 'id'"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<paddingRight value="8px"/>
				</style>
				<bind name="clock" value="'timeText'; 'hh:mm'"/>
				<block className="NotificationPanel" type="ublock">
					<bind name="build!" value="{ _timeText: timeText}"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="tooltip" value="'SystemNotificationTooltip'; {}; TooltipBehaviour.window; null; null; true"/>
		</block>
	</block>
	<block className="SystemNotificationTooltip">
		<bind name="stageSize"/>
		<style>
			<width value="1px"/>
			<height value="1px"/>
		</style>
		<bind name="style" value="'width'; stageWidth"/>
		<bind name="style" value="'height'; stageHeight"/>
		<block className="SystemNotificationContainer" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>

	<!-- check_box -->
	<block className="CheckBox">
		<bind name="name" value="_name"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _statusTooltipData ? _statusTooltipData : null"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'alpha'; _disabled ? 0.4 : 1"/>
		<block>
			<style>
				<position value="absolute"/>
				<height value="20px"/>
				<width value="20px"/>
				<background9Slice value="[4,4]"/>
				<backgroundImage value="url:../service_kit/buttons/check_box/background.png"/>
			</style>
		</block>
		<block>
			<bind name="transition" value="mouseDown; 0.05; {alpha: 1}; {alpha: 0.6}"/>
			<block>
				<bind name="transition" value="rollOver; 0.05; {alpha: 0}; {alpha: 1}"/>
				<style>
					<height value="20px"/>
					<width value="20px"/>
					<background9Slice value="[4,4]"/>
					<backgroundImage value="url:../service_kit/buttons/check_box/over.png"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="_isChecked"/>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 0.75}; {alpha: 1}"/>
				<style>
					<position value="absolute"/>
					<height value="20px"/>
					<width value="20px"/>
					<alpha value="0.75"/>
					<backgroundImage value="url:../service_kit/buttons/check_box/check_icon.png"/>
				</style>
			</block>
			<block>
				<style>
					<height value="20px"/>
				</style>
				<bind name="transition" value="_customLabelInstance &amp;&amp; rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 0.75}; {alpha: 1}"/>
				<bind name="instance" value="_customLabelInstance; _customLabelInstance ? _customLabelInstanceParams : null"/>
			</block>
			<block>
				<bind name="instance" value="'CheckBoxTextLabel'; _label ? {_maxTfWidth: _maxTfWidth, _label: _label, _rollOver: rollOver} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="soundSet" value="'check_box'"/>
			<bind name="style" value="'hitTest'; !_disabled"/>
			<bind name="action" value="'click';		_action 	? _action : null; 	_actionParams 	? _actionParams : {}"/>
			<bind name="request" value="'click'; 	_request 	? _request : null; 	_requestParams 	? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; 	_dispatch 	? _dispatch : null; _dispatchParams ? _dispatchParams : null"/>
			<bind name="directEvent" value="'click'; _directEvent	? _directEvent 	: null; _directEventParams	? _directEventParams: {}"/>
		</block>
	</block>
	<block className="CheckBoxTextLabel">
		<style>
			<marginLeft value="8px"/>
			<marginTop value="4px"/>
		</style>
		<bind name="transition" value="_rollOver; 0.05; {alpha: 0.75}; {alpha: 0.9}"/>
		<block type="text">
			<styleClass value="$TextDefault18NM"/>
			<bind name="style" value="'maxWidth'; _maxTfWidth ? _maxTfWidth : 300"/>
			<bind name="text" value="_label"/>
		</block>
	</block>

	<!-- common_elements -->
	<block className="DropdownInfotip">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<block className="InfotipBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="InfotipPanelBg">
				<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
				<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
				<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
				<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
						<styleClass value="$Fullsize"/>
						<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:true }"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="instance" value="_dropdownContentElement; { _menuScope: _menuScope }"/>
		</block>
	</block>
	<block className="InstructionParagraph">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 220"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="InstructionMultiParagraph">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block className="icon_instruction" type="native">
			<bind name="gotoAndStop!" value="_type"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-3px"/>
			</style>
			<bind name="repeat" value="_instructionArray; 'InstructionParagraph'"/>
		</block>
	</block>
	<block className="InstructionWarning">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_warning_orange" type="native"/>
		<block type="text">
			<style>
				<marginTop value="-4px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<styleClass value="$WarningTextOrange"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="InstructionRestricion">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_restrict_red" type="native"/>
		<block type="text">
			<style>
				<marginTop value="-3px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<styleClass value="$WarningTextRed"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="MouseInstruction">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="_type!='no_icon'"/>
			<block className="icon_mouse" type="native">
				<bind name="gotoAndStop!" value="_type"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'marginLeft'; (_type=='no_icon') ? '0px' : '4px'"/>
			<style>
				<marginTop value="-2px"/>
			</style>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="MouseInstructionRepeater">
		<bind name="style" value="'marginBottom'; $index != _lastIndex ? '6px' : '0px'"/>
		<bind name="instance" value="'MouseInstruction'; _type == 'warning' || _type == 'restriction'	? null
																						: { _type: _type, _instructionText: _instructionText,
																							_maxWidth: _maxWidth, _leading: _leading}"/>
		<bind name="instance" value="'InstructionWarning'; _type == 'warning' ? {_instructionText: _instructionText, _maxWidth: _maxWidth, _leading: _leading} : null"/>
		<bind name="instance" value="'InstructionRestricion'; _type == 'restriction' ? {_instructionText: _instructionText, _maxWidth: _maxWidth, _leading: _leading} : null"/>
	</block>
	<block className="CheckedLine">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_check" type="native">
			<style>
				<marginLeft value="2px"/>
				<marginTop value="8px"/>
			</style>
			<bind name="visible" value="!_isCheckMarkHidden"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<width value="288px"/>
				<marginTop value="-2px"/>
				<multiline value="false"/>
			</style>
			<bind name="class" value="'$FontColorGolden'"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'marginLeft'; _isCheckMarkHidden ? '0' : '5px'"/>
			<bind name="text" value="_checkedLineText"/>
		</block>
	</block>
	<block className="CheckedLineRepeater">
		<bind name="style" value="'marginBottom'; $index != _lastIndex ? '6px' : '-2px'"/>
		<bind name="instance" value="'CheckedLine'; { _isCheckMarkHidden: _isCheckMarkHidden, _checkedLineText: _checkedLineText, _maxWidth: _maxWidth}"/>
	</block>
	<block className="InstructionBigTech">
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault18NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<style>
				<textAlign value="center"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 500"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="EmptyStatusParagraph">
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="_sizeClass ? _sizeClass : '$FontSizeLarge'"/>
			<bind name="class" value="'$FontColorWhite'"/>
			<style>
				<textAlign value="center"/>
				<alpha value="0.45"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 250"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ContextMenuBg">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
	</block>
	<block className="DefaultMenuItemBackground">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<block className="MenuItemBackground" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{ _state:	_isDisabled			? SC.Ui_styles.BUTTON_STATE.DISABLED :
								isSelected			? SC.Ui_styles.BUTTON_STATE.SELECTED :
								mouseDown			? SC.Ui_styles.BUTTON_STATE.DOWN :
								rollOver			? SC.Ui_styles.BUTTON_STATE.OVER
													: SC.Ui_styles.BUTTON_STATE.UP }"/>
		</block>
	</block>
	<block className="MenuItemInstance">
		<styleClass value="$Fullsize"/>
		<style>
			<align value="middle"/>
		</style>
		<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="198px"/>
				<marginLeft value="8px"/>
				<marginRight value="8px"/>
			</style>
			<bind name="text" value="_titleIds"/>
			<bind name="style" value="'noTranslate'; _isNoTranslate"/>
			<bind name="name" value="'menu_item_' + _titleIds"/>
		</block>
	</block>
	<block className="ResizeFrame">
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!(restrict.up)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP'"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="6px"/>
				<top value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_top"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN'"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="6px"/>
				<bottom value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_bottom"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.left)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="6px"/>
				<height value="100%"/>
				<left value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.right)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="6px"/>
				<height value="100%"/>
				<right value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_right"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.up || restrict.left)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<top value="-5px"/>
				<left value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_top_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.up || restrict.right)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<top value="-5px"/>
				<right value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_top_right"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down || restrict.left)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<bottom value="-5px"/>
				<left value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_bottom_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down || restrict.right)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<bottom value="-5px"/>
				<right value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_bottom_right"/>
			</params>
		</block>
	</block>
	<block className="WarningMessage">
		<bind name="appear" value="'addedToStage'; 0.15; _delay; {alpha: 0, top: _startTop ? _startTop : 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<bind name="var" value="{errorStringsToShowSupportLinkFor: [
		tr('IDS_ACCOUNT_ERROR_ALL_SPA_LOGIN_ALREADY_TAKEN')
	]}"/>
		<block type="text">
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 280"/>
			<bind name="class" value="_highWarning ? '$WarningTextRed' : '$WarningTextOrange'"/>
			<style>
				<textAlign value="center"/>
			</style>
			<bind name="text" value="_text"/>
		</block>
		<block>
			<bind name="visible" value="errorStringsToShowSupportLinkFor.indexOf(_text) &gt; -1"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="6px"/>
			</style>
			<bind name="instance" value="'LinkText'; errorStringsToShowSupportLinkFor.indexOf(_text) &gt; -1 	? {
																								_label: 'IDS_LINK_SUPPORT', 
																								_urlIdent: SC.Ui_windows.GUI_URL.SUPPORT,
																								_tooltipText: 'IDS_LINK_SUPPORT_HINT', 
																								_name: 'ButtonSupport'} 
																							: null"/>
		</block>
	</block>
	<block className="WrongTextInputNotification">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: _startTop ? _startTop : 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
			<marginRight value="-1px"/>
			<marginLeft value="-1px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<marginTop value="1px"/>
				<marginBottom value="0px"/>
			</style>
			<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? { _map: 'blurmap_low'} : null"/>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<right value="9"/>
				<top value="7"/>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'CloseButton'; _showCloseBtn ? { _event: 'hideWrongMessageEv' } : null"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="7px"/>
			</style>
			<bind name="instance" value="'WarningMessage'; true	? { _delay: 0.07, _startTop: _startTop, _maxWidth: _maxWidth, _text: _text}
												: null"/>
		</block>
		<bind name="dispatch" value="'click'; 'hideWrongMessageEv'; {}"/>
	</block>
	<block className="RepeatParagraphItemNM">
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '16px'"/>
		<bind name="class" value="_middleAligned ? '$MiddleAligned' : ''"/>
		<bind name="watch" value="'textItem'; _isTextInValue ? $value : _paragraphText"/>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<bind name="class" value="_class"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'textAlign'; _textAlign ? _textAlign : 'left'"/>
			<bind name="style" value="'maxWidth'; _maxWidth	? _maxWidth :
									_width	? 3000
											: 300"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'alpha'; _alpha ? _alpha : 1"/>
			<bind name="substitute" value="_substitute.imageOffset ? _substitute.imageOffset : 0;
							_substitute.map ? _substitute.map : {}; (_toUpperCase ? toUpperCase(tr(textItem)) : textItem)"/>
		</block>
	</block>
	<block className="ShipIcon">
		<block className="ShipIcon" type="ublock">
			<bind name="build!" value="{ _shipType:				_shipType,
						_isSpecial:				_isSpecial				? _isSpecial			: false,
						_isFarming:				_isFarming				? _isFarming			: false,
						_isElite:				_isElite				? _isElite				: false,
						_isEnemy:				_isEnemy				? _isEnemy				: false,
						_isKilled:				_isKilled				? _isKilled				: false,
						_isWhite:				_isWhite				? _isWhite				: false,
						_isDivision:			_isDivision				? _isDivision			: false,
						_isTeamKiller:			_isTeamKiller			? _isTeamKiller			: false,
						_isAlly:				_isAlly					? _isAlly				: false,
						_hideUpgradableStatus:	_hideUpgradableStatus	? _hideUpgradableStatus	: false,
						_iconSize:				_iconSize				? _iconSize				: 27 }"/>
		</block>
	</block>
	<block className="ShipTitleWithIconAndLevel">
		<style>
			<marginLeft value="6px"/>
			<marginRight value="3px"/>
			<marginTop value="6px"/>
			<marginBottom value="8px"/>
		</style>
		<bind name="style" value="'marginTop'; _size == 'medium' ? '7px' : '6px'"/>
		<bind name="instance" value="'ShipLineItemNM';	 {	_shipId: _shipID,
											_fontClass: (_size == 'medium'	?	'$TextDefaultBold18NM'
																			:	'$TextDefaultBold20NM')
										}"/>
	</block>
	<block className="CharCounter">
		<bind name="transition" value="_string.length &gt; 0; 0.15; {alpha: 0, top:10}; {alpha: 1, top:0}; {alpha: 0, top:10}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; 0"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_TOOLTIP_CHARS_LEFT'}"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_string.length &gt; _maxChars ? '$FontColorOrange' : '$FontColorDefault'"/>
			<bind name="style" value="'alpha'; _string.length &gt; _maxChars ? 1 : 0.6"/>
			<bind name="text" value="_maxChars - _string.length"/>
		</block>
	</block>
	<block className="BusyIndicator">
		<bind name="fade" value="_showBusyIndicator; 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0.3"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<block className="indicator_busy_small" type="native"/>
		</block>
		<block type="text">
			<bind name="visible" value="_label.length &gt; 0"/>
			<styleClass value="$TextDefaultTech"/>
			<bind name="class" value="'$Bold'"/>
			<style>
				<marginLeft value="6px"/>
				<marginTop value="-2px"/>
			</style>
			<bind name="text" value="toUpperCase(tr(_label))"/>
		</block>
	</block>
	<block className="FormationPlayerIcon">
		<bind name="var" value="{formationType: 'division'}"/>
		<bind name="watch" value="'postfix'; isOtherDivision ? '_other_division' : ''"/>
		<bind name="watch" value="'readySuffix'; isReady ? isCommander ? '' : 'ready_' : 'not_ready_'"/>
		<style>
			<width value="15px"/>
		</style>
		<block className="formation_player_status" type="native">
			<style>
				<marginTop value="3px"/>
			</style>
			<bind name="gotoAndStop!" value="_isEmptySlot	?	('empty_slot_'							+ formationType) :
							isInBattle		?	('player_in_battle_'					+ formationType + postfix) :
							isCommander		?	('commander_'			+ readySuffix	+ formationType + postfix) :
							!isMercenary	?	('player_'				+ readySuffix	+ formationType + postfix)
											:	'mercenary_'			+ readySuffix	+ formationType"/>
		</block>
	</block>
	<block className="BackButton">
		<style>
			<height value="30px"/>
		</style>
		<block className="button_dock" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="name" value="btn_back"/>
			</params>
			<bind name="input"/>
			<bind name="dispatch" value="'buttonClick'; _event	 ? _event  : null; _eventData	 ? _eventData : {}"/>
			<bind name="action" value="'buttonClick'; _action	 ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<params>
				<param name="focusable" value="false"/>
			</params>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<hitTest value="false"/>
					<alpha value="0.75"/>
					<marginLeft value="6px"/>
					<width value="14px"/>
					<height value="14px"/>
					<backgroundImage value="url:../service_kit/buttons/icon_navigate/left.png"/>
				</style>
			</block>
			<block>
				<bind name="name" value="_name ? _name : '' "/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="5px"/>
					<marginRight value="10px"/>
				</style>
				<block>
					<style>
						<marginTop value="-3px"/>
					</style>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.5"/>
							<top value="1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.3"/>
							<top value="-1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.3"/>
							<left value="1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.3"/>
							<left value="-1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<style>
							<alpha value="0.85"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="HotkeyWithText">
		<bind name="dispatch" value="'click'; _event	? _event  	: null; _eventData	 	? _eventData 	: {}"/>
		<bind name="action" value="'click'; _action	? _action 	: null; _actionParams 	? _actionParams : {}"/>
		<bind name="request" value="'click'; _request 	? _request 	: null; _requestParams 	? _requestParams: {}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? { _text: _tooltipText } : null; TooltipBehaviour.simple"/>
		<bind name="soundSet" value="'default_button'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_isDisabled != true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_isDisabled != true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<style>
			<backgroundImage value="url:../service_kit/buttons/hotkey_background.png"/>
			<background9Slice value="[5,13]"/>
		</style>
		<block type="text">
			<style>
				<marginLeft value="3px"/>
				<marginRight value="3px"/>
				<marginTop value="-1px"/>
				<marginBottom value="-1px"/>
			</style>
			<styleClass value="$BlackLabel"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="CloseButton">
		<bind name="dispatch" value="'click'; _event		? _event  		: null; _eventData			? _eventData 		: {}"/>
		<bind name="action" value="'click'; _action		? _action 		: null; _actionParams		? _actionParams 	: {}"/>
		<bind name="request" value="'click'; _request 		? _request 		: null; _requestParams		? _requestParams	: {}"/>
		<bind name="directEvent" value="'click'; _directEvent	? _directEvent 	: null; _directEventParams	? _directEventParams: {}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? { _text: _tooltipText } : null; TooltipBehaviour.simple"/>
		<bind name="name" value="_name"/>
		<bind name="soundSet" value="'default_button'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_isDisabled != true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_isDisabled != true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<style>
			<width value="12px"/>
			<height value="12px"/>
			<backgroundImage value="url:../service_kit/buttons/button_close.png"/>
			<margin value="-1px"/>
		</style>
	</block>
	<block className="NavigationButton">
		<style>
			<marginBottom value="1px"/>
		</style>
		<block className="button_navigation_small" type="native">
			<bind name="name" value="_name"/>
			<bind name="label" value="_label"/>
			<bind name="selected" value="_selectedIndex == $index"/>
			<bind name="dispatch" value="'click'; 'evClicked'; { selectedIndex: $index }"/>
		</block>
	</block>
	<block className="RewardItemWithStamp">
		<block>
			<style>
				<width value="80px"/>
				<height value="80px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; _backgroundImage"/>
			<bind name="scaleX" value="_scale ? _scale : 1"/>
			<bind name="scaleY" value="_scale ? _scale : 1"/>
			<bind name="ubScaleX" value="_scale ? _scale : 1"/>
			<bind name="ubScaleY" value="_scale ? _scale : 1"/>
		</block>
		<block>
			<bind name="scaleX" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="scaleY" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="ubScaleX" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="ubScaleY" value="_scale ? (_scale - 0.14) : 0.86"/>
			<style>
				<position value="absolute"/>
				<alpha value="0.9"/>
				<hitTest value="false"/>
				<top value="46%"/>
				<left value="42%"/>
			</style>
			<block className="icon_issued" type="native">
				<bind name="gotoAndStop!" value="_issued	? 'issued' : 'not_issued'"/>
				<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
				<bind name="rotation" value="-2"/>
			</block>
		</block>
	</block>
	<block className="ColorTransformPicker">
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'redMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'greenMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'blueMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'alphaMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'redOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'greenOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'blueOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'alphaOffset'}"/>
	</block>
	<block className="ColorTransformSlider">
		<style>
			<marginTop value="20px"/>
		</style>
		<block>
			<bind name="dispatch" value="'value'+varChanged; 'colorTransformChanged'; [_name, value]"/>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<maxHeight value="500"/>
					<backgroundColor value="0x80000000"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<margin value="4px"/>
						<maxWidth value="600"/>
					</style>
					<bind name="text" value="'_name: ' + (_name)"/>
				</block>
			</block>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<maxHeight value="500"/>
					<backgroundColor value="0x80000000"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<margin value="4px"/>
						<maxWidth value="600"/>
					</style>
					<bind name="text" value="'value: ' + (value)"/>
				</block>
			</block>
			<block>
				<bind name="mc" value="'slider_default'; ['valueChange']; ['value']; {maximum:_maximum, minimum:_minimum, step:_step, value:_value}"/>
			</block>
		</block>
	</block>
	<block className="StatusLine">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION					?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION		?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_OFF			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_MUTED			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_MASTERY_TRIAL		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPGRADE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY					?		SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED			?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT				?		SC.Ui_styles.SERVICE_COLORS.PINK :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_ON				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFAULT					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LOCK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_DOUBLE_LEFT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_SCROLL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HIDDEN					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_NOT_DETECTED			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_DEFAULT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFO						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LINKED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPAINTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPDATE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EPIC_SKILL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ADVANCED_CREW				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.IN_BATTLE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.TO_ARMORY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFINITE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PERMOBOOST_ACTIVE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_NORMAL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.KEY_TARGET				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BURST_FIRE				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NO_ICON					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NOTIFICATION				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HAS_BATTLE_MODIFIERS		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPLACED_CONSUMABLES		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_READY			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_NOT_READY		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL_VETERAN			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OFFLINE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_ON		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_OFF		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DIVISION_INVITE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PRIMARY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OBSERVER					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SELECTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_INFO_HIDDEN			?		SC.Ui_styles.SERVICE_COLORS.WHITE
																											:		SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block>
			<bind name="visible" value="_unifiedStatus &amp;&amp; _unifiedStatus != SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
			<style>
				<width value="19px"/>
				<height value="19px"/>
				<marginTop value="-4px"/>
				<marginLeft value="-3px"/>
				<marginBottom value="-7px"/>
				<marginRight value="5px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/unified_status_icons/icon_' + _unifiedStatus + '.png'"/>
		</block>
		<block type="text">
			<params>
				<param name="name" value="'statusLine'"/>
			</params>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 9999"/>
			<bind name="class" value="_textClass ? _textClass : '$TextDefaultNM'"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ProgressParamsElement">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginRight value="4px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="text" value="_text"/>
		</block>
		<block type="text">
			<bind name="visible" value="_param_1"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="'( '"/>
		</block>
		<block type="text">
			<bind name="visible" value="_param_1"/>
			<styleClass value="$TextDefaultNM"/>
			<styleClass value="$FontColorGreen"/>
			<bind name="text" value="'+' + format(_param_1)"/>
		</block>
		<block type="text">
			<bind name="visible" value="_param_1"/>
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="' )'"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<marginLeft value="4px"/>
			</style>
			<bind name="text" value="format(_param_2)"/>
		</block>
	</block>
	<block className="TextInputWithCancel">
		<styleClass value="$Fullsize"/>
		<bind name="catch" value="'removedFromStage'; {textInput: ''}"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<block className="text_input_caps_enter" type="native">
					<bind name="name" value="'textFieldSearch'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? {_text: _tooltipText} : null"/>
					<bind name="style" value="'width'; _tfWidth ? _tfWidth : '270px'"/>
					<params>
						<param name="actAsButton" value="true"/>
						<param name="noTranslate" value="true"/>
					</params>
					<bind name="maxChars" value="_maxChars ? _maxChars : 32"/>
					<bind name="defaultText" value="defaultText"/>
					<bind name="var" value="{textInput: _currentText ? _currentText : _defaultInputValue}"/>
					<bind name="ubFocus" value="0; true; true; true"/>
					<bind name="restrict" value="restrict"/>
					<bind name="text" value="textInput"/>
					<bind name="sync" value="'text'; 'change'; 'textInput'"/>
					<bind name="dispatch" value="'change'; 'TextInputWithCancel.'+ onInputStrChangedEvent; {inputStr: textInput}"/>
					<bind name="dispatch" value="'textInputEnter'; 'TextInputWithCancel.' + onEnterEvent; {inputStr: textInput}"/>
					<block className="button_dock" type="native">
						<bind name="tooltip" value="'SimpleStatusTooltip'; _onEnterTooltipText ? {_text: _onEnterTooltipText} : null"/>
						<styleClass value="$TextInputEnterButton"/>
						<bind name="enabled" value="textInput.length &gt; 0"/>
						<bind name="dispatch" value="'buttonClick'; 'TextInputWithCancel.' + onEnterEvent; {inputStr: textInput}"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="8px"/>
				</style>
				<bind name="instance" value="'CloseButton'; {
				_event: 'TextInputWithCancel.' + onCancelEvent,
				_tooltipText: 'IDS_CANCEL'
			}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ComplexityLevel">
		<block className="ComplexityLevel" type="ublock">
			<bind name="build!" value="{	_complexityLevel: _complexityLevel,
						_maxComplexityLevel: _maxComplexityLevel,
						_size: _size}"/>
		</block>
	</block>
	<block className="CurrentXPLarge">
		<params>
			<param name="name" value="upgrade_tree_CurrentShipXP"/>
		</params>
		<block>
			<style>
				<marginLeft value="-3px"/>
			</style>
			<bind name="instance" value="'PriceTag'; {	priceInfo: {finalPrice: _exp, currency: SC.Common.CURRENCIES.XP},
										_medium: true} "/>
		</block>
		<block type="text">
			<style>
				<alpha value="0.75"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_label"/>
		</block>
	</block>
	<block className="StatusLineWithIcon">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_warning_orange" type="native">
			<bind name="style" value="'top'; _small	? '4' :
							_large	? '7'
									: '4'"/>
			<style>
				<marginRight value="2px"/>
			</style>
		</block>
		<block type="text">
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 264"/>
			<bind name="class" value="_large ? '$TextHeaderBigDefault' 
							:_small ? '$TextSecondary' : '$TextDefault'"/>
			<bind name="class" value="_positive ? '$FontColorGreen' : '$FontColorOrange'"/>
			<bind name="class" value="_bold ? '$Bold' : '$None'"/>
			<bind name="text" value="_text"/>
		</block>
	</block>

	<!-- default_divided_counter -->
	<block className="DefaultDividedCounter">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION					?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION		?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_OFF			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_MUTED			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_MASTERY_TRIAL		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPGRADE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY					?		SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED			?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT				?		SC.Ui_styles.SERVICE_COLORS.PINK :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_ON				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFAULT					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LOCK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_DOUBLE_LEFT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_SCROLL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HIDDEN					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_NOT_DETECTED			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_DEFAULT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFO						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LINKED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPAINTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPDATE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EPIC_SKILL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ADVANCED_CREW				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.IN_BATTLE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.TO_ARMORY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFINITE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PERMOBOOST_ACTIVE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_NORMAL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.KEY_TARGET				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BURST_FIRE				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NO_ICON					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NOTIFICATION				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HAS_BATTLE_MODIFIERS		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPLACED_CONSUMABLES		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_READY			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_NOT_READY		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL_VETERAN			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OFFLINE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_ON		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_OFF		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DIVISION_INVITE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PRIMARY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OBSERVER					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SELECTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_INFO_HIDDEN			?		SC.Ui_styles.SERVICE_COLORS.WHITE
																											:		SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<bind name="var" value="{counterProperties: {	'$TextDefaultNM':		{	maxValueTextClass: '$TextDefaultNM',
																	maxValueTopMargin: '0px',
																	maxValueLeftMargin: 3,
																	dividerLeftMargin: 4},
										'$TextDefaultBoldNM':	{	maxValueTextClass: '$TextDefaultBold14NM',
																	maxValueTopMargin: '2px',
																	maxValueLeftMargin: 3},
										'$TextDefaultBold18NM': {	maxValueTextClass: '$TextDefaultBoldNM',
																	maxValueTopMargin: '1px',
																	maxValueLeftMargin: 2},
										'$TextDefaultBold20NM': {	maxValueTextClass: '$TextDefaultBold18NM',
																	maxValueTopMargin: '1px',
																	maxValueLeftMargin: 2},
										'$TextDefaultBold22NM': {	maxValueTextClass: '$TextDefaultBold20NM',
																	maxValueTopMargin: '2px',
																	maxValueLeftMargin: 2},
										'$TextDefaultBold24NM': {	maxValueTextClass: '$TextDefaultBold22NM',
																	maxValueTopMargin: '1px',
																	maxValueLeftMargin: 3},
										'$TextDefaultBold36NM': {	maxValueTextClass: '$TextDefaultBold30NM',
																	maxValueTopMargin: '4px',
																	maxValueLeftMargin: 3}
									}}"/>
		<bind name="visible" value="	_doNotHideOnZeroMaxValue	? true :
					_maxValue &gt; 0				? true
												: false"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'alpha';	_doNotAlphaOnZeroCurValue	? 1 :
							_curValue == 0				? 0.6
														: 1"/>
		<block>
			<style>
				<backgroundColor value="0x01FFFFFF"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; _curValueTooltipText ? { _text: _curValueTooltipText } : null"/>
			<block type="text">
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="class" value="_curValueTextClass"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="text" value="(_curValue &gt; 0)	? format(_curValue)
										: _curValue"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_maxValue &gt; 0"/>
			<style>
				<backgroundColor value="0x01FFFFFF"/>
				<alpha value="0.75"/>
			</style>
			<bind name="style" value="'marginTop'; counterProperties[_curValueTextClass].maxValueTopMargin"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; _maxValueTooltipText ? { _text: _maxValueTooltipText } : null"/>
			<block type="text">
				<bind name="class" value="counterProperties[_curValueTextClass].maxValueTextClass"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="style" value="'marginLeft'; ((counterProperties[_curValueTextClass].dividerLeftMargin	?	counterProperties[_curValueTextClass].dividerLeftMargin
																									:	counterProperties[_curValueTextClass].maxValueLeftMargin) + 'px')"/>
				<bind name="text" value="'/'"/>
			</block>
			<block type="text">
				<bind name="class" value="counterProperties[_curValueTextClass].maxValueTextClass"/>
				<bind name="style" value="'marginLeft'; (counterProperties[_curValueTextClass].maxValueLeftMargin + 'px')"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="text" value="format(_maxValue)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- default_plugs -->
	<block className="NoItemsComeBackLater">
		<style>
			<width value="100%"/>
			<position value="absolute"/>
			<top value="35%"/>
			<marginTop value="-50%"/>
			<align value="center"/>
		</style>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$TextDefaultBold26NM"/>
			<bind name="text" value="toUpperCase(tr('IDS_NO_CURRENT_' + _type))"/>
		</block>
		<bind name="instance" value="'InstructionBigTech'; _disableSubText != true ? { _instructionText: _subText ? _subText : 'IDS_COME_BACK_LATER', _type: 'info', _maxWidth: 980 } : null"/>
	</block>
	<block className="ServerIsUnavailable">
		<styleClass value="$MiddleVAligned"/>
		<style>
			<width value="100%"/>
			<align value="center"/>
			<paddingLeft value="8px"/>
			<paddingRight value="8px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold18NM"/>
			<style>
				<alpha value="0.9"/>
				<textAlign value="center"/>
				<marginBottom value="16px"/>
				<width value="100%"/>
				<maxWidth value="300"/>
				<leading value="-2"/>
			</style>
			<bind name="text" value="tr('IDS_SERVICE_IS_UNAVAILABLE_CHAT')"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<alpha value="0.45"/>
				<textAlign value="center"/>
				<maxWidth value="280"/>
				<width value="100%"/>
				<leading value="-2"/>
			</style>
			<default_text value="IDS_WE_ARE_WORKING_ON_THIS"/>
		</block>
	</block>

	<!-- divisions_elements -->
	<block className="FormationResizableMainElement">
		<styleClass value="$ChatDivisionDefaultWidth"/>
		<style>
			<height value="100%"/>
		</style>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'divisionPlayersListWidth'; (userPrefs.divisionPlayersListWidth) ? userPrefs.divisionPlayersListWidth : '280'"/>
		<bind name="width" value="divisionPlayersListWidth"/>
		<block className="FormationMainElement">
			<bind name="name" value="'FormationMainElement_' + _teamId"/>
			<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
			<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
			<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
			<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
			<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
			<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
			<bind name="watchDH" value="'trainingRoomTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
			<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
			<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
			<bind name="watchDH" value="'selectedBattleType'; ['selectedBattleTypeEntity.battleType.evBattleTypeChanged']; selectedBattleTypeEntity.battleType.type"/>
			<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
			<bind name="watchDH" value="'isSelfPlayerOwner'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
			<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
			<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
			<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.trainingRoomPlayer.evUpdate']; selfPlayerEntity.trainingRoomPlayer.isCommander"/>
			<bind name="watch" value="'isTeamManagementAvailable'; isSelfPlayerOwner || (isSelfPlayerCommander &amp;&amp; selfTeamId == _teamId)"/>
			<bind name="watch" value="'teamId'; _teamId != undefined ? _teamId : selfTeamId"/>
			<bind name="watch" value="'activeIds'; 	isSelfPlayerOwner 		? 	_teamId == 0 	? ['-1', '1', '-1_bot', '1_bot', '100'] :
															_teamId == 1 	? ['0', '-1', '0_bot', '-1_bot', '100'] :
															_teamId == 100 	? ['0', '1', '-1', '0_bot', '-1_bot'] 
																			: ['0', '1', '0_bot', '1_bot', '100'] :

								isSelfPlayerCommander	?	selfTeamId == _teamId 										? ['-1', '-1_bot'] :
															_teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM 	? (selfTeamId == 0 ? ['0', '0_bot'] : ['1', '1_bot'])
																														: []
														:	[]"/>
			<bind name="watch" value="'preBattlePlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.preBattleMembers.sorted' 
															: 'byPreBattle.' + selfPreBattleId + '.preBattleMembers.sorted'"/>
			<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; preBattlePlayersFilter"/>
			<bind name="watch" value="'preBattleInvitedPlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.invitedPlayers' 
																	: 'byPreBattle.' + selfPreBattleId + '.invitedPlayers'"/>
			<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattleInvitedPlayers'; preBattleInvitedPlayersFilter"/>
			<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
			<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
			<bind name="watch" value="'isNeutralTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
			<bind name="watch" value="'isObserverTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
			<bind name="watch" value="'maxPlayersInFormation'; _isTrainingRoom 	? isNeutralTeam || isObserverTeam	? preBattlePlayers.length
																								: trainingRoomTeamSize
															: shipRestrictions.maxPlayers"/>
			<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
			<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
			<bind name="watchDH" value="'selfIsInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
			<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
			<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
			<bind name="watch" value="'showFormationPlayers'; isChatServerAvailable || _isTrainingRoom"/>
			<bind name="action" value="'droppableStatus' + varChanged;	droppableStatus == 'accept' ? 'setTeamInTrainingRoom' : null;
													{ playerID: droppableStatusData['playerId'], teamID: teamId }"/>
			<bind name="watch" value="'preBattlePlayersCount'; preBattlePlayers.length + preBattleInvitedPlayers.length "/>
			<bind name="watch" value="'divisionItemsLength'; preBattlePlayersCount &gt; maxPlayersInFormation ? preBattlePlayersCount : maxPlayersInFormation "/>
			<styleClass value="$Fullsize"/>
			<block>
				<bind name="visible" value="false"/>
				<params>
					<param name="name" value="botFakeDropZone"/>
				</params>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<block>
					<styleClass value="$DefaultScrollBar"/>
					<style>
						<height value="100%f"/>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="divisionItemsLength; 'DivisionListItem'; {
				_isTrainingRoom: _isTrainingRoom,
				_teamId: teamId,
				_formationPlayerClass: _formationPlayerClass,
				_showInvites:	isTeamManagementAvailable &amp;&amp;
								!(_isTrainingRoom &amp;&amp; (teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM)) &amp;&amp;
								!(isFormationInBattle &amp;&amp; selfIsInBattle),
				_preBattlePlayers: preBattlePlayers,
				_preBattleInvitedPlayers: preBattleInvitedPlayers,
				_channelEntityId: _channelEntityId	}"/>
				</block>
			</block>
			<block>
				<bind name="fade" value="((!_isTrainingRoom) || (selfTeamId == _teamId)); 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: -5}; 2"/>
				<style>
					<marginBottom value="6px"/>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'FormationReadySwitcher'; teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM ? {_isTrainingRoom: _isTrainingRoom} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="transition" value="droppableStatusState == 'active'; 0.15; {alpha: 0}; {alpha: 1}"/>
				<block className="outlined_panel_shaded" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<marginTop value="-1px"/>
					</style>
					<bind name="watch" value="'isBot'; droppableStatusBotState == 'active' &amp;&amp; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
					<bind name="gotoAndStop!" value="isBot ? 'orange' : 'white'"/>
					<bind name="transition" value="droppableStatus == 'fadeIn' || droppableStatusBot == 'fadeIn'; 0.15; {alpha: 0.5}; {alpha: 1}"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="8px"/>
				<height value="100%"/>
				<right value="-4px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="gripper_right"/>
			</params>
		</block>
		<bind name="resize" value="'gripper_right'; 'right'; 'divisionPlayersListWidth'"/>
	</block>
	<block className="FormationMainElement">
		<bind name="name" value="'FormationMainElement_' + _teamId"/>
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="watchDH" value="'trainingRoomTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watchDH" value="'selectedBattleType'; ['selectedBattleTypeEntity.battleType.evBattleTypeChanged']; selectedBattleTypeEntity.battleType.type"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerOwner'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.trainingRoomPlayer.evUpdate']; selfPlayerEntity.trainingRoomPlayer.isCommander"/>
		<bind name="watch" value="'isTeamManagementAvailable'; isSelfPlayerOwner || (isSelfPlayerCommander &amp;&amp; selfTeamId == _teamId)"/>
		<bind name="watch" value="'teamId'; _teamId != undefined ? _teamId : selfTeamId"/>
		<bind name="watch" value="'activeIds'; 	isSelfPlayerOwner 		? 	_teamId == 0 	? ['-1', '1', '-1_bot', '1_bot', '100'] :
															_teamId == 1 	? ['0', '-1', '0_bot', '-1_bot', '100'] :
															_teamId == 100 	? ['0', '1', '-1', '0_bot', '-1_bot'] 
																			: ['0', '1', '0_bot', '1_bot', '100'] :

								isSelfPlayerCommander	?	selfTeamId == _teamId 										? ['-1', '-1_bot'] :
															_teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM 	? (selfTeamId == 0 ? ['0', '0_bot'] : ['1', '1_bot'])
																														: []
														:	[]"/>
		<bind name="watch" value="'preBattlePlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.preBattleMembers.sorted' 
															: 'byPreBattle.' + selfPreBattleId + '.preBattleMembers.sorted'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; preBattlePlayersFilter"/>
		<bind name="watch" value="'preBattleInvitedPlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.invitedPlayers' 
																	: 'byPreBattle.' + selfPreBattleId + '.invitedPlayers'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattleInvitedPlayers'; preBattleInvitedPlayersFilter"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="watch" value="'isNeutralTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
		<bind name="watch" value="'isObserverTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
		<bind name="watch" value="'maxPlayersInFormation'; _isTrainingRoom 	? isNeutralTeam || isObserverTeam	? preBattlePlayers.length
																								: trainingRoomTeamSize
															: shipRestrictions.maxPlayers"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
		<bind name="watchDH" value="'selfIsInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watch" value="'showFormationPlayers'; isChatServerAvailable || _isTrainingRoom"/>
		<bind name="action" value="'droppableStatus' + varChanged;	droppableStatus == 'accept' ? 'setTeamInTrainingRoom' : null;
													{ playerID: droppableStatusData['playerId'], teamID: teamId }"/>
		<bind name="watch" value="'preBattlePlayersCount'; preBattlePlayers.length + preBattleInvitedPlayers.length "/>
		<bind name="watch" value="'divisionItemsLength'; preBattlePlayersCount &gt; maxPlayersInFormation ? preBattlePlayersCount : maxPlayersInFormation "/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="visible" value="false"/>
			<params>
				<param name="name" value="botFakeDropZone"/>
			</params>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<height value="100%f"/>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="divisionItemsLength; 'DivisionListItem'; {
				_isTrainingRoom: _isTrainingRoom,
				_teamId: teamId,
				_formationPlayerClass: _formationPlayerClass,
				_showInvites:	isTeamManagementAvailable &amp;&amp;
								!(_isTrainingRoom &amp;&amp; (teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM)) &amp;&amp;
								!(isFormationInBattle &amp;&amp; selfIsInBattle),
				_preBattlePlayers: preBattlePlayers,
				_preBattleInvitedPlayers: preBattleInvitedPlayers,
				_channelEntityId: _channelEntityId	}"/>
			</block>
		</block>
		<block>
			<bind name="fade" value="((!_isTrainingRoom) || (selfTeamId == _teamId)); 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: -5}; 2"/>
			<style>
				<marginBottom value="6px"/>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<bind name="instance" value="'FormationReadySwitcher'; teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM ? {_isTrainingRoom: _isTrainingRoom} : null"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="droppableStatusState == 'active'; 0.15; {alpha: 0}; {alpha: 1}"/>
			<block className="outlined_panel_shaded" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginTop value="-1px"/>
				</style>
				<bind name="watch" value="'isBot'; droppableStatusBotState == 'active' &amp;&amp; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
				<bind name="gotoAndStop!" value="isBot ? 'orange' : 'white'"/>
				<bind name="transition" value="droppableStatus == 'fadeIn' || droppableStatusBot == 'fadeIn'; 0.15; {alpha: 0.5}; {alpha: 1}"/>
			</block>
		</block>
	</block>
	<block className="FormationStatuses">
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'divisionShipClassEntities'; 'shipClassCountRestrictions'"/>
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'divisionShipLevelsEntities'; 'shipLevelCountRestrictions'"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId';		['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'restrictionEntityId'; ['selectedBattleTypes[0].battleType.evRestrictionEntityIdChanged']; selectedBattleTypes[0].battleType.restrictionEntityId"/>
		<bind name="entityDH" value="'restrictionsEntity'; restrictionsEntityId"/>
		<bind name="watchDH" value="'limitedShips';	['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.limitedShips"/>
		<bind name="watchDH" value="'excludedShips';	['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.excludedShips"/>
		<bind name="watchDH" value="'levelsCount';	['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.levelsCount"/>
		<bind name="watch" value="'isVerticalDividerVisible'; divisionShipClassEntities.length &gt; 0 &amp;&amp; divisionShipLevelsEntities.length &gt; 0"/>
		<bind name="fade" value="_divisionsAvailable; 0.1; {alpha: 0, ubScaleY: 0}; {alpha: 1, ubScaleY: 1}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<flow value="horizontal"/>
			<marginLeft value="9px"/>
			<alpha value="0.9"/>
			<overflow value="hidden"/>
		</style>
		<block>
			<style>
				<marginTop value="11px"/>
			</style>
			<bind name="instance" value="'FormationShipClassesStatus'; {_preBattleId: selfPreBattleId, _teamId: selfTeamId}"/>
		</block>
		<block>
			<bind name="visible" value="isVerticalDividerVisible"/>
			<style>
				<height value="20px"/>
				<marginTop value="8px"/>
				<marginRight value="16px"/>
				<marginLeft value="16px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="11px"/>
			</style>
			<bind name="instance" value="'FormationShipLevelsStatus'; {_preBattleId: selfPreBattleId, _teamId: selfTeamId}"/>
		</block>
		<block>
			<bind name="watchDH" value="'maxAllowedMercenaries'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.maxAllowedMercenaries"/>
			<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
			<bind name="watchDH" value="'nonClanMembersCount'; ['clanTeamEntity.clanTeam.evNonClanMembersCountChanged'];	clanTeamEntity.clanTeam.nonClanMembersCount"/>
			<bind name="watchDH" value="'isClanBattleType'; ['clanTeamEntity.clanTeam.evIsClanBattleTypeChanged'];	clanTeamEntity.clanTeam.isClanBattleType"/>
			<bind name="fade" value="isClanBattleType &amp;&amp; (maxAllowedMercenaries &gt; 0); 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
			<style>
				<flow value="horizontal"/>
				<marginTop value="9px"/>
			</style>
			<block>
				<style>
					<height value="18px"/>
					<width value="3px"/>
					<marginRight value="16px"/>
					<marginLeft value="16px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="watch" value="'hasTooMuchMercenaries'; nonClanMembersCount &gt; maxAllowedMercenaries"/>
				<bind name="tooltip" value="'MercenariesTooltip'; {_hasTooMuchMercenaries: hasTooMuchMercenaries}"/>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<block className="formation_player_status" type="native">
					<style>
						<marginRight value="4px"/>
					</style>
					<bind name="gotoAndStop!" value="'mercenary_ready_division'"/>
				</block>
				<block>
					<style>
						<marginTop value="2"/>
					</style>
					<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold18NM',
															_textColorClass: hasTooMuchMercenaries ? '$FontColorOrange' : '$None',
															_curValue: nonClanMembersCount,
															_maxValue: maxAllowedMercenaries,
															_doNotAlphaOnZeroCurValue: true	}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
		</block>
		<block>
			<bind name="fade" value="!!(limitedShips.length || excludedShips.length); 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
			<bind name="tooltip" value="'SeasonShipRestrictionsTooltip'; {}"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginRight value="8px"/>
				<marginLeft value="12px"/>
				<height value="22px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault18NM"/>
				<style>
					<marginRight value="8px"/>
					<marginTop value="4px"/>
					<alpha value="0.75"/>
				</style>
				<default_text value="IDS_SEASON_RESTRICTIONS"/>
			</block>
			<block>
				<bind name="tooltip" value="'SeasonShipRestrictionsInfotip'; {	_limitedShips: limitedShips,
																_excludedShips: excludedShips }; TooltipBehaviour.infotip"/>
				<bind name="instance" value="'ImageButton'; {	_width: '22px',
												_height: '22px',
												_enabled: true,
												_backgroundImage: 'url:../service_kit/buttons/icon_info.png'	}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MercenariesTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: 'IDS_MERCENARIES' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: _hasTooMuchMercenaries ? SC.Ui_styles.UNIFIED_STATUS.ATTENTION : SC.Ui_styles.UNIFIED_STATUS.INFO,
														_text:	'IDS_MERCENARIES_TOOLTIP_RESTRICTIONS'}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: 'IDS_MERCENARIES_TOOLTIP_DESCRIPTION' }"/>
			</block>
		</block>
	</block>
	<block className="DivisionHeaderLock">
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'isPreBattleLocked';	['divisionDataEntity.division.evLockedChanged']; divisionDataEntity.division.locked"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfPreBattleId';		['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'ownerId'; ['preBattleEntity.preBattle.evOwnerIdChanged']; preBattleEntity.preBattle.ownerId"/>
		<bind name="primaryEntityDH" value="'preBattleOwnerPlayerEntity'; CC.preBattlePlayerSimple; ownerId"/>
		<bind name="visible" value="preBattleOwnerPlayerEntity.clanman"/>
		<bind name="tooltip" value="'DescriptionStatusLineTooltip'; {	_unifiedStatus: isSelfPlayerCommander	? SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT
																								: SC.Ui_styles.UNIFIED_STATUS.WARNING,
														_statusText: isSelfPlayerCommander	?	isPreBattleLocked	? 'IDS_CLAN_MOUSE_INSTRUCTION_UNLOCK_DIVISION'
																													: 'IDS_CLAN_MOUSE_INSTRUCTION_LOCK_DIVISION'
																							:	'IDS_PVE_DIVISION_MATCHMAKER_CONFIG_AVAILABLE_FOR_COMMANDER',
														_descriptionText: isPreBattleLocked ? 'IDS_CLAN_LOCKED_DIVISION'
																							: 'IDS_CLAN_UNLOCKED_DIVISION' }"/>
		<bind name="action" value="'click'; isSelfPlayerCommander ?  (isPreBattleLocked ? 'unlockDivision' : 'lockDivision') : null; {id: selfPreBattleId}"/>
		<block className="button_lock" type="native">
			<bind name="selected" value="isPreBattleLocked"/>
			<bind name="enabled" value="isSelfPlayerCommander"/>
		</block>
	</block>
	<block className="FormationHeader">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="firstEntityDH" value="'divisionEntranceInfoEntity'; CC.divisionEntranceInfo"/>
		<bind name="watchDH" value="'isDivisionAvailable'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evIsDivisionAvailableChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.isDivisionAvailable"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'isMercenary'; ['selfPlayerEntity.preBattlePlayerSimple.evIsMercenaryChanged']; selfPlayerEntity.preBattlePlayerSimple.isMercenary"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
		<bind name="watchDH" value="'ownerId'; ['preBattleEntity.preBattle.evOwnerIdChanged']; preBattleEntity.preBattle.ownerId"/>
		<bind name="primaryEntityDH" value="'preBattleOwnerPlayerEntity'; CC.preBattlePlayerSimple; ownerId"/>
		<bind name="watchDH" value="'clanId'; ['preBattleOwnerPlayerEntity.clanman.evClanIdChanged']; preBattleOwnerPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged']; clanTeamEntity.clanTeam.squadId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="watch" value="'isLeadingSquad'; squadId == leadingSquadId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watch" value="'isShowClanSquadModifier'; hasClanSquadModifier &amp;&amp; !isMercenary &amp;&amp; squadId"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watchDH" value="'trainingRoomTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
		<bind name="watchDH" value="'observersTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.observersTeamSize"/>
		<bind name="watchDH" value="'alphaTeamName'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.alphaTeamName"/>
		<bind name="watchDH" value="'bravoTeamName'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.bravoTeamName"/>
		<bind name="watchDH" value="'fightButtonDenyReasons'; ['selectedBattleTypeEntity.battleType.evDisableReasonChanged']; selectedBattleTypeEntity.battleType.fightButtonReasons"/>
		<bind name="watchDH" value="'selectedBattleType'; ['selectedBattleTypeEntity.battleType.evBattleTypeChanged']; selectedBattleTypeEntity.battleType.type"/>
		<bind name="watch" value="'isObserverTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
		<bind name="watch" value="'isSelfTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.SELF_TEAM"/>
		<bind name="watch" value="'isOtherTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OTHER_TEAM"/>
		<bind name="watch" value="'maxPlayersInFormation';	_isTrainingRoom		?	isObserverTeam	? observersTeamSize
																					: trainingRoomTeamSize
																:	shipRestrictions.maxPlayers"/>
		<bind name="watch" value="'preBattlePlayersFilter'; _isTrainingRoom ? 	'byPreBattleAndTeam.' + selfPreBattleId + '_' + _teamId + '.preBattleMembers' : 
																'byPreBattle.' + selfPreBattleId + '.preBattleMembers'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; preBattlePlayersFilter"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattleInvitedPlayers'; 'byPreBattleAndTeam.' + selfPreBattleId + '_' + _teamId + '.invitedPlayers'"/>
		<bind name="watch" value="'curPlayersInFormation'; (preBattlePlayers.length + preBattleInvitedPlayers.length)"/>
		<bind name="watch" value="'label'; 	_isTrainingRoom 	? 	isSelfTeam											? alphaTeamName	? alphaTeamName
																														: SC.Common.BASE_TEAM_NAMES.ALPHA_TEAM_NAME
												:	isOtherTeam											? bravoTeamName	? bravoTeamName
																														: SC.Common.BASE_TEAM_NAMES.BRAVO_TEAM_NAME
																										: toUpperCase(tr('IDS_DIVISION_' + _teamId)) :
							isFormationInBattle ? 	tr('IDS_IN_BATTLE') :
							_isClanDivision		? 	'[' + clanTag + '] ' + tr( isShowClanSquadModifier	? 'IDS_CLAN_SQUAD_' + squadId
																										: 'IDS_DIVISION')
												: 	tr('IDS_DIVISION')"/>
		<bind name="watch" value="'limitExceed'; curPlayersInFormation &gt;= maxPlayersInFormation"/>
		<bind name="name" value="'headerDivision'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="!_isTrainingRoom &amp;&amp; !(preBattleOwnerPlayerEntity.clanman)"/>
			<style>
				<hitTest value="false"/>
				<width value="19px"/>
				<height value="19px"/>
				<marginTop value="-2px"/>
				<marginRight value="2px"/>
				<backgroundImage value="url:../service_kit/chat_channels/division.png"/>
			</style>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold20NM"/>
			<bind name="class" value="	_isTrainingRoom &amp;&amp; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM	? '$FontColorWhite'	 :
						_isTrainingRoom &amp;&amp; selfTeamId == _teamId										? '$FontColorGolden' :
						_isTrainingRoom &amp;&amp; selfTeamId != _teamId 										? '$FontColorWhite' :
						isFormationInBattle || !isDivisionAvailable										? '$FontColorOrange'
																										: '$FontColorGolden'"/>
			<style>
				<marginLeft value="4px"/>
				<marginTop value="1px"/>
			</style>
			<bind name="text" value="label"/>
		</block>
		<block>
			<bind name="watch" value="'isLeadingIconVisible'; _isClanDivision &amp;&amp; isShowClanSquadModifier &amp;&amp; isLeadingSquad &amp;&amp; !isFormationInBattle"/>
			<bind name="visible" value="isLeadingIconVisible"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="8px"/>
				<marginTop value="-1px"/>
			</style>
			<bind name="instance" value="'LeadingClanSquadIcon'; isLeadingIconVisible ? { _isGolden: true } : null"/>
		</block>
		<bind name="watch" value="'colorClass'; 	_isTrainingRoom &amp;&amp; selfTeamId == _teamId 	? '$FontColorGolden' :
								_isTrainingRoom &amp;&amp; selfTeamId != _teamId 	? '$FontColorWhite'	 :
								isFormationInBattle							? '$FontColorOrange'
																			: '$FontColorGolden'"/>
		<block>
			<bind name="visible" value="(isDivisionAvailable &amp;&amp; !_isTrainingRoom) || (_isTrainingRoom &amp;&amp; _teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM)"/>
			<bind name="style" value="'alpha'; limitExceed ? 0.5 : 1"/>
			<style>
				<marginLeft value="8px"/>
				<marginTop value="1px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold20NM"/>
				<bind name="class" value="colorClass"/>
				<style>
					<marginRight value="2px"/>
				</style>
				<bind name="text" value="'(' + curPlayersInFormation"/>
			</block>
			<block type="text">
				<bind name="style" value="'alpha'; limitExceed ? 1 : 0.8"/>
				<styleClass value="$TextDefaultBold18NM"/>
				<bind name="class" value="colorClass"/>
				<style>
					<marginTop value="1px"/>
					<marginRight value="1px"/>
				</style>
				<bind name="text" value="'/' + maxPlayersInFormation"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold20NM"/>
				<bind name="class" value="colorClass"/>
				<bind name="text" value="')'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="LeadingClanSquadIcon">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _isBig ? '30px' : '18px'"/>
		<bind name="style" value="'height'; _isBig ? '30px' : '18px'"/>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_leading_squad_' + (_isGolden ? 'golden_' : 'white_') + (_isBig ? 'big' : 'small') + '.png'"/>
	</block>
	<block className="FormationPlayerItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'itemAccountEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId ? _entityAccountId : itemAccountEntity.id"/>
		<bind name="watch" value="'isSelfPlayer'; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="watch" value="'isBot'; entityAccount.bot != undefined"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watchDH" value="'shipId'; ['entityAccount.preBattlePlayerSimple.evShipIdChanged']; entityAccount.preBattlePlayerSimple.shipId"/>
		<bind name="watchDH" value="'teamId'; ['entityAccount.preBattlePlayerSimple.evTeamIdChanged']; entityAccount.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'isReady'; ['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'isInBattle'; ['entityAccount.preBattlePlayerSimple.evIsInBattleChanged']; entityAccount.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'isCommander'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isMercenary'; ['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="' isSelfPreBattlePlayerSimpleInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watch" value="'isContextMenuAvailable'; !isSelfPlayer &amp;&amp; ((isSelfPlayerCommander &amp;&amp; ! isSelfPreBattlePlayerSimpleInBattle) || isChatServerAvailable)"/>
		<bind name="var" value="{isAnimationPreUnlocked: false,
				isAnimationUnlocked: 	false}"/>
		<bind name="dispatch" value="'addedToStage'; 'animationPreActivationEvent'; null; false; 0.1"/>
		<bind name="catch" value="'animationPreActivationEvent'; {isAnimationPreUnlocked: true}"/>
		<bind name="changeDispatch" value="isReady; 'animationActivationEvent'"/>
		<bind name="catch" value="'animationActivationEvent'; {isAnimationUnlocked: isAnimationPreUnlocked ? true : false}"/>
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="var" value="{canReportPortChatMisbehaviour : false}"/>
		<style>
			<width value="100%"/>
			<height value="27px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="isSelfPlayer"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="clickSplit"/>
			<bind name="style" value="'hitTest'; !(isSuspended)"/>
			<bind name="transition" value="(rollOver || _rollOver || formationPlayerContextMenuVisible) &amp;&amp; isContextMenuAvailable; 0.15; {alpha: 0}; {alpha: 1}"/>
			<bind name="tooltip" value="'ContactInfoTooltip';	{	_entityAccountId: entityAccount.id, 
													_actionDenyReason: 'no_reason',
													_isContextMenuAvailable: isContextMenuAvailable,
													_playerContext: {type: 'startPrivateChat'}}"/>
			<bind name="action" value="'left_click';	!(isSelfPlayer) &amp;&amp; !(isBot) ? 'openChannelForPrivateMessages' : null; {dbId: entityAccount.accountSimple.dbId}"/>
			<bind name="menu" value="'ContactContextMenu'; !isSelfPlayer	? 	{	_entityAccountId: entityAccount.id, 
																_playerContext: {type: 'startPrivateChat'},
																_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON,
																_isTrainingRoom: _isTrainingRoom, 
																_isBot: isBot,
																_channelId: canReportPortChatMisbehaviour ? channelEntity.channel.channelId : null }
														: null; null; null; 'formationPlayerContextMenuVisible'"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="fade" value="(!isReady || isInBattle) &amp;&amp; isAnimationUnlocked; 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<backgroundColor value="0x90FF9933"/>
					</style>
					<bind name="fade" value="(!isReady || isInBattle) &amp;&amp; isAnimationUnlocked; 1.0; {alpha: 1}; {alpha: 0}; {alpha: 1}; 1; 0.5"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="fade" value="isReady &amp;&amp; isAnimationUnlocked; 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<backgroundColor value="0x804CD6E8"/>
					</style>
					<bind name="fade" value="isReady &amp;&amp; isAnimationUnlocked; 1.0; {alpha: 1}; {alpha: 0}; {alpha: 1}; 1; 0.5"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="name" value="'participantDivisionPlayer_' + nickName"/>
			<styleClass value="$Fullsize"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<marginLeft value="-12px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'VoiceChatDockIcon'; { _playerName: pureName, _isSelf: isSelfPlayer}"/>
			</block>
			<block>
				<bind name="name" value="'participantDivisionPlayer_' + teamId + '_' + nickName"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'DHFormationPlayerIcon'; teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM ? {_entityAccountId: entityAccount.id, _isOtherDivision: selfTeamId != teamId, _isTrainingRoom: _isTrainingRoom} : null"/>
			</block>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="1px"/>
					<width value="47%"/>
					<multiline value="false"/>
					<noTranslate value="true"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM &amp;&amp; !isSelfPlayer	? '$FontColorGrey' :
							selfTeamId == teamId &amp;&amp; !isMercenary										? '$FontColorGolden'
																										: '$FontColorWhite'"/>
				<bind name="class" value="isSelfPlayer ? '$Bold' : '$None'"/>
				<bind name="text" value="nickName"/>
			</block>
			<block>
				<bind name="visible" value="shipId"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="53%"/>
				</style>
				<bind name="instance" value="'PreBattlePlayerShip'; (isReady || isInBattle) ? {_shipId: shipId} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PreBattlePlayerShip">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<marginTop value="1px"/>
				<marginBottom value="-1px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype}"/>
		</block>
		<block>
			<bind name="style" value="'marginLeft'; shipInfo.levelIcon.length == 0 ? '3px' : '0px'"/>
			<bind name="style" value="'marginRight'; shipInfo.levelIcon.length == 0 ? '2px' : '1px'"/>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: shipInfo.levelIcon,
											_alpha: 0.9,
										 	_levelRome : shipInfo.levelRome,
										 	_fontClass : '$TextDefaultBoldNM',
										}"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<alpha value="0.9"/>
				<width value="100%"/>
				<multiline value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="InvitedPlayerItem">
		<bind name="name" value="'invitedDivisionPlayer_' + nickName"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watch" value="'isSelfPlayer'; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'prebattlePlayerId'; []; entityAccount.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<style>
			<width value="100%"/>
			<height value="27px"/>
			<flow value="horizontal"/>
		</style>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="style" value="'hitTest'; !(isSelfPlayer)"/>
			<bind name="clickSplit"/>
			<bind name="transition" value="(rollOver || _rollOver || formationPlayerContextMenuVisible); 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="action" value="'left_click';	'openChannelForPrivateMessages'; {dbId: entityAccount.accountSimple.dbId}"/>
			<bind name="tooltip" value="'ContactInfoTooltip'; {	_entityAccountId: entityAccount.id, _actionDenyReason: 'no_reason',
												_playerContext: {type: 'startPrivateChat'}, _expirationTime: expirationTime }"/>
			<bind name="menu" value="'ContactContextMenu'; !isSelfPlayer ? {	_entityAccountId: entityAccount.id,
															_playerContext: {	type: 'startPrivateChat',
																				isInvitation: true },
															_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON }
														: null; null; null; 'formationPlayerContextMenuVisible'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
		</block>
		<block className="button_cross" type="native">
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_RECALL_INVITATION'}"/>
			<bind name="visible" value="(rollOver || _rollOver) &amp;&amp; isSelfPlayerCommander"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="6px"/>
			</style>
			<bind name="action" value="'buttonClick'; 'revokeInvitationToDivision'; {id: prebattlePlayerId}"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="13px"/>
				<hitTest value="false"/>
				<alpha value="0.7"/>
			</style>
			<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: true}"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="1px"/>
				<width value="262px"/>
				<hitTest value="false"/>
				<multiline value="false"/>
				<alpha value="0.7"/>
				<noTranslate value="true"/>
			</style>
			<styleClass value="$TextDefault"/>
			<styleClass value="$FontColorGrey"/>
			<bind name="text" value="nickName"/>
		</block>
	</block>
	<block className="FormationReadySwitcher">
		<block className="FormationReadySwitcher" type="ublock">
			<bind name="build!" value="{ _isTrainingRoom: false }"/>
		</block>
	</block>
	<block className="FormationShipClassesStatus">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'childId'; 'shipClassCountRestrictions.byPreBattleAndTeam.' +  _preBattleId + '_' + _teamId + '.sorted'"/>
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'classesList'; childId"/>
		<bind name="repeat" value="classesList; 'FormationShipClassStatus'; {}"/>
	</block>
	<block className="FormationShipLevelsStatus">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'childId'; 'shipLevelCountRestrictions.byPreBattleAndTeam.' +  _preBattleId + '_' + _teamId"/>
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'levelsList'; childId"/>
		<bind name="repeat" value="levelsList; 'FormationShipLevelStatus'; {}"/>
	</block>
	<block className="FormationShipClassStatus">
		<bind name="dataRefDH" value="'divisionShipClassCountEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'shipClasses'; ['divisionShipClassCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipClassCountEntity.divisionShipCountRestriction.shipClasses"/>
		<bind name="watchDH" value="'curCount'; ['divisionShipClassCountEntity.divisionShipCountRestriction.evCurCountChanged']; divisionShipClassCountEntity.divisionShipCountRestriction.curCount"/>
		<bind name="watchDH" value="'maxCount'; ['divisionShipClassCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipClassCountEntity.divisionShipCountRestriction.maxCount"/>
		<bind name="watch" value="'restrictionsIds'; shipClasses.length &gt; 1 ? 'IDS_DEPENDED_CLASSES_RESTRICTIONS_FOR_DIVISION_TOOLTIP' : 'IDS_CLASS_RESTRICTIONS_FOR_DIVISION_TOOLTIP'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: tr(restrictionsIds) }"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'marginLeft'; $index ? '12px' : '0'"/>
		<block>
			<style>
				<marginRight value="2px"/>
			</style>
			<bind name="repeat" value="shipClasses; 'ShipClassIconWrapper'; {_length: shipClasses.length}; {}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold18NM',
													_curValue: curCount,
													_maxValue: maxCount,
													_doNotHideOnZeroMaxValue: true,
													_doNotAlphaOnZeroCurValue: true	}"/>
		</block>
	</block>
	<block className="FormationShipLevelStatus">
		<bind name="dataRefDH" value="'divisionShipLevelCountEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'shipLevelRoman'; ['divisionShipLevelCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipLevelCountEntity.divisionShipCountRestriction.shipLevelRoman"/>
		<bind name="watchDH" value="'curCount'; ['divisionShipLevelCountEntity.divisionShipCountRestriction.evCurCountChanged']; divisionShipLevelCountEntity.divisionShipCountRestriction.curCount"/>
		<bind name="watchDH" value="'maxCount'; ['divisionShipLevelCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipLevelCountEntity.divisionShipCountRestriction.maxCount"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_LEVEL_RESTRICTIONS_FOR_DIVISION_TOOLTIP' }"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'marginLeft'; $index ? '16px' : '0'"/>
		<block type="text">
			<styleClass value="$TextDefault18NM"/>
			<style>
				<marginRight value="6px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="shipLevelRoman"/>
		</block>
		<block>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold18NM',
													_curValue: curCount,
													_maxValue: maxCount,
													_doNotHideOnZeroMaxValue: true,
													_doNotAlphaOnZeroCurValue: true	}"/>
		</block>
	</block>
	<block className="ShipClassIconWrapper">
		<style>
			<marginTop value="-6px"/>
		</style>
		<bind name="style" value="'marginLeft'; _length &gt; 1 &amp;&amp; ($index != (_length - 1)) ? '-5px' : '0'"/>
		<bind name="instance" value="'ShipIcon'; {_shipType: $value}"/>
	</block>
	<block className="FormationInviteListItem">
		<style>
			<position value="absolute"/>
			<width value="100%"/>
			<height value="27px"/>
		</style>
		<bind name="name" value="'FormationInviteListItem_' + _teamId"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="soundSet" value="dropdown"/>
			</params>
			<bind name="selected" value="divisionEntranceInfotipIsVisible"/>
		</block>
		<block>
			<style>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
				<marginTop value="2px"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_plus" type="native">
				<styleClass value="$MiddleVAligned"/>
			</block>
			<block type="text">
				<bind name="watch" value="'formationType'; _isTrainingRoom ? 'TRAINING_ROOM' : 'DIVISION'"/>
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="2px"/>
				</style>
				<bind name="text" value="tr(toUpperCase('IDS_HINT_LEFT_CLICK_TO_INVITE_TO_' + formationType))"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DHFormationPlayerIcon">
		<bind name="dataRefDH" value="'itemAccountEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId ? _entityAccountId : itemAccountEntity.id"/>
		<bind name="watchDH" value="'isReady'; ['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'isInBattle'; ['entityAccount.preBattlePlayerSimple.evIsInBattleChanged']; entityAccount.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'isCommander'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isMercenary'; ['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watchDH" value="'isTeamCommander'; ['entityAccount.trainingRoomPlayer.evUpdate']; entityAccount.trainingRoomPlayer.isCommander"/>
		<bind name="instance" value="'FormationPlayerIcon'; {	isCommander: _isTrainingRoom ? isTeamCommander : isCommander,
												isMercenary: isMercenary,
												isReady: isReady,
												isInBattle: isInBattle,
												isOtherDivision: _isOtherDivision	}"/>
	</block>
	<block className="DivisionListItem">
		<style>
			<width value="100%"/>
			<height value="27px"/>
		</style>
		<bind name="watch" value="'entityPlayer'; _preBattlePlayers[$index]"/>
		<bind name="watch" value="'entityInvitedPlayer'; $index &gt;= _preBattlePlayers.length ? _preBattleInvitedPlayers[$index - _preBattlePlayers.length] : null"/>
		<block>
			<bind name="visible" value="entityPlayer"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="_formationPlayerClass ? _formationPlayerClass : 'FormationPlayerItem'; entityPlayer != null ? {	_entityAccountId: entityPlayer.id,
																														_channelEntityId: _channelEntityId}
																													: null "/>
		</block>
		<block>
			<bind name="visible" value="entityInvitedPlayer"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InvitedPlayerItem'; entityInvitedPlayer != null ? { entityAccount: entityInvitedPlayer} : null"/>
		</block>
		<block>
			<bind name="visible" value="_showInvites &amp;&amp; entityPlayer == null &amp;&amp; entityInvitedPlayer == null"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'FormationInviteListItem'; _showInvites &amp;&amp; entityPlayer == null &amp;&amp; entityInvitedPlayer == null ? { _isTrainingRoom: _isTrainingRoom, _teamId: _teamId} : null"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_HINT_INVITE_PLAYERS'}"/>
			<bind name="tooltip" value="'DivisionEntranceInfotip'; { _isFromTrainingRoomBtn: _isTrainingRoom, _teamId: _teamId }; TooltipBehaviour.infotip; 'divisionEntranceInfotipIsVisible'"/>
		</block>
	</block>
	<block className="FormationRatingBattleLeague">
		<block className="PlayerRatingStereotypeSmall" type="ublock">
			<bind name="build!" value="{ _rating: _rating ? _rating : 0, _leagueName: _leagueName? _leagueName : '', _hasTooltip: true }"/>
		</block>
	</block>

	<!-- economic_boost_item -->
	<block className="EconomicBoostItemView">
		<block className="EconomicBoostItemView" type="ublock">
			<bind name="build!" value="{	_ecoBoostName: _name,
						_ecoBoostType: _type,
						_amount: _amount ? _amount : 0,
						_isUnlinkedLinkableBoost: _isUnlinkedLinkableBoost ? _isUnlinkedLinkableBoost : false }"/>
		</block>
	</block>

	<!-- fonts_no_margins -->
	<block className="FontNoMarginsHelper">
		<style>
			<marginTop value="16px"/>
		</style>
		<block type="text">
			<style>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="$value"/>
		</block>
		<block>
			<style>
				<width value="100px"/>
				<height value="8px"/>
				<backgroundColor value="0x55ff00cc"/>
			</style>
		</block>
		<block>
			<block>
				<style>
					<width value="15px"/>
					<height value="8px"/>
					<backgroundColor value="0x55ff00cc"/>
				</style>
			</block>
			<block type="text">
				<bind name="class" value="$value"/>
				<bind name="text" value="'OyTj021O'"/>
			</block>
			<block>
				<style>
					<width value="15px"/>
					<height value="8px"/>
					<backgroundColor value="0x55ff00cc"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100px"/>
				<height value="8px"/>
				<backgroundColor value="0x55ff00cc"/>
			</style>
		</block>
	</block>

	<!-- infotip_elements -->
	<block className="InfotipBg">
		<styleClass value="$FullsizeAbsolute"/>
		<block className="InfotipPanelBg">
			<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
			<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
					<styleClass value="$Fullsize"/>
					<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:true }"/>
				</block>
			</block>
		</block>
	</block>
	<block className="InfotipPanelBg">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:true }"/>
			</block>
		</block>
	</block>
	<block className="InfotipPins">
		<styleClass value="$FullsizeAbsolute"/>
		<params>
			<param name="name" value="pinContainer"/>
		</params>
		<block>
			<params>
				<param name="name" value="pinTop"/>
			</params>
			<style>
				<position value="absolute"/>
				<top value="-10px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<width value="22px"/>
					<height value="12px"/>
				</style>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? { _map: 'blurmap_infotip_arrow_vert'} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<width value="22px"/>
					<height value="12px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
				</style>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="pinBottom"/>
			</params>
			<style>
				<position value="absolute"/>
				<bottom value="-22px"/>
			</style>
			<bind name="scaleY" value="-1"/>
			<block>
				<style>
					<position value="absolute"/>
					<width value="22px"/>
					<height value="12px"/>
				</style>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? { _map: 'blurmap_infotip_arrow_vert'} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<width value="22px"/>
					<height value="12px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
				</style>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="pinLeft"/>
			</params>
			<style>
				<position value="absolute"/>
				<left value="-10px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<width value="12px"/>
					<height value="22px"/>
				</style>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? { _map: 'blurmap_infotip_arrow_hor'} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<position value="absolute"/>
					<width value="12px"/>
					<height value="22px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
				</style>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="pinRight"/>
			</params>
			<style>
				<position value="absolute"/>
				<right value="-10px"/>
			</style>
			<bind name="scaleX" value="-1"/>
			<block>
				<style>
					<position value="absolute"/>
					<width value="12px"/>
					<height value="22px"/>
				</style>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? { _map: 'blurmap_infotip_arrow_hor'} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<position value="absolute"/>
					<width value="12px"/>
					<height value="22px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
				</style>
			</block>
		</block>
	</block>

	<!-- item_chooser -->
	<block className="ItemChooser">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="name" value="_name"/>
		<bind name="var" value="{ _lastItemIndex: curIndex }"/>
		<bind name="var" value="{ _tooltipData: !_itemChooserTooltipText || (_items.length &lt;= 1) ? null : { _text: _itemChooserTooltipText } }"/>
		<bind name="watch" value="'_curItemIndex'; curIndex"/>
		<bind name="watch" value="'_direction'; curDirection"/>
		<bind name="watch" value="'isEnabled'; _disabled != true"/>
		<bind name="watch" value="'isSmthToChooseFrom'; _items.length &gt; 1"/>
		<bind name="watch" value="'isItemNavigateVisible'; isSmthToChooseFrom &amp;&amp; isEnabled"/>
		<bind name="catch" value="'ItemChooserInnerEvent.' + onItemSelectedEvent"/>
		<bind name="catch" value="'ItemChooserInnerEventDublicate.' + onItemSelectedEvent; {	_direction: _curItemIndex == _lastItemIndex ? !_direction : false,
																			_lastItemIndex: _curItemIndex }"/>
		<bind name="dispatch" value="'ItemChooserInnerEventDublicate.' + onItemSelectedEvent;
					'ItemChooser.' + onItemSelectedEvent;
					{ _curItemIndex: _curItemIndex, _direction: _direction };
					SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP;
					0.01"/>
		<bind name="tooltip" value="_customDropdown ? _customDropdown : 'ItemChooserDropdown';
		isSmthToChooseFrom 	? {	_items: _items,
								_listItemRenderer: _listItemRenderer,
								_listItemRendererData: _listItemRendererData,
								_onItemSelectedEvent: onItemSelectedEvent,
								_curItemIndex: _curItemIndex,
								_maxDropDownHeight: _maxDropDownHeight,
								_dropDownWidth: _dropDownWidth }
							: null;
		TooltipBehaviour.verticalInfoWidget; null;
		'isDropdownChooserListVisible'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipData"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'hitTest'; isSmthToChooseFrom &amp;&amp; isEnabled"/>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<bind name="style" value="'marginRight'; isItemNavigateVisible ? '-8px' : '0px'"/>
		<bind name="soundSet" value="isSmthToChooseFrom ? 'dropdown' : ''"/>
		<block>
			<bind name="visible" value="isSmthToChooseFrom"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="1px"/>
				<marginBottom value="3px"/>
			</style>
			<block>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown &amp;&amp; !isDropdownChooserListVisible; 0.15; { alpha: 0 }; { alpha: 1 }"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/buttons/button_dock/over.png"/>
					<background9Slice value="[4]"/>
				</style>
			</block>
			<block>
				<bind name="transition" value="mouseDown || isDropdownChooserListVisible; 0.15; { alpha: 0 }; { alpha: 1 }"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/buttons/button_dock/down.png"/>
					<background9Slice value="[4]"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="name" value="_items[curIndex]"/>
			<bind name="style" value="'width'; _width ? '100%f' : 'auto'"/>
			<bind name="instance" value="_choosedItemRenderer; {_item: _items[curIndex], _choosedItemRendererParams: _choosedItemRendererParams}"/>
		</block>
		<block>
			<bind name="visible" value="isItemNavigateVisible"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<hitTest value="false"/>
				<alpha value="0.7"/>
				<marginRight value="4px"/>
				<width value="16px"/>
				<height value="16px"/>
				<backgroundImage value="url:../service_kit/buttons/navigate_arrow/down.png"/>
			</style>
		</block>
	</block>
	<block className="ItemChooserDropdown">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<bind name="style" value="'width'; _dropDownWidth ? _dropDownWidth : '180px'"/>
		<block className="InfotipBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="InfotipPanelBg">
				<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
				<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
				<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
				<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
						<styleClass value="$Fullsize"/>
						<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:true }"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<params>
				<param name="name" value="ItemChooserDropdown"/>
			</params>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'maxHeight'; _maxDropDownHeight ? _maxDropDownHeight : 220"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_items; _listItemRenderer; {_onItemSelectedEvent: _onItemSelectedEvent, _curItemIndex: _curItemIndex, _listItemRendererData: _listItemRendererData}"/>
			</block>
		</block>
	</block>
	<block className="DefaultTextChoosedItemRenderer">
		<style>
			<height value="32px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultItemChooser"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="7px"/>
				<marginRight value="3px"/>
				<marginTop value="8px"/>
				<alpha value="0.75"/>
			</style>
			<bind name="text" value="(tr(_item))"/>
		</block>
	</block>
	<block className="TextListItemRenderer">
		<styleClass value="$ContextMenuListItem"/>
		<block className="MenuItemWithSelection">
			<bind name="watch" value="'isSelected'; ((_curItemIndex == $index))"/>
			<styleClass value="$Fullsize"/>
			<bind name="name" value="$value"/>
			<bind name="instance" value="'DefaultMenuItemBackground'; { _isSelected: isSelected }"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="class" value="isSelected ? '$Bold' : '$None'"/>
				<bind name="text" value="(_toLowerCase ? toLowerCase(tr($value))
											: (tr($value)))"/>
				<bind name="name" value="'menu_item_' + _titleIds"/>
			</block>
		</block>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEvent.' + _onItemSelectedEvent); {_curItemIndex: $index}"/>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEventDublicate.' + _onItemSelectedEvent)"/>
	</block>

	<!-- markers_attention -->
	<block className="MarkerAttention">
		<bind name="watch" value="'markerSize';	_size == 0		? '19px'	:
								_size == 1		? '38px'	:
								_size == 2		? '80px'
														: '19px'"/>
		<bind name="watch" value="'markerImage';	_size == 0		? 'url:../service_kit/markers/marker_attention.png'			:
								_size == 1		? 'url:../service_kit/markers/marker_attention_big.png'		:
								_size == 2		? 'url:../service_kit/markers/marker_attention_huge.png'
														: 'url:../service_kit/markers/marker_attention.png'"/>
		<style>
			<hitTest value="false"/>
		</style>
		<bind name="style" value="'width'; markerSize"/>
		<bind name="style" value="'height'; markerSize"/>
		<bind name="style" value="'backgroundImage'; markerImage"/>
	</block>

	<!-- markers_new -->
	<block className="MarkerNewCounter">
		<style>
			<minWidth value="15"/>
		</style>
		<block className="MarkerNew" type="ublock">
			<bind name="build!" value="{ _newContentCounter: _newContentCounter}"/>
		</block>
	</block>
	<block className="MarkerNewAttention">
		<style>
			<width value="41px"/>
		</style>
		<block className="MarkerNew" type="ublock">
			<bind name="build!" value="{}"/>
		</block>
	</block>

	<!-- modal_battle_type_renderer -->
	<block className="ModalBattleTypeRenderer">
		<block className="ModalBattleTypeRenderer" type="ublock">
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_forceVisible: _forceVisible ? _forceVisible : false,
						_showBattleHeader: _showBattleHeader ? _showBattleHeader : true,
						_showBattleSubheader: _showBattleSubheader ? _showBattleSubheader : true,
						_dontShowSmokeAnimation: _dontShowSmokeAnimation ? _dontShowSmokeAnimation : false}"/>
		</block>
	</block>

	<!-- modal_division_not_ready -->
	<block className="ModalWindowDivisionNotReady">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<bind name="blurLayer"/>
				<style>
					<position value="absolute"/>
				</style>
				<block>
					<style>
						<backgroundColor value="0x000000FF"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? {} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundColor value="0xFF001438"/>
						<alpha value="0.45"/>
					</style>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ModalWindowDivisionNotReadyContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowDivisionNotReadyContent">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="child" value="!!trainingRoomEntity ? 0 : 1; {}; 'ModalWindowDivisionNotReadyContentNew'; 'ModalWindowDivisionNotReadyContentOld'"/>
	</block>
	<block className="ModalWindowDivisionNotReadyContentNew">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isSelfPlayerReady'; ['selfPlayerEntity.preBattlePlayerSimple.evIsReadyChanged']; selfPlayerEntity.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'timer'; ['trainingRoomEntity.trainingRoomWindowState.evTimerChanged']; trainingRoomEntity.trainingRoomWindowState.timer"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watch" value="'formationType'; preBattleEntity.preBattleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE ? 'TRAINING_BATTLE' : 'DIVISION'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'unreadyPlayers'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'unreadyPlayers'+'ROOT'; 'unreadyPlayers'; {'filter': !($entity.preBattlePlayerSimple.isReady)}; ['preBattlePlayerSimple.evIsReadyChanged']"/>
		<bind name="watch" value="'isEveryoneReady'; unreadyPlayers.length == 0"/>
		<style>
			<width value="680px"/>
		</style>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="watch" value="'headerTitle'; isEveryoneReady 		? ('IDS_DIVISION_READY') : 
									!(isSelfPlayerReady)	? ('IDS_DIVISION_LEAVES_WITHOUT_YOU')
															: tr('IDS_INCOMPLETE_DIVISION')"/>
			<bind name="instance" value="'ModalWindowHeaderWithIcon'; {	_header: headerTitle, _headerWidth: '100%', _type: isSelfPlayerCommander ? 'division_commander' : 'division_member',
														_showInnerCloseButton: (notReadyWindowState != 2) &amp;&amp; (isSelfPlayerCommander || !isSelfPlayerReady) }"/>
		</block>
		<block>
			<bind name="visible" value="!(isSelfPlayerReady)"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: 'IDS_DIVISION_LEAVES_WITHOUT_YOU_INFO', _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="isSelfPlayerReady"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<width value="320px"/>
					<marginRight value="16px"/>
				</style>
				<bind name="instance" value="'FormationStatusMainElement'; {_isTrainingRoom: true, _width: '320px', _teamId: 0}"/>
			</block>
			<block>
				<style>
					<width value="320px"/>
				</style>
				<bind name="instance" value="'FormationStatusMainElement'; {_isTrainingRoom: true, _width: '320px', _teamId: 1}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isSelfPlayerReady &amp;&amp; (notReadyWindowState != 2)"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: ('IDS_DIVISION_NOT_READY_COMMANDER_INFO'), _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccent"/>
			<bind name="class" value="'$FontColorWhite'"/>
			<bind name="text" value="'IDS_FORMATION_GO_TO_BATTLE_AFTER'"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextAccent"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<style>
					<width value="300px"/>
					<textAlign value="center"/>
				</style>
				<bind name="countdown" value="timer; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="countdownText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="22px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'UnreadyPlayerControls'; !(isSelfPlayerCommander) &amp;&amp; !(isSelfPlayerReady) ? {windowAppearLag: windowAppearLag, _windowState: notReadyWindowState} : null"/>
			<bind name="instance" value="'CommanderControls'; isSelfPlayerCommander ? {windowAppearLag: windowAppearLag, _windowState: notReadyWindowState} : null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="FormationStatusMainElement">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; 'byPreBattleAndTeam.' + selfPreBattleId + '_' + _teamId + '.preBattleMembers.sorted'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="8px"/>
				<align value="center"/>
			</style>
			<block>
				<style>
					<marginBottom value="16px"/>
				</style>
				<bind name="instance" value="'FormationHeader'; { _isTrainingRoom: _isTrainingRoom, _teamId: _teamId }"/>
			</block>
			<block>
				<bind name="instance" value="'FormationShipClassesStatus'; {_preBattleId: selfPreBattleId, _teamId: _teamId}"/>
			</block>
		</block>
		<block>
			<bind name="style" value="'height'; preBattlePlayers.length &lt; 5 ? preBattlePlayers.length * 30 + 'px' : '150px'"/>
			<style>
				<width value="100%"/>
				<height value="50px"/>
				<overflow value="scroll"/>
				<flow value="vertical"/>
				<scrollbar value="ModernScrollBar"/>
				<scrollArea value="ModernScrollArea"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
				<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
				<itemWidth value="340px"/>
				<itemHeight value="30px"/>
				<wheelScrollSpeed value="100"/>
			</style>
			<bind name="generator" value="preBattlePlayers; 'DHBigFormationPlayerItem'; {}"/>
		</block>
	</block>
	<block className="UnreadyPlayerControls">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="watch" value="'isTrainingRoom'; !!trainingRoomEntity"/>
		<bind name="collectionDH" value="CC.ownShip; 'shipsList'; 'forDivision.sorted'"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="22px"/>
			</style>
			<block>
				<bind name="visible" value="shipsList.length &gt; 0"/>
				<block type="text">
					<style>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$TextHeaderBigWhite"/>
					<bind name="text" value="'IDS_YOUR_SHIP'"/>
				</block>
				<block>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="var" value="{_curItemIndex: 0,
							_direction: false}"/>
					<bind name="catch" value="'ItemChooser.shipSelected'"/>
					<bind name="instance" value="'ItemChooser'; shipsList.length &gt; 0 ? {_items: shipsList, _choosedItemRenderer: 'ShipItemChoosedRendererDH', _listItemRenderer: 'ShipItemChooserListRendererDH',
																			curIndex: _curItemIndex, onItemSelectedEvent: 'shipSelected', _itemChooserTooltipText: 'IDS_CHOOSE_SHIP',
																			_customDropdown: 'ShipItemChooserDropdown'}
																	: null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="shipsList.length == 0"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<block>
					<style>
						<marginRight value="3px"/>
						<marginTop value="2px"/>
					</style>
					<block className="icon_warning_orange_mid" type="native"/>
				</block>
				<block type="text">
					<bind name="class" value="'$TextHeaderBigWhite'"/>
					<bind name="class" value="'$FontColorOrange'"/>
					<bind name="text" value="'IDS_NO_ALLOWED_SHIPS_FOR_THIS_BATTLE'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="transition" value="(_windowState == 1); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<bind name="style" value="'hitTest'; _windowState != 2"/>
			<style>
				<marginTop value="8px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 7 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 7 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="firstEntityDH" value="'battleTypeEntity'; CC.battleType; 'selected'"/>
				<bind name="watchDH" value="'battleTypeReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.battleTypeReasons"/>
				<bind name="watchDH" value="'battleTypeStatus'; ['battleTypeEntity.battleType.evStatusChanged']; battleTypeEntity.battleType.status"/>
				<bind name="watch" value="'isReadyBtnEnabled';  (shipsList.length &gt; 0) &amp;&amp; (battleTypeStatus != SC.Common.BATTLE_TYPE_STATE.DISABLED)"/>
				<bind name="tooltip" value="'MultipleWarningsTooltip'; (battleTypeReasons.length &gt; 0) ? {_warningsArr: battleTypeReasons} : null"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; shipsList.length == 0 &amp;&amp; battleTypeReasons.length == 0 ? {	_text: tr('IDS_NO_ALLOWED_SHIPS_FOR_THIS_BATTLE'),
																												_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING } : null"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '160px', 
												_enabled: isReadyBtnEnabled,
												_name: 'set_ready_button',
												_isTransactionBtn: true,
												_action: isTrainingRoom ? 'setIsReadyInTrainingRoom' : '',
												_actionParams: {isReady: true, shipId: shipsList[_curItemIndex].ship.id},
												_request: !(isTrainingRoom) ? 'playerJoinedBattle' : '',
												_requestParams: {shipId: shipsList[_curItemIndex].ship.id},
												_label: 'IDS_FORMATION_SET_READY_GO_BATTLE',
												_focusIndex: 0,
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 6 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 6 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '160px',
												_name: 'btn_cancel',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_FORMATION_STAY_IN_DOCK',
												_focusIndex: 1,
												_defaultFocused: false}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipItemChooserDropdown">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<style>
			<width value="180px"/>
		</style>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; true ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(true) ? {} : null"/>
		</block>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<params>
				<param name="name" value="ItemChooserDropdown"/>
			</params>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="180px"/>
				<width value="100%"/>
				<scrollbar value="ModernScrollBar"/>
				<scrollArea value="ModernScrollArea"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
				<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
				<itemWidth value="180px"/>
				<itemHeight value="36px"/>
			</style>
			<bind name="generatorDH" value="CC.ownShip; _listItemRenderer; 'forDivision.sorted'; {_onItemSelectedEvent: _onItemSelectedEvent, _curItemIndex: _curItemIndex, _listItemRendererData: _listItemRendererData}"/>
		</block>
	</block>
	<block className="ModalWindowDivisionNotReadyContentOld">
		<style>
			<width value="500px"/>
		</style>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isReady';	['divisionDataEntity.division.evIsReadyChanged']; divisionDataEntity.division.isReady"/>
		<bind name="watchDH" value="'isEveryoneReady';	['divisionDataEntity.division.evIsEveryoneReadyChanged']; divisionDataEntity.division.isEveryoneReady"/>
		<bind name="watchDH" value="'windowState';	['divisionDataEntity.division.evWindowStateChanged']; divisionDataEntity.division.windowState"/>
		<bind name="watchDH" value="'timer';	['divisionDataEntity.division.evTimerChanged']; divisionDataEntity.division.timer"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="20px"/>
			</style>
			<bind name="watch" value="'headerTitle'; isEveryoneReady ? 'IDS_DIVISION_READY'
																 : !(isReady)	? 'IDS_DIVISION_LEAVES_WITHOUT_YOU'
																 							: tr('IDS_INCOMPLETE_DIVISION')"/>
			<bind name="instance" value="'ModalWindowHeaderWithIcon'; {	_header: headerTitle, _headerWidth: '100%', _type: 'division_' + (isCommander ? 'commander' : 'member'),
														_showInnerCloseButton: (windowState != 2) &amp;&amp; (isCommander || !isReady) }"/>
		</block>
		<block>
			<bind name="visible" value="!isReady"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="22px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: 'IDS_DIVISION_LEAVES_WITHOUT_YOU_INFO', _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="visible" value="isReady"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="320px"/>
				<left value="50%"/>
				<marginLeft value="-50%"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="instance" value="'FormationPlayersList'; isReady ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isReady &amp;&amp; (windowState != 2)"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: 'IDS_DIVISION_NOT_READY_COMMANDER_INFO', _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccent"/>
			<bind name="class" value="'$FontColorWhite'"/>
			<bind name="text" value="'IDS_FORMATION_GO_TO_BATTLE_AFTER'"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextAccent"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<style>
					<width value="300px"/>
					<textAlign value="center"/>
				</style>
				<bind name="countdown" value="timer; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="countdownText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="22px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'UnreadyPlayerControls'; !(isCommander) &amp;&amp; !(isReady) ? {windowAppearLag: windowAppearLag, _windowState: windowState} : null"/>
			<bind name="instance" value="'CommanderControls'; isCommander ? {windowAppearLag: windowAppearLag, _windowState: windowState} : null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="FormationPlayersList">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'preBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="collectionRepeatDH" value="CC.preBattlePlayerSimple; 'BigFormationPlayerItem'; 'byPreBattle.' + preBattleId + '.preBattleMembers.sorted'; {_isCurPlayerCommander: isCommander, _formationType: 'division'}"/>
		</block>
	</block>
	<block className="CommanderControls">
		<bind name="transition" value="(_windowState == 1); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
		<bind name="style" value="'hitTest'; _windowState != 2"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '160px',
											_name: 'btn_cancel',
											_enabled: true,
											_isTransactionBtn: true,
											_label: 'IDS_CANCEL',
											_focusIndex: 0,
											_defaultFocused: true}"/>
		</block>
	</block>
	<block className="DHBigFormationPlayerItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'entityAccount'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'shipId'; ['entityAccount.preBattlePlayerSimple.evShipIdChanged']; entityAccount.preBattlePlayerSimple.shipId"/>
		<bind name="watchDH" value="'isReady'; ['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'isCommander'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'BigFormationPlayerItem'; { _isReady: isReady,
												_dbid: entityAccount.accountSimple.dbId,
												_isCommander: isCommander,
												_isCurrentPlayer: isSelf,
												_shipId: shipId,
												_formationType: 'division'}"/>
	</block>
	<block className="BigFormationPlayerItem">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="dataRefDH" value="'entityAcc'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'dataBaseId'; []; entityAcc ? entityAcc.accountSimple.dbId : _dbid"/>
		<bind name="watchDH" value="'isReady'; ['entityAcc.preBattlePlayerSimple.evIsReadyChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.isReady : _isReady"/>
		<bind name="watchDH" value="'isIgnored'; ['entityAcc.preBattlePlayerSimple.evIsIgnoredChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.isIgnored : false"/>
		<bind name="watchDH" value="'isCommander'; ['entityAcc.preBattlePlayerSimple.evIsCommanderChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.isCommander : _isCommander"/>
		<bind name="watchDH" value="'isSelf'; []; entityAcc ? entityAcc.accountSimple.isSelfPlayer : _isCurrentPlayer"/>
		<bind name="watchDH" value="'shipId'; ['entityAcc.preBattlePlayerSimple.evShipIdChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.shipId : _shipId"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
			<marginBottom value="1px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
				<width value="100%"/>
				<marginLeft value="8px"/>
				<marginRight value="8px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'FormationPlayerIcon'; {isCommander: isCommander, isReady: isReady}"/>
				</block>
				<bind name="primaryEntityDH" value="'entityAccount'; CC.accountSimple; dataBaseId"/>
				<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
				<block type="text">
					<style>
						<marginLeft value="3px"/>
						<width value="90px"/>
						<multiline value="false"/>
						<noTranslate value="true"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="class" value="_formationType == 'division' || isSelf	? '$FontColorGolden'
																	: '$FontColorDefault'"/>
					<bind name="class" value="isSelf ? '$Bold' : '$None'"/>
					<bind name="text" value="nickName"/>
				</block>
				<block>
					<bind name="visible" value="isReady &amp;&amp; shipInfo"/>
					<style>
						<marginLeft value="6px"/>
						<marginTop value="2px"/>
					</style>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype}"/>
					</block>
					<block type="text">
						<style>
							<width value="90px"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextDefaultBold"/>
						<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<right value="0px"/>
					<marginTop value="2px"/>
					<position value="absolute"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="100"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="style" value="'alpha'; isIgnored ? 0.8 : 1"/>
					<bind name="class" value="(isReady	? '$FontColorGreen'
										: isIgnored	? '$FontColorDefault'
													: '$FontColorOrange')"/>
					<bind name="text" value="(isReady ? toUpperCase(tr('IDS_READY'))
									 : isIgnored	? toUpperCase(tr('IDS_DECLINED'))
													: toUpperCase(tr('IDS_NOT_READY')) )"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipItemChoosedRendererDH">
		<style>
			<marginLeft value="4px"/>
			<marginTop value="7px"/>
			<marginBottom value="5px"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'ShipTitleWithIconAndLevel'; {_shipID: _item.ship.id}"/>
	</block>
	<block className="ShipItemChooserListRendererDH">
		<style>
			<width value="100%"/>
			<height value="36px"/>
		</style>
		<bind name="dataRefDH" value="'shipEntity'; '$dataRef.ref'"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="_curItemIndex == $index"/>
		</block>
		<block>
			<style>
				<marginLeft value="4px"/>
				<marginTop value="5px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'ShipTitleWithIconAndLevel'; {_shipID: shipEntity.ship.id}"/>
		</block>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEvent.' + _onItemSelectedEvent); {_curItemIndex: $index}"/>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEventDublicate.' + _onItemSelectedEvent)"/>
	</block>

	<!-- modal_eco_boost_buy -->
	<block className="ModalWindowBuyEcoBoost">
		<bind name="soundOn" value="'addedToStage'; 'openYesNoConfirmation'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow';	{	_headerText:	$root._isCommonBoost	? 'IDS_MODAL_WINDOW_TITLE_ECOBOOST_PURCHASE' :
															$root._linkFromStorage	? 'IDS_MODAL_WINDOW_TITLE_MULTIBOOST_LINK'
																					: 'IDS_MODAL_WINDOW_TITLE_MULTIBOOST_PURCHASE',
											_hideDivider: true,
											_contentElement: 'ModalWindowBuyEcoBoostContent' }"/>
	</block>
	<block className="ModalWindowBuyEcoBoostContent">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'ecoBoostPriceEntity'; CC.priceComponent; $root._ecoBoostId + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'ecoBoostPrice'; ['ecoBoostPriceEntity.priceComponent.evChanged']; ecoBoostPriceEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource.credits"/>
		<bind name="watch" value="'priceDeficit'; ecoBoostPrice.finalPrice - ((ecoBoostPrice.currency == 'gold') ? accountGold : accountCredits)"/>
		<bind name="primaryEntityDH" value="'ecoBoostEntity'; CC.ecoBoost; $root._ecoBoostId"/>
		<bind name="collectionDH" value="CC.ecoBoost; 'MultiBoostsCollection'; 'availableToUser.' + 'byType.' + SC.Common.ECOBOOST_TYPES.LINKABLE"/>
		<bind name="watch" value="'multiBoost'; MultiBoostsCollection[0]"/>
		<bind name="watchDH" value="'multiBoostModifiers';	['multiBoost.attributes.evChanged'];	multiBoost.attributes.modifiers"/>
		<bind name="watchDH" value="'multiboostsAmount';		['multiBoost.countComponent.evChanged'];	multiBoost.countComponent.value"/>
		<bind name="watch" value="'isBuyAvailable'; $root._isCommonBoost	? priceDeficit &lt;= 0
														: priceDeficit &lt;= 0 &amp;&amp; multiboostsAmount == 0"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'filtersByLevel'; 'byFilterType.' + 'level'"/>
		<bind name="collectionDesign" value="'DES_filtersByLevel'; 'levelfilters'; {'filter':isIn($entity.id, ecoBoostEntity.shipListRestrictions.selectedFilters)}; []"/>
		<bind name="collectionFields" value="'levelfilters'; ['shipFilterItem.field']"/>
		<bind name="watch" value="'hasLevelRestrictions'; levelfilters.length &gt; 0"/>
		<bind name="watchDH" value="'ecoBoostType'; ['ecoBoostEntity.ecoBoost.evUpdated']; ecoBoostEntity.ecoBoost.type"/>
		<bind name="watchDH" value="'name';					[];											ecoBoostEntity.ecoBoost.name"/>
		<bind name="watchDH" value="'attributesNegative';	['ecoBoostEntity.attributes.evChanged'];	ecoBoostEntity.attributes.negative"/>
		<bind name="watchDH" value="'attributesNeutral';		['ecoBoostEntity.attributes.evChanged'];	ecoBoostEntity.attributes.neutral"/>
		<bind name="watchDH" value="'attributesPositive';	['ecoBoostEntity.attributes.evChanged'];	ecoBoostEntity.attributes.positive"/>
		<bind name="watchDH" value="'boostSubType';			['ecoBoostEntity.ecoBoost.evUpdated'];		ecoBoostEntity.ecoBoost.subType"/>
		<bind name="watchDH" value="'rarity';				[];											ecoBoostEntity.ecoBoost.rarity"/>
		<bind name="watch" value="'headerText';	$root._isCommonBoost		? 'IDS_' + toUpperCase(name) :
								!$root._linkFromStorage		? subst('IDS_MULTIBOOST_WITH_SHIP_TITLE',  [], { shipName: toUpperCase(tr(shipInfo.nameIDS)) }) :
								hasLevelRestrictions		? subst('IDS_MULTIBOOST_WITH_LEVEL_TITLE', [], { levelRange: toRomanShipLevels(levelfilters_shipFilterItem_field) })
															: tr('IDS_MULTIBOOST_TITLE')"/>
		<bind name="watch" value="'subheaderText'; $root._isCommonBoost		? tr('IDS_ECONOMIC_BOOST_TYPE_EXPENDABLE_' + rarity)
															: 'IDS_ECONOMIC_BOOST_TYPE_MULTIBOOST'"/>
		<bind name="watch" value="'isCurrenciesPanelVisible'; !$root._linkFromStorage"/>
		<bind name="watch" value="'currenciesPanelPrices'; [{currency: ecoBoostPrice.currency, finalPrice: -ecoBoostPrice.finalPrice}]"/>
		<style>
			<align value="center"/>
			<width value="340px"/>
		</style>
		<block>
			<bind name="visible" value="!isCurrenciesPanelVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
				<marginTop value="-4px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isCurrenciesPanelVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 340 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="tooltip" value="$root._isCommonBoost ? 'EconomicBoostTooltip' : 'MultiBoostTooltip';	{	_id: $root._ecoBoostId,
																								_noMouseInstructions: true}"/>
			<bind name="instance" value="'ModalWindowSystemExpendableIconWithHeaderAndSubheader';	{	_headerIconType: 2,
																						_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																						_headerText: headerText,
																						_subheaderText: subheaderText,
																						_maxWidth: 300,
																						_data:	{ name: name,
																								  type: ecoBoostType,
																								  linking: $root._linkFromStorage} }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBuyAvailable"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; isBuyAvailable	?	{	_questionText: 'IDS_QUESTION_PURCHASE_AND_INSTALL_FOR',
																						_priceInfo: ecoBoostPrice }
																				:	null"/>
		</block>
		<block>
			<bind name="visible" value="$root._linkFromStorage"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefault26NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_QUESTION_MULTIBOOST_LINK"/>
			</block>
			<block>
				<style>
					<marginLeft value="16px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: viewedShipId, _withFlag: false, _fontClass: '$TextDefaultBold26NM' }"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault26NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_QUESTION"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!$root._linkFromStorage &amp;&amp; priceDeficit &gt; 0"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefault26NM"/>
				<style>
					<textColor value="0xFFFF9933"/>
				</style>
				<default_text value="IDS_NOT_ENOUGH_FUNDS"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!$root._linkFromStorage &amp;&amp; priceDeficit &gt; 0"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'PriceDeficit'; !$root._linkFromStorage &amp;&amp; priceDeficit &gt; 0	?	{ _large: true, priceInfo: { currency: ecoBoostPrice.currency }, _deficit: priceDeficit }
																								:	null"/>
		</block>
		<block>
			<bind name="visible" value="$root._linkFromStorage"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="380"/>
					<textAlign value="center"/>
				</style>
				<bind name="style" value="'textColor'; SC.Ui_styles.SERVICE_COLORS.ORANGE"/>
				<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; '[icon] ' + tr('IDS_WARNING_MULTIBOOST_BEFORE_LINK')"/>
			</block>
		</block>
		<block>
			<styleClass value="$InfoLineBoundaries"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<bind name="watch" value="'btnOkEnabled'; priceDeficit &lt;= 0 || $root._linkFromStorage"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<bind name="fade" value="btnOkEnabled; 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 129}; {alpha: 0, width: 0}"/>
					<style>
						<marginRight value="24px"/>
					</style>
					<bind name="soundSet" value="btnOkEnabled ? 'button_card' : ''"/>
					<bind name="instance" value="'DefaultButton';	{
														_width: '129px',
														_name: 'btn_ok',
														_enabled: btnOkEnabled,
														_isTransactionBtn: true,
														_request:	$root._isCommonBoost	? 'buyAndInstallEcoBoost' :
																	$root._linkFromStorage	? 'linkMultiboost'
																							: 'buyMultiboost',
														_requestParams: { boostId: $root._ecoBoostId },
														_label: 'IDS_YES',
														_focusIndex: 1,
														_defaultFocused: true
													}"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_label: btnOkEnabled ? 'IDS_NO' : 'IDS_CLOSE_UPPER_CASE',
												_width: '129px',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 2,
												_defaultFocused: false}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_elements_shipinfo -->
	<block className="ModalWindowShipPreview">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<block>
			<style>
				<width value="404px"/>
				<height value="155px"/>
				<backgroundImage value="url:../ships_silhouettes/ship_background.png"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="style" value="'backgroundImage'; 'url:../ships_silhouettes/' + shipInfo.shortName + '.png'"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../ships_silhouettes/ship_background_overlay.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'ModalWindowShipPreviewText'; { _shipId: _shipId, _width: '360px' }"/>
		</block>
	</block>
	<block className="ModalWindowShipPreviewText">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="instance" value="'ShipLineItemNM'; { _shipId: _shipId, _withFlag: true, _fontClass: '$TextDefaultBold22NM' }"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
			</style>
			<bind name="instance" value="'ShipClassLineItemNM'; { _shipId: _shipId, _fontClass : '$TextDefault18NM', _width: _width }"/>
		</block>
	</block>

	<!-- modal_extended_system_message -->
	<block className="ExtendedSystemLogWindow">
		<bind name="stageSize"/>
		<bind name="firstEntityDH" value="'sessionPrefsEntity'; CC.sessionPreference"/>
		<bind name="watchDH" value="'PBSScreenActiveTabIndexDH'; ['sessionPrefsEntity.sessionPreference.evPBSScreenActiveTabIndexChanged']; sessionPrefsEntity.sessionPreference.PBSScreenActiveTabIndex"/>
		<bind name="watch" value="'PBSScreenActiveTabIndex'; PBSScreenActiveTabIndexDH ? PBSScreenActiveTabIndexDH : SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'battleResults'; ['battleResultsDH.dataComponent.evDataChanged']; battleResultsDH.dataComponent.data"/>
		<bind name="watch" value="'gameData'; 			battleResults.game_data"/>
		<bind name="watch" value="'personal'; 			battleResults.personal"/>
		<bind name="watch" value="'teamResults'; 		battleResults.team_results"/>
		<bind name="watch" value="'creditsExperience'; 	battleResults.credits_experience"/>
		<bind name="watch" value="'result'; 				gameData.battle_result"/>
		<bind name="watch" value="'resultText'; result == SC.Battle.BATTLE_RESULT.WON_POSITION 	? subst('IDS_SYS_MSG_BATTLE_RESULTS_' + result, [], {_wonPosition: personal.wonPosition})
																				: UIStrings.getEndBattleResult(result)"/>
		<bind name="watch" value="'isSpectator'; gameData.isSpectator"/>
		<bind name="watch" value="'game_mode'; 	gameData.game_mode"/>
		<bind name="watch" value="'scenario'; 	gameData.scenario"/>
		<bind name="watch" value="'isPersonalResultsOnly';	scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'isBattleResultReasonHided'; false"/>
		<bind name="watch" value="'isTeamResultVisible'; 	game_mode != GameMode.BATTLE_CHALLENGES &amp;&amp; game_mode != GameMode.BATTLE_TRIALS"/>
		<bind name="watch" value="'isDetailedReportVisible'; game_mode != GameMode.BATTLE_CHALLENGES"/>
		<bind name="watch" value="'commentText'; UIStrings.getEndBattleComment(isBattleResultReasonHided || !battleResults ? {} : battleResults)"/>
		<bind name="watch" value="'validTabIndex';	isPersonalResultsOnly 	? SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT :
									isSpectator 			? SC.Common.POST_BATTLE_SCREEN_TAB.TEAM_REPORT
															: PBSScreenActiveTabIndex"/>
		<bind name="watch" value="'hideTabBars'; isSpectator || isPersonalResultsOnly"/>
		<bind name="watch" value="'battleType'; gameData.battleType"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="directEvent" value="'addedToStage'; 'setSessionPref'; { prefName: 'PBSScreenActiveTabIndex', newValue: SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT }"/>
		<bind name="watch" value="'isTrainingBattle'; battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isTournamentBattle'; battleType == SC.Common.BATTLE_TYPES.TOURNAMENT_BATTLE"/>
		<bind name="watch" value="'isCustomBattle'; isTrainingBattle || isTournamentBattle"/>
		<styleClass value="$Fullsize"/>
		<block className="ExtendedSystemLogWindowBG">
			<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<style>
					<backgroundSize value="cover"/>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:' + battleResults.game_data.map_path"/>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<bind name="blurLayer"/>
				<style>
					<position value="absolute"/>
				</style>
				<block>
					<style>
						<backgroundColor value="0x000000FF"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.3; 0.15; {alpha: 0}; {alpha: 0.3}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 0.3}; {alpha: 0}"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? { _map: 'blurmap_low'} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="contrast_panel" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="visible" value="((contrast) &amp;&amp; (PBSScreenActiveTabIndex != SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT))"/>
					</block>
					<block className="modal_panel" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<alpha value="1.6"/>
						</style>
					</block>
				</block>
			</block>
		</block>
		<bind name="stageSize"/>
		<bind name="watch" value="'PBSWidth'; 1077 + (stageWidth - 1280)*0.5"/>
		<bind name="watch" value="'PBSHeight'; 630 + (stageHeight - 720)*0.3"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="100%"/>
				<width value="1280:1077,1920:1420aw"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; stageWidth &gt;= 1440 ? '24px' : '12px'"/>
				<bind name="appear" value="'startShow'; 0.15; 0.1; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'TabBarResults'; hideTabBars 	? null
																: { _currentTabIndex: validTabIndex,
																	_isTeamResultVisible: isTeamResultVisible,
																	_isDetailedReportVisible: isDetailedReportVisible,
																	_isCreditsAndExpVisible: !isCustomBattle }"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<top value="7px"/>
						<right value="-60px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'startHide'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<style>
					<width value="100%"/>
					<height value="720:630,1080:738ah"/>
				</style>
				<bind name="style" value="'marginTop'; 10 + (stageHeight - 720) * 0.2"/>
				<bind name="child" value="validTabIndex; {	_data: {	personal: personal,
														game_data: gameData,
														credits_experience: creditsExperience,
														team_results: teamResults,
														player: battleResults.player,
														resultText: resultText,
														commentText: commentText,
														delay: 0.6,
														ribbonsDelay: 1.4,
														_PBSWidth: PBSWidth, _PBSHeight: PBSHeight, _isHistoryPBS: true
													}
										}; 'PersonalResultSection'; 'TeamResultSection'; 'DetailedReportSection'; 'EconomicsSection'"/>
			</block>
			<block>
				<bind name="style" value="'bottom'; 10 + (stageHeight - 720) * 0.15"/>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<align value="center"/>
				</style>
				<block>
					<bind name="appear" value="'startShow'; 0.15; 0.7; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
					<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_BATTLE_STATS_CLOSE',
													_width: '164px',
													_name: 'btn_cancel',
													_enabled: true, 
													_focusIndex: 1,
													_defaultFocused: true}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="UnavailableExtendedSystemLogWindow">
		<styleClass value="$Fullsize"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0xFF001438"/>
					<alpha value="0.45"/>
				</style>
			</block>
		</block>
		<bind name="stageSize"/>
		<block>
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<style>
				<position value="absolute"/>
				<top value="720:20,1080:50ah"/>
				<right value="1280:20,1920:46aw"/>
			</style>
			<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1280:1077,1920:1420aw"/>
				<height value="100%"/>
			</style>
			<block>
				<bind name="appear" value="'startShow'; 0.3; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<styleClass value="$MiddleVHAbsolutely"/>
				<block type="text">
					<styleClass value="$TextHeaderBold"/>
					<style>
						<textAlign value="center"/>
						<maxWidth value="350"/>
						<leading value="6"/>
					</style>
					<bind name="class" value="'$FontColorOrange'"/>
					<bind name="text" value="toUpperCase(tr('IDS_WARNING_BATTLESTATS_AVAILABILITY'))"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<align value="center"/>
				</style>
				<bind name="style" value="'bottom'; 10 + (stageHeight - 720) * 0.15"/>
				<block>
					<bind name="appear" value="'startShow'; 0.15; 0.3; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.07; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
					<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_BATTLE_STATS_BACK_TO_DOCK',
													_width: '164px',
													_name: 'btn_cancel',
													_enabled: true, 
													_focusIndex: 1,
													_defaultFocused: true}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ExtendedSystemLogWindowBG">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundSize value="cover"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:' + battleResults.game_data.map_path"/>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.3; 0.15; {alpha: 0}; {alpha: 0.3}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 0.3}; {alpha: 0}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? { _map: 'blurmap_low'} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="contrast_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="visible" value="((contrast) &amp;&amp; (PBSScreenActiveTabIndex != SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT))"/>
				</block>
				<block className="modal_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<alpha value="1.6"/>
					</style>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_exterior_buy -->
	<block className="ModalWindowBuyCamouflage">
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; $root.exteriorId"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="instance" value="'SmallModalWindow';	{	_headerText:	exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE	? 'IDS_MODAL_WINDOW_TITLE_CAMOUFLAGE_PURCHASE' :
															exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.MSKIN			? 'IDS_MODAL_WINDOW_TITLE_PERMOFLAGE_LINK'
																															: 'IDS_MODAL_WINDOW_TITLE_PERMOFLAGE_PURCHASE',
											_headerWidth: '400px',
											_hideDivider: true,
											_contentElement: 'ModalWindowBuyCamouflageContent' }"/>
	</block>
	<block className="ModalWindowBuyCamouflageContent">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watch" value="'exteriorPriceName'; exteriorConfig.type != SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE 	? $root.exteriorId
																								: 'CAMOUFLAGE_GROUP_' + exteriorEntity.ownCamouflage.camoGroup"/>
		<bind name="primaryEntityDH" value="'exteriorPriceEntity'; CC.priceComponent; exteriorPriceName + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'exteriorPrice'; ['exteriorPriceEntity.priceComponent.evChanged']; exteriorPriceEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountResource'; ['resourceEntity.accountResource.evChangedGold','resourceEntity.accountResource.evChangedCredit']; resourceEntity.accountResource"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; playerShipId"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'permoflageFirstBuyGoldDiscount';	['shipEntity.ownShip.evPermoflageFirstBuyGoldDiscountChanged'];	shipEntity.ownShip.permoflageFirstBuyGoldDiscount"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; $root.exteriorId"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watch" value="'exteriorConfigNameUpper'; toUpperCase(exteriorConfig.name)"/>
		<bind name="watch" value="'isFirstBuyDiscount'; exteriorConfig.type != SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE &amp;&amp; permoflageFirstBuyGoldDiscount"/>
		<bind name="watch" value="'finalCamouflagePriceInfo'; isFirstBuyDiscount	? {	currency: SC.Common.CURRENCIES.GOLD,
																	finalPrice: (exteriorPrice.basePrice - permoflageFirstBuyGoldDiscount),
																	basePrice: exteriorPrice.basePrice,
																	type: 3}
																: exteriorPrice"/>
		<bind name="watch" value="'priceDeficit'; finalCamouflagePriceInfo.finalPrice - accountResource[finalCamouflagePriceInfo.currency]"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'filtersByLevel'; 'byFilterType.' + 'level'"/>
		<bind name="collectionDesign" value="'DES_filtersByLevel'; 'levelfilters'; {'filter':isIn($entity.id, exteriorEntity.shipListRestrictions.selectedFilters)}; []"/>
		<bind name="collectionFields" value="'levelfilters'; ['shipFilterItem.field']"/>
		<bind name="watch" value="'hasLevelRestrictions'; levelfilters.length &gt; 0"/>
		<bind name="watchDH" value="'hasColorSchemeConfig';		['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.hasColorSchemeConfig"/>
		<bind name="watchDH" value="'camoColorSchemes'; 			['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.camoColorSchemes"/>
		<bind name="watchDH" value="'previewCamoColorScheme';	['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.previewCamoColorScheme"/>
		<bind name="entityDH" value="'previewColorSchemeEntity'; previewCamoColorScheme"/>
		<bind name="watch" value="'previewColorSchemeIndex'; previewColorSchemeEntity.colorScheme.index"/>
		<bind name="watch" value="'isMSkin'; exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.MSKIN"/>
		<bind name="watch" value="'headerIconPath';	exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE 	? ('url:../exteriors/camouflages/' + exteriorConfig.name + '.png') :
									exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.PERMOFLAGE	? ('url:../exteriors/permoflages/' + exteriorConfig.name + '.png')
																									: ('url:../exteriors/skins/' + exteriorConfig.name + '.png')"/>
		<bind name="watch" value="'unifiedStatus'; SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'headerText';		exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.PERMOFLAGE	? subst('IDS_EXTERIOR_NAME_WITH_SHIP',  [], { exteriorName: tr('IDS_' + exteriorConfigNameUpper), shipName: toUpperCase(tr(shipInfo.nameIDS)) }) :
									hasLevelRestrictions											? subst('IDS_EXTERIOR_NAME_WITH_LEVEL', [], { exteriorName: tr('IDS_' + exteriorConfigNameUpper), levelRange: toRomanShipLevels(levelfilters_shipFilterItem_field) })
																									: tr('IDS_' + exteriorConfigNameUpper)"/>
		<bind name="watch" value="'subheaderText'; 'IDS_EXTERIOR_TYPE_' + SC.Exteriors.EXTERIOR_TYPE.VALUE_TO_NAME[exteriorConfig.type]"/>
		<bind name="watch" value="'headerIconType'; camoColorSchemes.length &gt; 0	? 1
																: 0"/>
		<bind name="watch" value="'isBuyAvailable'; priceDeficit &lt;= 0 &amp;&amp; !isMSkin"/>
		<bind name="watch" value="'urrenciesPanelPrices'; [{currency: finalCamouflagePriceInfo.currency, finalPrice: -finalCamouflagePriceInfo.finalPrice}]"/>
		<style>
			<align value="center"/>
			<width value="400px"/>
		</style>
		<block>
			<bind name="visible" value="!isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: urrenciesPanelPrices, _width: 400 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="sharedTooltip" value="'CamouflageTooltip'; { _id: Number($root.exteriorId), _noMouseInstructions: true }"/>
			<bind name="instance" value="'ModalWindowSystemExpendableIconWithHeaderAndSubheader';	{	_headerIconType: headerIconType,
																						_imageUrl: headerIconPath,
																						_unifiedStatus: unifiedStatus,
																						_headerText: headerText,
																						_subheaderText: subheaderText,
																						_maxWidth: 300,
																						_data:	{	shipId: shipId,
																									exteriorType: exteriorConfig.type,
																									camouflageId: $root.exteriorId} }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBuyAvailable"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; isBuyAvailable	?	{	_questionText: 'IDS_QUESTION_PURCHASE_AND_INSTALL_FOR',
																						_priceInfo: finalCamouflagePriceInfo }
																				:	null"/>
		</block>
		<block>
			<bind name="visible" value="priceDeficit &gt; 0 || isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefault26NM"/>
				<bind name="style" value="'textColor';	priceDeficit &gt; 0	? SC.Ui_styles.SERVICE_COLORS.ORANGE
															: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
				<bind name="style" value="'alpha';		priceDeficit &gt; 0	? 1 : 0.9"/>
				<bind name="text" value="priceDeficit &gt; 0	? 'IDS_NOT_ENOUGH_FUNDS'
											: 'IDS_QUESTION_MSKIN_LINK'"/>
			</block>
			<block>
				<bind name="visible" value="isMSkin"/>
				<style>
					<marginLeft value="16px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: playerShipId, _withFlag: false, _fontClass: '$TextDefaultBold26NM' }"/>
			</block>
			<block>
				<bind name="visible" value="isMSkin"/>
				<block type="text">
					<styleClass value="$TextDefault26NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_QUESTION"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="priceDeficit &gt; 0 &amp;&amp; !isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'PriceDeficit'; priceDeficit &gt; 0 &amp;&amp; !isMSkin ? { _large: true, priceInfo: finalCamouflagePriceInfo, _deficit: priceDeficit } : null"/>
		</block>
		<block>
			<bind name="visible" value="isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="380"/>
					<textAlign value="center"/>
					<textColor value="0xFFFF9933"/>
				</style>
				<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; '[icon] ' + tr('IDS_WARNING_MSKIN_BEFORE_LINK')"/>
			</block>
		</block>
		<block>
			<styleClass value="$InfoLineBoundaries"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<bind name="watch" value="'btnOkEnabled'; priceDeficit &lt;= 0 || isMSkin"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<bind name="fade" value="btnOkEnabled; 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 129}; {alpha: 0, width: 0}"/>
					<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
					<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
					<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
					<bind name="watch" value="'previewExteriorId'; userPrefs.previewExteriorId"/>
					<bind name="action" value="'buyButtonClicked';	previewExteriorId	? 'setCompareInfo'
																		: null;
													{clear: true}"/>
					<bind name="action" value="'buyButtonClicked';	previewExteriorId	? 'setUserPref'
																		: null;
													{value: 0, name: 'previewExteriorId'}"/>
					<style>
						<width value="129px"/>
						<marginRight value="24px"/>
					</style>
					<bind name="instance" value="'DefaultButton';	{	_width: '129px',
														_name: 'btn_ok',
														_enabled: btnOkEnabled,
														_isTransactionBtn: true,
														_request: isMSkin	? 'installCamouflage'
																			: 'buyAndInstallCamouflage',
														_requestParams:	{	exteriorId: $root.exteriorId,
																			colorsSchemeIndex: hasColorSchemeConfig ? previewColorSchemeIndex
																													: null},
														_dispatch: 'buyButtonClicked',
														_label: 'IDS_YES',
														_focusIndex: 1,
														_defaultFocused: true }"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_label: btnOkEnabled ? 'IDS_NO' : 'IDS_CLOSE_UPPER_CASE',
												_width: '129px',
												_name: 'btn_cancel',
												_enabled: true, 
												_focusIndex: 2,
												_defaultFocused: false}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_feature_splash -->
	<block className="ModalWindowFeatureSplash">
		<params>
			<param name="name" value="window_ModalWindowFeatureSplash"/>
		</params>
		<bind name="watch" value="'activeOperationId'; $root.operationId"/>
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; activeOperationId"/>
		<bind name="primaryEntityDH" value="'battleTypeEntity'; CC.battleType; str(SC.Common.BATTLE_TYPES.PVE_BATTLE) + '_' + str(activeOperationId)"/>
		<bind name="var" value="{ windowApperaLag: 0.3 }"/>
		<styleClass value="$Fullsize"/>
		<bind name="dispatch" value="'battleTypeChose'; 'hideBattleTypesOnBattleTypeChose'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; 0.05"/>
		<bind name="dispatch" value="'battleTypeChose'; 'delayedCloseChooserModalWindow'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.25"/>
		<bind name="request" value="'delayedCloseChooserModalWindow'; 'closeModalSelectBattleType'; {}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.15; 0.3; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.25; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'BlurMap'; isBlurEnabled ? { _map: 'blurmap_low' } : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="contrast_panel" type="native">
					<bind name="visible" value="contrast"/>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block className="modal_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<alpha value="0.7"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<paddingRight value="1280:20,1920:46aw"/>
				<paddingLeft value="1280:20,1920:46aw"/>
				<paddingBottom value="1280:20,1920:46aw"/>
				<paddingTop value="1280:20,1920:46aw"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<style>
						<position value="absolute"/>
						<top value="1px"/>
					</style>
					<bind name="instance" value="'BackButton'; {_text: 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON'}"/>
					<bind name="name" value="'btn_cancel'"/>
					<bind name="input"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<right value="4px"/>
						<top value="9px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="toUpperCase(tr('IDS_NEW_OPERATION_AVAILABLE'))"/>
						<params>
							<param name="name" value="featureSplashHeader"/>
						</params>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginTop value="720:2,1080:4ah"/>
						</style>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<top value="18sh"/>
					<position value="absolute"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<block className="ModalBattleTypeRenderer" type="ublock">
						<bind name="build!" value="{_battleTypeEntityId: battleTypeEntity ? battleTypeEntity.id : null,
									_forceVisible: true,
									_dontShowSmokeAnimation: true,
									_showBattleSubheader: false}"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="700px"/>
						<marginTop value="16px"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="800px"/>
						<marginLeft value="-8px"/>
						<marginRight value="-8px"/>
						<marginTop value="1px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
							<height value="100%"/>
							<position value="absolute"/>
						</style>
						<block className="gradient_half_sphere" type="native">
							<style>
								<width value="100%"/>
								<height value="130%"/>
								<alpha value="0.6"/>
							</style>
						</block>
					</block>
					<block>
						<styleClass value="$MiddleAligned"/>
						<block type="text">
							<style>
								<width value="600px"/>
								<alpha value="0.75"/>
								<marginTop value="16px"/>
								<textAlign value="center"/>
							</style>
							<styleClass value="$TextDefault20NM"/>
							<bind name="text" value="tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_DESCRIPTION')"/>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_master_changer -->
	<block className="ModalMasterChanger">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<bind name="blurLayer"/>
				<style>
					<position value="absolute"/>
				</style>
				<block>
					<style>
						<backgroundColor value="0x000000FF"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? {} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundColor value="0xFF001438"/>
						<alpha value="0.45"/>
					</style>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ModalMasterChangerContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="ModalMasterChangerContent">
		<bind name="firstEntityDH" value="'masterChangedEntity'; CC.masterChanger"/>
		<bind name="watchDH" value="'countBattles'; ['masterChangedEntity.masterChanger.evCountBattlesChanged']; masterChangedEntity.masterChanger.countBattles"/>
		<bind name="watchDH" value="'lastBattleTimestamp'; ['masterChangedEntity.masterChanger.evLastBattleTimestampChanged']; masterChangedEntity.masterChanger.lastBattleTimestamp"/>
		<bind name="var" value="{windowAppearLag: 0.1}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="540px"/>
				<top value="40%"/>
				<marginTop value="-50%"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'ModalWindowHeader'; { _header: toUpperCase(tr('IDS_SERVER_SWITCH')), _headerWidth: '540px', _showInnerCloseButton:true }"/>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
					<width value="100%"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<style>
							<maxWidth value="526"/>
							<textAlign value="center"/>
							<marginBottom value="12px"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="class" value="'$FontColorBlueish'"/>
						<default_text value="IDS_INSTRUCTION_SERVER_SWITCH"/>
					</block>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<height value="150px"/>
					</style>
					<block>
						<bind name="fade" value="countBattles &gt; 0; 0.07; {alpha: 0}; {alpha: 1}"/>
						<style>
							<width value="100%"/>
						</style>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<styleClass value="$MiddleAligned"/>
							<style>
								<marginBottom value="6px"/>
								<marginTop value="12px"/>
							</style>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_SERVER_SWITCH_TIMER'}"/>
							<bind name="countdown" value="lastBattleTimestamp; 'countdownText'; 'mm:ss'"/>
							<block type="text">
								<style>
									<width value="138px"/>
								</style>
								<styleClass value="$TextDefaultBold"/>
								<bind name="class" value="'$FontAccentSize1'"/>
								<bind name="text" value="countdownText"/>
								<bind name="name" value="'waiting_time'"/>
							</block>
						</block>
						<block>
							<style>
								<width value="100%"/>
							</style>
							<block>
								<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
								<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_SERVER_SWITCH_BATTLES'}"/>
								<styleClass value="$MiddleAligned"/>
								<style>
									<marginBottom value="18px"/>
								</style>
								<block type="text">
									<styleClass value="$TextAccent"/>
									<bind name="class" value="'$FontColorWhite'"/>
									<default_text value="IDS_UNFINISHED_BATTLES_COLON"/>
								</block>
								<block type="text">
									<styleClass value="$TextAccentBold"/>
									<bind name="class" value="'$FontColorWhite'"/>
									<bind name="name" value="'battles_to_end'"/>
									<bind name="text" value="countBattles"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
						</block>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<styleClass value="$Fullsize"/>
						<bind name="fade" value="countBattles == 0; 0.3; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}; 3; 0.15"/>
						<block type="text">
							<styleClass value="$MiddleAligned"/>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$TextAccent"/>
							<bind name="class" value="'$FontColorWhite'"/>
							<default_text value="IDS_TRANSFER_IN_PROGRESS"/>
						</block>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<width value="100%"/>
							<bottom value="0"/>
						</style>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_ship_research -->
	<block className="ModalWindowResearchShip">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_RESEARCH_SHIP_HEADER',
										_contentElement: 'ModalWindowResearchShipContent',
										_hideDivider: true}"/>
	</block>
	<block className="ModalWindowResearchShipContent">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; $root.data.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; $root.data.shipId"/>
		<bind name="firstEntityDH" value="'shipCrossResearchInfoEntity'; CC.shipCrossResearchInfo"/>
		<bind name="watchDH" value="'crewId';	['ownShipEntity.ownShip.evCrewChanged'];	ownShipEntity.ownShip.crewId"/>
		<bind name="watchDH" value="'dependenciesResearchPriceInfo'; 	['shipCrossResearchInfoEntity.shipCrossResearchInfo.evChanged']; shipCrossResearchInfoEntity.shipCrossResearchInfo.dependenciesResearchPriceInfo"/>
		<bind name="watchDH" value="'dependenciesResearchPriceVisible'; 	['shipCrossResearchInfoEntity.shipCrossResearchInfo.evChanged']; shipCrossResearchInfoEntity.shipCrossResearchInfo.dependenciesResearchPriceVisible"/>
		<bind name="watchDH" value="'researchPriceShipExp'; 				['shipCrossResearchInfoEntity.shipCrossResearchInfo.evChanged']; shipCrossResearchInfoEntity.shipCrossResearchInfo.researchPriceShipExp"/>
		<bind name="watchDH" value="'researchPriceFreeExp';				['shipCrossResearchInfoEntity.shipCrossResearchInfo.evChanged']; shipCrossResearchInfoEntity.shipCrossResearchInfo.researchPriceFreeExp"/>
		<bind name="watchDH" value="'researchPriceInfo'; 				['shipCrossResearchInfoEntity.shipCrossResearchInfo.evChanged']; shipCrossResearchInfoEntity.shipCrossResearchInfo.researchPriceInfo"/>
		<bind name="watchDH" value="'prevShipResearchedExp';				['shipCrossResearchInfoEntity.shipCrossResearchInfo.evChanged']; shipCrossResearchInfoEntity.shipCrossResearchInfo.prevShipResearchedExp"/>
		<bind name="watchDH" value="'isPrevShipResearched';				['shipCrossResearchInfoEntity.shipCrossResearchInfo.evChanged']; shipCrossResearchInfoEntity.shipCrossResearchInfo.isPrevShipResearched"/>
		<bind name="watch" value="'dependenciesResearchTitle'; isPrevShipResearched ? 'IDS_PREV_SHIP_MODULES_WILL_BE_ALSO_RESEARCHED' : 'IDS_PREV_SHIPS_WILL_BE_ALSO_RESEARCHED'"/>
		<bind name="watch" value="'questionText'; researchPriceShipExp || researchPriceFreeExp 	? 'IDS_QUESTION_RESEARCH_SHIP_FOR'
																				: 'IDS_QUESTION_RESEARCH_SHIP_FOR_FREE'"/>
		<bind name="watch" value="'priceInfo'; researchPriceShipExp			?	{	finalPrice: researchPriceShipExp,
																	currency: SC.Common.CURRENCIES.XP }
															: null"/>
		<bind name="watch" value="'optionalPriceInfo'; researchPriceFreeExp	?	{	finalPrice: researchPriceFreeExp,
																	currency: SC.Common.CURRENCIES.FREE_XP }
															: null"/>
		<bind name="watch" value="'isUsedFreeXP'; optionalPriceInfo.finalPrice != null &amp;&amp; optionalPriceInfo.finalPrice != 0"/>
		<bind name="watch" value="'currenciesPanelPrices'; isUsedFreeXP  ? [	{currency: SC.Common.CURRENCIES.XP, finalPrice: priceInfo ? -priceInfo.finalPrice : 0, expPreviousShip: prevShipResearchedExp ? prevShipResearchedExp : 0},
															{currency: SC.Common.CURRENCIES.FREE_XP, finalPrice: optionalPriceInfo ? -optionalPriceInfo.finalPrice : 0}]
														: [ {currency: SC.Common.CURRENCIES.XP, finalPrice: priceInfo ? -priceInfo.finalPrice : 0, expPreviousShip: prevShipResearchedExp ? prevShipResearchedExp : 0}]"/>
		<style>
			<align value="center"/>
			<width value="412px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 412 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="ModalWindowShipPreview" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{ _shipId: Number($root.data.shipId) }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<style>
				<width value="100%"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<paddingTop value="12px"/>
				<paddingBottom value="12px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault18NM"/>
				<style>
					<width value="100%"/>
					<alpha value="0.75"/>
				</style>
				<default_text value="IDS_RESEARCH_COST"/>
			</block>
			<block>
				<style>
					<marginTop value="-6px"/>
					<marginBottom value="-4px"/>
				</style>
				<bind name="instance" value="'PriceTag'; dependenciesResearchPriceVisible ? { priceInfo: researchPriceInfo, _showDiscountTag: true} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<paddingTop value="12px"/>
				<paddingBottom value="12px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault18NM"/>
				<style>
					<width value="100%"/>
					<marginRight value="8px"/>
					<leading value="-3"/>
					<alpha value="0.75"/>
				</style>
				<bind name="text" value="dependenciesResearchTitle"/>
			</block>
			<block>
				<style>
					<marginTop value="-6px"/>
					<marginBottom value="-4px"/>
				</style>
				<bind name="instance" value="'PriceTag'; dependenciesResearchPriceVisible ? { priceInfo: dependenciesResearchPriceInfo, _showDiscountTag: true} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; {	_questionText: questionText, 
																_priceInfo: priceInfo,
																_optionalPriceInfo: optionalPriceInfo }"/>
		</block>
		<block>
			<bind name="instance" value="'ModalWindowOkCancel'; {	_appearOrder: 4,
													_focusBtn: 1,
													_request: 'doResearchShip',
													_requestParams: { shipId: $root.data.shipId }}"/>
		</block>
	</block>

	<!-- modal_window_battle_replay_finished -->
	<block className="ReplayIconButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="action" value="'click'; _action; {}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _enabled	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
															_text: _tooltip } : null"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; !_enabled	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
															_text: _tooltip + '_DISABLED' } : null"/>
		<block>
			<bind name="transition" value="!_enabled; 0.07; {alpha: 0.85}; {alpha: 0.5}"/>
			<bind name="transition" value="_enabled &amp;&amp; rollOver &amp;&amp; !(mouseDown); 0.07; {alpha: 0.85}; {alpha: 1.0}"/>
			<bind name="transition" value="_enabled &amp;&amp; mouseDown; 0.07; {alpha: 0.85}; {alpha: 0.7}"/>
			<style>
				<width value="128px"/>
				<height value="128px"/>
				<margin value="8px"/>
				<backgroundColor value="0x00FFFFFF"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="60px"/>
					<height value="60px"/>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/player_controls/button_' + _icon + '_big.png'"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowBattleReplayFinished">
		<bind name="firstEntityDH" value="'replayPlaybackDataEntity'; CC.replayPlaybackData"/>
		<bind name="watchDH" value="'hasNextReplay'; ['replayPlaybackDataEntity.replayPlaybackData.evUpdateReplayList']; replayPlaybackDataEntity.replayPlaybackData.hasNextReplay"/>
		<bind name="watchDH" value="'hasPrevReplay'; ['replayPlaybackDataEntity.replayPlaybackData.evUpdateReplayList']; replayPlaybackDataEntity.replayPlaybackData.hasPrevReplay"/>
		<styleClass value="$Fullsize"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0xFF001438"/>
					<alpha value="0.45"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$EyeLevelVAligned"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="450px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'ReplayIconButton'; (hasNextReplay || hasPrevReplay) ? 
												{ _icon: 'jump_previous',
												  _tooltip: 'IDS_REPLAYS_PLAYBACK_PREV_REPLAY_DESC',
												  _action: 'replayPrev',
												  _enabled: hasPrevReplay} : null"/>
				<bind name="instance" value="'ReplayIconButton'; { _icon: 'replay',
												  _tooltip: 'IDS_REPLAYS_PLAYBACK_RESTART_DESC',
												  _action: 'replayRewind',
												  _enabled: true}"/>
				<bind name="instance" value="'ReplayIconButton'; (hasNextReplay || hasPrevReplay) ? 
												{ _icon: 'jump_next',
												  _tooltip: 'IDS_REPLAYS_PLAYBACK_NEXT_REPLAY_DESC',
												  _action: 'replayNext',
												  _enabled: hasNextReplay} : null"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_window_battle_replay_tutorial -->
	<block className="TutorialHintDivider">
		<style>
			<width value="100%"/>
			<paddingTop value="8px"/>
			<paddingBottom value="8px"/>
			<paddingLeft value="-48px"/>
			<paddingRight value="-48px"/>
		</style>
		<bind name="instance" value="'HorizontalDivider'; {}"/>
	</block>
	<block className="ModalWindowBattleReplayTutorial">
		<bind name="name" value="'ModalWindowBattleReplayTutorial'"/>
		<styleClass value="$Fullsize"/>
		<bind name="var" value="{ windowAppearLag: 0.2 }"/>
		<bind name="appear" value="'startShow'; 0.15; 0.2;	{alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.15; 0.3;	{alpha: 1}; {alpha: 0}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$BattleModalTint"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="680px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<styleClass value="$BattleModalWindowBG"/>
				</block>
				<block className="contrast_panel" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="16px"/>
					<marginLeft value="16px"/>
					<marginRight value="16px"/>
				</style>
				<bind name="appear" value="'startShow'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_REPLAYS_PLAYBACK_TUTORIAL_HEADER', _headerWidth: '100%', _innerCloseButton: true, _hideDivider: true}"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-1px"/>
				</style>
				<bind name="instance" value="'HorizontalDivider'; {}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="12px"/>
					<paddingLeft value="48px"/>
					<paddingRight value="48px"/>
				</style>
				<block>
					<styleClass value="$TutorialHintBlock"/>
					<block className="TutorialHintHeader">
						<style>
							<width value="180px"/>
							<paddingTop value="10px"/>
							<paddingRight value="16px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold18NM"/>
							<alpha value="0.75"/>
							<style>
								<width value="100%"/>
								<leading value="-3"/>
							</style>
							<default_text value="IDS_REPLAYS_PLAYBACK_UI"/>
						</block>
					</block>
					<block className="HotkeysTutorialUI" type="ublock">
						<bind name="build!" value="{}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block className="TutorialHintDivider">
					<style>
						<width value="100%"/>
						<paddingTop value="8px"/>
						<paddingBottom value="8px"/>
						<paddingLeft value="-48px"/>
						<paddingRight value="-48px"/>
					</style>
					<bind name="instance" value="'HorizontalDivider'; {}"/>
				</block>
				<block>
					<styleClass value="$TutorialHintBlock"/>
					<block className="TutorialHintHeader">
						<style>
							<width value="180px"/>
							<paddingTop value="10px"/>
							<paddingRight value="16px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold18NM"/>
							<alpha value="0.75"/>
							<style>
								<width value="100%"/>
								<leading value="-3"/>
							</style>
							<default_text value="IDS_REPLAYS_PLAYBACK_PLAYER"/>
						</block>
					</block>
					<block className="HotkeysTutorialPlayback" type="ublock">
						<bind name="build!" value="{}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block className="TutorialHintDivider">
					<style>
						<width value="100%"/>
						<paddingTop value="8px"/>
						<paddingBottom value="8px"/>
						<paddingLeft value="-48px"/>
						<paddingRight value="-48px"/>
					</style>
					<bind name="instance" value="'HorizontalDivider'; {}"/>
				</block>
				<block>
					<styleClass value="$TutorialHintBlock"/>
					<block className="TutorialHintHeader">
						<style>
							<width value="180px"/>
							<paddingTop value="10px"/>
							<paddingRight value="16px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold18NM"/>
							<alpha value="0.75"/>
							<style>
								<width value="100%"/>
								<leading value="-3"/>
							</style>
							<default_text value="IDS_REPLAYS_PLAYBACK_CAMERA"/>
						</block>
					</block>
					<block className="HotkeysTutorialCamera" type="ublock">
						<bind name="build!" value="{}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="8px"/>
				</style>
				<bind name="instance" value="'HorizontalDivider'; {}"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<paddingTop value="12px"/>
				</style>
				<block className="DefaultButtonModal">
					<style>
						<marginBottom value="6px"/>
						<marginTop value="6px"/>
					</style>
					<bind name="name" value="'Modal_window_action_Button' + 'IDS_GO_TO_PLAYBACK_UPPERCASE'"/>
					<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_GO_TO_PLAYBACK_UPPERCASE',
													_name: 'btn_cancel',
													_focusIndex: 0,
													_defaultFocused: true}"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
				<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
				<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
				<bind name="appear" value="'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<style>
					<marginTop value="4px"/>
					<marginBottom value="20px"/>
				</style>
				<bind name="watch" value="'hidePlaybackTutorial'; (userPrefs.hidePlaybackTutorial == null) ? false : userPrefs.hidePlaybackTutorial"/>
				<bind name="instance" value="'CheckBox'; {	_isChecked: hidePlaybackTutorial,
											_label: 'IDS_REPLAYS_PLAYBACK_TUTORIAL_HIDE',
											_action: 'setUserPref',
											_actionParams: {value: !hidePlaybackTutorial,
															name: 'hidePlaybackTutorial'}}"/>
			</block>
		</block>
	</block>

	<!-- modal_window_elements -->
	<block className="ModalWindowAnimatedBackground">
		<styleClass value="$Fullsize"/>
		<block className="ModalWindowAnimatedBackground" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="eventToUB2" value="'startShow'"/>
			<bind name="eventToUB2" value="'startHide'"/>
			<bind name="build!" value="{ _selectedCategory: _selectedCategory,
						_type: _type,
						_hideTime: _hideTime ? _hideTime : 0.3,
						_hideDelay: _hideDelay ? _hideDelay : 0 }"/>
		</block>
	</block>
	<block className="SmallModalWindow">
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0xFF001438"/>
					<alpha value="0.45"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$EyeLevelVAligned"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginBottom'; _hideDivider ? '16px' : 0"/>
				<bind name="instance" value="'ModalWindowShortHeader'; { _header: _headerText,
														_unifiedStatus: _unifiedStatus,
														_hideDivider: _hideDivider}"/>
			</block>
			<block>
				<bind name="instance" value="_contentElement; {_subtitle: _subtitle, _btnTitle: _btnTitle, _instruction: _instruction}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowOkCancel">
		<style>
			<flow value="horizontal"/>
			<marginTop value="24px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; (_appearOrder + 1)*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; (_appearOrder + 1) * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginRight value="24px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_name: 'btn_ok',
											_enabled: true,
											_isTransactionBtn: true,
											_containerName: 'Modal_window_action_ButtonIDS_YES',
											_label: 'IDS_YES',
											_focusIndex: 1,
											_request: _request,
											_defaultFocused: _focusBtn == 1,
											_requestParams: _requestParams,
											_clickInterval: 2000}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; _appearOrder*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; _appearOrder * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_enabled: true,
											_isTransactionBtn: true,
											_label: 'IDS_NO',
											_name: 'btn_cancel',
											_defaultFocused: _focusBtn == 2,
											_focusIndex: 2}"/>
		</block>
	</block>
	<block className="ModalWindowCloseIcon">
		<bind name="name" value="'btn_cancel'"/>
		<bind name="input"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: _tooltipText ? _tooltipText : 'IDS_CLOSE' }; TooltipBehaviour.simple"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<styleClass value="$MiddleVAligned"/>
		<style>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<alpha value="0.8"/>
			</style>
			<bind name="instance" value="'HotkeyWithText'; { _text: 'ESC', _isDisabled: true }"/>
		</block>
		<block>
			<style>
				<marginLeft value="2px"/>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'CloseButton'; { _isDisabled: true }"/>
		</block>
	</block>
	<block className="ModalWindowShortHeader">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION					?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION		?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_OFF			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_MUTED			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_MASTERY_TRIAL		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPGRADE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY					?		SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED			?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT				?		SC.Ui_styles.SERVICE_COLORS.PINK :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_ON				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFAULT					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LOCK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_DOUBLE_LEFT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_SCROLL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HIDDEN					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_NOT_DETECTED			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_DEFAULT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFO						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LINKED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPAINTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPDATE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EPIC_SKILL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ADVANCED_CREW				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.IN_BATTLE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.TO_ARMORY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFINITE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PERMOBOOST_ACTIVE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_NORMAL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.KEY_TARGET				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BURST_FIRE				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NO_ICON					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NOTIFICATION				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HAS_BATTLE_MODIFIERS		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPLACED_CONSUMABLES		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_READY			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_NOT_READY		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL_VETERAN			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OFFLINE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_ON		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_OFF		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DIVISION_INVITE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PRIMARY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OBSERVER					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SELECTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_INFO_HIDDEN			?		SC.Ui_styles.SERVICE_COLORS.WHITE
																											:		SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '100%'"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
			</style>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<styleClass value="$TextDefaultBold22NM"/>
			<bind name="text" value="toUpperCase(tr(_header))"/>
		</block>
		<block>
			<bind name="visible" value="!_hideDivider"/>
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeader">
		<style>
			<marginBottom value="3px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '450px'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextLargeHeaderBold"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="text" value="toUpperCase(tr(_header))"/>
			</block>
			<block>
				<bind name="visible" value="!_hideCloseButton"/>
				<style>
					<position value="absolute"/>
					<top value="11px"/>
				</style>
				<bind name="style" value="'right'; _innerCloseButton ? '10px' : '-50px'"/>
				<bind name="instance" value="'ModalWindowCloseIcon'; _hideCloseButton ? null : {}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_hideDivider"/>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="-3"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderWithIcon">
		<style>
			<marginBottom value="3px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '450px'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<block className="icons_modal_window_heading" type="native">
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginRight value="3px"/>
					</style>
					<bind name="gotoAndStop!" value="_type"/>
				</block>
				<block type="text">
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="toUpperCase(tr(_header))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<top value="9px"/>
					<right value="-50px"/>
				</style>
				<bind name="instance" value="'ModalWindowCloseIcon'; _showInnerCloseButton ? {} : null"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderFullSize">
		<bind name="style" value="'paddingTop';		_paddingTop		? _paddingTop	:	'720:20,1080:50ah'"/>
		<bind name="style" value="'paddingRight';	_paddingRight	? _paddingRight	:	'1280:20,1920:46aw'"/>
		<bind name="style" value="'paddingLeft'; 	_paddingLeft	? _paddingLeft	:	'1280:20,1920:46aw'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="!_hideBackButton"/>
			<style>
				<position value="absolute"/>
				<top value="-5px"/>
			</style>
			<bind name="instance" value="'BackButton'; !_hideBackButton	?	{	_text: _backButtonText,
																_event: _event, _eventData: _eventData,
																_action: _action, _actionParams: _actionParams,
																_request: _request, _requestParams: _requestParams }
														:	null"/>
		</block>
		<block>
			<bind name="visible" value="_windowName"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<params>
					<param name="name" value="ModalWindowHeaderName"/>
				</params>
				<styleClass value="$TextDefaultBold22NM"/>
				<bind name="text" value="toUpperCase(tr(_windowName))"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_hideCloseButton"/>
			<style>
				<position value="absolute"/>
				<right value="4px"/>
				<top value="3px"/>
			</style>
			<bind name="instance" value="'ModalWindowCloseIcon'; !_hideCloseButton ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="!_hideDivider"/>
			<style>
				<width value="100%"/>
				<marginTop value="720:12,1080:16ah"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_window_event_battle_details -->
	<block className="ModalWindowEventBattleDetails">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="entityDH" value="'eventBattleStateEntity'; $root.eventStateEntityId"/>
		<bind name="watchDH" value="'eventBattleName'; ['eventBattleStateEntity.eventBattleState.evChanged']; eventBattleStateEntity.eventBattleState.name"/>
		<bind name="watchDH" value="'eventId'; []; eventBattleStateEntity.eventBattleState.eventId"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'BackgroundAnimatedSwitcher'; { _bgSymbol: 'url:../events/legendary_battle/bg/event_details.jpg' }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; {	_paddingRight: '32px',
														_paddingLeft: '32px',
														_windowName: 'IDS_' + toUpperCase(eventBattleName),
														_backButtonText: 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON',
														_action: 'closeEventBattleDetails'	}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$Fullsize"/>
			<style>
				<marginTop value="720:16,1080:32ah"/>
				<marginBottom value="720:32,1080:64ah"/>
			</style>
			<bind name="instance" value="'ModalWindowEventBattleDetailsContent'; {_eventBattleName : eventBattleName}"/>
		</block>
	</block>
	<block className="ModalWindowEventBattleDetailsContent">
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<style>
				<marginTop value="16px"/>
				<height value="100%"/>
			</style>
			<bind name="repeat" value="$root.shipToIntroduceIds; 'NationalProgramShipWithDescription';{	_shipId: $value,
																						_lastIndex: $root.shipToIntroduceIds.length - 1,
																						_eventBattleName: _eventBattleName,
																						_eventId: eventId,
																					  }"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="720:32,1080:64ah"/>
			</style>
			<bind name="instance" value="'DefaultButton';	_eventBattleName	? {	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																	_size: 2,
																	_width: '190px',
																	_label: 'IDS_VIEW_EVENT_VIDEO_BUTTON_UPPER_CASE',
																	_action: 'navigateTo',
																	_actionParams: {	route: SC.Ui_windows.ROUTE.ARMORY,
																						data: {url: ('event_video_' + _eventBattleName + '_Promo')}},
																	_enabled: true}
																: null"/>
		</block>
	</block>
	<block className="NationalProgramShipWithDescription">
		<bind name="watch" value="'shipId'; $value ? $value : _shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'isSmallResolution'; stageHeight &lt;= 900"/>
		<bind name="watch" value="'nationProgram'; tr('IDS_LEGENDARY_PROGRAM_' + toUpperCase(shipInfo.flagName))"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="watch" value="'isOwned'; !!shipOwnEntity"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watch" value="'isSwitchBattleTypeAvailable'; isOwned &amp;&amp; (isCommander || !divisionDataEntity)"/>
		<bind name="style" value="'marginRight'; _lastIndex == $index ? '0px' : '720:64,1440:96ah'"/>
		<bind name="style" value="'width'; isSmallResolution ? '432px' : '480px'"/>
		<style>
			<height value="100%"/>
		</style>
		<block>
			<style>
				<marginBottom value="1280:8,1920:16aw"/>
				<backgroundSize value="fill"/>
			</style>
			<bind name="style" value="'width'; isSmallResolution ? '320px' : '480px'"/>
			<bind name="style" value="'height'; isSmallResolution ? '186px' : '280px'"/>
			<bind name="style" value="'backgroundImage'; 'url:../events/legendary_battle/ship_previews_photo/' + shipInfo.shortName + '.png'"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="720:16,1080:32ah"/>
				<marginTop value="8px"/>
			</style>
			<block>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: shipId, _withFlag: true, _fontClass: '$TextDefaultBold22NM' }"/>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
				</style>
				<bind name="instance" value="'ShipClassLineItemNM'; {_shipId: shipId,
													_fontClass: isSmallResolution	? '$TextDefaultNM'
																					: '$TextDefault18NM'
													}"/>
			</block>
			<block>
				<style>
					<marginTop value="720:16,1080:24ah"/>
				</style>
				<bind name="action" value="'click'; isSwitchBattleTypeAvailable ? 'setBattleType'	: null;	{	battleType: SC.Common.BATTLE_TYPES.EVENT_BATTLE,
			 																					eventBattleName: _eventBattleName, battleTypeGameParamId: _eventId	}"/>
				<bind name="action" value="'click'; isSwitchBattleTypeAvailable ? 'resetAllFilters'	: null;	{ ident: 0 }"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '192px',
												_label: 'IDS_SELECT_EVENT_SHIP_BUTTON_UPPER_CASE',
												_action: 'selectShip', _actionParams: {shipId: shipId},
												_enabled: isOwned	}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="720:24,1080:40ah"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<alpha value="0.9"/>
					</style>
					<bind name="style" value="'marginRight'; isSmallResolution ? '16px' : '48px'"/>
					<bind name="class" value="isSmallResolution ? '$TextDefaultBold22NM' : '$TextDefaultBold28NM'"/>
					<bind name="text" value="subst('IDS_SUBST_LEGENDARY_PROGRAM_TITLE', [], {_nationProgram: nationProgram})"/>
				</block>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<marginTop value="720:16,1080:24ah"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<alpha value="0.75"/>
						<leading value="-1"/>
						<marginBottom value="8px"/>
					</style>
					<bind name="style" value="'marginRight'; isSmallResolution ? '16px' : '48px'"/>
					<bind name="class" value="isSmallResolution ? '$TextDefaultNM' : '$TextDefault18NM'"/>
					<bind name="text" value="tr('IDS_LEGENDARY_PROGRAM_' + toUpperCase(shipInfo.flagName) + '_DESC')"/>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_window_ingame_survey -->
	<block className="InGameSurveyWindow">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<bind name="blurLayer"/>
				<style>
					<position value="absolute"/>
				</style>
				<block>
					<style>
						<backgroundColor value="0x000000FF"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? {} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundColor value="0xFF001438"/>
						<alpha value="0.45"/>
					</style>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'InGameSurveyWindowContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="InGameSurveyWindowContent">
		<bind name="primaryEntityDH" value="'surveyEntity'; CC.surveyData; $root.surveyId"/>
		<bind name="watchDH" value="'answers'; ['surveyEntity.surveyData.evUpdate']; surveyEntity.surveyData.answers"/>
		<bind name="watchDH" value="'isAnswered'; ['surveyEntity.surveyData.evUpdate']; surveyEntity.surveyData.answered"/>
		<bind name="action" value="'closeThankYouSign'; 'exit'; {}"/>
		<bind name="var" value="{windowAppearLag: 0.3}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1100px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="var" value="{answerIsClicked : false}"/>
				<bind name="catch" value="'showThankYouSign'; {answerIsClicked: true}"/>
				<bind name="dispatch" value="'showThankYouSign'; 'closeThankYouSign'; null; false; 3"/>
				<block>
					<bind name="visible" value="answerIsClicked"/>
					<bind name="appear" value="'showThankYouSign'; 0.15; 0.5; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.11; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$MiddleAlignedAbsolutely"/>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<styleClass value="$TextAccent"/>
						<bind name="class" value="'$FontColorWhite'"/>
						<default_text value="IDS_THANKS_FOR_MAKING_PROJECT_BETTER"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<position value="absolute"/>
						<right value="-50px"/>
						<top value="14px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$MiddleAligned"/>
					<block type="text">
						<bind name="appear" value="'showThankYouSign'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
						<style>
							<maxWidth value="900"/>
							<textAlign value="center"/>
						</style>
						<styleClass value="$TextAccent"/>
						<bind name="class" value="'$FontColorWhite'"/>
						<bind name="text" value="surveyEntity.surveyData.question"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<marginTop value="24px"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'showThankYouSign'; 0.15; 0.11; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
						<block>
							<bind name="visible" value="surveyEntity.surveyData.layout == 'horizontal'"/>
							<bind name="repeat" value="answers; 'SurveyAnswerItemHorizontalLayout'; {}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="surveyEntity.surveyData.layout == 'vertical'"/>
							<bind name="repeat" value="answers; 'SurveyAnswerItemVerticalLayout'; { _type: surveyEntity.surveyData.type }"/>
						</block>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * answers.length)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<style>
							<width value="100%"/>
							<marginTop value="15px"/>
						</style>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * answers.length)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.165; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="30px"/>
					</style>
					<bind name="contains" value="answers; ($item.selected == true); 'hasSelectedItems'"/>
					<bind name="watch" value="'isSubmitBtnEnabled'; hasSelectedItems &amp;&amp; !answerIsClicked"/>
					<block>
						<style>
							<width value="129px"/>
							<marginRight value="30px"/>
						</style>
						<bind name="fade" value="!answerIsClicked; 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 129}; {alpha: 0, width: 0}"/>
						<bind name="instance" value="'DefaultButton'; {	_width: '129px',
														_enabled: isSubmitBtnEnabled,
														_action: 'inGameSurveySubmit',
														_actionParams: {surveyId: $root.surveyId},
														_dispatch: 'showThankYouSign',
														_isTransactionBtn: true,
														_label: 'IDS_SUBMIT', 
														_focusIndex: 1, 
														_defaultFocused: true }"/>
					</block>
					<block>
						<style>
							<width value="129px"/>
						</style>
						<bind name="instance" value="'DefaultButton'; {	_width: '129px', 
														_enabled: true, 
														_action: !isAnswered ? 'inGameSurveyCancel' : 'exit',
														_dispatch: 'closeThankYouSign',
														_actionParams: {surveyId: $root.surveyId},
														_label: 'IDS_CLOSE_UPPER_CASE', 
														_focusIndex: 2 }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="SurveyAnswerItemHorizontalLayout">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * $index)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<bind name="var" value="{windowAppearLag: 0.3}"/>
		<style>
			<width value="125px"/>
			<marginRight value="6px"/>
			<align value="center"/>
		</style>
		<bind name="action" value="'click'; 'inGameSurveyAnswer'; {variant: $index, surveyId: $root.surveyId}"/>
		<block className="radiobutton_notext" type="native">
			<bind name="selected" value="selected"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<marginTop value="3px"/>
				<maxWidth value="125"/>
				<textAlign value="center"/>
			</style>
			<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.15; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="text" value="text"/>
		</block>
	</block>
	<block className="SurveyAnswerItemVerticalLayout">
		<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * $index)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<bind name="var" value="{windowAppearLag: 0.3}"/>
		<style>
			<width value="400px"/>
			<marginTop value="16px"/>
		</style>
		<block>
			<bind name="visible" value="_type == 'checkbox'"/>
			<bind name="instance" value="'CheckBox'; {	_isChecked: selected,
												_label: text,
												_maxTfWidth: 380,
												_action: 'inGameSurveyAnswer',
												_actionParams: {variant: $index, surveyId: $root.surveyId}}"/>
		</block>
		<block>
			<bind name="visible" value="_type == 'radio'"/>
			<bind name="action" value="'click'; 'inGameSurveyAnswer'; {variant: $index, surveyId: $root.surveyId}"/>
			<bind name="instance" value="'RadioButton'; { _selected: selected, _text: text, _maxTfWidth: 380 }"/>
		</block>
	</block>
	<block className="RadioButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<block className="radiobutton_notext" type="native">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="selected" value="_selected"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<marginLeft value="30px"/>
				<marginTop value="-5px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxTfWidth ? _maxTfWidth : 250"/>
			<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.15; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="text" value="_text"/>
		</block>
	</block>

	<!-- modal_window_rules -->
	<block className="ModalWindowRules">
		<bind name="entityDH" value="'selectedBattleEntity'; $root._entityId"/>
		<bind name="watch" value="'prefixName'; 	$root._rulesType"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'BlurMap'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0xFF001438"/>
					<alpha value="0.45"/>
				</style>
			</block>
		</block>
		<style>
			<align value="center|middle"/>
		</style>
		<bind name="instance" value="'ModalWindowRulesContent'; {_prefix:prefixName, _width: '650px'}"/>
	</block>
	<block className="ModalWindowRulesContent">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="var" value="{battleRules: {
		'paragons':	[
						{	_imagePath: 'url:../modal_battle_rules/paragons/icon_rules_1_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET_HEADER },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET }
							]
						},
						{	_imagePath: 'url:../modal_battle_rules/paragons/icon_rules_2_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH }
							]
						},
						{	_imagePath: 'url:../modal_battle_rules/paragons/icon_rules_3_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH }
							]
						}
					],
		'snowflakes': [
						{	_imagePath: 'url:../modal_battle_rules/snowflakes/icon_rules_1_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH }
							]
						},

						{	_imagePath: 'url:../modal_battle_rules/snowflakes/icon_rules_2_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET }
							]
						}
					],
	}}"/>
		<style>
			<width value="600px"/>
			<height value="100%f"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '600px'"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="64"/>
			</style>
			<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_MODAL_WINDOW_' + _prefix + '_RULES_HEADER', _headerWidth: '100%', _hideCloseButton: true}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="100%f"/>
				<width value="100%"/>
				<marginRight value="8px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="64px"/>
					<marginRight value="16px"/>
					<marginLeft value="16px"/>
				</style>
				<bind name="repeat" value="battleRules[_prefix]; 'ModalWindowRulesContentItem'; {_prefix: toUpperCase(tr(_prefix))}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="64"/>
			</style>
			<block className="DefaultButtonModal">
				<style>
					<marginBottom value="6px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="name" value="'Modal_window_action_Button' + 'IDS_CLOSE_UPPER_CASE'"/>
				<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_focusIndex: 1,
													_defaultFocused: true}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowRulesContentItem">
		<bind name="var" value="{appearIndex: 2 + $index}"/>
		<bind name="watch" value="'textBase'; 'IDS_MODAL_WINDOW_' + _prefix + '_RULES_PARAGRAPH_' + tr($index+1)"/>
		<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'lagAfterAddedToStage'; 0.15; appearIndex*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'startHide'; 0.15; appearIndex * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="48px"/>
			</style>
			<block>
				<bind name="visible" value="_imagePath != 'none'"/>
				<style>
					<width value="80px"/>
					<height value="80px"/>
					<marginTop value="-12"/>
					<backgroundSize value="cover"/>
					<top value="=0"/>
					<marginRight value="24"/>
				</style>
				<bind name="style" value="'backgroundImage'; _imagePath"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginLeft'; _imagePath != 'none' ? 0 : '80px'"/>
				<block>
					<bind name="visible" value="_header != 'none'"/>
					<style>
						<width value="100%"/>
						<marginBottom value="24px"/>
					</style>
					<block type="text">
						<style>
							<width value="100%"/>
							<alpha value="0.9"/>
						</style>
						<styleClass value="$TextDefaultBold24NM"/>
						<bind name="text" value="textBase + '_HEADER'"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginRight value="24px"/>
						<alpha value="0.75"/>
					</style>
					<bind name="visible" value="_textTypes.length"/>
					<bind name="repeat" value="_textTypes; 'ModalWindowParagonRulesItemWrapper';	{ _text: textBase + '_TEXT_' }"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ModalWindowParagonRulesItemWrapper">
		<bind name="watch" value="'isParagraphItem';		_type == SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH"/>
		<bind name="watch" value="'isBulletHeaderItem';	_type == SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET_HEADER"/>
		<bind name="watch" value="'isBulletItem';		_type == SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET"/>
		<bind name="watch" value="'textValue'; _text+($index+1)"/>
		<style>
			<width value="100%"/>
			<marginRight value="8px"/>
		</style>
		<bind name="child" value="_type;		isParagraphItem		?	{	_paragraphText: textValue,
														_class: '$TextDefault18NM',
														_marginBottom: '18px',
														_width: '100%',
														_leading: -1 }
												:	{	_text: textValue,
														_textClass: '$TextDefault18NM',
														_bulletType: isBulletHeaderItem	? 'none' : '  '};		'RepeatParagraphItemNM';
																												'ListWithBulletsElement';
																												'ListWithBulletsElement'"/>
	</block>
	<block className="ListWithBulletsElement">
		<bind name="visible" value="_text || ($value.length &gt; 0)"/>
		<bind name="watch" value="'bulletIndex'; _bulletIndex ? _bulletIndex : false"/>
		<bind name="watch" value="'textItem'; _text	? bulletIndex == true	? _text + ($index + 1)
															: _text
									: $value"/>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '12px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="visible" value="_bulletType != 'none'"/>
				<bind name="class" value=" _textClass ? _textClass : '$TextDefaultNM'"/>
				<style>
					<marginRight value="10px"/>
					<width value="100%f"/>
				</style>
				<bind name="alpha" value=" _textAlpha ? _textAlpha : 0.75"/>
				<bind name="text" value="_bulletType ? _bulletType : ''"/>
			</block>
			<block type="text">
				<style>
					<leading value="-3"/>
					<width value="100%"/>
				</style>
				<bind name="class" value=" _textClass ? _textClass : '$TextDefaultNM'"/>
				<bind name="alpha" value=" _textAlpha ? _textAlpha : 0.75"/>
				<bind name="substitute" value="	_substitute.imageOffset ? _substitute.imageOffset : 0;
								_substitute.map;
								(_toUpperCase ? toUpperCase(tr(textItem)) : tr(textItem));
								_substitute.postfix ? _substitute.postfix : ''"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_window_simple -->
	<block className="ConfirmationModalWindow">
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<margin value="16px"/>
			</style>
			<block type="text">
				<style>
					<alpha value="0.9"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$TextDefault26NM"/>
				<bind name="text" value="_subtitle"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="style" value="'marginBottom'; _instruction ? 16 : 0"/>
			<bind name="instance" value="'InstructionBigTech'; _instruction ? { _instructionText: _instruction, _maxWidth: '450' } : null"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="instance" value="'ModalWindowOkCancel'; {_appearOrder: 3, _focusBtn: 1}"/>
		</block>
	</block>
	<block className="RestartModalWindow">
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<alpha value="0.9"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$TextDefault26NM"/>
				<bind name="text" value="_subtitle"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="16px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="32px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '210px',
												_enabled: true,
												_isTransactionBtn: false,
												_label: 'IDS_RESTART_NOW',
												_name: 'btn_restart',
												_focusIndex: 2,
												_defaultFocused: false}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="130px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '130px',
												_enabled: true,
												_isTransactionBtn: false,
												_label: _btnTitle ? _btnTitle : 'IDS_OK',
												_name: 'btn_ok',
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="NotificationModalWindow">
		<params>
			<param name="name" value="NotificationWindow"/>
		</params>
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<margin value="16px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefault22NM"/>
				<bind name="text" value="_subtitle"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_name: 'btn_ok',
											_enabled: true,
											_label: 'IDS_OK',
											_focusIndex: 1,
											_defaultFocused: true}"/>
		</block>
	</block>
	<block className="SimpleModalWindow">
		<styleClass value="$Fullsize"/>
		<bind name="var" value="{simpleModalsTypes: ['ConfirmationModalWindow',
									'NotificationModalWindow',
									'RestartModalWindow']}"/>
		<bind name="watch" value="'simpleModalsHeaders'; [	'IDS_CONFIRMATION',
											toUpperCase(tr($root.title)),
											toUpperCase(tr($root.title))]"/>
		<bind name="watch" value="'modalWindowType'; $root.type ? $root.type : 0"/>
		<bind name="instance" value="'SmallModalWindow'; {_headerText: simpleModalsHeaders[modalWindowType], _contentElement: simpleModalsTypes[modalWindowType], _subtitle: $root.subtitle, _btnTitle: $root.btnTitle, _instruction: $root.instruction}"/>
	</block>

	<!-- modal_window_system -->
	<block className="ModalWindowSystemExpendableIconWithHeaderAndSubheader">
		<bind name="watch" value="'headerSubheaderTotalMaxWidth'; _maxWidth ? _maxWidth : 9999"/>
		<bind name="watch" value="'imageWidth'; _headerIconType == 2 ? 80 : 60"/>
		<bind name="watch" value="'maxHeaderSubheaderWidth'; headerSubheaderTotalMaxWidth - (imageWidth + 12)"/>
		<style>
			<width value="100%f"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<top value="0"/>
			</style>
			<bind name="child" value="_headerIconType;	{	_imageUrl:		_imageUrl,
											_data:			_data};
										{	0:			'ModalWindowSystemCamouflageIcon',
											1:	'ModalWindowSystemCamouflageIconRepaint',
											2:	'ModalWindowSystemEconomicBoostIcon' }"/>
		</block>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemHeaderSubheaderText';	{	_headerText:	_headerText,
																	_subheaderText:	_subheaderText,
																	_unifiedStatus:	_unifiedStatus,
																	_maxWidth:		maxHeaderSubheaderWidth }"/>
		</block>
	</block>
	<block className="ModalWindowSystemHeaderSubheaderText">
		<style>
			<width value="100%f"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION					?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION		?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_OFF			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_MUTED			?		SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS				?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_MASTERY_TRIAL		?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPGRADE_AVAILABLE			?		SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY					?		SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING					?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED			?		SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT				?		SC.Ui_styles.SERVICE_COLORS.PINK :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VOICE_CHAT_ON				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFAULT					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LOCK						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_DOUBLE_LEFT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.MOUSE_SCROLL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HIDDEN					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_NOT_DETECTED			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_DEFAULT			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFO						?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.LINKED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPAINTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UPDATE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EPIC_SKILL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ADVANCED_CREW				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.IN_BATTLE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.TO_ARMORY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.INFINITE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PERMOBOOST_ACTIVE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_NORMAL				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.KEY_TARGET				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BURST_FIRE				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NO_ICON					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NOTIFICATION				?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.HAS_BATTLE_MODIFIERS		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REPLACED_CONSUMABLES		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_READY			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.COMMANDER_NOT_READY		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REFERAL_VETERAN			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OFFLINE					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_ON		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DISIVION_WANTED_OFF		?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DIVISION_INVITE			?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.PRIMARY					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OBSERVER					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SELECTED					?		SC.Ui_styles.SERVICE_COLORS.WHITE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_INFO_HIDDEN			?		SC.Ui_styles.SERVICE_COLORS.WHITE
																											:		SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block type="text">
			<params>
				<param name="name" value="modalWindowSystemHeader"/>
			</params>
			<styleClass value="$TextDefaultBold20NM"/>
			<style>
				<leading value="-4"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_headerText"/>
		</block>
		<block type="text">
			<bind name="visible" value="_subheaderText"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginTop value="8px"/>
				<leading value="-2"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth"/>
			<bind name="style" value="'alpha'; textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.75 : 1"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_subheaderText"/>
		</block>
	</block>
	<block className="ModalWindowSystemCamouflageIcon">
		<style>
			<width value="60px"/>
			<height value="60px"/>
		</style>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
		<bind name="instance" value="'LinkableItemIcon'; _data.exteriorType == SC.Exteriors.EXTERIOR_TYPE.MSKIN ? {} : null"/>
	</block>
	<block className="LinkableItemIcon">
		<style>
			<width value="19px"/>
			<height value="19px"/>
			<margin value="-1px"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/unified_status_icons/icon_linked.png'"/>
	</block>
	<block className="ModalWindowSystemCamouflageIconRepaint">
		<block className="CamouflageRepaintedIcon" type="ublock">
			<bind name="build!" value="{_camouflageId: _data.camouflageId}"/>
		</block>
	</block>
	<block className="ModalWindowSystemEconomicBoostIcon">
		<bind name="instance" value="'EconomicBoostItemView';	{	_name: _data.name,
													_type: _data.type,
													_isUnlinkedLinkableBoost: _data.linking }"/>
	</block>
	<block className="ModalWindowSystemQuestionWithPrice">
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault26NM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_questionText"/>
		</block>
		<block>
			<bind name="visible" value="_priceInfo"/>
			<style>
				<marginTop value="-9px"/>
				<marginBottom value="-8px"/>
				<marginLeft value="6px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: _priceInfo, _showDiscountTag: true, _large: true }"/>
		</block>
		<block>
			<bind name="visible" value="_priceInfo &amp;&amp; _optionalPriceInfo"/>
			<style>
				<marginLeft value="6px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault26NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_AND"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_optionalPriceInfo"/>
			<style>
				<marginTop value="-9px"/>
				<marginBottom value="-8px"/>
				<marginLeft value="6px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: _optionalPriceInfo, _showDiscountTag: true, _large: true }"/>
		</block>
		<block>
			<bind name="visible" value="_priceInfo || _optionalPriceInfo"/>
			<block type="text">
				<styleClass value="$TextDefault26NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_QUESTION"/>
			</block>
		</block>
	</block>

	<!-- nation_flags -->
	<block className="NationFlagsTiny">
		<block className="NationFlagsTiny" type="ublock">
			<bind name="build!" value="{ _shipCountry: _shipCountry }"/>
		</block>
	</block>

	<!-- params_modifier -->
	<block className="ParamsModifierItem">
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginBottom';	(_isTooltipSystem == true)	? '12px' : '16px'"/>
		<bind name="style" value="'paddingTop';		(_shrinkHeight == true)		? '-8px' : '0'"/>
		<bind name="watch" value="'textColor';	category == 'positive'	? 0xFF4CE8AA :
								category == 'negative'	? 0xFFFF6600
														: 0xFFFFFFFF"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<leading value="-2"/>
					<alpha value="0.8"/>
					<width value="100%"/>
				</style>
				<bind name="style" value="'alpha';	(!measuredValue &amp;&amp; textColor == 0xFFFF6600)	? 1 : 0.8"/>
				<bind name="style" value="'textColor'; measuredValue ? 0xFFFFFFFF : textColor"/>
				<bind name="text" value="attributeIDS"/>
			</block>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<marginLeft value="12px"/>
				</style>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="substitute" value="5;	{	'[battleship]'	: 'battleship_small_own',
										'[aircarrier]'	: 'carrier_small_own',
										'[destroyer]'	: 'destroyer_small_own',
										'[submarine]'	: 'submarine_small_own'
									}; format(measuredValue)"/>
			</block>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<bind name="style" value="'alpha'; category == 'positive' ? 0.65 : 0.8"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="text" value="measure"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_dottedDivider"/>
			<style>
				<width value="100%"/>
				<marginTop value="1px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ParamsModifierList">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesPositive; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass, _isTooltipSystem: _isTooltipSystem}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesNegative; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass, _isTooltipSystem: _isTooltipSystem}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesNeutral; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass, _isTooltipSystem: _isTooltipSystem}"/>
		</block>
	</block>

	<!-- player -->
	<block className="PlayerContactItemWithRollover">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="watch" value="'isInBalancer'; balancerInfoEntity != null"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'accountLevel'; ['entityAccount.accountLevel.evLevelChanged']; entityAccount.accountLevel.level"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged']; !!entityAccount.contact.isIgnored"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watchDH" value="'referralType'; 		['entityAccount.referral.evTypeUpdated']; entityAccount.referral.type"/>
		<bind name="watch" value="'isRefSysParticipant'; referralType != null"/>
		<bind name="name" value="'playerContactName_' + entityAccount.accountName.name"/>
		<bind name="watch" value="'isInDivision'; entityAccount.hasComponent(CC.preBattlePlayerSimple) &amp;&amp; !isInvitedToDivision"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watch" value="'actionDenyReason';	(_playerContext.type == 'inviteToDivision') ? 			!(accountOnline)		? 'IDS_INVITE_TO_DIVISION_ACTION_DENY_REASON_OFFLINE' :
																								isInvitedToDivision 	? 'IDS_INVITE_TO_DIVISION_ACTION_DENY_REASON_ALREADY_INVITED'
																														: 'no_reason'
																					: 	'no_reason'"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
		</style>
		<bind name="style" value="'alpha'; accountOnline ? 1 : 0.5"/>
		<block>
			<bind name="visible" value="isSelf"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-1px"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="transition" value="mouseDown &amp;&amp; !isSelf; 0.03; {alpha: 1}; {alpha: 0.7}"/>
			<bind name="transition" value="rollOver || contactContextMenuVisible; 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="style" value="'hitTest'; !isSuspended || (isSuspended &amp;&amp; groupIdsOfAccount != null)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="menu" value="'ContactContextMenu';	!isSelf	? 	{	_entityAccountId: _entityAccountId, 
															_currentGroupId: _currentGroupId, 
															_actionDenyReason: actionDenyReason,
															_playerContext: _playerContext, 
															_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON,
															_channelId: _channelId }
														: 	null; null; null; 'contactContextMenuVisible'"/>
			<bind name="tooltip" value="'ContactInfoTooltip'; !isSuspended	?	{	_entityAccountId: _entityAccountId,
																	_playerContext: _playerContext,
																	_actionDenyReason: actionDenyReason,
																	_isContextMenuAvailable: !isSelf }
															:	null"/>
			<bind name="clickSplit"/>
			<bind name="watch" value="'isActionEnabled'; !isSelf &amp;&amp;  actionDenyReason == 'no_reason' &amp;&amp; !isSuspended"/>
			<bind name="var" value="{showBusyIndicator: false}"/>
			<bind name="watch" value="'isInvitedToDivision'; entityAccount.playerInvitedToPrebattleInfo != null"/>
			<bind name="action" value="'left_click';	(isActionEnabled == false)						? '' :
									(_playerContext.type == 'startPrivateChat')		? 'openChannelForPrivateMessages' :
									(_playerContext.type == 'inviteToChannel')		? 'sendChannelInvite' :
									(_playerContext.type == 'inviteToDivision')		? 'inviteToDivision' :
									(_playerContext.type == 'inviteToTrainingRoom')	? 'inviteToTrainingRoom' :
									(_playerContext.type == 'channelParticipants')	? 'openChannelForPrivateMessages'
																					: '';
									(isActionEnabled == false)						? {} :
									(_playerContext.type == 'startPrivateChat')		? {dbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'inviteToChannel')		? {channelId: _playerContext.channelId, inviteDbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'inviteToDivision')		? {playerId: entityAccount.accountSimple.dbId, playerName: entityAccount.accountName.name, inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON} :
									(_playerContext.type == 'inviteToTrainingRoom')	? {inviteeDBID: entityAccount.accountSimple.dbId, teamID: _teamId} :
									(_playerContext.type == 'channelParticipants')	? {dbId: entityAccount.accountSimple.dbId}
																					: {}"/>
			<block>
				<bind name="visible" value="isRefSysParticipant"/>
				<style>
					<position value="absolute"/>
					<top value="2px"/>
					<left value="-1px"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'IconReferralSystem'; isRefSysParticipant ? { _referralType: referralType} : null"/>
			</block>
			<block>
				<bind name="transition" value="(mouseDown &amp;&amp; !isSelf); 0.03; {alpha: 1}; {alpha: 0.7}"/>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'marginLeft';	_isShort	? '17px'
													: '19px'"/>
				<block>
					<styleClass value="$Fullsize"/>
					<bind name="instance" value="'PlayerContactItem'; {_entityAccountId: _entityAccountId, _playerContext: _playerContext, _isShort: _isShort, _nickNameWidth: _nickNameWidth }"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<block>
						<bind name="visible" value="!(isSelf)"/>
						<style>
							<marginTop value="4px"/>
						</style>
						<bind name="style" value="'marginRight'; _isShort ? '6px' : '10px'"/>
						<bind name="transition" value="rollOver; 0.3; {alpha: 0}; {alpha: 1.0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; 0.07"/>
						<bind name="watch" value="'isAddToContactsBtnVisible';	(groupIdsOfAccount==null) &amp;&amp;
																!isIgnored &amp;&amp;
																!isSuspended &amp;&amp;
																isChatServerAvailable"/>
						<block>
							<style>
								<marginTop value="1px"/>
								<marginRight value="3px"/>
							</style>
							<bind name="instance" value="'BusyIndicator'; showBusyIndicator ? { _showBusyIndicator: showBusyIndicator } : null"/>
						</block>
						<block>
							<bind name="visible" value="isAddToContactsBtnVisible"/>
							<style>
								<marginRight value="4px"/>
							</style>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_ADD_TO_CONTACTS'}"/>
							<bind name="instance" value="'ImageButton'; {_width: '23px',
														_height: '23px',
														_enabled: true,
														_action: 'addContact',
														_actionParams: {dbId: entityAccount.accountSimple.dbId},
														_backgroundImage: 'url:../service_kit/buttons/context/add_contact.png'}"/>
						</block>
						<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'playersInDivision'"/>
						<bind name="collectionDH" value="CC.playerInvitedToPrebattleInfo; 'playersInvitedToDivision'"/>
						<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
						<bind name="watchDH" value="'trMaxPlayers'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
						<bind name="watch" value="'maxPlayers';	isInTrainingRoom	? trMaxPlayers 
																	: shipRestrictions.maxPlayers"/>
						<bind name="watch" value="'freePlaces'; maxPlayers - playersInDivision.length - playersInvitedToDivision.length"/>
						<bind name="watch" value="'isInviteToDivisionBtnVisible';	((isSelfPlayerCommander &amp;&amp; (freePlaces &gt; 0)) || !isInDivision) &amp;&amp;
																	accountOnline &amp;&amp;
																	!_isShort &amp;&amp;
																	!isInBalancer &amp;&amp;
																	(_playerContext.type != 'inviteToTrainingRoom') &amp;&amp;
																	!isInTrainingRoom &amp;&amp;
																	!isSuspended"/>
						<block>
							<bind name="visible" value="isInviteToDivisionBtnVisible"/>
							<bind name="watch" value="'inviteToDivisionBtnEnabled'; 	!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp;
																	!entityAccount.hasComponent(CC.invitationToDivision) &amp;&amp;
																	!isInvitedToDivision"/>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: isInvitedToDivision ? 'IDS_INVITED_IN_DIVISION_ALREADY' : 'IDS_INVITE_IN_DIVISION'}"/>
							<style>
								<marginRight value="4px"/>
							</style>
							<bind name="instance" value="'ImageButton'; {_width: '23px',
														_height: '23px',
														_enabled: inviteToDivisionBtnEnabled,
														_action: 'inviteToDivision',
														_actionParams: {playerId: entityAccount.accountSimple.dbId,
																		playerName: entityAccount.accountName.name,
																		inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON},
														_backgroundImage: 'url:../service_kit/buttons/context/division_invite.png'}"/>
						</block>
						<block>
							<bind name="visible" value="!isSuspended &amp;&amp; isChatServerAvailable"/>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_SEND_MESSAGE'}"/>
							<bind name="instance" value="'ImageButton'; {_width: '23px',
														_height: '23px',
														_enabled: true,
														_action: 'openChannelForPrivateMessages',
														_actionParams: {dbId: entityAccount.accountSimple.dbId},
														_backgroundImage: 'url:../service_kit/buttons/context/start_chat.png'}"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PlayerContactItem">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'nickName';			['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName';			['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watchDH" value="'accountOnline';		['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'inBattle'; 			['entityAccount.accountStatus.evInBattleChanged']; entityAccount.accountStatus.inBattle"/>
		<bind name="watchDH" value="'rank'; 				['entityAccount.accountRank.evChanged']; entityAccount.accountRank.rank"/>
		<bind name="watchDH" value="'rankLeague'; 		['entityAccount.accountRank.evChanged']; entityAccount.accountRank.league"/>
		<bind name="watchDH" value="'rankSeasonId'; 		['entityAccount.accountRank.evChanged']; entityAccount.accountRank.seasonId"/>
		<bind name="watchDH" value="'clanId'; 			['entityAccount.clanman.evClanIdChanged']; entityAccount.clanman.clanId"/>
		<bind name="watchDH" value="'isSelf'; 			[]; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'isInBattle'; 		['entityAccount.preBattlePlayerSimple.evIsInBattleChanged']; entityAccount.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'isCommander'; 		['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isReady'; 			['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; clanId"/>
		<bind name="watchDH" value="'clanTag'; 	['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'color'; 	['clanExtendedEntity.clanExtended.evColorChanged']; clanExtendedEntity.clanExtended.color"/>
		<bind name="watchDH" value="'league'; 	['clanExtendedEntity.clanExtended.evLeagueChanged']; clanExtendedEntity.clanExtended.league"/>
		<bind name="watch" value="'clanTagColor'; ('0xff' + color)"/>
		<bind name="watch" value="'isInvitedToDivision'; entityAccount.playerInvitedToPrebattleInfo != null"/>
		<bind name="watch" value="'isInDivision'; isInFormation &amp;&amp; !isInvitedToDivision"/>
		<bind name="watch" value="'isInFormation'; entityAccount.hasComponent(CC.preBattlePlayerSimple)"/>
		<bind name="watchDH" value="'isMercenary';	['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watch" value="'isInFormationBattle'; isInDivision &amp;&amp; (isInBattle || inBattle)"/>
		<bind name="watchDH" value="'inviteExpirationTime'; ['']; entityAccount.playerInvitedToPrebattleInfo.expirationTime"/>
		<bind name="firstEntityDH" value="'tournamentRoomInfoEntity'; CC.tournamentRoomInfo"/>
		<bind name="watchDH" value="'isTournamentRoomInfo'; []; tournamentRoomInfoEntity.hasComponent(CC.tournamentRoomInfo)"/>
		<bind name="var" value="{wantedInDivision: false}"/>
		<bind name="style" value="'alpha'; _isOfflineAlpha	? accountOnline ? 1
															: 0.5
											: 1"/>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<bind name="visible" value="accountOnline &amp;&amp; ((inBattle &amp;&amp; !(isInFormationBattle)) || wantedInDivision)"/>
				<style>
					<marginLeft value="3px"/>
					<marginTop value="5px"/>
				</style>
				<block className="icon_player_status" type="native">
					<bind name="gotoAndStop!" value="wantedInDivision								? 'wanted_in_division' :
									inBattle										? 'in_battle'
																					: 'not_ready'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="(isInDivision || (isInvitedToDivision &amp;&amp; !isSelf)) &amp;&amp; !isInTrainingRoom"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<marginTop value="9px"/>
						<marginLeft value="-12px"/>
					</style>
					<bind name="instance" value="'VoiceChatDockIcon'; (accountOnline &amp;&amp; isInFormation)	? {_playerName: pureName, _isSelf: isSelf}
																						: null"/>
				</block>
				<block>
					<style>
						<marginTop value="4px"/>
					</style>
					<bind name="instance" value="'FormationPlayerIcon';	{	_isEmptySlot: isInvitedToDivision,
															isCommander: isCommander,
															isMercenary: isMercenary,
															isReady: isReady,
															isInBattle: isInFormationBattle} "/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="rank != 0 &amp;&amp; !(_isShort || isInDivision)"/>
				<style>
					<marginTop value="3px"/>
				</style>
				<block className="IconRankSmall" type="ublock">
					<bind name="build!" value="{	_rank: rank, _league: rankLeague}"/>
				</block>
			</block>
			<block type="text">
				<bind name="name" value="'playerContactName_' + nickName"/>
				<bind name="watch" value="'_tfWidth' ; 	_nickNameWidth	? _nickNameWidth :
										_isShort		? 148
														: 235"/>
				<bind name="style" value="'width';	_notTrancated	? 'auto' :
									((rank != 0) || inBattle || wantedInDivision)	? isInDivision	? _tfWidth - 37 + 'px'
																									: _tfWidth - 20 + 'px'
																					: isInDivision	? _tfWidth - 20 + 'px'
																									: _tfWidth + 'px'"/>
				<style>
					<marginTop value="2px"/>
					<marginLeft value="2px"/>
					<multiline value="false"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<noTranslate value="true"/>
				</style>
				<bind name="class" value=" (isSelf || (isInDivision &amp;&amp; !isTournamentRoomInfo)) &amp;&amp; !isMercenary	? '$FontColorGolden'
																								: '$FontColorWhite'"/>
				<bind name="class" value=" isSelf ? '$Bold' : '$None'"/>
				<bind name="text" value="_playerContext.channelTypeIdent == 'clan' ? pureName : nickName"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ContactInfoTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<block className="ContactInfoTooltip" type="ublock">
			<bind name="build!" value="{	_entityAccountId: _entityAccountId,
						_playerContext: _playerContext,
						_actionDenyReason: _actionDenyReason ? _actionDenyReason : '',
						_expirationTime: _expirationTime ? _expirationTime : 0,
						_isChatServerAvailable: _isChatServerAvailable ? _isChatServerAvailable : false,
						_isContextMenuAvailable: _isContextMenuAvailable ? _isContextMenuAvailable : false	}"/>
		</block>
	</block>
	<block className="ContactContextMenu">
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="childParentScope" value="isSuspended ? 0 : 1; {}; 'SuspendedContactContextMenu'; 'NormalContactContextMenu'"/>
	</block>
	<block className="SuspendedContactContextMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="contrast"/>
		</block>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; false ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(false) ? {} : null"/>
		</block>
		<block>
			<styleClass value="$ContextMenuContent"/>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
			</block>
		</block>
	</block>
	<block className="NormalContactContextMenu">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="watch" value="'isInBalancer'; balancerInfoEntity != null"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'selfPreBattlePlayerId'; []; selfPlayerEntity.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'isSelfPlayerTeamCommander'; ['selfPlayerEntity.trainingRoomPlayer.evUpdate']; selfPlayerEntity.trainingRoomPlayer.isCommander"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'prebattleInvitedPlayerId'; []; entityAccount.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'prebattlePlayerId'; []; entityAccount.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'prebattlePlayerTeamId'; ['entityAccount.preBattlePlayerSimple.evTeamIdChanged']; entityAccount.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'isPrebattlePlayerOwner'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isPrebattlePlayerMercenary'; ['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watchDH" value="'isPrebattlePlayerTeamCommander'; ['entityAccount.trainingRoomPlayer.evUpdate']; entityAccount.trainingRoomPlayer.isCommander"/>
		<bind name="watch" value="'isInvitedToPrebattle'; (entityAccount.playerInvitedToPrebattleInfo != null)"/>
		<bind name="firstEntityDH" value="'tournamentRoomInfoEntity'; CC.tournamentRoomInfo"/>
		<bind name="watch" value="'isTournamentRoomInfo'; tournamentRoomInfoEntity != null"/>
		<bind name="watch" value="'isInPrebattle'; (entityAccount.preBattlePlayerSimple != null &amp;&amp; !(isInvitedToPrebattle))"/>
		<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
		<bind name="watchDH" value="'trMaxPlayers';			['trainingRoomEntity.trainingRoom.evUpdate'];		trainingRoomEntity.trainingRoom.teamSize"/>
		<bind name="watchDH" value="'trainingRoomOwnerId';	['trainingRoomEntity.preBattle.evOwnerIdChanged'];	trainingRoomEntity.preBattle.ownerId"/>
		<bind name="watch" value="'isSelfPlayerTrainingRoomOwner'; isInTrainingRoom &amp;&amp; (trainingRoomOwnerId == selfPreBattlePlayerId)"/>
		<bind name="watch" value="'isPrebattlePlayerTrainingRoomOwner'; isInTrainingRoom &amp;&amp; (trainingRoomOwnerId == prebattlePlayerId)"/>
		<bind name="watch" value="'isTrainingRoomTeamCommander'; isInTrainingRoom &amp;&amp; isSelfPlayerTeamCommander &amp;&amp; selfTeamId == prebattlePlayerTeamId"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="collectionDH" value="CC.contactsGroup; 'contactsGroup'"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged', 'entityAccount.evAdded']; !!entityAccount.contact.isIgnored"/>
		<bind name="watchDH" value="'canAddGroupEntitiesId'; ['entityAccount.elementInGroups.evCanAddGroupEntitiesChanged', 'chatEntity.chat.evRosterChanged']; (entityAccount.elementInGroups) ? entityAccount.elementInGroups.canAddGroupEntitiesId : chatEntity.chat.canAddGroupEntitiesId"/>
		<bind name="watch" value="'isInFormation'; (entityAccount.preBattlePlayerSimple != null)"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; selfPlayerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
		<bind name="watchDH" value="'isFull'; ['clanEntity.clanExtended.evIsFullChanged']; clanEntity.clanExtended.isFull"/>
		<bind name="watch" value="'haveOwnClan'; 			clanEntity != null"/>
		<bind name="watch" value="'canInvite'; 				(role == 'executive_officer' || role == 'recruitment_officer' || role == 'commander')"/>
		<bind name="watch" value="'alreadyInYourClan'; 		(entityAccount.clanman != null) &amp;&amp; (entityAccount.clanman.clanId == selfPlayerEntity.clanman.clanId)"/>
		<bind name="watch" value="'alreadyInAnotherClan'; 	(entityAccount.clanman != null) &amp;&amp; (entityAccount.clanman.clanId != selfPlayerEntity.clanman.clanId)"/>
		<bind name="watch" value="'noFreePlacesInClan'; 		isFull"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; accountDbId ? null : {_text: 'IDS_UNABLED_ACTION_WITH_PLAYER', _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING}"/>
		<bind name="style" value="'mouseChildren'; accountDbId ? true : false"/>
		<bind name="style" value="'alpha'; accountDbId ? 1 : 0.5"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="contrast"/>
		</block>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; false ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(false) ? {} : null"/>
		</block>
		<block>
			<styleClass value="$ContextMenuContent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="	(isSelfPlayerCommander || isTrainingRoomTeamCommander)
							&amp;&amp; (isInPrebattle || isInvitedToPrebattle) &amp;&amp; !isInBalancer"/>
				<block>
					<bind name="visible" value="isInvitedToPrebattle"/>
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_RECALL_INVITATION'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'revokeInvitationToDivision'; {id: prebattlePlayerId}"/>
				</block>
				<block>
					<bind name="visible" value="(isInPrebattle &amp;&amp;
								(!isInTrainingRoom ||
								(isInTrainingRoom &amp;&amp; isSelfPlayerTrainingRoomOwner &amp;&amp; !isPrebattlePlayerTrainingRoomOwner) ))"/>
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="isInTrainingRoom ? 'IDS_EXCLUDE_PLAYER_OUT_OF_TRAINING_ROOM' : 'IDS_EXCLUDE_PLAYER_OUT_OF_DIVISION'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="request" value="'click'; 'kickPlayerFromDivision'; {	playerId: prebattlePlayerId, name: nickName,
																			subtitle: isInTrainingRoom ? 	'IDS_MODAL_EXCLUDE_PLAYER_OUT_OF_TRAINING_ROOM' : 
																											'IDS_MODAL_EXCLUDE_PLAYER_OUT_OF_DIVISION'
																		}"/>
				</block>
				<block>
					<bind name="visible" value="(isSelfPlayerCommander || isTrainingRoomTeamCommander) &amp;&amp; 
					!(_isBot) &amp;&amp;
					((isInPrebattle &amp;&amp; !trainingRoomEntity) ||
					(trainingRoomEntity &amp;&amp; trainingRoomEntity.trainingRoom.commandersManagement)) &amp;&amp; 
					(prebattlePlayerTeamId != -1) &amp;&amp; !isInvitedToPrebattle &amp;&amp;
					!isPrebattlePlayerTeamCommander &amp;&amp; !isPrebattlePlayerMercenary"/>
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_APPOINT_PLAYER_TO_COMMANDER'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'changeCommander'; {playerId: prebattlePlayerId, teamId: prebattlePlayerTeamId}"/>
					<bind name="dispatch" value="'click'; _isTrainingRoom ? '' : 'Tooltip.Close'; null; 2"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="2px"/>
						<marginBottom value="3px"/>
					</style>
					<bind name="visible" value="!_isBot &amp;&amp; isChatServerAvailable"/>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="_playerContext.type == 'inviteToChannel'"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_INVITE_PLAYER_TO_CHANNEL'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'sendChannelInvite'; {channelId: _playerContext.channelId, inviteDbId: accountDbId}"/>
			</block>
			<block>
				<bind name="visible" value="!_isBot &amp;&amp; isChatServerAvailable"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_SEND_MESSAGE'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'openChannelForPrivateMessages'; {dbId: accountDbId}"/>
			</block>
			<block>
				<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'playersInDivision'"/>
				<bind name="collectionDH" value="CC.playerInvitedToPrebattleInfo; 'playersInvitedToDivision'"/>
				<bind name="watchDH" value="'trMaxPlayers'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
				<bind name="watch" value="'maxPlayers';	isInTrainingRoom	? trMaxPlayers 
															: shipRestrictions.maxPlayers"/>
				<bind name="watch" value="'freePlaces'; maxPlayers - playersInDivision.length - playersInvitedToDivision.length"/>
				<bind name="visible" value=" ((isSelfPlayerCommander &amp;&amp; (freePlaces &gt; 0)) || !isInDivision) &amp;&amp;
							accountOnline &amp;&amp;
							!isInFormation &amp;&amp;
							!isInBalancer &amp;&amp;
							(_playerContext.type != 'inviteToTrainingRoom') &amp;&amp;
							!isInvitedToPrebattle &amp;&amp;
							!isInTrainingRoom"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'alpha'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision)) ? 1 : 0.5 "/>
				<bind name="style" value="'hitTest'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision))"/>
				<block className="MenuItemWithAction">
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_INVITE_IN_DIVISION'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'inviteToDivision'; {playerId: accountDbId, playerName: pureName, inviteType: _inviteType}"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="	(!isTournamentRoomInfo &amp;&amp; isInTrainingRoom) &amp;&amp;
							(isSelfPlayerCommander || isSelfPlayerTeamCommander) &amp;&amp;
							accountOnline &amp;&amp;
							!(isInFormation) &amp;&amp;
							!isInvitedToPrebattle"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItemWithAction">
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_INVITE_IN_TRAINING_ROOM'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'inviteToTrainingRoom'; {inviteeDBID: accountDbId}"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="((groupIdsOfAccount==null) &amp;&amp; !isIgnored) &amp;&amp; !_isBot &amp;&amp; isChatServerAvailable"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_ADD_TO_CONTACTS'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'addContact'; {dbId: accountDbId}"/>
			</block>
			<block>
				<bind name="visible" value="!(isIgnored) &amp;&amp; ((canAddGroupEntitiesId.length &gt; 0) &amp;&amp; (contactsGroup.length &gt; 1)) &amp;&amp; !(_isBot)"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_ADD_TO_GROUP'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<block className="button_expand_h" type="native">
					<style>
						<position value="absolute"/>
						<right value="6px"/>
					</style>
					<styleClass value="$MouseDisable"/>
					<styleClass value="$MiddleVAligned"/>
				</block>
				<bind name="tooltip" value="'MoveToGroupContextSubMenu'; {_entityAccountId: _entityAccountId, canAddGroupEntitiesId: canAddGroupEntitiesId, _dropDown: false}; TooltipBehaviour.submenu"/>
			</block>
			<block>
				<bind name="visible" value="(_currentGroupId &amp;&amp; !isIgnored) &amp;&amp; !_isBot"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItemWithAction">
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_REMOVE_FROM_GROUP'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'removeContactFromGroup'; {dbId: entityAccount.accountSimple.dbId, fromGroupId: _currentGroupId}"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="!_isBot &amp;&amp; isChatServerAvailable"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="(!isIgnored) ? 'IDS_IGNORE_PLAYER' : 'IDS_NOT_IGNORE_PLAYER'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'userIgnoreContact'; {dbId: accountDbId, ignore: !(isIgnored)}"/>
				</block>
				<bind name="instance" value="'MenuItemReportPortChatMisbehaviour'; {_dbId: entityAccount.accountSimple.dbId, _channelId: _channelId}"/>
			</block>
			<block>
				<bind name="visible" value="((groupIdsOfAccount!=null) &amp;&amp; !isIgnored) &amp;&amp; !_isBot &amp;&amp; isChatServerAvailable"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItemWithAction">
					<style>
						<width value="100%"/>
					</style>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
				</block>
			</block>
			<block>
				<bind name="primaryEntityDH" value="'selfVoiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
				<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEnabledEntity.preference.evValueChanged']; selfVoiceChatEnabledEntity.preference.value"/>
				<bind name="instance" value="'VoiceChatContextMenuItem'; ((selfVoiceChatEnabled || isSelf) &amp;&amp; isInFormation) ? {_isSelf: isSelf, _playerName: pureName, _nickName: nickName} : null"/>
			</block>
			<block>
				<bind name="visible" value="haveOwnClan &amp;&amp; canInvite &amp;&amp; !alreadyInYourClan &amp;&amp; !_isBot"/>
				<bind name="action" value="'click'; 'AccountClanComponent.sendInvite'; { playerDBID: accountDbId }"/>
				<bind name="style" value="'alpha'; (alreadyInAnotherClan || noFreePlacesInClan) ? 0.5 : 1"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; (alreadyInAnotherClan || noFreePlacesInClan) ? { _text: 	noFreePlacesInClan 		? 'IDS_CLAN_INVITATION_DENY_REASON_CLAN_IS_FULL':
																											alreadyInAnotherClan 	? 'IDS_CLAN_INVITATION_DENY_REASON_PLAYER_ALREADY_IN_CLAN'
																																	: '',
																								_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING}
																								: null"/>
				<style>
					<width value="100%"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'hitTest'; (alreadyInAnotherClan || noFreePlacesInClan) ? false : true"/>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_INVITATION_TO_CLAN'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="!_isBot &amp;&amp; isChatServerAvailable"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_PROFILE'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'navigateTo'; {	route: SC.Ui_windows.ROUTE.OVERLAY_BROWSER,
													data: {url: SC.Ui_windows.GUI_URL.PLAYER_STATS, accountId: accountDbId + ''}}"/>
			</block>
		</block>
	</block>
	<block className="VoiceChatContextMenuItem">
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; _playerName"/>
		<bind name="watch" value="'playerVoiceChatIsEnabled'; (playerVoiceChatEntity != null)"/>
		<bind name="watchDH" value="'playerVoiceChatIsMuted'; ['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watch" value="'voiceChatMenuText'; 	!(playerVoiceChatIsEnabled) ? 'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT' :
										playerVoiceChatIsMuted		? 'IDS_UNMUTE_PLAYER_VOICE_CHAT'
																	: 'IDS_MUTE_PLAYER_VOICE_CHAT'"/>
		<bind name="watch" value="'state'; 	!(playerVoiceChatIsEnabled)	? 'disabled' :
							playerVoiceChatIsMuted		? 'muted'
														: 'speak'"/>
		<bind name="style" value="'alpha'; !(playerVoiceChatIsEnabled)	? 0.9 : 1"/>
		<bind name="style" value="'hitTest'; !(playerVoiceChatIsEnabled)	? false : true"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="soundSet" value="dropdown"/>
			</params>
			<bind name="directEvent" value="'buttonClick'; 'toggleVoice'; {playerName: _playerName, nickName: _nickname}"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$ContextMenuListItemContent"/>
			<block className="icon_voice_chat_small" type="native">
				<style>
					<marginTop value="6px"/>
					<marginRight value="4px"/>
				</style>
				<bind name="gotoAndStop!" value="state"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	!(playerVoiceChatIsEnabled)	? '$FontColorOrange' :
							playerVoiceChatIsMuted		? '$FontColorOrange'
														: '$FontColorWhite'"/>
				<style>
					<width value="100%"/>
					<marginBottom value="3px"/>
					<hitTest value="false"/>
					<leading value="-3"/>
				</style>
				<bind name="text" value="voiceChatMenuText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MoveToGroupContextSubMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isDockUIHidden';  ['dockDataEntity.dockData.evIsDockUIHiddenChanged']; dockDataEntity.dockData.isDockUIHidden"/>
		<bind name="transition" value="isDockUIHidden; isDockUIHidden ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isDockUIHidden &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isDockUIHidden"/>
		<styleClass value="$DefaultSubMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; { _isInBattle: _isInBattle }"/>
		</block>
		<block>
			<styleClass value="$ContextMenuContent"/>
			<bind name="repeat" value="canAddGroupEntitiesId; 'MoveToGroupContextMenuItem'; {_entityAccountId: _entityAccountId, _currentGroupId: _currentGroupId}"/>
		</block>
	</block>
	<block className="MoveToGroupContextMenuItem">
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="entityDH" value="'group'; $value"/>
		<bind name="visible" value="(group.groupOfElements.groupId != 1)"/>
		<bind name="watch" value="'_isToTranslate'; 	(group!=null &amp;&amp; (group.groupOfElements.isLocal || 
									group.groupOfElements.isIgnorList ||
									group.groupOfElements.isReferralsList || 
									group.groupOfElements.groupType=='channels'))"/>
		<styleClass value="$ContextMenuListItem"/>
		<bind name="instance" value="'MenuItemInstance'; {_titleIds: group.groupOfElements.name, _isNoTranslate: !_isToTranslate}"/>
		<bind name="action" value="'click'; 'addContactToGroup'; {dbId: accountDbId, toGroupId: group.groupOfElements.groupId, fromGroupId: _currentGroupId}"/>
	</block>
	<block className="VoiceChatDockIcon">
		<bind name="primaryEntityDH" value="'selfVoiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEnabledEntity.preference.evValueChanged']; selfVoiceChatEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; _playerName"/>
		<bind name="watchDH" value="'playerVoiceChatIsMuted'; ['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watchDH" value="'playerVoiceChatIsSpeaking'; ['playerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; playerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="watch" value="'playerVoiceChatIsEnabled'; playerVoiceChatEntity != null"/>
		<bind name="watch" value="'isChatEnabled'; _isSelf	? selfVoiceChatEnabled
											: (selfVoiceChatEnabled ? playerVoiceChatIsEnabled : true)"/>
		<bind name="watch" value="'state';	!(isChatEnabled)			? 'disabled' :
							playerVoiceChatIsMuted		? 'muted' :
							playerVoiceChatIsSpeaking	? 'speak'
														: null"/>
		<bind name="transition" value="state; 0.1; {alpha: 0}; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<block className="icon_voice_chat_small" type="native">
			<bind name="gotoAndStop!" value="state"/>
		</block>
	</block>
	<block className="MenuTooltipBackground">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{	_isHighContrast: _isInBattle || isHighContrast, _isInfotip:true }"/>
		</block>
	</block>
	<block className="IconReferralSystem">
		<style>
			<width value="27px"/>
			<height value="27px"/>
		</style>
		<bind name="style" value="'backgroundImage'; _referralType == SC.Common.REFERRAL_TYPE.VETERAN 	? 'url:../service_kit/icons/icon_status_list_veteran.png'
																						: 'url:../service_kit/icons/icon_status_list_referal.png'"/>
	</block>
	<block className="MenuItemReportPortChatMisbehaviour">
		<bind name="visible" value="_channelId != null &amp;&amp; canReportPortChatMisbehaviour"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="primaryEntityDH" value="'channelEntity'; CC.channel; _channelId"/>
		<bind name="watchDH" value="'canReportPortChatMisbehaviour'; ['channelEntity.channel.evTypeChanged']; channelEntity.channel.typeIdent != SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE &amp;&amp; 
																								channelEntity.channel.typeIdent != SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _dbId"/>
		<bind name="watchDH" value="'banRequestAlreadySent'; ['playerEntity.accountSimple.evReportedChanged'];  playerEntity.accountSimple.reported"/>
		<bind name="style" value="'mouseChildren'; !banRequestAlreadySent"/>
		<bind name="style" value="'alpha'; banRequestAlreadySent ? 0.5 : 1.0"/>
		<block className="MenuItemWithAction">
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REQUEST_BAN_PLAYER_DOCK'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'makeChatComplaint'; {subjectSpaID: _dbId, channelID: _channelId}"/>
		</block>
	</block>

	<!-- price -->
	<block className="PriceTag">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<bind name="visible" value="priceInfo.basePrice &amp;&amp; priceInfo.finalPrice != priceInfo.basePrice &amp;&amp; _showDiscountTag"/>
			<bind name="tooltip" value="'DiscountTooltip'; { _priceInfo: priceInfo, _isExternal: _isExternal }"/>
			<bind name="name" value="'icon_discount_' + priceInfo.id"/>
			<block className="icon_discount" type="native">
				<style>
					<marginTop value="4px"/>
					<marginRight value="-3px"/>
				</style>
				<bind name="gotoAndStop!" value="_large || _medium ? 'large' : 'normal'"/>
			</block>
		</block>
		<bind name="watch" value="'textColor';	priceInfo.currency == SC.Common.CURRENCIES.GOLD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
								priceInfo.currency == SC.Common.CURRENCIES.FREE_XP	? SC.Ui_styles.SERVICE_COLORS.LIGHT_GREEN :
								priceInfo.currency == SC.Common.CURRENCIES.ELITE_XP	? SC.Ui_styles.SERVICE_COLORS.LIGHT_BLUE
																					: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<block type="text">
			<bind name="name" value="'price_' + priceInfo.id"/>
			<bind name="class" value="	_customClass	?	_customClass :
						_small			?	'$TextSecondaryBold':
						_medium			? 	'$TextHeaderBold' :
						_large			?	'$TextAccentBold'
										:	'$TextDefaultBold'"/>
			<bind name="style" value="'textColor';	textColor"/>
			<bind name="alpha" value="textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.9 : 1"/>
			<bind name="text" value="format(priceInfo.finalPrice, -1)"/>
		</block>
		<block>
			<bind name="style" value="'marginTop';	_large	? '-2px' :
									_medium	? '-7px' :
									_small	? '0px'
											: '1px'"/>
			<bind name="style" value="'marginLeft';	_large	? '-1px' :
									_medium ? '0px' :
									_small	? '1px'
											: '0px'"/>
			<bind name="instance" value="'Currency'; (priceInfo.currency == SC.Common.CURRENCIES.MONEY)		?	null :
									(priceInfo.currency == SC.Common.CURRENCIES.ACC_POINTS)	?	null
																							:	{	_currency: priceInfo.currency,
																									_large: _large,
																									_medium: _medium }"/>
		</block>
	</block>
	<block className="Currency">
		<bind name="watch" value="'iconName';	_currency +	(	_extraLarge				? '_large' :
												(_large || _medium)		? ''
																		: '_small')"/>
		<bind name="style" value="'marginTop';	_extraLarge				? '0px' :
								(_large || _medium)		? '8px'
														: '3px'"/>
		<block>
			<bind name="style" value="'width';	_extraLarge				? '44px' :
								(_large || _medium)		? '26px'
														: '15px'"/>
			<bind name="style" value="'height';	_extraLarge				? '44px' :
								(_large || _medium)		? '26px'
														: '16px'"/>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/currencies/icon_' + iconName + '.png'"/>
		</block>
	</block>
	<block className="PriceDeficit">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="!_hideIcon"/>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_warning_red" type="native">
				<bind name="style" value="'marginTop'; _large ? '5px' : '0px'"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<default_text value="IDS_NOT_ENOUGH"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<bind name="style" value="'marginLeft'; _large ? '2px' : '0px'"/>
			<styleClass value="$TextDefaultBold"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="text" value="format(_deficit, -1)"/>
		</block>
		<block>
			<bind name="style" value="'marginTop';	_large	? '-2px' :
									_medium	? '-7px' :
									_small	? '0px'
											: '1px'"/>
			<bind name="style" value="'marginLeft';	_large	? '-1px' :
									_medium ? '0px' :
									_small	? '1px'
											: '0px'"/>
			<bind name="instance" value="'Currency'; (priceInfo.currency != SC.Common.CURRENCIES.MONEY)	?	{
																								_currency: priceInfo.currency,
																								_large: _large,
																								_medium: _medium,
																								_duplicateCurrency: _duplicateCurrency
																							}
																						:	null"/>
		</block>
	</block>
	<block className="PriceTagWithLabel">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="class" value="_bold ? '$FontFamilyDefaultBold' : '$None'"/>
			<bind name="text" value="_label"/>
		</block>
		<block>
			<style>
				<marginLeft value="4px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { 	priceInfo: priceInfo, _showDiscountTag: _showDiscountTag,
										_large: _large, _medium: _medium, _small: _small, _duplicateCurrency: _duplicateCurrency}"/>
		</block>
	</block>

	<!-- progress_bar -->
	<block className="DoubleProgressBar">
		<style>
			<width value="100%"/>
		</style>
		<block className="DoubleProgressBar" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{	_progress1: _progress1 ? _progress1 : 0,
						_progress2: _progress2 ? _progress2 : 0,
						_color1: _color1 ? _color1 : 0xFFEEEEEE,
						_color2: _color2 ? _color2 : SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE }"/>
		</block>
	</block>

	<!-- pve_ship_restrictions -->
	<block className="ShipFilterRestrictions">
		<block className="ShipFilterRestrictions" type="ublock">
			<bind name="build!" value="{ _filters: _filters,
						_withShipTypeCounters: _withShipTypeCounters ? _withShipTypeCounters : false }"/>
		</block>
	</block>

	<!-- random_battle -->
	<block className="ClanBattleResultsStarStatic">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _width"/>
		<bind name="style" value="'height'; _height"/>
		<bind name="style" value="'marginRight'; _smallSize 	? '-5px': '5px'"/>
		<bind name="style" value="'marginLeft'; 	_smallSize 	? '-5px': '5px'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_CLAN_STAR_' + $value + '_DESCRIPTION')}; TooltipBehaviour.simple"/>
		<bind name="style" value="'backgroundImage'; _smallSize 	? 'url:../clans/stars/cvc_star_' + $value + '_small.png'
												: 'url:../clans/stars/cvc_star_' + $value + '.png'"/>
	</block>

	<!-- results_screen -->
	<block className="TabBarResults">
		<block className="BattleResultsMainTabButtons" type="ublock">
			<bind name="build!" value="{ _currentTabIndex: _currentTabIndex,
						_isTeamResultVisible: _isTeamResultVisible,
						_isDetailedReportVisible: _isDetailedReportVisible,
						_isCreditsAndExpVisible: _isCreditsAndExpVisible }"/>
		</block>
	</block>
	<block className="ResultsScreen">
		<bind name="appear" value="'addedToStage'; 1; 0; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 1; 0; {alpha: 1}; {alpha: 0}"/>
		<bind name="firstEntityDH" value="'sessionPrefsEntity'; CC.sessionPreference"/>
		<bind name="watchDH" value="'PBSScreenActiveTabIndex'; ['sessionPrefsEntity.sessionPreference.evPBSScreenActiveTabIndexChanged']; sessionPrefsEntity.sessionPreference.PBSScreenActiveTabIndex"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'battleResults'; ['battleResultsDH.dataComponent.evDataChanged']; battleResultsDH.dataComponent.data"/>
		<bind name="watch" value="'gameData'; 			battleResults.game_data"/>
		<bind name="watch" value="'personal'; 			battleResults.personal"/>
		<bind name="watch" value="'teamResults'; 		battleResults.team_results"/>
		<bind name="watch" value="'creditsExperience'; 	battleResults.credits_experience"/>
		<bind name="watch" value="'result'; 				gameData.battle_result"/>
		<bind name="watch" value="'resultText'; result == SC.Battle.BATTLE_RESULT.WON_POSITION 	? subst('IDS_SYS_MSG_BATTLE_RESULTS_' + result, [], {_wonPosition: personal.wonPosition})
																				: UIStrings.getEndBattleResult(result)"/>
		<bind name="watch" value="'isSpectator'; gameData.isSpectator"/>
		<bind name="watch" value="'game_mode'; 	gameData.game_mode"/>
		<bind name="watch" value="'scenario'; 	gameData.scenario"/>
		<bind name="watch" value="'isPersonalResultsOnly';	scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'isBattleResultReasonHided'; false"/>
		<bind name="watch" value="'isTeamResultVisible'; 	game_mode != GameMode.BATTLE_CHALLENGES &amp;&amp; game_mode != GameMode.BATTLE_TRIALS"/>
		<bind name="watch" value="'isDetailedReportVisible'; game_mode != GameMode.BATTLE_CHALLENGES"/>
		<bind name="watch" value="'commentText'; UIStrings.getEndBattleComment(isBattleResultReasonHided || !battleResults ? {} : battleResults)"/>
		<bind name="watch" value="'validTabIndex';	isPersonalResultsOnly 	? SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT :
									isSpectator 			? SC.Common.POST_BATTLE_SCREEN_TAB.TEAM_REPORT
															: PBSScreenActiveTabIndex"/>
		<bind name="watch" value="'hideTabBars'; isSpectator || isPersonalResultsOnly"/>
		<bind name="watch" value="'battleType'; gameData.battleType"/>
		<bind name="watch" value="'deficitList'; battleResultsDH.battleResultsStructured.deficitList"/>
		<bind name="watch" value="'isDeficitListVisible'; deficitList &amp;&amp; !isReplayPlaying"/>
		<bind name="watch" value="'isTrainingBattle'; battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isTournamentBattle'; battleType == SC.Common.BATTLE_TYPES.TOURNAMENT_BATTLE"/>
		<bind name="watch" value="'isCustomBattle'; isTrainingBattle || isTournamentBattle"/>
		<bind name="firstEntityDH" value="'battleInfoEntity'; CC.battleInfo"/>
		<bind name="watch" value="'isReplayPlaying'; battleInfoEntity.battleInfo.isReplayPlaying"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; playerShipId"/>
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="watchDH" value="'abuseStatus'; ['selfPlayerEntity.accountInfo.evAbuseStatusChanged']; selfPlayerEntity.accountInfo.abuseStatus"/>
		<bind name="watchDH" value="'accountLevel'; ['selfPlayerEntity.accountLevel.evLevelChanged']; selfPlayerEntity.accountLevel.level"/>
		<bind name="watchDH" value="'hasParentalControlRestriction'; ['selfPlayerEntity.accountSelf.evHasParentalControlRestrictionChanged']; selfPlayerEntity.accountSelf.hasParentalControlRestriction"/>
		<bind name="watchDH" value="'isShipReady'; ['shipOwnEntity.ownShip.evIsReadyChanged']; shipOwnEntity.ownShip.isReady"/>
		<bind name="catch" value="'onLostTop';	{ isOnTop: false }"/>
		<bind name="catch" value="'onBecomeTop';	{ isOnTop: true }"/>
		<bind name="var" value="{ isOnTop: false }"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'accountLevel';  ['selfPlayerEntity.accountLevel.evLevelChanged']; selfPlayerEntity.accountLevel.level"/>
		<bind name="firstEntityDH" value="'continuousBattleEnterEntity'; CC.continuousBattleEnter"/>
		<bind name="watchDH" value="'warningsMask';	['continuousBattleEnterEntity.continuousBattleEnter.evChanged']; continuousBattleEnterEntity.continuousBattleEnter.warningsMask"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.preBattle"/>
		<bind name="watch" value="'isAgainToBattleButtonVisible';	accountLevel &gt;= SC.Common.ACCOUNT_LEVEL.BATTLE_BONUSES &amp;&amp;
													!divisionDataEntity &amp;&amp;
													!balancerInfoEntity &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_TYPE)) &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_SHIP)) &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.RESTRICTED_SHIP)) &amp;&amp;
													battleType != SC.Common.BATTLE_TYPES.CLAN_BATTLE &amp;&amp;
													!isCustomBattle"/>
		<bind name="directEvent" value="'addedToStage'; 'setSessionPref'; { prefName: 'PBSScreenActiveTabIndex', newValue: SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT }"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="appear" value="'startShow'; 0.3; 0.8; {alpha: 0}; {alpha: 0.8}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<bind name="blurLayer"/>
				<style>
					<position value="absolute"/>
				</style>
				<block>
					<style>
						<backgroundColor value="0x000000FF"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'BlurMap'; isBlurEnabled ? { _map: 'blurmap_low' } : null"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.5; 0.8; {alpha: 0}; {alpha: 0.8}"/>
			<bind name="visible" value="!isBlurEnabled || contrast"/>
			<style>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/modal_battle.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.5; 0.8; {alpha: 0}; {alpha: 1.5}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
		</block>
		<bind name="stageSize"/>
		<bind name="watch" value="'PBSWidth'; 1077 + (stageWidth - 1280)*0.536"/>
		<bind name="watch" value="'PBSHeight'; 630 + (stageHeight - 720)*0.3"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="100%"/>
				<width value="1280:1077,1920:1420aw"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; stageWidth &gt;= 1440 ? '24px' : '12px'"/>
				<bind name="appear" value="'startShow'; 0.3; 1.4; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'TabBarResults'; hideTabBars 	? null
																: { _currentTabIndex: validTabIndex,
																	_isTeamResultVisible: isTeamResultVisible,
																	_isDetailedReportVisible: isDetailedReportVisible,
																	_isCreditsAndExpVisible: !isCustomBattle }"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<top value="7px"/>
						<right value="-60px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {_tooltipText: isReplayPlaying ? 'IDS_TOOLTIP_MENU' : 'IDS_CLOSE'}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<style>
					<width value="100%"/>
					<height value="720:630,1080:738ah"/>
				</style>
				<bind name="style" value="'marginTop'; 10 + (stageHeight - 720) * 0.2"/>
				<bind name="child" value="validTabIndex; {	_data: {	team_results: teamResults,
														personal: personal,
														game_data: gameData,
														credits_experience: creditsExperience,
														resultText: resultText,
														commentText: commentText,
														_PBSWidth: PBSWidth, _PBSHeight: PBSHeight
													}
										}; 'PersonalResultSection'; 'TeamResultSection'; 'DetailedReportSection'; 'EconomicsSection'"/>
			</block>
			<block>
				<bind name="style" value="'bottom'; 10 + (stageHeight - 720) * 0.15"/>
				<style>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block>
					<bind name="name" value="'BottomTabBarButtonDebriefing'"/>
					<styleClass value="$MiddleAligned"/>
					<bind name="appear" value="'startShow'; 0.3; 2.0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
					<bind name="instance" value="'DefaultButton'; {	_width: '168px',
													_name: isReplayPlaying ? null : 'btn_close',
													_action: isReplayPlaying ? 'restartReplay' : null,
													_label: isReplayPlaying ? 'IDS_BATTLE_STATS_RESTART_REPLAY' : 'IDS_BATTLE_STATS_CLOSE',
													_enabled: true,
													_focusIndex: 1,
													_defaultFocused: true}"/>
					<block>
						<bind name="visible" value="isDeficitListVisible"/>
						<style>
							<position value="absolute"/>
							<left value="-48px"/>
							<top value="-2px"/>
							<backgroundColor value="0x01000000"/>
						</style>
						<bind name="instance" value="'MarkerAttention';		isDeficitListVisible	? { _size: 1 } : null"/>
						<bind name="tooltip" value="'SimpleStatusTooltip';	isDeficitListVisible	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																						_text: deficitList }
																					: null"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'startShow'; 0.3; 2.2; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
					<style>
						<position value="absolute"/>
						<right value="15px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; isAgainToBattleButtonVisible	? {	_width: '146px',
																					_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
																					_enabled: true,
																					_isTransactionBtn: true,
																					_label: 'IDS_AGAIN',
																					_name: 'btn_again_to_battle',
																					_focusIndex: 2}
																				: null"/>
				</block>
			</block>
		</block>
		<bind name="primaryEntityDH" value="'selfPlayerVoiceChatEntity'; CC.playerVoiceState; selfPlayerName"/>
		<bind name="watchDH" value="'selfPlayerVoiceChatIsSpeaking'; ['selfPlayerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; selfPlayerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$BottomMenu"/>
			<block>
				<style>
					<marginLeft value="10px"/>
					<marginTop value="4px"/>
					<width value="19px"/>
					<height value="17px"/>
				</style>
				<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isSpeaking: selfPlayerVoiceChatIsSpeaking}"/>
			</block>
		</block>
	</block>

	<!-- results_screen_detailed_report -->
	<block className="DetailedReportSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'RealDetailedReportSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealDetailedReportSection">
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="stageSize"/>
		<style>
			<width value="100%"/>
			<height value="720:630,1080:738ah"/>
			<alpha value="0"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginBottom'; 10 + (stageHeight - 720) * 0.04"/>
			<bind name="entityDH" value="'shipsInteractionsEntity'; battleResultsDH.battleResultsStructured.interactions[0]"/>
			<bind name="entityDH" value="'buildingInteractionsEntity'; battleResultsDH.battleResultsStructured.buildingInteractions[0]"/>
			<bind name="instance" value="'BattleStatsInteractionsCarousel'; ((	shipsInteractionsEntity.battleResultsEntry.children.length +
																buildingInteractionsEntity.battleResultsEntry.children.length) &gt; 0)	? {	_shipsInteractionsEntity: shipsInteractionsEntity,
																																		_buildingInteractionsEntity: buildingInteractionsEntity,
																																		_PBSWidth: _PBSWidth}
																																	: null"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<styleClass value="$DefaultScrollBar"/>
			<block>
				<style>
					<width value="1280:357,1920:471aw"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.causedDamage}"/>
			</block>
			<block>
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
					<width value="1280:357,1920:471aw"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.generalInfo, _battleResultsDH: battleResultsDH}"/>
			</block>
			<block>
				<style>
					<width value="1280:357,1920:471aw"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.takenDamage, _battleResultsDH: battleResultsDH}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportColumn">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_list; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginTop';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE &amp;&amp; $index == 0		?	'5px'
																									:	'0px'"/>
		<bind name="style" value="'marginBottom';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp;
									(($index + 1) == _childrenLength)						? '12px' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE &amp;&amp;
									(($index + 1) == _childrenLength)	&amp;&amp;
									!(entity.battleResultsEntry.children.length)			? '12px'
 																							: '0px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER 		? 'BattleStatsDetailedReportHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBHEADER 		? 'BattleStatsDetailedReportSubHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE 			? 'BattleStatsDetailedReportLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE 		? 'BattleStatsDetailedReportSubLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LIST 			? 'BattleStatsDetailedReportList' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.EMPTY_LINE 	? 'BattleStatsDetailedReportEmptyLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL 			? 'BattleStatsDetailedReportTotalLine':
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLAIN_LINE 	? 'BattleStatsDetailedReportPlainLine'
																											: 'EmptyItem'"/>
			<bind name="instance" value="renderer; {_entity: entity, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportEmptyLine">
		<style>
			<width value="100%"/>
			<height value="3px"/>
		</style>
	</block>
	<block className="BattleStatsDetailedReportHeader">
		<bind name="watch" value="'iconPath'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
				<background9Slice value="[2]"/>
			</style>
			<bind name="style" value="'backgroundImage'; iconPath"/>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-1px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {	_entity :			_entity,																	
																	_labelClass :		'$TextLargeHeaderBold',
																	_valueSizeClass :	'$FontSizeHeader5'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportSubHeader">
		<bind name="watch" value="'iconPath'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
				<background9Slice value="[2]"/>
			</style>
			<bind name="style" value="'backgroundImage'; iconPath"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity : 			_entity,
																_battleResultsDH :	_battleResultsDH,
																_labelClass : 		'$TextHeaderWhiteBold',
																_valueSizeClass :	'$FontSizeHeader6'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportList">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<flow value="htile"/>
				<align value="center"/>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportListItem'"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefaultBold', _valueSizeClass: '$FontSizeDefault'}"/>
			</block>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<marginTop value="-3px"/>
					<alpha value="0.5"/>
				</style>
				<block className="DottedLine">
					<style>
						<backgroundImage value="bitmap:dotted_line"/>
						<backgroundRepeatX value="true"/>
						<width value="100%"/>
						<height value="1px"/>
						<alpha value="0.5"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportPlainLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault'}"/>
			</block>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<marginTop value="-3px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="4px"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportListItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLANE 			? 'BattleStatsDetailedReportListPlaneItem' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.MODULE_CRIT 	? 'BattleStatsDetailedReportListModuleItem'
																										: 'EmptyItem'"/>
		<bind name="instance" value="renderer; {_entity: entity}"/>
	</block>
	<block className="BattleStatsDetailedReportListModuleItem">
		<bind name="tooltip" value="'ListItemTooltip'; {	_entity: _entity}"/>
		<style>
			<width value="61px"/>
			<height value="60px"/>
		</style>
		<block>
			<style>
				<marginLeft value="4px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="instance" value="'PBSModuleIconWithAmount'; {_moduleType: _entity.battleResultsEntry.values[0].type,
														_amount: _entity.battleResultsEntry.values[0].value}"/>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportListPlaneItem">
		<style>
			<width value="61px"/>
			<height value="45px"/>
		</style>
		<bind name="tooltip" value="'ListItemTooltip'; {	_entity: _entity}"/>
		<block>
			<style>
				<marginLeft value="10px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="instance" value="'PBSPlaneIconWithAmount'; {	_planeType: _entity.battleResultsEntry.values[0].type,
														_amount: _entity.battleResultsEntry.values[0].value}"/>
			</block>
		</block>
	</block>
	<block className="PBSPlaneIconWithAmount">
		<style>
			<width value="25px"/>
			<height value="25px"/>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../service_kit/battle_results/icon_stat_' + _planeType + '.png')"/>
		<block type="text">
			<style>
				<position value="absolute"/>
				<top value="4px"/>
				<marginLeft value="24px"/>
			</style>
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="text" value="_amount"/>
		</block>
	</block>
	<block className="PBSModuleIconWithAmount">
		<block className="lesta.controls.BitmapEx" type="native">
			<bind name="bitmapDataClassName" value="'icon_module_' + _moduleType + '_1'"/>
		</block>
		<block type="text">
			<style>
				<position value="absolute"/>
				<top value="21px"/>
				<marginLeft value="35px"/>
			</style>
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="text" value="_amount"/>
		</block>
	</block>
	<block className="ListItemTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="64px"/>
				</style>
				<block>
					<style>
						<width value="64px"/>
						<height value="64px"/>
					</style>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$MiddleAligned"/>
						<bind name="watch" value="'renderer'; 	_entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLANE 		? 'PBSPlaneIconWithAmount' :
												_entity.battleResultsEntry.type == SC.Result_screen.TYPES.MODULE_CRIT 	? 'PBSModuleIconWithAmount'
																														: 'EmptyItem'"/>
						<bind name="instance" value="renderer;	{
													_planeType: 	_entity.battleResultsEntry.values[0].type,
													_moduleType: 	_entity.battleResultsEntry.values[0].type,
													_amount: 		_entity.battleResultsEntry.values[0].value
												}"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="10px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderWhiteBold"/>
						<bind name="text" value="_entity.battleResultsEntry.subtitle"/>
					</block>
					<block type="text">
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<marginTop value="-4px"/>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="_entity.battleResultsEntry.title"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
					<style>
						<width value="100%"/>
						<bottom value="0px"/>
						<position value="absolute"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginRight value="2px"/>
					<marginBottom value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
			<block>
				<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
					<marginBottom value="10px"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _marginLeft: '3px'}"/>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportSubLine">
		<style>
			<width value="100%"/>
			<height value="20px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="2px"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault', _battleResultsDH: _battleResultsDH}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginTop value="-1px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportTotalLine">
		<style>
			<height value="48px"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<textAlign value="center"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextHeader"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="_entity.battleResultsEntry.title"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowItem">
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'alpha';	_entity.battleResultsEntry.values[0] == null ||
							(	_entity.battleResultsEntry.values[0].value ||
								_entity.battleResultsEntry.values[1].value ||
								_entity.battleResultsEntry.values[2].value)		?	1 : 0.5"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.hint	? {_text: _entity.battleResultsEntry.hint}: null"/>
			<bind name="tooltip" value="	_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TEAM_KILLER			? 'PBSTeamKillerTooltip':
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ARTILLERY		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_TORPEDOES		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_BOMBS			? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ROCKETS			? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_SKIP_BOMBS		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_AIRSUPPORT		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_NAVAL_MINES		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_DEPTH_CHARGES	? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_OTHER			? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.SCOUTING_DAMAGE		? 'TakenDamageTooltip'
																														: 'EmptyItem' ;
						_entity.battleResultsEntry.tooltipType	? {	_entity: _entity, _battleResultsDH: _battleResultsDH} : null"/>
		</block>
		<bind name="watch" value="'fontColorClass';	_entity.battleResultsEntry.color == SC.Result_screen.COLORS.PINK 	? '$FontColorTeamkiller' :
									_entity.battleResultsEntry.color == SC.Result_screen.COLORS.RED		? '$FontColorCompareNegative'
																										: '$None'"/>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="class" value="_labelClass"/>
				<bind name="class" value="fontColorClass"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
			<block>
				<style>
					<right value="0px"/>
					<position value="absolute"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.values; 'BattleStatsDetailedReportRowValue'; {_fontColorClass: '$None', _fontSizeClass: _valueSizeClass}; true"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="TakenDamageTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
		</style>
		<bind name="stageSize"/>
		<bind name="var" value="{isTakenArtilleryTooltip: _entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ARTILLERY}"/>
		<bind name="var" value="{constDecreaseTooltip: isTakenArtilleryTooltip ? 266 : 450}"/>
		<bind name="watch" value="'tooltipHeight'; (stageHeight - constDecreaseTooltip - (stageHeight - 720) * 0.4)"/>
		<bind name="style" value="'height'; tooltipHeight +'px'"/>
		<bind name="var" value="{paddingBottom: 15}"/>
		<bind name="watch" value="'heightTooltipPanel'; vTileHeight + paddingBottom"/>
		<bind name="watch" value="'shipInteractionsList';	_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ARTILLERY		? _battleResultsDH.battleResultsStructured.takenArtilleryTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_TORPEDOES		? _battleResultsDH.battleResultsStructured.takenTorpedoesTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_BOMBS			? _battleResultsDH.battleResultsStructured.takenBombsTooltip		:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ROCKETS			? _battleResultsDH.battleResultsStructured.takenRocketsTooltip		:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_SKIP_BOMBS		? _battleResultsDH.battleResultsStructured.takenSkipBombsTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_AIRSUPPORT		? _battleResultsDH.battleResultsStructured.takenAirsupportTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_NAVAL_MINES		? _battleResultsDH.battleResultsStructured.takenNavalMinesTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_DEPTH_CHARGES	? _battleResultsDH.battleResultsStructured.takenDepthChargesTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_OTHER			? _battleResultsDH.battleResultsStructured.takenOtherTooltip		:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.SCOUTING_DAMAGE		? _battleResultsDH.battleResultsStructured.scoutingDamageTooltip
																																			: _battleResultsDH.battleResultsStructured.takenOtherTooltip"/>
		<block>
			<style>
				<width value="100%"/>
				<height value="100%"/>
			</style>
			<bind name="style" value="'height'; heightTooltipPanel +'px'"/>
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
			<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
			<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
			<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
			<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
					<styleClass value="$Fullsize"/>
					<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="vTileHack"/>
			<style>
				<height value="100%"/>
				<marginTop value="2px"/>
				<marginBottom value="1px"/>
				<marginLeft value="-1px"/>
				<flow value="vtile"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="shipInteractionsList; 'ShipInteractionsTooltipRow'; {_childrenLength: shipInteractionsList.length, _marginLeft: '3px'}"/>
		</block>
		<block>
			<bind name="visible" value="vTileWidth &gt; 318"/>
			<style>
				<left value="320px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'height'; heightTooltipPanel - 4"/>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="vTileWidth &gt; 643"/>
			<style>
				<left value="640px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'height'; heightTooltipPanel - 4"/>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowValue">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'hitTest'; hint ? true : false"/>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; hint ? {_text: hint} : null"/>
			<bind name="watch" value="'renderer'; 	type == SC.Result_screen.FORMAT.TIME 		? 'BattleStatsDetailedReportRowTimeValue' :
									type == SC.Result_screen.FORMAT.PERIOD 		? 'BattleStatsDetailedReportRowPeriodValue' :
									type == SC.Result_screen.FORMAT.DISTANCE 	? 'BattleStatsDetailedReportRowDistanceValue' :
									type == SC.Result_screen.FORMAT.BOLD 		? 'BattleStatsDetailedReportRowBoldValue' :
									type == SC.Result_screen.FORMAT.FLOAT 		? 'BattleStatsDetailedReportRowFloatValue' :
									type == SC.Result_screen.FORMAT.INTEGER 	? 'BattleStatsDetailedReportRowIntegerValue' :
									type == SC.Result_screen.FORMAT.NO_VALUE 	? 'EmptyItem'
																				: 'BattleStatsDetailedReportRowDefaultValue'"/>
			<bind name="instance" value="renderer; {_value: value, _fontColorClass: _fontColorClass, _fontSizeClass: _fontSizeClass}"/>
		</block>
		<block type="text">
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="(($index &gt; 0) &amp;&amp; (type != 'no_value') ? '/' : '')"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowTimeValue">
		<bind name="timeFormat" value="_value; 'hh:mm  dd.MM.yyyy'; 'formattedTime'; true"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="formattedTime"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowPeriodValue">
		<bind name="timeFormat" value="_value; 'mm:ss'; 'formattedTime'; false"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="formattedTime"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowDistanceValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, 2)+' '+tr('IDS_KILOMETER')"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowBoldValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="class" value="'$Bold'"/>
			<bind name="text" value="format(_value, -1)"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowDefaultValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, -1)"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowFloatValue">
		<bind name="watch" value="'pickedPowerupsCount';	math.floor(_value) - _value &lt; 0 ? format(_value, 1) : format(_value, 0)"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="pickedPowerupsCount"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowIntegerValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, 0)"/>
		</block>
	</block>
	<block className="PBSTeamKillerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
			<hitTest value="false"/>
		</style>
		<bind name="watch" value="'abuseStatus';_entity.battleResultsEntry.values[2].value"/>
		<bind name="firstEntityDH" value="'battleResultEntity'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'abuseReasons'; ['battleResultEntity.dataComponent.evDataChanged']; battleResultEntity.dataComponent.data['personal']['player']['abuse_components']"/>
		<block className="AbuseStatusProfileTooltip" type="ublock">
			<bind name="build!" value="	{	_abuseStatusPBS: abuseStatus,
							_abuseReasonsPBS: abuseReasons,
							_battlesToCleanPBS: _entity.battleResultsEntry.values[1].value
						}"/>
		</block>
	</block>

	<!-- results_screen_detailed_report_carousel -->
	<block className="BattleStatsInteractionsCarousel">
		<style>
			<width value="100%"/>
			<height value="124px"/>
		</style>
		<bind name="var" value="{itemWidth: 218}"/>
		<bind name="watch" value="'isScrollNeeded'; _PBSWidth &lt; ((	_shipsInteractionsEntity.battleResultsEntry.children.length +
													_buildingInteractionsEntity.battleResultsEntry.children.length) * itemWidth)"/>
		<bind name="child" value="isScrollNeeded; {	_repeatCollectionShips: _shipsInteractionsEntity.battleResultsEntry.children,
									_repeatCollectionBuildings: _buildingInteractionsEntity.battleResultsEntry.children,
									_interactionsEntity: _interactionsEntity, _itemWidth: itemWidth,
									_wheelScrollSpeed: itemWidth}; 'PBSCarouselNoScroll'; 'PBSCarouselScroll'"/>
	</block>
	<block className="PBSCarouselScroll">
		<styleClass value="$Fullsize"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<width value="18px"/>
				<height value="100%"/>
				<left value="-10px"/>
			</style>
			<block className="button_slide_left" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="enabled" value="RDCarouselCanScrollLeft"/>
				<bind name="event" value="'click'; scrollLeftByOneUnit"/>
			</block>
		</block>
		<block>
			<style>
				<marginRight value="18px"/>
				<marginLeft value="18px"/>
				<flow value="horizontal"/>
				<width value="100%"/>
				<height value="100%"/>
				<overflow value="scroll"/>
				<scrollArea value="ModernScrollAreaHorizontal"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
				<itemWidth value="218"/>
				<itemHeight value="124"/>
			</style>
			<bind name="style" value="'itemWidth'; _itemWidth"/>
			<bind name="style" value="'wheelScrollSpeed'; _wheelScrollSpeed"/>
			<bind name="controller" value="'lesta.unbound.controls.UbCarouselController'"/>
			<bind name="scrollController" value="'RDCarousel'; 0; 1"/>
			<bind name="repeat" value="_repeatCollectionShips; 'BattleResultsInteractionShipItem'; {_itemWidth: _itemWidth}"/>
			<bind name="repeat" value="_repeatCollectionBuildings; 'BattleResultsInteractionBuildingItem'; {_itemWidth: _itemWidth}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<width value="18px"/>
				<height value="100%"/>
				<right value="-10px"/>
			</style>
			<block className="button_slide_right" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="name" value="'buttonCarouselRight'"/>
				<bind name="enabled" value="RDCarouselCanScrollRight"/>
				<bind name="event" value="'click'; scrollRightByOneUnit"/>
			</block>
		</block>
	</block>
	<block className="PBSCarouselNoScroll">
		<style>
			<flow value="horizontal"/>
			<marginLeft value="-5px"/>
		</style>
		<bind name="repeat" value="_repeatCollectionShips; 'BattleResultsInteractionShipItem'; {_itemWidth: _itemWidth}"/>
		<bind name="repeat" value="_repeatCollectionBuildings; 'BattleResultsInteractionBuildingItem'; {_itemWidth: _itemWidth}"/>
	</block>
	<block className="BattleResultsInteractionBuildingItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'paramsId'; entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'name'; entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'suppressionCount'; entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'buildingType'; entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'causedDamage'; entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'totalHits'; entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'isKilledByMe'; entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'isAlive'; entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'planesKilled'; entity.battleResultsEntry.values[8].value"/>
		<style>
			<height value="124px"/>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
		</style>
		<bind name="style" value="'width'; ((_itemWidth - 10) + 'px')"/>
		<block className="pbs_slot_bg" type="native">
			<bind name="tooltip" value="'BattleResultsShipInteractionsTooltip'; {_list: entity.battleResultsEntry.children}"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="watch" value="'groundIconName'; !isAlive || (suppressionCount &gt; 0) ? (buildingType + '_dead') : buildingType"/>
			<block className="icons_team_result_ground_objects" type="native">
				<bind name="gotoAndStop!" value="groundIconName"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-3px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'BattleResultsBuildingIconWithTitle'; {_name: name, _buildingType: buildingType, _isAlive: isAlive, _suppressionCount: suppressionCount}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="8px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; buildingType == 'Complex' ?	{_text: 'IDS_BATTLE_STATS_FORT_BUILDING_SUPPRESSIONS_HINT'} :
																					{_text: 'IDS_BATTLE_STATS_WATCHTOWER_BUILDING_SUPPRESSIONS_HINT'}"/>
					<bind name="visible" value="suppressionCount &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="7px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'suppression'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="suppressionCount"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_YOU_DESTROYED_THIS_BUILDING'}"/>
					<bind name="visible" value="isKilledByMe"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="6px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'building_kill'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_AIRBASE_PLANES_HINT'}"/>
					<bind name="visible" value="planesKilled &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="3px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'plane'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-2px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="planesKilled"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_BATTLE_STATS_' + toUpperCase(buildingType) + '_BUILDING_DAMAGE_HINT')}"/>
					<bind name="visible" value="causedDamage &gt; 0 || totalHits &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="2px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'damage'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="format(causedDamage, -1)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleResultsInteractionShipItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'playerName'; entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isEnemy'; !(entity.battleResultsEntry.values[2].value)"/>
		<bind name="watch" value="'isKilled'; !(entity.battleResultsEntry.values[3].value)"/>
		<bind name="watch" value="'isKilledByMe'; entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'planesKilled'; entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'causedDamage'; entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'totalHits'; entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'isBot'; entity.battleResultsEntry.values[9].value"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; entity.battleResultsEntry.values[0].value; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<height value="108px"/>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
		</style>
		<bind name="style" value="'width'; ((_itemWidth - 10) + 'px')"/>
		<block className="pbs_slot_bg" type="native">
			<bind name="tooltip" value="'BattleResultsShipInteractionsTooltip'; {_list: entity.battleResultsEntry.children}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="gotoAndStop!" value="(isEnemy ? 'enemy' : 'ally')"/>
		</block>
		<block>
			<style>
				<marginTop value="14px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'BattleResultsShipTitleWithIconAndLevel'; {_shipID : entity.battleResultsEntry.values[0].value, _isEnemy: isEnemy, _isKilled: isKilled}"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<style>
					<width value="180px"/>
					<textAlign value="center"/>
					<leading value="-5"/>
				</style>
				<bind name="style" value="'noTranslate'; !isBot"/>
				<bind name="class" value="	isKilled	? '$FontColorAlmostBlack'
										: '$None'"/>
				<bind name="class" value="isKilled ? '$FontDropShadowWhite' : '$None'"/>
				<bind name="text" value="playerName"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="14px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_KILL_HINT'}"/>
					<bind name="visible" value="isKilledByMe"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="5px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'kill'"/>
						<bind name="alpha" value="0.7"/>
					</block>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_PLANE_HINT'}"/>
					<bind name="visible" value="planesKilled &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="3px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'plane'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-2px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="planesKilled"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_DAMAGE_HINT'}"/>
					<bind name="visible" value="causedDamage &gt; 0 || totalHits &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="4px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'damage'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="format(causedDamage, -1)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleResultsShipInteractionsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxHeight'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36))"/>
		<bind name="style" value="'height'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36))+'px'"/>
		<style>
			<hitTest value="false"/>
		</style>
		<block>
			<style>
				<width value="318px"/>
				<height value="100px"/>
			</style>
			<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {width: vTileWidth + 4, height: vTileHeight + 10}; {width: vTileWidth + 4, height: vTileHeight + 10}"/>
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
			<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
			<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
			<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
			<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
					<styleClass value="$Fullsize"/>
					<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="vTileHack"/>
			<style>
				<height value="100%"/>
				<marginTop value="2px"/>
				<marginBottom value="1px"/>
				<marginLeft value="-1px"/>
				<flow value="vtile"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="_list; 'ShipInteractionsTooltipRow'; {_childrenLength: _list.length, _marginLeft: '3px'}"/>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight - 50))"/>
			<style>
				<left value="320px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
				<style>
					<height value="300px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight*2 - 50))"/>
			<style>
				<left value="640px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
				<style>
					<height value="300px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="318px"/>
		</style>
		<bind name="style" value="'marginLeft'; _marginLeft ? _marginLeft : '0px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginTop'; (entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLAYER) &amp;&amp; ($index == 0) ? '-5px' : '0px'"/>
			<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.BUILDING_TOOLTIP_HEADER 	? 'ShipInteractionsBuildingTooltipHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOOLTIP_HEADER 			? 'ShipInteractionsTooltipHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER 					? 'ShipInteractionsHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBHEADER 					? 'ShipInteractionsSubHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE 						? 'ShipInteractionsLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE 					? 'ShipInteractionsSubLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LIST 						? 'BattleStatsDetailedReportList' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.EMPTY_LINE 				? 'ShipInteractionsTooltipEmptyLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLAYER 					? 'ShipInteractionsPlayer' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOOLTIP_LINE 				? 'ShipInteractionsTooltipLine'
																														: 'EmptyItem'"/>
			<bind name="instance" value="renderer; {_entity: entity}"/>
		</block>
	</block>
	<block className="ShipInteractionsBuildingTooltipHeader">
		<bind name="watch" value="'buildingType'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'name'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'suppressionCount'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isAlive'; _entity.battleResultsEntry.values[3].value"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<backgroundColor value="0x12ffffff"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="6px"/>
				<marginTop value="5px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="instance" value="'BattleResultsBuildingIconWithTitle'; {_name: name, _buildingType: buildingType, _isAlive: isAlive, _suppressionCount: suppressionCount}"/>
		</block>
		<block>
			<style>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 285"/>
				<bind name="text" value="'IDS_BATTLE_STATS_BUILDING_DAMAGE_NOT_FOR_STATS'"/>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipHeader">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'shipId'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'playerName'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isPlayerAlly'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isPlayerSelf'; _entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'isPlayerInMyDivision'; false"/>
		<bind name="watch" value="'isPlayerTk'; _entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'killerShipId'; _entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'killerName'; _entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'isKillerAlly'; _entity.battleResultsEntry.values[8].value"/>
		<bind name="watch" value="'isKillerSelf'; _entity.battleResultsEntry.values[9].value"/>
		<bind name="watch" value="'isKillerInMyDivision'; _entity.battleResultsEntry.values[10].value"/>
		<bind name="watch" value="'isKillerTk'; _entity.battleResultsEntry.values[11].value"/>
		<bind name="watch" value="'death_reason_id'; _entity.battleResultsEntry.values[12].value"/>
		<bind name="watch" value="'isBot'; _entity.battleResultsEntry.values[13].value"/>
		<bind name="watch" value="'isKillerBot'; _entity.battleResultsEntry.values[14].value"/>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="5px"/>
				<marginTop value="5px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: shipId,
													_name: playerName,
													_isEnemy: !(isPlayerAlly),
													_fontSizeClass: '$FontSizeHeader6',
													_isTeamKiller: isPlayerTk,
													_isSelf: isPlayerSelf,
													_isInMyDivision: isPlayerInMyDivision,
													_isBot: isBot}"/>
			</block>
			<block type="text">
				<bind name="visible" value="(death_reason_id !=  0)"/>
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="tr('IDS_BATTLE_STATS_DAMAGED_BY_' + death_reason_id)"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="instance" value="'PBSPlayerWithShip'; killerShipId	? {	_shipId: killerShipId,
																	_name: killerName,
																	_isEnemy: !(isKillerAlly),
																	_fontSizeClass: '$FontSizeDefault',
																	_isTeamKiller: isKillerTk,
																	_isSelf: isKillerSelf,
																	_isInMyDivision: isKillerInMyDivision,
																	_isBot: isKillerBot}
																: null"/>
			</block>
		</block>
	</block>
	<block className="PBSPlayerWithShip">
		<bind name="style" value="'width'; _noWidth ? 'auto' : '100%'"/>
		<bind name="style" value="'flow'; _noWidth ? 'horizontal' : 'htile'"/>
		<bind name="watch" value="'nameFontColorClass';	_isEnemy 													? '$FontColorEnemy' :
										_isTeamKiller												? '$FontColorTeamkiller' :
										_isInMyDivision &amp;&amp; !_isSelf									? '$FontColorGolden'
																									: '$FontColorWhite'"/>
		<bind name="watch" value="'shipFontColorClass';	_isEnemy 						? '$FontColorEnemy' :
										_isInMyDivision &amp;&amp; !_isSelf		? '$FontColorGolden'
																		: '$FontColorWhite'"/>
		<bind name="watch" value="'iconColorTransform';	_isEnemy 						? {redOffset:-13,greenOffset:-168,blueOffset:-170} :
										_isInMyDivision &amp;&amp; !_isSelf		? {redOffset:0,greenOffset:-38,blueOffset:-153}
																		: {}"/>
		<bind name="watch" value="'playerName'; _isBot ? tr(_name) : _name"/>
		<block>
			<bind name="style" value="'width'; _noWidth ? 'auto' : '100%f'"/>
			<block type="text">
				<styleClass value="$TextHeaderWhite"/>
				<bind name="style" value="'width'; _noWidth ? 'auto' : '100%f'"/>
				<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
				<bind name="class" value="nameFontColorClass"/>
				<bind name="class" value="_fontSizeClass"/>
				<bind name="text" value="playerName + ' '"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="ShipMasteryIcon" type="ublock">
			<bind name="visible" value="_masteryRank &gt; 0"/>
			<style>
				<marginTop value="2px"/>
				<marginRight value="4px"/>
			</style>
			<bind name="build!" value="{_rank: _masteryRank }"/>
		</block>
		<block>
			<bind name="style" value="'marginTop';	_fontSizeClass == '$FontSizeDefault'	? '-3px' :
									_fontSizeClass == '$FontSizeLarge'		? '-2px' :
									_fontSizeClass == '$FontSizeHeader6'	? '-1px'
																			: '-1px'"/>
			<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_shipID: _shipId, _isSelf: _isSelf, _isEnemy: _isEnemy, _isTeamKiller: _isTeamKiller, _fontColorClass: shipFontColorClass, _fontSizeClass: _fontSizeClass, _iconColorTransform: iconColorTransform}"/>
		</block>
	</block>
	<block className="ShipInteractionsHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/pbs/grey.png"/>
				<background9Slice value="[2]"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="1px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderWhiteBold', _valueSizeClass: '$FontSizeHeader6'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="ShipInteractionsSubHeader"/>
	<block className="ShipInteractionsTooltipLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x12ffffff"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="5px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderWhiteBold', _valueSizeClass: '$FontSizeHeader6'}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="7px"/>
					<marginTop value="2px"/>
				</style>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<style>
						<maxWidth value="290"/>
						<leading value="-1"/>
					</style>
					<bind name="text" value="_entity.battleResultsEntry.hint"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsPlayer">
		<bind name="watch" value="'shipId'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'playerName'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isPlayerAlly'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isPlayerSelf'; _entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'isPlayerInMyDivision'; _entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'isPlayerTk'; _entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'isBot'; _entity.battleResultsEntry.values[6].value"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginBottom value="-2px"/>
				<marginTop value="10px"/>
			</style>
			<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: shipId, _name: playerName, _isEnemy: !(isPlayerAlly), _fontSizeClass: '$FontSizeLarge',
												_isTeamKiller: isPlayerTk, _isSelf: isPlayerSelf, _isInMyDivision: isPlayerInMyDivision, _isBot: isBot}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="2px"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="ShipInteractionsLine">
		<style>
			<height value="26px"/>
			<width value="100%"/>
			<backgroundImage value="url:../service_kit/panel_backgrounds/pbs/alphablack.png"/>
			<background9Slice value="[2]"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="0px"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderBold', _valueSizeClass: '$FontSizeLarge'}"/>
		</block>
	</block>
	<block className="ShipInteractionsSubLine">
		<style>
			<width value="100%"/>
			<marginTop value="1px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault'}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginTop value="-3px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipEmptyLine">
		<style>
			<width value="100%"/>
			<height value="8px"/>
		</style>
	</block>
	<block className="BattleResultsShipTitleWithIconAndLevel">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<height value="20px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="27px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype, _isEnemy: _isEnemy, _isKilled: _isKilled, _isWhite: true}"/>
		</block>
		<block>
			<bind name="watch" value="'isShowLevelIcon'; shipInfo.levelIcon.length &gt; 0"/>
			<style>
				<height value="100%"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'marginRight'; isShowLevelIcon ? '-8px' : '-2px'"/>
			<bind name="style" value="'marginTop'; isShowLevelIcon ? '1px' : '0px'"/>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: isShowLevelIcon ? shipInfo.levelIcon + (_isKilled ? '_sunk' : '') : '',
											_colorTransform : iconColorTransform,
											_levelRome : shipInfo.levelRome,
											_fontClass : '$TextHeaderBold',
											_fontColorClass :	_isKilled		? '$FontColorAlmostBlack'
																				: '$None',
											_fontSizeClass : _isKilled ? '$FontDropShadowWhite' : '$None',
										}"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="	_isKilled	? '$FontColorAlmostBlack'
									: '$FontColorWhite'"/>
			<bind name="class" value="_isKilled ? '$FontDropShadowWhite' : '$None'"/>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="ShipTitleWithIconAndLevelPBS">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<style>
			<flow value="horizontal"/>
			<align value="left|middle"/>
		</style>
		<block>
			<style>
				<marginTop value="2px"/>
				<marginLeft value="-4px"/>
				<marginRight value="1px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype, _isEnemy: _isEnemy}"/>
		</block>
		<block>
			<style>
				<marginRight value="-5px"/>
			</style>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: shipInfo.levelIcon,
											_colorTransform : _iconColorTransform,
											_levelRome : shipInfo.levelRome,
											_fontClass : _isSelf ? '$TextHeaderWhiteBold' : '$TextHeaderWhite',
											_fontColorClass : _fontColorClass,
											_fontSizeClass : _fontSizeClass,
										}"/>
		</block>
		<block type="text">
			<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
			<styleClass value="$TextHeaderWhite"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="BattleResultsBuildingIconWithTitle">
		<style>
			<height value="20px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'buildingState'; _isAlive &amp;&amp; !_suppressionCount ? '_N' : '_D'"/>
		<block>
			<style>
				<width value="13px"/>
				<marginTop value="6px"/>
				<marginRight value="3px"/>
			</style>
			<block className="icon_ground_object" type="native">
				<bind name="gotoAndStop!" value="(_buildingType + buildingState)"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBold"/>
			<bind name="text" value="_name"/>
			<bind name="class" value="buildingState == '_D' ? '$FontColorAlmostBlack' : null"/>
			<bind name="class" value="buildingState == '_D' ? '$FontDropShadowWhite' : '$None'"/>
		</block>
	</block>

	<!-- results_screen_economics -->
	<block className="EconomicsSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'RealEconomicsSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealEconomicsSection">
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="firstEntityDH" value="'battleInfoEntity'; CC.battleInfo"/>
		<bind name="watch" value="'isReplayPlaying'; battleInfoEntity.battleInfo.isReplayPlaying"/>
		<bind name="watch" value="'isBuyPremButtonHided'; battleResultsDH.battleResultsStructured.isPremium || isReplayPlaying"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<height value="720:630,1080:738ah"/>
			<alpha value="0"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'BuyPremiumFromBattleResultElement'; isBuyPremButtonHided	? null
																					: {	_isHistoryPBS: _isHistoryPBS,
																						_battleWithPremium: battleResultsDH.battleResultsStructured.isPremium }"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<bind name="style" value="'alpha'; battleResultsDH.battleResultsStructured.isPremium ? 0.5 : 1"/>
				<style>
					<width value="1280:537,1920:709aw"/>
				</style>
				<bind name="instance" value="'BattleStatsEconomicsColumn'; {	list: battleResultsDH.battleResultsStructured.base_economics,
															_isPremium: false,
															_shipId: battleResultsDH.battleResultsStructured.shipId }"/>
			</block>
			<block>
				<bind name="style" value="'alpha'; battleResultsDH.battleResultsStructured.isPremium ? 1 : 0.5"/>
				<style>
					<marginLeft value="3px"/>
					<width value="1280:537,1920:709aw"/>
				</style>
				<bind name="instance" value="'BattleStatsEconomicsColumn'; {	list: battleResultsDH.battleResultsStructured.prem_economics,
															_isPremium: true,
															_shipId: battleResultsDH.battleResultsStructured.shipId }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="blurLayer"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x000000FF"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsEconomicsColumn">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="list; 'BattleStatsEconomicsRow'; { _isPremium: _isPremium, _shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER 			? 'BattleStatsEconomicsHeader' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBHEADER 			? 'BattleStatsEconomicsSubHeader' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE 				? 'BattleStatsEconomicsLine' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE 			? 'BattleStatsEconomicsSubLine' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.LIST 				? 'BattleStatsEconomicsList' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL				? 'BattleStatsEconomicsTotal' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.EXP_WITH_PROGRESS	? 'BattleStatsEconomicsExpWithProgress' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOOLTIP_LINE		? 'BattleStatsEconomicsTooltipLine' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.EMPTY_LINE 		? 'BattleStatsEconomicsEmptyLine'
																											: 'EmptyItem'"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginTop';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp; $index == 0	?	'3px' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp; $index &gt; 0	?	'0px'
																												:	'0px'"/>
		<bind name="style" value="'marginBottom';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp; (($index + 1) == _childrenLength)	? '9px'
																																			: '0px'"/>
		<bind name="instance" value="renderer; { _entity: entity, _isPremium: _isPremium, _shipId: _shipId }"/>
	</block>
	<block className="BattleStatsEconomicsEmptyLine">
		<style>
			<width value="100%"/>
			<height value="3px"/>
		</style>
	</block>
	<block className="BattleStatsEconomicsHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="30px"/>
				<background9Slice value="[2]"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginTop value="-2px"/>
				</style>
				<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
																_class: '$TextLargeHeaderBold',
																_isPremium: _isPremium,
																_shipId: _shipId }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow';	{	_childrenLength: _entity.battleResultsEntry.children.length,
																							_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsSubHeader">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'groupExpandedPref'; (userPrefs.PBSEconomicsExpand[_entity.battleResultsEntry.expandGroupName] == null) ? false : (userPrefs.PBSEconomicsExpand[_entity.battleResultsEntry.expandGroupName])"/>
		<bind name="action" value="'expandEconomicsGroup'; 'setUserPref'; { value: !(groupExpandedPref), name: 'PBSEconomicsExpand', subName: _entity.battleResultsEntry.expandGroupName }"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<bind name="tooltip" value="'DescriptionStatusLineTooltip'; _entity.battleResultsEntry.hint	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																								_statusText:  groupExpandedPref		? 'IDS_HINT_COLLAPSE_GROUP'
																																	: 'IDS_HINT_EXPAND_GROUP',
																								_descriptionText: _entity.battleResultsEntry.hint }
																						:	null"/>
			<bind name="instance" value="'BattleStatsExpandElement';	{	_entity: _entity,
														_expandGroupEvent: 'expandEconomicsGroup',
														_groupExpanded: groupExpandedPref,
														_stateOver: rollOver }"/>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.values[0].type  == 'warning_icon'"/>
			<style>
				<right value="260px"/>
				<position value="absolute"/>
				<marginTop value="2px"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_WARNING_ICON_HINT'}"/>
			<bind name="instance" value="'BattleStatsEconomicsRowWarningIcon';	_entity.battleResultsEntry.values[0].value == true	? {} : null"/>
		</block>
		<block>
			<bind name="fade" value="groupExpandedPref; 0.15; { scaleY: 0, ubScaleY: 0, alpha: 0 }; { scaleY: 1, ubScaleY: 1, alpha: 1 }; { scaleY: 0, ubScaleY: 0, alpha: 0 }; 2; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow';	{	_childrenLength: _entity.battleResultsEntry.children.length,
																							_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsTotal">
		<bind name="watch" value="'iconPath'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<style>
			<width value="100%"/>
			<height value="50px"/>
			<background9Slice value="[2]"/>
		</style>
		<bind name="style" value="'backgroundImage'; iconPath"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextLargeHeaderBold',
															_large: true,
															_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsExpandElement">
		<bind name="visible" value="_entity.battleResultsEntry.bgColor"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
			<background9Slice value="[2]"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<block className="button_expand" type="native">
			<bind name="visible" value="!(_entity.battleResultsEntry.hideExpand)"/>
			<style>
				<width value="100%"/>
				<marginTop value="3px"/>
				<marginLeft value="9px"/>
				<position value="absolute"/>
			</style>
			<params>
				<param name="toggle" value="true"/>
				<param name="soundSet" value="dropdown"/>
				<param name="focusable" value="false"/>
			</params>
			<bind name="selected" value="_groupExpanded"/>
			<bind name="dispatch" value="'click'; _expandGroupEvent; {}"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="18px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextHeaderWhiteBold',
															_medium: true,
															_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsTooltipLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginTop value="6px"/>
				<marginBottom value="-6px"/>
				<height value="26px"/>
				<width value="100%"/>
				<alpha value="0.95"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextHeaderBold',
															_shipId: _shipId }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; { _childrenLength: _entity.battleResultsEntry.children.length, _shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="20px"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextDefault' }"/>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<bottom value="1"/>
					<position value="absolute"/>
					<alpha value="0.5"/>
				</style>
				<block className="DottedLine">
					<style>
						<backgroundImage value="bitmap:dotted_line"/>
						<backgroundRepeatX value="true"/>
						<width value="100%"/>
						<height value="1px"/>
						<alpha value="0.5"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow' ; { _childrenLength: _entity.battleResultsEntry.children.length }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsSubLine">
		<style>
			<width value="100%"/>
			<height value="20px"/>
			<backgroundColor value="0x01FFFFFF"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.hint ? { _text: _entity.battleResultsEntry.hint } : null"/>
		<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
														_class: '$TextDefault',
														_shipId: _shipId }"/>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<bottom value="1"/>
				<position value="absolute"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsEconomicsList">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow' ;	{	_childrenLength: _entity.battleResultsEntry.children.length,
																						_shipId: _shipId }"/>
	</block>
	<block className="BattleStatsEconomicsExpWithProgress">
		<bind name="watch" value="'isCrewExpBlock'; _entity.battleResultsEntry.blockName == SC.Result_screen.BLOCKS.CREWEXP"/>
		<styleClass value="$InfoBlockIndent"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%f"/>
					<marginTop value="6px"/>
					<marginLeft value="3px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block>
					<style>
						<width value="100%f"/>
					</style>
					<block type="text">
						<style>
							<width value="100%f"/>
							<leading value="-4"/>
						</style>
						<styleClass value="$TextDefaultBold20NM"/>
						<bind name="text" value="_entity.battleResultsEntry.values[0].value"/>
					</block>
					<block>
						<bind name="visible" value="_entity.battleResultsEntry.values[7].value &gt; 0 &amp;&amp; (_entity.battleResultsEntry.values[7].type == 'skill_points')"/>
						<style>
							<marginLeft value="2px"/>
							<marginTop value="-8px"/>
							<backgroundColor value="0x01000000"/>
						</style>
						<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_FREE_SKILLPOINTS'}"/>
						<bind name="instance" value="'MarkerNewCounter'; _entity.battleResultsEntry.values[7].value != null	? { _newContentCounter: _entity.battleResultsEntry.values[7].value }
																											: null"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%f"/>
					</style>
					<bind name="visible" value="	isCrewExpBlock &amp;&amp;
								_entity.battleResultsEntry.values[5].value  &amp;&amp;
								(!_entity.battleResultsEntry.values[3].value || _entity.battleResultsEntry.values[6].value)"/>
					<block type="text">
						<style>
							<width value="100%f"/>
							<marginTop value="2px"/>
							<marginLeft value="-3px"/>
						</style>
						<styleClass value="$TextDefault"/>
						<default_text value="IDS_HIGHEST_RANK"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.values[3].value != 0"/>
			<style>
				<marginRight value="1px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_CREW_EXP_HINT'}"/>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="child" value="isCrewExpBlock ? _entity.battleResultsEntry.values[6].value == true ? 1 : 0
										: 0;
							{_entity: _entity}; 'ProgressBarYellow'; 'ProgressBarOrange'"/>
			</block>
			<block>
				<bind name="watch" value="'crewUnderAdaptation'; isCrewExpBlock &amp;&amp; _entity.battleResultsEntry.values[6].value == true"/>
				<style>
					<hitTest value="false"/>
					<marginTop value="-2px"/>
					<marginRight value="-3px"/>
					<right value="-2px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<marginTop value="-2px"/>
						<fontSize value="18"/>
					</style>
					<bind name="style" value="'textColor'; crewUnderAdaptation ? SC.Ui_styles.SERVICE_COLORS.ORANGE : SC.Ui_styles.SERVICE_COLORS.WHITE"/>
					<bind name="text" value="format(_entity.battleResultsEntry.values[2].value, 0)"/>
				</block>
				<block>
					<style>
						<alpha value="0.5"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<style>
							<marginLeft value="-4px"/>
						</style>
						<bind name="style" value="'textColor'; crewUnderAdaptation ? SC.Ui_styles.SERVICE_COLORS.ORANGE : SC.Ui_styles.SERVICE_COLORS.WHITE"/>
						<bind name="text" value="' / '	+ format(_entity.battleResultsEntry.values[3].value, 0)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowItem">
		<bind name="watch" value="'fontColorClass';	_entity.battleResultsEntry.color == SC.Result_screen.COLORS.PINK 	? '$FontColorTeamkiller' :
									_entity.battleResultsEntry.color == SC.Result_screen.COLORS.RED		? '$FontColorCompareNegative'
																										: '$None'"/>
		<bind name="tooltip" value="	(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.ECOBOOSTS)			? 'EcoboostPostBattleTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.SSE)					? 'PostBattleSSEQuestTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.REAMMUNITION)			? 'PostBattleReammunitionTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.RECAMO)				? 'PostBattleRecamoTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.REBOOST)				? 'PostBattleReboostTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.RESIGNAL)				? 'PostBattleResignalTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.WAFFENTRAGER_BOOSTER)	? 'WaffentragerBoosterTooltip'
																													: 'EmptyItem';
					{	_entity: _entity,
						_id: _entity.dataComponent.data.id,
						progressCurrent: 1,
						progressMax: 1,
						titleText: _entity.dataComponent.data.name,
						_arenaId: _entity.dataComponent.data.arenaId,
						_shipId: _shipId
					}"/>
		<styleClass value="$InfoBlockHorizontalIndent"/>
		<style>
			<height value="100%"/>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="style" value="'marginTop';	_medium	?	'-3px'	:
										_large	?	'1px'	: '0px'"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; 	_entity.battleResultsEntry.hint	&amp;&amp; 
												(_entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER || _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL) ? 
												{_text: _entity.battleResultsEntry.hint}: null"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<bind name="class" value="	(_entity.battleResultsEntry.color == 'black')	? '$FontColorAlmostBlack'
																				: _class"/>
					<bind name="class" value="	(_entity.battleResultsEntry.color == 'black')	? '$FontDropShadowWhite'
																				: '$None'"/>
					<bind name="class" value="fontColorClass"/>
					<bind name="text" value="_entity.battleResultsEntry.title"/>
				</block>
			</block>
			<block>
				<bind name="style" value="'marginTop';	_medium	? '-1px' : 
										_large	? '-3px' : '0px'"/>
				<styleClass value="$AlignRight"/>
				<bind name="repeat" value="_entity.battleResultsEntry.values; 'BattleStatsEconomicsRowValue';	{	_entity: _entity,
																									_fontStyleClass: _class,
																									_large: _large,
																									_medium: _medium,
																									_shipId: _shipId }; true"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<right value="3"/>
				<position value="absolute"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<bind name="tooltip" value="'SimpleStatusTooltip';  {_text: _isPremium ? 'IDS_WITH_PREM_HINT' : 'IDS_WITHOUT_PREM_DESC'}"/>
			<block type="text">
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="class" value="_isPremium ? '$FontColorGolden': '$None'"/>
				<bind name="text" value="_entity.battleResultsEntry.subtitle"/>
			</block>
		</block>
	</block>
	<block className="ProgressBarYellow">
		<block className="indicator_progress_bar_yellow" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="ProgressBarOrange">
		<block className="indicator_progress_bar_orange" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowSubtitle">
		<style>
			<right value="0px"/>
		</style>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="class" value="'$FontColorGolden'"/>
			<bind name="text" value="toUpperCase(tr(_subtitle))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowValue">
		<bind name="watch" value="'renderer'; 	type == SC.Result_screen.FORMAT.CREDITS 					? 'BattleStatsEconomicsRowCredits' :
								type == SC.Result_screen.FORMAT.GOLD 						? 'BattleStatsEconomicsRowGold' :
								type == SC.Result_screen.FORMAT.CREDITS_APPLIED 			? 'BattleStatsEconomicsRowCreditsApplied' :
								type == SC.Result_screen.FORMAT.CREDITS_APPLIED_SHOW_ZERO 	? 'BattleStatsEconomicsRowCreditsAppliedShowZero' :
								type == SC.Result_screen.FORMAT.GOLD_APPLIED 				? 'BattleStatsEconomicsRowGoldApplied' :
								type == SC.Result_screen.FORMAT.GOLD_RIGHT 					? 'BattleStatsEconomicsRowGoldRight' :
								type == SC.Result_screen.FORMAT.CREDITS_ZERO_HIDE 			? 'BattleStatsEconomicsRowCreditsHideZero' :
								type == SC.Result_screen.FORMAT.EXP 						? 'BattleStatsEconomicsRowExp' :
								type == SC.Result_screen.FORMAT.FREE_XP 					? 'BattleStatsEconomicsRowFreeXP' :
								type == SC.Result_screen.FORMAT.FREE_XP_RIGHT 				? 'BattleStatsEconomicsRowFreeXPRight' :
								type == SC.Result_screen.FORMAT.CREW_XP 					? 'BattleStatsEconomicsRowCrewXP' :
								type == SC.Result_screen.FORMAT.PERCENTS 					? 'BattleStatsEconomicsRowPercents' :
								type == SC.Result_screen.FORMAT.SKILL_POINTS 				? 'EmptyItem' :
								type == SC.Result_screen.FORMAT.SUBTITLE 					? 'BattleStatsEconomicsRowSubtitle' :
								type == SC.Result_screen.FORMAT.AOGAS 						? 'BattleStatsEconomicsRowAOGAS' :
								type == SC.Result_screen.FORMAT.TOOLTIP_PERCENTS 			? 'BattleStatsEconomicsRowTooltipPercents' :
								type == SC.Result_screen.FORMAT.ELITE_XP 					? 'BattleStatsEconomicsRowEliteXP' :
								type == SC.Result_screen.FORMAT.WARNING_ICON 				? 'EmptyItem' :
								type == SC.Result_screen.FORMAT.NO_VALUE 					? 'EmptyItem'
																							: 'BattleStatsDetailedEconomicsRowDefaultValue'"/>
		<bind name="instance" value="renderer; {	_value: value, _type: type, _fontStyleClass: _fontStyleClass, _large: _large, _medium: _medium, _entity: _entity, _shipId: _shipId }"/>
	</block>
	<block className="BattleStatsDetailedEconomicsRowDefaultValue">
		<block type="text">
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="_value"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowCredits">
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? {_text: 'IDS_BATTLE_STATS_TOTAL_CREDITS_COUNT_HINT'}: null"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsApplied">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
			<flow value="horizontal"/>
		</style>
		<bind name="visible" value="_value.value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsAppliedShowZero">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGold">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? {_text: 'IDS_BATTLE_STATS_TOTAL_GOLD_COUNT_HINT'} : null"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.GOLD},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGoldApplied">
		<bind name="visible" value="_value.value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
			<flow value="horizontal"/>
			<hitTest value="false"/>
		</style>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: SC.Common.CURRENCIES.GOLD},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGoldRight">
		<style>
			<position value="absolute"/>
			<right value="0"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != 0	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.GOLD},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsHideZero">
		<bind name="visible" value="_value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != 0	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowExp">
		<params>
			<param name="name" value="PureExp"/>
		</params>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? {_text: 'IDS_BATTLE_STATS_TOTAL_EXP_COUNT_HINT'}: null"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.XP},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowFreeXP">
		<bind name="tooltip" value="'PostBattleFreeExpTooltip'; { _entity: _entity, _shipId: _shipId }"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="visible" value="_value != 0"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.FREE_XP},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowFreeXPRight">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
		</style>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.FREE_XP},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCrewXP">
		<bind name="visible" value="_value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? { _text: 'IDS_BATTLE_STATS_TOTAL_CREW_EXP_COUNT_HINT' } : null"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'crewXP'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowAOGAS">
		<bind name="visible" value="_value"/>
		<style>
			<position value="absolute"/>
			<right value="270"/>
		</style>
		<bind name="tooltip" value="'AOGASPostBattleTooltip'; _value ? {_value: _value} : null"/>
		<block className="icon_warning_orange_big" type="native">
			<style>
				<marginTop value="5px"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowWarningIcon">
		<style>
			<alpha value="0.9"/>
		</style>
		<block className="icon_warning_orange_big" type="native"/>
	</block>
	<block className="BattleStatsEconomicsRowPercents">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="210"/>
			<hitTest value="false"/>
		</style>
		<block type="text">
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="((_value &gt; 0) 	? ('+' + (_value) + '%')
									: ((_value) + '%'))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowTooltipPercents">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="74"/>
		</style>
		<block type="text">
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="((_value &gt; 0) 	? ('+' + (_value) + '%')
									: ((_value) + '%'))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowEliteXP">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="tooltip" value="'PostBattleEliteExpTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? { _entity: _entity } : null"/>
		<bind name="instance" value="'PriceTag';_value != null	?	{	priceInfo:	{	finalPrice: _value,
																		currency: 'eliteXP' },
														_large: true }
												:	null"/>
	</block>
	<block className="IconWarningSmall">
		<block className="icon_warning_orange" type="native">
			<style>
				<marginTop value="5px"/>
			</style>
		</block>
	</block>
	<block className="BuyPremiumFromBattleResultElement">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isSyncedWithWallet'; ['resourceEntity.accountResource.evChangedIsSyncedWithWallet']; resourceEntity.accountResource.isSyncedWithWallet"/>
		<bind name="watchDH" value="'walletAvailable'; ['resourceEntity.accountResource.evChangedWalletStatus']; resourceEntity.accountResource.walletStatus"/>
		<bind name="watch" value="'isShowWalletWarning'; ((isSyncedWithWallet == false) || (walletAvailable == false))"/>
		<bind name="watchDH" value="'activePremiumType'; ['resourceEntity.accountResource.evActivePremiumTypeChanged']; resourceEntity.accountResource.activePremiumType"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; ['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isResultScreenTop'; (windowQueue[windowQueue.length - 1] == SC.Ui_windows.MODAL.RESULT_SCREEN) || (windowQueue[windowQueue.length - 1] == SC.Ui_windows.MODAL.RESULT_SCREEN_PORT)"/>
		<bind name="handleEventDH" value="'resourceEntity.accountResource.evActivePremiumTypeChanged'; 'evMKPremBoughtYet'"/>
		<bind name="catch" value="'evMKPremBoughtYet'; { mkPremBoughtYet: true }"/>
		<bind name="watch" value="'isShowPremiumPurchaseAnimation'; isResultScreenTop &amp;&amp; mkPremBoughtYet &amp;&amp; !isSwitchFinished"/>
		<bind name="changeDispatch" value="isShowPremiumPurchaseAnimation; 'evSwitchStart'; {}; 2; true"/>
		<bind name="dispatch" value="'evSwitchStart'; 'evSwitchFinished'; {}; 0; 1.15"/>
		<bind name="catch" value="'evSwitchFinished'; { isSwitchFinished: true }"/>
		<bind name="var" value="{mkPremBoughtYet: 	false,
				isSwitchFinished: 	false }"/>
		<bind name="watch" value="'isShowStatusLine'; isSwitchFinished || ((activePremiumType == SC.Common.PREMIUM_TYPE.WOWS) &amp;&amp; !mkPremBoughtYet)"/>
		<style>
			<width value="100%"/>
			<height value="24px"/>
		</style>
		<block>
			<bind name="transition" value="isShowPremiumPurchaseAnimation; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}; {alpha: 0, top: 10}; SC.Common.UB1_EASING_FUNCTIONS.LINEAR; 1"/>
			<style>
				<position value="absolute"/>
				<right value="-2px"/>
			</style>
			<block>
				<bind name="style" value="'hitTest'; isShowStatusLine || isShowWalletWarning ? false : true"/>
				<bind name="style" value="'alpha'; 	isShowStatusLine 	? 0 :
								isShowWalletWarning ? 0.5
													: 1"/>
				<bind name="instance" value="'ButtonBuyPremiumPBS'; { _isHistoryPBS: _isHistoryPBS }"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'WalletServiceStatus'; isShowWalletWarning &amp;&amp; !isShowStatusLine ? {} : null"/>
			</block>
		</block>
		<block>
			<bind name="watch" value="'topMarginStatusLine'; isShowPremiumPurchaseAnimation ? -10 : 0"/>
			<bind name="transition" value="isShowPremiumPurchaseAnimation; 0.15; {alpha: 0, top: topMarginStatusLine}; {alpha: 1, top: 0}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.LINEAR; 1"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'alpha'; isShowStatusLine ? 1 : 0"/>
			<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
										_text: 'IDS_BOUGHT_MK_PREMIUM_ACCOUNT',
										_textClass: '$TextDefault18NM',
										_leading: -3 }"/>
		</block>
	</block>
	<block className="WalletServiceStatus">
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<backgroundColor value="0x01000000"/>
			<align value="center|middle"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION, _text: 'IDS_SERVICE_IS_LIMITED'}"/>
		<block>
			<style>
				<height value="22px"/>
				<width value="22px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_status_attention.png'"/>
		</block>
	</block>
	<block className="ButtonBuyPremiumPBS">
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold'; ['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="primaryEntityDH" value="'premiumItemEntity'; CC.premiumItem; 'PREM_001_WOWS'"/>
		<bind name="watchDH" value="'smallestGoldPrice'; ['premiumItemEntity.premiumItem.evChangedGold']; premiumItemEntity.premiumItem.gold"/>
		<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
		<bind name="watch" value="'showModalWindowBuyPrem'; accountGold &gt;= smallestGoldPrice"/>
		<bind name="visible" value=" currentRegion != 'CN' || (currentRegion == 'CN' &amp;&amp; showModalWindowBuyPrem)"/>
		<bind name="watch" value="'requestBuyPremiumPBS';	_isHistoryPBS			?	showModalWindowBuyPrem	?	'buttonShowPremiumPeriods'
																								:	'openMetashop' :
											showModalWindowBuyPrem 	?	'buyPremiumBattleResult'
																	:	''"/>
		<bind name="watch" value="'requestParamsBuyPremiumPBS';	showModalWindowBuyPrem 	?	{ isFromPBS: true }
																		:	{	url: SC.Ui_windows.GUI_URL.BUY_GOLD_AND_PREMIUM_IN_GAME	}"/>
		<bind name="soundSet" value="'button_gold'"/>
		<bind name="request" value="'click'; requestBuyPremiumPBS; requestParamsBuyPremiumPBS"/>
		<bind name="action" value="'click'; requestBuyPremiumPBS ? null : 'navigateTo'; {route: _isHistoryPBS ? SC.Ui_windows.ROUTE.ARMORY : SC.Ui_windows.ROUTE.OVERLAY_BROWSER, data: {url: SC.Ui_windows.GUI_URL.BUY_GOLD_AND_PREMIUM_IN_GAME}}"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<bind name="tooltip" value="'BuyPremResultScreenButtonTooltip'; {}"/>
		<style>
			<height value="24px"/>
		</style>
		<block className="button_buy_mk_premium" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="class" value="'$FontColorGolden'"/>
			<style>
				<marginLeft value="16px"/>
				<marginTop value="6px"/>
				<marginRight value="16px"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_BUY_PREMIUM_ACCOUNT'))"/>
		</block>
	</block>

	<!-- results_screen_economics_tooltips -->
	<block className="PostBattleReammunitionTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<style>
						<top value="2px"/>
					</style>
					<styleClass value="$AlignRight"/>
					<bind name="instance" value="'PriceTag';	{ priceInfo: {	finalPrice: tempValueCredits.value,
															currency: 'credits' },
											  _medium: true }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleFreeExpTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="430px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<default_text value="IDS_CURRENCY_FREE_XP"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<leading value="-3"/>
				<width value="100%"/>
				<marginTop value="5px"/>
				<marginBottom value="4px"/>
			</style>
			<default_text value="IDS_FREE_XP_DESC"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; { _childrenLength: _entity.battleResultsEntry.children.length, _shipId: _shipId }"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="tr('IDS_EARNED') + tr('IDS_COLON')"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<bind name="instance" value="'PriceTag';	{	priceInfo:	{	finalPrice: _entity.battleResultsEntry.values[1].value,
																currency: _entity.battleResultsEntry.values[1].type },
												_medium: true }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleEliteExpTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<default_text value="IDS_ELITE_EXPERIENCE_C"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<leading value="-3"/>
				<width value="100%"/>
				<marginTop value="5px"/>
				<marginBottom value="10px"/>
			</style>
			<default_text value="IDS_ELITE_XP_DESC"/>
		</block>
	</block>
	<block className="EcoboostPostBattleTooltip">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watchDH" value="'attributes'; ['exteriorEntity.attributes.evChanged']; exteriorEntity.attributes"/>
		<bind name="primaryEntityDH" value="'ecoBoostEntity'; CC.ecoBoost; _id"/>
		<bind name="primaryEntityDH" value="'globalBoostModsEntity'; CC.globalboostPersistent; _arenaId"/>
		<bind name="watch" value="'attributesEntity'; _arenaId ? globalBoostModsEntity : ecoBoostEntity"/>
		<bind name="watchDH" value="'name'; []; ecoBoostEntity.ecoBoost.name"/>
		<bind name="watchDH" value="'type'; ['ecoBoostEntity.ecoBoost.evUpdated']; ecoBoostEntity.ecoBoost.type"/>
		<bind name="watchDH" value="'rarity'; []; ecoBoostEntity.ecoBoost.rarity"/>
		<bind name="watchDH" value="'attributesNegative';	['attributesEntity.attributes.evChanged'];		attributesEntity.attributes.negative"/>
		<bind name="watchDH" value="'attributesNeutral';		['attributesEntity.attributes.evChanged'];		attributesEntity.attributes.neutral"/>
		<bind name="watchDH" value="'attributesPositive';	['attributesEntity.attributes.evChanged'];		attributesEntity.attributes.positive"/>
		<bind name="watch" value="'headerText';	type == SC.Common.ECOBOOST_TYPES.COMMON		? 'IDS_' + toUpperCase(name) :
								type == SC.Common.ECOBOOST_TYPES.LINKABLE	? subst(_entity.battleResultsEntry.title, [], { shipName: toUpperCase(tr(shipInfo.nameIDS)) }) :
								type == SC.Common.ECOBOOST_TYPES.GLOBAL		? 'IDS_GLOBALBOOST_TITLE'
																			: 'IDS_CLANBOOST_TITLE'"/>
		<bind name="watch" value="'subheaderText'; type == SC.Common.ECOBOOST_TYPES.COMMON	? tr('IDS_ECONOMIC_BOOST_TYPE_EXPENDABLE_' + rarity)
																			: 'IDS_ECONOMIC_BOOST_TYPE_MULTIBOOST'"/>
		<style>
			<hitTest value="false"/>
			<width value="334px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText';	{	_imageWidth: 80,
																	_imageHeight: 80,
																	_headerText: headerText,
																	_subheaderText: subheaderText,
																	_headerIconType: 5,
																	_iconAmount: 0,
																	_data: { paramsId: name, type: type } }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemParamsModifiersList';	{	_attributesPositive: attributesPositive,
																_attributesNeutral: attributesNeutral,
																_attributesNegative: attributesNegative }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemPriceTagLine';	{	_title:		tr('IDS_EARNED') + tr('IDS_COLON'),
															_priceInfo:	{	finalPrice: _entity.battleResultsEntry.values[0].value,
																			currency: _entity.battleResultsEntry.values[0].type },
															_isPriceTagOnRight: true }"/>
			</block>
		</block>
	</block>
	<block className="PostBattleRecamoTooltip">
		<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'tempValueGold'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watchDH" value="'camoColorSchemes'; ['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.camoColorSchemes"/>
		<bind name="watch" value="'useRepaintedIcon'; camoColorSchemes.length &gt; 0"/>
		<bind name="watch" value="'headerText'; tr('IDS_' + toUpperCase(exteriorConfig.name))"/>
		<bind name="watch" value="'subheaderText'; 'IDS_EXTERIOR_TYPE_' + SC.Exteriors.EXTERIOR_TYPE.VALUE_TO_NAME[exteriorConfig.type]"/>
		<bind name="watch" value="'headerIconType'; useRepaintedIcon	? 2
													: 0"/>
		<bind name="watch" value="'imageUrl'; 'url:../exteriors/camouflages/' + exteriorConfig.name + '.png'"/>
		<bind name="watch" value="'failedToApply'; (tempValueCredits.value &amp;&amp; !tempValueCredits.applied) || (tempValueGold.value &amp;&amp; !tempValueGold.applied)"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: _entity.battleResultsEntry.title }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl:			imageUrl,
																_imageWidth:		60,
																_imageHeight:		60,
																_headerText:		headerText,
																_subheaderText:		subheaderText,
																_headerIconType:	headerIconType,
																_data:				{camouflageId: _id} }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="failedToApply"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; failedToApply	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																		_text: 'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT' }
																	: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemPriceTagLine'; {	_title:		'IDS_PRICE_Q',
														_priceInfo:	tempValueCredits.value != 0		? {	finalPrice:	tempValueCredits.value,
																										currency:	SC.Common.CURRENCIES.CREDITS }
																									: {	finalPrice:	tempValueGold.value,
																										currency:	SC.Common.CURRENCIES.GOLD },
														_isPriceTagOnRight: true }"/>
			</block>
		</block>
	</block>
	<block className="AOGASPostBattleTooltip">
		<style>
			<width value="330px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<styleClass value="$MouseDisable"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<style>
					<maxWidth value="260"/>
				</style>
				<default_text value="IDS_AOGAS_FACTOR"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<maxWidth value="260"/>
				</style>
				<bind name="text" value="subst('IDS_PL_TIME_SPENT_IN_GAME_MORE_THAN', [], {hours: _value.online}) "/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'InstructionWarning'; { _instructionText: 'IDS_AOGAS_FACTOR_HINT', _maxWidth: '190'}"/>
				</block>
				<block type="text">
					<style>
						<position value="absolute"/>
						<right value="0"/>
					</style>
					<styleClass value="$WarningTextOrange"/>
					<bind name="text" value="-(1-_value.factor) * 100 + '%'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="PostBattleReboostTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="watch" value="'itemsList'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'tempValueGold'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<flow value="htile"/>
					<align value="center"/>
					<marginTop value="3px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="itemsList; 'PBSEcoboostIcon'; {}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="	(tempValueCredits.value &amp;&amp; !tempValueCredits.applied) ||
						(tempValueGold.value &amp;&amp; !tempValueGold.applied)"/>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="instance" value="'StatusLine'; {	_text: 'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT',
											_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
											_width: '100%' }"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<block>
						<bind name="visible" value="(tempValueGold.value != 0)"/>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueGold.value,
																 currency: 'gold'}, _medium: true }"/>
					</block>
					<block>
						<bind name="visible" value="(tempValueCredits.value != 0)"/>
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
																 currency: 'credits'}, _medium: true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleResignalTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="watch" value="'itemsList'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<flow value="htile"/>
					<align value="center"/>
					<marginTop value="3px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="itemsList; 'PBSSignalIcon'; {}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="(tempValueCredits.value &amp;&amp; !tempValueCredits.applied)"/>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="instance" value="'StatusLine'; {	_text: 'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT',
											_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
											_width: '100%' }"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(tempValueCredits.value != 0)"/>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<block>
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
																 currency: 'credits'}, _medium: true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PBSEcoboostIcon">
		<style>
			<height value="80px"/>
			<width value="80px"/>
			<margin value="5px"/>
		</style>
		<bind name="primaryEntityDH" value="'ecoBoostEntity'; CC.ecoBoost; id"/>
		<bind name="watch" value="'name'; ecoBoostEntity.ecoBoost.name"/>
		<bind name="watch" value="'type'; ecoBoostEntity.ecoBoost.type"/>
		<bind name="instance" value="'EconomicBoostItemView';	{ _name: name, _type: type}"/>
	</block>
	<block className="PBSSignalIcon">
		<style>
			<width value="100%"/>
			<height value="60px"/>
			<width value="60px"/>
			<margin value="5px"/>
		</style>
		<bind name="primaryEntityDH" value="'signalEntity'; CC.signal; $value"/>
		<bind name="watch" value="'signalName'; signalEntity.signal.name"/>
		<bind name="watch" value="'headerIconPath'; 'url:../signal_flags/' + signalName + '.png'"/>
		<bind name="style" value="'backgroundImage'; headerIconPath"/>
	</block>
	<block className="BuyPremResultScreenButtonTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
														_text: 'IDS_PURCHASE_PREMIUM_WARNING_NEXT_BATTLE' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text: 'IDS_MOVE_TO_THE_PURCHASE_PREMIUM' }"/>
			</block>
		</block>
	</block>
	<block className="WaffentragerBoosterTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SimpleStatusTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_text: titleText ? titleText : '',
						_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT }"/>
		</block>
	</block>

	<!-- results_screen_personal_result -->
	<block className="PersonalResultSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="instance" value="'RealPersonalResultSection'; _data"/>
	</block>
	<block className="RealPersonalResultSection">
		<bind name="firstEntityDH" value="'player'; CC.accountSelf"/>
		<bind name="collectionDH" value="CC.sseCorePersistent; 'sseTasks'; 'byArenaId.' + game_data.arena_id"/>
		<bind name="firstEntityDH" value="'battleInfoEntity'; CC.battleInfo"/>
		<bind name="watch" value="'isReplayPlaying'; battleInfoEntity.battleInfo.isReplayPlaying"/>
		<bind name="primaryEntityDH" value="'playerShipMasteryEntity'; CC.shipMastery; personal.player.shipId"/>
		<bind name="primaryEntityDH" value="'killerShipMasteryEntity'; CC.shipMastery; personal.killer.shipId"/>
		<bind name="watch" value="'bonusTagsTasksList';				personal.bonus_tags ? personal.bonus_tags : null"/>
		<bind name="watch" value="'campaignTasksDoneList';			personal.campaignTasksResults.done ? personal.campaignTasksResults.done : null"/>
		<bind name="watch" value="'campaignTasksInProgressList';		personal.campaignTasksResults.inProgress ? personal.campaignTasksResults.inProgress : null"/>
		<bind name="watch" value="'strategicActionsTaskEntityId';	personal.strategicActions ? personal.strategicActions : null"/>
		<bind name="watch" value="'rvrTasksDoneList';				personal.arc_details.done ? personal.arc_details.done : null"/>
		<bind name="watch" value="'rvrTasksInProgressList';			personal.arc_details.inProgress ? personal.arc_details.inProgress : null"/>
		<bind name="watch" value="'shipAcesTasksList';				personal.shipAces ? personal.shipAces : null"/>
		<bind name="watch" value="'sseTasksDoneList';				personal.tasksCollectionName.done ? personal.tasksCollectionName.done : null"/>
		<bind name="watch" value="'sseTasksInProgressList';			personal.tasksCollectionName.inProgress ? personal.tasksCollectionName.inProgress : null"/>
		<bind name="entityDH" value="'strategicActionsTaskEntity'; strategicActionsTaskEntityId"/>
		<bind name="watch" value="'numRibbons';						personal.ribbons.length"/>
		<bind name="watch" value="'numBonusTags';					Number(personal.bonus_tags.length)"/>
		<bind name="watch" value="'numCampaignTasksDone';			Number(campaignTasksDoneList.length)"/>
		<bind name="watch" value="'numCampaignTasksInProgress';		Number(campaignTasksInProgressList.length)"/>
		<bind name="watch" value="'numCampaignTasks';				numCampaignTasksDone + numCampaignTasksInProgress"/>
		<bind name="watch" value="'numStrategicActionsTasksCount';	strategicActionsTaskEntity ? 1 : 0"/>
		<bind name="watch" value="'numRvrTasksDone';					Number(rvrTasksDoneList.length)"/>
		<bind name="watch" value="'numRvrTasksInProgress';			Number(rvrTasksInProgressList.length)"/>
		<bind name="watch" value="'numRvrTasks';						numRvrTasksDone + numRvrTasksInProgress"/>
		<bind name="watch" value="'numShipAcesTasks';				Number(shipAcesTasksList.length)"/>
		<bind name="watch" value="'numSseTasksDone';					Number(sseTasksDoneList.length)"/>
		<bind name="watch" value="'numSseTasksInProgress';			Number(sseTasksInProgressList.length)"/>
		<bind name="watch" value="'numSseTasks';						numSseTasksDone + numSseTasksInProgress"/>
		<bind name="watch" value="'abuseStatus';						personal.player['abuseStatus']"/>
		<bind name="watch" value="'delay'; 1.6"/>
		<bind name="watch" value="'achievementDelay'; 2.3"/>
		<bind name="watch" value="'ribbonsDelay';			achievementDelay + (personal.achievements.length * 0.15) + 0.2"/>
		<bind name="watch" value="'bonusTagDelay';			ribbonsDelay + numRibbons * 0.2"/>
		<bind name="watch" value="'campTaskDoneDelay';		bonusTagDelay + numBonusTags * 0.2"/>
		<bind name="watch" value="'strategicActionsDelay';	campTaskDoneDelay + numBonusTags * 0.2"/>
		<bind name="watch" value="'rvrTasksDoneDelay';		strategicActionsDelay + numStrategicActionsTasksCount * 0.2"/>
		<bind name="watch" value="'shipAcesTasksDoneDelay';	rvrTasksDoneDelay + numRvrTasksDone * 0.2"/>
		<bind name="watch" value="'sseTasksDoneDelay';		shipAcesTasksDoneDelay + numShipAcesTasks * 0.2"/>
		<bind name="watch" value="'campTaskInProgressDelay';	sseTasksDoneDelay + numSseTasksDone * 0.2"/>
		<bind name="watch" value="'rvrTasksInProgressDelay';	campTaskInProgressDelay + numCampaignTasksInProgress * 0.2"/>
		<bind name="watch" value="'sseTasksInProgressDelay';	rvrTasksInProgressDelay + numRvrTasksInProgress * 0.2"/>
		<bind name="watch" value="'isBattleChallenge'; game_data.game_mode == GameMode.BATTLE_CHALLENGES"/>
		<bind name="watch" value="'isWaffentrager'; game_data.game_mode == GameMode.WAFFENTRAGER"/>
		<bind name="watch" value="'wonPosition'; personal.wonPosition"/>
		<bind name="watch" value="'isFirstBattle'; game_data.scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'successRoundsCount'; personal.trialsInfo.successRoundsCount"/>
		<bind name="watch" value="'totalRoundsCount'; personal.trialsInfo.totalRoundsCount"/>
		<bind name="watch" value="'isTrialsBattle'; successRoundsCount || totalRoundsCount"/>
		<bind name="watch" value="'resultTextColor';		game_data.battle_result == SC.Battle.BATTLE_RESULT.WON_POSITION &amp;&amp; wonPosition == 1 ? '$FontColorWinBattle' :
										isIn(game_data.battle_result, SC.Battle.BATTLE_RESULT.SUCCESS_RESULTS)				? '$FontColorWinBattle' :
										isIn(game_data.battle_result, SC.Battle.BATTLE_RESULT.FAIL_RESULTS)					? '$FontColorLoseBattle'
																															: '$FontColorGrey'"/>
		<bind name="watch" value="'battleTypeTitle'; game_data.battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE	? tr(toUpperCase('IDS_' + game_data.scenario)) :
									isTrialsBattle												? tr(toUpperCase('IDS_' + game_data.scenario) + '_NAME') :
									isFirstBattle												? tr('IDS_FIRST_BATTLE_NAME')
																								: tr(toUpperCase('IDS_' + game_data.battleType))"/>
		<bind name="watch" value="'scenarioOrMapName'; game_data.game_mode == SC.Battle.GAME_MODE.PVE	? tr(toUpperCase('IDS_' + game_data.scenario) + '_NAME')
																						: tr(game_data.map_name)"/>
		<bind name="watch" value="'teamLadderPlace'; personal.teamLadderPlace"/>
		<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
		<bind name="var" value="{animationOn: true}"/>
		<bind name="dispatch" value="'addedToStage'; animationOn ? 'allAnimationsStarted' : ''; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.1"/>
		<bind name="catch" value="'allAnimationsStarted'; {animationOn: false}"/>
		<bind name="watch" value="'isTrainingBattle'; game_data.battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isTournamentBattle'; game_data.battleType == SC.Common.BATTLE_TYPES.TOURNAMENT_BATTLE"/>
		<bind name="watch" value="'isCustomBattle'; isTrainingBattle || isTournamentBattle"/>
		<bind name="watch" value="'isEarnedBlockVisible'; (!isFirstBattle || personal.achievements.length &gt; 0) &amp;&amp; !isCustomBattle"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="entityDH" value="'causedDamageEntity'; battleResultsDH.battleResultsStructured.causedDamage[0]"/>
		<bind name="watch" value="'isPositiveBattleEfficiency'; numRibbons &gt; 0 || causedDamageEntity.battleResultsEntry.values[0].value &gt; 0"/>
		<bind name="watch" value="'hasResistanceRecognitionReward'; personal.hasResistanceReward &gt; 0"/>
		<bind name="var" value="{hideAddedExp: false}"/>
		<bind name="var" value="{playResistanceIconSound: false}"/>
		<bind name="dispatch" value="'addedToStage'; hasResistanceRecognitionReward ? 'evHideAddedExp' : ''; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; delay + 1.95"/>
		<bind name="dispatch" value="'addedToStage'; hasResistanceRecognitionReward ? 'evShowFinalExp' : ''; {expValue: credits_experience.result.gui_main_exp, freeExpValue: credits_experience.result.gui_main_free_exp}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; delay + 1.95"/>
		<bind name="dispatch" value="'addedToStage'; hasResistanceRecognitionReward ? 'evPlayResistanceIconSound' : ''; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; delay + 0.8"/>
		<bind name="catch" value="'evHideAddedExp'; {hideAddedExp: true}"/>
		<bind name="catch" value="'evPlayResistanceIconSound'; {playResistanceIconSound: true}"/>
		<bind name="watch" value="'expValue'; credits_experience.result.gui_exp_without_resistance"/>
		<bind name="watch" value="'freeExpValue'; credits_experience.result.gui_free_exp_without_resistance"/>
		<bind name="catch" value="'evShowFinalExp'"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.2; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<maxWidth value="1280"/>
				<width value="80sw"/>
				<height value="70sh"/>
				<top value="43%"/>
				<marginTop value="-50%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<style>
							<height value="80px"/>
						</style>
						<block type="text">
							<bind name="name" value="'BattleResultText'"/>
							<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
							<bind name="class" value="resultTextColor"/>
							<styleClass value="$TextDefaultBold76NM"/>
							<style>
								<marginBottom value="16px"/>
							</style>
							<bind name="text" value="isTrialsBattle	? subst('IDS_TRIAL_ROUND_RESULTS', {'_bestRound': successRoundsCount, '_totalRounds': totalRoundsCount})
													: resultText"/>
						</block>
						<block>
							<bind name="appear" value="'addedToStage'; animationOn ? 0.3 : 0; animationOn ? delay + 0.8 : 0; {alpha: 0, scaleX: 2, scaleY: 2, left: -40, top: -40}; {alpha: 1, scaleX: 1, scaleY: 1, left: 0, top: 0}"/>
							<bind name="visible" value="hasResistanceRecognitionReward"/>
							<style>
								<marginLeft value="10px"/>
								<marginTop value="-10px"/>
							</style>
							<block className="ResistanceRecognitionRewardAnimatedIcon" type="ublock">
								<bind name="build!" value="{_playSound: playResistanceIconSound}"/>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block type="text">
						<bind name="name" value="'BattleResultSubText'"/>
						<bind name="visible" value="!isBattleChallenge"/>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.1 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefaultBold26NM"/>
						<styleClass value="$FontColorGrey"/>
						<style>
							<marginBottom value="8px"/>
						</style>
						<bind name="text" value="subst(commentText, {'place': teamLadderPlace})"/>
					</block>
					<block>
						<bind name="visible" value="!isBattleChallenge"/>
						<style>
							<marginLeft value="-2px"/>
						</style>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.2 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<block>
							<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: personal.player.shipId,
																_name: personal.player.name,
																_isEnemy: false,
																_fontSizeClass: '$FontSizeLarge',
																_isTeamKiller: abuseStatus ? abuseStatus != SC.Common.ABUSE_STATUS.NORMAL : false,
																_isSelf: true,
																_isInMyDivision: false,
																_noWidth: true,
																_masteryRank: personal.player.masteryRank }"/>
						</block>
						<block>
							<bind name="instance" value="'PersonalResultKiller'; personal.killed	&amp;&amp; !isWaffentrager	? { _killer: personal.killer,
																										death_reason_id: personal.death_reason_id,
																										_relation: personal.killer.relation,
																										_killerIsBuilding: personal.killerIsBuilding,
																										_killerBuildingName: personal.killerBuilding.ids_name,
																										_killerBuildingType: personal.killerBuilding.type,
																										_gameMode: game_data.game_mode,
																										_masteryRank: personal.killer.masteryRank }
																									: null"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.25 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$AlignRight"/>
						<style>
							<top value="23px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefault18NM"/>
							<styleClass value="$FontColorGrey"/>
							<bind name="name" value="'BattleResultMapAndType'"/>
							<style>
								<right value="0"/>
								<marginBottom value="8px"/>
							</style>
							<bind name="text" value="isBattleChallenge ? battleTypeTitle : subst('IDS_PERSONAL_RESULT_SCENARIO_OR_MAP_NAME_DASH_BATTLETYPE', [], {scenarioOrMapName: scenarioOrMapName, battleTypeTitle: battleTypeTitle})"/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault18NM"/>
							<styleClass value="$FontColorGrey"/>
							<style>
								<right value="0"/>
							</style>
							<bind name="text" value="subst('IDS_BATTLE_START_TIME', [], {battleDate: game_data.battle_date})"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="isEarnedBlockVisible"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<block type="text">
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.3 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<style>
							<marginBottom value="16px"/>
						</style>
						<styleClass value="$TextDefaultBold26NM"/>
						<styleClass value="$FontColorGrey"/>
						<default_text value="IDS_BATTLE_STATS_TAKEN_TILL_BATTLE"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.6 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<block type="text">
							<bind name="visible" value="personal.isEconomicallyPunished"/>
							<style>
								<marginBottom value="16px"/>
							</style>
							<styleClass value="$TextDefault18NM"/>
							<bind name="class" value="abuseStatus == SC.Common.ABUSE_STATUS.NORMAL ? '$FontColorOrange' : '$FontColorTeamkiller'"/>
							<bind name="text" value="'IDS_TEAMSHOOTER_PENALTY'"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<block>
							<bind name="visible" value="!personal.isEconomicallyPunished"/>
							<block>
								<style>
									<align value="middle"/>
								</style>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.4 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
								<block type="text">
									<styleClass value="$TextDefaultBold50NM"/>
									<bind name="class" value="'$DropShadowDisabler'"/>
									<style>
										<alpha value="0.9"/>
										<letterSpacing value="-2"/>
									</style>
									<bind name="name" value="'BattleResultCreditsGain'"/>
									<bind name="text" value="format(credits_experience.result.gui_main_credits, -1)"/>
								</block>
								<block>
									<style>
										<marginLeft value="4px"/>
										<marginBottom value="-10px"/>
									</style>
									<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.CREDITS, _extraLarge: true }"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.5 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
								<style>
									<marginLeft value="16px"/>
									<align value="middle"/>
								</style>
								<block>
									<block className="NumberChangeAnimated" type="ublock">
										<bind name="build!" value="{_triggerValue: expValue}"/>
									</block>
									<block>
										<bind name="appear" value="'addedToStage'; animationOn ? 0.3 : 0; animationOn ? delay + 1.65 : 0; {alpha: 1, top: 0}; {alpha: 0, top: 30}"/>
										<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 1.1 : 0; {alpha: 0, top: 0}; {alpha: 1, top: 0}"/>
										<bind name="visible" value="!hideAddedExp &amp;&amp; hasResistanceRecognitionReward"/>
										<style>
											<position value="absolute"/>
											<top value="-30px"/>
											<right value="0px"/>
										</style>
										<block type="text">
											<styleClass value="$TextDefaultBold30NM"/>
											<bind name="class" value="'$DropShadowDisabler'"/>
											<style>
												<alpha value="0.9"/>
												<letterSpacing value="-2"/>
											</style>
											<bind name="text" value="format('+' + credits_experience.result.gui_exp_resistance, -1)"/>
										</block>
									</block>
								</block>
								<block>
									<style>
										<marginLeft value="4px"/>
										<marginBottom value="-10px"/>
									</style>
									<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.XP, _extraLarge: true }"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="primaryEntityDH" value="'featureEntity_5'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[5]"/>
								<bind name="watchDH" value="'feature_5'; ['featureEntity_5.accountFeature.evStateChanged']; featureEntity_5.accountFeature.state"/>
								<bind name="watch" value="'featureState'; feature_5"/>
								<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 5}"/>
								<bind name="visible" value="feature_5 != 'locked'"/>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.6 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
								<style>
									<marginLeft value="16px"/>
									<align value="middle"/>
								</style>
								<block>
									<block className="NumberChangeAnimated" type="ublock">
										<bind name="build!" value="{_triggerValue: freeExpValue, _textColor: 0xFFCCFF99}"/>
									</block>
									<block>
										<bind name="appear" value="'addedToStage'; animationOn ? 0.3 : 0; animationOn ? delay + 1.65 : 0; {alpha: 1, top: 0}; {alpha: 0, top: 30}"/>
										<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 1.1 : 0; {alpha: 0, top: 0}; {alpha: 1, top: 0}"/>
										<bind name="visible" value="!hideAddedExp &amp;&amp; hasResistanceRecognitionReward &amp;&amp; credits_experience.result.gui_free_exp_resistance &gt; 0"/>
										<style>
											<position value="absolute"/>
											<top value="-30px"/>
											<right value="0px"/>
										</style>
										<block type="text">
											<styleClass value="$TextDefaultBold30NM"/>
											<bind name="class" value="'$DropShadowDisabler'"/>
											<style>
												<letterSpacing value="-2"/>
											</style>
											<bind name="style" value="'textColor'; 0xFFCCFF99"/>
											<bind name="text" value="format('+' + credits_experience.result.gui_free_exp_resistance, -1)"/>
										</block>
									</block>
								</block>
								<block>
									<style>
										<marginLeft value="4px"/>
										<marginBottom value="-10px"/>
									</style>
									<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.FREE_XP, _extraLarge: true }"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="personal.achievements"/>
							<bind name="name" value="'BattleResultAchievements'"/>
							<bind name="style" value="'marginTop'; personal.isEconomicallyPunished ? '16px' : '-8px'"/>
							<bind name="style" value="'marginBottom'; personal.isEconomicallyPunished ? '24px' : '-24px'"/>
							<bind name="style" value="'marginLeft'; personal.isEconomicallyPunished ? '0px' : '16px'"/>
							<bind name="repeat" value="personal.achievements; 'AchievementAppearAnimation'; {_delay: achievementDelay,
																							_animationOn: animationOn}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="visible" value="!isBattleChallenge"/>
					<style>
						<marginTop value="32px"/>
						<width value="100%"/>
					</style>
					<block type="text">
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? ribbonsDelay-0.1 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefaultBold26NM"/>
						<styleClass value="$FontColorGrey"/>
						<style>
							<marginBottom value="16px"/>
						</style>
						<default_text value="IDS_BATTLE_EFFICIENCY"/>
					</block>
					<block type="text">
						<bind name="visible" value="!isPositiveBattleEfficiency"/>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? ribbonsDelay : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefault18NM"/>
						<styleClass value="$FontColorOrange"/>
						<default_text value="IDS_YOU_DIDNT_SHOW_RESULTS"/>
					</block>
					<block>
						<bind name="visible" value="isPositiveBattleEfficiency"/>
						<style>
							<width value="100%"/>
						</style>
						<block>
							<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
							<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
							<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
							<style>
								<flow value="htile"/>
								<width value="100%"/>
								<margin value="-4px"/>
							</style>
							<block>
								<style>
									<margin value="4px"/>
								</style>
								<block>
									<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_RIBBON_TOTAL_DAMAGE'}"/>
									<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? ribbonsDelay + 0.15 : 0; {top: 10, alpha: 0}; {top: 0, alpha: 1}"/>
									<style>
										<marginTop value="6px"/>
										<align value="center"/>
									</style>
									<block type="text">
										<style>
											<minWidth value="141"/>
											<alpha value="0.9"/>
											<letterSpacing value="-2"/>
											<marginBottom value="10px"/>
											<textAlign value="center"/>
										</style>
										<styleClass value="$TextDefaultBold50NM"/>
										<bind name="class" value="'$DropShadowDisabler'"/>
										<bind name="text" value="format(causedDamageEntity.battleResultsEntry.values[0].value, -1)"/>
									</block>
									<block type="text">
										<styleClass value="$TextDefaultNM"/>
										<bind name="class" value="'$FontColorGrey'"/>
										<bind name="text" value="'IDS_TOTAL_DAMAGE'"/>
									</block>
								</block>
							</block>
							<bind name="repeat" value="personal.ribbons; 'RibbonItem'; {	_delay: ribbonsDelay + 0.30,
																		_animationOn: animationOn}"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="(numSseTasks || numCampaignTasks || numBonusTags || numRvrTasks || numShipAcesTasks || numStrategicActionsTasksCount) &amp;&amp; !isReplayPlaying"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<block type="text">
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? bonusTagDelay-0.05 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefaultBold26NM"/>
						<styleClass value="$FontColorGrey"/>
						<style>
							<marginBottom value="16px"/>
						</style>
						<default_text value="IDS_TASKS"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? bonusTagDelay : 0; {alpha: 0}; {alpha: 1}"/>
						<block>
							<bind name="appear" value="'addedToStage'; animationOn ? 0.01 : 0; animationOn ? bonusTagDelay : 0; {alpha: 0, scaleY: 0}; {alpha: 1, scaleY: 1} "/>
							<styleClass value="$FullsizeAbsolute"/>
							<block>
								<bind name="repeat" value="bonusTagsTasksList; 'PostBattleBonusTagItem'; {	_delay: bonusTagDelay,
																							_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="campaignTasksDoneList; 'PostBattleCampaignTasksItem'; {	_delay: campTaskDoneDelay,
																									_campaignTasksTotal: numCampaignTasksDone,
																									_battleTypePlayed: game_data.battleType,
																									_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="instance" value="'PostBattleStrategicAction'; strategicActionsTaskEntity	? {	_id: strategicActionsTaskEntityId,
																										_delay: strategicActionsDelay,
																										_animationOn: animationOn}
																									: null"/>
							</block>
							<block>
								<bind name="repeat" value="rvrTasksDoneList ; 'PostBattleRvrTask'; {	_delay: rvrTasksDoneDelay,
																					_rvrTasksTotal: numRvrTasksDone,
																					_bonusTagsTotal: numBonusTags,
																					_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="shipAcesTasksList; 'PostBattleShipAcesTask'; {	_delay: shipAcesTasksDoneDelay,
																							_animationOn: animationOn }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="sseTasksDoneList; 'PostBattleSseTask'; {	_delay: sseTasksDoneDelay,
																					_animationOn: animationOn }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="campaignTasksInProgressList; 'PostBattleCampaignTasksItem'; { _delay: campTaskInProgressDelay,
																										_campaignTasksTotal: numCampaignTasksInProgress,
																										_battleTypePlayed: game_data.battleType,
																										_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="rvrTasksInProgressList; 'PostBattleRvrTask'; {	_delay: rvrTasksInProgressDelay,
																							_rvrTasksTotal: numRvrTasksInProgress,
																							_bonusTagsTotal: numBonusTags,
																							_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="sseTasksInProgressList; 'PostBattleSseTask'; {	_delay: sseTasksInProgressDelay,
																							_animationOn: animationOn }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? sseTasksInProgressDelay + 1.3 : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																	_text: 'IDS_HINT_SSE_SHOW_POSTBATTLE_TASK_DETAILS' }"/>
								<style>
									<marginLeft value="16"/>
									<marginTop value="16px"/>
								</style>
								<bind name="instance" value="'DefaultButton';	sseTasks.length	?	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																						_width: '192px',
																						_label: subst('IDS_SUBST_PL_SSE_POSTBATTLE_TASKS_TOTAL', [], {taskCount: sseTasks.length}, sseTasks.length),
																						_request: 'showPostBattleSSE',
																						_requestParams: { tasksCollectionName: 'byArenaId.' + game_data.arena_id },
																						_enabled: true,
																						_name: 'all_tasks'}
																				: null"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="PostBattleShipAcesTask">
		<bind name="entityDH" value="'ssePostBattleEntity'; $value"/>
		<bind name="watch" value="'sseId'; ssePostBattleEntity.id"/>
		<bind name="watch" value="'taskConditions'; ssePostBattleEntity.sseTask.conditions"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions[0]"/>
		<bind name="watch" value="'taskDescriptionData'; sseConditionEntity.sseConditions.taskDescriptionData"/>
		<bind name="tooltip" value="'PostBattleShipAcesTaskTooltip'; {	_sseId: sseId,
														_taskDesk: taskDescriptionData.ids }"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<marginTop value="8px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<width value="48px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'RewardCategory'; { _rewardCategory: ssePostBattleEntity.sseTask.rewardCategory,
		 									_isReceived: true }"/>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="12px"/>
				<marginTop value="-12px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<bind name="text" value="ssePostBattleEntity.sseTask.name"/>
			</block>
		</block>
	</block>
	<block className="PostBattleShipAcesTaskTooltip">
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'stepsNumber';		[''];	sseEntity.shipAcesPersistent.stepsNumber"/>
		<bind name="watchDH" value="'shipId';			[''];	sseEntity.shipAcesPersistent.shipId"/>
		<bind name="watchDH" value="'shipAcesType';		[''];	sseEntity.shipAcesPersistent.shipAcesType"/>
		<bind name="watchDH" value="'sseTaskComponent';	['sseEntity.sseTask.evChanged'];	sseEntity.sseTask"/>
		<bind name="entityDH" value="'ssePostBattleEntity'; _sseId"/>
		<bind name="watch" value="'taskConditions'; ssePostBattleEntity.sseTask.conditions"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions[0]"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['ownShipEntity.upgradableShipInfo.evUpdate']; ownShipEntity.upgradableShipInfo"/>
		<bind name="watchDH" value="'dockShipNation';	['ownShipEntity.ship.evUpdate']; ownShipEntity.ship.nation"/>
		<bind name="watchDH" value="'dockShipType';		['ownShipEntity.ship.evUpdate']; ownShipEntity.ship.subtype"/>
		<bind name="var" value="{tooltipHeaderIDS:	shipAcesType == SC.Common.SHIP_ACES_TYPE.SHIP_TYPE	? 'IDS_' + dockShipType :
									shipAcesType == SC.Common.SHIP_ACES_TYPE.NATION		? 'IDS_' + dockShipNation
																						: 'IDS_' + dockShipNation + '_' + dockShipType}"/>
		<bind name="watchDH" value="'isPVEModifierApplied'; ['']; sseConditionEntity.sseConditions.pveModifierApplied"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: tooltipHeaderIDS }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';  {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
														_text: 'IDS_SSE_STATUS_COMPLETED'	}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isPVEModifierApplied"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isPVEModifierApplied	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
																			_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}
																		: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; {	_descriptionText: _taskDesk }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK, _text: 'IDS_TOOLTIP_REWARD_TAKEN' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; { _rewards: sseTaskComponent.rewards }"/>
			</block>
		</block>
	</block>
	<block className="PostBattleSseTask">
		<bind name="entityDH" value="'ssePostBattleEntity'; $value"/>
		<bind name="watch" value="'sseId'; ssePostBattleEntity.id"/>
		<bind name="watchDH" value="'isClaimed';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isClaimed"/>
		<bind name="watchDH" value="'isDone';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isDone"/>
		<bind name="watch" value="'isFailed';		ssePostBattleEntity.sseCorePersistent.isFailed"/>
		<bind name="watch" value="'taskConditions';	ssePostBattleEntity.sseTask.conditions"/>
		<bind name="watch" value="'isEpic'; !!ssePostBattleEntity.sseEpic"/>
		<bind name="watch" value="'isChain'; !!ssePostBattleEntity.sseChain"/>
		<bind name="watch" value="'isSseOpenEnded'; !!ssePostBattleEntity.sseOpenEnded"/>
		<bind name="watch" value="'isDailyTask'; ssePostBattleEntity.sseRefresh.isDaily"/>
		<bind name="watch" value="'isOrTask'; taskConditions.length &gt; 1"/>
		<bind name="watch" value="'isManualRewardClaim';	ssePostBattleEntity.sseChain.claimRewards ||
										ssePostBattleEntity.sseEpic.claimRewards ||
										ssePostBattleEntity.sseTask.claimRewards"/>
		<bind name="watch" value="'isClaimable'; isManualRewardClaim &amp;&amp; isDone &amp;&amp; !isClaimed"/>
		<bind name="watch" value="'epicTasksToComplete';	ssePostBattleEntity.sseEpic.tasksToComplete"/>
		<bind name="watch" value="'epicBattleProgress';	ssePostBattleEntity.sseEpic.battleProgress"/>
		<bind name="watch" value="'chainBattleProgress';	ssePostBattleEntity.sseChain.battleProgress"/>
		<bind name="watch" value="'progressCurrent';		ssePostBattleEntity.progress.value"/>
		<bind name="watch" value="'progressMax';			ssePostBattleEntity.progress.max"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions[0]"/>
		<bind name="watch" value="'taskDescriptionData'; sseConditionEntity.sseConditions.taskDescriptionData"/>
		<bind name="watch" value="'sseProgressCurrent';	(isEpic || isChain)	? progressCurrent :
										currentProgress		? currentProgress
															: taskDescriptionData.currentProgress"/>
		<bind name="watch" value="'sseProgressMax';	isEpic		? epicTasksToComplete :
									isChain		? progressMax :
									maxProgress	? maxProgress
												: taskDescriptionData.maxProgress"/>
		<bind name="watch" value="'sseProgressBattle';	isEpic	? epicBattleProgress :
										isChain	? chainBattleProgress
												: taskDescriptionData.battleProgress"/>
		<bind name="watch" value="'progressBeforeBattle'; (sseProgressCurrent - sseProgressBattle) / sseProgressMax"/>
		<bind name="watch" value="'progressAfterBattle'; sseProgressBattle / sseProgressMax"/>
		<bind name="watch" value="'sseStatusIconType';	isDone						? SC.Ui_styles.UNIFIED_STATUS.CHECK :
										isFailed					? SC.Ui_styles.UNIFIED_STATUS.NEGATIVE :
										!daysLeft &amp;&amp; !isDailyTask	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																	: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="watch" value="'sseStopTimestamp'; ssePostBattleEntity.sseCorePersistent.stop"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeft'; sseStopTimestamp - serverTime"/>
		<bind name="watch" value="'daysLeft'; math.floor(timeLeft / 86400)"/>
		<bind name="watch" value="'sseName'; isEpic	? ssePostBattleEntity.sseEpic.name :
							isChain	? ssePostBattleEntity.sseChain.name
									: ssePostBattleEntity.sseTask.name"/>
		<bind name="watch" value="'sseTaskDescription';	sseName.length				? sseName :
										isEpic || isChain			? subst('IDS_PL_SSE_COMPLETE_TASKS', [], {count: maxTasks}, maxTasks) :
										taskDescriptionData.ids.length	? taskDescriptionData.ids
																	: 'IDS_TASK'"/>
		<bind name="watch" value="'_name'; 'sse_task_' + ssePostBattleEntity.sseCorePersistent.id + (isDone ? '_done' : '')"/>
		<bind name="tooltip" value="'PostBattleSseTaskTooltip'; { _sseId: sseId }"/>
		<bind name="request" value="'click'; isClaimable ? 'showSseClaimWindow' : ''; { sseId: sseId }"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<marginTop value="8px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	isClaimable &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							isClaimable &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<block>
			<style>
				<width value="48px"/>
				<hitTest value="false"/>
			</style>
			<block className="SseRewardCategory" type="ublock">
				<bind name="build!" value="{	_sseEntityId: sseId }"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="12px"/>
				<marginTop value="-12px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<bind name="name" value="_name"/>
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<bind name="style" value="'alpha'; isDone ? 1 : 0.9"/>
				<bind name="text" value="sseTaskDescription"/>
			</block>
			<block>
				<bind name="visible" value="!isDone &amp;&amp; !isSseOpenEnded"/>
				<style>
					<width value="120px"/>
					<marginTop value="8px"/>
				</style>
				<bind name="instance" value="'DoubleProgressBar'; isDone ? null : {	_progress1: progressBeforeBattle,
																	_progress2: progressAfterBattle }"/>
			</block>
			<block type="text">
				<bind name="visible" value="!isDone &amp;&amp; isSseOpenEnded"/>
				<styleClass value="$TextDefaultBoldNM"/>
				<style>
					<width value="120px"/>
					<marginTop value="8px"/>
				</style>
				<bind name="text" value="'+' + format(taskDescriptionData.battleProgress)"/>
			</block>
		</block>
	</block>
	<block className="PostBattleSseTaskTooltip">
		<bind name="collectionDH" value="CC.sseCorePersistent; 'sseTasks'; 'byArenaId.' + game_data.arena_id"/>
		<bind name="entityDH" value="'ssePostBattleEntity'; _sseId"/>
		<bind name="watchDH" value="'isClaimed';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isClaimed"/>
		<bind name="watchDH" value="'isDone';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isDone"/>
		<bind name="watchDH" value="'doneConditionSetIndex';	[]; ssePostBattleEntity.sseCorePersistent.doneConditionSetIndex"/>
		<bind name="watch" value="'isFailed'; false"/>
		<bind name="watch" value="'taskConditions'; ssePostBattleEntity.sseTask.conditions"/>
		<bind name="watch" value="'isCompleted'; isDone || isFailed || isExpired"/>
		<bind name="watch" value="'isTask'; !(isEpic || isChain)"/>
		<bind name="watch" value="'epicBattleProgress';	ssePostBattleEntity.sseEpic.battleProgress"/>
		<bind name="watch" value="'chainBattleProgress';	ssePostBattleEntity.sseChain.battleProgress"/>
		<bind name="entityDH" value="'sseConditionEntity';	!isTask ? null :
											!isDone ? sseConditions[0]
													: sseConditions[doneConditionSetIndex]"/>
		<bind name="watch" value="'battleTypes'; sseConditionEntity.sseConditions.battleTypes"/>
		<bind name="watch" value="'selectedFilters'; sseConditionEntity.shipListRestrictions.selectedFilters"/>
		<bind name="watch" value="'conditionCategory'; sseConditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'taskDescriptionData'; sseConditionEntity.sseConditions.taskDescriptionData"/>
		<bind name="watch" value="'sseConditions'; isTask ? taskConditions : 1"/>
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'sseEpicComponent';			['sseEntity.sseEpic.evChanged'];	sseEntity.sseEpic"/>
		<bind name="watchDH" value="'sseChainComponent';			['sseEntity.sseChain.evChanged'];	sseEntity.sseChain"/>
		<bind name="watchDH" value="'sseTaskComponent';			['sseEntity.sseTask.evChanged'];	sseEntity.sseTask"/>
		<bind name="watchDH" value="'sseMaxProgress';			['sseEntity.progress.evChanged'];	sseEntity.progress.max"/>
		<bind name="watchDH" value="'taskConditions'; 			['sseEntity.sseTask.evChanged'];	sseEntity.sseTask.conditions"/>
		<bind name="watchDH" value="'chainId';					['sseEntity.sseTask.evChanged'];	sseEntity.sseTask.chainId"/>
		<bind name="watchDH" value="'progressMax';				['sseEntity.progress.evChanged'];	sseEntity.progress.max"/>
		<bind name="watchDH" value="'epicTasksToComplete';		['sseEntity.sseEpic.evChanged'];	sseEntity.sseEpic.tasksToComplete"/>
		<bind name="watchDH" value="'refreshTime';				['sseEntity.sseRefresh.evChanged'];	sseEntity.sseRefresh.refreshTime"/>
		<bind name="watchDH" value="'globalSsePersonalProgress';	['sseEntity.sseGlobal.evChanged'];	sseEntity.sseGlobal.personalProgress"/>
		<bind name="watchDH" value="'progressFreezeAt';			['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.freezeAt"/>
		<bind name="watchDH" value="'resultsPublicationAt';		['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.resultsAt"/>
		<bind name="watchDH" value="'isProgressFrozen'; 			['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.isFrozen"/>
		<bind name="watchDH" value="'isRewarded';				['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.isRewarded"/>
		<bind name="watch" value="'sseName'; isEpic	? sseEpicComponent.name :
							isChain	? sseChainComponent.name
									: sseTaskComponent.name"/>
		<bind name="watch" value="'isGlobalSse'; !!sseEntity.sseGlobal"/>
		<bind name="watch" value="'isSseOpenEnded'; !!sseEntity.sseOpenEnded"/>
		<bind name="watch" value="'isEpic'; !!sseEpicComponent"/>
		<bind name="watch" value="'isChain'; !!sseChainComponent"/>
		<bind name="watch" value="'isChainParent'; !!sseChainComponent"/>
		<bind name="watch" value="'maxTasks'; isEpic ? epicTasksToComplete : sseMaxProgress"/>
		<bind name="watch" value="'isOrTask'; taskConditions.length &gt; 1"/>
		<bind name="watch" value="'isWeeklyTask'; sseEntity.sseRefresh.weekly"/>
		<bind name="watch" value="'isDailyTask'; sseEntity.sseRefresh.isDaily &amp;&amp; !isWeeklyTask"/>
		<bind name="watch" value="'isRepeatableTask'; !isEpic &amp;&amp; !isChainParent &amp;&amp; (progressMax &gt; 1 || progressMax == 0)"/>
		<bind name="watch" value="'isAggregator'; conditionCategory == SC.Sse.SSE_CONDITION_CATEGORY.COMPLETE_TASK"/>
		<bind name="watch" value="'isManualRewardClaim';	sseChainComponent.claimRewards ||
										sseEpicComponent.claimRewards ||
										sseTaskComponent.claimRewards"/>
		<bind name="watch" value="'isClaimable'; isManualRewardClaim &amp;&amp; !isClaimed &amp;&amp; !_isSseTokenReward"/>
		<bind name="watch" value="'sseTag'; !!ssePostBattleEntity.sseCorePersistent ? ssePostBattleEntity.sseCorePersistent.tag : sseEntity.sseCore.tag"/>
		<bind name="primaryEntityDH" value="'customTagEntity'; CC.sseTag; sseTag"/>
		<bind name="watch" value="'customTagName'; customTagEntity.sseTag.name"/>
		<bind name="watch" value="'isCustomTag'; customTagEntity.sseTag.isCustom == true"/>
		<bind name="watch" value="'iconType';	isEpic				? 'epic' :
								isAggregator		? 'aggregator' :
								isChainParent		? 'chain' :
								isRepeatableTask	? 'task_repeatable' :
								isOrTask			? 'task_or'
													: 'task'"/>
		<bind name="watch" value="'rewards'; isEpic	? sseEpicComponent.rewards :
							isChain	? sseChainComponent.rewards
									: sseTaskComponent.rewards"/>
		<bind name="watch" value="'hasRewards'; rewards.length &gt; 0"/>
		<bind name="watch" value="'sseImageUrl'; 'url:../sse/type_icons/sse_type_' + iconType + '_24.png'"/>
		<bind name="watch" value="'sseHeaderText';	sseName.length		? sseName :
									isEpic || isChain	? subst('IDS_PL_SSE_COMPLETE_TASKS', [], {count: maxTasks}, maxTasks)
														: 'IDS_TASK'"/>
		<bind name="watch" value="'sseSubheaderText'; isCustomTag	? subst('IDS_SUBST_TAG_DESCRIPTION_CUSTOM', [], {eventName: customTagName})
													: 'IDS_SSE_TAG_DESCRIPTION_' + toUpperCase(sseTag)"/>
		<bind name="watch" value="'sseRewardTitle';	isClaimable							? 'IDS_SSE_STATUS_CLAIM_AVAILABLE_COLON' :
									isDone 								? 'IDS_TOOLTIP_REWARD_TAKEN' :
									(isEpic || isChain || isAggregator)	? 'IDS_SSE_FINAL_REWARD_COLON'
																		: 'IDS_SSE_TASK_REWARD_COLON'"/>
		<bind name="watch" value="'sseRewardTitleUnifiedStatus';	isClaimable	? SC.Ui_styles.UNIFIED_STATUS.DEFAULT :
												isDone		? SC.Ui_styles.UNIFIED_STATUS.CHECK :
												isFailed	? SC.Ui_styles.UNIFIED_STATUS.NEGATIVE
															: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'sseRewardTitleUnifiedStatus';	isManualRewardClaim	? SC.Ui_styles.UNIFIED_STATUS.DEFAULT :
												isDone				? SC.Ui_styles.UNIFIED_STATUS.CHECK :
												isFailed			? SC.Ui_styles.UNIFIED_STATUS.NEGATIVE
																	: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'headerUnifiedStatus';	isDone	? SC.Ui_styles.UNIFIED_STATUS.CHECK
												: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'unifiedStatusCompletionOpenEndedSse'; isRewarded ? SC.Ui_styles.UNIFIED_STATUS.CHECK : SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"/>
		<bind name="watch" value="'statusCompletionOpenEndedSse'; isRewarded ? 'IDS_SSE_STATUS_PORTAL_REWARDS_RECEIVED' : 'IDS_SSE_STATUS_FAILED'"/>
		<bind name="watch" value="'sseProgressBattle';	isEpic	? epicBattleProgress :
										isChain	? chainBattleProgress
												: taskDescriptionData.battleProgress"/>
		<bind name="watchDH" value="'isPVEModifierApplied'; ['']; sseConditionEntity.sseConditions.pveModifierApplied"/>
		<bind name="watch" value="'sseStopTimestamp'; isSseOpenEnded	? progressFreezeAt : sseEntity.sseCorePersistent.stop"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeft'; sseStopTimestamp - serverTime"/>
		<bind name="countdown" value="sseStopTimestamp; 'formattedLastDayLeft'; 'HH:mm:ss'"/>
		<bind name="watch" value="'daysLeft'; math.floor(timeLeft / 86400)"/>
		<bind name="watch" value="'isExpired'; timeLeft &lt; 0"/>
		<bind name="watch" value="'isResultPublished'; resultsPublicationAt &lt; serverTime"/>
		<bind name="watch" value="'isResultsCounting'; isProgressFrozen &amp;&amp; !isResultPublished"/>
		<bind name="countdown" value="refreshTime; 'timeTillNextDay'; 'hh:mm:ss'"/>
		<bind name="countdown" value="refreshTime; 'timeTillNextWeek'; 'HIGHEST'"/>
		<bind name="watch" value="'isRefreshStatus'; sseStopTimestamp &gt; refreshTime"/>
		<bind name="watch" value="'isWeeklyRefreshStatus'; isWeeklyTask &amp;&amp; isRefreshStatus"/>
		<bind name="watch" value="'timeLeftStatusText';
		subst(isDailyTask		? 'IDS_SUBST_SSE_DAILY_RESET_IN' :
		isWeeklyRefreshStatus	? 'IDS_SUBST_SSE_WEEKLY_RESET_IN' :
		daysLeft				? 'IDS_SUBST_PL_SSE_TIME_LEFT_DAYS'
								: 'IDS_SUBST_SSE_TIME_LEFT_LAST_DAY',
		[],
		{ timeLeft: isDailyTask				? timeTillNextDay :
					isWeeklyRefreshStatus	? timeTillNextWeek:
					daysLeft				? daysLeft
											: formattedLastDayLeft },
		daysLeft)
	"/>
		<bind name="watch" value="'sseUnifiedStatus'; isDailyTask || isWeeklyRefreshStatus || daysLeft	? SC.Ui_styles.UNIFIED_STATUS.DATE
																						: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION"/>
		<bind name="watch" value="'sseStatus';	isSseOpenEnded	?	isResultsCounting	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
																			_text: 'IDS_SSE_STATUS_PORTAL_RESULTS_COUNTING' }
																		: {	_unifiedStatus: unifiedStatusCompletionOpenEndedSse,
																			_text: statusCompletionOpenEndedSse } :
								isDone 			? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
													_text: 'IDS_SSE_STATUS_COMPLETED'	}
												: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
													_text: 'IDS_SSE_STATUS_FAILED'	}"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: sseHeaderText }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isCompleted	? sseStatus : null"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; !isCompleted	? {	_unifiedStatus: sseUnifiedStatus,
																	_text: timeLeftStatusText }
																: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isPVEModifierApplied"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isPVEModifierApplied	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
																			_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}
																		: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="var" value="{isFirstTaskDone: false}"/>
				<bind name="catch" value="'evTaskIsDone'; {isFirstTaskDone: true}"/>
				<bind name="repeat" value="sseConditions; 'PostBattleSseTaskConditionRepeater'; { _sseId: _sseId, _isFirstTaskDone: isFirstTaskDone}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isGlobalSse"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemProgressParamsElement'; isGlobalSse	? {	_text: 'IDS_SSE_GLOBAL_PERSONAL_PROGRESS_COLON',
																				_param_1: isDone || isChain ? null : sseProgressBattle,
																				_param_2: globalSsePersonalProgress }
																			: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="hasRewards"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; hasRewards ? {_unifiedStatus: sseRewardTitleUnifiedStatus, _text: sseRewardTitle } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="hasRewards"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; hasRewards ? { _rewards: rewards } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isClaimable"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	isClaimable ? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																	_text: 'IDS_SSE_CLAIM_REWARD' }
																: null"/>
			</block>
		</block>
	</block>
	<block className="PostBattleSseTaskConditionRepeater">
		<bind name="entityDH" value="'ssePostBattleEntity'; _sseId"/>
		<bind name="watch" value="'isDone'; ssePostBattleEntity.sseCorePersistent.isDone"/>
		<bind name="watch" value="'isFailed'; false"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions.length == 1 ? taskConditions[0] : -1"/>
		<bind name="watchDH" value="'battleTypes';		['sseConditionEntity.sseConditions.evConditionSetChanged']; sseConditionEntity.sseConditions.battleTypes"/>
		<bind name="watchDH" value="'selectedFilters';	['sseConditionEntity.shipListRestrictions.evUpdate']; sseConditionEntity.shipListRestrictions.selectedFilters"/>
		<bind name="watchDH" value="'conditionCategory';	['sseConditionEntity.sseConditions.evUpdate']; sseConditionEntity.sseConditions.conditionCategory"/>
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'taskConditions'; ['sseEntity.sseTask.evChanged']; sseEntity.sseTask.conditions"/>
		<bind name="watch" value="'isEpic'; !!sseEntity.sseEpic"/>
		<bind name="watch" value="'isAggregator'; conditionCategory == SC.Sse.SSE_CONDITION_CATEGORY.COMPLETE_TASK"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="$index &gt; 0 &amp;&amp; !isDone"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="[$value]; 'TooltipSystemSseProgressBarBlockRepeater'; { _sseId: _sseId, _index: $index, _isFirstTaskDone: _isFirstTaskDone, _isDone: isDone }"/>
		</block>
	</block>
	<block className="TooltipSystemSseProgressBarBlockRepeater">
		<bind name="entityDH" value="'sseConditionEntity'; $value"/>
		<bind name="watch" value="'taskDescriptionData'; sseConditionEntity.sseConditions.taskDescriptionData"/>
		<bind name="watch" value="'taskCategory'; sseConditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'achievements'; taskDescriptionData.achievements"/>
		<bind name="watch" value="'achievementType'; taskDescriptionData.achievementType"/>
		<bind name="watch" value="'achievementCount'; taskDescriptionData.maxProgress"/>
		<bind name="watch" value="'isAchievementTypeTask'; achievementType &amp;&amp; achievementType != 'battle_any'"/>
		<bind name="watch" value="'achievementTypeText'; isAchievementTypeTask ? subst('IDS_PL_SSE_CONDITIONS_ACHIEVEMENT_DESC_' + achievementType,[], {count: achievementCount}, achievementCount) : ''"/>
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'sseEpicComponent';		['sseEntity.sseEpic.evChanged'];		sseEntity.sseEpic"/>
		<bind name="watchDH" value="'sseChainComponent';		['sseEntity.sseChain.evChanged'];		sseEntity.sseChain"/>
		<bind name="watchDH" value="'sseOpenEndedComponent';	['sseEntity.sseOpenEnded.evChanged'];	sseEntity.sseOpenEnded"/>
		<bind name="watchDH" value="'epicTasksToComplete';	['sseEntity.sseEpic.evChanged'];		sseEntity.sseEpic.tasksToComplete"/>
		<bind name="watchDH" value="'epicBattleProgress';	['sseEntity.sseEpic.evChanged'];		sseEntity.sseEpic.battleProgress"/>
		<bind name="watchDH" value="'chainBattleProgress';	['sseEntity.sseChain.evChanged'];		sseEntity.sseChain.battleProgress"/>
		<bind name="watchDH" value="'progressCurrent';		['sseEntity.progress.evChanged'];		sseEntity.progress.value"/>
		<bind name="watchDH" value="'progressMax';			['sseEntity.progress.evChanged'];		sseEntity.progress.max"/>
		<bind name="watchDH" value="'taskConditionsNum'; 	['sseEntity.sseTask.evChanged'];		sseEntity.sseTask.conditions.length"/>
		<bind name="watch" value="'sseName'; isEpic	? sseEpicComponent.name :
							isChain	? sseChainComponent.name
									: sseTaskComponent.name"/>
		<bind name="watch" value="'isEpic'; !!sseEpicComponent"/>
		<bind name="watch" value="'isChain'; !!sseChainComponent"/>
		<bind name="watch" value="'isSseOpenEnded'; !!sseOpenEndedComponent"/>
		<bind name="watch" value="'maxTasks'; isEpic ? epicTasksToComplete : progressMax"/>
		<bind name="watch" value="'sseProgressCurrent';	(isEpic || isChain || isBinaryTask)	? progressCurrent :
										currentProgress		? currentProgress
															: taskDescriptionData.currentProgress"/>
		<bind name="watch" value="'sseProgressBattle';	isEpic	? epicBattleProgress :
										isChain	? chainBattleProgress
												: taskDescriptionData.battleProgress"/>
		<bind name="watch" value="'sseProgressMax';	isEpic		? epicTasksToComplete :
									isChain		? progressMax :
									maxProgress	? maxProgress
												: taskDescriptionData.maxProgress"/>
		<bind name="watch" value="'isTaskDone'; sseProgressCurrent &gt;= sseProgressMax"/>
		<bind name="watch" value="'isBinaryTask'; sseProgressMax == 1"/>
		<bind name="watch" value="'sseProgressValueIncrement'; sseProgressBattle &gt; sseProgressMax ? sseProgressMax : sseProgressBattle"/>
		<bind name="watch" value="'isProgressShown'; !isBinaryTask &amp;&amp; !isTaskDone"/>
		<bind name="watch" value="'sseTaskDescription';
				isSseOpenEnded		? 'IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + taskCategory + '_FULL' :
				isEpic || isChain	? subst('IDS_PL_SSE_COMPLETE_TASKS', [], {count: maxTasks}, maxTasks)
									: taskDescriptionData.ids"/>
		<bind name="changeDispatch" value="isTaskDone; isTaskDone &amp;&amp; _index == 0 ? 'evTaskIsDone': 'evFake'"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="visible" value="_index &gt; 0 &amp;&amp; !_isDone"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
			</style>
			<default_text value="IDS_OR"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="_index &gt; 0 &amp;&amp; !_isDone"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isDone 	? _index == 0 &amp;&amp; isTaskDone || _index &gt; 0 &amp;&amp; !_isFirstTaskDone	? true
																								: false
								: true"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginLeft value="-16px"/>
					<marginRight value="-16px"/>
					<marginTop value="-12px"/>
					<marginBottom value="-12px"/>
				</style>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginBottom'; isSseOpenEnded ? '12px' : '0'"/>
				<bind name="instance" value="'TooltipSystemDescriptionText';	isProgressShown &amp;&amp; !isSseOpenEnded &amp;&amp; !achievements	? null
																												: { _descriptionText: sseTaskDescription }"/>
			</block>
			<block type="text">
				<bind name="visible" value="isAchievementTypeTask"/>
				<styleClass value="$TextDefaultNM"/>
				<style>
					<width value="100%"/>
					<marginTop value="8px"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="achievementTypeText"/>
			</block>
			<block className="PostBattleSSETooltipAchievements" type="ublock">
				<bind name="visible" value="achievements.length &gt; 0"/>
				<style>
					<marginTop value="8px"/>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{_achievements: achievements}"/>
			</block>
			<bind name="instance" value="'TooltipSystemDoubleProgressBarBlock'; isProgressShown &amp;&amp; !isSseOpenEnded	? { _currentValue: sseProgressCurrent,
																										_valueIncrement: sseProgressValueIncrement,
																										_maxValue: sseProgressMax,
																										_title: achievements ? '' : sseTaskDescription }
																									: null"/>
			<bind name="instance" value="'TooltipSystemProgressParamsElement'; isSseOpenEnded	? { _text: 'IDS_SSE_PORTAL_RESULT_COLON',
																					_param_1: sseProgressBattle,
																					_param_2: sseProgressCurrent }
																				: null"/>
		</block>
	</block>
	<block className="PostBattleSSEQuestTooltip">
		<bind name="watch" value="'sseData'; _entity.dataComponent.data"/>
		<bind name="primaryEntityDH" value="'ssePostBattleEntity'; CC.sseCorePersistent; str(sseData.arena_id)+'_'+str(sseData.sse_id)"/>
		<bind name="instance" value="'PostBattleSseTaskTooltip'; { _sseId: ssePostBattleEntity.id }"/>
	</block>
	<block className="PostBattleCampaignTasksItem">
		<bind name="watch" value="'elementAppearDelayBase'; ($index * 0.15) + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="style" value="'marginRight'; _campaignTasksTotal == ($index + 1) ? 32 : 24"/>
		<block className="PostBattleCampaignTasksItem" type="ublock">
			<bind name="build!" value="{
						_campaignTaskId: id,
						_campaignData:	{
											isDone: isDone,
											curProgress: progress,
											totalProgress: total
										}
					}"/>
		</block>
	</block>
	<block className="PersonalResultKiller">
		<block>
			<bind name="visible" value="!_killerIsBuilding"/>
			<bind name="watch" value="'isEventEnemy';_killer.dbId &lt; 0 &amp;&amp; (_gameMode == GameMode.KEY_BATTLE || _gameMode == GameMode.PORTAL_2021 || _gameMode == GameMode.TEAM_BATTLE_ROYALE_2021)"/>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorGrey'"/>
				<bind name="text" value="tr('IDS_BATTLE_STATS_DAMAGED_BY_' + death_reason_id)"/>
			</block>
			<block>
				<bind name="visible" value="!isEventEnemy"/>
				<bind name="instance" value="'PBSPlayerWithShip'; _killer.shipId ? {	_shipId: _killer.shipId,
																	_name: _killer.name,
																	_isEnemy: (_killer.relation == 2),
																	_fontSizeClass: '$FontSizeLarge',
																	_isTeamKiller: _killer.isAbuser,
																	_isSelf: (_killer.relation == 0),
																	_isInMyDivision: _killer.isInSameDivision,
																	_noWidth: true,
																	_isBot: _killer.dbId &lt; 0,
																	_masteryRank: _killer.masteryRank}
																: null"/>
			</block>
			<block>
				<bind name="visible" value="isEventEnemy"/>
				<block>
					<style>
						<backgroundSize value="cover"/>
						<width value="20px"/>
						<height value="20px"/>
						<marginTop value="3px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../events/halloween20/death_reason_monster.png'"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="3px"/>
						<marginRight value="3px"/>
					</style>
					<styleClass value="$TextHeaderBigDefaultBold"/>
					<bind name="class" value="'$FontColorCompareNegative'"/>
					<default_text value="IDS_BATTLE_STATS_DAMAGED_BY_MONSTER"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_killerIsBuilding"/>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorGrey'"/>
				<default_text value="IDS_BATTLE_STATS_DAMAGED_BY_FORT"/>
			</block>
			<block>
				<bind name="visible" value="_killerBuildingType != 'AirBase'"/>
				<style>
					<backgroundSize value="cover"/>
					<width value="11px"/>
					<height value="15px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'bitmap:icon_ground_artillery_type_1_enemy'"/>
			</block>
			<block>
				<bind name="visible" value="_killerBuildingType == 'AirBase'"/>
				<style>
					<backgroundSize value="cover"/>
					<width value="17px"/>
					<height value="17px"/>
					<marginTop value="4px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'bitmap:icon_ground_airbase_enemy'"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefaultBold"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<bind name="text" value="toUpperCase(_killerBuildingName)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="RibbonItem">
		<bind name="name" value="'ribbon_' + ribbonId"/>
		<bind name="appear" value="'addedToStage'; (_animationOn ? 0.15 : 0 ); (_animationOn ? (0.15 * $index + _delay) : 0); {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="tooltip" value="'RibbonTooltip'; {_ribbonId: ribbonId, _amount: amount, _subRibbons: subRibbons }"/>
		<style>
			<margin value="4px"/>
			<align value="center"/>
		</style>
		<block>
			<style>
				<marginBottom value="4px"/>
			</style>
			<bind name="instance" value="'RibbonIcon'; {_amount: amount, _iconName: iconName}"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<bind name="class" value="'$FontColorGrey'"/>
			<bind name="text" value="tr('IDS_RIBBON_' + ids)"/>
		</block>
	</block>
	<block className="RibbonIcon">
		<style>
			<height value="51px"/>
			<width value="133px"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../ribbons/' + _iconName + '.png')"/>
		<block type="text">
			<style>
				<marginTop value="22px"/>
				<right value="2px"/>
			</style>
			<styleClass value="$TextLargeHeaderBold"/>
			<bind name="text" value="'x' + _amount"/>
		</block>
	</block>
	<block className="PostBattleBonusTagItem">
		<bind name="entityDH" value="'bonusTagEntity'; $value"/>
		<bind name="watch" value="'bonusTagType'; bonusTagEntity.bonusTag.type"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="sharedTooltip" value="'BonusTagsTooltip'; { _bonusTagId: $value, _isReceived: true }"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<block>
				<style>
					<width value="54px"/>
					<height value="54px"/>
					<marginTop value="8px"/>
					<backgroundSize value="fill"/>
					<alpha value="0.3"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/bonus_tags/bonus_' + bonusTagType + '_big.png'"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<top value="12"/>
					<width value="48px"/>
					<height value="48px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../reward_categories/icon_check.png'"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="8px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<bind name="text" value="tr(toUpperCase('IDS_BONUSTAG_' + bonusTagType + '_HEADER'))"/>
			</block>
		</block>
	</block>
	<block className="PostBattleStrategicAction">
		<bind name="entityDH" value="'strategicActionsTaskEntity'; _id"/>
		<bind name="tooltip" value="'PostBattleStrategicActionsTooltip'; { _entityId: strategicActionsTaskEntity.id}"/>
		<bind name="watch" value="'elementAppearDelayBase'; 0.15 + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<marginTop value="8px"/>
			</style>
			<block className="RewardCategory" type="ublock">
				<bind name="build!" value="{	_rewardCategory: 'strategic_actions',
							_isReceived: true,
							_isRewardActive: false }"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="8px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<default_text value="IDS_STRATEGIC_ACTIONS_COMMON_EVENT_TITLE"/>
			</block>
		</block>
	</block>
	<block className="PostBattleStrategicActionsTooltip">
		<bind name="entityDH" value="'strategicActionsTaskEntity'; _entityId"/>
		<bind name="watchDH" value="'rewards';				[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.rewards"/>
		<bind name="watchDH" value="'isPVEModifierApplied';	[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.pveModifierApplied"/>
		<bind name="watchDH" value="'conditionsSets';		[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.conditionsSets"/>
		<bind name="watchDH" value="'doneConditionSetIndex'; []; strategicActionsTaskEntity.strategicActionsTaskPersistent.doneConditionSetIndex"/>
		<bind name="watchDH" value="'taskType';				[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.taskType"/>
		<bind name="watch" value="'isThresholdTask'; taskType == SC.Common.STRATEGIC_ACTIONS_TASK_TYPE.THRESHOLD"/>
		<bind name="watch" value="'isOrTask'; taskType == SC.Common.STRATEGIC_ACTIONS_TASK_TYPE.OR"/>
		<bind name="watch" value="'isAndTask'; taskType == SC.Common.STRATEGIC_ACTIONS_TASK_TYPE.AND"/>
		<bind name="watch" value="'conditionsEntities'; isOrTask ? [conditionsSets[doneConditionSetIndex]] : conditionsSets"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText';	{ _headerText: 'IDS_STRATEGIC_ACTIONS_COMMON_EVENT_TITLE' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {	_text: 'IDS_TASK_COMPLETED',
														_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isPVEModifierApplied"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isPVEModifierApplied	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
																			_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}
																		: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="conditionsEntities; 'TooltipSystemStrategicActionsTaskDescriptionItem'; {	_isThresholdTask: isThresholdTask,
																								_isAndTask: isAndTask }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
														_text: 'IDS_TOOLTIP_REWARD_TAKEN' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; { _rewards: rewards }"/>
			</block>
		</block>
	</block>
	<block className="TooltipSystemStrategicActionsTaskDescriptionItem">
		<bind name="entityDH" value="'conditionsSetEntity'; $value"/>
		<bind name="watchDH" value="'taskDescriptionData'; ['conditionsSetEntity.sseConditions.evConditionSetChanged']; conditionsSetEntity.sseConditions.taskDescriptionData"/>
		<bind name="watchDH" value="'conditionCategory'; []; conditionsSetEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'thresholdTaskIds'; 'IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + toUpperCase(conditionCategory) + '_FULL'"/>
		<bind name="watch" value="'taskDescription'; _isThresholdTask ? thresholdTaskIds : taskDescriptionData.ids"/>
		<bind name="watch" value="'isConjunctionVisible'; _isAndTask &amp;&amp; $index == 0"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: taskDescription }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.45"/>
			</style>
			<bind name="style" value="'marginTop'; isConjunctionVisible ? '8' : 0"/>
			<bind name="style" value="'marginBottom'; isConjunctionVisible ? '8' : 0"/>
			<bind name="instance" value="'TooltipSystemDescriptionText'; isConjunctionVisible ? { _descriptionText: 'IDS_AND' } : null"/>
		</block>
	</block>
	<block className="PostBattleRvrTask">
		<bind name="entityDH" value="'arcEventTaskEntity'; $value"/>
		<bind name="watch" value="'pointsArray';		arcEventTaskEntity.progressWithRewardsPersistent.pointsArray"/>
		<bind name="watch" value="'progressIndex';	arcEventTaskEntity.progressWithRewardsPersistent.activeIndex - 1"/>
		<bind name="watch" value="'isDone'; progressIndex == pointsArray.length - 1"/>
		<bind name="entityDH" value="'conditionEntity'; arcEventTaskEntity.arcEventTaskPersistent.conditions[0]"/>
		<bind name="watch" value="'taskConditions';	conditionEntity.sseConditions.taskDescriptionData"/>
		<bind name="watch" value="'taskCategory';	conditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'taskDescription';	taskConditions.ids"/>
		<bind name="watch" value="'currentProgress';	taskConditions.currentProgress"/>
		<bind name="watch" value="'maxProgress';		taskConditions.maxProgress"/>
		<bind name="watch" value="'battleProgress';	taskConditions.battleProgress"/>
		<bind name="watch" value="'progressBeforeBattle'; (currentProgress - battleProgress) / maxProgress"/>
		<bind name="watch" value="'progressAfterBattle'; battleProgress / maxProgress"/>
		<bind name="tooltip" value="'PostBattleRvrTaskTooltip'; { _taskId: $value }"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<marginRight value="24"/>
			<height value="64px"/>
			<marginTop value="8px"/>
		</style>
		<block>
			<style>
				<height value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block className="RewardCategory" type="ublock">
				<bind name="build!" value="{	_rewardCategory: 'arc_event_task_reward_points',
							_isReceived: isDone,
							_isRewardActive: false }"/>
			</block>
			<block>
				<style>
					<height value="100%"/>
					<marginLeft value="8px"/>
					<marginTop value="-12px"/>
					<align value="left|middle"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<maxWidth value="136"/>
					</style>
					<bind name="style" value="'alpha'; isDone ? 1 : 0.9"/>
					<bind name="text" value="tr('IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + toUpperCase(taskCategory) + '_FULL')"/>
				</block>
				<block>
					<bind name="visible" value="!isDone"/>
					<style>
						<width value="120px"/>
						<marginTop value="8px"/>
					</style>
					<bind name="instance" value="'DoubleProgressBar'; isDone ? null : {	_progress1: progressBeforeBattle,
																		_progress2: progressAfterBattle }"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PostBattleRvrTaskTooltip">
		<bind name="entityDH" value="'arcEventTaskEntity'; _taskId"/>
		<bind name="watch" value="'finishTime';	arcEventTaskEntity.arcEventTaskPersistent.finishTime"/>
		<bind name="watch" value="'personalPoints';	arcEventTaskEntity.arcEventTaskPersistent.personalPoints"/>
		<bind name="watch" value="'pointsArray';		arcEventTaskEntity.progressWithRewardsPersistent.pointsArray"/>
		<bind name="watch" value="'progressIndex';	arcEventTaskEntity.progressWithRewardsPersistent.activeIndex - 1"/>
		<bind name="watch" value="'isDone'; progressIndex == pointsArray.length - 1"/>
		<bind name="watch" value="'hasPointsForThisBattle'; personalPoints &gt; 0"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeft'; finishTime - serverTime"/>
		<bind name="watch" value="'isExpired'; serverTime &gt; finishTime"/>
		<bind name="watch" value="'isFailed'; isExpired &amp;&amp; !isDone"/>
		<bind name="timeFormat" value="timeLeft; 'hh:mm:ss'; 'formattedLastDayLeft'"/>
		<bind name="watch" value="'daysLeft'; math.floor(timeLeft / 86400)"/>
		<bind name="entityDH" value="'conditionEntity'; arcEventTaskEntity.arcEventTaskPersistent.conditions[0]"/>
		<bind name="watchDH" value="'taskConditions'; ['conditionEntity.sseConditions.evConditionSetChanged']; conditionEntity.sseConditions.taskDescriptionData"/>
		<bind name="watch" value="'taskCategory';	conditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'taskDescription';	taskConditions.ids"/>
		<bind name="watch" value="'taskDescription'; tr('IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + toUpperCase(taskCategory) + '_FULL')"/>
		<bind name="watch" value="'currentProgress';	taskConditions.currentProgress"/>
		<bind name="watch" value="'maxProgress';		taskConditions.maxProgress"/>
		<bind name="watch" value="'battleProgress';	taskConditions.battleProgress"/>
		<bind name="watch" value="'progressBeforeBattle'; (currentProgress - battleProgress) / maxProgress"/>
		<bind name="watch" value="'progressAfterBattle'; battleProgress / maxProgress"/>
		<bind name="watch" value="'headerUnifiedStatus';	isDone	? SC.Ui_styles.UNIFIED_STATUS.CHECK
												: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'taskStatus'; hasPointsForThisBattle	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
															_text: subst(	'IDS_SUBST_PL_ARC_EVENT_POSTBATTLE_TOOLTIP_POINTS_RECEIVED', [],
																			{ _points: personalPoints },
																			personalPoints	)	}
														: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
															_text: 'IDS_SSE_STATUS_FAILED'	}"/>
		<bind name="watch" value="'timeLeftStatusText';
		subst(daysLeft		? 'IDS_SUBST_PL_SSE_TIME_LEFT_DAYS'
							: 'IDS_SUBST_SSE_TIME_LEFT_LAST_DAY',
		[],
		{ timeLeft: daysLeft	? format(daysLeft, 0)
								: formattedLastDayLeft },
		daysLeft)"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: taskDescription }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="hasPointsForThisBattle || isExpired"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; hasPointsForThisBattle || isExpired	? taskStatus : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!isDone &amp;&amp; !isExpired"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemTimeLeftStatusLine';
			!isDone &amp;&amp; !isExpired ? { _timeLeftTimeStamp: finishTime, _substTextIDS: timeLeftStatusText } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!isDone"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDoubleProgressBarBlock'; !isDone	? {	_title: 'IDS_SSE_PROGRESS_COLON',
																			_currentValue: currentProgress,
																			_valueIncrement: battleProgress,
																			_maxValue: maxProgress,
																			_showPercent: false	}
																		: null"/>
			</block>
		</block>
	</block>

	<!-- results_screen_team_result -->
	<block className="TeamResultSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<style>
			<align value="center"/>
		</style>
		<block type="text">
			<bind name="visible" value="_data.game_data.isSpectator"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<marginTop value="8sh"/>
				<marginBottom value="2sh"/>
				<alpha value="0"/>
			</style>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.1; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<styleClass value="$TextDefaultBold60NM"/>
			<bind name="text" value="_data.game_data.winner_team_text"/>
		</block>
		<block>
			<bind name="instance" value="'RealTeamResultSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealTeamResultSection">
		<bind name="var" value="{complaintsAvailable: true}"/>
		<bind name="catch" value="'disableComplaints'; {complaintsAvailable: false}"/>
		<bind name="countdown" value="game_data.keep_until_time; 'countdownText'; 'mm:ss'; 'timeoutPostBattleComplaints'"/>
		<bind name="dispatch" value="'timeoutPostBattleComplaints'; 'disableComplaints'"/>
		<style>
			<alpha value="0"/>
			<marginTop value="3sh"/>
		</style>
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block className="BattleResultsPlayersTable" type="ublock">
			<bind name="build!" value="{		_teamResults: team_results,
							_gameData: game_data,
							_personal: personal, 
							_complaintsAvailable: complaintsAvailable }"/>
		</block>
	</block>

	<!-- ship_management_elements -->
	<block className="ModuleElementModalWindow">
		<block className="ModuleElementModalWindow" type="ublock">
			<bind name="build!" value="{	_modulePK: _modulePK,
						_maxWidth: _maxWidth }"/>
		</block>
	</block>

	<!-- shipinfo_elements -->
	<block className="ShipLineItemNM">
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; _shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'textColor'; (shipInfo.isFarming || shipInfo.uiSpecial)	? SC.Ui_styles.SERVICE_COLORS.YELLOW
																			: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha'; textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW	? 1
																				: 0.9"/>
		<bind name="watch" value="'showFlag'; (shipInfo.flagName != SC.Common.NATION.EVENTS) &amp;&amp; _withFlag"/>
		<bind name="watch" value="'iconColorTransform'; textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW	? {redOffset:0,greenOffset:-38,blueOffset:-153}
																						: {}"/>
		<bind name="watch" value="'showName'; !_hideName"/>
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block>
			<bind name="visible" value="showFlag"/>
			<style>
				<marginRight value="8px"/>
				<marginTop value="-10px"/>
				<marginBottom value="-11px"/>
			</style>
			<bind name="instance" value="'NationFlagsTiny'; showFlag ? { _shipCountry: shipInfo.flagName} : null"/>
		</block>
		<block>
			<style>
				<marginTop value="-8px"/>
				<marginBottom value="-10px"/>
				<marginLeft value="-5px"/>
				<marginRight value="4px"/>
			</style>
			<bind name="style" value="'marginRight'; showName ? '4px' : '3px'"/>
			<bind name="instance" value="'ShipIcon'; {	_shipType: shipInfo.subtype,
										_isSpecial: shipInfo.uiSpecial,
										_isFarming: shipInfo.isFarming,
										_isElite: upgradableShipInfo.isElite	}"/>
		</block>
		<block>
			<bind name="style" value="'marginLeft'; shipInfo.levelIcon.length &gt; 0 ? '-4px' : '0px'"/>
			<bind name="style" value="'marginRight'; shipInfo.levelIcon.length &gt; 0 ? '-1px' : '0px'"/>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: shipInfo.levelIcon,
											_colorTransform : iconColorTransform,
											_levelRome : shipInfo.levelRome,
											_fontClass : _fontClass,
											_textColor : textColor,
											_alpha : textAlpha
										}"/>
		</block>
		<block type="text">
			<bind name="visible" value="showName"/>
			<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultBoldNM'"/>
			<style>
				<multiline value="false"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="alpha" value="textAlpha"/>
			<bind name="name" value="'ttc_ship_name'"/>
			<bind name="text" value="showName ? toUpperCase(tr(shipInfo.nameIDS)) : ''"/>
		</block>
	</block>
	<block className="ShipWithLevel">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block>
			<bind name="style" value="'marginRight'; shipInfo.levelIcon.length &gt; 0 ? '-1px' : '0px'"/>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: shipInfo.levelIcon,
											_levelRome : shipInfo.levelRome,
										}"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<marginLeft value="2px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="ShipClassLineItemNM">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watch" value="'isSupership'; shipInfo.level == SC.Ships.SHIP_LEVELS.SUPER_SHIP"/>
		<bind name="watch" value="'shipClass'; tr(toUpperCase('IDS_' + shipInfo.subtype + (isSupership ? '_LEGENDARY' : '')))"/>
		<bind name="watch" value="'textColor';	shipInfo.isFarming || shipInfo.uiSpecial	? SC.Ui_styles.SERVICE_COLORS.YELLOW
																			: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'shipClassText'; isSupership ? shipClass : subst('IDS_SHIP_LEVEL', [], {_shipClass: shipClass, _shipLevel: shipInfo.levelRome})"/>
		<block type="text">
			<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
			<bind name="style" value="'alpha'; textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW ? 1 : 0.75"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="text" value="shipClassText"/>
		</block>
	</block>
	<block className="ShipLevelNM">
		<bind name="watch" value="'isShowLevelIcon'; _levelIcon.length &gt; 0"/>
		<bind name="watch" value="'shipLevelText'; (isShowLevelIcon ? '' : _levelRome) + ' '"/>
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<bind name="alpha" value="_alpha ? _alpha : '1'"/>
		<block>
			<bind name="visible" value="isShowLevelIcon"/>
			<style>
				<height value="100%"/>
				<align value="middle"/>
			</style>
			<bind name="instance" value="'LevelIconNM'; isShowLevelIcon	? {_levelIcon: _levelIcon, _colorTransform: _colorTransform}
														: null"/>
		</block>
		<block type="text">
			<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultBoldNM'"/>
			<bind name="class" value="_fontColorClass ? _fontColorClass : '$None'"/>
			<bind name="class" value="_fontSizeClass ? _fontSizeClass : '$None'"/>
			<bind name="style" value="'textColor'; _textColor"/>
			<bind name="text" value="shipLevelText"/>
		</block>
	</block>
	<block className="LevelIconNM">
		<block className="LevelIconNM" type="ublock">
			<bind name="build!" value="{_levelIcon: _levelIcon, _colorTransform: _colorTransform ? _colorTransform : {}}"/>
		</block>
	</block>
	<block className="ShipSilhouetteRightAligned">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<width value="122px"/>
			<height value="22px"/>
		</style>
		<bind name="style" value="'right';	(shipInfo.subtype == ShipTypes.Submarine)	? '-38px' :
							(shipInfo.subtype == ShipTypes.Destroyer)	? '-26px' :
							(shipInfo.subtype == ShipTypes.Cruiser)		? '-12px'
																		: '0px'"/>
		<bind name="style" value="'backgroundImage'; 'url:' + shipInfo.pathTinyIcon"/>
	</block>

	<!-- tabs -->
	<block className="TextSwitchTab">
		<bind name="watch" value="'tabBarSoundSet'; 'main_tab_' + _actionParams.inset"/>
		<bind name="name" value="_name"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _statusTooltipData ? _statusTooltipData : null"/>
		<bind name="style" value="'width'; _width ? _width : '93px'"/>
		<bind name="style" value="'height'; _height ? _height : '23px'"/>
		<style>
			<backgroundColor value="0x01000000"/>
			<align value="middle"/>
		</style>
		<block>
			<bind name="name" value="_selected"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="mouseDown; 0.05; {alpha: 1}; {alpha: 0.7}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 0.65}; {alpha: 1}"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<background9Slice value="[3,2]"/>
					</style>
					<bind name="transition" value="!_disabled &amp;&amp; (_selected || rollOver); 0.05; {alpha: 0}; {alpha: 1}"/>
					<bind name="style" value="'backgroundImage'; _isReadyBtn ? 'url:../service_kit/buttons/text_switcher/over.png'
															: 'url:../service_kit/buttons/text_switcher/over_orange.png'"/>
				</block>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TabButtonSmallFontUp"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<multiline value="false"/>
				<hitTest value="false"/>
			</style>
			<bind name="class" value="	_disabled								? '$FontColorWhite' :
						rollOver &amp;&amp; !_selected					? '$FontColorWhite' :
						_selected &amp;&amp; _isReadyBtn				? '$FontColorGreen' :
						_selected &amp;&amp; !_isReadyBtn				? '$FontColorCompareNegative'
																: '$FontColorBlueish'"/>
			<bind name="style" value="'fontSize';	_size == 2	? '25'
														: '13'"/>
			<bind name="alpha" value="	_disabled	? 0.25	:
						mouseDown	? 0.45	:
						_selected	? 1
									: 0.9"/>
			<bind name="text" value="toUpperCase(tr(_label))"/>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="soundSet" value="'button_text_switch'"/>
			<bind name="style" value="'hitTest'; !(_disabled || (!_selectedClickable &amp;&amp; _selected))"/>
			<bind name="action" value="'click';		_action 	? _action : null; 	_actionParams 	? _actionParams : {}"/>
			<bind name="request" value="'click'; 	_request 	? _request : null; 	_requestParams 	? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; 	_dispatch 	? _dispatch : null; _dispatchParams ? _dispatchParams : null"/>
		</block>
	</block>

	<!-- tooltip -->
	<block className="MultipleWarningsTooltip">
		<styleClass value="$WarningTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block>
				<bind name="repeat" value="_warningsArr; 'SimpleWarningText'; {}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="SimpleWarningText">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="'$FontColorOrange'"/>
			<style>
				<maxWidth value="240"/>
				<leading value="-3"/>
			</style>
			<bind name="text" value="$value"/>
		</block>
	</block>

	<!-- tooltip_convert_unbound -->
	<block className="ModuleTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ModuleTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_modulePK: _modulePK,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false }"/>
		</block>
	</block>
	<block className="HeaderDescriptionInstructionTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="HeaderDescriptionInstructionTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_headerText: _headerText ? _headerText : '',
						_descriptionText: _descriptionText ? _descriptionText : '',
						_mouseInstructionText: _mouseInstructionText ? _mouseInstructionText : '' }"/>
		</block>
	</block>
	<block className="SimpleStatusTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SimpleStatusTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_text: _text ? _text : '',
						_unifiedStatus: _unifiedStatus ? _unifiedStatus : SC.Ui_styles.UNIFIED_STATUS.DEFAULT }"/>
		</block>
	</block>
	<block className="RepeatStatusTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="RepeatStatusTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_tooltipDataArray: _tooltipDataArray }"/>
		</block>
	</block>
	<block className="DescriptionStatusLineTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="DescriptionStatusLineTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_descriptionText: _descriptionText ? _descriptionText : '',
						_statusText: _statusText ? _statusText : '',
						_unifiedStatus: _unifiedStatus ? _unifiedStatus : SC.Ui_styles.UNIFIED_STATUS.DEFAULT }"/>
		</block>
	</block>
	<block className="CamouflageTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CamouflageTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: Number(_id),
						_isReward: _isReward ? _isReward : false,
						_amount: _amount ? _amount : 0,
						_fakeColorScheme: _fakeColorScheme ? _fakeColorScheme : {},
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false,
						_rewardShipId: _rewardShipId ? Number(_rewardShipId) : 0 }"/>
		</block>
	</block>
	<block className="MultiBoostTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="MultiBoostTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: _id,
						_amount: _amount ? _amount : 0,
						_isReward: _isReward ? _isReward : false,
						_rewardShipId: _rewardShipId ? _rewardShipId : 0,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false }"/>
		</block>
	</block>
	<block className="EconomicBoostTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="EconomicBoostTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: _id,
						_amount: _amount ? _amount : 0,
						_isInstalled: _isInstalled ? _isInstalled : false,
						_isReward: _isReward ? _isReward : false,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false }"/>
		</block>
	</block>
	<block className="EconomicBoostSlotTooltipTTX">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="EconomicBoostSlotTooltipTTX" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_ecoBoostSlotEntityId: _ecoBoostSlotEntityId,
						_boostTypeModifier: _boostTypeModifier,
						_isEconomicsModalWindow: _isEconomicsModalWindow }"/>
		</block>
	</block>
	<block className="BonusTagsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="BonusTagsTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_shipEntityId: _shipEntityId ? _shipEntityId : 0,
						_isInShipResearch: _isInShipResearch ? _isInShipResearch : false,
						_isReceived: _isReceived ? _isReceived : false,
						_bonusTagId: _bonusTagId ? _bonusTagId : 0 }"/>
		</block>
	</block>
	<block className="CurrencyTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CurrencyTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_currency: _currency,
						_amount: _amount ? _amount : 0,
						_isReceived: _isReceived ? _isReceived : false,
						_isUnavailableStatusVisible: _isUnavailableStatusVisible ? _isUnavailableStatusVisible : false,
						_hasMouseInstruction: _hasMouseInstruction ? _hasMouseInstruction : false }"/>
		</block>
	</block>
	<block className="FormationNotReadyButtonTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="FormationNotReadyButtonTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_isReadyBtnEnabled: _isReadyBtnEnabled }"/>
		</block>
	</block>
	<block className="FormationReadyButtonTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="FormationReadyButtonTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="ShipExtendedTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="style" value="'userData'; { rightOffset: _hOffset }"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ShipExtendedTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_shipId: Number(_shipId),
						_isFromTree: _isFromTree ? _isFromTree : false,
						_isRewards: _isRewards ? _isRewards : false,
						_hasShipImage: _hasShipImage ? _hasShipImage : false,
						_rewardRentUntil: _rewardRentUntil ? _rewardRentUntil : 0,
						_rewardRentDuration: _rewardRentDuration ? _rewardRentDuration : 0,
						_isKeyTargetVisible: _isKeyTargetVisible ? _isKeyTargetVisible : false,
						_isSelf: _isSelf ? _isSelf : false,
						_relation: _relation ? _relation : SC.Battle.PLAYER_RELATION.SELF,
						_isCompare: _isCompare ? _isCompare : false,
						_isReversedCompare: _isReversedCompare ? _isReversedCompare : false }"/>
		</block>
	</block>
	<block className="DivisionEntranceInfotip">
		<styleClass value="$DivisionEntranceInfotipBehaviour"/>
		<bind name="class" value="_isFromDockFormationBtn ? '$Fullsize' : '$DefaultFormationWidgetSize'"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="DivisionEntranceInfotip" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_isFromDockFormationBtn: _isFromDockFormationBtn ? _isFromDockFormationBtn : false,
						_isFromTrainingRoomBtn: _isFromTrainingRoomBtn ? _isFromTrainingRoomBtn : false,
						_teamId: _teamId ? _teamId : 0 }"/>
		</block>
	</block>
	<block className="TrainingRoomTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="TrainingRoomTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{_trainingRoomComponent: _trainingRoomComponent}"/>
		</block>
	</block>
	<block className="SeasonShipRestrictionsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SeasonShipRestrictionsTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="SeasonShipRestrictionsInfotip">
		<styleClass value="$VerticalInfotipBehaviourCenterUpper"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SeasonShipRestrictionsInfotip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_limitedShips: _limitedShips ? _limitedShips : [],
						_excludedShips: _excludedShips ? _excludedShips : [] }"/>
		</block>
	</block>
	<block className="DiscountTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="DiscountTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_priceInfo: _priceInfo,
						_isExternal: _isExternal ? _isExternal : false }"/>
		</block>
	</block>

	<!-- tooltip_ribbon -->
	<block className="RibbonTooltip">
		<bind name="primaryEntityDH" value="'ribbonEntity'; CC.ribbon; _ribbonId"/>
		<bind name="watchDH" value="'iconName'; []; ribbonEntity.ribbonInfo.iconName"/>
		<bind name="watchDH" value="'ribbonIds'; []; ribbonEntity.ribbonInfo.ids"/>
		<bind name="watch" value="'headerIconPath'; 'url:../ribbons/' + iconName + '.png'"/>
		<bind name="watch" value="'headerText'; tr('IDS_RIBBON_' + ribbonIds)"/>
		<bind name="watch" value="'description'; 'IDS_RIBBON_DESCRIPTION_' + (ribbonIds)"/>
		<bind name="watch" value="'amount'; ('x' + _amount)"/>
		<bind name="watch" value="'isSubribbonsVisible'; (_subRibbons.length &gt; 1)"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP_UB1" type="ublock">
				<styleClass value="$Fullsize"/>
				<bind name="build!" value="{	_isHighContrast: isHighContrast, _isInfotip:false }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText';	{	_imageUrl: headerIconPath,
																	_headerText: headerText,
																	_headerIconType: 3,
																	_iconAmount: amount
																}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; {_descriptionText: description}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isSubribbonsVisible"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemItemsList'; isSubribbonsVisible	? {	_itemsType: 2,
																			_items: _subRibbons}
																		: null"/>
			</block>
		</block>
	</block>

	<!-- tooltip_system -->
	<block className="TooltipSystemHeaderWithIconAndText">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<bind name="watch" value="'headerIconType'; _headerIconType	? _headerIconType
													: 0"/>
		<block>
			<style>
				<marginRight value="12px"/>
				<top value="0"/>
			</style>
			<bind name="child" value="headerIconType;	{
											_imageWidth:	_imageWidth,
											_imageHeight:	_imageHeight,
											_imageUrl:		_imageUrl,
											_iconAmount:	_iconAmount,
											_data:			_data
										};
										{
											0:		'TooltipSystemSimpleIcon',
											1:	'TooltipSystemIconWithCounter',
											2:		'TooltipSystemHeaderIconCamoRepaint',
											3:			'TooltipSystemHeaderIconRibbon',
											5:			'TooltipSystemHeaderIconEcoBoost'
										}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText:	_headerText,
																_subheaderText: _subheaderText}"/>
		</block>
	</block>
	<block className="TooltipSystemSimpleIcon">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="colorTransform" value="_data.colorTransform	?	_data.colorTransform
												:	{}"/>
		<bind name="style" value="'width'; _imageWidth + 'px'"/>
		<bind name="style" value="'height'; _imageHeight + 'px'"/>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
	</block>
	<block className="TooltipSystemIconWithCounter">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _imageWidth + 'px'"/>
		<bind name="style" value="'height'; _imageHeight + 'px'"/>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
		<block>
			<style>
				<right value="0px"/>
				<bottom value="0px"/>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderIconCounter'; !!_iconAmount ? { _iconAmount: _iconAmount } : null"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderIconCounter">
		<block type="text">
			<style>
				<position value="absolute"/>
			</style>
			<styleClass value="$TextDefaultBold20NM"/>
			<bind name="text" value="_iconAmount"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold20NM"/>
			<bind name="text" value="_iconAmount"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderSubheaderText">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<params>
				<param name="name" value="tooltipSystemHeader"/>
			</params>
			<style>
				<width value="100%"/>
				<leading value="-4"/>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultBold20NM"/>
			<bind name="text" value="_headerText"/>
		</block>
		<block type="text">
			<bind name="visible" value="_subheaderText"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<leading value="-2"/>
				<alpha value="0.75"/>
			</style>
			<bind name="text" value="_subheaderText"/>
		</block>
	</block>
	<block className="TooltipSystemTimeLeftStatusLine">
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeftTimeStamp'; _timeLeftTimeStamp	? _timeLeftTimeStamp
															: (math.toNum(serverTime)+(86400 * _daysLeft))"/>
		<bind name="watch" value="'timeLeft'; timeLeftTimeStamp - serverTime"/>
		<bind name="watch" value="'isTimeRunningOut'; timeLeft &lt; 86400"/>
		<bind name="countdown" value="timeLeftTimeStamp; 'formattedTimeLeft'; 'HIGHEST,WITH_DAYS'"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemStatusLine'; timeLeft &lt;= 0 &amp;&amp;
												_zeroTimeTextIDS	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION,
																			_text: _zeroTimeTextIDS}
																	:	{	_unifiedStatus: isTimeRunningOut	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																												: SC.Ui_styles.UNIFIED_STATUS.DATE,
																			_text: subst(_substTextIDS, [], { _timeLeft: formattedTimeLeft }) 									
																		}"/>
	</block>
	<block className="TooltipSystemStatusLine">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'StatusLine'; {	_unifiedStatus: _unifiedStatus, _text: _text,
									_textClass: '$TextDefaultNM', _leading: -3,
									_width: '100%'}"/>
	</block>
	<block className="TooltipSystemDescriptionText">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<params>
				<param name="name" value="tooltipSystemDescription"/>
			</params>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_descriptionText"/>
		</block>
	</block>
	<block className="TooltipSystemParamsModifiersList">
		<bind name="entityDH" value="'paramsModifiersEntity'; _paramsModifiersEntityId"/>
		<bind name="watch" value="'attributesPositive'; 	_attributesPositive	? _attributesPositive
															: paramsModifiersEntity.attributes.positive"/>
		<bind name="watch" value="'attributesNegative'; 	_attributesNegative	? _attributesNegative
															: paramsModifiersEntity.attributes.negative"/>
		<bind name="watch" value="'attributesNeutral';	_attributesNeutral	? _attributesNeutral
															: paramsModifiersEntity.attributes.neutral"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-16px"/>
				<marginRight value="-16px"/>
				<marginTop value="-12px"/>
				<marginBottom value="-13px"/>
			</style>
			<bind name="style" value="'backgroundColor'; SC.Ui_styles.SERVICE_COLORS.INNER_PANEL"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-12px"/>
			</style>
			<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: attributesPositive,
												_attributesNegative: attributesNegative,
												_attributesNeutral: attributesNeutral,
												_isTooltipSystem: true}"/>
		</block>
	</block>
	<block className="TooltipSystemPriceTagLine">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginRight value="8px"/>
			</style>
			<bind name="style" value="'width'; _isPriceTagOnRight ? '100%' : '100%f'"/>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<marginTop value="-6px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: _priceInfo, _showDiscountTag: true }"/>
		</block>
	</block>
	<block className="TooltipSystemCounterLine">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%f"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginRight value="8px"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block type="text">
			<style>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="format(_count, -1)"/>
		</block>
	</block>
	<block className="TooltipSystemDoubleProgressBarBlock">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'progress'; _currentValue/_maxValue"/>
		<bind name="watch" value="'progressIncrement'; _valueIncrement	? _currentValue == _maxValue	? 1 - progressBefore
																						: _valueIncrement / _maxValue
														: null"/>
		<bind name="watch" value="'progressBefore'; (_currentValue - _valueIncrement) / _maxValue"/>
		<bind name="watch" value="'curValue'; _showPercent ? (format(progress*100, 0) + '%') : _currentValue"/>
		<bind name="watch" value="'maxValue'; _showPercent ? 0 : _maxValue"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="-1px"/>
				<marginLeft value="-1px"/>
			</style>
			<bind name="instance" value="'DoubleProgressBar'; {	_progress1: progressBefore,
												_color1: progressIncrement	? SC.Ui_styles.SERVICE_COLORS.WHITE : SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE,
												_progress2: progressIncrement } "/>
		</block>
		<block>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultNM',
													_doNotHideOnZeroMaxValue: true,
													_curValue: curValue,
													_maxValue: maxValue }"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderIconCamoRepaint">
		<block className="CamouflageRepaintedIcon" type="ublock">
			<bind name="build!" value="{_camouflageId: _data.camouflageId}"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderIconRibbon">
		<style>
			<height value="51px"/>
			<width value="133px"/>
			<margin value="-2px"/>
		</style>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="6px"/>
				<right value="6px"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderIconCounter'; !!_iconAmount ? {_iconAmount: _iconAmount} : null"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderIconEcoBoost">
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage';	_data.type == SC.Common.ECOBOOST_TYPES.COMMON	? 'url:../eco_boosts/common/' + _data.paramsId + '.png' :
									_data.type == SC.Common.ECOBOOST_TYPES.LINKABLE	? 'url:../eco_boosts/multiboosts/linkable.png' :
									_data.type == SC.Common.ECOBOOST_TYPES.GLOBAL	? 'url:../eco_boosts/multiboosts/globalboost.png'
																					: 'url:../eco_boosts/multiboosts/clanboost.png'"/>
	</block>
	<block className="TooltipSystemProgressParamsElement">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'ProgressParamsElement'; { _width: '100%', _text: _text, _param_1: _param_1, _param_2: _param_2 }"/>
	</block>

	<!-- tooltip_system_items_list -->
	<block className="TooltipSystemItemsList">
		<style>
			<width value="100%"/>
			<marginBottom value="-12px"/>
		</style>
		<bind name="style" value="'marginTop'; !_title ? '-12px' : '0px'"/>
		<block type="text">
			<bind name="visible" value="_title"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="child" value="_itemsType ? _itemsType : 0; {_items: _items}; {	0	: 'TooltipSystemAchievementsList',
																		2	: 'TooltipSystemSubribbonsList' }"/>
		</block>
	</block>
	<block className="TooltipSystemListItem">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
			<marginTop value="12px"/>
			<marginBottom value="12px"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<top value="0"/>
			</style>
			<bind name="instance" value="'TooltipSystemIconWithCounter'; {	_imageWidth:	_imageWidth,
															_imageHeight:	_imageHeight,
															_imageUrl:		_imageUrl,
															_iconAmount:	_iconAmount}"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-2"/>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="text" value="_title"/>
		</block>
	</block>
	<block className="TooltipSystemAchievementsList">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_items; 'TooltipSystemAchievementItem'"/>
	</block>
	<block className="TooltipSystemAchievementItem">
		<bind name="primaryEntityDH" value="'achievementEntity'; CC.achievement; id ? id : $value"/>
		<bind name="watch" value="'_imageUrl'; ('url:../achievements/icon_achievement_' + achievementEntity.achievementInfo.name + '.png')"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemListItem'; {	_imageWidth: 40,
												_imageHeight: 40,
												_imageUrl: _imageUrl,
												_title: achievementEntity.achievementInfo.nameIDS}"/>
	</block>
	<block className="TooltipSystemSubribbonsList">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_items; 'TooltipSystemSubribbonItem'"/>
	</block>
	<block className="TooltipSystemSubribbonItem">
		<bind name="watch" value="'imageUrl'; 'url:../ribbons/subribbons/' + iconName + '.png'"/>
		<bind name="watch" value="'title'; tr('IDS_RIBBON_' + ids)"/>
		<bind name="watch" value="'amount'; 'x' + count"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemListItem'; count &gt; 0	? {	_imageWidth: 65,
															_imageHeight: 51,
															_imageUrl: imageUrl,
															_iconAmount: amount,
															_title: title}
														: null"/>
	</block>

	<!-- ublock_reward_container -->
	<block className="TooltipSystemDHRewards">
		<style>
			<width value="100%"/>
		</style>
		<block className="TooltipSystemDHRewards" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{	_rewards: _rewards,
						_rewardsTitle: _rewardsTitle ? _rewardsTitle : '' }"/>
		</block>
	</block>
	<block className="RewardCategory">
		<block className="RewardCategory" type="ublock">
			<bind name="build!" value="{	_rewardCategory: _rewardCategory ? _rewardCategory : '',
						_isReceived: _isReceived ? _isReceived : false,
						_isUnavailable: _isUnavailable ? _isUnavailable : false,
						_isRewardActive: _isRewardActive ? _isRewardActive : false}"/>
		</block>
	</block>
	<block className="RewardContainerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="RewardContainerTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_rewards: _rewards,
						_tooltipHeader: _tooltipHeader,
						_isReceived: _isReceived ? _isReceived : false }"/>
		</block>
	</block>
	<block className="RewardItemAdapter">
		<block className="RewardItemAdapter" type="ublock">
			<bind name="build!" value="{	_entityId: $value,
						_isReceived: _isReceived ? _isReceived : false,
						_isUnavailable: _isUnavailable ? _isUnavailable : false,
						_iconMargin: _iconMargin ? _iconMargin : 8 }"/>
		</block>
	</block>
	<block className="ContainerWithRewards">
		<style>
			<width value="100%"/>
		</style>
		<block className="ContainerWithRewards" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{	_rewards: _rewards,
						_itemHeight: _itemHeight,
						_itemsInRow: _itemsInRow ? _itemsInRow : 6,
						_align: _align ? _align : 0 }"/>
		</block>
	</block>

	<!-- utils -->
	<block className="HorizontalDivider">
		<styleClass value="$PxHorizontalCorrection"/>
		<style>
			<width value="100%"/>
			<height value="2px"/>
			<backgroundSize value="fill"/>
			<marginTop value="1px"/>
			<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
		</style>
	</block>
	<block className="HorizontalDividerTwoPx">
		<style>
			<width value="100%"/>
			<height value="2px"/>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
		</style>
	</block>
	<block className="VerticalDivider">
		<style>
			<height value="100%"/>
			<width value="3px"/>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
		</style>
	</block>
	<block className="TableDivider">
		<style>
			<backgroundImage value="bitmap:dotted_line"/>
			<backgroundRepeatX value="true"/>
			<width value="100%"/>
			<height value="1px"/>
			<alpha value="0.25"/>
		</style>
	</block>
	<block className="Underline">
		<bind name="style" value="'backgroundColor'; (rollOver &amp;&amp; !mouseDown) ? '0xFFFFFFFF' : '0x00856933'"/>
		<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) == true; 0.3; {scaleX : 0, alpha : 0}; {scaleX : 1, alpha :1}"/>
		<style>
			<backgroundColor value="0xFFFFFFFF"/>
			<position value="absolute"/>
			<height value="1px"/>
			<width value="100%"/>
			<bottom value="0px"/>
			<marginLeft value="2px"/>
			<marginRight value="2px"/>
		</style>
	</block>
	<block className="BlurMap">
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<hitTest value="false"/>
		</style>
		<bind name="blurMap"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundSize value="fill"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'img://gui/blur/' + (_map ? _map : 'blurmap_medium') + '.png'"/>
		</block>
	</block>
	<block className="DeclareBlurLayer">
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="visible" value="isBlurEnabled"/>
		<bind name="blurLayer"/>
		<style>
			<position value="absolute"/>
		</style>
		<block>
			<style>
				<backgroundColor value="0x000000FF"/>
			</style>
		</block>
	</block>
	<block className="EmptyItem">
		<bind name="visible" value="false"/>
	</block>
	<block className="DottedLine">
		<style>
			<backgroundImage value="bitmap:dotted_line"/>
			<backgroundRepeatX value="true"/>
			<width value="100%"/>
			<height value="1px"/>
			<alpha value="0.5"/>
		</style>
	</block>

	<!-- voice_chat_elements -->
	<block className="VoiceChatOutgoingIcon">
		<bind name="firstEntityDH" value="'voiceChatEntity'; CC.voiceChat"/>
		<bind name="watchDH" value="'voiceChatOutgoing'; ['voiceChatEntity.voiceChat.evOutgoingChanged']; voiceChatEntity.voiceChat.outgoing"/>
		<bind name="transition" value="voiceChatOutgoing; 0.15; {alpha: 0}; {alpha: 1}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; voiceChatOutgoing	? {	_text: 'IDS_VOICE_CHAT_OUTGOING_STATE_HINT' }
															: null"/>
		<block>
			<bind name="transition" value="_isSpeaking; 0.15; {alpha: 0.6}; {alpha: 1}"/>
			<block className="icon_voice_chat" type="native"/>
		</block>
	</block>
</ui>
