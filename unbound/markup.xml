<ui>

	<!-- account_leveling_elements -->
	<block className="IconAlItem">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _iconSize"/>
		<bind name="style" value="'height'; _iconSize"/>
		<bind name="style" value="'backgroundImage'; _imageURL"/>
	</block>
	<block className="IconAlDataItem">
		<params>
			<param name="name" value="'accountLevelingRewardImage'"/>
		</params>
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _iconSize"/>
		<bind name="style" value="'height'; _iconSize"/>
		<bind name="style" value="'backgroundImageData'; _imageData"/>
	</block>
	<block className="BoomAnimation">
		<bind name="visible" value="isVisible"/>
		<bind name="var" value="{isVisible: true}"/>
		<bind name="dispatch" value="'addedToStage'; 'delayedAddedToStage'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 3"/>
		<bind name="catch" value="'delayedAddedToStage'; {isVisible: false}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../animations/spine/account_leveling/explosion/explosion.skel"/>
		</style>
	</block>
	<block className="BGAnimation">
		<styleClass value="$Fullsize"/>
		<style>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../animations/spine/account_leveling/fog/fog.skel"/>
		</style>
	</block>
	<block className="AccountLevellingStepInfo">
		<bind name="watch" value="'entityId'; _galleryItemRendererParams[0].carouselPosEntityId"/>
		<bind name="entityDH" value="'accountCarouselPosEntity'; entityId"/>
		<bind name="watchDH" value="'points';	['accountCarouselPosEntity.accountLevelCarouselPosition.evChanged']; 
								accountCarouselPosEntity.accountLevelCarouselPosition.points"/>
		<bind name="watch" value="'isPromo'; !!accountCarouselPosEntity.accountPromoRewardBanner"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep'; points - currentPoints"/>
		<bind name="firstEntityDH" value="'myAccountEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'abuseStatus';  ['myAccountEntity.accountInfo.evAbuseStatusChanged']; myAccountEntity.accountInfo.abuseStatus"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; abuseStatus == SC.Common.ABUSE_STATUS.CONFIRMED"/>
		<bind name="watch" value="'alStatus'; isAbuseStatusConfirmed	? {	_text: 'IDS_ACCOUNT_PROGRESS_ABUSED',
														_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING}
													: {	_text: subst('IDS_BATTLES_TO_NEXT_STEP', [], {battles: battlesToStep}, battlesToStep),
														_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.LOCK}"/>
		<bind name="watchDH" value="'stepLevel';				[];	accountCarouselPosEntity.accountLevelingStep.level"/>
		<bind name="watchDH" value="'stepFeature';			['accountCarouselPosEntity.accountLevelingStep.evFeaturesChanged'];
											accountCarouselPosEntity.accountLevelingStep.features"/>
		<bind name="watchDH" value="'stepRewardId';			[];	accountCarouselPosEntity.accountLevelingStep.rewardId"/>
		<bind name="primaryEntityDH" value="'featureEntity'; CC.accountFeature; stepFeature"/>
		<bind name="watchDH" value="'featureHeaderText';			['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.title"/>
		<bind name="watchDH" value="'featureSubHeaderText';		['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.text"/>
		<bind name="watchDH" value="'featureIconPath';			['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.iconPath"/>
		<bind name="watchDH" value="'featureDescriptionArray';	['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.descriptions"/>
		<bind name="watchDH" value="'featureLocationText';		['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.location"/>
		<bind name="watch" value="'featureImageUrl'; 'url:' + featureIconPath + (battlesToStep &gt; 0 ? '_locked_big.png' : '_big.png')"/>
		<bind name="entityDH" value="'featureRewardEntity';	stepRewardId"/>
		<bind name="watch" value="'featureRewards'; featureRewardEntity.rewardsContainer ? featureRewardEntity.rewardsContainer.rewardIds 
																		: featureRewardEntity.id ? [featureRewardEntity.id] : []"/>
		<bind name="watch" value="'featureButtonRequestParams'; {isPromo: false,
												battles: points,
												battlesToStep: battlesToStep,
												rewards: featureRewards,
												headerText: featureHeaderText,
												descriptionArray: featureDescriptionArray,
												locationText: featureLocationText}"/>
		<bind name="watchDH" value="'promoHeaderText';		['accountCarouselPosEntity.accountPromoRewardBanner.evChanged']; 
											accountCarouselPosEntity.accountPromoRewardBanner.title"/>
		<bind name="watchDH" value="'promoFullDescription';	['accountCarouselPosEntity.accountPromoRewardBanner.evChanged']; 
											accountCarouselPosEntity.accountPromoRewardBanner.fullDescription"/>
		<bind name="watchDH" value="'promoSubHeaderText';	['accountCarouselPosEntity.accountPromoRewardBanner.evChanged']; 
											accountCarouselPosEntity.accountPromoRewardBanner.shortDescription"/>
		<bind name="watchDH" value="'promoImageBig';			['accountCarouselPosEntity.accountPromoRewardBanner.evChanged']; 
											accountCarouselPosEntity.accountPromoRewardBanner.imageBig"/>
		<bind name="watchDH" value="'promoDueDate';			['accountCarouselPosEntity.accountPromoRewardBanner.evChanged']; 
											accountCarouselPosEntity.accountPromoRewardBanner.expirationTime"/>
		<bind name="watchDH" value="'promoRewardId';			['accountCarouselPosEntity.accountPromoRewardBanner.evChanged']; 
											accountCarouselPosEntity.accountPromoRewardBanner.rewardId"/>
		<bind name="entityDH" value="'promoRewardEntity'; promoRewardId"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="timeFormat" value="promoDueDate; 'dd.MM.yy'; 'formattedDueDatePromoReward'; true"/>
		<bind name="watch" value="'timerText'; subst('IDS_PROMO_REWARD_DAYS_LEFT', [], { _date: formattedDueDatePromoReward })"/>
		<bind name="watch" value="'isTimeRunningOut'; promoDueDate - serverTime &lt; 86400"/>
		<bind name="primaryEntityDH" value="'promoImageEntity'; CC.byteArrayData; promoImageBig"/>
		<bind name="watchDH" value="'promoImageData'; ['promoImageEntity.byteArrayData.evChanged']; promoImageEntity.byteArrayData.data"/>
		<bind name="watch" value="'isTimedPromoReward'; promoDueDate &gt; 1 &amp;&amp; battlesToStep &gt; 0"/>
		<bind name="watch" value="'promoRewards'; promoRewardEntity.rewardsContainer ? promoRewardEntity.rewardsContainer.rewardIds : [promoRewardEntity.id]"/>
		<bind name="watch" value="'promoButtonRequestParams'; {	isPromo: true,
												battles: points,
												battlesToStep: battlesToStep,
												rewards: promoRewards,
												headerText: promoHeaderText,
												descriptionText: promoFullDescription,
												dueDate: isTimedPromoReward ? promoDueDate : ''}"/>
		<bind name="watch" value="'headerText'; isPromo ? promoHeaderText : featureHeaderText"/>
		<bind name="watch" value="'subHeaderText'; isPromo ? promoSubHeaderText : featureSubHeaderText"/>
		<bind name="watch" value="'buttonRequestParams'; isPromo ? promoButtonRequestParams : featureButtonRequestParams"/>
		<bind name="appear" value="'addedToStage'; 0.23; 0.07; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<style>
			<width value="844px"/>
			<height value="256px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="256px"/>
				<height value="100%"/>
			</style>
			<bind name="watch" value="'imageRenderer'; isPromo ? 'IconAlDataItem' : 'IconAlItem'"/>
			<bind name="instance" value="imageRenderer; { _imageURL: featureImageUrl, _imageData: promoImageData, _iconSize: '256px'}"/>
		</block>
		<block>
			<bind name="visible" value="battlesToStep &gt; 0 &amp;&amp; !isPromo"/>
			<style>
				<width value="60px"/>
				<height value="60px"/>
				<position value="absolute"/>
				<left value="98px"/>
				<top value="98px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingBigLockIcon.png"/>
				<backgroundSize value="fill"/>
			</style>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginTop value="32"/>
				<marginLeft value="48px"/>
			</style>
			<block type="text">
				<params>
					<param name="name" value="'accountLevelingRewardTitle'"/>
				</params>
				<styleClass value="$TextDefaultBold30NM"/>
				<style>
					<leading value="-6"/>
					<maxWidth value="540"/>
					<marginTop value="12px"/>
				</style>
				<bind name="style" value="'alpha'; battlesToStep &gt; 0 ? 0.75 : 0.9"/>
				<bind name="text" value="headerText"/>
			</block>
			<block>
				<bind name="visible" value="!isPromo"/>
				<style>
					<width value="100%"/>
					<marginTop value="12px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-3"/>
						<alpha value="0.75"/>
					</style>
					<bind name="text" value="subst('IDS_PROFILE_ACCOUNT_LEVEL', [], {_accountLevel: stepLevel})"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="battlesToStep &gt; 0"/>
				<bind name="sharedTooltip" value="'AbuseStatusProfileTooltip'; battlesToStep &gt; 0 &amp;&amp; isAbuseStatusConfirmed ? {} : null"/>
				<style>
					<width value="100%"/>
					<alpha value="0.75"/>
					<marginTop value="16px"/>
				</style>
				<bind name="instance" value="'StatusLine'; alStatus"/>
			</block>
			<block>
				<bind name="visible" value="isTimedPromoReward"/>
				<style>
					<width value="100%"/>
					<marginTop value="12px"/>
					<alpha value="0.75"/>
				</style>
				<bind name="instance" value="'StatusLine'; {	_text: timerText,
											_unifiedStatus: isTimeRunningOut	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																				: SC.Ui_styles.UNIFIED_STATUS.DATE}"/>
			</block>
			<block type="text">
				<params>
					<param name="name" value="'accountLevelingRewardShortDescription'"/>
				</params>
				<styleClass value="$TextDefault19NM"/>
				<style>
					<maxWidth value="500"/>
					<alpha value="0.75"/>
					<marginTop value="24px"/>
				</style>
				<bind name="text" value="subHeaderText"/>
			</block>
			<block>
				<params>
					<param name="name" value="'accountLevelingRewardSeeMoreButton'"/>
				</params>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
													_text: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO' }"/>
				<style>
					<marginTop value="32px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '140px',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_PRMP_DETAILS_BUTTON', 
												_request: 'openModalALCarouselElementInfo', 
												_requestParams: buttonRequestParams
											}"/>
			</block>
		</block>
	</block>

	<!-- account_leveling_progressbar_elements -->
	<block className="AccountLevellingCarouselItemIcon">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; 
									accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'accountStepPoints'; ['accountLevelingStepEntity.accountLevelCarouselPosition.evChanged']; 
										accountLevelingStepEntity.accountLevelCarouselPosition.points"/>
		<bind name="watch" value="'isPromo'; !!accountLevelingStepEntity.accountPromoRewardBanner"/>
		<bind name="watchDH" value="'promoTitle';	['accountLevelingStepEntity.accountPromoRewardBanner.evChanged']; 
									accountLevelingStepEntity.accountPromoRewardBanner.title"/>
		<bind name="watchDH" value="'stepLevel';	[];	accountLevelingStepEntity.accountLevelingStep.level"/>
		<bind name="watchDH" value="'stepFeature';	['accountLevelingStepEntity.accountLevelingStep.evFeaturesChanged'];
									accountLevelingStepEntity.accountLevelingStep.features"/>
		<bind name="watch" value="'isNewMarker'; !!accountLevelingStepEntity.newItem"/>
		<bind name="action" value="'click'; isNewMarker ? 'makeSeen' : null; {entityId: _accountLevelingStepEntityID}"/>
		<bind name="watch" value="'battlesToStep'; accountStepPoints - currentPoints"/>
		<bind name="watch" value="'isLocked'; battlesToStep &gt; 0"/>
		<bind name="watch" value="'carouselItemTitle'; isPromo ? promoTitle : stepLevel"/>
		<bind name="primaryEntityDH" value="'featureEntity'; CC.accountFeature; stepFeature"/>
		<bind name="watchDH" value="'iconFeaturePath';	['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.iconPath"/>
		<bind name="watch" value="'featureUrl';	isPromo		? 'url:../accountLevel/unlocks/icon_promo.png' :
								isLocked	? 'url:' + iconFeaturePath + '_locked.png'
											: 'url:' + iconFeaturePath + '.png'"/>
		<bind name="soundSet" value="_isSelect ? '' : 'button_account_level'"/>
		<style>
			<height value="224px"/>
			<width value="164px"/>
		</style>
		<bind name="var" value="{ 
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 15,
			greenOffset: 15,
			blueOffset: 15,
			alphaOffset: 0
		}
	}"/>
		<block>
			<bind name="visible" value="!isLocked || isPromo"/>
			<style>
				<position value="absolute"/>
				<height value="164px"/>
				<width value="164px"/>
				<backgroundSize value="fill"/>
				<hitTest value="false"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/unlock_shadow.png"/>
			</style>
			<bind name="transition" value="_isSelect; 0.07; {alpha: 0.6, scaleX: 0.8, scaleY: 0.8, top: 16, left: 16}; {alpha: 0.8, scaleX: 1, scaleY: 1, top: 0, left: 0}"/>
		</block>
		<block>
			<style>
				<height value="164px"/>
				<width value="164px"/>
				<hitTest value="false"/>
			</style>
			<bind name="name" value="'accountLevelingIcon_' + _isSelect"/>
			<bind name="transition" value="_isSelect &amp;&amp; (!isLocked || isPromo); 0.07; {top: 0}; {top: -4}"/>
			<bind name="colorTransform" value="	rollOver &amp;&amp; !_isSelect	? ctRollOver
														: {}"/>
			<bind name="instance" value="'IconAlItem'; 	{_iconSize: '164px',
										_imageURL: featureUrl}"/>
		</block>
		<block>
			<bind name="fade" value="isNewMarker; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
			<style>
				<position value="absolute"/>
				<right value="-2px"/>
				<top value="10px"/>
			</style>
			<bind name="instance" value="'MarkerNewAttention'; { }"/>
		</block>
		<block>
			<bind name="visible" value="isLocked &amp;&amp; !isPromo"/>
			<style>
				<width value="60px"/>
				<height value="60px"/>
				<position value="absolute"/>
				<top value="52px"/>
				<left value="52px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingBigLockIcon.png"/>
				<backgroundSize value="fill"/>
			</style>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<left value="31px"/>
				<bottom value="5px"/>
				<hitTest value="false"/>
			</style>
			<block>
				<bind name="instance" value="'ALCarouselPointer'; { _isSelect: _isSelect }"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="12px"/>
				</style>
				<bind name="name" value="'accountLevelingTitle_' + _isSelect"/>
				<bind name="instance" value="'ALCarouselItemTitle'; {_isSelect: _isSelect, _carouselItemTitle: carouselItemTitle}"/>
			</block>
		</block>
		<block>
			<style>
				<height value="164px"/>
				<width value="140px"/>
				<position value="absolute"/>
				<left value="12px"/>
				<backgroundColor value="0x01000000"/>
			</style>
		</block>
	</block>
	<block className="AccountLevellingCarouselItem">
		<bind name="dataRefDH" value="'accountLevelCarouselPositionEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'accountLastStep';	['accountLevelCarouselPositionEntity.accountLevelCarouselPosition.evIsLastStepChanged']; 
										accountLevelCarouselPositionEntity.accountLevelCarouselPosition.isLastStep"/>
		<bind name="watchDH" value="'points';			['accountLevelCarouselPositionEntity.accountLevelCarouselPosition.evChanged']; 
										accountLevelCarouselPositionEntity.accountLevelCarouselPosition.points"/>
		<bind name="watchDH" value="'nextStepPoints';	['accountLevelCarouselPositionEntity.accountLevelCarouselPosition.evNextStepPointsChanged']; 
										accountLevelCarouselPositionEntity.accountLevelCarouselPosition.nextStepPoints"/>
		<bind name="watch" value="'isPromo'; !!accountLevelCarouselPositionEntity.accountPromoRewardBanner"/>
		<bind name="watch" value="'isSelect'; _carouselItemSelectedIndex == $index"/>
		<bind name="watch" value="'isBarVisible'; !accountLastStep"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="20px"/>
				<height value="1px"/>
			</style>
		</block>
		<block>
			<block>
				<bind name="tooltip" value="'AccountLevellingCarouselItemTooltip'; { _featureEntityId: accountLevelCarouselPositionEntity.id, 
																	_isSelect: isSelect, 
																	_index: $index}"/>
				<bind name="dispatch" value="'click'; 'evAccountLevelingItemClicked'; 	{ carouselItemSelectedIndex: $index}"/>
				<bind name="instance" value="'AccountLevellingCarouselItemIcon'; {	_accountLevelingStepEntityID: accountLevelCarouselPositionEntity.id,
																	_isSelect: isSelect}"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="71px"/>
			</style>
			<bind name="instance" value="'AccountLevelingProgressItem'; isBarVisible ? {	_accountLevelingStepEntityID: accountLevelCarouselPositionEntity.id,
																		_carouselItemSelectedIndex: _carouselItemSelectedIndex} 
																	: null"/>
		</block>
	</block>
	<block className="AccountLevelingProgressItem">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'accountStepPoints'; 	['accountLevelingStepEntity.accountLevelCarouselPosition.evChanged']; 
											accountLevelingStepEntity.accountLevelCarouselPosition.points"/>
		<bind name="watchDH" value="'accountNextStepPoints'; ['accountLevelingStepEntity.accountLevelCarouselPosition.evNextStepPointsChanged']; 
											accountLevelingStepEntity.accountLevelCarouselPosition.nextStepPoints"/>
		<bind name="watch" value="'isProgressBarWithSteps'; accountNextStepPoints - accountStepPoints &lt; 16"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxStageWidth'; stageWidth &lt; 1920 ? stageWidth : 1920"/>
		<bind name="watch" value="'widthOfItem'; math.round((maxStageWidth-1280)/(1920-1280)*(424-332)+332)"/>
		<bind name="watch" value="'widthOfImg'; 164"/>
		<bind name="watch" value="'padding'; 0"/>
		<bind name="watch" value="'wholeWidth'; widthOfItem - widthOfImg - padding*2"/>
		<bind name="style" value="'width'; widthOfItem - widthOfImg + 'px'"/>
		<bind name="style" value="'paddingLeft'; padding + 'px'"/>
		<bind name="style" value="'paddingRight'; padding + 'px'"/>
		<bind name="child" value="isProgressBarWithSteps ? 0 : 1; {	_wholeWidth: wholeWidth,
													_carouselItemSelectedIndex: _carouselItemSelectedIndex,
													_accountLevelingStepEntityID: _accountLevelingStepEntityID};	'AccountStepsProgressWithRewards';
																													'AccountLineProgressWithRewards'"/>
	</block>
	<block className="AccountLineProgressWithRewards">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'stepPoints';		['accountLevelingStepEntity.accountLevelCarouselPosition.evThisStepPointsChanged']; 
										accountLevelingStepEntity.accountLevelCarouselPosition.points"/>
		<bind name="watchDH" value="'nextStepPoints';	['accountLevelingStepEntity.accountLevelCarouselPosition.evNextStepPointsChanged']; 
										accountLevelingStepEntity.accountLevelCarouselPosition.nextStepPoints"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'countSteps'; nextStepPoints - stepPoints"/>
		<bind name="watch" value="'widthStep'; (_wholeWidth-1)/countSteps"/>
		<style>
			<align value="center"/>
			<width value="100%"/>
			<height value="21px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
		<block>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<height value="1px"/>
					<width value="100%"/>
					<backgroundRepeatX value="true"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressRepeaterBG.png"/>
				</style>
			</block>
			<bind name="instance" value="'LineProgress';  {	_startStepPoints: stepPoints, 
											_finishStepPoints: nextStepPoints, 
											_currentProgressPoints: currentProgressPoints, 
											_widthStep:widthStep}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="LineProgress">
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
			<height value="100%"/>
		</style>
		<block>
			<bind name="style" value="'width'; math.round((_finishStepPoints - _startStepPoints) * _widthStep) - 1 + 'px'"/>
			<style>
				<height value="100%"/>
				<paddingTop value="2px"/>
				<paddingBottom value="2px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressBorderBG.png"/>
				<backgroundRepeatX value="true"/>
			</style>
			<block>
				<style>
					<height value="100%"/>
					<backgroundColor value="0xFFFFCC66"/>
				</style>
				<bind name="style" value="'width'; 	_currentProgressPoints &gt;= _finishStepPoints 	? '100%' :
									_currentProgressPoints &gt; _startStepPoints		? math.round((_currentProgressPoints - _startStepPoints) * _widthStep) + 'px'
																					: '0px'"/>
			</block>
		</block>
		<block>
			<style>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
	</block>
	<block className="AccountStepsProgressWithRewards">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'stepPoints'; 		['accountLevelingStepEntity.accountLevelCarouselPosition.evThisStepPointsChanged']; 
										accountLevelingStepEntity.accountLevelCarouselPosition.points"/>
		<bind name="watchDH" value="'nextStepPoints'; 	['accountLevelingStepEntity.accountLevelCarouselPosition.evNextStepPointsChanged']; 
										accountLevelingStepEntity.accountLevelCarouselPosition.nextStepPoints"/>
		<style>
			<align value="center"/>
			<width value="100%"/>
			<height value="21px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'stepsCount'; nextStepPoints - stepPoints"/>
		<bind name="watch" value="'trueStepsCount'; stepsCount &gt; 0 ? stepsCount : 1"/>
		<bind name="watch" value="'progressBarItemWidth'; math.round(_wholeWidth/trueStepsCount)"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<height value="1px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressRepeaterBG.png"/>
				<backgroundRepeatX value="true"/>
			</style>
			<bind name="style" value="'width'; progressBarItemWidth*trueStepsCount + 1 + 'px'"/>
		</block>
		<bind name="repeat" value="trueStepsCount; 'AccountProgressStep'; {	_progressBarItemWidth: progressBarItemWidth,
															_accountLevelingStepEntityID: _accountLevelingStepEntityID,
															_isSamePointReward: trueStepsCount != stepsCount}"/>
	</block>
	<block className="AccountProgressStep">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'stepPoints'; ['accountLevelingStepEntity.accountLevelCarouselPosition.evThisStepPointsChanged']; accountLevelingStepEntity.accountLevelCarouselPosition.points"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'sameLevelRewardHack'; _isSamePointReward &amp;&amp; currentProgressPoints &gt;= stepPoints"/>
		<bind name="watch" value="'isUnlocked'; $index &lt; currentProgressPoints - stepPoints || sameLevelRewardHack"/>
		<style>
			<height value="100%"/>
			<marginRight value="1px"/>
			<paddingTop value="2px"/>
			<paddingBottom value="2px"/>
			<backgroundRepeatX value="true"/>
			<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressBorderBG.png"/>
		</style>
		<bind name="style" value="'width'; _progressBarItemWidth - 1 + 'px'"/>
		<block>
			<bind name="visible" value="isUnlocked"/>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundColor value="0xFFFFCC66"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="-1px"/>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
	</block>
	<block className="ALCarouselPointer">
		<style>
			<width value="102px"/>
			<height value="11px"/>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../accountLevel/progressBarIcons/carousel_pointer_up.png'"/>
		<block>
			<bind name="transition" value="_isSelect; 0.07; {alpha: 0, scaleY:0, top: 11}; {alpha: 1, scaleY:1, top: 0}"/>
			<style>
				<position value="absolute"/>
				<width value="102px"/>
				<height value="11px"/>
				<backgroundSize value="fill"/>
			</style>
			<bind name="style" value="'backgroundImage';	'url:../accountLevel/progressBarIcons/carousel_pointer_toggle.png'"/>
		</block>
	</block>
	<block className="ALCarouselItemTitle">
		<bind name="transition" value="_isSelect; 0.07; {alpha: 0.7}; {alpha: 1}; {alpha: 0.7}"/>
		<block type="text">
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="text" value="_carouselItemTitle"/>
		</block>
	</block>
	<block className="AccountLevellingCarouselItemTooltip">
		<bind name="firstEntityDH" value="'myAccountEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'abuseStatus';  ['myAccountEntity.accountInfo.evAbuseStatusChanged']; myAccountEntity.accountInfo.abuseStatus"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; abuseStatus == SC.Common.ABUSE_STATUS.CONFIRMED"/>
		<bind name="entityDH" value="'accountLevelingStepEntity'; _featureEntityId"/>
		<bind name="watchDH" value="'accountStepPoints'; ['accountLevelingStepEntity.accountLevelCarouselPosition.evChanged']; 
										accountLevelingStepEntity.accountLevelCarouselPosition.points"/>
		<bind name="watch" value="'isPromo'; 		!!accountLevelingStepEntity.accountPromoRewardBanner"/>
		<bind name="watchDH" value="'promoTitle';	['accountLevelingStepEntity.accountPromoRewardBanner.evChanged']; 
									accountLevelingStepEntity.accountPromoRewardBanner.title"/>
		<bind name="watchDH" value="'promoDueDate';	['accountLevelingStepEntity.accountPromoRewardBanner.evChanged']; 
									accountLevelingStepEntity.accountPromoRewardBanner.expirationTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="timeFormat" value="promoDueDate; 'dd.MM.yy'; 'formattedDueDatePromoReward'; true"/>
		<bind name="watch" value="'timerText'; subst('IDS_PROMO_REWARD_DAYS_LEFT', [], { _date: formattedDueDatePromoReward })"/>
		<bind name="watchDH" value="'stepFeature';	['accountLevelingStepEntity.accountLevelingStep.evFeaturesChanged'];	
									accountLevelingStepEntity.accountLevelingStep.features"/>
		<bind name="watchDH" value="'stepLevel';	[];	accountLevelingStepEntity.accountLevelingStep.level"/>
		<bind name="primaryEntityDH" value="'featureEntity'; CC.accountFeature; stepFeature"/>
		<bind name="watchDH" value="'iconFeaturePath';	['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.iconPath"/>
		<bind name="watchDH" value="'titleFeature';		['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.title"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep'; accountStepPoints - currentProgressPoints"/>
		<bind name="watch" value="'isTimeLeftVisible'; battlesToStep &gt; 0 &amp;&amp; isPromo &amp;&amp; promoDueDate &gt; 1"/>
		<bind name="watch" value="'featureAlStatusIcon'; battlesToStep &lt; 1 		? SC.Ui_styles.UNIFIED_STATUS.CHECK :
										isAbuseStatusConfirmed 	? SC.Ui_styles.UNIFIED_STATUS.WARNING
																: SC.Ui_styles.UNIFIED_STATUS.LOCK"/>
		<bind name="watch" value="'featureAlStatusText'; battlesToStep &lt; 1 		? isPromo 	? 'IDS_ACCOUNT_LEVEL_CAROUSEL_TOOLTIP_REWARD_RECEIVED'
																			: 'IDS_AVAILABLE_ACCESS_LEVEL' :
										isAbuseStatusConfirmed 	? 'IDS_ACCOUNT_PROGRESS_ABUSED'
																: subst('IDS_BATTLES_TO_NEXT_STEP', [], {battles: battlesToStep}, battlesToStep)"/>
		<bind name="watch" value="'headerText'; isPromo ? promoTitle : titleFeature"/>
		<bind name="watch" value="'subheaderText'; isPromo ? 'IDS_PROMO_REWARD_HEADER' : subst('IDS_PROFILE_ACCOUNT_LEVEL', [], {_accountLevel: stepLevel})"/>
		<bind name="watch" value="'imageUrl'; 'url:' + (isPromo ? '../accountLevel/unlocks/icon_promo' : iconFeaturePath) + '_small.png'"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="360px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageWidth: '80px',
																_imageHeight: '80px',
																_imageUrl: imageUrl,
																_headerText: headerText,
																_subheaderText: subheaderText
																}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; { _unifiedStatus: featureAlStatusIcon,
													_text: featureAlStatusText}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isTimeLeftVisible"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	isTimeLeftVisible 	? {	_text: timerText,
																			_unifiedStatus: isTimeRunningOut	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																												: SC.Ui_styles.UNIFIED_STATUS.DATE} 
																		: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!_isSelect"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; !_isSelect ? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																	_text: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO'}
																: null"/>
			</block>
		</block>
	</block>

	<!-- achievements -->
	<block className="AchievementAppearAnimation">
		<bind name="appear" value="'addedToStage';	_animationOn ? 0.15 : 0; _animationOn ? 0.15 * $index + _delay : 0;
									{alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="primaryEntityDH" value="'achievementEntity'; CC.achievement; id"/>
		<style>
			<marginRight value="24px"/>
		</style>
		<block className="AchievementIcon" type="ublock">
			<bind name="build!" value="{	_id: achievementEntity.id,
						_amount: amount,
						_size: 56}"/>
		</block>
	</block>

	<!-- armour -->
	<block className="ArmourPickerControls">
		<bind name="inoutAction" value="'ShipArmor.showArmor'; 'ShipArmor.hideArmor'; {outer: true}"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; viewedShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'armorPick'; CC.shipArmorPick; viewedShipId; 'evUpdate'"/>
		<bind name="primaryEntityDH" value="'armorConfig'; CC.shipArmorConfig; viewedShipId; 'evUpdate'"/>
		<bind name="primaryEntityDH" value="'armorParts'; CC.shipStructuralParts; viewedShipId; 'evUpdate'"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'isNeedRepair';		['shipOwnEntity.ownShip.evUpdateDockState'];	shipOwnEntity.ownShip.isNeedRepair"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';	['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isInFormation"/>
		<bind name="watch" value="'canShowArmour'; 	!(isLocked &amp;&amp; !isInFormation)
									&amp;&amp; !isNeedRepair"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/inner_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!isLocked &amp;&amp; !isNeedRepair"/>
			<bind name="watch" value="'showBusyIndicator'; armorPick == undefined &amp;&amp; armorConfig == undefined"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="instance" value="'BusyIndicator'; showBusyIndicator ? { _label: 'IDS_BUSY_LOADING_ARMOUR', _showBusyIndicator: showBusyIndicator } : null"/>
		</block>
		<block>
			<bind name="visible" value="(shipOwnEntity != null &amp;&amp; ((isLocked &amp;&amp; !isInFormation) || isNeedRepair))"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<style>
					<width value="280px"/>
					<textAlign value="center"/>
				</style>
				<bind name="class" value="'$FontColorOrange'"/>
				<bind name="text" value="isLocked &amp;&amp; !isInFormation		? toUpperCase(tr('IDS_SHIP_IN_BATTLE')) :
						isNeedRepair					? toUpperCase(tr('IDS_NEED_SERVICE'))
														: ''"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<align value="center"/>
				<position value="absolute"/>
			</style>
			<bind name="transition" value="armorPick != undefined &amp;&amp; armorConfig != undefined &amp;&amp; canShowArmour; 0.15; {alpha: 0}; {alpha: 1}"/>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<flow value="htile"/>
					<align value="center"/>
				</style>
				<bind name="repeat" value="armorParts.shipStructuralParts.parts; 'ArmourModulePicker'; {	_mask: armorPick.shipArmorPick.selectedPartsMask,
																						_pickersCount: armorParts.shipStructuralParts.parts.length}; true"/>
			</block>
			<block>
				<bind name="transition" value="armorPick != undefined &amp;&amp; armorConfig != undefined &amp;&amp; canShowArmour; 0.15; {alpha: 0}; {alpha: 1}"/>
				<bind name="watch" value="'pickerWidth'; math.round(280/armorConfig.shipArmorConfig.armorRanges.length)"/>
				<style>
					<marginBottom value="8px"/>
					<align value="center"/>
				</style>
				<block className="inner_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<margin value="-2px"/>
					</style>
					<block>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
							<background9Slice value="[3]"/>
						</style>
					</block>
				</block>
				<bind name="repeat" value="armorConfig.shipArmorConfig.armorRanges; 'ArmourRangePicker'; {	_pickerWidth: pickerWidth,
																							_pickersCount: armorConfig.shipArmorConfig.armorRanges.length}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="armorPick.shipArmorPick"/>
				<bind name="appear" value="'addedToStage'; 0.07; 0.15; {alpha: 0, top: -5}; {alpha: 1, top: 0}"/>
				<bind name="watch" value="'armorRangeStr'; armorPick.shipArmorPick.thicknessMin == armorPick.shipArmorPick.thicknessMax ?
														(armorPick.shipArmorPick.thicknessMin + ' ' + tr('IDS_MILLIMETER'))
													:	(armorPick.shipArmorPick.thicknessMin + ' – ' + armorPick.shipArmorPick.thicknessMax + ' ' + tr('IDS_MILLIMETER'))"/>
				<style>
					<marginBottom value="12px"/>
				</style>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_SHIP_ARMOUR_WHOLE_RANGE' }"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<bind name="text" value="armorRangeStr"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ArmourRangePicker">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="action" value="'rollOver';	'ShipArmor.setArmorRangeVisible'; {rangeIdx:index, visible:true}"/>
		<bind name="action" value="'rollOut';	'ShipArmor.setArmorRangeVisible'; {rangeIdx:index, visible:false}"/>
		<style>
			<height value="14px"/>
			<width value="1px"/>
		</style>
		<bind name="style" value="'width'; _pickerWidth + 'px'"/>
		<bind name="appear" value="'addedToStage'; 0.05; (_pickersCount/2 - $index)*0.05*( $index &gt; _pickersCount/2 ? -1 : 1) + 0.05;
										{alpha: 0, left: 5*(_pickersCount/2-$index) };
										{alpha: 1, left: 0}"/>
		<block>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: tr('IDS_SHIP_ARMOUR_IN_RANGE') + ' ' + min + ' – ' + max + tr('IDS_MILLIMETER_SPACE') }"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="style" value="'width'; (_pickerWidth - 2) + 'px'"/>
			<style>
				<height value="10px"/>
				<width value="1px"/>
			</style>
			<bind name="style" value="'backgroundColor'; 0xFF000000 + color"/>
			<bind name="transition" value="rollOver; 0.1; {alpha: 0.8, width: _pickerWidth-2, height: 12}; {alpha: 1.0, width: _pickerWidth, height: 14}"/>
		</block>
	</block>
	<block className="ArmourModulePicker">
		<bind name="appear" value="'addedToStage'; 0.05;	(_pickersCount/2 - $index)*0.05*( $index &gt; _pickersCount/2 ? -1 : 1) + 0.15;
										{alpha: 0, left: 5*(-_pickersCount/2+$index) };
										{alpha: 1, left: 0}"/>
		<bind name="watch" value="'selected'; (_mask &amp; (1&lt;&lt;index)) != 0"/>
		<bind name="action" value="'click'; 'ShipArmor.setShipPartVisible'; {index:index, visible:!selected}"/>
		<bind name="soundSet" value="'button_armour'"/>
		<style>
			<width value="38px"/>
			<height value="38px"/>
			<marginLeft value="1px"/>
			<marginRight value="1px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
											_text: (selected ? 'IDS_HIDE_ARMOUR_' : 'IDS_SHOW_ARMOUR_') + type}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/armor_types/armor_bgr.png"/>
			</style>
		</block>
		<bind name="watch" value="'iconPathUp';		'url:../service_kit/armor_types/armor_' + type + '_up.png'"/>
		<bind name="watch" value="'iconPathToggle';	'url:../service_kit/armor_types/armor_' + type + '.png'"/>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
			<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
			<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
			<bind name="colorTransform" value="	true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'alpha'; selected ? 0 : 1"/>
				<bind name="style" value="'backgroundImage'; iconPathUp"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'alpha'; selected ? 1 : 0"/>
				<bind name="style" value="'backgroundImage'; iconPathToggle"/>
			</block>
		</block>
	</block>
	<block className="ArmourDisplaySwitcher">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isArmorVisible'; ['dockDataEntity.dockData.evIsArmorVisibleChanged']; dockDataEntity.dockData.isArmorVisible"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; viewedShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="action" value="'click'; isArmorVisible ? 'hideArmour' : 'showArmour'"/>
			<bind name="transition" value="(mouseDown || rollOver); 0.1; {alpha: 0}; {alpha: 1}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
				<background9Slice value="[3,3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="12px"/>
				<marginTop value="2px"/>
				<hitTest value="false"/>
			</style>
			<params>
				<param name="name" value="ButtonArmourDisplay"/>
			</params>
			<block className="button_expand" type="native">
				<style>
					<position value="absolute"/>
					<left value="8px"/>
					<width value="100%"/>
				</style>
				<params>
					<param name="toggle" value="true"/>
					<param name="soundSet" value="dropdown"/>
					<param name="focusable" value="false"/>
				</params>
				<bind name="selected" value="isArmorVisible"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="style" value="'textColor'; 0xFFFFFFFF"/>
				<style>
					<width value="100%"/>
					<marginLeft value="32px"/>
					<marginRight value="8px"/>
				</style>
				<bind name="text" value="'IDS_ARMOUR_SCHEME'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipInfoArmourBlock">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isArmorVisible'; ['dockDataEntity.dockData.evIsArmorVisibleChanged']; dockDataEntity.dockData.isArmorVisible"/>
		<style>
			<width value="100%"/>
			<height value="1px"/>
		</style>
		<bind name="transition" value="isArmorVisible; 0.15;	{height: 0, alpha: 0};
																{height: 108, alpha: 1};
																{height: 0, alpha: 0}"/>
		<bind name="var" value="{isArmourVisible: false}"/>
		<bind name="dispatch" value="isArmorVisible ? ('isArmorVisible' + varChanged) : null; 'hideArmorEv'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.15"/>
		<bind name="catch" value="'hideArmorEv'; {isArmourVisible: isArmorVisible}"/>
		<bind name="dispatch" value="isArmorVisible ? null : ('isArmorVisible' + varChanged); 'showArmorEv'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.05"/>
		<bind name="catch" value="'showArmorEv'; {isArmourVisible: isArmorVisible}"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'ArmourPickerControls'; isArmourVisible ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-1px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>

	<!-- background_animated_switcher -->
	<block className="BackgroundAnimatedSwitcher">
		<styleClass value="$Fullsize"/>
		<block className="BackgroundAnimatedSwitcher" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{	_bgSymbol: _bgSymbol,
						_isSpine: _isSpine ? _isSpine : false,
						_isFogEnabled: _isFogEnabled ? _isFogEnabled : false }"/>
		</block>
	</block>

	<!-- battle_exit_modal_window -->
	<block className="ConfirmExitBattleModalWindow">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'isTrainingBattle';	battleDataEntity.battleInfo.battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isNotBattleIdling';	battleDataEntity.battleState.battleState != SC.Common.CLIENT_BATTLE_STATE.END_BATTLE_IDLING"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="firstEntityDH" value="'avatar'; CC.playerAvatar"/>
		<bind name="watchDH" value="'isAlive'; ['avatar.health.evIsAliveChanged']; avatar.health.isAlive"/>
		<bind name="watchDH" value="'respawnEndTime'; ['avatar.playerAvatar.evRespawnEndTimeChanged']; avatar.playerAvatar.respawnEndTime"/>
		<bind name="watch" value="'isEarlyExit';	isAlive &amp;&amp; isNotBattleIdling || respawnEndTime &gt; 0"/>
		<bind name="collectionDH" value="CC.avatar; 'avatarConnectedCollection'; 'connected'"/>
		<bind name="watch" value="'isOnlyBotsInBattle'; !isAlive &amp;&amp; avatarConnectedCollection.length == 1 &amp;&amp; battleType != SC.Common.BATTLE_TYPES.RANDOM_BATTLE"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'accountLevel';  ['selfPlayerEntity.accountLevel.evLevelChanged']; selfPlayerEntity.accountLevel.level"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.preBattle"/>
		<bind name="firstEntityDH" value="'continuousBattleEnterEntity'; CC.continuousBattleEnter"/>
		<bind name="watchDH" value="'warningsMask';	['continuousBattleEnterEntity.continuousBattleEnter.evChanged']; continuousBattleEnterEntity.continuousBattleEnter.warningsMask"/>
		<bind name="watch" value="'isAgainToBattleButtonVisible';	!isAlive &amp;&amp;
													accountLevel &gt;= SC.Common.ACCOUNT_LEVEL.BATTLE_BONUSES &amp;&amp;
													!divisionDataEntity &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_TYPE)) &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_SHIP)) &amp;&amp;
	 												battleType != SC.Common.BATTLE_TYPES.CLAN_BATTLE &amp;&amp;
	 												battleType != SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'headerExitBattle';	isTrainingBattle				? 'IDS_WINDOW_HEADER_CONFIRMATION' :
										isEarlyExit						? 'IDS_WINDOW_HEADER_EARLY_EXIT_BATTLE' :
										isOnlyBotsInBattle				? 'IDS_WINDOW_HEADER_BATTLE_RESULT' :
										isAgainToBattleButtonVisible	? 'IDS_CONFIRM_EXIT_BATTLE_HEADER'
																		: 'IDS_WINDOW_HEADER_CONFIRMATION'"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'SmallModalWindow'; { _headerText: headerExitBattle,
											  _contentElement: 'ConfirmExitBattleContent' }"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<top value="20px"/>
				<right value="20px"/>
			</style>
			<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
		</block>
	</block>
	<block className="ConfirmExitBattleContent">
		<bind name="firstEntityDH" value="'customElementsVisibilityEntity'; CC.customElementsVisibility"/>
		<bind name="watchDH" value="'customisedElements'; ['customElementsVisibilityEntity.customElementsVisibility.evChanged']; customElementsVisibilityEntity.customElementsVisibility.customisedElements"/>
		<bind name="watch" value="'isCustomBattleWarning'; (customisedElements &amp; (1 &lt;&lt; SC.Battle.CUSTOM_BATTLE_ELEMENTS.EXIT_BATTLE_WARNING)) &gt; 0"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="watch" value="'isTrainingBattle';	battleDataEntity.battleInfo.battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isNotBattleIdling';	battleDataEntity.battleState.battleState != SC.Common.CLIENT_BATTLE_STATE.END_BATTLE_IDLING"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'accountLevel';  ['selfPlayerEntity.accountLevel.evLevelChanged']; selfPlayerEntity.accountLevel.level"/>
		<bind name="firstEntityDH" value="'continuousBattleEnterEntity'; CC.continuousBattleEnter"/>
		<bind name="watchDH" value="'warningsMask';	['continuousBattleEnterEntity.continuousBattleEnter.evChanged']; continuousBattleEnterEntity.continuousBattleEnter.warningsMask"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.preBattle"/>
		<bind name="firstEntityDH" value="'spectatorStateEntity'; CC.spectatorState"/>
		<bind name="watchDH" value="'isTrainingRoomSpectator'; []; spectatorStateEntity  ? spectatorStateEntity.spectatorState.state == SC.Common.SPECTATOR_STATE.TRAINING_SPECTATOR
																		: false"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="firstEntityDH" value="'avatar'; CC.playerAvatar"/>
		<bind name="watchDH" value="'isAlive'; ['avatar.health.evIsAliveChanged']; avatar.health.isAlive"/>
		<bind name="watchDH" value="'respawnEndTime'; ['avatar.playerAvatar.evRespawnEndTimeChanged']; avatar.playerAvatar.respawnEndTime"/>
		<bind name="watch" value="'isEarlyExit';	isAlive &amp;&amp; isNotBattleIdling || respawnEndTime &gt; 0"/>
		<bind name="collectionDH" value="CC.avatar; 'avatarConnectedCollection'; 'connected'"/>
		<bind name="watch" value="'isOnlyBotsInBattle'; !isAlive &amp;&amp; avatarConnectedCollection.length == 1 &amp;&amp; battleType != SC.Common.BATTLE_TYPES.RANDOM_BATTLE"/>
		<bind name="watch" value="'isImageVisible'; isEarlyExit &amp;&amp; !isTrainingBattle"/>
		<bind name="watch" value="'descriptionContent';	isTrainingBattle						? null :
										isCustomBattleWarning &amp;&amp; isEarlyExit	? 'IDS_EARLY_EXIT_BATTLE_' + gameMode :
										isEarlyExit								? 'IDS_EARLY_EXIT_BATTLE_ATTENTION' :
										isOnlyBotsInBattle						? 'IDS_CONFIRMATION_AUTO_FIN_BATTLE_AFTER_EXIT'
																				: null"/>
		<bind name="watch" value="'isAgainToBattleButtonVisible';	!isAlive &amp;&amp;
													accountLevel &gt;= SC.Common.ACCOUNT_LEVEL.BATTLE_BONUSES &amp;&amp;
													!divisionDataEntity &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_TYPE)) &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_SHIP)) &amp;&amp;
	 												battleType != SC.Common.BATTLE_TYPES.CLAN_BATTLE &amp;&amp;
	 												battleType != SC.Common.BATTLE_TYPES.TRAINING_BATTLE &amp;&amp;
	 												respawnEndTime == 0"/>
		<bind name="watch" value="'question'; isAgainToBattleButtonVisible	?	isOnlyBotsInBattle ? 'IDS_CONFIRM_ENTER_BATTLE' : 'IDS_QUESTION_CONFIRM_BATTLE_EXIT'
															:	'IDS_CONFIRM_EXIT_BATTLE'"/>
		<bind name="watch" value="'isQuestionVisible'; (isTrainingBattle &amp;&amp; isEarlyExit) || !isEarlyExit"/>
		<bind name="watch" value="'delayAnimation'; descriptionContent ? 4 : 2"/>
		<bind name="watch" value="'focusBtn'; isImageVisible ? 2 : 1"/>
		<bind name="watch" value="'imageName'; isCustomBattleWarning ? 'premature_battle_exit_' + gameMode : 'premature_battle_exit'"/>
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="visible" value="isImageVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="470px"/>
				<height value="200px"/>
				<marginTop value="16px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/premature_exit/' + imageName + '.png'"/>
		</block>
		<block>
			<bind name="visible" value="descriptionContent"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block type="text">
				<style>
					<textAlign value="center"/>
					<width value="100%"/>
					<alpha value="0.75"/>
					<marginTop value="24px"/>
				</style>
				<styleClass value="$TextDefault21NM"/>
				<bind name="text" value="descriptionContent"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="descriptionContent"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="24px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isQuestionVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; delayAnimation*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; delayAnimation * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<style>
					<textAlign value="center"/>
					<alpha value="0.9"/>
					<marginTop value="24px"/>
				</style>
				<styleClass value="$TextDefault21NM"/>
				<bind name="text" value="question"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<bind name="style" value="'marginTop'; isAgainToBattleButtonVisible ? '24px' : 0"/>
			<bind name="instance" value="'ModalWindowOkCancel'; isAgainToBattleButtonVisible ? null : {_appearOrder: delayAnimation + 1, _focusBtn: focusBtn}"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; (delayAnimation + 0.5)*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; (delayAnimation + 0.5) * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="style" value="'marginRight'; isAgainToBattleButtonVisible ? '24px' : 0"/>
				<bind name="instance" value="'DefaultButton'; isAgainToBattleButtonVisible	? {	_width: '129px',
																				_enabled: true,
																				_isTransactionBtn: true,
																				_label: 'IDS_TO_DOCK',
																				_name: 'btn_to_dock',
																				_focusIndex: 1 }
																			: null"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; delayAnimation*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; delayAnimation * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; isAgainToBattleButtonVisible	? {	_width: '129px',
																				_enabled: true,
																				_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
																				_isTransactionBtn: true,
																				_label: 'IDS_AGAIN',
																				_name: 'btn_again_to_battle',
																				_focusIndex: 0,
																				_defaultFocused: true}
																			: null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!isAlive &amp;&amp; !isTrainingRoomSpectator"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; (delayAnimation + 4)*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleVHAbsolutely"/>
			<block>
				<style>
					<top value="45sh"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
												_label: 'IDS_BUTTON_TITLE_OPEN_GAMEMENU',
												_request: 'openGameMenu',
												_enabled: true}"/>
			</block>
		</block>
	</block>

	<!-- battle_loading -->
	<block className="BattleLoading">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="firstEntityDH" value="'spectatorStateEntity'; CC.spectatorState"/>
		<bind name="watchDH" value="'isTrainingRoomSpectator'; []; spectatorStateEntity  ? spectatorStateEntity.spectatorState.state == SC.Common.SPECTATOR_STATE.TRAINING_SPECTATOR
																		: false"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watchDH" value="'battleInfoComponent'; []; battleDataEntity.battleInfo"/>
		<bind name="watch" value="'battleType';			battleInfoComponent.battleType"/>
		<bind name="watch" value="'gameModeId';			battleInfoComponent.gameModeId"/>
		<bind name="watch" value="'mapId';				battleInfoComponent.mapId"/>
		<bind name="watch" value="'battleTypeGPName';	battleInfoComponent.battleTypeGameParamsName"/>
		<bind name="firstEntityDH" value="'customElementsVisibilityEntity'; CC.customElementsVisibility"/>
		<bind name="watchDH" value="'enabledElements'; ['customElementsVisibilityEntity.customElementsVisibility.evChanged']; customElementsVisibilityEntity.customElementsVisibility.enabledElements"/>
		<bind name="watchDH" value="'disabledElements'; ['customElementsVisibilityEntity.customElementsVisibility.evChanged']; customElementsVisibilityEntity.customElementsVisibility.disabledElements"/>
		<bind name="watch" value="'isTipsTabDisabled'; (disabledElements &amp; (1 &lt;&lt; SC.Battle.CUSTOM_BATTLE_ELEMENTS.LOADING_TIPS_TAB)) &gt; 0"/>
		<bind name="watch" value="'isCustomEventMap'; (enabledElements &amp; (1 &lt;&lt; SC.Battle.CUSTOM_BATTLE_ELEMENTS.CUSTOM_EVENT_MAP)) &gt; 0"/>
		<bind name="primaryEntityDH" value="'mapInfoEntity'; CC.mapInfo; mapId"/>
		<bind name="watch" value="'mapBGPath'; isCustomEventMap &amp;&amp; battleTypeGPName ? 'url:../maps_bg/' + battleTypeGPName + '.jpg' : 'url:' + mapInfoEntity.mapInfo.mapBGPath"/>
		<bind name="watch" value="'isClanBattle';		battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<bind name="watch" value="'isRandomBattle';		battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE"/>
		<bind name="watch" value="'isPveBattle';			battleType == SC.Common.BATTLE_TYPES.PVE_BATTLE"/>
		<bind name="watch" value="'isCooperativeBattle';	battleType == SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE"/>
		<bind name="watch" value="'isEventBattle';		battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'eventBattleName'; isEventBattle ? selectedBattleTypes[0].eventBattleState.name : null"/>
		<bind name="firstEntityDH" value="'myAvatarEntity'; CC.playerAvatar"/>
		<bind name="watchDH" value="'divisionId';	['myAvatarEntity.preBattlePlayerSimple.evPreBattleIdChanged']; myAvatarEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'pureName';		[]; myAvatarEntity.avatar.pureName"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; pureName"/>
		<bind name="watchDH" value="'isSpeaking'; 	['playerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; 	playerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="watch" value="'isBattletypeWithDynamicDivisions';	isIn(battleType, SC.Common.BATTLE_TYPES.DYNAMIC_DIVISION_AVAILABLE)"/>
		<bind name="watch" value="'battleLoadingTabIndex'; userPrefs.battleLoadingTabIndex"/>
		<bind name="watch" value="'isFirstBattle'; battleInfoComponent.scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'isDynamicDivisionsEnabled'; isBattletypeWithDynamicDivisions &amp;&amp; !isFirstBattle"/>
		<bind name="watch" value="'isCurrentBattleActiveEvent'; isEventBattle &amp;&amp; (eventBattleName == 'PCVE021' || eventBattleName == 'PCVE026')"/>
		<bind name="watch" value="'isFirstArmsRaceBattle';	gameModeId == SC.Battle.GAME_MODE.ARMS_RACE &amp;&amp;
											(userPrefs.armsRaceInstructionsSeen == null || !userPrefs.armsRaceInstructionsSeen)"/>
		<bind name="watch" value="'isForcedSwitchFromTips'; isTipsTabDisabled &amp;&amp; battleLoadingTabIndex == SC.Common.BATTLE_LOADING_TAB.TIPS"/>
		<bind name="watch" value="'isForcedSwitchFromDivisions'; (battleLoadingTabIndex == SC.Common.BATTLE_LOADING_TAB.DYNAMIC_DIVISIONS) &amp;&amp; !isDynamicDivisionsEnabled"/>
		<bind name="watch" value="'isForcedSwitchToTasks'; isFirstArmsRaceBattle || isForcedSwitchFromTips"/>
		<bind name="watch" value="'isForcedSwitchToTips';	isForcedSwitchFromDivisions ||
											isCurrentBattleActiveEvent ||
											battleLoadingTabIndex == null"/>
		<bind name="action" value="'addedToStage'; 	isTrainingRoomSpectator ||
									isForcedSwitchToTasks ||
									isForcedSwitchToTips	? 'setUserPref'
															: null;
								{ name:		'battleLoadingTabIndex',
								  value:	isTrainingRoomSpectator			? SC.Common.BATTLE_LOADING_TAB.TEAMS :
											isForcedSwitchToTasks			? SC.Common.BATTLE_LOADING_TAB.TASKS
																			: SC.Common.BATTLE_LOADING_TAB.TIPS }"/>
		<bind name="watch" value="'isVoiceChatEnabled';	isClanBattle ||
										(divisionId != 0 &amp;&amp; (isRandomBattle || isCooperativeBattle || isPveBattle))"/>
		<bind name="stageSize"/>
		<bind name="dispatch" value="'addedToStage'; isFirstArmsRaceBattle ? 'makeArmsRaceRulesSeen' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 1"/>
		<bind name="action" value="'makeArmsRaceRulesSeen'; 'setUserPref'; {value: true, name: 'armsRaceInstructionsSeen'}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; mapBGPath"/>
		</block>
		<bind name="appear" value="'addedToStage'; 0.15; 0.2; {alpha: 0}; {alpha: 1}"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block type="text">
			<bind name="appear" value="'startShowContent'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
				<position value="absolute"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="dispatch" value="'addedToStage'; 'startShowContent'"/>
			<bind name="appear" value="'startShowContent'; 0.15; 0.35; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="action" value="'addedToStage'; 'BattleHints.refresh'; {}"/>
			<block>
				<bind name="visible" value="!isTrainingRoomSpectator"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="720:16,1080:32ah"/>
				</style>
				<block className="BattleLoadingMainTabButtons" type="ublock">
					<bind name="build!" value="{	_isTipsTabDisabled:	isTipsTabDisabled,
								_isDynamicDivisionsEnabled:	isDynamicDivisionsEnabled }"/>
				</block>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginTop value="720:32,1080:64ah"/>
				</style>
				<block>
					<styleClass value="$MiddleAligned"/>
					<style>
						<height value="100%"/>
					</style>
					<bind name="style" value="'width'; (battleLoadingTabIndex == SC.Common.BATTLE_LOADING_TAB.TASKS) ? '1280px': '843px'"/>
					<bind name="child" value="battleLoadingTabIndex;
								{	_isBattleLoading: true,
									_isDynamicDivisionsEnabled: isDynamicDivisionsEnabled};
								'Tasks'; 'TeamBattlePage'; 'BattleTipsContent'; 'DynamicDivisions'"/>
				</block>
				<block>
					<bind name="visible" value="!isTrainingRoomSpectator"/>
					<bind name="style" value="'right'; (stageWidth - 1280) / 4"/>
					<style>
						<width value="1280:210,1920:260aw"/>
						<marginRight value="-50%"/>
						<position value="absolute"/>
					</style>
					<bind name="child" value="battleLoadingTabIndex; {	_isDynamicDivisionsEnabled: isDynamicDivisionsEnabled,
														_isVoiceChatEnabled: isVoiceChatEnabled};
											'EmptyItem'; 'EmptyItem'; 'EmptyItem'; 'DynamicDivisionsRightPanel'; 'EmptyItem'"/>
				</block>
				<block>
					<bind name="appear" value="'startShowContent'; 0.15; 0.45; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<style>
						<marginTop value="16px"/>
						<height value="720:104,1080:112ah"/>
						<width value="100%"/>
					</style>
					<block className="FooterWrapperForBattle" type="ublock">
						<style>
							<position value="absolute"/>
							<bottom value="0px"/>
							<width value="100%"/>
						</style>
						<bind name="build!" value="{}"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$BottomMenu"/>
				<block>
					<style>
						<marginLeft value="10px"/>
						<marginTop value="4px"/>
						<width value="19px"/>
						<height value="17px"/>
					</style>
					<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isSpeaking: isSpeaking}"/>
				</block>
			</block>
			<block>
				<bind name="watch" value="'invitationBottomOffset'; 17+(stageHeight-720)/3"/>
				<bind name="style" value="'bottom'; invitationBottomOffset"/>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="collectionRepeatDH" value="CC.invitationToDivision; 'BattleDivisionInvitationItem'; ''; {_isBattleLoading: true}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="Tasks">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType'; battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId'; battleDataEntity.battleInfo.gameModeId"/>
		<style>
			<paddingLeft value="36px"/>
			<paddingRight value="36px"/>
			<marginTop value="32px"/>
			<width value="100%"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<bind name="appear" value="'addedToStage'; 0.15; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<style>
				<width value="760px"/>
				<position value="absolute"/>
			</style>
			<bind name="child" value="(gameModeId != null ? (gameModeId == GameMode.PVE	? 1
																		: 2)
										 : 0); { };	'EmptyItem';
													'BattleLoadingPVETasks';
													'BattleLoadingStandartTasks'"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
			</style>
			<bind name="appear" value="'startShow'; 0.15; 0.54; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<block className="BattleMinimapUb2" type="ublock">
				<bind name="build!" value="{ _isLoading: true }"/>
			</block>
		</block>
	</block>
	<block className="BattleLoadingStandartTasks">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="watch" value="'gameModeDescription';	battleDataEntity.battleInfo.gameModeDescription"/>
		<bind name="watch" value="'gameModeGoal'; gameModeId == GameMode.KEY_BATTLE || gameModeId == GameMode.PORTAL_2021 || gameModeId == GameMode.TEAM_BATTLE_ROYALE_2021	? 'IDS_YOUR_GOAL' :
								 gameModeId == GameMode.BATTLE_CHALLENGES || gameModeId == GameMode.BATTLE_TRIALS											? 'IDS_JUST_GOAL'
																																							: 'IDS_TEAM_GOALS'"/>
		<bind name="firstEntityDH" value="'customElementsVisibilityEntity'; CC.customElementsVisibility"/>
		<bind name="watchDH" value="'enabledElements'; ['customElementsVisibilityEntity.customElementsVisibility.evChanged']; customElementsVisibilityEntity.customElementsVisibility.enabledElements"/>
		<bind name="watch" value="'isChallengeDisciplinesVisible'; (enabledElements &amp; (1 &lt;&lt; SC.Battle.CUSTOM_BATTLE_ELEMENTS.DISCIPLINES_ON_LOADING)) &gt; 0"/>
		<bind name="watch" value="'isTrialsDescriptionVisible'; (enabledElements &amp; (1 &lt;&lt; SC.Battle.CUSTOM_BATTLE_ELEMENTS.TRIALS_DESCR_ON_LOADING)) &gt; 0"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="appear" value="'startShow'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$TextDefaultBold23NM"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="text" value="gameModeGoal"/>
		</block>
		<block type="text">
			<bind name="appear" value="'startShow'; 0.15; 0.47; {alpha: 0, top: 10}; {alpha: 0.9, top: 0}"/>
			<style>
				<width value="100%"/>
				<marginBottom value="32px"/>
				<leading value="-3"/>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="gameModeDescription"/>
		</block>
		<bind name="watch" value="'bulletsCount';			gameModeId == GameMode.ANTI_STANDARD		? 2:
											gameModeId == GameMode.ATTACK_DEFENSE		? 5:
											gameModeId == GameMode.TEAM_BATTLE_ROYALE	? 3:
											gameModeId == GameMode.ARMS_RACE			? 2:
											gameModeId == GameMode.PORTAL_2021			? 1
																						: null "/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="bulletsCount"/>
			<bind name="instance" value="'GameModeRulesDescription'; bulletsCount ? {_bulletsCount: bulletsCount, _gameMode: gameMode} : null"/>
		</block>
		<block>
			<bind name="visible" value="gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
			<style>
				<marginTop value="16"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<marginBottom value="16"/>
				</style>
				<styleClass value="$TextDefaultBold23NM"/>
				<bind name="text" value="'IDS_GAMEMODE_TEAM_BATTLE_ROYALE_RULES_HEADER'"/>
			</block>
			<bind name="repeat" value="3; 'GameModeRulesDescriptionWithIcons'; gameModeId == GameMode.ESCAPE_TO_PORTAL ? {} : null"/>
		</block>
		<bind name="var" value="{specialGameModeExtraDescriptions: 0}"/>
		<bind name="watch" value="'specialGameModeExtraDescriptions';	gameModeId == GameMode.ARMS_RACE  			? 4 :
											gameModeId == GameMode.PORTAL_2021			? 4 :
											gameModeId == GameMode.CONVOY_EVENT			? 2 :
											gameModeId == GameMode.CONVOY_AIRSHIP		? 4 :
											gameModeId == GameMode.TEAM_BATTLE_ROYALE	? 2
																						: null "/>
		<block>
			<bind name="stageSize"/>
			<bind name="visible" value="specialGameModeExtraDescriptions &gt; 0 &amp;&amp; stageHeight &gt;= 900"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="specialGameModeExtraDescriptions"/>
				<bind name="instance" value="'GameModeRulesDescriptionWithIconsBlock'; specialGameModeExtraDescriptions ? {_bulletsCount: specialGameModeExtraDescriptions, _gameMode: gameMode} : null"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; 0.54; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="collectionDH" value="CC.holdingPointsMessage; 'holdingPointsMessage'"/>
			<bind name="visible" value="holdingPointsMessage.length &gt; 0 "/>
			<style>
				<width value="100%"/>
				<marginTop value="0px"/>
				<marginBottom value="12px"/>
			</style>
			<block>
				<block type="text">
					<styleClass value="$TextDefaultBold23NM"/>
					<style>
						<width value="100%"/>
						<marginBottom value="12px"/>
					</style>
					<bind name="text" value="tr('IDS_CHARGING_POINTS')"/>
				</block>
				<block>
					<style>
						<marginTop value="9px"/>
					</style>
					<bind name="instance" value="'PointsCharge'; {}"/>
				</block>
			</block>
		</block>
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'LocalWeatherDescription'; localWeatherEntity ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="gameModeId == GameMode.FORTS"/>
			<bind name="appear" value="'startShow'; 0.15; 0.6; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<style>
				<marginTop value="14px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold23NM"/>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="text" value="tr('IDS_GAMEMODE_FORTS_GOAL_TITLE')"/>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
					<leading value="-3"/>
					<alpha value="0.85"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<bind name="substitute" value="5; {	'[icon_1]' : 'icon_ground_artillery_type_1_ally',
										'[icon_2]' : 'icon_ground_radar_ally',
										'[icon_3]' : 'icon_ground_artillery_type_1_enemy',
										'[icon_4]' : 'icon_ground_radar_enemy'};
										tr('IDS_GAMEMODE_FORTS_GOAL_DESCRIPTION')"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isChallengeDisciplinesVisible"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'BattleChallengesDescriptionOnLoadingContainer'; isChallengeDisciplinesVisible ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isTrialsDescriptionVisible"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'BattleTrialsDescriptionOnLoadingContainer'; isTrialsDescriptionVisible ? {} : null"/>
		</block>
	</block>
	<block className="BattleChallengesDescriptionOnLoadingContainer">
		<style>
			<width value="100%"/>
		</style>
		<block className="BattleChallengesDescriptionOnLoadingContainer" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="BattleTrialsDescriptionOnLoadingContainer">
		<style>
			<width value="100%"/>
		</style>
		<block className="BattleTrialsDescriptionOnLoadingContainer" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="GameModeRulesDescription">
		<style>
			<width value="100%"/>
			<marginBottom value="12px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="'IDS_' + toUpperCase(_gameMode) + '_RULES_HEADER'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
			</style>
			<bind name="watch" value="'useBullets'; _bulletsCount &gt; 1"/>
			<bind name="repeat" value="_bulletsCount; 'ListWithBulletsElement'; {_marginBottom: '12px', _textClass: '$TextDefault19NM', _textAlpha: 0.9, _text: ('IDS_' + toUpperCase(_gameMode) + '_RULES_BULLET_'), _bulletIndex: true, _bulletType: useBullets ?  '•' : 'none'}"/>
		</block>
	</block>
	<block className="GameModeRulesDescriptionWithIconsBlock">
		<style>
			<marginBottom value="12px"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="visible" value="!_hideHeader"/>
			<styleClass value="$TextDefaultBold23NM"/>
			<style>
				<marginBottom value="16"/>
			</style>
			<bind name="text" value="'IDS_' + toUpperCase(_gameMode) + '_ICON_RULES_HEADER'"/>
		</block>
		<bind name="repeat" value="_bulletsCount; 'GameModeRulesDescriptionWithIcons'; {_textClass: '$TextDefault19NM', _hideHeader: true}"/>
	</block>
	<block className="GameModeRulesDescriptionWithIcons">
		<style>
			<width value="100%"/>
			<marginBottom value="12px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'teamId'; []; selfPlayerEntity.avatar.teamId"/>
		<bind name="watch" value="'iconPostfix'; gameModeId == GameMode.CONVOY_EVENT ? '_' + teamId : ''"/>
		<block>
			<style>
				<marginRight value="8"/>
				<backgroundSize value="cover"/>
				<width value="30px"/>
				<height value="30px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../battle_tasks/rules/icon_rules_' + toLowerCase(gameMode) + '_' + $index + iconPostfix + '.png'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
			</style>
			<block type="text">
				<bind name="visible" value="!_hideHeader"/>
				<style>
					<width value="100%"/>
					<marginBottom value="8"/>
				</style>
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="class" value="_headerTextClass ? _headerTextClass : null"/>
				<bind name="text" value="'IDS_GAMEMODE_' + toUpperCase(gameMode) + '_RULES_DESCRIPTION_TITLE_' + $index"/>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefaultNM"/>
				<bind name="class" value="_textClass ? _textClass : null"/>
				<bind name="text" value="'IDS_GAMEMODE_' + toUpperCase(gameMode) + '_RULES_DESCRIPTION_TEXT_' + $index"/>
			</block>
		</block>
	</block>
	<block className="TeamBattlePage">
		<bind name="firstEntityDH" value="'selectedShipInfoEntity'; CC.selectedShipInfo"/>
		<bind name="watchDH" value="'selectedAvatarId'; ['selectedShipInfoEntity.selectedShipInfo.evChanged']; selectedShipInfoEntity.selectedShipInfo.selectedAvatarId"/>
		<styleClass value="$MiddleAligned"/>
		<styleClass value="$DefaultScrollBar"/>
		<style>
			<height value="100%"/>
			<paddingLeft value="4px"/>
		</style>
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<block className="TeamBattlePage" type="ublock">
			<style>
				<maxHeight value="417"/>
			</style>
			<bind name="build!" value="{	_isDynamicDivisionsEnabled:	_isDynamicDivisionsEnabled,
						_isBattleLoading:			_isBattleLoading	? _isBattleLoading	: false,
						_isBattleStats:				_isBattleStats		? _isBattleStats	: false }"/>
		</block>
		<block className="ShipInfoOnTeamBattlePage" type="ublock">
			<bind name="visible" value="selectedAvatarId != 0"/>
			<style>
				<maxHeight value="276"/>
				<marginTop value="720:16,1080:32ah"/>
			</style>
			<bind name="build!" value="{	_isBattleStats:	_isBattleStats ? _isBattleStats : false }"/>
		</block>
	</block>
	<block className="BattleTipsContent">
		<params>
			<param name="name" value="BattleTipsContent"/>
		</params>
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="firstEntityDH" value="'battleHintsEntity'; CC.battleHints"/>
		<bind name="watchDH" value="'hints'; ['battleHintsEntity.battleHints.refreshData']; battleHintsEntity.battleHints.hints"/>
		<bind name="watchDH" value="'currentImageIdx'; ['battleHintsEntity.battleHints.refreshData']; battleHintsEntity.battleHints.currentImageIdx"/>
		<style>
			<marginTop value="720:0,1080:32ah"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<bind name="instance" value="'GalleryViewer';	{	_galleryItemRenderer: 'BattleGalleryItem',
											_galleryItemRendererParams: hints,
											_galleryItemRendererImageIndicator: 'SelectedImageIndicator',
											_galleryImageWidth: 900,
											_galleryImageHeight: 382,
											_autoSwitchDelay: 8,
											_currentImageIdx: (currentImageIdx + 1),
											_fakeHitboxWidth: 200 }"/>
	</block>
	<block className="DynamicDivisionsRightPanel">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RightPanelInfo'; {_headerText: 'IDS_DIVISIONS_IN_BATTLE_HEADER', _infoText: 'IDS_DYNAMIC_DIVISIONS_INFO'}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="instance" value="'VoiceChatRightPanelControl'; _isVoiceChatEnabled ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="instance" value="'InvitationsToDivisionRightPanelControl'; _isDynamicDivisionsEnabled ? {} : null"/>
		</block>
	</block>
	<block className="FogOfWarRightPanel">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'RightPanelInfo'; {_headerText: toUpperCase(tr('IDS_FOG_OF_WAR')), _infoText: 'IDS_FOG_OF_WAR_TIPS'}"/>
	</block>
	<block className="VoiceChatRightPanelControl">
		<bind name="primaryEntityDH" value="'voiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'voiceChatEnabled'; ['voiceChatEnabledEntity.preference.evValueChanged']; voiceChatEnabledEntity.preference.value"/>
		<bind name="appear" value="_isBattleStats ?	null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<marginTop value="16px"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_ENABLE_VOICE_CHAT_IN_BATTLE_HINT'}"/>
		<bind name="instance" value="'CheckBox'; {	_isChecked: voiceChatEnabled,
											_label: 'IDS_ENABLE_VOICE_CHAT',
											_maxTfWidth: 180,
											_directEvent: 'option.set',
											_directEventParams: {preferenceId: 'sound.voice.chat.enabled', newValue: !voiceChatEnabled}}"/>
	</block>
	<block className="InvitationsToDivisionRightPanelControl">
		<bind name="appear" value="_isBattleStats ?	null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<marginTop value="16px"/>
		</style>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'invitationsEnabled';    ['selfPlayerEntity.battleInvite.evInvitationsEnabledChanged']; selfPlayerEntity.battleInvite.invitationsEnabled"/>
		<bind name="instance" value="'CheckBox'; {	_isChecked: invitationsEnabled,
									_label: 'IDS_ENABLE_INVITATIONS_TO_DIVISION',
									_maxTfWidth: 180,
									_action: 'toggleInvitationsEnabled'}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_ENABLE_INVITATIONS_TO_DIVISION_IN_BATTLE_HINT'}"/>
	</block>
	<block className="BattleDivisionInvitationItem">
		<bind name="dataRefDH" value="'invitationToDivisionEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'senderLevel'; ['invitationToDivisionEntity.invitationToDivision.evUpdate']; invitationToDivisionEntity.invitationToDivision.senderLevel"/>
		<bind name="watchDH" value="'senderRank'; ['invitationToDivisionEntity.invitationToDivision.evUpdate']; invitationToDivisionEntity.invitationToDivision.senderRank"/>
		<bind name="watchDH" value="'senderName'; ['invitationToDivisionEntity.invitationToDivision.evUpdate']; invitationToDivisionEntity.invitationToDivision.senderName"/>
		<bind name="watchDH" value="'isAbuser'; ['invitationToDivisionEntity.invitationToDivision.evUpdate']; invitationToDivisionEntity.invitationToDivision.isAbuser"/>
		<bind name="watchDH" value="'expirationTime'; ['invitationToDivisionEntity.invitationToDivision.evUpdate']; invitationToDivisionEntity.invitationToDivision.expirationTime"/>
		<bind name="watchDH" value="'preBattleId'; ['invitationToDivisionEntity.invitationToDivision.evUpdate']; invitationToDivisionEntity.invitationToDivision.preBattleId"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="appear" value="'addedToStage'; 0.3; 0.35; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<marginLeft value="5px"/>
			<width value="260px"/>
			<height value="123px"/>
			<marginRight value="10px"/>
			<marginBottom value="6px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<bind name="visible" value="!_isBattleStats &amp;&amp; isBlurEnabled"/>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_isBattleLoading || !isBlurEnabled || contrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="26px"/>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="4px"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="1px"/>
					<marginLeft value="1px"/>
					<marginTop value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'addedToStage'; 0.3; 0.3; {alpha: 0.5, width: 0}; {alpha: 1, width: 260}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.3; 0; {alpha: 0, top: 30}; {alpha: 1, top: 0}"/>
				<style>
					<left value="3px"/>
					<top value="-4"/>
					<position value="absolute"/>
				</style>
				<block className="icon_formation" type="native">
					<bind name="gotoAndStop!" value="'seeker_division'"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; 0.45; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'BattlePlayerContactItemSimple'; {_level: senderLevel, _rank: senderRank, _playerName: senderName, _isAbuser: isAbuser}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.45; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<style>
				<right value="8px"/>
				<top value="8px"/>
				<position value="absolute"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_REJECT'}"/>
			<bind name="instance" value="'CloseButton'; { _directEvent: 'declineInvitationToDivision'}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.48; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextHeader"/>
				<style>
					<maxWidth value="260"/>
					<textAlign value="center"/>
				</style>
				<bind name="text" value="'IDS_INVITES_YOU_TO_JOIN_DIVISION'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.51; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="-3px"/>
				<marginBottom value="3px"/>
			</style>
			<block type="text">
				<styleClass value="$TextHeader"/>
				<bind name="class" value="'$FontSizeHeader4'"/>
				<bind name="countdown" value="expirationTime; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="countdownText"/>
			</block>
		</block>
		<block>
			<style>
				<width value="1px"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0.3; 0.3; {alpha: 0, width: 0}; {alpha: 1, width: 260}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.6; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="3px"/>
			</style>
			<bind name="instance" value="'DefaultButton';	{	_width: '110px',
												_size: 0,
												_enabled: true,
												_label: 'IDS_ACCEPT',
												_directEvent: 'acceptInvitationToDivision'}
											"/>
		</block>
	</block>
	<block className="BattlePlayerContactItemSimple">
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<style>
				<marginTop value="3px"/>
			</style>
			<bind name="visible" value="_rank == 0"/>
			<styleClass value="$TextSecondary"/>
			<bind name="text" value="_level"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="2px"/>
				<noTranslate value="true"/>
			</style>
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="_isAbuser ? '$FontColorTeamkiller' : '$None'"/>
			<bind name="text" value="_playerName"/>
		</block>
	</block>
	<block className="BattlePlayerTooltip">
		<bind name="primaryEntityDH" value="'entityAccountBattle'; CC.avatar; _playerId"/>
		<bind name="watchDH" value="'entityAccountBattleDbId'; [];  entityAccountBattle.accountSimple.dbId"/>
		<bind name="firstEntityDH" value="'battleInfoEntity'; CC.battleInfo"/>
		<bind name="watch" value="'isReplayPlaying'; battleInfoEntity.battleInfo.isReplayPlaying"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId ? _playerDbId : entityAccountBattleDbId"/>
		<bind name="watchDH" value="'id'; ['']; playerEntity.avatar.id"/>
		<bind name="watchDH" value="'isInSameDivision'; 		['playerEntity.divisionMember.evDivisionChanged']; playerEntity.divisionMember.isInSameDivision"/>
		<bind name="watchDH" value="'isDivisionCommander'; 	['playerEntity.divisionMember.evIsDivisionCommanderUpdated']; playerEntity.divisionMember.isDivisionCommander"/>
		<bind name="watchDH" value="'expirationTime'; [''];  playerEntity.playerInvitedToPrebattleInfo.expirationTime"/>
		<bind name="watchDH" value="'isSelf';		[]; playerEntity.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'relation'; 	['playerEntity.relation.evChanged']; playerEntity.relation.value"/>
		<bind name="watchDH" value="'playerEntityDbId'; [];  playerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'ttkStatus'; 			['playerEntity.avatar.evTTKStatusChanged']; playerEntity.avatar.ttkStatus"/>
		<bind name="watchDH" value="'isAbuser'; 			['playerEntity.avatar.evIsAbuserStatusChanged']; playerEntity.avatar.isAbuser"/>
		<bind name="watchDH" value="'pureName'; 		['']; playerEntity.avatar.pureName"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; pureName"/>
		<bind name="watch" value="'isInVoiceChat';	!!playerVoiceChatEntity"/>
		<bind name="watchDH" value="'keyTargetComponent';	[]; playerEntity.keyTargetMarkerBattle"/>
		<bind name="watch" value="'rawKeyTargetValue'; _isInPostBattle ? _isKeyTarget : keyTargetComponent"/>
		<bind name="primaryEntityDH" value="'featureEntity_9'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[9]"/>
		<bind name="watchDH" value="'feature_9'; ['featureEntity_9.accountFeature.evStateChanged']; featureEntity_9.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_9"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 9}"/>
		<bind name="watch" value="'isKeyTargetVisible'; rawKeyTargetValue &amp;&amp; feature_9 != 'locked'"/>
		<bind name="watch" value="'isKeyTargetDescriptionVisible'; isKeyTargetVisible &amp;&amp; !(_isInPostBattle == true)"/>
		<bind name="watch" value="'isEnemyPlayer';	(relation == 2)"/>
		<bind name="primaryEntityDH" value="'voiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'voiceChatEnabled'; ['voiceChatEnabledEntity.preference.evValueChanged']; voiceChatEnabledEntity.preference.value"/>
		<bind name="watch" value="'isVoiceChatInfoVisible';	(isSelf || voiceChatEnabled) &amp;&amp; !isEnemyPlayer &amp;&amp; (isInSameDivision || _battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE)"/>
		<bind name="watch" value="'isContextMenuVisible';	!isSelf &amp;&amp; !isReplayPlaying &amp;&amp; _isContextMenuAvailable"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="320px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<margin value="8px"/>
				</style>
				<bind name="instance" value="'PlayerStereotypeDogTag'; {	_playerDbId: playerEntityDbId,
													_noRank: !_isInPostBattle,
													_noLevel: true,
													_isBot: _isBot,
													_isAbuser: _isAbuser ? _isAbuser : isAbuser}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isInSameDivision"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isInSameDivision"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<align value="middle"/>
					</style>
					<block>
						<style>
							<marginTop value="-7px"/>
							<marginBottom value="-7px"/>
						</style>
						<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: false, isCommander: isDivisionCommander, isReady: true,
														isInBattle: false}"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefaultBoldNM"/>
						<style>
							<marginLeft value="4px"/>
							<textColor value="0xFFFFCC66"/>
						</style>
						<bind name="watch" value="'playerRoleStr'; 	isDivisionCommander	? tr('IDS_DIVISION_COMMANDER_C')
																	: tr('IDS_IN_DIVISION')"/>
						<bind name="text" value="playerRoleStr"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isVoiceChatInfoVisible"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattlePlayerInfoTooltipVoiceChatStatus';	isVoiceChatInfoVisible	? { _isSelf: isSelf,
																								_playerAvatarID: playerEntity.avatar.id}
																							: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="expirationTime != null"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PlayerTooltipInvitationCountdown'; expirationTime != null	? { _expirationTime: expirationTime,
																						_text: 'IDS_INVITED_IN_DIVISION'}
																					: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isKeyTargetVisible"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'KeyTargetTooltipHeader'; isKeyTargetVisible ? {_isSelf: isSelf, _relation: relation, _isLast: !isKeyTargetDescriptionVisible} : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isKeyTargetDescriptionVisible"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'KeyTargetTooltipDescription'; isKeyTargetDescriptionVisible ? {_isSelf: isSelf, _relation: relation} : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isContextMenuVisible"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isContextMenuVisible	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT, 
																			_text: 'IDS_HINT_RIGHT_CLICK_FOR_CONTEXT_MENU' }
																		: null"/>
			</block>
		</block>
	</block>
	<block className="BattlePlayerInfoTooltipVoiceChatStatus">
		<bind name="primaryEntityDH" value="'playerAvatarEntity'; CC.avatar; _playerAvatarID"/>
		<bind name="watchDH" value="'pureName'; 		['']; playerAvatarEntity.avatar.pureName"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; pureName"/>
		<bind name="watch" value="'isInVoiceChat';	!!playerVoiceChatEntity"/>
		<bind name="watchDH" value="'isMuted'; 			['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="primaryEntityDH" value="'voiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'voiceChatEnabled'; ['voiceChatEnabledEntity.preference.evValueChanged']; voiceChatEnabledEntity.preference.value"/>
		<bind name="watch" value="'voiceChatStatusText';	_isSelf				?	voiceChatEnabled	? 	'IDS_VOICE_CHAT_ENABLED'
																					:	'IDS_VOICE_CHAT_DISABLED' :
										!isInVoiceChat		?	'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT'	:
										isMuted				?	'IDS_PLAYER_IS_MUTED_IN_VOICE_CHAT'
															:	'IDS_PLAYER_IS_AVAILABLE_IN_VOICE_CHAT'"/>
		<bind name="watch" value="'state';	_isSelf 			? !voiceChatEnabled		? 'disabled'
																		: 'speak' :
							!isInVoiceChat 		? 'disabled' :
							isMuted				? 'muted'
												: 'speak'"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block className="icon_voice_chat_small" type="native">
			<style>
				<marginRight value="8px"/>
			</style>
			<bind name="gotoAndStop!" value="state"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<maxWidth value="210"/>
			</style>
			<bind name="style" value="'textColor'; state == 'speak' ? SC.Ui_styles.SERVICE_COLORS.WHITE : SC.Ui_styles.SERVICE_COLORS.ORANGE"/>
			<bind name="style" value="'alpha'; state == 'speak' ? 0.9 : 1"/>
			<bind name="text" value="voiceChatStatusText"/>
		</block>
	</block>
	<block className="KeyTargetTooltipHeader">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.KEY_TARGET, 
													_text:	_isSelf 											? 'IDS_KEY_TARGET_SELF' :
															isIn(_relation, SC.Battle.PLAYER_RELATION.ALLIES)	? 'IDS_KEY_TARGET_ALLY'
																												: 'IDS_KEY_TARGET'}"/>
	</block>
	<block className="KeyTargetTooltipDescription">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemStatusLine'; 	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT, 
													_text:	_isSelf												? 'IDS_KEY_TARGET_TOOLTIP_SELF' :
															isIn(_relation, SC.Battle.PLAYER_RELATION.ALLIES)	? 'IDS_KEY_TARGET_TOOLTIP_ALLY'
																												: 'IDS_KEY_TARGET_TOOLTIP_ENEMY'}"/>
	</block>

	<!-- battle_loading_charging_points -->
	<block className="PointsCharge">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="collectionDH" value="CC.winPointsRewardForDestroyingEnemyShip; 'winPointsRewardForDestroyingEnemyShip'; 'sorted'"/>
		<bind name="collectionDH" value="CC.winPointsPenaltyForDestroyingAllyShip; 'winPointsPenaltyForDestroyingAllyShip'; 'sorted'"/>
		<bind name="collectionDH" value="CC.holdingPointsMessage; 'holdingPointsMessages'; 'sorted'"/>
		<block>
			<bind name="visible" value="holdingPointsMessages.length &gt; 0 "/>
			<style>
				<marginRight value="32px"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<default_text value="IDS_HOLDING_BASE"/>
			</block>
			<block>
				<bind name="collectionRepeatDH" value="CC.holdingPointsMessage; 'HoldPointReward'; 'sorted'; {}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<block>
			<bind name="instance" value="'PowerUpPointsCharge'; battleDataEntity.battleInfo.gameModeId==GameMode.ARMS_RACE ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="winPointsPenaltyForDestroyingAllyShip.length &gt; 0"/>
			<style>
				<marginRight value="16px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<default_text value="IDS_ALLY_LOSS"/>
			</block>
			<block>
				<bind name="collectionRepeatDH" value="CC.winPointsPenaltyForDestroyingAllyShip; 'AllyLossItem'; 'sorted'; {}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="winPointsRewardForDestroyingEnemyShip.length &gt; 0"/>
			<style>
				<marginLeft value="16px"/>
				<height value="92px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<default_text value="IDS_ENEMY_DESTROY"/>
			</block>
			<block>
				<bind name="collectionRepeatDH" value="CC.winPointsRewardForDestroyingEnemyShip; 'EnemiesDestructionItem'; 'sorted'; {}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PowerUpPointsCharge">
		<style>
			<marginRight value="32px"/>
			<align value="center"/>
		</style>
		<block type="text">
			<styleClass value="$BattleLoadingDescriptionSmall"/>
			<bind name="text" value="'IDS_EVENTBATTLE_PW_CHARGING_POINTS_HEADER'"/>
		</block>
		<block>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="repeat" value="['repair_active', 'reload_active', 'damage_active', 'health_active']; 'PowerUpPointsChargeSinglePowerup'"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="'IDS_EVENTBATTLE_PW_CHARGING_POINTS_GET'"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="8px"/>
				</style>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="'IDS_EVENTBATTLE_PW_CHARGING_POINTS_LOST'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PowerUpPointsChargeSinglePowerup">
		<bind name="watch" value="'_shipModifierComponentName'; $value"/>
		<bind name="watch" value="'iconPath'; 'url:../powerups/drops/icon_marker_' + _shipModifierComponentName + '.png'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_' + toUpperCase(_shipModifierComponentName) + '_DESC')}"/>
		<style>
			<width value="36px"/>
			<height value="36px"/>
			<marginLeft value="4px"/>
			<marginRight value="4px"/>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'backgroundImage'; iconPath"/>
	</block>
	<block className="HoldPointReward">
		<style>
			<width value="100px"/>
		</style>
		<bind name="dataRefDH" value="'holdingPointMessageEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'controlPointType';	[]; holdingPointMessageEntity.holdingPointsMessage.controlPointType"/>
		<bind name="watchDH" value="'message';			[]; holdingPointMessageEntity.holdingPointsMessage.message"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="visible" value="controlPointType != SC.Battle.CONTROL_POINT_TYPE.BUILDING_CP"/>
			<block className="icon_hold_base" type="native">
				<bind name="gotoAndStop!" value="(controlPointType == SC.Battle.CONTROL_POINT_TYPE.BASE_WITH_POINTS) 	? 'flags' :
								(controlPointType == SC.Battle.CONTROL_POINT_TYPE.EPICENTER_CP) 		? 'epicenter_' + index
																										: 'letters'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="controlPointType == SC.Battle.CONTROL_POINT_TYPE.BUILDING_CP"/>
			<styleClass value="$MiddleAligned"/>
			<block className="icon_hold_fort_object" type="native"/>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<style>
					<maxWidth value="100"/>
					<leading value="-2"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="message"/>
			</block>
		</block>
	</block>
	<block className="EnemiesDestructionItem">
		<style>
			<width value="38px"/>
		</style>
		<bind name="dataRefDH" value="'winPointsRewardEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'rewardPoints';	[]; winPointsRewardEntity.winPointsRewardForDestroyingEnemyShip.rewardPoints"/>
		<bind name="watchDH" value="'shipType';	[]; winPointsRewardEntity.winPointsRewardForDestroyingEnemyShip.shipType"/>
		<block>
			<style>
				<width value="100%"/>
				<height value="44px"/>
			</style>
			<block>
				<style>
					<width value="28px"/>
					<height value="27px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="style" value="'backgroundImage'; 'swf:../battle_hud/markers/ship_svg/ship_svg.swf:' + toLowerCase(shipType) + '_enemy'"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="'+' + rewardPoints"/>
			</block>
		</block>
	</block>
	<block className="AllyLossItem">
		<style>
			<width value="38px"/>
		</style>
		<bind name="dataRefDH" value="'winPointsPenaltyEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'penaltyPoints';	[]; winPointsPenaltyEntity.winPointsPenaltyForDestroyingAllyShip.penaltyPoints"/>
		<bind name="watchDH" value="'shipType';	[]; winPointsPenaltyEntity.winPointsPenaltyForDestroyingAllyShip.shipType"/>
		<block>
			<style>
				<width value="100%"/>
				<height value="44px"/>
			</style>
			<block>
				<style>
					<width value="28px"/>
					<height value="27px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="style" value="'backgroundImage'; 'swf:../battle_hud/markers/ship_svg/ship_svg.swf:' + toLowerCase(shipType) + '_ally'"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="penaltyPoints"/>
			</block>
		</block>
	</block>

	<!-- battle_loading_pve_tasks -->
	<block className="BattleLoadingPVETasks">
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="firstEntityDH" value="'customElementsVisibilityEntity'; CC.customElementsVisibility"/>
		<bind name="watchDH" value="'disabledElements'; ['customElementsVisibilityEntity.customElementsVisibility.evChanged']; customElementsVisibilityEntity ? customElementsVisibilityEntity.customElementsVisibility.disabledElements : null"/>
		<bind name="watch" value="'isLocalWeatherDisabled'; (disabledElements &amp; (1 &lt;&lt; SC.Battle.CUSTOM_BATTLE_ELEMENTS.HIDE_WEATHER)) &gt; 0"/>
		<bind name="watch" value="'isHW2018'; isIn(battleDataEntity.battleInfo.scenario, ['PCVO013_EV_HL_18_e04_Halloween_2018', 'PCVO017_EV_HL_18_e04_Halloween_2018_Hard'])"/>
		<style>
			<width value="100%"/>
			<marginRight value="80px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<styleClass value="$TextDefaultBold23NM"/>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<default_text value="IDS_PVE_OPERATION_BRIEFING"/>
			</block>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.47; {alpha: 0, top: 10}; {alpha: 0.85, top: 0}"/>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
					<leading value="-3"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<bind name="text" value="tr('IDS_' + toUpperCase(battleDataEntity.battleInfo.scenario) + '_DESCRIPTION')"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.54; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<styleClass value="$TextDefaultBold23NM"/>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="text" value="'IDS_PVE_OPERATION_GOAL'"/>
			</block>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.61; {alpha: 0, top: 10}; {alpha: 0.85, top: 0}"/>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
					<leading value="-3"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<bind name="text" value="tr('IDS_' + toUpperCase(battleDataEntity.battleInfo.scenario) + '_GOAL')"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isHW2018"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'SubmarineBattleDescription'; isHW2018 ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'LocalWeatherDescription'; localWeatherEntity &amp;&amp; !isLocalWeatherDisabled ? {} : null"/>
		</block>
	</block>

	<!-- battle_stats -->
	<block className="BattleStats">
		<bind name="firstEntityDH" value="'myAccountEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'pureName'; 		['']; myAccountEntity.avatar.pureName"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; pureName"/>
		<bind name="watchDH" value="'isSpeaking'; 	['playerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; playerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="watchDH" value="'divisionId';	['myAccountEntity.preBattlePlayerSimple.evPreBattleIdChanged']; myAccountEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'teamId'; []; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';						battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId';						battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'isFogOfWar'; 						battleDataEntity.battleInfo.isFogOfWar"/>
		<bind name="watch" value="'isBattletypeWithDynamicDivisions';	isIn(battleType, SC.Common.BATTLE_TYPES.DYNAMIC_DIVISION_AVAILABLE)"/>
		<bind name="watch" value="'isFirstBattle'; battleDataEntity.battleInfo.scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'isDynamicDivisionsEnabled'; isBattletypeWithDynamicDivisions &amp;&amp; !isFirstBattle"/>
		<bind name="watch" value="'isVoiceChatEnabled';	(battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE) ||
										((divisionId != 0) &amp;&amp; ((battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE) ||
																		  (battleType == SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE) ||
																		  (battleType == SC.Common.BATTLE_TYPES.PVE_BATTLE)))"/>
		<bind name="watch" value="'isTeamIdObserver'; teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
		<bind name="watch" value="'tabStatsTabIndex'; (userPrefs.tabStatsTabIndex == null) ? 0 : userPrefs.tabStatsTabIndex"/>
		<bind name="watch" value="'validTabIndex';	isTeamIdObserver || ((tabStatsTabIndex == 1) &amp;&amp; !isDynamicDivisionsEnabled)	? 0
																												: tabStatsTabIndex"/>
		<bind name="watch" value="'isPlayerActionsEnable'; validTabIndex == 0 &amp;&amp; !isTeamIdObserver &amp;&amp; !isFirstBattle"/>
		<bind name="watch" value="'isTeamBattlePage'; validTabIndex == 0"/>
		<bind name="watch" value="'rightPanelBlockName'; isFogOfWar ? 'FogOfWarRightPanel' : 'InstructionsRightPanel'"/>
		<bind name="stageSize"/>
		<bind name="var" value="{isFirstShow: true}"/>
		<bind name="catch" value="'addedToStage'; {isFirstShow: false}"/>
		<bind name="appear" value="isFirstShow ? 'addedToStage' : null; 0.1; 0.15; {alpha: 0}; {alpha: 1}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<alpha value="0.8"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/modal_battle.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="720:16,1080:32ah"/>
			</style>
			<block>
				<bind name="visible" value="!isTeamIdObserver &amp;&amp; !isFirstBattle"/>
				<styleClass value="$MiddleAligned"/>
				<block className="InBattleStatsMainTabButtons" type="ublock">
					<bind name="build!" value="{	_validTabIndex:				validTabIndex,
								_isDynamicDivisionsEnabled:	isDynamicDivisionsEnabled }"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="720:32,1080:64ah"/>
					<width value="810px"/>
					<height value="100%"/>
				</style>
				<bind name="watch" value="'instructionsOffsetX'; ((stageWidth - 1280) / 16)"/>
				<block>
					<bind name="visible" value="validTabIndex == 0 &amp;&amp; gameModeId != GameMode.ESCAPE_TO_PORTAL &amp;&amp; !isTeamIdObserver &amp;&amp; stageWidth &gt; 1370 &amp;&amp; !isFirstBattle"/>
					<style>
						<width value="1370:200,1920:250aw"/>
						<height value="395px"/>
						<position value="absolute"/>
						<align value="left"/>
						<top value="10px"/>
					</style>
					<bind name="style" value="'left'; -(268 + instructionsOffsetX)"/>
					<block className="QuickCommandHelpPanel" type="ublock">
						<style>
							<width value="100%"/>
						</style>
						<bind name="build!" value="{}"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleAligned"/>
					<style>
						<height value="100%"/>
					</style>
					<bind name="child" value="validTabIndex; {	_isBattleStats: true,
												_isDynamicDivisionsEnabled: isDynamicDivisionsEnabled};
												'TeamBattlePage'; 'DynamicDivisions'; 'TaskBattleStats'"/>
				</block>
				<block>
					<bind name="visible" value="!isTeamBattlePage &amp;&amp; gameModeId != GameMode.ESCAPE_TO_PORTAL &amp;&amp; !isFirstBattle"/>
					<style>
						<width value="210px"/>
						<position value="absolute"/>
						<top value="20px"/>
					</style>
					<bind name="style" value="'right'; -(236 + instructionsOffsetX)"/>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="rightPanelBlockName; {_isPlayerActionsEnable: isPlayerActionsEnable, _validTabIndex: validTabIndex}"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginLeft value="2px"/>
						</style>
						<bind name="instance" value="'VoiceChatRightPanelControl'; isVoiceChatEnabled	? {_isBattleStats: true, _battleType: battleType}
																						: null"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginLeft value="2px"/>
						</style>
						<bind name="instance" value="'InvitationsToDivisionRightPanelControl'; isDynamicDivisionsEnabled	? {_isBattleStats: true}
																										: null"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="!isFirstBattle"/>
				<style>
					<marginTop value="16px"/>
					<height value="720:104,1080:112ah"/>
					<width value="100%"/>
				</style>
				<block className="FooterWrapperForBattle" type="ublock">
					<style>
						<position value="absolute"/>
						<bottom value="0px"/>
						<width value="100%"/>
					</style>
					<bind name="build!" value="{}"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$BottomMenu"/>
			<block>
				<style>
					<marginLeft value="10px"/>
					<marginTop value="4px"/>
					<width value="19px"/>
					<height value="17px"/>
				</style>
				<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isInBattle: true, _isSpeaking: isSpeaking}"/>
			</block>
		</block>
		<block>
			<bind name="style" value="'bottom'; bottomOffset"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="collectionRepeatDH" value="CC.invitationToDivision; 'BattleDivisionInvitationItem'; ''; {_isBattleStats: true}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="InstructionsRightPanel">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="_isPlayerActionsEnable"/>
			<bind name="instance" value="'RightPanelInfo'; _isPlayerActionsEnable ? {	_headerText: 'IDS_ACTIONS_WITH_PLAYERS_HEADER',
																		_infoText: 'IDS_ACTIONS_WITH_PLAYERS_HINT',
																		_isBattleStats: true}
																: null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="_validTabIndex == 1"/>
			<bind name="instance" value="'RightPanelInfo'; _validTabIndex == 1 	? {	_headerText: 'IDS_DIVISIONS_IN_BATTLE_HEADER',
																	_infoText: 'IDS_DYNAMIC_DIVISIONS_INFO',
																	_isBattleStats: true}
																: null"/>
		</block>
	</block>
	<block className="RightPanelInfo">
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="name" value="'RightPanelInfo'"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="text" value="toUpperCase(tr(_headerText))"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="15px"/>
				<leading value="1"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="tr(_infoText)"/>
		</block>
	</block>

	<!-- battle_tips_content -->
	<block className="BattleGalleryItem">
		<style>
			<width value="900px"/>
			<height value="382px"/>
		</style>
		<block>
			<bind name="child" value="_galleryItemRendererParams[_index].image.type; { 	_galleryItemRendererParams: _galleryItemRendererParams,
																		_galleryImageWidth: 		900, 
																		_galleryImageHeight: 		382, 
																		_index: 					_index
																	}; 
																	{ 	Default: 	'DefaultPngViewer',
																		Hotkey: 	'HotkeyViewer',
																		Indicator: 	'IndicatorViewer'
																	}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
			</style>
			<bind name="instance" value="'TextRenderer'; { _galleryItemRendererParams: _galleryItemRendererParams, _index: _index}"/>
		</block>
	</block>
	<block className="DefaultPngViewer">
		<bind name="style" value="'width'; _galleryImageWidth + 'px'"/>
		<bind name="style" value="'height'; _galleryImageHeight + 'px'"/>
		<bind name="style" value="'backgroundImage'; _galleryItemRendererParams[_index].image.imagePath"/>
	</block>
	<block className="HotkeyViewer">
		<block>
			<bind name="instance" value="'DefaultPngViewer'; { _galleryImageWidth: _galleryImageWidth, _galleryImageHeight: _galleryImageHeight, _galleryItemRendererParams: _galleryItemRendererParams, _index: _index }"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<left value="108px"/>
				<bottom value="42px"/>
			</style>
			<block type="text">
				<style>
					<marginLeft value="-50%"/>
				</style>
				<bind name="substitute" value="5; null; tr(_galleryItemRendererParams[_index].image.hotkey); '_bg'"/>
			</block>
		</block>
	</block>
	<block className="IndicatorViewer">
		<block>
			<bind name="instance" value="'DefaultPngViewer'; { _galleryImageWidth: _galleryImageWidth, _galleryImageHeight: _galleryImageHeight, _galleryItemRendererParams: _galleryItemRendererParams, _index: _index }"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="377px"/>
				<top value="46px"/>
				<width value="150px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<backgroundImage value="bitmap:icon_visibility_ship"/>
				</style>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="27px"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="150"/>
						<textAlign value="center"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorOrange'"/>
					<bind name="text" value="toUpperCase(tr(_galleryItemRendererParams[_index].image.indicatorText))"/>
				</block>
			</block>
		</block>
	</block>
	<block className="TextRenderer">
		<style>
			<width value="360px"/>
			<height value="382px"/>
			<backgroundColor value="0x50000000"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="30px"/>
				<marginLeft value="20px"/>
				<marginRight value="20px"/>
			</style>
			<block>
				<block type="text">
					<style>
						<maxWidth value="320"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="toUpperCase(tr(_galleryItemRendererParams[_index].description.textHeader))"/>
				</block>
			</block>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<width value="100%"/>
					<height value="290px"/>
					<marginTop value="15px"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="320"/>
						<leading value="2.5"/>
					</style>
					<styleClass value="$TextHeader"/>
					<bind name="substitute" value="6; null; tr(_galleryItemRendererParams[_index].description.text); '_bg'"/>
				</block>
			</block>
		</block>
	</block>

	<!-- battlepass_purchase_levels -->
	<block className="ModalWindowBattlePurchaseLevels">
		<bind name="instance" value="'SmallModalWindow'; { _headerText: 'IDS_BATTLEPASS_PURCHASE_LEVELS_TITLE', _contentElement: 'ModalWindowBattlePurchaseLevelsContent' }"/>
	</block>
	<block className="ModalWindowBattlePurchaseLevelsContent">
		<bind name="primaryEntityDH" value="'battlePassLevelPriceEntity'; CC.priceComponent; 'BATTLEPASS_LEVEL' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'battlePassLevelPrice'; ['battlePassLevelPriceEntity.priceComponent.evChanged']; battlePassLevelPriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'battlePassPriceRegularEntity'; CC.priceComponent; 'BATTLEPASS_REGULAR' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'battlePassRegularPrice'; ['battlePassPriceRegularEntity.priceComponent.evChanged']; battlePassPriceRegularEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'battlePassPriceEnhancedEntity'; CC.priceComponent; 'BATTLEPASS_ENHANCED' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'battlePassEnhancedPrice'; ['battlePassPriceEnhancedEntity.priceComponent.evChanged']; battlePassPriceEnhancedEntity.priceComponent"/>
		<bind name="collectionDH" value="CC.battlePassLevel; 'levelsList'"/>
		<bind name="firstEntityDH" value="'battlePassCurrentLevelEntity'; CC.battlePassCurrentLevel"/>
		<bind name="watchDH" value="'currentLevel'; []; battlePassCurrentLevelEntity.battlePassLevel.level"/>
		<bind name="firstEntityDH" value="'battlePassEntity'; CC.battlePass"/>
		<bind name="watchDH" value="'type';					['battlePassEntity.battlePass.evChanged']; battlePassEntity.battlePass.type"/>
		<bind name="watchDH" value="'battlePassId';			['battlePassEntity.battlePass.evChanged']; battlePassEntity.battlePass.id"/>
		<bind name="watchDH" value="'previewRewardsStackId';	['battlePassEntity.battlePass.evChanged']; battlePassEntity.battlePass.previewRewardsStack"/>
		<bind name="watchDH" value="'finishTime';			['battlePassEntity.battlePass.evChanged']; battlePassEntity.battlePass.finishTime"/>
		<bind name="entityDH" value="'rewardsStackEntity'; previewRewardsStackId"/>
		<bind name="watchDH" value="'rewards'; ['rewardsStackEntity.rewardsStack.evChanged']; rewardsStackEntity.rewardsStack.rewards"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'currentGoldBalance'; ['resourceEntity.accountResource.evChangedGold']; resourceEntity.accountResource.gold"/>
		<bind name="var" value="{levelsToPurchase: 1}"/>
		<bind name="watch" value="'finalPrice'; battlePassLevelPrice.basePrice * Number(levelsToPurchase)"/>
		<bind name="watch" value="'isGoldEnough'; currentGoldBalance &gt;= finalPrice"/>
		<bind name="watch" value="'deltaGold'; finalPrice - currentGoldBalance"/>
		<bind name="watch" value="'maxLevel'; levelsList.length - currentLevel"/>
		<bind name="watch" value="'levelDownBtnEnabled'; Number(levelsToPurchase) &gt; 1"/>
		<bind name="watch" value="'levelUpBtnEnabled';	Number(levelsToPurchase) &lt; maxLevel"/>
		<bind name="catch" value="'levelDownBtnClicked'; { levelsToPurchase: Number(levelsToPurchase) &gt; 1	? Number(levelsToPurchase) - 1
																							: Number(levelsToPurchase)}"/>
		<bind name="catch" value="'levelUpBtnClicked'; { levelsToPurchase: Number(levelsToPurchase) &lt; maxLevel	? Number(levelsToPurchase) + 1
																								: Number(levelsToPurchase)}"/>
		<bind name="watch" value="'rewardsHeight'; rewards.length &gt; 6 ? '200px' : '100px'"/>
		<bind name="watch" value="'levelsRemaining'; levelsList.length - currentLevel"/>
		<bind name="watch" value="'buyGoldRequestParams'; {	url: SC.Ui_windows.GUI_URL.BATTLEPASS_SHOP_IN_GAME,
											params: {	battlepass_type: type,
														battlepass_expiration_date: finishTime,
														remaining_level: levelsRemaining,
														total_levels: levelsList.length,
														level_price: battlePassLevelPrice.basePrice,
														battlepass_price: battlePassRegularPrice.basePrice,
														battlepass_big_price: battlePassEnhancedPrice.basePrice}}"/>
		<bind name="action" value="'currentLevel' + varChanged; 'BattlePassProxyUSS.previewBattlePassLevels'; {levelsToPreview: Number(levelsToPurchase)}"/>
		<style>
			<width value="960px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<position value="absolute"/>
				<top value="-49px"/>
				<right value="0"/>
			</style>
			<block className="DockResourcesWidget" type="ublock">
				<bind name="build!" value="{	_name:		'goldBalance',
							_currency:	SC.Common.CURRENCIES.GOLD,
							_label:		'IDS_GOLD',
							_methods:	[{	type: 'inputMapping.onRequest',
											name: 'openMetashop',
											args: buyGoldRequestParams}],
							_height:	47 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="32px"/>
				<marginBottom value="12px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault19NM"/>
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_BATTLEPASS_PURCHASE_LEVELS_SUBTITLE"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'height'; rewardsHeight"/>
			<bind name="instance" value="'ContainerWithRewards'; {_rewards: rewards, _itemHeight: 100}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<height value="92px"/>
				<align value="middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<marginRight value="12px"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_BATTLEPASS_PURCHASE_LEVELS_TEXT"/>
			</block>
			<block>
				<style>
					<width value="86px"/>
					<height value="42px"/>
				</style>
				<block>
					<style>
						<width value="22px"/>
						<height value="100%"/>
					</style>
					<bind name="dispatch" value="'click'; 'levelDownBtnClicked'"/>
					<block className="textinput_bg" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block className="button_spinner_navigation_left" type="native">
						<bind name="visible" value="levelDownBtnEnabled"/>
						<styleClass value="$Fullsize"/>
					</block>
					<block className="button_spinner_arrow_disabled_left" type="native">
						<bind name="visible" value="!levelDownBtnEnabled"/>
						<style>
							<marginTop value="14px"/>
							<marginLeft value="7px"/>
							<hitTest value="false"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="catch" value="'inputChanged'; { levelsToPurchase: Number(levelsToPurchase) &gt; maxLevel ? maxLevel : Number(levelsToPurchase)}"/>
					<bind name="action" value="'inputChanged'; 'BattlePassProxyUSS.previewBattlePassLevels'; {levelsToPreview: Number(levelsToPurchase)}"/>
					<block className="text_input_stepper" type="native">
						<params>
							<param name="name" value="'levels_to_purchase'"/>
						</params>
						<style>
							<width value="42px"/>
							<height value="42px"/>
						</style>
						<params>
							<param name="actAsButton" value="true"/>
							<param name="maxChars" value="2"/>
							<param name="restrict" value="0-9"/>
							<param name="enabled" value="true"/>
							<param name="maxCheckEnabled" value="true"/>
						</params>
						<bind name="text" value="levelsToPurchase"/>
						<bind name="maxValue" value="maxLevel"/>
						<bind name="ubFocus" value="0; true; true"/>
						<bind name="sync" value="'text'; 'change'; 'levelsToPurchase'"/>
						<bind name="dispatch" value="'levelsToPurchase' + varChanged; 'inputChanged'; {levelsToPurchase: Number(levelsToPurchase)}; SC.Common.DIRECTION.UP"/>
					</block>
				</block>
				<block>
					<bind name="dispatch" value="'click'; levelUpBtnEnabled ? 'levelUpBtnClicked' : ''"/>
					<style>
						<width value="22px"/>
						<height value="100%"/>
					</style>
					<block className="textinput_bg" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block className="button_spinner_navigation_right" type="native">
						<bind name="visible" value="levelUpBtnEnabled"/>
						<styleClass value="$Fullsize"/>
					</block>
					<block className="button_spinner_arrow_disabled_right" type="native">
						<bind name="visible" value="!levelUpBtnEnabled"/>
						<style>
							<marginTop value="14px"/>
							<marginLeft value="7px"/>
							<hitTest value="false"/>
						</style>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
				<align value="middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<marginRight value="4px"/>
					<alpha value="0.75"/>
				</style>
				<default_text value="IDS_PURCHASE_COST"/>
			</block>
			<block>
				<bind name="instance" value="'PriceTag'; { priceInfo: {finalPrice: finalPrice, currency: SC.Common.CURRENCIES.GOLD}, _medium:true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="!isGoldEnough"/>
			<style>
				<marginTop value="4px"/>
				<align value="center"/>
			</style>
			<bind name="instance" value="'PriceDeficit'; { priceInfo: { currency: SC.Common.CURRENCIES.GOLD }, _deficit: deltaGold, _hideIcon: true}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<block>
				<style>
					<marginRight value="16px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '150px',
												_enabled: isGoldEnough &amp;&amp; levelsToPurchase &gt; 0,
												_name: 'btn_buy',
												_isTransactionBtn: true,
												_defaultFocused: true,
												_focusIndex: 0,
												_action: 'BattlePassProxyUSS.buyBattlePassLevels',
												_actionParams: {battlePassId: battlePassId, amount: levelsToPurchase},
												_type: SC.Ui_styles.BUTTON_TYPE.DEFAULT,
												_label: 'IDS_BATTLEPASS_PURCHASE_BUTTON'}"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultButton'; {	_width: '150px',
												_name: 'btn_close',
												_enabled: true,
												_focusIndex: 1,
												_label: 'IDS_CLOSE_UPPER_CASE'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- buttons -->
	<block className="DefaultButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="var" value="{showOperationsLock: false}"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="watch" value="'isIconBtn'; _type == SC.Ui_styles.BUTTON_TYPE.ICON || _type == SC.Ui_styles.BUTTON_TYPE.ICON_SECONDARY"/>
		<bind name="watch" value="'isSecondaryBtn'; _type ==  SC.Ui_styles.BUTTON_TYPE.SECONDARY || _type == SC.Ui_styles.BUTTON_TYPE.ICON_SECONDARY"/>
		<bind name="watch" value="'isOperationsLocked'; _isTransactionBtn &amp;&amp; operationsAccountLocked"/>
		<bind name="watch" value="'enabled'; _enabled &amp;&amp; !isOperationsLocked"/>
		<bind name="ubFocus" value="_focusIndex; _defaultFocused; _enabled &amp;&amp; _focusIndex != null &amp;&amp; !isIconBtn; false"/>
		<bind name="keyboard" value="$isFocused &amp;&amp; enabled ? Keyboard.ENTER : null; 'click'; '$isDown'; _clickInterval ? _clickInterval : 0"/>
		<bind name="keyboard" value="$isFocused &amp;&amp; enabled ? Keyboard.SPACE : null; 'click'; '$isDown'; _clickInterval ? _clickInterval : 0"/>
		<bind name="watch" value="'isDisabledVisual'; !_enabled || (isOperationsLocked &amp;&amp; showOperationsLock)"/>
		<bind name="watch" value="'isDown'; !isDisabledVisual &amp;&amp; (mouseDown || $isDown)"/>
		<bind name="watch" value="'isRollover'; !isDisabledVisual &amp;&amp; rollOver"/>
		<bind name="dispatchDelayReset" value="'operationsAccountLocked' + varChanged; 'operationsAccountLockedChanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.3"/>
		<bind name="catch" value="'operationsAccountLockedChanged'; {showOperationsLock: operationsAccountLocked}"/>
		<bind name="name" value="_name ? _name : null"/>
		<bind name="watch" value="'backgroundImage'; isDisabledVisual &amp;&amp; _type	? 'url:../service_kit/buttons/backgrounds/' + _type + '_disabled.png' :
									_type 						? 'url:../service_kit/buttons/backgrounds/' + _type + '.png' :
									isDisabledVisual 			? 'url:../service_kit/buttons/backgrounds/default_disabled.png'
																: 'url:../service_kit/buttons/backgrounds/default.png'"/>
		<bind name="watch" value="'defaultBackgroundImage';	_type 				? 'url:../service_kit/buttons/backgrounds/' + _type + '.png'
																: 'url:../service_kit/buttons/backgrounds/default.png'"/>
		<bind name="watch" value="'focusImage';	_type 	? 'url:../service_kit/buttons/backgrounds/' + _type + '_focused.png'
										: 'url:../service_kit/buttons/backgrounds/default_focused.png'"/>
		<bind name="style" value="'width';	isIconBtn	? '24px' :
							_width		? _width
										: 'auto'"/>
		<bind name="style" value="'height';	isIconBtn			? '24px' :
							_size == 2	? '48px' :
							_size == 0	? '24px'
												: '32px'"/>
		<bind name="watch" value="'ctRollOver'; isSecondaryBtn	?	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
														redOffset: 45, greenOffset: 45, blueOffset: 45, alphaOffset: 0}
												:	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
														redOffset: 15, greenOffset: 15, blueOffset: 15, alphaOffset: 0}"/>
		<bind name="watch" value="'ctDown';  isSecondaryBtn	?	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
													redOffset: -45, greenOffset: -45, blueOffset: -45, alphaOffset: 0}
											:	{	redMultiplier: 1, greenMultiplier: 1, blueMultiplier: 1, alphaMultiplier: 1,
													redOffset: -15, greenOffset: -15, blueOffset: -15, alphaOffset: 0}"/>
		<block>
			<bind name="name" value="enabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<background9Slice value="[10,10]"/>
			</style>
			<bind name="style" value="'backgroundImage'; backgroundImage"/>
		</block>
		<block>
			<bind name="visible" value="isDown || isRollover"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<background9Slice value="[10,10]"/>
			</style>
			<bind name="style" value="'backgroundImage'; backgroundImage"/>
			<bind name="colorTransform" value="	isRollover &amp;&amp; !isDown	? ctRollOver :
								isDown					? ctDown
														: {}"/>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<align value="middle|center"/>
			</style>
			<bind name="style" value="'width'; _width ? '100%' : 'auto'"/>
			<bind name="alpha" value="	isDown	|| isDisabledVisual		? 0.45 :
						isRollover						? 1.1 :
						isSecondaryBtn					? 0.75
														: 0.9"/>
			<block>
				<bind name="visible" value="$isFocused &amp;&amp; !isDisabledVisual"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<background9Slice value="[2,2]"/>
				</style>
				<bind name="style" value="'backgroundImage'; focusImage"/>
			</block>
			<block type="text">
				<bind name="visible" value="_label &amp;&amp; !isIconBtn"/>
				<style>
					<multiline value="false"/>
					<textAlign value="center"/>
				</style>
				<bind name="style" value="'width'; _width ? '100%' : 'auto'"/>
				<bind name="style" value="'minWidth';	_width		? 0 :
										_isExternal ? 78
													: 110"/>
				<bind name="style" value="'marginLeft';	_isExternal			? '28px' :
										_size == 0	? '8px'
															: '12px'"/>
				<bind name="style" value="'marginRight'; _isExternal			? '28px' :
										_size == 0	? '8px'
															: '12px'"/>
				<bind name="class" value="	_type == SC.Ui_styles.BUTTON_TYPE.ACCENT &amp;&amp; _size == 2	? '$TextDefaultBold25NM' :
							_size == 2												? '$TextDefaultBold17NM' :
							_size == 0												? '$TextDefaultBold12NM'
																							: '$TextDefaultBoldNM'"/>
				<bind name="style" value="'dropShadowFilter'; '1 45 0x000000 1 2.0 2.0 0.3 1'"/>
				<bind name="text" value="toUpperCase(tr(_label))"/>
			</block>
			<block>
				<bind name="visible" value="isIconBtn"/>
				<style>
					<width value="24px"/>
					<height value="24px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/buttons/icons/' + _icon + '.png'"/>
			</block>
			<block>
				<bind name="visible" value="_isExternal"/>
				<params>
					<param name="name" value="externalArrow"/>
				</params>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<right value="8px"/>
					<width value="14px"/>
					<height value="14px"/>
					<backgroundImage value="url:../service_kit/buttons/icons/out.png"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="enabled"/>
			<bind name="gui" value="'click'; _method || _action || _request || _dispatch ? null :
							_name										? _name
																		: null; {}"/>
			<bind name="event" value="'click'; _method ? _method : null"/>
			<bind name="action" value="'click'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'click'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; _dispatch ? _dispatch : null; _dispatchParams ? _dispatchParams : {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
			<bind name="directEvent" value="'click'; _directEvent ? _directEvent : null; _directEventParams ? _directEventParams : {}"/>
			<bind name="soundSet" value="_type	? 'button_' + _type
								: 'button_default'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
		</block>
	</block>
	<block className="ImageButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_enabled &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_enabled &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<bind name="style" value="'width'; _width ? _width : '50px'"/>
		<bind name="style" value="'height'; _height ? _height : '50px'"/>
		<style>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'backgroundImage'; _backgroundImage"/>
		<block>
			<bind name="visible" value="_enabled"/>
			<bind name="name" value="_name"/>
			<bind name="soundSet" value="_soundSet ? _soundSet : 'button_context'"/>
			<bind name="event" value="'click'; _method ? _method : null"/>
			<bind name="action" value="'click'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'click'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; _dispatch ? _dispatch : null; _dispatchParams ? _dispatchParams : {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="style" value="'margin'; _hitAreaMargin ? _hitAreaMargin : '0px'"/>
		</block>
	</block>

	<!-- camouflage_item -->
	<block className="CamouflageItemStatic">
		<bind name="name" value="'ExteriorItemDock_' + exteriorConfig.name"/>
		<bind name="watch" value="'fakeColorScheme'; _params.colorsNum	?	_params
														:	null"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watch" value="'hasOwnCamouflage'; !!exteriorEntity.ownCamouflage"/>
		<bind name="watchDH" value="'camoColorSchemesDH'; 	['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.camoColorSchemes"/>
		<bind name="watchDH" value="'isLinkedToShip';		['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.isLinkedToShip"/>
		<bind name="watch" value="'camoColorSchemes'; hasOwnCamouflage	? camoColorSchemesDH.length &gt; 0 : null"/>
		<bind name="watch" value="'useRepaintedIcon'; camoColorSchemes || fakeColorScheme"/>
		<bind name="watch" value="'isUnlinkedMSkin';	(exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.MSKIN) &amp;&amp;
									((_isReward &amp;&amp; !_params.shipId) || (!_isReward &amp;&amp; !isLinkedToShip))"/>
		<bind name="sharedTooltip" value="'CamouflageTooltip';	{	_id: Number(_id),
													_isReward: _isReward,
													_amount: _amount,
													_fakeColorScheme: fakeColorScheme,
													_noMouseInstructions: true,
													_rewardShipId: _params.shipId }"/>
		<bind name="instance" value="'CamouflageItemView';	{	_camouflageId: _id,
												_camoName: exteriorConfig.name,
												_amount: _amount,
												_useRepaintedIcon: useRepaintedIcon,
												_fakeColorScheme: fakeColorScheme,
												_exteriorType: exteriorConfig.type,
												_isUnlinkedMSkin: isUnlinkedMSkin}"/>
	</block>
	<block className="CamouflageItemView">
		<bind name="watch" value="'isAmountVisible'; _amount &gt; 0 &amp;&amp; (_exteriorType == SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE || _isUnlinkedMSkin)"/>
		<bind name="name" value="'ExteriorWithAmount_' + _camoName"/>
		<style>
			<height value="60px"/>
			<width value="60px"/>
		</style>
		<block>
			<bind name="visible" value="!_useRepaintedIcon"/>
			<bind name="style" value="'backgroundImage';	_exteriorType == SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE 	? ('url:../exteriors/camouflages/' + _camoName + '.png') :
										_exteriorType == SC.Exteriors.EXTERIOR_TYPE.PERMOFLAGE	? ('url:../exteriors/permoflages/' + _camoName + '.png')
																								: ('url:../exteriors/skins/' + _camoName + '.png')"/>
		</block>
		<block>
			<bind name="instance" value="'CamouflageRepaintedIcon'; _useRepaintedIcon	? {	_camouflageId: _camouflageId,
																			_fakeColorScheme: _fakeColorScheme}
																		: null"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'InfinityCounterIcon';	_exteriorType != SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE &amp;&amp;
												!_isUnlinkedMSkin											?	{}
																											:	null"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageItemsCounter'; isAmountVisible ? {_amount: _amount} : null"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'LinkableItemIcon'; _isUnlinkedMSkin ? {} : null"/>
		</block>
	</block>
	<block className="LinkableItemIcon">
		<style>
			<width value="19px"/>
			<height value="19px"/>
			<margin value="-1px"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/unified_status_icons/icon_linked.png'"/>
	</block>
	<block className="InfinityCounterIcon">
		<style>
			<width value="19px"/>
			<height value="19px"/>
			<margin value="-1px"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/infinite_large.png'"/>
	</block>

	<!-- camouflage_repainted_icon -->
	<block className="CamouflageRepaintedIcon">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _camouflageId"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watch" value="'previewExteriorId'; userPrefs.previewExteriorId"/>
		<bind name="watch" value="'isPreviewedExterior'; (previewExteriorId == _camouflageId)"/>
		<bind name="watchDH" value="'previewCamoColorScheme'; ['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.previewCamoColorScheme"/>
		<bind name="watchDH" value="'pickedCamoColorScheme'; ['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.pickedCamoColorScheme"/>
		<bind name="watchDH" value="'iconPatternIndexDH'; ['exteriorEntity.ownCamouflage.evIconPatternIndexUpdated']; exteriorEntity.ownCamouflage.iconPatternIndex"/>
		<bind name="dispatch" value="'exteriorEntity' + varChanged; 'exteriorEntityChangedEv'"/>
		<bind name="catch" value="'exteriorEntityChangedEv';	{	pickedCamoColorScheme: exteriorEntity.ownCamouflage.pickedCamoColorScheme,
												previewCamoColorScheme: exteriorEntity.ownCamouflage.previewCamoColorScheme}"/>
		<bind name="watch" value="'selectedColorSchemeEntityId'; isPreviewedExterior ? previewCamoColorScheme : pickedCamoColorScheme"/>
		<bind name="entityDH" value="'colorSchemeEntity'; selectedColorSchemeEntityId"/>
		<bind name="watch" value="'colorScheme'; _fakeColorScheme ? _fakeColorScheme : colorSchemeEntity.colorScheme"/>
		<bind name="watch" value="'iconPatternIndex'; _fakeColorScheme ? _fakeColorScheme.iconPatternIndex : iconPatternIndexDH"/>
		<bind name="watch" value="'imagesPath';	exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.PERMOFLAGE
									? 'url:../exteriors/camouflages_colored/permanent/' + iconPatternIndex + '/'+ colorScheme.colorsNum + '_color/'
									: 'url:../exteriors/camouflages_colored/expendable/' + toUpperCase(exteriorConfig.name) + '/'"/>
		<block>
			<style>
				<height value="60px"/>
				<width value="60px"/>
			</style>
			<bind name="alpha" value="_isNotOwned ? 0.3 : 1"/>
			<bind name="repeat" value="colorScheme.colorsNum; 'ColoredIcon'; {	_colorScheme: colorScheme,
																_imagesPath: imagesPath}"/>
		</block>
		<block>
			<bind name="visible" value="colorScheme.colorsNum == 1"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'backgroundImage';	'url:../exteriors/camouflages_colored/one_color_gradient_overlay.png'"/>
		</block>
	</block>
	<block className="ColoredIcon">
		<style>
			<position value="absolute"/>
		</style>
		<bind name="colorTransform" value="	{	redMultiplier:0,
								greenMultiplier:0,
								blueMultiplier:0,
								redOffset: _colorScheme['color' + $index][0],
								greenOffset: _colorScheme['color' + $index][1],
								blueOffset: _colorScheme['color' + $index][2]}"/>
		<bind name="style" value="'backgroundImage'; _imagesPath + 'color_' + $index + '.png'"/>
	</block>

	<!-- campaigns_choose_campaign -->
	<block className="IssuedStampSmall">
		<style>
			<position value="absolute"/>
		</style>
		<bind name="rotation" value="_angleRotation ? _angleRotation : 0"/>
		<block>
			<style>
				<left value="-50%"/>
				<top value="-50%"/>
			</style>
			<block>
				<style>
					<hitTest value="false"/>
					<paddingTop value="6px"/>
					<paddingBottom value="6px"/>
					<paddingRight value="8px"/>
					<paddingLeft value="8px"/>
					<backgroundImage value="url:../service_kit/campaigns/icon_issued_small.png"/>
					<background9Slice value="[3]"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBoldNM"/>
					<style>
						<alpha value="0.95"/>
					</style>
					<bind name="text" value="_text"/>
				</block>
			</block>
		</block>
	</block>
	<block className="CampaignNeedTokenTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<style>
			<width value="350px"/>
		</style>
		<block type="text">
			<style>
				<marginLeft value="14px"/>
				<marginTop value="10px"/>
				<marginBottom value="14px"/>
				<width value="100%"/>
				<multiline value="true"/>
			</style>
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="'$FontColorOrange'"/>
			<bind name="text" value="'IDS_TOOLTIP_CAMPAIGN_NEED_TOKEN'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<marginLeft value="14px"/>
				<marginTop value="10px"/>
				<marginBottom value="10px"/>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TokenReward'; {rewardItem: { name: _token }}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<style>
				<marginLeft value="14px"/>
				<marginTop value="10px"/>
				<marginBottom value="10px"/>
				<width value="100%"/>
				<multiline value="true"/>
			</style>
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="'IDS_' + _token + '_HOWTOGET_TOKEN'"/>
		</block>
	</block>
	<block className="ChooseCampaign">
		<bind name="collectionDH" value="CC.campaignParams; 'campaignParamsCollection'; 'visibleCampaigns.sortedParams'"/>
		<params>
			<param name="name" value="ChooseCampaign"/>
		</params>
		<style>
			<width value="100%"/>
			<height value="450px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="stageSize"/>
		<bind name="watch" value="'isScrollNeeded'; ((stageWidth*0.752) &lt; (campaignParamsCollection.length*417))"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginTop value="6sh"/>
			</style>
			<bind name="instance" value="'CarouselBlockWithScroll'; {	currentSelectedIndex: currentSelectedIndex,
														_repeatElement: 'CampaignItem', _repeatCollection: campaignParamsCollection,
														_wheelScrollSpeed: 417,
														_leftScrollName: 'CampaignScrollLeft', _rightScrollName: 'CampaignScrollRight',
														_isScrollNeeded: isScrollNeeded,
														_itemWidth: 416,
														_height: '450px' }"/>
		</block>
	</block>
	<block className="CampaignItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'campaignParamsEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'campaignParamsId';[]; campaignParamsEntity.campaignParams.id"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignParamsId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="watch" value="'lastMissionId'; campaignAllMissions[campaignAllMissions.length - 1]"/>
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; lastMissionId"/>
		<bind name="watchDH" value="'mainTask';[]; campaignMissionEntity.campaignMissionParams.mainTask"/>
		<bind name="primaryEntityDH" value="'missionMainTaskEntity'; CC.campaignTaskParams; mainTask"/>
		<bind name="watchDH" value="'rewards';[]; missionMainTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watchDH" value="'isLooted';['missionMainTaskEntity.campaignTaskPlayer.evUpdate']; missionMainTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="dispatch" value="'click'; campaignIsActivated &amp;&amp; !campaignNeedToken ? 'campaignParamsChanged' : null; {curCampaignId: campaign.campaignParams.id}"/>
		<bind name="action" value="'click'; campaignIsActivated &amp;&amp; !campaignNeedToken ? 'navigateTo' : null; {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_MISSION}"/>
		<bind name="action" value="'click'; 'makeSeen'; { entityId: campaignParamsEntity.id }"/>
		<bind name="soundSet" value="'button_quest'"/>
		<style>
			<width value="416px"/>
			<height value="440px"/>
			<top value="5px"/>
			<align value="center"/>
		</style>
		<block>
			<style>
				<width value="345px"/>
			</style>
			<bind name="style" value="'alpha'; campaignIsActivated &amp;&amp; !campaignNeedToken ? 1.0 : 0.7"/>
			<bind name="tooltip" value="'SimpleStatusTooltip';	campaignNeedToken	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																		_text: 'IDS_CAMPAIGN_NEED_TOKEN' } :
												campaignIsActivated ? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																		_text: 'IDS_CAMPAIGN_HINT_DESCR' }
																	: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																		_text: 'IDS_INACTIVE_CAMPAIGN_HINT_DESCR' }"/>
			<block>
				<block className="DropShadow">
					<styleClass value="$FullsizeAbsolute"/>
					<styleClass value="$MouseDisable"/>
					<block className="drop_shadow" type="native">
						<styleClass value="$Fullsize"/>
						<style>
							<position value="absolute"/>
							<marginTop value="-2px"/>
							<marginRight value="-6px"/>
							<marginBottom value="-10px"/>
							<marginLeft value="-6px"/>
						</style>
					</block>
				</block>
				<style>
					<width value="100%"/>
					<height value="440px"/>
					<position value="absolute"/>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../campaigns/bg_campaign_item/' + campaignName + '_bg.jpg'"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="309px"/>
				</style>
				<block type="text">
					<bind name="name" value="'CampaignItem_' + campaignName"/>
					<styleClass value="$TextAccentBoldAccountLevel2"/>
					<style>
						<width value="100%"/>
						<textAlign value="center"/>
						<leading value="-10"/>
						<marginTop value="-50%"/>
					</style>
					<bind name="text" value="'IDS_' + campaignName + '_TITLE'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="345px"/>
				<height value="95px"/>
				<bottom value="0px"/>
				<left value="35px"/>
				<backgroundColor value="0x80000000"/>
				<position value="absolute"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="visible" value="campaignNeedToken"/>
				<bind name="tooltip" value="'CampaignNeedTokenTooltip'; {_token: campaignToken}"/>
				<block>
					<style>
						<marginLeft value="20px"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<style>
							<width value="48px"/>
							<height value="48px"/>
							<overflow value="hidden"/>
						</style>
						<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_campaign_lock.png'"/>
					</block>
					<block>
						<style>
							<marginLeft value="10px"/>
						</style>
						<styleClass value="$MiddleVAligned"/>
						<block type="text">
							<styleClass value="$CampaignNeedToken"/>
							<bind name="text" value="toUpperCase(tr('IDS_CAMPAIGN_NEED_TOKEN'))"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="visible" value="!campaignNeedToken"/>
				<block>
					<style>
						<marginLeft value="20px"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<bind name="class" value="'$FontColorBlueish'"/>
							<bind name="text" value="subst('IDS_TOTAL_MISSIONS_IN_CAMPAIGN', [], {count: campaignAllMissions.length}, campaignAllMissions.length) "/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<bind name="class" value="'$FontColorBlueish'"/>
							<bind name="text" value="'-' + ' ' + subst('IDS_TOTAL_TASKS_IN_CAMPAIGN', [], {count: campaignCountTasks}, campaignCountTasks) "/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="visible" value="(campaignIsActivated &amp;&amp; (campaignEndTime != 0)) || !campaignIsActivated"/>
						<bind name="countdown" value="campaignStartTime; 'formatStartTime'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
						<bind name="countdown" value="campaignEndTime; 'formatEndTime'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<style>
								<width value="250px"/>
							</style>
							<bind name="class" value="'$FontColorBlueish'"/>
							<bind name="pureText" value="campaignIsActivated ? 	tr('IDS_TILL_END') + ' ' + formatEndTime
															: 	tr('IDS_TILL_START') + ' ' + formatStartTime"/>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: rewards,
														_tooltipHeader: 'IDS_REWARD_FOR_CAMPAIGN',
														_isReceived: isLooted}"/>
				<bind name="transition" value="rollOver; 0.15; {alpha: 0.7}; {alpha: 1}"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<right value="20px"/>
					<width value="40px"/>
					<height value="38px"/>
					<backgroundImage value="url:../campaigns/campaign_icons/giftbox_small.png"/>
				</style>
				<block>
					<bind name="visible" value="isLooted"/>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'IssuedStampSmall'; isLooted ? {_angleRotation: -5, _text: tr('IDS_ISSUED_STAMP')} : null"/>
				</block>
			</block>
		</block>
		<block className="white_panel_gradient" type="native">
			<bind name="transition" value="rollOver &amp;&amp; campaignIsActivated &amp;&amp; !campaignNeedToken; 0.15; {alpha: 0}; {alpha: 0.3}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="345px"/>
				<height value="100%"/>
				<position value="absolute"/>
				<hitTest value="false"/>
			</style>
		</block>
		<bind name="primaryEntityDH" value="'campaignSelectNewTip';		CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_SELECT"/>
		<bind name="primaryEntityDH" value="'campaignSelectRepeatNewTip';CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_SELECT_REPEAT"/>
		<bind name="watchDH" value="'campaignSelectNewTipActive';		['campaignSelectNewTip.newGuidingTip.evChanged']; 		campaignSelectNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'campaignSelectRepeatNewTipActive';	['campaignSelectRepeatNewTip.newGuidingTip.evChanged']; campaignSelectRepeatNewTip.newGuidingTip.isActive"/>
		<bind name="watch" value="'newTipID'; 	campaignSelectNewTipActive			? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_SELECT : 
								campaignSelectRepeatNewTipActive	? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_SELECT_REPEAT
																	: SC.Context_guiding_tip.TIP_TYPE.NONE"/>
		<bind name="watch" value="'isNewTipVisible'; newTipID != SC.Context_guiding_tip.TIP_TYPE.NONE &amp;&amp; $index == 0"/>
		<bind name="instance" value="'NewGuidingTipHub'; isNewTipVisible ? {	_newTipId: newTipID,
															_tipPositioning: 'bottom', 
															_offset: 5,
															_onShowDelay: 0.7}
														: null"/>
	</block>

	<!-- campaigns_choose_mission -->
	<block className="ChooseMission">
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="primaryEntityDH" value="'mainTaskEntity'; CC.campaignTaskParams; campaignMainTask"/>
		<bind name="primaryEntityDH" value="'mapPositions'; CC.campaignTaskParams; campaignMapPositions"/>
		<bind name="primaryEntityDH" value="'carouselAreaHeightEntity'; CC.preference; 'ui.carousel.carouselAreaHeight'"/>
		<bind name="watchDH" value="'carouselAreaHeight'; ['carouselAreaHeightEntity.preference.evValueChanged']; Number(carouselAreaHeightEntity.preference.value)"/>
		<bind name="handleEventDH" value="'campaign.campaignParams.evVisibleChanged'; 'onUpdateCampaignVisibility'"/>
		<bind name="action" value="'onUpdateCampaignVisibility'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_CAMPAIGN}"/>
		<bind name="action" value="'addedToStage'; campaignIsViewed ? null : 'CampaignsProxy.viewCampaign'; {campaignID: _curCampaignId}"/>
		<styleClass value="$Fullsize"/>
		<bind name="style" value="'marginBottom'; carouselAreaHeight"/>
		<block className="lesta.display.MapPath" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="states" value="campaignMissionsStates"/>
			<bind name="pathNodes" value="campaignMapPositions"/>
			<bind name="dashSize" value="12"/>
			<bind name="spaceSize" value="8"/>
			<bind name="shadowDistance" value="3"/>
			<bind name="shadowAngle" value="60"/>
			<bind name="shadowColor" value="0"/>
			<bind name="shadowAlpha" value="0.6"/>
			<bind name="shadowStrength" value="1"/>
			<bind name="approximation" value="1"/>
			<bind name="tension" value="0.5"/>
			<bind name="linestyles" value="[
							{
								thickness: 1.5,
								color: 0xCCCCCC,
								alpha: 0.7,
								pixelHinting: false,
								scaleMode: 'normal',
								caps: 'none'
							},
							{
								thickness: 2.2,
								color: 0xffffff,
								alpha: 1,
								pixelHinting: false,
								scaleMode: 'normal',
								caps: 'none'
							},
							{
								thickness: 2.2,
								color: 0xffffff,
								alpha: 1,
								pixelHinting: false,
								scaleMode: 'normal',
								caps: 'none'
							},
							{
								thickness: 2.2,
								color: 0xffffff,
								alpha: 1,
								pixelHinting: false,
								scaleMode: 'normal',
								caps: 'none'
							},
							{
								thickness: 2.2,
								color: 0xffffff,
								alpha: 1,
								pixelHinting: false,
								scaleMode: 'normal',
								caps: 'none'
							},
							{
								thickness: 2.2,
								color: 0xffffff,
								alpha: 1,
								pixelHinting: false,
								scaleMode: 'normal',
								caps: 'none'
							},
							
						]"/>
		</block>
		<bind name="repeat" value="campaignAllMissions; 'MissionItem'; {_curCampaignId: _curCampaignId, _mapPosition: campaignMapPositions}"/>
	</block>
	<block className="MissionItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; $value"/>
		<bind name="primaryEntityDH" value="'missionMainTaskEntity'; CC.campaignTaskParams; mainTask"/>
		<bind name="watchDH" value="'id';[]; campaignMissionEntity.campaignMissionParams.id"/>
		<bind name="watchDH" value="'state';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'missionProgress';['campaignMissionEntity.progress.evChanged']; campaignMissionEntity.progress.value"/>
		<bind name="watchDH" value="'missionProgressMax';['campaignMissionEntity.progress.evChanged']; campaignMissionEntity.progress.max"/>
		<bind name="watchDH" value="'mainTask';[]; campaignMissionEntity.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'usualTasks';[]; campaignMissionEntity.campaignMissionParams.usualTasks"/>
		<bind name="watchDH" value="'mapPosition';[]; campaignMissionEntity.campaignMissionParams.mapPosition"/>
		<bind name="watchDH" value="'uiNumber';[]; campaignMissionEntity.campaignMissionParams.uiNumber"/>
		<bind name="watchDH" value="'rewards';['missionMainTaskEntity.campaignTaskPlayer.evUpdate']; missionMainTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watchDH" value="'isLooted';['missionMainTaskEntity.campaignTaskPlayer.evUpdate']; missionMainTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="watchDH" value="'missionStartTime';[]; campaignMissionEntity.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<bind name="stageSize"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="style" value="'left'; ((_mapPosition[$index*2]) * 100 + '%')"/>
		<bind name="style" value="'top'; ((_mapPosition[$index*2+1]) * 100 + '%')"/>
		<bind name="soundSet" value="'default_button'"/>
		<bind name="dispatch" value="'click'; 'campaignParamsChanged'; {curMissionId: campaignMissionEntity.campaignMissionParams.id}"/>
		<bind name="action" value="'click'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_TASK}"/>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$MiddleVAligned"/>
			<block className="indicator_progress_bar" type="native">
				<bind name="visible" value="(missionProgress &gt; 0) &amp;&amp; (missionProgress != missionProgressMax)"/>
				<style>
					<width value="100%"/>
					<marginBottom value="2px"/>
				</style>
				<bind name="value" value="(missionProgress / (usualTasks.length + 1)) * 10"/>
			</block>
			<block>
				<style>
					<width value="120px"/>
					<height value="120px"/>
				</style>
				<bind name="tooltip" value="'MissionItemTooltip'; {_curItemId: campaignMissionEntity.campaignMissionParams.id, _curCampaignId: _curCampaignId}"/>
				<bind name="name" value="'MissionItem_' + uiNumber"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundSize value="cover"/>
					</style>
					<bind name="style" value="'backgroundImage'; (state == 0) 		? 'url:../campaigns/missions_pin/' + campaignName + '_locked_pin.png':
												(state == 5) 	? 'url:../campaigns/missions_pin/' + campaignName + '_done_pin.png'
																						: 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundSize value="cover"/>
					</style>
					<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: (state == 0) ? 0.3 : 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundImage'; (state == 5) 	? 'url:../campaigns/missions_pin/over/' + campaignName + '_over_done_pin.png'
																						: 'url:../campaigns/missions_pin/over/' + campaignName + '_over_pin.png'"/>
				</block>
				<block>
					<bind name="visible" value="(state == 2) || (state == 4)"/>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<alpha value="0.9"/>
						</style>
						<styleClass value="$TextDefaultBold30NM"/>
						<bind name="text" value="uiNumber"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="(state == 0)"/>
					<style>
						<backgroundSize value="cover"/>
						<width value="48px"/>
						<height value="48px"/>
						<marginTop value="36px"/>
						<marginLeft value="36px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_campaign_lock.png'"/>
				</block>
				<block>
					<bind name="visible" value="state == 0 &amp;&amp; (missionTimeToStart &gt; 0 &amp;&amp; !campaignNeedToken)"/>
					<style>
						<position value="absolute"/>
						<top value="0"/>
						<right value="0"/>
					</style>
					<block className="icon_rent" type="native"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="primaryEntityDH" value="'campaignMissionNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_MISSION"/>
					<bind name="primaryEntityDH" value="'campaignMissionRepeatNewTip';	CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_MISSION_REPEAT"/>
					<bind name="watchDH" value="'campaignMissionNewTipActive';		['campaignMissionNewTip.newGuidingTip.evChanged']; 		 campaignMissionNewTip.newGuidingTip.isActive"/>
					<bind name="watchDH" value="'campaignMissionRepeatNewTipActive';	['campaignMissionRepeatNewTip.newGuidingTip.evChanged']; campaignMissionRepeatNewTip.newGuidingTip.isActive"/>
					<bind name="watch" value="'newTipID'; 	campaignMissionNewTipActive			? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_MISSION : 
											campaignMissionRepeatNewTipActive	? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_MISSION_REPEAT
																				: SC.Context_guiding_tip.TIP_TYPE.NONE"/>
					<bind name="watch" value="'isNewTipVisible'; newTipID != SC.Context_guiding_tip.TIP_TYPE.NONE &amp;&amp; $index == 0"/>
					<bind name="instance" value="'NewGuidingTipHub'; isNewTipVisible ? {	_newTipId: newTipID,
																		_tipPositioning: 'bottom', 
																		_offset: 5,
																		_pointerOffset: -47,
																		_onShowDelay: 0.7}
																	: null"/>
				</block>
			</block>
			<block>
				<bind name="watch" value="'lastMissionId'; campaignAllMissions[campaignAllMissions.length - 1]"/>
				<bind name="transition" value="rollOver; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: 5}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="tooltip" value="'RewardContainerTooltip'; { 	_rewards: rewards,
														_tooltipHeader: (id == lastMissionId) ? 'IDS_REWARD_FOR_CAMPAIGN' : 'IDS_REWARDS_FOR_MISSION_COMPLETE',
														_isReceived: isLooted}"/>
				<style>
					<position value="absolute"/>
					<right value="0px"/>
					<bottom value="0px"/>
					<width value="40px"/>
					<height value="38px"/>
					<backgroundImage value="url:../campaigns/campaign_icons/giftbox_small.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="MissionCarouselItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; $value"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="watchDH" value="'state';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'uiNumber';[]; campaignMissionEntity.campaignMissionParams.uiNumber"/>
		<bind name="soundSet" value="'default_button'"/>
		<bind name="dispatch" value="'click'; 'campaignParamsChanged'; {curMissionId: campaignMissionEntity.campaignMissionParams.id}"/>
		<bind name="action" value="'click'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_TASK}"/>
		<bind name="tooltip" value="'MissionItemTooltip'; {_curItemId: campaignMissionEntity.campaignMissionParams.id, _curCampaignId: _curCampaignId}"/>
		<bind name="watchDH" value="'missionStartTime';[]; campaignMissionEntity.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<block>
			<bind name="name" value="'MissionItem_' + uiNumber"/>
			<styleClass value="$MissionCarouselItemSelected"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="transition" value="$value == _curMissionId; 0.15; { scaleX: 0.75, scaleY: 0.75, top: 10, left: 10 }; { scaleX: 1, scaleY: 1, top: 0, left: 0 }"/>
			<bind name="transition" value="rollOver &amp;&amp; !(mouseDown); 0.15; {alpha: 0.9}; {alpha: 1}"/>
			<bind name="style" value="'backgroundImage'; (state == 0) 		? 'url:../campaigns/missions_pin/' + campaignName + '_locked_pin.png':
										(state == 5) 	? 'url:../campaigns/missions_pin/' + campaignName + '_done_pin.png'
																					: 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
			<block>
				<bind name="visible" value="(state != 0)"/>
				<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; (state == 5) 	? 'url:../campaigns/missions_pin/over/' + campaignName + '_over_done_pin.png'
																						: 'url:../campaigns/missions_pin/over/' + campaignName + '_over_pin.png'"/>
			</block>
			<block>
				<bind name="visible" value="(state == 2) || (state == 4)"/>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<style>
						<alpha value="0.75"/>
					</style>
					<styleClass value="$TextDefaultBold25NM"/>
					<bind name="text" value="uiNumber"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="(state == 0)"/>
				<style>
					<backgroundSize value="cover"/>
					<width value="32px"/>
					<height value="32px"/>
					<marginTop value="24px"/>
					<marginLeft value="24px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_campaign_lock.png'"/>
			</block>
			<block>
				<bind name="visible" value="state == 0 &amp;&amp; (missionTimeToStart &gt; 0 &amp;&amp; !campaignNeedToken)"/>
				<style>
					<position value="absolute"/>
					<top value="0"/>
					<right value="0"/>
				</style>
				<block className="icon_rent" type="native"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<bottom value="-20px"/>
			</style>
			<bind name="fade" value="$value == _curMissionId; 0.1; {alpha: 0}; {alpha: 1}"/>
			<block>
				<style>
					<position value="absolute"/>
					<bottom value="0px"/>
					<height value="4px"/>
					<width value="100%"/>
				</style>
				<block className="BlurMapCustom">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="mc_blurmap_empty" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$Fullsize"/>
						<bind name="blurMap" value="0"/>
					</block>
				</block>
			</block>
			<block className="scroll_arrow" type="native"/>
		</block>
	</block>
	<block className="MissionItemTooltip">
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; _curItemId"/>
		<bind name="primaryEntityDH" value="'missionMainTaskEntity'; CC.campaignTaskParams; mainTask"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="watchDH" value="'stars';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'missionProgress';['campaignMissionEntity.progress.evChanged']; campaignMissionEntity.progress.value"/>
		<bind name="watchDH" value="'missionProgressMax';['campaignMissionEntity.progress.evChanged']; campaignMissionEntity.progress.max"/>
		<bind name="watchDH" value="'mainTask';[]; campaignMissionEntity.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'mainTaskState';['missionMainTaskEntity.campaignTaskPlayer.evUpdate']; missionMainTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'missionState';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'goal';[]; missionMainTaskEntity.campaignTaskParams.goal"/>
		<bind name="watchDH" value="'usualTasks';[]; campaignMissionEntity.campaignMissionParams.usualTasks"/>
		<bind name="watchDH" value="'costUnlock';[]; missionMainTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'uiNumber';[]; campaignMissionEntity.campaignMissionParams.uiNumber"/>
		<bind name="watchDH" value="'missionStartTime';[]; campaignMissionEntity.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="350px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="120px"/>
			</style>
			<bind name="instance" value="'MissionItemTooltipHeader'; {_curCampaignId: _curCampaignId, _curItemId: _curItemId}"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="missionState == 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<block type="text">
					<styleClass value="$TextHeader"/>
					<bind name="class" value="'$FontColorOrange'"/>
					<style>
						<maxWidth value="320"/>
						<textAlign value="center"/>
					</style>
					<bind name="timeFormat" value="missionTimeToStart; 'HIGHEST'; 'formatStartTime'; true"/>
					<bind name="text" value="campaignNeedToken 		? 	'IDS_TOOLTIP_CAMPAIGN_NEED_TOKEN' :
							missionTimeToStart &gt; 0 	? 	subst('IDS_LOCKED_MISSION_TIME_LEFT_TOOLTIP', [], {_timeLeft: formatStartTime}) :
														'IDS_LOCKED_MISSION_TOOLTIP'"/>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="(missionProgress &gt; 0) &amp;&amp; (missionProgress != missionProgressMax)"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<block className="indicator_progress_bar" type="native">
					<style>
						<width value="100%"/>
					</style>
					<bind name="value" value="(missionProgress / (usualTasks.length + 1)) * 10"/>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$TextHeader"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<bind name="text" value="tr('IDS_DONE_TASKS_COUNT') + ' ' + missionProgress + '/' + (usualTasks.length + 1)"/>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="(missionState != 0)"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<block>
					<style>
						<flow value="htile"/>
						<alpha value="0.7"/>
						<width value="320px"/>
					</style>
					<bind name="repeat" value="costUnlock; 'StarsEarnedDisabled'; {_isInTooltip: true}"/>
				</block>
				<block>
					<style>
						<flow value="htile"/>
						<alpha value="1.2"/>
						<width value="320px"/>
						<position value="absolute"/>
					</style>
					<bind name="repeat" value="stars; 'StarsEarnedEnable'; {_isInTooltip: true}"/>
				</block>
				<block type="text">
					<style>
						<marginTop value="-6px"/>
					</style>
					<styleClass value="$TextHeader"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<bind name="text" value="tr('IDS_MISSION_TAKE_STARS') + ' ' + stars + '/' + costUnlock"/>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="missionState != 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeader"/>
						<bind name="class" value="'$FontColorBlueish'"/>
						<bind name="text" value="'IDS_MISSION_FINAL_TASK'"/>
					</block>
					<block>
						<bind name="visible" value="(mainTaskState == 5)"/>
						<style>
							<backgroundImage value="bitmap:quest_done_icon"/>
							<marginTop value="3px"/>
							<marginLeft value="3px"/>
							<hitTest value="false"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'GoalsItem'; {_entityId: goal, _isInMissionTooltip: true}"/>
				</block>
				<block>
					<style>
						<right value="-6px"/>
						<position value="absolute"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<style>
							<width value="80px"/>
							<height value="80px"/>
							<alpha value="0.8"/>
							<backgroundSize value="cover"/>
						</style>
						<bind name="style" value="'backgroundImage'; (mainTaskState == 5) 	? 'url:../campaigns/missions_pin/' + campaignName + '_done_pin.png'
																									: 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
						<block>
							<bind name="visible" value="(mainTaskState == 1) || (mainTaskState == 2)"/>
							<styleClass value="$MiddleAligned"/>
							<styleClass value="$MiddleVAligned"/>
							<block type="text">
								<style>
									<alpha value="0.9"/>
								</style>
								<styleClass value="$TextDefaultBold19NM"/>
								<bind name="text" value="uiNumber"/>
							</block>
						</block>
						<block>
							<bind name="visible" value="(mainTaskState == 0)"/>
							<style>
								<backgroundSize value="cover"/>
								<width value="32px"/>
								<height value="32px"/>
								<marginTop value="24px"/>
								<marginLeft value="24px"/>
							</style>
							<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_campaign_lock.png'"/>
						</block>
					</block>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$HugeMargins"/>
			<bind name="visible" value="missionState != 0"/>
			<bind name="instance" value="'MouseInstruction'; { _type: 'left', _instructionText: 'IDS_GO_TO_MISSIONS', _maxWidth: 320 }"/>
		</block>
	</block>
	<block className="MissionItemTooltipHeader">
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; _curItemId"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'state';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'campaignName';[]; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'uiNumber';[]; campaignMissionEntity.campaignMissionParams.uiNumber"/>
		<styleClass value="$Fullsize"/>
		<style>
			<paddingTop value="2px"/>
			<paddingRight value="2px"/>
			<paddingLeft value="2px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<alpha value="0.8"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../campaigns/mission_tooltip_bg/' + campaignName + '_tooltip.jpg'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<style>
					<width value="120px"/>
					<height value="120px"/>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; (state == 5) 	? 'url:../campaigns/missions_pin/' + campaignName + '_done_pin.png':
											(state == 0) 		? 'url:../campaigns/missions_pin/' + campaignName + '_locked_pin.png'
														 								: 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
				<block>
					<bind name="visible" value="(state == 2) || (state == 4)"/>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<alpha value="0.9"/>
						</style>
						<styleClass value="$TextDefaultBold30NM"/>
						<bind name="text" value="uiNumber"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="(state == 0)"/>
					<style>
						<backgroundSize value="cover"/>
						<width value="48px"/>
						<height value="48px"/>
						<marginTop value="36px"/>
						<marginLeft value="36px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_campaign_lock.png'"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<style>
						<maxWidth value="200"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="toUpperCase(tr('IDS_MISSIONS')) + ' ' + uiNumber"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- campaigns_choose_task -->
	<block className="ChooseTask">
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; _curMissionId"/>
		<bind name="watchDH" value="'usualTasks';[]; mission.campaignMissionParams.usualTasks"/>
		<bind name="watchDH" value="'isNarrative'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isNarrative"/>
		<bind name="handleEventDH" value="'campaign.campaignParams.evVisibleChanged'; 'onUpdateCampaignVisibility'"/>
		<bind name="action" value="'onUpdateCampaignVisibility'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_CAMPAIGN}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="scroll_line" type="native">
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="-21px"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="100px"/>
					<position value="absolute"/>
					<bottom value="-121px"/>
				</style>
				<block className="gradient_half_sphere" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginRight'; isNarrative ? '1280:250,1920:340aw' : '1280:20,1920:40aw'"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="repeat" value="campaignAllMissions; 'MissionCarouselItem'; {_curCampaignId: _curCampaignId, _mapPosition: campaignMapPositions, _curMissionId: _curMissionId}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginRight value="1280:20,1920:40aw"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="5sh"/>
					</style>
					<block>
						<styleClass value="$MiddleAligned"/>
						<bind name="instance" value="'WindowTaskHeaderInstruction'; { _curMissionId: _curMissionId, _curCampaignId: _curCampaignId }"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<height value="10sh"/>
						<marginTop value="3.5sh"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
					<block className="gradient_half_sphere" type="native">
						<style>
							<alpha value="0.6"/>
						</style>
						<styleClass value="$Fullsize"/>
					</block>
				</block>
				<block>
					<styleClass value="$Fullsize"/>
					<styleClass value="$DefaultScrollBar"/>
					<style>
						<flow value="htile"/>
						<align value="center"/>
						<marginTop value="-7sh"/>
					</style>
					<bind name="repeat" value="usualTasks; 'TaskItem'; {_isShipSuitable: true, _isBattleSuitable: true, _needMargins: true, _isUseless: false}"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<bottom value="128px"/>
					</style>
					<bind name="primaryEntityDH" value="'campaignTaskNewTip';		CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_TASK"/>
					<bind name="primaryEntityDH" value="'campaignTaskRepeatNewTip';	CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_TASK_REPEAT"/>
					<bind name="watchDH" value="'campaignTaskNewTipActive';			['campaignTaskNewTip.newGuidingTip.evChanged']; 		campaignTaskNewTip.newGuidingTip.isActive"/>
					<bind name="watchDH" value="'campaignTaskRepeatNewTipActive';	['campaignTaskRepeatNewTip.newGuidingTip.evChanged'];	campaignTaskRepeatNewTip.newGuidingTip.isActive"/>
					<bind name="watch" value="'newTipID'; 	campaignTaskNewTipActive		? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_TASK : 
											campaignTaskRepeatNewTipActive	? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_TASK_REPEAT
																			: SC.Context_guiding_tip.TIP_TYPE.NONE"/>
					<bind name="watch" value="'isNewTipVisible'; newTipID != SC.Context_guiding_tip.TIP_TYPE.NONE"/>
					<bind name="instance" value="'NewGuidingTipHub'; isNewTipVisible ? {	_newTipId: newTipID,
																		_tipPositioning: 'bottom', 
																		_offset: 5,
																		_noPointer: true,
																		_hasNextButton: true,
																		_onShowDelay: 0.7}
																	: null"/>
				</block>
			</block>
			<block>
				<style>
					<marginTop value="5sh"/>
				</style>
				<bind name="visible" value="campaign.campaignParams.isNarrative"/>
				<bind name="instance" value="'CampaignDescription'; {_text: 'IDS_' + mission.campaignMissionParams.name + '_DESCR'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="TaskItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID ? _taskID : $value"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'max';[]; campaignTaskEntity.progress.max"/>
		<bind name="watchDH" value="'taskNumber';[]; campaignTaskEntity.campaignTaskParams.taskNumber"/>
		<bind name="watchDH" value="'uiNumber';[]; mission.campaignMissionParams.uiNumber"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'lootStars';[]; campaignTaskEntity.campaignTaskParams.lootStars"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'bgIconID';[]; campaignTaskEntity.campaignTaskParams.bgIconID"/>
		<bind name="watchDH" value="'stars';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'rewards';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watch" value="'canOpenFinalTask'; isMainTask &amp;&amp; (stars &gt;= costUnlock) &amp;&amp; (state == 0)"/>
		<bind name="watch" value="'isInteractive'; state == 1 || state == 2 || state == 3"/>
		<bind name="watch" value="'isHighlighted'; state == 2 || state == 3 || canOpenFinalTask"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isPremiumAccount';	['resourceEntity.accountResource.evActivePremiumTypeChanged'];	resourceEntity.accountResource.activePremiumType != SC.Common.PREMIUM_TYPE.NONE"/>
		<bind name="firstEntityDH" value="'slotsEntity'; CC.constantsCampaignSlots"/>
		<bind name="watchDH" value="'common'; []; slotsEntity.constantsCampaignSlots.common"/>
		<bind name="watchDH" value="'premium'; []; slotsEntity.constantsCampaignSlots.premium"/>
		<bind name="watch" value="'availableSlots'; 		(isPremiumAccount ? (common + premium) : common)"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="watch" value="'haveFreeSlot'; 		(choosenTasks.length &lt; availableSlots)"/>
		<bind name="watchDH" value="'missionStartTime';[]; mission.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<style>
			<width value="230px"/>
			<height value="80px"/>
		</style>
		<bind name="class" value="_needMargins ? '$RepeatMarginsForTasks' : null"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="class" value="	isHighlighted ? '$TaskItemInnerPicked'
									  : '$TaskItemInner'"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'colorMatrixFilter'; 	
												!isInteractive	? '0 -95 0 0'
																: ''"/>
				<bind name="style" value="'alpha'; state == 0 || !isInteractive ? 0.5 : 1"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="DropShadow">
						<styleClass value="$FullsizeAbsolute"/>
						<styleClass value="$MouseDisable"/>
						<block className="drop_shadow" type="native">
							<styleClass value="$Fullsize"/>
							<style>
								<position value="absolute"/>
								<marginTop value="-2px"/>
								<marginRight value="-6px"/>
								<marginBottom value="-10px"/>
								<marginLeft value="-6px"/>
							</style>
						</block>
					</block>
					<block>
						<bind name="name" value="'TaskItem_' + taskNumber"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<backgroundSize value="cover"/>
						</style>
						<bind name="style" value="'backgroundImage'; 'url:../campaigns/bg_task_item/' + 'task_bg_campaign_' + (bgIconID ? bgIconID : taskNumber) + '.jpg'"/>
					</block>
					<block className="inner_panel" type="native">
						<style>
							<alpha value="2.5"/>
						</style>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block className="white_panel_gradient" type="native">
						<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 0.7}"/>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block>
						<bind name="visible" value="isLooted &amp;&amp; state != 2"/>
						<bind name="transition" value="rollOver; 0.15; {alpha: 0.5}; {alpha: 0.7}"/>
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="style" value="'backgroundImage'; 'url:../campaigns/task_item_icons/border_islooted.png'"/>
					</block>
					<block className="hint_panel_bold" type="native">
						<style>
							<marginTop value="-2px"/>
							<marginBottom value="-2px"/>
							<marginLeft value="-2px"/>
							<marginRight value="-2px"/>
						</style>
						<bind name="transition" value="isHighlighted; 0.15; {alpha: 0}; {alpha: 1}"/>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block>
						<style>
							<width value="56%"/>
							<height value="100%"/>
							<alpha value="0.4"/>
							<backgroundSize value="cover"/>
						</style>
						<bind name="style" value="'alpha'; (isMainTask &amp;&amp; (state == 0)) ? 0.3 : 0.6"/>
						<bind name="style" value="'backgroundImage';	state == CAMPAIGN_STATE_COMPLETED ? 'url:../campaigns/task_item_icons/' + campaignName + '_done.png' : 
																						'url:../campaigns/task_item_icons/' + campaignName + '.png'"/>
						<block>
							<bind name="visible" value="(state != 0)"/>
							<style>
								<width value="46%"/>
								<height value="100%"/>
							</style>
							<block>
								<styleClass value="$MiddleAligned"/>
								<styleClass value="$MiddleVAligned"/>
								<block type="text">
									<styleClass value="$TextDefaultBold30NM"/>
									<style>
										<alpha value="0.9"/>
									</style>
									<bind name="text" value="uiNumber"/>
								</block>
							</block>
						</block>
					</block>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<left value="70px"/>
							<position value="absolute"/>
						</style>
						<block type="text">
							<bind name="style" value="'alpha'; isLooted &amp;&amp; state != 2 ? '0.75' : '0.95' "/>
							<style>
								<maxWidth value="140"/>
							</style>
							<styleClass value="$TextLargeHeaderBold"/>
							<bind name="text" value="isMainTask 	? (toUpperCase(tr('IDS_FINAL_TASK')))
												: (toUpperCase(tr('IDS_CAMPAIGN_TASK'))) + ' ' + taskNumber"/>
						</block>
						<block className="indicator_progress_bar" type="native">
							<bind name="visible" value="((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max) )"/>
							<style>
								<width value="140px"/>
							</style>
							<bind name="value" value="(taskProgress / max) * 10"/>
						</block>
						<block>
							<bind name="visible" value="(missionState == 0 || missionState == 2) &amp;&amp; !isMainTask"/>
							<style>
								<marginTop value="3px"/>
							</style>
							<block>
								<bind name="repeat" value="lootStars; 'StarsEarnedEnable'"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="state == 0"/>
				<style>
					<width value="48px"/>
					<height value="48px"/>
					<marginTop value="11px"/>
					<marginLeft value="5px"/>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_campaign_lock.png'"/>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<bind name="dispatch" value="'doubleClick'; 'Tooltip.Close'"/>
			<block>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<params>
					<param name="doubleClickEnabled" value="true"/>
				</params>
				<bind name="soundSet" value="'default_button'"/>
				<bind name="tooltip" value="'TaskItemTooltip'; {	_taskID: campaignTaskEntity.campaignTaskParams.id}"/>
				<bind name="tooltip" value="'TaskItemInfotip'; {	_taskID: campaignTaskEntity.campaignTaskParams.id}; TooltipBehaviour.infotip"/>
				<bind name="action" value="'doubleClick';  taskProgress &gt; 0 &amp;&amp; taskProgress &lt; max 												? null :
										  (state == 1 &amp;&amp; haveFreeSlot &amp;&amp; missionTimeToStart &lt;= 0)			? 'CampaignsProxy.activateTask' :
										  (state == 2 &amp;&amp; (taskProgress == 0 || taskProgress == null))	? 'CampaignsProxy.deactivateTask'
																																: null ; { taskID: campaignTaskEntity.campaignTaskParams.id}"/>
				<bind name="request" value="'doubleClick'; (taskProgress &gt; 0 &amp;&amp; taskProgress &lt; max) 	? 'CampaignsProxy.deactivateTask'
																					: null; {taskID: campaignTaskEntity.campaignTaskParams.id}"/>
			</block>
			<block>
				<bind name="visible" value="state == 3 || canOpenFinalTask"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<style>
						<alpha value="0.75"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="BlurMapCustom">
						<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
						<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<hitTest value="false"/>
						</style>
						<bind name="visible" value="isBlurEnabled"/>
						<block className="mc_blurmap5_feather" type="native">
							<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
							<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
							<styleClass value="$Fullsize"/>
							<bind name="blurMap" value="0"/>
						</block>
					</block>
					<block className="modal_panel" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="style" value="'alpha'; contrast ? 1.0 : 0.8"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="100%"/>
						<marginLeft value="6px"/>
						<marginRight value="6px"/>
					</style>
					<block>
						<bind name="visible" value="((missionState == 0 || missionState == 2) &amp;&amp; !isMainTask)
									|| (!isLooted &amp;&amp; !canOpenFinalTask)"/>
						<styleClass value="$MiddleAligned"/>
						<style>
							<height value="40px"/>
						</style>
						<block>
							<bind name="visible" value="(missionState == 0 || missionState == 2) &amp;&amp; !isMainTask"/>
							<styleClass value="$MiddleVAligned"/>
							<bind name="repeat" value="lootStars; 'StarsEarnedEnable'"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="!isLooted &amp;&amp; !canOpenFinalTask"/>
							<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: rewards,
																	_tooltipHeader: 'IDS_REWARDS_CAMPAIGN_TASK',
																	_isReceived: isLooted}"/>
							<style>
								<width value="40px"/>
								<height value="38px"/>
								<marginLeft value="6px"/>
								<marginBottom value="2px"/>
								<backgroundImage value="url:../campaigns/campaign_icons/giftbox_small.png"/>
							</style>
							<block>
								<bind name="visible" value="isLooted"/>
								<styleClass value="$MiddleAligned"/>
								<styleClass value="$MiddleVAligned"/>
								<bind name="scaleX" value="0.85"/>
								<bind name="scaleY" value="0.85"/>
								<bind name="instance" value="'IssuedStampSmall'; isLooted ? {_angleRotation: -3, _text: tr('IDS_ISSUED_STAMP')} : null"/>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<bind name="watch" value="'btnLabel';	state == 3 &amp;&amp; !isLooted		? toUpperCase(tr('IDS_TAKE_REWARD')) :
											state == 3 &amp;&amp; isLooted 		? toUpperCase(tr('IDS_TAKE_STARS'))  :
											canOpenFinalTask 								? toUpperCase(tr('IDS_OPEN_FINAL_TASK'))
																							: ''"/>
					<bind name="watch" value="'btnAction';	state == 3 	? 'CampaignsProxy.takeReward' :
											canOpenFinalTask				? 'CampaignsProxy.unlockTask'
																			: null "/>
					<bind name="instance" value="'DefaultButton'; {	_width: '100%',
													_label: btnLabel,
													_focusIndex: 0,
													_defaultFocused: true,
													_action: btnAction,
													_isTransactionBtn: true,
													_actionParams: {taskID: campaignTaskEntity.campaignTaskParams.id},
													_enabled: btnAction}"/>
				</block>
			</block>
			<bind name="watch" value="'showGiftbox';	rollOver &amp;&amp; !canOpenFinalTask &amp;&amp; state != 3 &amp;&amp; !showWarning"/>
			<block>
				<bind name="fade" value="showGiftbox; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: 5}; 2"/>
				<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: rewards,
														_tooltipHeader: 'IDS_REWARDS_CAMPAIGN_TASK',
														_isReceived: isLooted}"/>
				<style>
					<right value="5px"/>
					<bottom value="1px"/>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'hitTest'; showGiftbox"/>
				<block>
					<style>
						<width value="40px"/>
						<height value="38px"/>
						<marginRight value="2px"/>
						<marginBottom value="4px"/>
						<backgroundImage value="url:../campaigns/campaign_icons/giftbox_small.png"/>
					</style>
					<bind name="style" value="'alpha'; (isLooted ? 0.5 : 1)"/>
					<block>
						<bind name="visible" value="isLooted"/>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$MiddleVAligned"/>
						<bind name="scaleX" value="0.85"/>
						<bind name="scaleY" value="0.85"/>
						<bind name="instance" value="'IssuedStampSmall'; isLooted ? {_angleRotation: -2, _text: tr('IDS_ISSUED_STAMP')} : null"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="isLooted &amp;&amp; !_inTaskPicker"/>
				<style>
					<backgroundImage value="bitmap:checkbox_check"/>
					<top value="5px"/>
					<right value="26px"/>
					<position value="absolute"/>
					<hitTest value="false"/>
				</style>
			</block>
			<bind name="watch" value="'showWarning'; (!_isShipSuitable || !_isBattleSuitable || _isUseless) &amp;&amp; (state != 3)"/>
			<bind name="watch" value="'unsuitableShipAndBattle'; !_isShipSuitable &amp;&amp; !_isBattleSuitable"/>
			<block>
				<bind name="fade" value="showWarning; 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}; 2"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="BlurMapCustom">
						<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
						<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<hitTest value="false"/>
						</style>
						<bind name="visible" value="isBlurEnabled"/>
						<block className="mc_blurmap5_feather" type="native">
							<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
							<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
							<styleClass value="$Fullsize"/>
							<bind name="blurMap" value="0"/>
						</block>
					</block>
					<block className="modal_panel" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="style" value="'alpha'; contrast ? 1.0 : 0.8"/>
					</block>
				</block>
				<block type="text">
					<bind name="fade" value="showWarning; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2; 0.05"/>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorOrange'"/>
					<style>
						<maxWidth value="210"/>
						<textAlign value="center"/>
					</style>
					<bind name="text" value="unsuitableShipAndBattle					? toUpperCase(tr('IDS_TASK_UNSUITABLE_BATTLE_AND_SHIP')) :
							!(_isShipSuitable) 						? toUpperCase(tr('IDS_TASK_UNSUITABLE_SHIP')) :
							!(_isBattleSuitable) 					? toUpperCase(tr('IDS_TASK_UNSUITABLE_BATTLE')) :
							 (_isUseless) 							? toUpperCase(tr('IDS_TASK_IS_USELESS'))
																	: ''"/>
				</block>
			</block>
		</block>
	</block>
	<block className="TaskItemTooltip">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isPremiumAccount';	['resourceEntity.accountResource.evActivePremiumTypeChanged'];	resourceEntity.accountResource.activePremiumType != SC.Common.PREMIUM_TYPE.NONE"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="firstEntityDH" value="'slotsEntity'; CC.constantsCampaignSlots"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'isActivated';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isActivated"/>
		<bind name="watchDH" value="'goal';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.goal"/>
		<bind name="watchDH" value="'rewards';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watchDH" value="'stars';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'common'; []; slotsEntity.constantsCampaignSlots.common"/>
		<bind name="watchDH" value="'premium'; []; slotsEntity.constantsCampaignSlots.premium"/>
		<bind name="watch" value="'canOpenFinalTask'; 	isMainTask &amp;&amp; stars &gt;= costUnlock &amp;&amp; state == 0"/>
		<bind name="watch" value="'availableSlots'; 		isPremiumAccount ? (common + premium) : common"/>
		<bind name="watch" value="'taskWithoutProgress'; taskProgress == 0 || taskProgress == null"/>
		<bind name="watch" value="'haveFreeSlot'; 		choosenTasks.length &lt; availableSlots"/>
		<bind name="watchDH" value="'missionStartTime';[]; mission.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="350px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block className="hint_panel_bold" type="native">
			<bind name="visible" value="isActivated &amp;&amp; !_isInPostbattle"/>
			<style>
				<margin value="-2px"/>
				<alpha value="0.6"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="1px"/>
					<paddingRight value="1px"/>
					<paddingLeft value="1px"/>
					<marginBottom value="-1px"/>
				</style>
				<bind name="instance" value="'TaskItemHeader'; {_taskID: _taskID}"/>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block className="TaskItemStatus">
				<bind name="visible" value="state != 5"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$HugeMargins"/>
					<block>
						<bind name="visible" value="(state == 5 || isLooted)"/>
						<style>
							<backgroundImage value="bitmap:checkbox_check"/>
							<width value="22px"/>
							<height value="17px"/>
							<top value="4px"/>
							<marginRight value="3px"/>
						</style>
					</block>
					<block type="text">
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="state == 2 &amp;&amp; isLooted ? 'IDS_TASK_IN_PROGRESS_REPEAT' :
						state == 2 			? 'IDS_TASK_IN_PROGRESS' :
						state == 3					? 'IDS_TASK_COMPLETED' :
						isLooted										? 'IDS_TASK_REPLAYABLE' :
						state == 0				? 'IDS_TASK_LOCKED'
																		: 'IDS_TASK_NOT_DONE'"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$HugeMargins"/>
					<bind name="instance" value="'GoalsItem'; { _entityId: goal}"/>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-2px"/>
				</style>
				<block className="inner_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<bind name="instance" value="'TaskContainerRestriction'; {_taskID: _taskID, _isInPostbattle: _isInPostbattle, _battleTypePlayed: _battleTypePlayed}"/>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<styleClass value="$HugeMargins"/>
				<block>
					<style>
						<width value="40px"/>
						<height value="38px"/>
						<marginRight value="18px"/>
						<marginBottom value="2px"/>
						<backgroundImage value="url:../campaigns/campaign_icons/giftbox_small.png"/>
					</style>
					<bind name="style" value="'alpha'; (isLooted ? 0.7 : 1)"/>
					<block>
						<bind name="visible" value="isLooted"/>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$MiddleVAligned"/>
						<bind name="instance" value="'IssuedStampSmall'; isLooted ? {_angleRotation: -2, _text: tr('IDS_ISSUED_STAMP')} : null"/>
					</block>
				</block>
				<block type="text">
					<styleClass value="$MiddleVAligned"/>
					<style>
						<maxWidth value="240"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="!isLooted ? 'IDS_ADDITIONAL_REWARD_BEFORE' : 'IDS_ADDITIONAL_REWARD_AFTER'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="!_isInPostbattle"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="	!_isInPostbattle &amp;&amp; (	state == 1 ||
												state == 2 ||
												state == 3 ||
												canOpenFinalTask
											)"/>
			<styleClass value="$HugeMargins"/>
			<bind name="instance" value="'MouseInstruction'; _isInPostbattle ? null : { 	_type: 'left', 
																		_instructionText: 	(state == 1)								? 'IDS_SHOW_TASK_DETAILS' :
																							(state == 2 &amp;&amp; taskWithoutProgress) 	? 'IDS_SHOW_TASK_DETAILS' :
																							(state == 2 &amp;&amp; !taskWithoutProgress) 	? 'IDS_SHOW_TASK_DETAILS' :
																							(state == 3) 								? 'IDS_TAKE_REWARD':
																							(canOpenFinalTask) 												? 'IDS_OPEN_FINAL_TASK'
																													 										: '',
																		_maxWidth: 300 }"/>
		</block>
		<block>
			<styleClass value="$HugeMargins"/>
			<style>
				<marginTop value="-6px"/>
			</style>
			<bind name="visible" value="	!_isInPostbattle &amp;&amp;
						(state == 1 &amp;&amp; haveFreeSlot &amp;&amp; missionTimeToStart &lt;= 0) || state == 2"/>
			<bind name="instance" value="'MouseInstruction'; _isInPostbattle ? null : { 	_type: 'double_left', 
																		_instructionText: 	(state == 1) 	  						  ? 'IDS_TASK_ACTIVATE' :
																							(state == 2 &amp;&amp; !taskWithoutProgress) ? 'IDS_TASK_CANCEL_WITH_PROGRESS' :
																							(state == 2)						  ? 'IDS_TASK_CANCEL' 
																													 									  : '',
																		_maxWidth: 300 }"/>
		</block>
	</block>
	<block className="TaskItemInfotip">
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="firstEntityDH" value="'slotsEntity'; CC.constantsCampaignSlots"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isPremiumAccount';	['resourceEntity.accountResource.evActivePremiumTypeChanged'];	resourceEntity.accountResource.activePremiumType != SC.Common.PREMIUM_TYPE.NONE"/>
		<bind name="watchDH" value="'stars';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="watchDH" value="'goal';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.goal"/>
		<bind name="watchDH" value="'rewards';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'max';[]; campaignTaskEntity.progress.max"/>
		<bind name="watchDH" value="'common'; []; slotsEntity.constantsCampaignSlots.common"/>
		<bind name="watchDH" value="'premium'; []; slotsEntity.constantsCampaignSlots.premium"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watch" value="'canOpenFinalTask'; 	isMainTask &amp;&amp; (stars &gt;= costUnlock) &amp;&amp; (state == 0)"/>
		<bind name="watch" value="'availableSlots'; 		isPremiumAccount ? (common + premium) : common"/>
		<bind name="watch" value="'haveFreeSlot'; 		choosenTasks.length &lt; availableSlots"/>
		<bind name="watch" value="'isTaskInProgress'; 	taskProgress &gt; 0 &amp;&amp; taskProgress &lt; max"/>
		<bind name="watchDH" value="'missionStartTime'; []; mission.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<style>
			<width value="350px"/>
		</style>
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<block className="InfotipBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="InfotipPanelBg">
				<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
				<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
				<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
				<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<style>
					<margin value="-2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<background9Slice value="[3]"/>
					</style>
					<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<margin value="-2px"/>
				</style>
				<block className="InfotipPins">
					<styleClass value="$FullsizeAbsolute"/>
					<params>
						<param name="name" value="pinContainer"/>
					</params>
					<block>
						<params>
							<param name="name" value="pinTop"/>
						</params>
						<style>
							<position value="absolute"/>
							<top value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinBottom"/>
						</params>
						<style>
							<position value="absolute"/>
							<bottom value="-22px"/>
						</style>
						<bind name="scaleY" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinLeft"/>
						</params>
						<style>
							<position value="absolute"/>
							<left value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinRight"/>
						</params>
						<style>
							<position value="absolute"/>
							<right value="-10px"/>
						</style>
						<bind name="scaleX" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TaskItemHeader'; {_taskID: _taskID}"/>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block className="TaskItemStatus">
			<bind name="visible" value="state != 5"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<block>
					<bind name="visible" value="(state == 5 || isLooted)"/>
					<style>
						<backgroundImage value="bitmap:checkbox_check"/>
						<width value="22px"/>
						<height value="17px"/>
						<top value="4px"/>
						<marginRight value="3px"/>
					</style>
				</block>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="text" value="state == 2 &amp;&amp; isLooted ? 'IDS_TASK_IN_PROGRESS_REPEAT' :
						state == 2 			? 'IDS_TASK_IN_PROGRESS' :
						state == 3					? 'IDS_TASK_COMPLETED' :
						isLooted										? 'IDS_TASK_REPLAYABLE' :
						state == 0				? 'IDS_TASK_LOCKED'
																		: 'IDS_TASK_NOT_DONE'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<bind name="instance" value="'GoalsItem'; { _entityId: goal}"/>
			</block>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-2px"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<bind name="instance" value="'TaskContainerRestriction'; {_taskID: _taskID}"/>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$HugeMargins"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: rewards,
													_tooltipHeader: 'IDS_REWARDS_CAMPAIGN_TASK',
													_isReceived: isLooted}"/>
			<block>
				<style>
					<width value="40px"/>
					<height value="38px"/>
					<marginRight value="18px"/>
					<marginBottom value="2px"/>
					<backgroundImage value="url:../campaigns/campaign_icons/giftbox_small.png"/>
				</style>
				<bind name="style" value="'alpha'; (isLooted ? 0.7 : 1)"/>
				<block>
					<bind name="visible" value="isLooted"/>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'IssuedStampSmall'; isLooted ? {_angleRotation: -2, _text: tr('IDS_ISSUED_STAMP')} : null"/>
				</block>
			</block>
			<block type="text">
				<style>
					<maxWidth value="240"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="!isLooted ? 'IDS_ADDITIONAL_REWARD_BEFORE' : 'IDS_ADDITIONAL_REWARD_AFTER'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="	state == 2 || state == 3 || canOpenFinalTask ||
						(state == 1 &amp;&amp; haveFreeSlot &amp;&amp; missionTimeToStart &lt;= 0)"/>
			<bind name="watch" value="'btnLabel';	state == 1				? 'IDS_TASK_ACTIVATE' :
									state == 2				? 'IDS_TASK_CANCEL'  :
									(state == 3 &amp;&amp; !isLooted)	? 'IDS_TAKE_REWARD' :
									(state == 3 &amp;&amp; isLooted)	? 'IDS_TAKE_STARS'  :
									canOpenFinalTask								? 'IDS_OPEN_FINAL_TASK'
																					: null"/>
			<bind name="watch" value="'btnAction';	isTaskInProgress					? null :
									state == 1	? 'CampaignsProxy.activateTask' :
									state == 2	? 'CampaignsProxy.deactivateTask' :
									state == 3		? 'CampaignsProxy.takeReward' :
									canOpenFinalTask					? 'CampaignsProxy.unlockTask'
																		: null"/>
			<bind name="watch" value="'btnRequest';	isTaskInProgress 	? 'CampaignsProxy.deactivateTask'
														: null"/>
			<styleClass value="$HugeMargins"/>
			<style>
				<align value="center"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '210px',
											_label: btnLabel,
											_focusIndex: 1,
											_name: 'ActivateButtonTask',
											_defaultFocused: true,
											_request: btnRequest,
											_requestParams: {taskID: campaignTaskEntity.campaignTaskParams.id},
											_action: btnAction,
											_actionParams: {taskID: campaignTaskEntity.campaignTaskParams.id},
											_dispatch: 'Tooltip.Close',
											_isTransactionBtn: true,
											_enabled: btnAction || btnRequest}"/>
		</block>
		<block>
			<bind name="visible" value="	state == 5 || state == 0 || (state == 1 &amp;&amp; !haveFreeSlot)
						|| (state == 1 &amp;&amp; missionTimeToStart &gt; 0)"/>
			<styleClass value="$HugeMargins"/>
			<block type="text">
				<style>
					<maxWidth value="320"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorOrange'"/>
				<bind name="timeFormat" value="missionTimeToStart; 'HIGHEST'; 'formatStartTime'; true"/>
				<bind name="text" value="state == 5															? 'IDS_IMPOSSIBLE_TO_CHOOSE_TASK' :
						state == 1 &amp;&amp; !haveFreeSlot	 										? 'IDS_TOOLTIP_NEED_FREE_SLOT' :
						state == 0 &amp;&amp; isMainTask &amp;&amp; missionState != 0	? 'IDS_TOOLTIP_FINAL_TASK_LOCKED' :
						state == 0															? campaignNeedToken 	? 'IDS_TOOLTIP_CAMPAIGN_NEED_TOKEN'
																																			: (missionTimeToStart &gt; 0)	? subst('IDS_LOCKED_MISSION_TIME_LEFT_TASK_TOOLTIP', [], {timeLeft: formatStartTime})
																																										: 'IDS_TOOLTIP_TASK_LOCKED'
																													: ''"/>
			</block>
		</block>
	</block>
	<block className="TaskItemStatus">
		<bind name="visible" value="state != 5"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$HugeMargins"/>
			<block>
				<bind name="visible" value="(state == 5 || isLooted)"/>
				<style>
					<backgroundImage value="bitmap:checkbox_check"/>
					<width value="22px"/>
					<height value="17px"/>
					<top value="4px"/>
					<marginRight value="3px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="text" value="state == 2 &amp;&amp; isLooted ? 'IDS_TASK_IN_PROGRESS_REPEAT' :
						state == 2 			? 'IDS_TASK_IN_PROGRESS' :
						state == 3					? 'IDS_TASK_COMPLETED' :
						isLooted										? 'IDS_TASK_REPLAYABLE' :
						state == 0				? 'IDS_TASK_LOCKED'
																		: 'IDS_TASK_NOT_DONE'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
	</block>
	<block className="TaskItemHeader">
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'max';[]; campaignTaskEntity.progress.max"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'taskNumber';[]; campaignTaskEntity.campaignTaskParams.taskNumber"/>
		<bind name="watchDH" value="'uiNumber';[]; mission.campaignMissionParams.uiNumber"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'lootStars';[]; campaignTaskEntity.campaignTaskParams.lootStars"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'bgIconID';[]; campaignTaskEntity.campaignTaskParams.bgIconID"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<style>
			<width value="100%"/>
			<height value="120px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../campaigns/bg_task_item/' + 'task_bg_campaign_' + (bgIconID ? bgIconID : taskNumber) + '.jpg'"/>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<style>
					<alpha value="2.5"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="state == 5"/>
			<style>
				<backgroundImage value="bitmap:quest_done_icon"/>
				<top value="10px"/>
				<right value="32px"/>
				<position value="absolute"/>
				<hitTest value="false"/>
			</style>
		</block>
		<block>
			<block>
				<style>
					<backgroundSize value="fill"/>
					<width value="120px"/>
					<height value="120px"/>
				</style>
				<bind name="tooltip" value="'SimpleStatusTooltip';  {_text: 'IDS_MISSION_NUMBER'}"/>
				<bind name="style" value="'backgroundImage'; missionState == 5 	? 'url:../campaigns/missions_pin/' + campaignName + '_done_pin.png'
																						: 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
				<block>
					<bind name="visible" value="state != 0 &amp;&amp; missionState != 5"/>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<alpha value="0.75"/>
						</style>
						<styleClass value="$TextDefaultBold30NM"/>
						<bind name="text" value="uiNumber"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="state == 0"/>
					<styleClass value="$FullsizeAbsolute"/>
					<block>
						<style>
							<width value="48px"/>
							<height value="48px"/>
							<marginTop value="36px"/>
							<marginLeft value="36px"/>
						</style>
						<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_campaign_lock.png'"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<style>
						<marginTop value="3px"/>
						<maxWidth value="200"/>
					</style>
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="isMainTask 	? (toUpperCase(tr('IDS_FINAL_TASK')))
										: (toUpperCase(tr('IDS_CAMPAIGN_TASK'))) + ' ' + taskNumber"/>
				</block>
				<block className="indicator_progress_bar" type="native">
					<bind name="visible" value="((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max) )"/>
					<style>
						<width value="200px"/>
					</style>
					<bind name="value" value="(taskProgress/max) * 10"/>
				</block>
				<block>
					<bind name="visible" value="((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max) )"/>
					<style>
						<width value="100%"/>
						<marginTop value="-3px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeader"/>
						<bind name="class" value="'$FontColorBlueish'"/>
						<bind name="text" value="taskProgress + '/' + max"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="(missionState == 0 || missionState == 2) &amp;&amp; !isMainTask"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_STARS_FOR_BATTLE'}"/>
					<style>
						<marginTop value="3px"/>
						<marginLeft value="-1px"/>
					</style>
					<block>
						<bind name="repeat" value="lootStars; 'StarsEarnedEnable'"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<style>
							<position value="absolute"/>
						</style>
						<bind name="repeat" value="costUnlock; 'StarsEarnedDisabled'"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="WindowTaskHeaderInstruction">
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; _curMissionId"/>
		<bind name="primaryEntityDH" value="'missionMainTaskEntity'; CC.campaignTaskParams; mission.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'mainTaskState';['missionMainTaskEntity.campaignTaskPlayer.evUpdate']; missionMainTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'costUnlock';[]; missionMainTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'mainTask';[]; mission.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'missionStartTime';[]; mission.campaignMissionParams.startTime"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="primaryEntityDH" value="'campaignFinalNewTip'; CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_FINAL"/>
		<bind name="primaryEntityDH" value="'campaignFinalRepeatNewTip'; CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_FINAL_REPEAT"/>
		<bind name="watchDH" value="'campaignFinalNewTipActive'; ['campaignFinalNewTip.newGuidingTip.evChanged']; campaignFinalNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'campaignFinalRepeatNewTipActive'; ['campaignFinalRepeatNewTip.newGuidingTip.evChanged']; campaignFinalRepeatNewTip.newGuidingTip.isActive"/>
		<bind name="watch" value="'newTipID'; 	campaignFinalNewTipActive		? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_FINAL :
								campaignFinalRepeatNewTipActive	? SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_FINAL_REPEAT
																: SC.Context_guiding_tip.TIP_TYPE.NONE"/>
		<bind name="watch" value="'isNewTipVisible'; newTipID != SC.Context_guiding_tip.TIP_TYPE.NONE"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="instance" value="'TaskItem'; {_isShipSuitable: true, _isBattleSuitable: true, _isUseless: false, _taskID: mainTask}"/>
			<bind name="instance" value="'NewGuidingTipHub'; isNewTipVisible ? {	_newTipId: newTipID,
																_tipPositioning: 'bottom',
																_offset: 5,
																_noPinAnimation: true,
																_hasFinishButton: true,
																_onShowDelay: 0.4}
															: null"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="1.5sw"/>
			</style>
			<block>
				<bind name="instance" value="'WindowHeaderCostUnlock'; {_curMissionId: _curMissionId, _isInHeader: true}"/>
			</block>
			<block>
				<style>
					<marginTop value="3px"/>
				</style>
				<block type="text">
					<bind name="visible" value="missionState != 2"/>
					<style>
						<maxWidth value="500"/>
						<leading value="-2"/>
					</style>
					<styleClass value="$TextHeaderWhite"/>
					<bind name="class" value="campaignNeedToken || missionTimeToStart &gt; 0 ? '$FontColorOrange' : '$FontColorDefault'"/>
					<bind name="timeFormat" value="missionTimeToStart; 'HIGHEST'; 'formatStartTime'; true"/>
					<bind name="text" value="missionState == 0						? campaignNeedToken 			? 'IDS_TOOLTIP_CAMPAIGN_NEED_TOKEN'
																						  								: missionTimeToStart &gt; 0	? subst('IDS_LOCKED_MISSION_TIME_LEFT_TOOLTIP', [], {_timeLeft: formatStartTime})
																																					: 'IDS_MISSION_STATE_LOCKED' :
							(	missionState == 4 &amp;&amp;
								mainTaskState == 5) 			? 'IDS_MISSION_STATE_OPENED_BOSS' :
								missionState == 4			? 'IDS_MISSION_STATE_FINAL_TASK_OPENED_NOT_COMPLETED' 
																						: 'IDS_MISSION_STATE_COMPLETED'"/>
				</block>
				<block type="text">
					<bind name="visible" value="(missionState == 2)"/>
					<styleClass value="$TextHeaderWhite"/>
					<style>
						<maxWidth value="500"/>
						<leading value="-2"/>
						<alpha value="0.9"/>
						<styleSheet value="h3
						{
							color: #f5c96f;
						}"/>
					</style>
					<bind name="text" value="subst('IDS_CHOOSE_TASK_DESCR', [], {count: costUnlock}, costUnlock)"/>
				</block>
			</block>
		</block>
	</block>
	<block className="WindowHeaderCostUnlock">
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; _curMissionId"/>
		<bind name="primaryEntityDH" value="'missionMainTaskEntity'; CC.campaignTaskParams; campaignMissionEntity.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'stars';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'costUnlock'; []; missionMainTaskEntity.campaignTaskParams.costUnlock"/>
		<block>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_STARS_FOR_BATTLE_EMPTY'}"/>
			<bind name="repeat" value="costUnlock; 'StarsEarnedDisabled'; {_isInHeader: _isInHeader}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_STARS_FOR_BATTLE_EARNED'}"/>
			<bind name="repeat" value="stars; 'StarsEarnedEnable'; {_isInHeader: _isInHeader}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="StarsEarnedEnable">
		<style>
			<width value="23px"/>
			<height value="23px"/>
		</style>
		<bind name="style" value="'marginRight'; _isInHeader ? '9px' : '2px'"/>
		<bind name="style" value="'marginBottom'; _isInTooltip ? '6px' : '0px'"/>
		<block className="icon_rank_star_nano" type="native">
			<bind name="gotoAndStop!" value="'earned'"/>
		</block>
	</block>
	<block className="StarsEarnedDisabled">
		<style>
			<width value="23px"/>
			<height value="23px"/>
		</style>
		<bind name="style" value="'marginRight'; _isInHeader ? '9px' : '2px'"/>
		<bind name="style" value="'marginBottom'; _isInTooltip ? '6px' : '0px'"/>
		<block className="icon_rank_star_nano" type="native">
			<bind name="gotoAndStop!" value="'not_earned'"/>
		</block>
	</block>
	<block className="GoalsItem">
		<bind name="entityDH" value="'campaignGoalEntity'; _entityId"/>
		<bind name="watchDH" value="'l10nText';[]; campaignGoalEntity.campaignTaskGoal.l10nText"/>
		<bind name="watchDH" value="'l10nRestriction';[]; campaignGoalEntity.campaignTaskGoal.l10nRestriction"/>
		<block type="text">
			<bind name="style" value="'maxWidth'; _isInMissionTooltip ? '245' : '320'"/>
			<styleClass value="$TextHeader"/>
			<bind name="text" value="l10nText"/>
		</block>
		<block type="text">
			<bind name="visible" value="_isInMissionTooltip"/>
			<bind name="style" value="'maxWidth'; _isInMissionTooltip ? '245' : '320'"/>
			<bind name="style" value="'marginTop'; '4px'"/>
			<styleClass value="$TextHeader"/>
			<bind name="text" value="l10nRestriction"/>
		</block>
	</block>

	<!-- campaings_task_restrictions -->
	<block className="TaskContainerRestriction">
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="watchDH" value="'teamBuildTypes';	[]; campaignTaskEntity.campaignTaskRestrictions.battleTypes"/>
		<bind name="watchDH" value="'battleTypes';		['campaignTaskEntity.battleTypesView.evBattleTypesViewChanged']; campaignTaskEntity.battleTypesView.viewList"/>
		<bind name="watchDH" value="'hasReducedBattleTypes';		['campaignTaskEntity.battleTypesView.evBattleTypesViewChanged']; campaignTaskEntity.battleTypesView.hasReducedBattleTypes"/>
		<bind name="watchDH" value="'shipLevels';		[]; campaignTaskEntity.campaignTaskRestrictions.shipLevels"/>
		<bind name="watchDH" value="'shipClasses';		[]; campaignTaskEntity.campaignTaskRestrictions.shipClasses"/>
		<bind name="watchDH" value="'shipNations';		[]; campaignTaskEntity.campaignTaskRestrictions.shipNations"/>
		<bind name="watchDH" value="'goalEntityId';		['']; campaignTaskEntity.campaignTaskParams.goal"/>
		<bind name="watchDH" value="'pveModifier';		['']; campaignTaskEntity.campaignTaskRestrictions.pveModifier"/>
		<bind name="watch" value="'isPVEModifierApplied'; pveModifier != 1.0 &amp;&amp; hasReducedBattleTypes"/>
		<bind name="watch" value="'isPVEModifierTextVisible'; _isInPostbattle	? isPVEModifierApplied &amp;&amp; isIn(_battleTypePlayed, SC.Common.BATTLE_TYPES.PVE_MODIFIER_AVAILABLE)
																: isPVEModifierApplied"/>
		<bind name="entityDH" value="'campaignGoalEntity'; goalEntityId"/>
		<bind name="watchDH" value="'l10nRestriction';[]; campaignGoalEntity.campaignTaskGoal.l10nRestriction"/>
		<styleClass value="$HugeMargins"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$TextHeader"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="text" value="l10nRestriction"/>
		</block>
		<block>
			<style>
				<flow value="htile"/>
				<width value="100%"/>
			</style>
			<block>
				<bind name="visible" value="battleTypes.length != 0"/>
				<styleClass value="$InfoLineBoundaries"/>
				<bind name="repeat" value="battleTypes; 'SSETaskBattleTypeRestrictionIcon'; {_isPVEModifierApplied: isPVEModifierApplied}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="shipNations.length != 0"/>
				<styleClass value="$InfoLineBoundaries"/>
				<block>
					<style>
						<height value="25px"/>
						<marginLeft value="3px"/>
						<marginRight value="9px"/>
					</style>
					<block className="VerticalDivider">
						<style>
							<height value="100%"/>
							<width value="3px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="repeat" value="shipNations; 'TaskShipNationRestriction'; {}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="shipClasses.length != 0"/>
				<bind name="tooltip" value="'ShipListTooltipCampaigns'; {_taskID: _taskID}"/>
				<styleClass value="$InfoLineBoundaries"/>
				<block>
					<style>
						<height value="25px"/>
						<marginLeft value="3px"/>
						<marginRight value="3px"/>
					</style>
					<block className="VerticalDivider">
						<style>
							<height value="100%"/>
							<width value="3px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
						</style>
					</block>
				</block>
				<block>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="6px"/>
					</style>
					<bind name="repeat" value="shipClasses; 'TaskShipClassRestriction';	{_shipIsPremium: campaignTaskEntity.campaignTaskRestrictions.shipIsPremium,																												
																		_shipIsElite: campaignTaskEntity.campaignTaskRestrictions.shipIsElite}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="shipLevels.length != 0"/>
				<bind name="tooltip" value="'ShipListTooltipCampaigns'; {_taskID: _taskID}"/>
				<styleClass value="$InfoLineBoundaries"/>
				<block>
					<style>
						<height value="25px"/>
						<marginLeft value="3px"/>
						<marginRight value="3px"/>
					</style>
					<block className="VerticalDivider">
						<style>
							<height value="100%"/>
							<width value="3px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
						</style>
					</block>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<marginLeft value="6px"/>
						<marginRight value="6px"/>
						<marginTop value="1px"/>
					</style>
					<bind name="text" value="toRomanShipLevels(shipLevels)"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isPVEModifierTextVisible"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
														_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}"/>
		</block>
	</block>
	<block className="TaskBattleTypeRestriction">
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: tr('IDS_' + toUpperCase($value.battleType))}"/>
		<style>
			<marginRight value="6px"/>
			<marginTop value="1px"/>
			<width value="23px"/>
			<height value="23px"/>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/battle_types/' + $value.battleType + '_tiny.png'"/>
	</block>
	<block className="SSETaskBattleTypeRestrictionIcon">
		<bind name="watch" value="'iconName'; customIconName ? customIconName : battleName"/>
		<bind name="watch" value="'isPVEModifierVisible'; hasPVEModifier &amp;&amp; _isPVEModifierApplied"/>
		<bind name="tooltip" value="'SSETaskBattleTypeRestrictionTooltip'; isPVEModifierVisible ? { _headerText: tr('IDS_' + toUpperCase(battleName)) } : null"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; isPVEModifierVisible ? null : { _text: tr('IDS_' + toUpperCase(battleName)) }"/>
		<style>
			<marginRight value="6px"/>
			<marginTop value="1px"/>
			<width value="23px"/>
			<height value="23px"/>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/battle_types/' + iconName + '_tiny.png'"/>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="2px"/>
				<right value="2px"/>
			</style>
			<bind name="instance" value="'PVEModifier'; isPVEModifierVisible ? {} : null"/>
		</block>
	</block>
	<block className="TaskShipClassRestriction">
		<style>
			<width value="24px"/>
			<height value="24px"/>
		</style>
		<bind name="instance" value="'ShipIcon'; {_shipType: $value, _isFarming: _shipIsPremium, _isElite: _shipIsElite}"/>
	</block>
	<block className="TaskShipNationRestriction">
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_SHIP_NATION_RESTRICTION'}"/>
		<style>
			<marginRight value="3px"/>
			<marginTop value="-1px"/>
		</style>
		<bind name="instance" value="'NationFlagsTiny'; { _shipCountry: $value }"/>
	</block>
	<block className="ShipListTooltipCampaigns">
		<bind name="collectionDH" value="CC.ownShip; 'shipList'; 'campaigns_task_current'"/>
		<bind name="action" value="'Tooltip.selfOpened'; 'updateTaskShipList'; {taskId: _taskID}"/>
		<bind name="instance" value="'ShipListTooltip'; {_shipList: shipList}"/>
	</block>
	<block className="ShipListTooltip">
		<bind name="watch" value="'countShipList'; _shipList.length - 10"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="250px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_shipList.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$TextHeaderBigDefaultTech"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<default_text value="IDS_AVAILABLE_SHIP"/>
			</block>
			<block>
				<bind name="repeat" value="(_shipList.length &gt; 10 ? 10 : _shipList.length); 'ShipItem'; {_shipList: _shipList}"/>
			</block>
			<block type="text">
				<bind name="visible" value="(_shipList.length) &gt; 10"/>
				<style>
					<marginTop value="-2px"/>
				</style>
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$TextHeaderBigDefaultTech"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="subst('IDS_AND_OTHER_SHIPS', [], {count: countShipList}, countShipList)"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_shipList.length &lt;= 0"/>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorOrange'"/>
				<style>
					<maxWidth value="240"/>
					<leading value="-3"/>
				</style>
				<default_text value="IDS_NO_SUITABLE_SHIPS"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipItem">
		<styleClass value="$InfoBlockIndent"/>
		<bind name="instance" value="'ShipLineItemNM'; {_shipId: _shipList[$index].ship.id}"/>
	</block>
	<block className="PVEModifier">
		<style>
			<width value="12px"/>
			<height value="12px"/>
			<backgroundImage value="url:../service_kit/unified_status_icons/icon_pve_modifier.png"/>
		</style>
	</block>
	<block className="SSETaskBattleTypeRestrictionTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="320px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: _headerText}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
														_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}"/>
			</block>
		</block>
	</block>

	<!-- campaings_tasks_basket -->
	<block className="CampaingsTasksBasket">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isPremiumAccount';	['resourceEntity.accountResource.evActivePremiumTypeChanged'];	resourceEntity.accountResource.activePremiumType != SC.Common.PREMIUM_TYPE.NONE"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="firstEntityDH" value="'slotsEntity'; CC.constantsCampaignSlots"/>
		<bind name="watchDH" value="'common'; []; slotsEntity.constantsCampaignSlots.common"/>
		<bind name="watchDH" value="'premium'; []; slotsEntity.constantsCampaignSlots.premium"/>
		<bind name="watch" value="'totalSlots'; common + premium"/>
		<bind name="watch" value="'commonEmptySlotPrem'; !(isPremiumAccount) &amp;&amp; (choosenTasks.length &lt; totalSlots) ? premium : 0"/>
		<bind name="watch" value="'commonEmptySlots'; (choosenTasks.length == totalSlots) 	? 0
																			: isPremiumAccount	? (common) - (choosenTasks.length) + premium
																								: (common) - (choosenTasks.length)
																			"/>
		<bind name="watch" value="'totalAvailableTaskCount'; isPremiumAccount	? totalSlots
																: !(isPremiumAccount) &amp;&amp; (choosenTasks.length == totalSlots) 	? totalSlots 
																																: common
																"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="0.8sw"/>
			</style>
			<block type="text">
				<style>
					<marginRight value="8px"/>
					<marginBottom value="6px"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="text" value="toUpperCase(tr('IDS_PASSING_TASKS'))"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold17NM',
														_curValue: choosenTasks.length,
														_maxValue: totalAvailableTaskCount,
														_doNotAlphaOnZeroCurValue: true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="repeat" value="choosenTasks; 'CampaingsTasksSlotActive'; {}"/>
		</block>
		<block>
			<bind name="repeat" value="commonEmptySlots; 'CampaingsTasksSlotEmpty'; {}"/>
		</block>
		<block>
			<bind name="repeat" value="commonEmptySlotPrem; 'CampaingsTasksSlotEmpty'; {_isPremSlot: true, _totalSlots: totalSlots}"/>
		</block>
	</block>
	<block className="CampaingsTasksSlotActive">
		<bind name="name" value="'CampaingsTasksSlot_'+ uiNumber + '_' + number"/>
		<bind name="dataRefDH" value="'campaignTaskEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'missionID'; []; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; missionID"/>
		<bind name="watchDH" value="'uiNumber';[]; campaignMissionEntity.campaignMissionParams.uiNumber"/>
		<bind name="watchDH" value="'number';[]; campaignTaskEntity.campaignTaskParams.taskNumber"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evUpdate']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'isShipSuitable';['campaignTaskEntity.campaignTaskRestrictions.evUpdate']; campaignTaskEntity.campaignTaskRestrictions.isShipSuitable"/>
		<bind name="watchDH" value="'startTime';['campaignTaskEntity.campaignTaskRestrictions.evUpdate']; campaignTaskEntity.campaignTaskRestrictions.startTime"/>
		<bind name="watchDH" value="'isBattleSuitable';['campaignTaskEntity.campaignTaskRestrictions.evUpdate']; campaignTaskEntity.campaignTaskRestrictions.isBattleSuitable"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'isUseless';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isUseless"/>
		<style>
			<width value="230px"/>
			<height value="80px"/>
			<marginBottom value="1sw"/>
		</style>
		<bind name="appear" value="'addedToStage'; 0.15; 0.3; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TaskItem'; {	_taskID: campaignTaskEntity.campaignTaskParams.id, 
										_curMissionId: campaignTaskEntity.campaignTaskParams.missionID, 
										_curCampaignId: campaignTaskEntity.campaignTaskParams.campaignID,
										_isShipSuitable: isShipSuitable, _isBattleSuitable: isBattleSuitable, 
										_isUseless: isUseless,
										_startTime: startTime,
										_inTaskPicker: true }"/>
		</block>
		<block>
			<style>
				<top value="8px"/>
				<right value="8px"/>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'CloseButton'; state != 3	? { _request: (taskProgress &gt; 0 &amp;&amp; !isUseless)	? 'CampaignsProxy.deactivateTask'
																														: null,
																			_requestParams: {taskID: campaignTaskEntity.campaignTaskParams.id},
																			_action: (taskProgress &gt; 0 &amp;&amp; !isUseless)	? null
																														: 'CampaignsProxy.deactivateTask',
																			_actionParams: {taskID: campaignTaskEntity.campaignTaskParams.id},
																			_tooltipText: 'IDS_TASK_CANCEL_WITH_PROGRESS' }
																		: null"/>
		</block>
	</block>
	<block className="CampaingsTasksSlotEmpty">
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<style>
			<width value="230px"/>
			<height value="80px"/>
			<marginBottom value="1sw"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: !_isPremSlot 	? 'IDS_TASK_EXPLAIN_TOOLTIP' 
																: subst('IDS_TASK_EXPLAIN_TOOLTIP_PREM', [], {count: _totalSlots}, _totalSlots)}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.15; 0; {alpha: 0}; {alpha: 0.4}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 0.4}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="!_isPremSlot"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="style" value="'backgroundImage'; 'url:../campaigns/task_item_icons/' + 'empty_slot_thin' + '.png'"/>
			</block>
			<block>
				<bind name="visible" value="_isPremSlot"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="hint_panel_prem" type="native">
					<style>
						<alpha value="1.5"/>
					</style>
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block type="text">
			<style>
				<maxWidth value="200"/>
				<textAlign value="center"/>
				<leading value="-3"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextHeaderBigWhite"/>
			<bind name="class" value="_isPremSlot ? '$FontColorGolden' : '$None'"/>
			<bind name="text" value=" _isPremSlot ? 'IDS_ONLY_FOR_PREM' : 'IDS_EMPTY_SLOT_FOR_TASK'"/>
		</block>
	</block>

	<!-- carousel_filters -->
	<block className="ShipLevelRome">
		<style>
			<marginLeft value="2px"/>
			<marginRight value="2px"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="toRomanShipLevels(_levelRange)"/>
		</block>
	</block>
	<block className="PeculiarityFiltersContent">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="text" value="'IDS_ADDITIONAL_CONTENT'"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<bind name="watch" value="'categoryArray'; [{category: 'event'}, {category: 'historical'}, {category: 'author'}]"/>
		<bind name="repeat" value="categoryArray; 'PeculiarityFiltersCategory'; {}"/>
	</block>
	<block className="PeculiarityFiltersCategory">
		<bind name="tooltip" value="'PeculiarityFiltersCategorySubMenu'; {_category: category}; TooltipBehaviour.contextSubmenuNoClickHide"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$ContextMenuListItem"/>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="'IDS_SHIP_FILTER_' + toUpperCase(category)"/>
				</block>
			</block>
			<block className="button_expand_h" type="native">
				<style>
					<position value="absolute"/>
					<right value="12px"/>
					<hitTest value="false"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
			</block>
		</block>
	</block>
	<block className="PeculiarityFiltersCategorySubMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$LeftSubMenuBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<bind name="collectionDH" value="CC.peculiarityEye; 'peculiaritiesEyeCategoryTypes'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'peculiaritiesEyeCategoryTypes'+'ROOT'; 'peculiaritiesEyeCategoryTypes'; {'filter': $entity.peculiarityEye.category == _category}; []"/>
		<bind name="repeat" value="peculiaritiesEyeCategoryTypes; 'PeculiarityFilterItem'; {}"/>
	</block>
	<block className="PeculiarityFilterItem">
		<bind name="entityDH" value="'peculiarityEyeEntity'; id"/>
		<bind name="watchDH" value="'ids'; []; peculiarityEyeEntity.peculiarityEye.ids"/>
		<bind name="watchDH" value="'value'; []; peculiarityEyeEntity.peculiarityEye.value"/>
		<bind name="watchDH" value="'isEnabled'; ['peculiarityEyeEntity.peculiarityEye.evEnabledChanged']; peculiarityEyeEntity.peculiarityEye.enabled"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked'; ['resourceEntity.accountResource.evOperationsLockChanged']; resourceEntity.accountResource.operationsLocked"/>
		<bind name="clickSplit"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: isEnabled ? tr(ids + '_TAKE_OFF_SKIN_TOOLTIP') : tr(ids + '_SET_SKIN_TOOLTIP')}"/>
		<bind name="action" value="'left_click'; 'ServerUIDataUSS.setPecularity'; { pecId: value }"/>
		<bind name="name" value="'CarouselCheckBoxEye_pecularity_' + ids"/>
		<block className="dock_submenu_item" type="native">
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<style>
						<maxWidth value="250"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="ids"/>
				</block>
			</block>
			<block className="icon_eye_visible" type="native">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<right value="12px"/>
					<hitTest value="false"/>
				</style>
				<bind name="enabled" value="!operationsAccountLocked"/>
				<bind name="selected" value="isEnabled"/>
			</block>
		</block>
	</block>

	<!-- chat -->
	<block className="ClanSquadSwitchMenuItem">
		<style>
			<width value="100%"/>
			<height value="100%f"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="dataRefDH" value="'clanSquadEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'squadId'; []; clanSquadEntity.clanSquadLadderInfo.squadId"/>
		<bind name="watch" value="'selected'; _currentSquad == squadId"/>
		<bind name="action" value="'click'; 'AccountClanComponent.setClanSquad'; !(selected) ? {newSquadId: squadId} : null"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="selected"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
				<width value="100%"/>
				<height value="100%f"/>
			</style>
			<bind name="instance" value="'ClanSquadRatingInfo'; { _clanSquadEntityId: clanSquadEntity.id, _currentSquad: _currentSquad, _leadingSquadId: _leadingSquadId, _selected: selected }"/>
		</block>
	</block>
	<block className="SwitchClanSquadContextMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$RightSubMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; false ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(false) ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="collectionRepeatDH" value="CC.clanSquadLadderInfo; 'ClanSquadSwitchMenuItem'; ''; {_currentSquad: _currentSquad, _leadingSquadId: _leadingSquadId}"/>
		</block>
	</block>
	<block className="ChatDropDownMenu">
		<bind name="primaryEntityDH" value="'routeEntityisInBalancer'; CC.route; SC.Ui_windows.ROUTE.BALANCER"/>
		<bind name="watchDH" value="'isInBalancer'; ['routeEntityisInBalancer.route.evIsActiveChanged']; routeEntityisInBalancer.route.isActive"/>
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'isFavorite'; ['channel.evIsFavoriteChanged']; channel.isFavorite"/>
		<bind name="watchDH" value="'channelOpened'; ['channel.evOpenChanged']; channel.opened"/>
		<bind name="dataRefDH" value="'entityAccount'; 'channelEntity.channel.user.ref'"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watch" value="'isInDivision'; entityAccount.hasComponent(CC.preBattlePlayerSimple)"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'groupIds'; ['channelEntity.elementInGroups.evGroupsChanged']; channelEntity.elementInGroups.groupIds"/>
		<bind name="watch" value="'isMyChannel'; isIn(ChannelGroup.MYCHANNELS, groupIds)"/>
		<bind name="firstEntityDH" value="'chatRestrictionsEntity'; CC.chatRestrictions"/>
		<bind name="watchDH" value="'isXmppChatBlocked';		['chatRestrictionsEntity.chatRestrictions.evBlockDockAndClanChatChanged'];
												chatRestrictionsEntity.chatRestrictions.isBlockDockAndClanChat"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged'];	clanTeamEntity.clanTeam.squadId"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; _dropDown ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(_dropDown) ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="_dropDown &amp;&amp; isMyChannel &amp;&amp; currentRegion != 'CN' &amp;&amp; !isXmppChatBlocked"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_CHANNEL_RENAME'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="dispatch" value="'click'; 'chatChannelRenameStart'"/>
		</block>
		<block>
			<bind name="visible" value="(channel.typeIdent != 'common') &amp;&amp; !(_isDivision) &amp;&amp; !(isMyChannel)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="!isFavorite ? 'IDS_ADD_TO_FAVORITES' : 'IDS_REMOVE_FROM_FAVORITES'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'setChannelFavorite'; {channelId: channel.channelId, favorite: !(isFavorite)}"/>
		</block>
		<block>
			<bind name="visible" value="channelOpened &amp;&amp; !(_isDivision) "/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_CHANNEL_CLOSE'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'leaveChannel'; {channelId: channel.channelId}"/>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="menuDismissDivision"/>
			</params>
			<bind name="visible" value="_isDivision &amp;&amp; isSelfPlayerCommander"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItemWithRequest">
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_DISMISS_DIVISION'"/>
				</block>
				<bind name="request" value="'click'; 'dismissDivision'; {subtitle : 'IDS_DISMISS_DIVISION_QUESTION'}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_isDivision"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItemWithRequest">
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_LEAVE_DIVISION'"/>
				</block>
				<bind name="request" value="'click'; 'leaveDivision'; {subtitle : 'IDS_LEAVE_DIVISION_QUESTION'}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="hasClanSquadModifier &amp;&amp; _isClanDivision &amp;&amp; isSelfPlayerCommander &amp;&amp;
					(role == 'commander' || role == 'executive_officer' || role == 'recruitment_officer') &amp;&amp;
					!isInBalancer"/>
			<styleClass value="$ContextMenuListItem"/>
			<bind name="tooltip" value="'SwitchClanSquadContextMenu'; { _currentSquad: squadId, _leadingSquadId: leadingSquadId }; TooltipBehaviour.chainMenuBehavior; 'switchClanSquadContextMenu'"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$Fullsize"/>
				<bind name="selected" value="switchClanSquadContextMenu"/>
				<block>
					<style>
						<width value="100%"/>
						<height value="100%"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$ContextMenuListItemContent"/>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<bind name="text" value="'IDS_SWITCH_CLAN_SQUAD'"/>
					</block>
					<block className="button_expand_h" type="native">
						<style>
							<position value="absolute"/>
							<right value="3px"/>
						</style>
						<styleClass value="$MouseDisable"/>
						<styleClass value="$MiddleVAligned"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'playersInDivision'"/>
		<bind name="collectionDH" value="CC.playerInvitedToPrebattleInfo; 'invitedPlayers'"/>
		<bind name="watch" value="'freePlaces'; (shipRestrictions.maxPlayers - playersInDivision.length - invitedPlayers.length)"/>
		<block>
			<bind name="visible" value="(channel.typeIdent == 'private') &amp;&amp;
						accountOnline &amp;&amp;
						(!isInDivision || (freePlaces &gt; 0)) &amp;&amp;
						!isInBalancer &amp;&amp;
						!isSelfInParty"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'alpha'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision)) ? 1 : 0.5 "/>
			<bind name="style" value="'hitTest'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision))"/>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_INVITE_IN_DIVISION'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'inviteToDivision'; {playerId: entityAccount.accountSimple.dbId, playerName: pureName, inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON}"/>
			</block>
		</block>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="collectionDH" value="CC.contactsGroup; 'contactsGroup'"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged']; !!entityAccount.contact.isIgnored"/>
		<bind name="watchDH" value="'canAddGroupEntitiesId'; ['entityAccount.elementInGroups.evCanAddGroupEntitiesChanged', 'chatEntity.chat.evRosterChanged']; (entityAccount.elementInGroups) ? entityAccount.elementInGroups.canAddGroupEntitiesId : chatEntity.chat.canAddGroupEntitiesId"/>
		<bind name="watch" value="'isPrivateChannel'; channel.typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PRIVATE"/>
		<block>
			<bind name="visible" value="((groupIdsOfAccount==null) &amp;&amp; !(isIgnored) &amp;&amp; isPrivateChannel)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_ADD_TO_CONTACTS'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'addContact'; {dbId: accountDbId}"/>
		</block>
		<block>
			<bind name="visible" value="!(isIgnored) &amp;&amp; ((canAddGroupEntitiesId.length &gt; 0) &amp;&amp; (contactsGroup.length &gt; 1)) &amp;&amp; isPrivateChannel"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_ADD_TO_GROUP'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<block className="button_expand_h" type="native">
				<style>
					<position value="absolute"/>
					<right value="6px"/>
				</style>
				<styleClass value="$MouseDisable"/>
				<styleClass value="$MiddleVAligned"/>
			</block>
			<bind name="tooltip" value="'MoveToGroupContextSubMenu'; {_entityAccountId: entityAccount.id, canAddGroupEntitiesId: canAddGroupEntitiesId, _dropDown: _dropDown}; TooltipBehaviour.submenu"/>
		</block>
		<block>
			<bind name="visible" value="isPrivateChannel"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$ContextMenuListItem"/>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="(!isIgnored) ? 'IDS_IGNORE_PLAYER' : 'IDS_NOT_IGNORE_PLAYER'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'userIgnoreContact'; {dbId: accountDbId, ignore: !(isIgnored)}"/>
			</block>
			<bind name="instance" value="'MenuItemReportPortChatMisbehaviour'; {_dbId: accountDbId, _channelId : channel.channelId}"/>
		</block>
		<block>
			<bind name="visible" value="((groupIdsOfAccount!=null) &amp;&amp; !(isIgnored) &amp;&amp; isPrivateChannel)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!isInBalancer &amp;&amp; isPrivateChannel"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_PROFILE'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'navigateTo'; {	route: isInTrainingRoom ? SC.Ui_windows.ROUTE.ROOT_PORTAL_SHOW : SC.Ui_windows.ROUTE.PORTAL,
												data: {url: SC.Ui_windows.GUI_URL.PLAYER_STATS, accountId: accountDbId + ''}}"/>
		</block>
	</block>
	<block className="ChatBoxHeader">
		<style>
			<width value="100%"/>
			<height value="100f%"/>
			<align value="middle"/>
		</style>
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="dispatch" value="'draggingChangedEv'; 'Tooltip.Close'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="watch" value="'contentType'; _isDivision ? 'division' : 'common'"/>
		<bind name="childParentScope" value="contentType; { _channelEntityId: _channelEntityId, _isClanChat:_isClanChat }; { division: 	'ChatBoxHeaderDivisionCommon',
																											common:		'ChatBoxHeaderCommon' }"/>
	</block>
	<block className="ChatBoxHeaderCommon">
		<bind name="primaryEntityDH" value="'routeEntityisInBalancer'; CC.route; SC.Ui_windows.ROUTE.BALANCER"/>
		<bind name="watchDH" value="'isInBalancer'; ['routeEntityisInBalancer.route.evIsActiveChanged']; routeEntityisInBalancer.route.isActive"/>
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="watchDH" value="'isPreparingForBattle'; ['balancerInfoEntity.balancerInfo.evIsPreparingForBattleChanged']; balancerInfoEntity.balancerInfo.isPreparingForBattle"/>
		<bind name="watch" value="'isCloseButtonHidden'; _isClanChat ||
										_isTrainingRoom &amp;&amp; (isInBalancer || isPreparingForBattle) "/>
		<style>
			<width value="100%"/>
			<paddingTop value="8px"/>
			<paddingBottom value="8px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="!(_isEditing)"/>
			<block>
				<style>
					<height value="100%f"/>
				</style>
				<bind name="style" value="'hitTest'; !(_isPasswordNeeded) &amp;&amp; !(_isInvitation)"/>
				<block className="button_dock" type="native">
					<params>
						<param name="name" value="ChatBoxHeader"/>
					</params>
					<bind name="style" value="'hitTest'; !(_isSteadyChannel)"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<marginTop value="-4px"/>
						<marginBottom value="-7px"/>
						<marginRight value="-4px"/>
						<marginLeft value="2px"/>
					</style>
					<bind name="tooltip" value="'ChatDropDownMenu'; {_dropDown: true, channelEntityId: _channelEntityId}; TooltipBehaviour.verticalInfoWidget"/>
				</block>
				<block>
					<style>
						<hitTest value="false"/>
						<marginLeft value="8px"/>
					</style>
					<bind name="instance" value="'ChannelTitleWithIcon'; {channelEntityId: _channelEntityId, _bold: true, _maxWidth: 350, _channelHeader: true}"/>
				</block>
				<block className="icon_navigate" type="native">
					<bind name="visible" value="!(_isPasswordNeeded || _isSteadyChannel || _isInvitation)"/>
					<style>
						<hitTest value="false"/>
						<marginLeft value="2px"/>
						<marginRight value="2px"/>
						<top value="60%"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<bind name="gotoAndStop!" value="'down'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<styleClass value="$MiddleVAlignedAbsolutely"/>
				<style>
					<right value="12px"/>
				</style>
				<bind name="instance" value="'ChatBoxHeaderControls'; { _channelEntityId: _channelEntityId, _showCloseButton: !isCloseButtonHidden }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isEditing"/>
			<style>
				<width value="100%"/>
				<height value="37px"/>
			</style>
			<bind name="instance" value="'ChannelHeaderEditing'; _isEditing ? {channelEntityId: _channelEntityId} : null"/>
		</block>
	</block>
	<block className="ChatBoxHeaderDivisionCommon">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'selfIsInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
		<bind name="watch" value="'isActiveDivisionControls'; !(_isSteadyChannel || (isFormationInBattle &amp;&amp; selfIsInBattle))"/>
		<bind name="watchDH" value="'isMercenary'; ['selfPlayerEntity.preBattlePlayerSimple.evIsMercenaryChanged']; selfPlayerEntity.preBattlePlayerSimple.isMercenary"/>
		<bind name="watch" value="'showPrimeTime'; !isMercenary &amp;&amp; _isClanDivision"/>
		<bind name="watch" value="'padding'; showPrimeTime ? 16 : 10"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'paddingTop'; padding"/>
		<bind name="style" value="'paddingBottom'; padding"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
				<height value="100%f"/>
			</style>
			<block>
				<bind name="instance" value="'DivisionHeaderButton'; {	_channelEntityId: _channelEntityId,
														_isClanDivision: _isClanDivision,
														_isActive: isActiveDivisionControls	}"/>
			</block>
			<block>
				<style>
					<height value="20px"/>
					<marginLeft value="41px"/>
				</style>
				<bind name="visible" value="showPrimeTime"/>
				<bind name="firstEntityDH" value="'fixedPrimeTimeEntity'; CC.clanBattlePrimeTime; 'fixed'"/>
				<bind name="collectionDH" value="CC.clanBattlePrimeTime; 'chosenPrimeTimes'; 'chosen'"/>
				<bind name="watch" value="'chosenPrimeTimeEntity'; chosenPrimeTimes[0]"/>
				<bind name="watch" value="'currentEntityId'; !!(fixedPrimeTimeEntity) ? fixedPrimeTimeEntity.id : chosenPrimeTimeEntity.id"/>
				<bind name="watch" value="'isPrimeTimeChosen'; !!(currentEntityId)"/>
				<block>
					<bind name="fade" value="isPrimeTimeChosen; 0.15; {alpha: 0}; {alpha: 1}"/>
					<style>
						<width value="100%f"/>
					</style>
					<bind name="instance" value="'PrimeTimeStereotype'; {	_entityId: currentEntityId, _isBold: true,
															_textColor: '$FontColorWhite', _showCountdown: true}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block type="text">
					<bind name="fade" value="!isPrimeTimeChosen; 0.15; {alpha: 0}; {alpha: 1}"/>
					<style>
						<width value="100%f"/>
						<multiline value="false"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<styleClass value="$FontColorOrange"/>
					<bind name="text" value="'IDS_CLAN_BATTLES_NO_CHOSEN_PRIMETIME'"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="12px"/>
			</style>
			<bind name="instance" value="'ChatBoxHeaderControls'; {_channelEntityId: _channelEntityId, _showCloseButton: isActiveDivisionControls}"/>
		</block>
	</block>
	<block className="DivisionHeaderButton">
		<style>
			<width value="100%f"/>
			<height value="36px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<marginLeft value="4px"/>
				<marginTop value="3px"/>
			</style>
			<bind name="instance" value="'DivisionHeaderLock'; {}"/>
		</block>
		<block>
			<block className="button_dock" type="native">
				<params>
					<param name="name" value="ChatBoxHeader"/>
				</params>
				<style>
					<width value="100%"/>
					<height value="32px"/>
					<position value="absolute"/>
					<marginRight value="-3px"/>
					<marginTop value="3px"/>
				</style>
				<bind name="style" value="'hitTest'; _isActive"/>
				<bind name="tooltip" value="'DivisionHeaderTooltip'; {_isClanDivision: _isClanDivision}"/>
				<bind name="tooltip" value="'ChatDropDownMenu'; {_dropDown: true, channelEntityId: _channelEntityId, _isDivision: true, _isClanDivision: _isClanDivision}; TooltipBehaviour.verticalInfoWidget"/>
			</block>
			<block>
				<style>
					<hitTest value="false"/>
					<marginBottom value="4px"/>
					<marginTop value="10px"/>
					<marginLeft value="4px"/>
					<marginRight value="3px"/>
				</style>
				<bind name="instance" value="'FormationHeader'; {_isClanDivision: _isClanDivision}"/>
			</block>
			<block className="icon_navigate" type="native">
				<bind name="visible" value="_isActive"/>
				<style>
					<hitTest value="false"/>
					<marginRight value="2px"/>
					<marginTop value="11px"/>
				</style>
				<bind name="gotoAndStop!" value="'down'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatBoxContentInvitation">
		<styleClass value="$Fullsize"/>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginBottom value="30px"/>
				<align value="middle|center"/>
			</style>
			<bind name="instance" value="'InvitationToChatItem'; { _channelEntityId: _channelEntityId }"/>
		</block>
	</block>
	<block className="ChatBoxContentEnterPassword">
		<styleClass value="$Fullsize"/>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginBottom value="48px"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'EnterPasswordChatItem'; { _channelEntityId: _channelEntityId }"/>
			</block>
		</block>
	</block>
	<block className="ChatBoxContentCommon">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="collectionDH" value="CC.channelParticipant; 'participants'; 'channelParticipants_' + channelEntity.id + '.sorted'"/>
		<bind name="watch" value="'isVisibleParticipantsPanel'; participants.length != 0"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ClanChatDailyMessage'; (channelEntity.channel.typeIdent == 'clan') ? {} : null"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="child" value="isChatServerAvailable; {_channelEntityId: _channelEntityId, _isInputEnabled: _isInputEnabled};	'ServerIsUnavailable';
																														'MessageBoxPanel'"/>
			</block>
			<block>
				<bind name="visible" value="isVisibleParticipantsPanel"/>
				<style>
					<height value="100%"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<height value="100%"/>
				</style>
				<bind name="instance" value="'ParticipantsPanel'; isVisibleParticipantsPanel ? { _channelEntity: channelEntity, _participants: participants } : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatBoxContentDivision">
		<bind name="firstEntityDH" value="'divisionEntranceInfoEntity'; CC.divisionEntranceInfo"/>
		<bind name="watchDH" value="'isDivisionAvailable'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evisDivisionAvailableChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.isDivisionAvailable"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
				<height value="36px"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'FormationStatuses'; {_divisionsAvailable: isDivisionAvailable}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<style>
					<height value="100%"/>
				</style>
				<bind name="instance" value="'FormationResizableMainElement'; { _channelEntityId: _channelEntityId}"/>
			</block>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'MessageBoxPanel'; isChatServerAvailable ? { _channelEntityId: _channelEntityId, _isInputEnabled: _isInputEnabled} : null"/>
				<bind name="instance" value="'ServerIsUnavailable'; !isChatServerAvailable ? {} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatBoxContent">
		<styleClass value="$Fullsize"/>
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="watch" value="'contentType'; _isInvitation 		? 'invite' :
								_isPasswordNeeded 	? 'password' :
								_isDivision 		? 'division'
													: 'common'"/>
		<bind name="childParentScope" value="contentType; {	_channelEntityId: _channelEntityId,
											_isInputEnabled: _isInputEnabled }; {invite: 	'ChatBoxContentInvitation',
																				password:	'ChatBoxContentEnterPassword',
																				division:	'ChatBoxContentDivision',
																				common:		'ChatBoxContentCommon' }"/>
	</block>
	<block className="ChatBox">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="actionIsDisplay" value="'setChannelChatBoxIsDisplay'; {entityId: channelEntityId}"/>
		<bind name="draggableWindow" value="'chatBoxDragZone'; 'chatBoxPosition'; channelEntity.channel.channelId"/>
		<bind name="changeDispatch" value="dragging; 'draggingChangedEv'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; true"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'subKey'; channelEntity.channel.channelId"/>
		<bind name="watch" value="'chatBoxPositionX';	(userPrefs.chatBoxPositionX &amp;&amp; userPrefs.chatBoxPositionX[subKey])		?	userPrefs.chatBoxPositionX[subKey]	: undefined"/>
		<bind name="watch" value="'chatBoxPositionY';	(userPrefs.chatBoxPositionY &amp;&amp; userPrefs.chatBoxPositionY[subKey])		?	userPrefs.chatBoxPositionY[subKey]	: undefined"/>
		<bind name="watch" value="'dragPositionsWasSet'; (userPrefs.chatBoxPositionX &amp;&amp; userPrefs.chatBoxPositionX[subKey]) &amp;&amp; (userPrefs.chatBoxPositionY &amp;&amp; userPrefs.chatBoxPositionY[subKey])"/>
		<bind name="changeDispatch" value="chatBoxPositionX &amp;&amp; dragPositionsWasSet;	'chatBoxPositionXchanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="changeDispatch" value="chatBoxPositionY &amp;&amp; dragPositionsWasSet;	'chatBoxPositionYchanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="action" value="'chatBoxPositionXchanged' ; 'setUserPref' ; {value : chatBoxPositionX, name : 'chatBoxPositionX', subName: subKey}"/>
		<bind name="action" value="'chatBoxPositionYchanged' ; 'setUserPref' ; {value : chatBoxPositionY, name : 'chatBoxPositionY', subName: subKey}"/>
		<bind name="left" value="chatBoxPositionX"/>
		<bind name="top" value="chatBoxPositionY"/>
		<bind name="watch" value="'chatBoxWidth';	(userPrefs.chatBoxWidth &amp;&amp; userPrefs.chatBoxWidth[subKey])		?	userPrefs.chatBoxWidth[subKey]	: undefined"/>
		<bind name="watch" value="'chatBoxHeight';	(userPrefs.chatBoxHeight &amp;&amp; userPrefs.chatBoxHeight[subKey])	?	userPrefs.chatBoxHeight[subKey]	: undefined"/>
		<bind name="width" value="chatBoxWidth"/>
		<bind name="height" value="chatBoxHeight"/>
		<bind name="var" value="{isEditing: false}"/>
		<bind name="catch" value="'chatChannelRenameStart';		{isEditing : true}"/>
		<bind name="catch" value="'chatChannelRenameCancelled';	{isEditing : false}"/>
		<bind name="catch" value="'chatChannelRenameSuccessed';	{isEditing: false}"/>
		<bind name="watchDH" value="'typeIdent'; 		['channelEntity.channel.evTypeChanged']; channelEntity.channel.typeIdent"/>
		<bind name="watchDH" value="'isInvitation';		['channelEntity.channel.evOpenChanged', 'channelEntity.channel.evInvitationRefused']; channelEntity.channel.isInvitation"/>
		<bind name="watchDH" value="'isPasswordNeeded';	['channelEntity.channel.evOpenChanged']; channelEntity.channel.isWaitingPassword"/>
		<bind name="watch" value="'isDivision'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE"/>
		<bind name="watch" value="'isClanChat'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN"/>
		<bind name="watch" value="'isTrainingRoom'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM"/>
		<bind name="watch" value="'isSteadyChannel'; isClanChat || isTrainingRoom"/>
		<bind name="firstEntityDH" value="'chatRestrictionsEntity'; CC.chatRestrictions"/>
		<bind name="watchDH" value="'isXmppChatBlocked';		['chatRestrictionsEntity.chatRestrictions.evBlockDockAndClanChatChanged'];
												chatRestrictionsEntity.chatRestrictions.isBlockDockAndClanChat"/>
		<bind name="watchDH" value="'isPrebattleChatBlocked';['chatRestrictionsEntity.chatRestrictions.evBlockPrebattleChatChanged'];
												chatRestrictionsEntity.chatRestrictions.isBlockPrebattleChat"/>
		<bind name="watch" value="'isInputEnabled'; 	!(isXmppChatBlocked &amp;&amp; isIn(typeIdent, SC.Channel.CHANNEL_TYPE_IDENT_VALUE.DOCK_AND_CLAN)) &amp;&amp;
									!(isPrebattleChatBlocked &amp;&amp; isIn(typeIdent, SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE_AND_TRAINING))"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'selectedBattleType'; selectedBattleTypes[0].battleType.type"/>
		<bind name="watch" value="'isClanDivision'; selectedBattleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<bind name="class" value="isDivision ? '$ChatBoxDivisionSize' : '$ChatBoxDefaultSize'"/>
		<styleClass value="$ChatBoxDefaultPosition"/>
		<block className="InfotipPanelBg">
			<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
			<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<style>
				<margin value="-2px"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<background9Slice value="[3]"/>
				</style>
				<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-2px"/>
				</style>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<params>
						<param name="name" value="chatBoxDragZone"/>
					</params>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'ChatBoxHeader'; { 	_channelEntityId: channelEntityId, 
													_isInvitation: isInvitation, 
													_isPasswordNeeded: isPasswordNeeded, 
													_isDivision: isDivision,
													_isTrainingRoom: isTrainingRoom,
													_isClanDivision: isClanDivision,
													_isClanChat:isClanChat,
													_isEditing: isEditing,
													_isSteadyChannel: isSteadyChannel }"/>
				</block>
			</block>
			<block>
				<style>
					<marginLeft value="-1px"/>
					<marginRight value="-1px"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'ChatBoxContent'; { _channelEntityId: channelEntityId,
												_isPasswordNeeded: isPasswordNeeded,
												_isInvitation: isInvitation,
												_isDivision: isDivision,
												_isClanDivision: isClanDivision,
												_isInputEnabled: isInputEnabled  }"/>
			</block>
		</block>
		<bind name="watch" value="'restrict'; chatBoxState != WindowTooltipState.pinned ? {} : { down: true, left: true }"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="ResizeFrame">
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<bind name="visible" value="!(restrict.up)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP'"/>
					<style>
						<position value="absolute"/>
						<width value="100%"/>
						<height value="6px"/>
						<top value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_top"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.down)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN'"/>
					<style>
						<position value="absolute"/>
						<width value="100%"/>
						<height value="6px"/>
						<bottom value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_bottom"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.left)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_LEFT'"/>
					<style>
						<position value="absolute"/>
						<width value="6px"/>
						<height value="100%"/>
						<left value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_left"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.right)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_RIGHT'"/>
					<style>
						<position value="absolute"/>
						<width value="6px"/>
						<height value="100%"/>
						<right value="-3px"/>
						<backgroundColor value="0x01ff0000"/>
					</style>
					<params>
						<param name="name" value="grip_right"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.up || restrict.left)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_LEFT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<top value="-5px"/>
						<left value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_top_left"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.up || restrict.right)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_RIGHT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<top value="-5px"/>
						<right value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_top_right"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.down || restrict.left)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_LEFT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<bottom value="-5px"/>
						<left value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_bottom_left"/>
					</params>
				</block>
				<block>
					<bind name="visible" value="!(restrict.down || restrict.right)"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_RIGHT'"/>
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="12px"/>
						<bottom value="-5px"/>
						<right value="-5px"/>
						<backgroundColor value="0x0100ff00"/>
					</style>
					<params>
						<param name="name" value="grip_bottom_right"/>
					</params>
				</block>
			</block>
		</block>
		<bind name="resize" value="'grip_top';			'up'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_bottom';		'down'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_left';			'left'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_right';			'right'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_top_left';		'up,left'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_top_right';		'up,right'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_bottom_left';	'down,left'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
		<bind name="resize" value="'grip_bottom_right';	'down,right'; 'chatBoxWidth'; 'chatBoxHeight'; subKey"/>
	</block>
	<block className="ParticipantsPanel">
		<bind name="watchDH" value="'channelTypeIdent'; ['_channelEntity.channel.evTypeChanged']; _channelEntity.channel.typeIdent"/>
		<bind name="watch" value="'isSteadyChannel'; isIn(channelTypeIdent, [SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM])"/>
		<style>
			<width value="220px"/>
			<height value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<bind name="visible" value="!isSteadyChannel"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="ChatInvitePlayerButton" type="ublock">
					<style>
						<width value="100%"/>
					</style>
					<bind name="build!" value="{	_channelId: _channelEntity.channel.channelId }"/>
				</block>
			</block>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<height value="100%f"/>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_participants; 'ChatParticipantItem';  {	_playerContext: {type: 'channelParticipants', channelTypeIdent: channelTypeIdent, clubEntityId: clubEntityId, clubLeaderDbId: leaderDbId},
																	_channelId: _channelEntity.channel.channelId	}"/>
			</block>
		</block>
	</block>
	<block className="MessageBoxPanel">
		<styleClass value="$Fullsize"/>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<scrollbar value="ModernScrollBar"/>
				<scrollbarAlign value="right"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerChat"/>
				<scrollArea value="ModernScrollArea"/>
				<scrollbarTrackMode value="scrollToCursor"/>
				<wheelScrollSpeed value="30"/>
				<overflow value="scroll"/>
				<layout value="lesta.unbound.layout.measure.CarouselVariableItemSizeLayout"/>
				<itemWidth value="260px"/>
				<itemHeight value="22px"/>
			</style>
			<bind name="controller" value="'lesta.unbound.controls.ControllerAutoScroll'"/>
			<bind name="event" value="'addedToStage'; instantScrollToLastItem"/>
			<bind name="generatorDH" value="CC.channelMessage; 'ChannelMessageRenderer'; 'byChannel.' + _channelEntityId; {_currentChannelEntityId: _channelEntityId}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
				<marginRight value="2px"/>
				<marginBottom value="2px"/>
			</style>
			<bind name="instance" value="'InputTextPanel'; { _channelEntityId: _channelEntityId,	_isInputEnabled: _isInputEnabled }"/>
		</block>
	</block>
	<block className="InputTextPanel">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="37px"/>
				<marginRight value="4px"/>
				<marginLeft value="4px"/>
			</style>
			<block className="text_input_caps_enter" type="native">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="_isInputEnabled"/>
				<params>
					<param name="restrict" value="^&lt;&gt;"/>
					<param name="actAsButton" value="true"/>
					<param name="maxChars" value="512"/>
					<param name="noTranslate" value="true"/>
				</params>
				<bind name="enabled" value="_isInputEnabled"/>
				<bind name="ubFocus" value="0; true; true"/>
				<bind name="sync" value="'text'; 'change'; 'inputText'"/>
				<bind name="action" value="'textInputEnter'; (inputText.length &gt; 0) ? 'sendMessage' : null; {channelId: channelEntity.channel.channelId, message:inputText}"/>
				<bind name="catch" value="'textInputEnter'; {inputText : ''}"/>
				<bind name="catch" value="'sendButtonEnter'; {inputText : ''}"/>
			</block>
			<block className="text_input_caps" type="native">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="!_isInputEnabled"/>
				<params>
					<param name="enabled" value="false"/>
				</params>
				<bind name="defaultText" value="tr('IDS_CHAT_BLOCKED')"/>
				<bind name="ubFocus" value="1; false; false; false"/>
			</block>
			<block className="button_dock" type="native">
				<bind name="visible" value="_isInputEnabled"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_SEND_MESSAGE'}"/>
				<styleClass value="$TextInputEnterButton"/>
				<bind name="enabled" value="inputText.length &gt; 0 &amp;&amp; _isInputEnabled"/>
				<bind name="action" value="'buttonClick'; 'sendMessage'; {channelId: channelEntity.channel.channelId, message:inputText}"/>
				<bind name="dispatch" value="'buttonClick'; 'sendButtonEnter'"/>
			</block>
		</block>
	</block>
	<block className="ClanChatDailyMessage">
		<style>
			<width value="100%"/>
			<marginTop value="8px"/>
			<marginLeft value="8px"/>
			<marginRight value="8px"/>
		</style>
		<bind name="visible" value="(messageOfTheDay || isEditingRole) &amp;&amp; !isXmppChatBlocked &amp;&amp; !isDescriptionTextFieldsBlocked"/>
		<bind name="dataRefDH" value="'messageEntity'; '$dataRef.ref'"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
		<bind name="watchDH" value="'messageOfTheDay'; ['clanEntity.clanExtended.evMessageOfTheDayChanged']; clanEntity.clanExtended.messageOfTheDay"/>
		<bind name="watchDH" value="'messageOfTheDayState'; ['clanEntity.clanExtended.evMessageOfTheDayStateChanged']; clanEntity.clanExtended.messageOfTheDayState"/>
		<bind name="firstEntityDH" value="'chatRestrictionsEntity'; CC.chatRestrictions"/>
		<bind name="watchDH" value="'isXmppChatBlocked';	['chatRestrictionsEntity.chatRestrictions.evBlockDockAndClanChatChanged'];
										chatRestrictionsEntity.chatRestrictions.isBlockDockAndClanChat"/>
		<bind name="watchDH" value="'isDescriptionTextFieldsBlocked';	['chatRestrictionsEntity.chatRestrictions.evBlockDescriptionTextFieldsChanged'];
										chatRestrictionsEntity.chatRestrictions.isBlockDescriptionTextFields"/>
		<bind name="watch" value="'isMessageExists'; messageOfTheDay.length &gt; 0"/>
		<bind name="watch" value="'isEditingRole'; role == 'commander' || role == 'executive_officer'"/>
		<bind name="watch" value="'isAttentionMessageState'; messageOfTheDayState != SC.Clan.CLAN_MESSAGE_OF_THE_DAY_STATE.DEFAULT"/>
		<bind name="watch" value="'attentionMessage'; 'IDS_CLAN_CHAT_EDIT_MOTD_REASON_' + SC.Clan.CLAN_MESSAGE_OF_THE_DAY_STATE.VALUE_TO_NAME[messageOfTheDayState]"/>
		<bind name="var" value="{InputFieldVisibility: false}"/>
		<bind name="catch" value="'changeFieldVisibility'"/>
		<bind name="firstEntityDH" value="'divisionEntranceInfoEntity'; CC.divisionEntranceInfo"/>
		<bind name="watchDH" value="'commentStatus'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evCommentStatusChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.commentStatus"/>
		<bind name="watchDH" value="'isBanned'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evIsBannedChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.isBanned"/>
		<block>
			<bind name="visible" value="!InputFieldVisibility &amp;&amp; (messageOfTheDay || (isEditingRole &amp;&amp; !isAttentionMessageState))"/>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginBottom value="4px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="transition" value="rollOver &amp;&amp; isEditingRole &amp;&amp; !isAttentionMessageState; 0.15; {alpha: 1}; {alpha: 1.3}"/>
				<bind name="dispatch" value="'click'; isEditingRole &amp;&amp; !isAttentionMessageState ? 'changeFieldVisibility' : null;
			 																		{InputFieldVisibility: true}"/>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-3"/>
					</style>
					<bind name="style" value="'noTranslate'; messageOfTheDay.length &gt; 0"/>
					<styleClass value="$TextDefaultNM"/>
					<bind name="class" value="messageOfTheDay ? null : '$FontColorBlueish'"/>
					<bind name="text" value="isMessageExists ? messageOfTheDay : 'IDS_CLAN_CHAT_EDIT_MOTD_DEFAULT_TEXT'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isEditingRole &amp;&amp; !isAttentionMessageState"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_CHAT_EDIT_MOTD_TOOLTIP'}"/>
				<style>
					<marginBottom value="-8px"/>
					<marginTop value="-6px"/>
					<marginLeft value="8px"/>
				</style>
				<bind name="instance" value="'ImageButton'; {_width: '23px',
											_height: '23px',
											_enabled: true,
											_dispatch: 'changeFieldVisibility',
											_dispatchParams: {InputFieldVisibility: true},
											_backgroundImage: 'url:../service_kit/buttons/context/pencil.png'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="InputFieldVisibility"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="text_area_elastic_enter" type="native">
					<bind name="watch" value="'maxChars'; 180"/>
					<params>
						<param name="actAsButton" value="true"/>
						<param name="maxChars" value="180"/>
						<param name="noTranslate" value="true"/>
					</params>
					<bind name="controller" value="'lesta.dialogs.dock.controllers.ElasticBlockController'"/>
					<bind name="minNumLines" value="1"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="action" value="'textInputEnter'; 'AccountClanComponent.setMessageOfTheDay'; { message: txtMessage }"/>
					<bind name="dispatch" value="'textInputEnter';'changeFieldVisibility'; {InputFieldVisibility: false}"/>
					<bind name="text" value="messageOfTheDay"/>
					<bind name="ubFocus" value="0; InputFieldVisibility; true; true"/>
					<bind name="sync" value="'text'; 'change'; 'txtMessage'"/>
					<block>
						<styleClass value="$TextAreaEnterButton"/>
						<bind name="tooltip" value="'SimpleStatusTooltip'; (txtMessage.length &gt; maxChars) ? {_text: 'IDS_MAX_STATUS_LENGTH', _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING} : null"/>
						<bind name="tooltip" value="'SimpleStatusTooltip'; (txtMessage.length &lt;= maxChars) ? {_text: 'IDS_HINT_ADD_SEEKER_STATUS'} : null"/>
						<block className="button_dock" type="native">
							<styleClass value="$FullsizeAbsolute"/>
							<bind name="action" value="'click'; 'AccountClanComponent.setMessageOfTheDay'; { message: txtMessage }"/>
							<bind name="dispatch" value="'buttonClick';'changeFieldVisibility'; {InputFieldVisibility: false}"/>
							<bind name="style" value="'hitTest'; (commentStatus == 'submitted') &amp;&amp; (txtMessage.length &lt;= maxChars) ? false : true"/>
							<bind name="enabled" value="(txtMessage.length &lt;= maxChars)"/>
						</block>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<bottom value="3"/>
							<right value="56"/>
						</style>
						<bind name="fade" value="(isBanned || (commentStatus != 'submitted')); 0.1;
								{top: 10, alpha: 0}; {top: 0, alpha: 1}; {top: 10, alpha: 0}"/>
						<bind name="instance" value="'CharCounter'; { _string: txtMessage, _maxChars: maxChars}"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<marginLeft value="8px"/>
					<marginRight value="6px"/>
				</style>
				<bind name="instance" value="'CloseButton'; {
				_event: 'changeFieldVisibility',
				_eventData: { InputFieldVisibility: false },
				_tooltipText: 'IDS_CLAN_CHAT_EDIT_MOTD_EXIT_TOOLTIP'
			}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isEditingRole &amp;&amp; isAttentionMessageState"/>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginBottom value="4px"/>
				<marginLeft value="4px"/>
				<marginRight value="4px"/>
			</style>
			<bind name="instance" value="'StatusLine'; {	_width: '100%',
										_text: attentionMessage,
										_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
										_textClass: '$TextDefaultNM'
									}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<marginLeft value="-8px"/>
				<marginRight value="-8px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ChannelHeaderEditing">
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="watchDH" value="'channelName'; ['channelEntity.channel.evNameChanged', 'channelEntity.channel.user', 'channelEntity.channel.user.ref.accountName.evChanged']; (channelEntity.channel.nameIds != null)	? tr(channelEntity.channel.nameIds) :
																																									 (channelEntity.channel.user.ref != null)	? channelEntity.channel.user.ref.accountName.nickName
																																									 											: channelEntity.channel.name"/>
		<bind name="var" value="{ textInput: channelName,
				 isWrongName: false,
				 isRenameComplete: false }"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evNameChanged'; 'evRenameChannelSuccessed'"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evRenameChannelErrorNameExist'; 'evRenameChannelErrorNameExist'"/>
		<bind name="dispatch" value="'evRenameChannelErrorNameExist';  ((channelEntity.channel.name==textInput) || (textInput == '')) ? 'evRenameChannelSuccessed' : null"/>
		<bind name="catch" value="'evRenameChannelErrorNameExist'; { isWrongName :		true,
													isRenameComplete :	false}"/>
		<bind name="dispatch" value="'evRenameChannelSuccessed'; 'chatChannelRenameSuccessed'"/>
		<bind name="catch" value="'evRenameChannelSuccessed'; {	isWrongName :		false,
												isRenameComplete :	true}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginTop value="9px"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginLeft value="8px"/>
					<marginRight value="5px"/>
				</style>
				<block>
					<style>
						<width value="19px"/>
						<height value="19px"/>
					</style>
					<bind name="style" value="'backgroundImage';		'url:../service_kit/chat_channels/'+
													(channelEntity.channel.isSecured ? 'group_closed' : channelEntity.channel.typeIdent)
													+'.png'"/>
				</block>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<marginTop value="-5px"/>
						<marginRight value="9px"/>
						<marginLeft value="7px"/>
					</style>
					<block>
						<styleClass value="$Fullsize"/>
						<block className="text_input_caps_enter" type="native">
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_ENTER_CHANNEL_NAME'}"/>
							<style>
								<height value="29px"/>
								<width value="100%"/>
							</style>
							<block>
								<style>
									<width value="100%"/>
								</style>
								<block>
									<style>
										<position value="absolute"/>
										<width value="100%"/>
										<bottom value="-6px"/>
									</style>
									<bind name="instance" value="'WrongTextInputNotification'; isWrongName	? 	{_maxWidth : 350, _startTop: 10,
																							 	 _text: (textInput.length &lt; 3)	? tr('IDS_HINT_TITLE_TOO_SHORT')
																																: (tr('IDS_WRONG_TITLE') + '. ' + tr('IDS_TRY_ANOTHER_TITLE'))}
																							:	null"/>
								</block>
							</block>
							<params>
								<param name="actAsButton" value="true"/>
								<param name="maxChars" value="32"/>
								<param name="restrict" value="^&lt;&gt;"/>
								<param name="noTranslate" value="true"/>
							</params>
							<bind name="ubFocus" value="0; true; true; true"/>
							<bind name="text" value="channelName"/>
							<bind name="sync" value="'text'; 'change'; 'textInput'"/>
							<bind name="catch" value="'change'; {isWrongName : false}"/>
							<bind name="action" value="'textInputEnter'; 'renameChannel';
														{channelId: channelEntity.channel.channelId,
														 newName: (textInput == '') ?	channelEntity.channel.name
																						  :	(textInput.length &gt; 2)  ? textInput 
																						 							: channelEntity.channel.name}"/>
							<block className="button_dock" type="native">
								<styleClass value="$TextInputEnterButton"/>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CHANNEL_RENAME'}"/>
								<bind name="action" value="'buttonClick'; 'renameChannel';
														{channelId: channelEntity.channel.channelId,
														 newName: (textInput == '') ?	channelEntity.channel.name
																						  :	(textInput.length &gt; 2)  ? textInput 
																						 							: channelEntity.channel.name}"/>
							</block>
						</block>
						<block>
							<style>
								<marginLeft value="13px"/>
								<marginTop value="10px"/>
							</style>
							<bind name="instance" value="'CloseButton'; {
							_event: 'chatChannelRenameCancelled',
							_tooltipText: 'IDS_CANCEL' 
						}"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ChatParticipantItem">
		<bind name="dataRefDH" value="'participantEntity'; '$dataRef.ref'"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
		</style>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'PlayerContactItemWithRollover'; {_entityAccountId: participantEntity.id, _isShort: true, _playerContext: _playerContext, _channelId: _channelId }"/>
		</block>
	</block>
	<block className="OpenChannelElement">
		<bind name="dataRefDH" value="'itemEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'channelEntity'; itemEntity.id"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watch" value="'_active'; chatBoxVisible"/>
		<bind name="watchDH" value="'isChatBoxOpened'; ['channelEntity.channel.evChatBoxOpenChanged']; channelEntity.channel.isChatBoxOpened"/>
		<bind name="watchDH" value="'isPasswordNeeded';['channelEntity.channel.evOpenChanged'];channelEntity.channel.isWaitingPassword"/>
		<bind name="watchDH" value="'groupExpanded'; ['parentGroup.groupViewElements.evStateChanged']; parentGroup.groupViewElements.expanded"/>
		<bind name="watchDH" value="'isInvitation';['channelEntity.channel.evOpenChanged', 'channelEntity.channel.evInvitationRefused']; channelEntity.channel.isInvitation"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'selectedBattleType'; selectedBattleTypes[0].battleType.type"/>
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watch" value="'isClanDivision'; selectedBattleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<style>
			<height value="27px"/>
			<marginRight value="4px"/>
		</style>
		<bind name="clickSplit"/>
		<bind name="action" value="'left_click'; 'setChatBoxOpenedState'; {channelId: channelEntity.channel.channelId, opened: !(isChatBoxOpened)}"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evUpChannelWindow'; 'Tooltip.Open'; {behaviour: TooltipBehaviour.window}; true"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'channelTypeIdent';['channel.evTypeChanged']; channel.typeIdent"/>
		<bind name="watch" value="'isDivision'; channelTypeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE"/>
		<bind name="watch" value="'isSteadyChannel'; isIn(channelTypeIdent, [SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN,
															SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM])"/>
		<block className="button_dock_bg" type="native">
			<bind name="name" value="'openChannel_' + channelTypeIdent"/>
			<style>
				<height value="100%"/>
			</style>
			<bind name="menu" value="!isSteadyChannel	? 'ChatDropDownMenu' : 'EmptyItem' ;
					!isSteadyChannel	? { _dropDown: false, channelEntityId: itemEntity.id, _isDivision: isDivision }
										: null; null; null; 'chatDropDownMenuVisible'"/>
			<bind name="tooltip" value="'ChatBox'; {channelEntityId: channelEntity.id}; TooltipBehaviour.window; 'chatBoxVisible'; 'chatBoxState'; isChatBoxOpened"/>
			<bind name="tooltip" value="'OpenedChannelHintTooltip'; {	_isSteadyChannel: isSteadyChannel, _isChatBoxOpened: isChatBoxOpened, _isDivision: isDivision}"/>
			<bind name="gotoAndStop!" value="'down'"/>
			<bind name="transition" value="rollOver || _active || chatDropDownMenuVisible; 0.15; {alpha: _active ? 0.9 : 0}; {alpha: 1}"/>
			<block>
				<bind name="transition" value="rollOver || isInvitation; 0.15; {alpha: _active ? 0.8 : 0.65}; {alpha: 1.0}"/>
				<style>
					<height value="100%"/>
					<marginLeft value="8px"/>
					<marginRight value="8px"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'ChannelTitleWithIcon'; {channelEntityId: channelEntity.id, _bold: isDivision, _maxWidth: 120, _isClanDivision: isClanDivision}"/>
				</block>
				<block>
					<bind name="visible" value="!(isSteadyChannel)"/>
					<style>
						<marginTop value="8px"/>
						<marginLeft value="4px"/>
					</style>
					<block>
						<bind name="transition" value="rollOver || _active; 0.15; {alpha: _active ? 1 : 0}; {alpha: 1.0}"/>
						<style>
							<marginLeft value="2px"/>
							<marginTop value="1px"/>
						</style>
						<bind name="instance" value="'CloseButton'; {
						_action: !(isInvitation || isPasswordNeeded)	? 'leaveChannel'
																		: isInvitation	? 'refuseInvitation'
																						: 'cancelEnterPassword',
						_actionParams: { channelId: channelEntity.channel.channelId },
						_tooltipText: isInvitation	? 'IDS_HINT_REJECT_INVITE'
													: 'IDS_CHANNEL_CLOSE'
					}"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ChannelTitleWithIcon">
		<bind name="entityDH" value="'channelEntity'; channelEntityId"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'countNewMessages'; ['channel.evCountNewMessagesChanged']; channel.countNewMessages"/>
		<bind name="watchDH" value="'isInvitation';['channel.evOpenChanged', 'channel.evInvitationRefused']; channel.isInvitation"/>
		<bind name="watchDH" value="'accountOnline'; ['channel.user.ref.accountStatus.evOnlineChanged']; channel.user.ref.accountStatus.online"/>
		<bind name="watchDH" value="'inBattle'; ['channel.user.ref.accountStatus.evInBattleChanged']; channel.user.ref.accountStatus.inBattle"/>
		<bind name="watchDH" value="'channelTypeIdent'; ['channel.evTypeChanged']; channel.typeIdent"/>
		<bind name="watch" value="'isDivision'; channelTypeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE "/>
		<bind name="watch" value="'isClanChat'; channelTypeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.CLAN "/>
		<bind name="watchDH" value="'rawChannelName'; ['channel.evNameChanged', 'channel.user', 'channel.user.ref.accountName.evChanged'];		(channel.nameIds != null)		? tr(channel.nameIds) :
																																(channel.user.ref != null)		? channel.user.ref.accountName.nickName
																																								: channel.name"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'isMercenary'; ['selfPlayerEntity.preBattlePlayerSimple.evIsMercenaryChanged']; selfPlayerEntity.preBattlePlayerSimple.isMercenary"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'preBattleOwnerId'; ['preBattleEntity.preBattle.evOwnerIdChanged']; preBattleEntity.preBattle.ownerId"/>
		<bind name="primaryEntityDH" value="'preBattleOwnerPlayerEntity'; CC.preBattlePlayerSimple; preBattleOwnerId"/>
		<bind name="watchDH" value="'clanId'; ['preBattleOwnerPlayerEntity.clanman.evClanIdChanged']; preBattleOwnerPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged']; clanTeamEntity.clanTeam.squadId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="watch" value="'isLeadingSquad'; squadId == leadingSquadId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watchDH" value="'selfClanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'selfClanEntity'; CC.clan; selfClanId"/>
		<bind name="watchDH" value="'selfClanTag'; ['selfClanEntity.clan.evTagChanged']; selfClanEntity.clan.tag"/>
		<bind name="watchDH" value="'selfClanName'; ['selfClanEntity.clanExtended.evNameChanged']; selfClanEntity.clanExtended.name"/>
		<bind name="watch" value="'isShowClanSquadModifier'; hasClanSquadModifier &amp;&amp; !isMercenary"/>
		<bind name="name" value="_channelHeader	? '' :
				isDivision		? ('channelTitle_' + channelTypeIdent) :
				isClanChat		? ('channelTitle_' + clanTag)
 								: ''"/>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="19px"/>
					<height value="19px"/>
					<marginTop value="4px"/>
					<marginRight value="2px"/>
				</style>
				<bind name="style" value="'backgroundImage';		'url:../service_kit/chat_channels/'+
												(	isInvitation						? 'group_open' :
													channel.isSecured					? 'group_closed' :
													isDivision							? 'division'
																						: channelTypeIdent)
												+'.png'"/>
			</block>
			<block>
				<bind name="style" value="'marginTop'; _bold ? '-1px' : 'auto'"/>
				<block>
					<bind name="visible" value="(!(accountOnline) || inBattle) &amp;&amp; (channel.user.ref != null)"/>
					<style>
						<marginLeft value="1px"/>
						<marginRight value="1px"/>
					</style>
					<bind name="style" value="'marginTop'; _bold ? '3px' : '2px'"/>
					<block className="icon_player_status" type="native">
						<bind name="gotoAndStop!" value="inBattle ? 'in_battle'
												 : 'not_ready'"/>
					</block>
				</block>
				<block type="text">
					<bind name="name" value="_channelHeader	? '' :
							isDivision 		? ('channelName_' + channelTypeIdent) :
							isClanChat		? ('channelName_' + clanInfo.tag)
											: ''"/>
					<style>
						<multiline value="false"/>
					</style>
					<styleClass value="$FontFamilyDefault"/>
					<style>
						<noTranslate value="true"/>
					</style>
					<bind name="style" value="'maxWidth'; _maxWidth"/>
					<bind name="style" value="'alpha';	isDivision 														? 1 :
										!accountOnline &amp;&amp; _channelHeader &amp;&amp; (channel.user.ref != null)	? 0.45
																										: 0.75"/>
					<bind name="style" value="'marginTop'; ((_channelName.length &gt; 27) &amp;&amp; (_channelHeader)) ? '2px' : '0px'"/>
					<bind name="class" value="((_channelName.length &gt; 27) &amp;&amp; (_channelHeader)) ? '$FontSize14' : '$FontSizeLarge'"/>
					<bind name="class" value="_bold ? '$Bold' : '$None'"/>
					<bind name="class" value="isDivision		? '$FontColorGolden'
											: '$FontColorWhite'"/>
					<bind name="watch" value="'_channelName'; 	isClanChat						?	'['+selfClanTag+'] ' + selfClanName :
												isDivision &amp;&amp; _isClanDivision	?	'['+clanTag+'] ' + tr( isShowClanSquadModifier ? 'IDS_CLAN_SQUAD_' + squadId : 'IDS_DIVISION' ) :
											 	isDivision						? 	tr('IDS_DIVISION')
																				: (rawChannelName + ((channel.ownerNickName != null &amp;&amp; _isSearch)	? ' (' + channel.ownerNickName + ')'
																																					: ''))"/>
					<bind name="text" value="!isClanChat					?	_channelName :
							selfClanTag &amp;&amp; selfClanName	?	_channelName : 'IDS_CLAN_CHAT_HEADER'"/>
				</block>
				<block>
					<bind name="watch" value="'isLeadingIconVisible'; isDivision &amp;&amp; _isClanDivision &amp;&amp; isShowClanSquadModifier &amp;&amp; isLeadingSquad"/>
					<bind name="visible" value="isLeadingIconVisible"/>
					<style>
						<hitTest value="false"/>
						<marginRight value="4px"/>
						<marginLeft value="4px"/>
						<marginTop value="4px"/>
					</style>
					<bind name="instance" value="'LeadingClanSquadIcon'; isLeadingIconVisible ? { _isGolden: true } : null"/>
				</block>
				<block type="text">
					<bind name="fade" value="countNewMessages != 0; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<styleClass value="$TextDefault"/>
					<style>
						<marginTop value="2px"/>
					</style>
					<bind name="class" value="_bold ? '$Bold' : '$None'"/>
					<bind name="class" value="isDivision	? '$FontColorGolden':
							isClanChat	? '$FontColorWhite'
										: '$None'"/>
					<bind name="class" value="_channelHeader ? '$FontColorBlueish' : '$None'"/>
					<bind name="style" value="'width'; countNewMessages &lt; 10 ? 7 : 16"/>
					<bind name="pureText" value="(countNewMessages==0) ? '' : '(' + countNewMessages + ')'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="InvitationToChatItem">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="dataRefDH" value="'channel'; 'channelEntity.channel'"/>
		<bind name="watchDH" value="'channelName'; ['channel.evNameChanged', 'channel.user', 'channel.user.ref.accountName.evChanged']; (channel.nameIds != null) ? tr(channel.nameIds) : (channel.user.ref != null) ? channel.user.ref.accountName.nickName : channel.name"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<style>
				<marginBottom value="12px"/>
			</style>
			<block type="text">
				<bind name="visible" value="channel.invitationFromEntityId == -1"/>
				<styleClass value="$TextDefault17NM"/>
				<style>
					<noTranslate value="true"/>
				</style>
				<bind name="text" value="channel.invitationFromNickName"/>
			</block>
			<bind name="instance" value="'PlayerContactItem'; (channel.invitationFromEntityId != -1) ? { _entityAccountId: channel.invitationFromEntityId, _notTrancated: true } : null"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<bind name="text" value="'IDS_INVITE_TO_THE_CHANNEL'"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<style>
				<marginBottom value="16px"/>
				<noTranslate value="true"/>
			</style>
			<bind name="text" value="channelName"/>
		</block>
		<block>
			<style>
				<marginBottom value="16px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault19NM"/>
				<bind name="class" value="'$FontSizeHeader4'"/>
				<bind name="countdown" value="channel.refuseInvitationTimeExpiration; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="countdownText"/>
			</block>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_AUTOMATE_CANCEL'}"/>
		</block>
		<block>
			<bind name="instance" value="'DefaultButton';	{	_width: '210px',
												_enabled: true,
												_label: 'IDS_ACCEPT_INVITATION',
												_action: 'joinChannel',
												_actionParams: {channelId: channelEntity.channel.channelId}}
											"/>
		</block>
	</block>
	<block className="EnterPasswordChatItem">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="handleEventDH" value="'channelEntity.channel.evWrongPassword'; 'evWrongPassword'; {}; true"/>
		<bind name="var" value="{_wrongPassword: false}"/>
		<bind name="catch" value="'evWrongPassword'; {_wrongPassword : true}"/>
		<bind name="action" value="'passwordInputComplete'; 'joinChannel'; {channelId: channelEntity.channel.channelId, password: channelPasswordInput}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextClosedChannel"/>
				<style>
					<marginBottom value="6px"/>
				</style>
				<bind name="text" value="toUpperCase(tr('IDS_CLOSED_CHANNEL'))"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<styleClass value="$MiddleAligned"/>
				<default_text value="IDS_HINT_ENTER_PASSWORD"/>
			</block>
			<block>
				<style>
					<width value="200px"/>
					<marginTop value="10px"/>
					<height value="30px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<block className="text_input_caps_enter" type="native">
					<styleClass value="$Fullsize"/>
					<block>
						<block>
							<style>
								<position value="absolute"/>
								<width value="200px"/>
								<bottom value="-6px"/>
							</style>
							<bind name="instance" value="'WrongTextInputNotification'; _wrongPassword	? 	{_maxWidth : 200, _startTop: 10,
																							_text: tr('IDS_WRONG_PASSWORD_TRY_AGAIN')}
																						:	null"/>
						</block>
					</block>
					<params>
						<param name="actAsButton" value="true"/>
						<param name="maxChars" value="16"/>
						<param name="noTranslate" value="true"/>
					</params>
					<bind name="ubFocus" value="0; true; true; true"/>
					<bind name="sync" value="'text'; 'change'; 'channelPasswordInput'"/>
					<bind name="catch" value="'change'; {_wrongPassword : false}"/>
					<bind name="dispatch" value="'textInputEnter'; 'passwordInputComplete'"/>
					<block className="button_dock" type="native">
						<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_JOIN'}"/>
						<styleClass value="$TextInputEnterButton"/>
						<bind name="enabled" value="channelPasswordInput.length &gt; 0"/>
						<bind name="dispatch" value="'buttonClick'; 'passwordInputComplete'"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="ChatBoxHeaderControls">
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="watchDH" value="'isInvitation'; 		['channelEntity.channel.evOpenChanged', 'channelEntity.channel.evInvitationRefused']; channelEntity.channel.isInvitation"/>
		<bind name="watchDH" value="'isPasswordNeeded'; 	['channelEntity.channel.evOpenChanged']; channelEntity.channel.isWaitingPassword"/>
		<bind name="watchDH" value="'typeIdent'; 		['channelEntity.channel.evTypeChanged']; channelEntity.channel.typeIdent"/>
		<bind name="watch" value="'isTrainingRoom'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM"/>
		<bind name="watch" value="'isDivision'; typeIdent == SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE "/>
		<style>
			<height value="100%f"/>
			<flow value="horizontal"/>
		</style>
		<block className="button_collapse" type="native">
			<bind name="name" value="'collapseChatWindow'"/>
			<params>
				<param name="name" value="button_collapse"/>
			</params>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_COLLAPSE_WINDOW'}"/>
			<bind name="dispatch" value="'click'; 'Tooltip.Close'"/>
			<bind name="action" value="'click'; 'setChatBoxOpenedState'; {channelId: channelEntity.channel.channelId, opened: false}"/>
		</block>
		<block>
			<params>
				<param name="name" value="ChatboxButtonClose"/>
			</params>
			<style>
				<marginLeft value="7px"/>
				<marginTop value="1px"/>
			</style>
			<bind name="instance" value="'CloseButton'; _showCloseButton ? { _action:	isTrainingRoom		? '' :
																		isInvitation		? 'refuseInvitation' :
												 						isPasswordNeeded 	? 'cancelEnterPassword' :
												 						!isDivision			? 'leaveChannel'
												 											: '',
												 			_actionParams: isDivision || isTrainingRoom ? {} : { channelId: channelEntity.channel.channelId },
												 			_request:	isTrainingRoom	? 'closeTrainingRoom' :
																		isDivision		? 'leaveDivision'
																						: '',
												 			_requestParams: { subtitle: 'IDS_LEAVE_DIVISION_QUESTION' },
												 			_tooltipText:	isInvitation	? 'IDS_HINT_REJECT_INVITE' :
												 						    isTrainingRoom	? 'IDS_TRAINING_ROOM_QUITING' :
												 						    isDivision		? 'IDS_LEAVE_DIVISION'
												 											: 'IDS_CHANNEL_CLOSE' }
												 		: null"/>
		</block>
	</block>
	<block className="OpenedChannelHintTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text:	_isChatBoxOpened	? 'IDS_HINT_COLLAPSE_WINDOW' :
																_isDivision		? 'IDS_HINT_EXPAND_WINDOW'
																				: 'IDS_HINT_LEFT_CLICK_TO_OPEN_CHAT' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!_isSteadyChannel"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; !_isSteadyChannel	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT,
																			_text: 'IDS_HINT_RIGHT_CLICK_FOR_CONTEXT_MENU' }
																		: null"/>
			</block>
		</block>
	</block>
	<block className="ChannelMessageRenderer">
		<style>
			<width value="100%"/>
			<position value="virtual"/>
		</style>
		<bind name="style" value="'hitTest'; ((messageEntity.channelMessage.extraData != null) || isSuspended ? false : true)"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="dataRefDH" value="'messageEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'senderDBId'; []; messageEntity.channelMessage.senderDBId"/>
		<bind name="entityDH" value="'currentChannelEntity'; _currentChannelEntityId"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; messageEntity.channelMessage.senderDBId"/>
		<bind name="watchDH" value="'isSuspended'; ['playerEntity.accountSimple.evSuspendedChanged']; playerEntity.accountSimple.suspended"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="menu" value="'ContactContextMenu';	senderDBId != selfPlayerDbId	?	{	_entityAccountId: playerEntity.id,
																				_playerContext: {type: 'startPrivateChat'}, 
																				_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON,
																				_channelId: currentChannelEntity.channel.channelId }
																		:	null; null; null; 'contactContextMenuVisible'"/>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="(mouseDown || contactContextMenuVisible || rollOver); 0.1; {alpha: 0}; {alpha: 1}"/>
			<block className="dock_submenu_item_bg" type="native">
				<bind name="transition" value="contactContextMenuVisible; 0.1; {alpha: 1}; {alpha: 0.7}"/>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="messageEntity.channelMessage.extraData == null"/>
			<block type="text">
				<style>
					<marginLeft value="8px"/>
					<marginTop value="2px"/>
					<width value="36px"/>
					<fontSize value="13"/>
					<fontFamily value="$WWSDefaultFont"/>
				</style>
				<bind name="text" value="messageEntity.channelMessage.time"/>
			</block>
			<block type="text">
				<bind name="visible" value="!isSuspended"/>
				<style>
					<width value="100%"/>
					<marginRight value="10px"/>
					<leading value="-3"/>
					<fontSize value="15"/>
					<selectable value="true"/>
				</style>
				<styleClass value="$FontFamilyDefault"/>
				<bind name="text" value="messageEntity.channelMessage.message"/>
			</block>
			<block type="text">
				<bind name="visible" value="isSuspended"/>
				<style>
					<width value="100%"/>
					<marginRight value="10px"/>
					<leading value="-3"/>
					<selectable value="false"/>
					<alpha value="0.4"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="'IDS_REMOVED_CHAT_MESSAGE'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'CVCMessageRenderer'; messageEntity.channelMessage.extraData != null ? {_entityId: messageEntity.id} : null"/>
		</block>
	</block>
	<block className="CVCMessageRenderer">
		<bind name="entityDH" value="'messageEntity'; _entityId"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<marginLeft value="8px"/>
				<marginTop value="2px"/>
				<width value="36px"/>
				<alpha value="0.25"/>
				<fontSize value="13"/>
				<fontFamily value="$WWSDefaultFont"/>
			</style>
			<bind name="class" value="'$FontColorDefault'"/>
			<bind name="text" value="messageEntity.channelMessage.time"/>
		</block>
		<bind name="watch" value="'battleResultText';	messageEntity.channelMessage.extraData.battleResult == 'defeat'		? tr('IDS_DEFEAT') :
										messageEntity.channelMessage.extraData.battleResult == 'victory'	? tr('IDS_VICTORY')
																											: tr('IDS_DRAW')"/>
		<bind name="watch" value="'rating';			messageEntity.channelMessage.extraData.ratingDelta"/>
		<bind name="watch" value="'battleResult';	messageEntity.channelMessage.extraData.battleResult"/>
		<bind name="watch" value="'rating';			messageEntity.channelMessage.extraData.rating"/>
		<bind name="watch" value="'league';			messageEntity.channelMessage.extraData.league"/>
		<bind name="watch" value="'division';		messageEntity.channelMessage.extraData.division"/>
		<bind name="watch" value="'stage';			messageEntity.channelMessage.extraData.stage"/>
		<bind name="watch" value="'toLeagueId';		messageEntity.channelMessage.extraData.toLeagueId"/>
		<bind name="watch" value="'toDivisionId';	messageEntity.channelMessage.extraData.toDivisionId"/>
		<bind name="watch" value="'progress';		messageEntity.channelMessage.extraData.progress"/>
		<bind name="watch" value="'ratingDelta';		messageEntity.channelMessage.extraData.ratingDelta"/>
		<bind name="watch" value="'stageResult';		messageEntity.channelMessage.extraData.stageResult"/>
		<bind name="watch" value="'squadId';			messageEntity.channelMessage.extraData.squadId"/>
		<bind name="watch" value="'ratingDeltaStr';	ratingDelta &gt; 0 ? ('+' + ratingDelta) : ratingDelta"/>
		<bind name="watch" value="'clanLeagueStr';	(stageResult == 'division_victory') 	? 'IDS_CLAN_BATTLE_RAISED_DIVISION' :
									(stageResult == 'division_defeat') 		? 'IDS_CLAN_BATTLE_DESCENDED_DIVISION' :
									(stageResult == 'promotion_victory') 	? 'IDS_CLAN_BATTLE_RAISED_LEAGUE' :
									(stageResult == 'promotion_defeat') 	? 'IDS_CLAN_PROMOTION_LOSE_BATTLE_FOR_LEAGUE' :
									(stageResult == 'demotion_victory') 	? 'IDS_CLAN_DEMOTION_WON_BATTLE_FOR_LEAGUE' :
									(stageResult == 'demotion_defeat') 		? 'IDS_CLAN_BATTLE_DESCENDED_LEAGUE':
									(stage == 'promotion')					? subst('IDS_CLAN_PROMOTION_BATTLE_FOR_LEAGUE', [], {leagueIndex: toLeagueId}) :
									(stage == 'demotion')					? subst('IDS_CLAN_DEMOTION_BATTLE_FOR_LEAGUE', [], {leagueIndex: toLeagueId})
																			: ''"/>
		<bind name="watch" value="'place';		messageEntity.channelMessage.extraData.place"/>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="1px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-3px"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="15"/>
					</style>
					<bind name="class" value="	(battleResult == 'defeat') 	? '$FontColorCompareNegative':
								(battleResult == 'draw') 	? '$FontColorBlueish'
															: '$FontColorGreen'"/>
					<styleClass value="$FontFamilyDefaultBold"/>
					<bind name="text" value="battleResultText"/>
				</block>
				<block type="text">
					<bind name="visible" value="ratingDeltaStr != 0 "/>
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="15"/>
					</style>
					<bind name="class" value="'$FontFamilyDefaultBold'"/>
					<bind name="class" value="	(battleResult == 'defeat') 	? '$FontColorCompareNegative':
								(battleResult == 'draw') 	? '$FontColorBlueish'
															: '$FontColorGreen'"/>
					<bind name="text" value="ratingDeltaStr"/>
				</block>
				<block>
					<bind name="visible" value="progress != null"/>
					<style>
						<marginTop value="-4px"/>
					</style>
					<bind name="repeat" value="progress; 'ClanBattleResultsStarStatic'; { _width: '30px', _height: '30px', _smallSize: true }"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block type="text">
				<style>
					<marginRight value="4px"/>
					<leading value="-2"/>
					<fontSize value="15"/>
				</style>
				<bind name="class" value="(stage == 'league') 	? '$FontFamilyDefaultBold' 		: '$FontFamilyDefault'"/>
				<bind name="class" value="(stage == 'league') 	? 	(battleResult == 'defeat') 	? '$FontColorCompareNegative':
												  	(battleResult == 'draw') 	? '$FontColorBlueish'
																				: '$FontColorGreen'
												: '$FontColorDefault'"/>
				<bind name="text" value="clanLeagueStr"/>
			</block>
			<block>
				<style>
					<marginTop value="-3px"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="15"/>
					</style>
					<bind name="class" value="'$FontColorDefault'"/>
					<styleClass value="$FontFamilyDefault"/>
					<bind name="text" value="tr('IDS_CLAN_SQUAD_' + squadId) + ','"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="15"/>
					</style>
					<bind name="class" value="'$FontColorDefault'"/>
					<styleClass value="$FontFamilyDefault"/>
					<bind name="text" value="tr('IDS_CLAN_LEAGUE_' + league)"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="15"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$FontFamilyDefaultBold"/>
					<bind name="class" value="'$FontColorDefault'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_BATTLES_LOGO_DIVISION'}; TooltipBehaviour.simple"/>
					<bind name="text" value="toRoman(division)"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<fontSize value="15"/>
					</style>
					<styleClass value="$FontFamilyDefault"/>
					<bind name="class" value="'$FontColorDefault'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_BATTLES_LOGO_RATING'}; TooltipBehaviour.simple"/>
					<bind name="text" value="rating"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ClanSquadRatingInfo">
		<bind name="dataRefDH" value="'itemEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'clanSquadEntity'; _clanSquadEntityId ? _clanSquadEntityId : itemEntity.id"/>
		<bind name="watchDH" value="'league'; 	['clanSquadEntity.clanSquadLadderInfo.evLeagueIdChanged']; 		clanSquadEntity.clanSquadLadderInfo.leagueId"/>
		<bind name="watchDH" value="'division'; 	['clanSquadEntity.clanSquadLadderInfo.evDivisionIdChanged']; 	clanSquadEntity.clanSquadLadderInfo.divisionId"/>
		<bind name="watchDH" value="'rating'; 	['clanSquadEntity.clanSquadLadderInfo.evRatingChanged'];		clanSquadEntity.clanSquadLadderInfo.rating"/>
		<bind name="watch" value="'isLeading'; clanSquadEntity.clanSquadLadderInfo.squadId == _leadingSquadId"/>
		<bind name="watch" value="'selected'; _selected || _currentSquad == clanSquadEntity.clanSquadLadderInfo.squadId"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'alpha'; selected ? 1.0 : 0.8"/>
		<block>
			<style>
				<marginTop value="12px"/>
				<marginLeft value="12px"/>
				<marginBottom value="12px"/>
			</style>
			<block>
				<block type="text">
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="class" value="selected ? '$FontColorGolden' : '$FontColorDefault'"/>
					<bind name="text" value="tr('IDS_CLAN_SQUAD_' + clanSquadEntity.clanSquadLadderInfo.squadId)"/>
				</block>
				<block>
					<bind name="visible" value="isLeading"/>
					<style>
						<marginLeft value="8px"/>
						<marginTop value="-3px"/>
						<marginBottom value="-4px"/>
					</style>
					<bind name="instance" value="'LeadingClanSquadIcon'; isLeading ? { _isGolden: selected } : null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="8px"/>
						<leading value="-3"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<bind name="text" value="tr('IDS_CLAN_LEAGUE_' + league)"/>
				</block>
				<block type="text">
					<style>
						<marginRight value="8px"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="text" value="toRoman(division)"/>
				</block>
				<block type="text">
					<style>
						<leading value="-3"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<bind name="text" value="rating"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block type="text">
				<bind name="visible" value="isLeading"/>
				<style>
					<marginTop value="12px"/>
				</style>
				<styleClass value="$TextDefault17NM"/>
				<bind name="text" value="'IDS_LEADING_CLAN_SQUAD'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="selected"/>
			<style>
				<right value="12px"/>
				<top value="12px"/>
				<position value="absolute"/>
			</style>
			<block className="icon_check" type="native"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
	</block>
	<block className="DivisionHeaderTooltip">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged'];	clanTeamEntity.clanTeam.squadId"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="250px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isClanDivision &amp;&amp; hasClanSquadModifier"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="collectionRepeatDH" value="CC.clanSquadLadderInfo; 'ClanSquadRatingInfo'; ''; {_currentSquad: squadId, _leadingSquadId: leadingSquadId}"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
				<marginLeft value="10px"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'MouseInstruction'; { _type: 'left', _instructionText: 'IDS_HINT_CLICK_TO_CHOOSE_ACTION', _maxWidth: 220 }"/>
		</block>
	</block>

	<!-- chat_notifications_panel -->
	<block className="ChatNotificationsPanel">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'routeEntityisInBalancer'; CC.route; SC.Ui_windows.ROUTE.BALANCER"/>
		<bind name="watchDH" value="'isInBalancer'; ['routeEntityisInBalancer.route.evIsActiveChanged']; routeEntityisInBalancer.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInShipyard'; CC.route; SC.Ui_windows.ROUTE.SHIPYARD"/>
		<bind name="watchDH" value="'isInShipyard'; ['routeEntityisInShipyard.route.evIsActiveChanged']; routeEntityisInShipyard.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInNewbieGifts'; CC.route; SC.Ui_windows.ROUTE.NEWBIE_GIFTS"/>
		<bind name="watchDH" value="'isInNewbieGifts'; ['routeEntityisInNewbieGifts.route.evIsActiveChanged']; routeEntityisInNewbieGifts.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInStrategicActions'; CC.route; SC.Ui_windows.ROUTE.STRATEGIC_ACTIONS"/>
		<bind name="watchDH" value="'isInStrategicActions'; ['routeEntityisInStrategicActions.route.evIsActiveChanged']; routeEntityisInStrategicActions.route.isActive"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'showPortClockEntity'; CC.preference; 'ui.showPortClock'"/>
		<bind name="watchDH" value="'showPortClock'; ['showPortClockEntity.preference.evValueChanged']; showPortClockEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'selfVoiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEnabledEntity.preference.evValueChanged']; selfVoiceChatEnabledEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isLoadingBattle'; isIn('LoadingBattle', windowQueue)"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="watchDH" value="'isPreparingForBattle'; ['balancerInfoEntity.balancerInfo.evIsPreparingForBattleChanged']; balancerInfoEntity.balancerInfo.isPreparingForBattle"/>
		<bind name="watch" value="'isNotificationLogHidden'; isInBalancer || isPreparingForBattle || isLoadingBattle || isInNewbieGifts || isInStrategicActions"/>
		<bind name="primaryEntityDH" value="'selfPlayerVoiceChatEntity'; CC.playerVoiceState; selfPlayerName"/>
		<bind name="watchDH" value="'selfPlayerVoiceChatIsSpeaking'; ['selfPlayerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; selfPlayerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="var" value="{_playerContext: {type: 'startPrivateChat'}}"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$BottomMenu"/>
			<style>
				<marginTop value="-1px"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<block>
					<bind name="visible" value="!isInShipyard &amp;&amp; !isInStrategicActions"/>
					<styleClass value="$Fullsize"/>
					<block>
						<style>
							<marginLeft value="8px"/>
						</style>
						<block className="ContactsAndChannelsInfotipButton" type="ublock">
							<bind name="build!" value="{}"/>
						</block>
					</block>
					<block>
						<bind name="fade" value="(divisionDataEntity &amp;&amp; selfVoiceChatEnabled); 0.15; {scaleY: 0, ubScaleY: 0, alpha: 0}; {scaleY: 1, ubScaleY: 1, alpha: 1}; {scaleY: 0, ubScaleY: 0, alpha: 0}; 2; 1.5"/>
						<style>
							<marginLeft value="8px"/>
							<marginRight value="-7px"/>
							<marginTop value="4px"/>
							<width value="19px"/>
							<height value="17px"/>
						</style>
						<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isSpeaking: selfPlayerVoiceChatIsSpeaking}"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<height value="27px"/>
							<marginTop value="-2px"/>
							<marginLeft value="12px"/>
							<overflow value="scroll"/>
							<scrollArea value="ModernScrollAreaHorizontal"/>
							<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
							<wheelScrollSpeed value="100"/>
						</style>
						<bind name="collectionDH" value="CC.channel; 'openedChannels'; 'openedChannels'"/>
						<bind name="scopeHoldRepeat" value="openedChannels; 'OpenChannelElement'; 'id'"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<paddingRight value="8px"/>
				</style>
				<bind name="clock" value="'timeText'; 'hh:mm'"/>
				<block className="NotificationPanel" type="ublock">
					<bind name="build!" value="{ _timeText: timeText}"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="tooltip" value="'SystemNotificationTooltip'; {}; TooltipBehaviour.window; null; null; true"/>
		</block>
	</block>
	<block className="SystemNotificationTooltip">
		<bind name="stageSize"/>
		<style>
			<width value="1px"/>
			<height value="1px"/>
		</style>
		<bind name="style" value="'width'; stageWidth"/>
		<bind name="style" value="'height'; stageHeight"/>
		<block className="SystemNotificationContainer" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>

	<!-- check_box -->
	<block className="CheckBox">
		<bind name="name" value="_name"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _statusTooltipData ? _statusTooltipData : null"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'alpha'; _disabled ? 0.4 : 1"/>
		<block>
			<style>
				<position value="absolute"/>
				<height value="20px"/>
				<width value="20px"/>
				<background9Slice value="[4,4]"/>
				<backgroundImage value="url:../service_kit/buttons/check_box/background.png"/>
			</style>
		</block>
		<block>
			<bind name="transition" value="mouseDown; 0.05; {alpha: 1}; {alpha: 0.6}"/>
			<block>
				<bind name="transition" value="rollOver; 0.05; {alpha: 0}; {alpha: 1}"/>
				<style>
					<height value="20px"/>
					<width value="20px"/>
					<background9Slice value="[4,4]"/>
					<backgroundImage value="url:../service_kit/buttons/check_box/over.png"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="_isChecked"/>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 0.75}; {alpha: 1}"/>
				<style>
					<position value="absolute"/>
					<height value="20px"/>
					<width value="20px"/>
					<alpha value="0.75"/>
					<backgroundImage value="url:../service_kit/buttons/check_box/check_icon.png"/>
				</style>
			</block>
			<block>
				<style>
					<height value="20px"/>
				</style>
				<bind name="transition" value="_customLabelInstance &amp;&amp; rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 0.75}; {alpha: 1}"/>
				<bind name="instance" value="_customLabelInstance; _customLabelInstance ? _customLabelInstanceParams : null"/>
			</block>
			<block>
				<bind name="instance" value="'CheckBoxTextLabel'; _label ? {_maxTfWidth: _maxTfWidth, _label: _label, _rollOver: rollOver} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="soundSet" value="'check_box'"/>
			<bind name="style" value="'hitTest'; !_disabled"/>
			<bind name="action" value="'click';		_action 	? _action : null; 	_actionParams 	? _actionParams : {}"/>
			<bind name="request" value="'click'; 	_request 	? _request : null; 	_requestParams 	? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; 	_dispatch 	? _dispatch : null; _dispatchParams ? _dispatchParams : null"/>
			<bind name="directEvent" value="'click'; _directEvent	? _directEvent 	: null; _directEventParams	? _directEventParams: {}"/>
		</block>
	</block>
	<block className="CheckBoxTextLabel">
		<style>
			<marginLeft value="8px"/>
			<marginTop value="4px"/>
		</style>
		<bind name="transition" value="_rollOver; 0.05; {alpha: 0.75}; {alpha: 0.9}"/>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<bind name="style" value="'maxWidth'; _maxTfWidth ? _maxTfWidth : 300"/>
			<bind name="text" value="_label"/>
		</block>
	</block>

	<!-- clan -->
	<block className="ClanMainInset">
		<bind name="name" value="'ClansHomePage'"/>
		<styleClass value="$Fullsize"/>
		<bind name="soundOn" value="'addedToStage'; 'clans'; 'dock_inset'"/>
	</block>
	<block className="LeadingClanSquadIcon">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _isBig ? '30px' : '18px'"/>
		<bind name="style" value="'height'; _isBig ? '30px' : '18px'"/>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_leading_squad_' + (_isGolden ? 'golden_' : 'white_') + (_isBig ? 'big' : 'small') + '.png'"/>
	</block>

	<!-- clan_primetimes_shared -->
	<block className="ClanBattlePrimeTimeItem">
		<bind name="dataRefDH" value="'entityDay'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'isToday'; ['entityDay.day.evUpdate']; entityDay.day.isToday"/>
		<bind name="collectionDH" value="CC.clanBattlePrimeTime; 'primeTimesPerDay'; 'byDateId.' + entityDay.day.id"/>
		<bind name="watch" value="'havePrimeTimes'; primeTimesPerDay.length &gt; 0"/>
		<bind name="appear" value="'addedToStage'; 0.15; 1 + $index * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'startHide'; 0.15; $index * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="150px"/>
				</style>
				<bind name="style" value="'height'; havePrimeTimes ? (primeTimesPerDay.length * 32) + 'px' : '60px'"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="16"/>
					</style>
					<bind name="style" value="'alpha'; isToday ? 1 : 0.4"/>
					<block type="text">
						<styleClass value="$TextDefault19NM"/>
						<style>
							<styleSheet value="h2
							{
								font-family: $WWSDefaultFontBold;
							}"/>
						</style>
						<bind name="text" value="'&lt;body&gt;' + tr('IDS_' + entityDay.day.weekDayName) + ' ' + '&lt;h2&gt;' + (entityDay.day.day) + ' ' + (tr('IDS_MONTH_SHORTCUT_' + entityDay.day.month)) + '&lt;/h2&gt;&lt;/body&gt;'"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="!(havePrimeTimes)"/>
				<block type="text">
					<styleClass value="$TextDefaultBold17NM"/>
					<style>
						<width value="250px"/>
						<marginLeft value="275px"/>
						<marginTop value="24px"/>
						<marginBottom value="24px"/>
					</style>
					<bind name="text" value="toUpperCase(tr('IDS_CLAN_BATTLES_HAS_NO_PRIMETIME'))"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginRight value="8px"/>
				</style>
				<bind name="repeat" value="primeTimesPerDay; 'DailyPrimeTimesStr'; 	{	_day: entityDay.day.weekDay,
																		_currentServerDay: seasonEntity.clanBattleSeason.currentServerDay,
																		_selectedPrimeTimeId: _selectedPrimeTimeId,
																		_hasClanPermissions: _hasClanPermissions,
																		_beforeBattle: _beforeBattle,
																	}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<marginRight value="8px"/>
					<marginTop value="-2px"/>
					<alpha value="1.5"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<marginRight value="8px"/>
					<bottom value="-1px"/>
					<alpha value="1.5"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DailyPrimeTimesStr">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'clientBuildInfoEntity'; CC.clientBuildInfo"/>
		<bind name="dataRefDH" value="'entityPrimeTime'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'currentRealmDayType'; 		['entityPrimeTime.clanBattlePrimeTime.evChanged']; entityPrimeTime.clanBattlePrimeTime.currentRealmDayType"/>
		<bind name="watchDH" value="'primeTimeRealm'; 			['entityPrimeTime.clanBattlePrimeTime.evChanged']; entityPrimeTime.clanBattlePrimeTime.realm"/>
		<bind name="watchDH" value="'primeTimeDay'; 				['entityPrimeTime.clanBattlePrimeTime.evChanged']; entityPrimeTime.clanBattlePrimeTime.day"/>
		<bind name="watchDH" value="'primeTimeIsChosen'; 		['entityPrimeTime.clanBattlePrimeTime.evChanged']; entityPrimeTime.clanBattlePrimeTime.isChosen"/>
		<bind name="watchDH" value="'primeTimeIsFixed'; 			['entityPrimeTime.clanBattlePrimeTime.evChanged']; entityPrimeTime.clanBattlePrimeTime.isFixed"/>
		<bind name="watchDH" value="'primeTimeStartTime'; 		['entityPrimeTime.primeTime.evChanged']; entityPrimeTime.primeTime.primeTimeStartTime"/>
		<bind name="watchDH" value="'primeTimeFinishTime'; 		['entityPrimeTime.primeTime.evChanged']; entityPrimeTime.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift'; 			['entityPrimeTime.primeTime.evChanged']; entityPrimeTime.primeTime.daylightshift"/>
		<bind name="timeFormat" value="primeTimeStartTime - daylightshift; 'hh:mm'; 'localStartTime'; true"/>
		<bind name="timeFormat" value="primeTimeFinishTime - daylightshift; 'hh:mm'; 'localFinishTime'; true"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="watch" value="'isGlobal'; currentRegion != 'RU'"/>
		<bind name="firstEntityDH" value="'primeTimeEntityFixed'; CC.clanBattlePrimeTime; 'fixed'"/>
		<bind name="collectionDH" value="CC.clanBattlePrimeTime; 'chosenPrimeTimes'; 'chosen'"/>
		<bind name="watch" value="'primeTimeEntityChosen'; chosenPrimeTimes[0]"/>
		<bind name="watch" value="'textAlpha'; 	isCurrentServerDay 	? isCurrentPrimeTimeFixed 	? 1 : (primeTimeEntityFixed != null) ? 0.3 : 1 :
								isUpcoming 			? 0.6 : 0.3"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'isCurrentServerDay'; currentRealmDayType != ''"/>
		<bind name="watch" value="'isUpcoming';  serverTime &lt; primeTimeStartTime"/>
		<bind name="watch" value="'isActive'; (serverTime &gt; primeTimeStartTime) &amp;&amp; (serverTime &lt; primeTimeFinishTime)"/>
		<bind name="watch" value="'beforeBattleFlag'; !(isActive) &amp;&amp; _beforeBattle"/>
		<bind name="watch" value="'canBeChosen'; !isCurrentPrimeTimeChosen &amp;&amp; !isCurrentPrimeTimeFixed &amp;&amp; (isUpcoming || isCurrentServerDay) &amp;&amp; !(beforeBattleFlag)"/>
		<bind name="watch" value="'isCurrentPrimeTimeChosen'; (primeTimeEntityChosen != null) &amp;&amp; (primeTimeEntityChosen.clanBattlePrimeTime.realm == primeTimeRealm)"/>
		<bind name="watch" value="'isCurrentPrimeTimeFixed'; (primeTimeEntityFixed != null) &amp;&amp; (primeTimeEntityFixed.clanBattlePrimeTime.realm == primeTimeRealm) &amp;&amp; isCurrentServerDay"/>
		<bind name="dispatch" value="'click'; (_hasClanPermissions &amp;&amp; canBeChosen) ? 'evSelectPrimeTimeChanged' : ''; {selectedPrimeTimeId: entityPrimeTime.clanBattlePrimeTime.id}"/>
		<style>
			<width value="100%"/>
			<height value="32px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'hitTest'; (textAlpha &gt; 0.3)"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 	isCurrentPrimeTimeChosen 	? 'IDS_PRIME_TIME_FIXED_DESCR':
														isCurrentPrimeTimeFixed		? 'IDS_CLAN_BATTLES_ACTIVE_PRIME_TIME_FIXED'
																					: 'IDS_CLAN_BATTLES_SCHEDULE_SELECT_PRIME_TOOLTIP'}; 0"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$Fullsize"/>
				<params>
					<param name="doubleClickEnabled" value="true"/>
				</params>
				<bind name="name" value="'primeRimeItem_' + $index"/>
				<bind name="selected" value="entityPrimeTime.clanBattlePrimeTime.id == _selectedPrimeTimeId"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="(toUpperCase(clientBuildInfoEntity.clientBuildInfo.realmName) != toUpperCase(primeTimeRealm)) &amp;&amp; (currentRealmDayType != '')"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_PRIME_TIME_HIGH_PING_WARNING' }"/>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<marginTop value="7px"/>
				<width value="35px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="scaleX" value="0.8"/>
			<bind name="scaleY" value="0.8"/>
			<bind name="ubScaleX" value="0.8"/>
			<bind name="ubScaleY" value="0.8"/>
			<block className="icon_warning_orange_big" type="native"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_check" type="native">
				<bind name="visible" value="isCurrentPrimeTimeFixed"/>
				<style>
					<position value="absolute"/>
					<marginTop value="-1px"/>
					<marginLeft value="7px"/>
				</style>
			</block>
			<block className="icon_task_status" type="native">
				<bind name="visible" value="isCurrentPrimeTimeChosen &amp;&amp; (!(primeTimeEntityFixed) || !(isCurrentServerDay)) &amp;&amp; (isUpcoming || isCurrentServerDay)"/>
				<bind name="style" value="'alpha'; isCurrentServerDay ? 1 : 0.6"/>
				<style>
					<position value="absolute"/>
					<marginLeft value="8px"/>
				</style>
				<bind name="gotoAndStop!" value="'success'"/>
			</block>
			<block>
				<style>
					<width value="243px"/>
					<marginLeft value="32px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<bind name="style" value="'alpha'; textAlpha"/>
					<bind name="class" value="isCurrentPrimeTimeFixed ? '$FontColorGolden' : '$FontColorWhite'"/>
					<bind name="text" value="(localStartTime + ' – ' + localFinishTime)"/>
				</block>
				<block type="text">
					<bind name="visible" value="isGlobal"/>
					<style>
						<marginLeft value="4px"/>
					</style>
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="style" value="'alpha'; textAlpha"/>
					<bind name="class" value="isCurrentPrimeTimeFixed ? '$FontColorGolden' : '$FontColorWhite'"/>
					<bind name="text" value="' / ' + tr('IDS_REALM_NO_TRANSLATE_' + toUpperCase(primeTimeRealm))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="270px"/>
				</style>
				<bind name="style" value="'alpha'; textAlpha"/>
				<bind name="instance" value="'PrimeTimeTillTimeInfo'; { _entityId: entityPrimeTime.id, _showNearest: !(isCurrentServerDay) }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<top value="-2px"/>
				<paddingRight value="2px"/>
				<paddingLeft value="2px"/>
				<alpha value="0.5"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="-1px"/>
				<paddingRight value="2px"/>
				<paddingLeft value="2px"/>
				<alpha value="0.5"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<position value="absolute"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<position value="absolute"/>
				<right value="0px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<alpha value="0.8"/>
			</style>
			<bind name="visible" value="isIn(currentRealmDayType, ['one', 'first'])"/>
			<bind name="instance" value="'TableDividerPrimes'; { _height: '1px' }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<alpha value="0.8"/>
				<bottom value="0px"/>
			</style>
			<bind name="visible" value="isIn(currentRealmDayType, ['last', 'one'])"/>
			<bind name="instance" value="'TableDividerPrimes'; { _height: '1px' }"/>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<position value="absolute"/>
				<alpha value="0.8"/>
			</style>
			<bind name="visible" value="isIn(currentRealmDayType, ['last', 'one', 'middle', 'first'])"/>
			<bind name="instance" value="'TableDividerPrimes'; { _width: '1px' }"/>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<position value="absolute"/>
				<alpha value="0.8"/>
				<right value="0px"/>
			</style>
			<bind name="visible" value="isIn(currentRealmDayType, ['last', 'one', 'middle', 'first'])"/>
			<bind name="instance" value="'TableDividerPrimes'; { _width: '1px' }"/>
		</block>
	</block>
	<block className="TableDividerPrimes">
		<bind name="style" value="'width'; 	_width  ? _width  : '100%'"/>
		<bind name="style" value="'height'; 	_height ? _height : '100%'"/>
		<style>
			<backgroundColor value="0xffffffff"/>
		</style>
	</block>
	<block className="PrimeTimeTillTimeInfo">
		<bind name="entityDH" value="'_entityPrimeTime'; _entityId"/>
		<bind name="watchDH" value="'primeTimeStartTime'; 	['_entityPrimeTime.primeTime.evChanged']; _entityPrimeTime.primeTime.primeTimeStartTime"/>
		<bind name="watchDH" value="'primeTimeFinishTime'; 	['_entityPrimeTime.primeTime.evChanged']; _entityPrimeTime.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift'; 		['_entityPrimeTime.primeTime.evChanged']; _entityPrimeTime.primeTime.daylightshift"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeTillStart'; primeTimeStartTime - serverTime - daylightshift"/>
		<bind name="watch" value="'timeTillEnd'; primeTimeFinishTime - serverTime - daylightshift"/>
		<bind name="countdown" value="primeTimeStartTime - daylightshift ; 'formattedPrimeTimeTillStart'; 'HIGHEST,WITH_DAYS'"/>
		<bind name="countdown" value="primeTimeFinishTime - daylightshift; 'formattedPrimeTimeTillEnd'; 'HIGHEST,WITH_DAYS'"/>
		<bind name="watch" value="'isCurrent'; ((primeTimeStartTime - daylightshift)  &lt;= serverTime) &amp;&amp; (serverTime &lt;= (primeTimeFinishTime - daylightshift))"/>
		<bind name="watch" value="'isUpcoming';  serverTime &lt; (primeTimeStartTime - daylightshift)"/>
		<bind name="watch" value="'textClass'; _textClass ? _textClass : '$TextDefault17NM'"/>
		<style>
			<width value="100%f"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<bind name="fade" value="(isUpcoming &amp;&amp; !(_showNearest)) || (isUpcoming &amp;&amp; timeTillStart &lt; 900); 0.15; {alpha: 0, top: 20}; {alpha: 1, top: 0}"/>
			<block type="text">
				<bind name="class" value="textClass"/>
				<bind name="text" value="'IDS_PRIME_TIME_TILL_START'"/>
			</block>
			<block type="text">
				<bind name="class" value="textClass"/>
				<style>
					<marginLeft value="8px"/>
					<width value="100%f"/>
					<multiline value="false"/>
				</style>
				<bind name="text" value="formattedPrimeTimeTillStart"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<bind name="fade" value="isCurrent; 0.15; {alpha: 0, top: 20}; {alpha: 1, top: 0}"/>
			<block type="text">
				<bind name="class" value="textClass"/>
				<bind name="text" value="'IDS_PRIME_TIME_TILL_END'"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="8px"/>
					<width value="100%f"/>
					<multiline value="false"/>
				</style>
				<bind name="class" value="textClass"/>
				<bind name="class" value="(timeTillEnd &lt; 900) ? '$FontColorOrange' : '$None'"/>
				<bind name="text" value="formattedPrimeTimeTillEnd"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<bind name="fade" value="!(isCurrent) &amp;&amp; !(isUpcoming); 0.15; {alpha: 0, top: 20}; {alpha: 1, top: 0}"/>
			<block type="text">
				<style>
					<width value="100%f"/>
					<multiline value="false"/>
				</style>
				<bind name="class" value="textClass"/>
				<bind name="text" value="'IDS_PRIME_TIME_IS_OVER'"/>
			</block>
		</block>
	</block>
	<block className="ClanBattlesPrimeTimeSelectionNotes">
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'cbs_startTime'; ['clanCurrentSeasonEntity.timeOfBattleEvent.evChanged']; clanCurrentSeasonEntity.timeOfBattleEvent.startTime"/>
		<bind name="watchDH" value="'cbs_shipLevelMin'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.shipLevelMin"/>
		<bind name="watchDH" value="'cbs_shipLevelMax'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.shipLevelMax"/>
		<bind name="timeFormat" value="cbs_startTime; 'hh:mm'; 'localStartTime'; true"/>
		<bind name="timeFormat" value="cbs_startTime; 'hh:mm'; 'startTime'; false"/>
		<bind name="watch" value="'textClass'; _useWhiteColor ? '$TextDefault17NM' : '$TextDefault17NMTech'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<leading value="-2"/>
			</style>
			<bind name="instance" value="'TextWithAccent'; {	_text: tr('IDS_TIMEZONE_IS_LOCAL') + ' ', 
											_accentText: startTime_TimeZoneName + (localStartTime_TimeZone == '+0' ? '' : (' ' + localStartTime_TimeZone))
										}"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<style>
				<width value="100%"/>
				<leading value="-2"/>
				<alpha value="0.9"/>
				<marginTop value="16px"/>
			</style>
			<bind name="watch" value="'_superShipsOnly'; cbs_shipLevelMin == SC.Ships.SHIP_LEVELS.SUPER_SHIP &amp;&amp; cbs_shipLevelMax == SC.Ships.SHIP_LEVELS.SUPER_SHIP"/>
			<bind name="watch" value="'_superShipsInMax'; cbs_shipLevelMax == SC.Ships.SHIP_LEVELS.SUPER_SHIP"/>
			<bind name="watch" value="'_displayShipLevelMax'; (_superShipsInMax &amp;&amp; !_superShipsOnly) ? cbs_shipLevelMax - 1 : cbs_shipLevelMax"/>
			<bind name="watch" value="'_postfix'; _superShipsInMax ? '_AND_SUPERSHIPS' : ''"/>
			<bind name="watch" value="'shipsRestrictionString'; subst(	cbs_shipLevelMin != 0 &amp;&amp; _displayShipLevelMax != 0 &amp;&amp;
										cbs_shipLevelMin == _displayShipLevelMax			?	'IDS_CLAN_BATTLES' + '_ALLOWED_SHIPS_SINGLE' + (	_superShipsOnly	? '_SUPERSHIPS' :
																																			_superShipsInMax	? '_AND_SUPERSHIPS'
																																										: '') :
										cbs_shipLevelMin != 0 &amp;&amp; _displayShipLevelMax != 0	?	'IDS_CLAN_BATTLES' + '_ALLOWED_SHIPS_FROM_TO' + _postfix :
										_displayShipLevelMax != 0							?	'IDS_CLAN_BATTLES' + '_ALLOWED_SHIPS_TO' + _postfix :
										cbs_shipLevelMin != 0											?	'IDS_CLAN_BATTLES' + '_ALLOWED_SHIPS_FROM'
																									:	'IDS_CLAN_BATTLES' + '_ALLOWED_SHIPS_ALL', [], 0 &gt; 0	? {	levelMin: toRomanShipLevels(cbs_shipLevelMin),
																																							levelMax: toRomanShipLevels(_displayShipLevelMax),
																																							teamSize: 0}
																																						: {	levelMin: toRomanShipLevels(cbs_shipLevelMin),
																																							levelMax: toRomanShipLevels(_displayShipLevelMax)})"/>
			<bind name="text" value="shipsRestrictionString"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.5"/>
				<marginTop value="16px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-2"/>
						<marginTop value="16px"/>
					</style>
					<bind name="text" value="'IDS_CLAN_BATTLES_SCHEDULE_NOTES_1'"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-2"/>
						<marginTop value="16px"/>
					</style>
					<bind name="text" value="'IDS_CLAN_BATTLES_SCHEDULE_NOTES_2'"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-2"/>
						<marginTop value="16px"/>
					</style>
					<bind name="text" value="'IDS_CLAN_BATTLES_SCHEDULE_NOTES_3'"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-2"/>
						<marginTop value="16px"/>
					</style>
					<bind name="text" value="'IDS_CLAN_BATTLES_SCHEDULE_NOTES_4'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="TextWithAccent">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-3"/>
			</style>
			<bind name="class" value="_textClass ? _textClass : '$TextDefault17NM'"/>
			<style>
				<styleSheet value="h2
				{
					font-family: $WWSDefaultFontBold;
				}"/>
			</style>
			<bind name="text" value="'&lt;body&gt;' + _text + '&lt;h2&gt;' + _accentText + '&lt;/h2&gt;&lt;/body&gt;'"/>
		</block>
	</block>
	<block className="PrimeTimeStereotype">
		<bind name="entityDH" value="'primeTimeEntity'; _entityId"/>
		<bind name="watchDH" value="'primeTimeStartTime'; 	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeStartTime"/>
		<bind name="watchDH" value="'primeTimeFinishTime'; 	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift'; 		['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.daylightshift"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'isActivePrimeTime'; (primeTimeStartTime - daylightshift &lt;= serverTime) &amp;&amp; (serverTime &lt;= primeTimeFinishTime - daylightshift)"/>
		<bind name="watchDH" value="'primeTimeRealm'; 		['primeTimeEntity.clanBattlePrimeTime.evChanged']; primeTimeEntity.clanBattlePrimeTime.realm"/>
		<bind name="watchDH" value="'primeTimeIsChosen'; 	['primeTimeEntity.clanBattlePrimeTime.evChanged']; primeTimeEntity.clanBattlePrimeTime.isChosen"/>
		<bind name="watchDH" value="'primeTimeIsFixed'; 		['primeTimeEntity.clanBattlePrimeTime.evChanged']; primeTimeEntity.clanBattlePrimeTime.isFixed"/>
		<bind name="watch" value="'textSize'; _textSize ? _textSize : _isBig ? '$FontSizeLarge' : '$None'"/>
		<bind name="watch" value="'textColorClass'; _textColor ? _textColor : '$FontColorGolden'"/>
		<bind name="timeFormat" value="primeTimeFinishTime - daylightshift; 'hh:mm'; 'localFinishTime'; true"/>
		<bind name="timeFormat" value="primeTimeStartTime - daylightshift; 'hh:mm'; 'localStartTime'; true"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="watch" value="'isGlobal'; currentRegion != 'RU'"/>
		<bind name="watch" value="'realm'; ' / ' + tr('IDS_REALM_NO_TRANSLATE_' + toUpperCase(primeTimeRealm))"/>
		<style>
			<width value="100%f"/>
		</style>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<block type="text">
				<style>
					<multiline value="false"/>
				</style>
				<styleClass value="$TextDefaultNM"/>
				<bind name="class" value="textSize"/>
				<bind name="class" value="_isBold ? '$Bold' : '$None'"/>
				<bind name="class" value="textColorClass"/>
				<bind name="text" value="localStartTime + '–' + localFinishTime + (isGlobal ? realm : '')"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ClanBattlePrimeTimesTableHeader">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<style>
				<width value="155px"/>
				<marginLeft value="16px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="'IDS_CLAN_BATTLES_SCHEDULE_DAY'"/>
		</block>
		<block type="text">
			<style>
				<width value="250px"/>
				<marginLeft value="16"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="'IDS_CLAN_BATTLES_SCHEDULE_HEADER'"/>
		</block>
		<block type="text">
			<style>
				<width value="275px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="'IDS_PRIME_TIME_STATUS'"/>
		</block>
	</block>

	<!-- common_carousel -->
	<block className="CarouselBlockWithScroll">
		<bind name="dispatch" value="'layoutChanged';	'evScrollToIndex'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0"/>
		<bind name="dispatch" value="'addedToStage';		'evScrollToIndex'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0"/>
		<styleClass value="$MiddleAligned"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%f"/>
			<height value="100%"/>
		</style>
		<block>
			<bind name="visible" value="_isScrollNeeded"/>
			<style>
				<width value="24px"/>
				<height value="100%"/>
				<align value="left|middle"/>
			</style>
			<block className="button_slide_left" type="native">
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="event" value="'click'; scrollLeftByOneUnit"/>
				<bind name="name" value="_leftScrollName ? _leftScrollName : 'buttonCarouselLeft'"/>
			</block>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbCarouselController'"/>
			<bind name="event" value="'evScrollToIndex'; scrollToIndex; currentSelectedIndex"/>
			<bind name="scrollToIndex!" value="currentSelectedIndex"/>
			<style>
				<width value="100%f"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
				<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
				<itemWidth value="416"/>
				<itemHeight value="440"/>
				<overflow value="scroll"/>
			</style>
			<bind name="style" value="'height'; _height"/>
			<bind name="style" value="'itemWidth'; _itemWidth"/>
			<bind name="style" value="'wheelScrollSpeed'; _wheelScrollSpeed"/>
			<bind name="generator" value="_repeatCollection; _repeatElement; {	currentSelectedIndex: currentSelectedIndex,
																_itemWidth: _itemWidth	}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isScrollNeeded"/>
			<style>
				<width value="24px"/>
				<height value="100%"/>
				<align value="right|middle"/>
			</style>
			<block className="button_slide_right" type="native">
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="name" value="_rightScrollName ? _rightScrollName : 'buttonCarouselRight'"/>
				<bind name="event" value="'click'; scrollRightByOneUnit"/>
			</block>
		</block>
	</block>

	<!-- common_elements -->
	<block className="DropdownInfotip">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<block className="InfotipBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="InfotipPanelBg">
				<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
				<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
				<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
				<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<style>
					<margin value="-2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<background9Slice value="[3]"/>
					</style>
					<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<margin value="-2px"/>
				</style>
				<block className="InfotipPins">
					<styleClass value="$FullsizeAbsolute"/>
					<params>
						<param name="name" value="pinContainer"/>
					</params>
					<block>
						<params>
							<param name="name" value="pinTop"/>
						</params>
						<style>
							<position value="absolute"/>
							<top value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinBottom"/>
						</params>
						<style>
							<position value="absolute"/>
							<bottom value="-22px"/>
						</style>
						<bind name="scaleY" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinLeft"/>
						</params>
						<style>
							<position value="absolute"/>
							<left value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinRight"/>
						</params>
						<style>
							<position value="absolute"/>
							<right value="-10px"/>
						</style>
						<bind name="scaleX" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="instance" value="_dropdownContentElement; { _menuScope: _menuScope }"/>
		</block>
	</block>
	<block className="InstructionParagraph">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 220"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="InstructionMultiParagraph">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block className="icon_instruction" type="native">
			<bind name="gotoAndStop!" value="_type"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-3px"/>
			</style>
			<bind name="repeat" value="_instructionArray; 'InstructionParagraph'"/>
		</block>
	</block>
	<block className="InstructionWarning">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_warning_orange" type="native"/>
		<block type="text">
			<style>
				<marginTop value="-4px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<styleClass value="$WarningTextOrange"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="InstructionRestricion">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_restrict_red" type="native"/>
		<block type="text">
			<style>
				<marginTop value="-3px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<styleClass value="$WarningTextRed"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="MouseInstruction">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="_type!='no_icon'"/>
			<block className="icon_mouse" type="native">
				<bind name="gotoAndStop!" value="_type"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'marginLeft'; (_type=='no_icon') ? '0px' : '4px'"/>
			<style>
				<marginTop value="-2px"/>
			</style>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="MouseInstructionRepeater">
		<bind name="style" value="'marginBottom'; $index != _lastIndex ? '6px' : '0px'"/>
		<bind name="instance" value="'MouseInstruction'; _type == 'warning' || _type == 'restriction'	? null
																						: { _type: _type, _instructionText: _instructionText,
																							_maxWidth: _maxWidth, _leading: _leading}"/>
		<bind name="instance" value="'InstructionWarning'; _type == 'warning' ? {_instructionText: _instructionText, _maxWidth: _maxWidth, _leading: _leading} : null"/>
		<bind name="instance" value="'InstructionRestricion'; _type == 'restriction' ? {_instructionText: _instructionText, _maxWidth: _maxWidth, _leading: _leading} : null"/>
	</block>
	<block className="CheckedLine">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_check" type="native">
			<style>
				<marginLeft value="2px"/>
				<marginTop value="8px"/>
			</style>
			<bind name="visible" value="!_isCheckMarkHidden"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<width value="288px"/>
				<marginTop value="-2px"/>
				<multiline value="false"/>
			</style>
			<bind name="class" value="'$FontColorGolden'"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'marginLeft'; _isCheckMarkHidden ? '0' : '5px'"/>
			<bind name="text" value="_checkedLineText"/>
		</block>
	</block>
	<block className="CheckedLineRepeater">
		<bind name="style" value="'marginBottom'; $index != _lastIndex ? '6px' : '-2px'"/>
		<bind name="instance" value="'CheckedLine'; { _isCheckMarkHidden: _isCheckMarkHidden, _checkedLineText: _checkedLineText, _maxWidth: _maxWidth}"/>
	</block>
	<block className="InstructionBigTech">
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<style>
				<textAlign value="center"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 500"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="EmptyStatusParagraph">
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="_sizeClass ? _sizeClass : '$FontSizeLarge'"/>
			<bind name="class" value="'$FontColorWhite'"/>
			<style>
				<textAlign value="center"/>
				<alpha value="0.45"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 250"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ContextMenuBg">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
	</block>
	<block className="DefaultMenuItemBackground">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="transition" value="mouseDown; 0.05; {alpha: 1}; {alpha: 0.7}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 1}; {alpha: 1.75}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="transition" value="_isSelected || rollOver; 0.05; {alpha: 0}; {alpha: 0.7}"/>
				<style>
					<background9Slice value="[3,3]"/>
				</style>
				<bind name="style" value="'backgroundImage'; _isDisabled	? '' : 'url:../service_kit/panel_backgrounds/menu_item_panel.png'"/>
			</block>
		</block>
	</block>
	<block className="MenuItemInstance">
		<styleClass value="$Fullsize"/>
		<style>
			<align value="middle"/>
		</style>
		<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="198px"/>
				<marginLeft value="8px"/>
				<marginRight value="8px"/>
			</style>
			<bind name="text" value="_titleIds"/>
			<bind name="style" value="'noTranslate'; _isNoTranslate"/>
			<bind name="name" value="'menu_item_' + _titleIds"/>
		</block>
	</block>
	<block className="ResizeFrame">
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!(restrict.up)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP'"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="6px"/>
				<top value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_top"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN'"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="6px"/>
				<bottom value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_bottom"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.left)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="6px"/>
				<height value="100%"/>
				<left value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.right)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="6px"/>
				<height value="100%"/>
				<right value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_right"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.up || restrict.left)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<top value="-5px"/>
				<left value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_top_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.up || restrict.right)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_UP_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<top value="-5px"/>
				<right value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_top_right"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down || restrict.left)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<bottom value="-5px"/>
				<left value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_bottom_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down || restrict.right)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_DOWN_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<bottom value="-5px"/>
				<right value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_bottom_right"/>
			</params>
		</block>
	</block>
	<block className="WarningMessage">
		<bind name="appear" value="'addedToStage'; 0.15; _delay; {alpha: 0, top: _startTop ? _startTop : 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<bind name="var" value="{errorStringsToShowSupportLinkFor: [
		tr('IDS_ACCOUNT_ERROR_ALL_SPA_LOGIN_ALREADY_TAKEN')
	]}"/>
		<block type="text">
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 280"/>
			<bind name="class" value="_highWarning ? '$WarningTextRed' : '$WarningTextOrange'"/>
			<style>
				<textAlign value="center"/>
			</style>
			<bind name="text" value="_text"/>
		</block>
		<block>
			<bind name="visible" value="errorStringsToShowSupportLinkFor.indexOf(_text) &gt; -1"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="6px"/>
			</style>
			<bind name="instance" value="'LinkText'; errorStringsToShowSupportLinkFor.indexOf(_text) &gt; -1 	? {
																								_label: 'IDS_LINK_SUPPORT', 
																								_urlIdent: SC.Ui_windows.GUI_URL.SUPPORT,
																								_tooltipText: 'IDS_LINK_SUPPORT_HINT', 
																								_name: 'ButtonSupport'} 
																							: null"/>
		</block>
	</block>
	<block className="WrongTextInputNotification">
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: _startTop ? _startTop : 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
			<marginRight value="-1px"/>
			<marginLeft value="-1px"/>
		</style>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<marginTop value="1px"/>
				<marginBottom value="0px"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<right value="9"/>
				<top value="7"/>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'CloseButton'; _showCloseBtn ? { _event: 'hideWrongMessageEv' } : null"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="7px"/>
			</style>
			<bind name="instance" value="'WarningMessage'; true	? { _delay: 0.07, _startTop: _startTop, _maxWidth: _maxWidth, _text: _text}
												: null"/>
		</block>
		<bind name="dispatch" value="'click'; 'hideWrongMessageEv'; {}"/>
	</block>
	<block className="MultiParagraphHelpTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="330px"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '330px'"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="watch" value="'iconType'; _iconType ? _iconType : 'question'"/>
			<block className="icon_question_mark" type="native">
				<bind name="visible" value="iconType == 'question'"/>
				<style>
					<marginRight value="6px"/>
					<marginTop value="4px"/>
				</style>
			</block>
			<block className="icon_info_big" type="native">
				<bind name="visible" value="iconType == 'info'"/>
				<style>
					<marginRight value="6px"/>
					<marginTop value="4px"/>
				</style>
			</block>
			<block>
				<style>
					<marginTop value="3px"/>
				</style>
				<bind name="visible" value="iconType == 'ship' &amp;&amp; _shipType != 'premiumShip'"/>
				<bind name="instance" value="'ShipIcon'; {_shipType: _shipType}"/>
			</block>
			<block type="text">
				<style>
					<top value="1px"/>
				</style>
				<bind name="style" value="'maxWidth'; _width ? _width - 60 : 270"/>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="class" value="_shipType == 'premiumShip' ? '$FontColorGolden' : '$FontColorWhite'"/>
				<bind name="text" value="_tooltipHeader"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block>
				<style>
					<marginLeft value="12px"/>
					<marginRight value="12px"/>
					<marginTop value="9px"/>
					<marginBottom value="3px"/>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_multiParagraphArray; 'RepeatParagraphItem'; {_maxWidth: _width - 24}"/>
			</block>
		</block>
	</block>
	<block className="RepeatParagraphItem">
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '6px'"/>
		<bind name="class" value="_middleAligned ? '$MiddleAligned' : ''"/>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="_class"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'textAlign'; _textAlign ? _textAlign : 'left'"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 300"/>
			<bind name="name" value="'repeatParagraphText'"/>
			<bind name="substitute" value="_substitute.imageOffset ? _substitute.imageOffset : 0;
						  _substitute.map ? _substitute.map : {};
						  (_toUpperCase ? toUpperCase(tr(_paragraphText)) : _paragraphText)"/>
		</block>
	</block>
	<block className="RepeatParagraphItemNM">
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '16px'"/>
		<bind name="class" value="_middleAligned ? '$MiddleAligned' : ''"/>
		<bind name="watch" value="'textItem'; _isTextInValue ? $value : _paragraphText"/>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<bind name="class" value="_class"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'textAlign'; _textAlign ? _textAlign : 'left'"/>
			<bind name="style" value="'maxWidth'; _maxWidth	? _maxWidth :
									_width	? 3000
											: 300"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'alpha'; _alpha ? _alpha : 1"/>
			<bind name="substitute" value="_substitute.imageOffset ? _substitute.imageOffset : 0;
							_substitute.map ? _substitute.map : {}; (_toUpperCase ? toUpperCase(tr(textItem)) : textItem)"/>
		</block>
	</block>
	<block className="BannerButtonInstance">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="transition" value="rollOver; 0.07; {alpha: 0.85}; {alpha: 0.95}"/>
		<style>
			<width value="217px"/>
			<height value="60px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="name" value="_input"/>
		<bind name="input"/>
		<bind name="action" value="'click'; _action ? _action : null"/>
		<block className="button_infopanel_no_label" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginRight value="8px"/>
				<marginLeft value="12px"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="37px"/>
					<height value="100%"/>
				</style>
				<block>
					<bind name="style" value="'width'; _iconSize"/>
					<bind name="style" value="'height'; _iconSize"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$MiddleAligned"/>
					<bind name="style" value="'backgroundImage'; _iconUrl"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginLeft value="8px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-3"/>
						<hitTest value="false"/>
						<alpha value="0.85"/>
					</style>
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="text" value="_label"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipIcon">
		<block className="ShipIcon" type="ublock">
			<bind name="build!" value="{ _shipType:				_shipType,
						_isSpecial:				_isSpecial				? _isSpecial			: false,
						_isFarming:				_isFarming				? _isFarming			: false,
						_isElite:				_isElite				? _isElite				: false,
						_isEnemy:				_isEnemy				? _isEnemy				: false,
						_isKilled:				_isKilled				? _isKilled				: false,
						_isWhite:				_isWhite				? _isWhite				: false,
						_isDivision:			_isDivision				? _isDivision			: false,
						_isTeamKiller:			_isTeamKiller			? _isTeamKiller			: false,
						_isAlly:				_isAlly					? _isAlly				: false,
						_hideUpgradableStatus:	_hideUpgradableStatus	? _hideUpgradableStatus	: false,
						_iconSize:				_iconSize				? _iconSize				: 27 }"/>
		</block>
	</block>
	<block className="ShipTypeWithText">
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<marginTop value="-7px"/>
				<marginBottom value="-10px"/>
				<marginLeft value="-5px"/>
			</style>
			<bind name="alpha" value="_textAlpha"/>
			<bind name="instance" value="'ShipIcon'; { _shipType: _shipType }"/>
		</block>
		<block type="text">
			<bind name="class" value="_textClass || '$TextDefaultNM'"/>
			<bind name="alpha" value="_textAlpha || 0.75"/>
			<bind name="text" value="tr('IDS_' + _shipType)"/>
		</block>
	</block>
	<block className="ShipTitleWithIconAndLevel">
		<style>
			<marginLeft value="6px"/>
			<marginRight value="3px"/>
			<marginTop value="6px"/>
			<marginBottom value="8px"/>
		</style>
		<bind name="style" value="'marginTop'; _size == 'medium' ? '7px' : '6px'"/>
		<bind name="instance" value="'ShipLineItemNM';	 {	_shipId: _shipID,
											_fontClass: (_size == 'medium'	?	'$TextDefaultBold17NM'
																			:	'$TextDefaultBold19NM')
										}"/>
	</block>
	<block className="CharCounter">
		<bind name="transition" value="_string.length &gt; 0; 0.15; {alpha: 0, top:10}; {alpha: 1, top:0}; {alpha: 0, top:10}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; 0"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_TOOLTIP_CHARS_LEFT'}"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_string.length &gt; _maxChars ? '$FontColorOrange' : '$FontColorDefault'"/>
			<bind name="style" value="'alpha'; _string.length &gt; _maxChars ? 1 : 0.6"/>
			<bind name="text" value="_maxChars - _string.length"/>
		</block>
	</block>
	<block className="BusyIndicator">
		<bind name="fade" value="_showBusyIndicator; 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0.3"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<block className="indicator_busy_small" type="native"/>
		</block>
		<block type="text">
			<bind name="visible" value="_label.length &gt; 0"/>
			<styleClass value="$TextDefaultTech"/>
			<bind name="class" value="'$Bold'"/>
			<style>
				<marginLeft value="6px"/>
				<marginTop value="-2px"/>
			</style>
			<bind name="text" value="toUpperCase(tr(_label))"/>
		</block>
	</block>
	<block className="FormationPlayerIcon">
		<bind name="var" value="{formationType: 'division'}"/>
		<bind name="watch" value="'postfix'; isOtherDivision ? '_other_division' : ''"/>
		<bind name="watch" value="'readySuffix'; isReady ? isCommander ? '' : 'ready_' : 'not_ready_'"/>
		<style>
			<width value="15px"/>
		</style>
		<block className="formation_player_status" type="native">
			<style>
				<marginTop value="3px"/>
			</style>
			<bind name="gotoAndStop!" value="_isEmptySlot	?	('empty_slot_'							+ formationType) :
							isInBattle		?	('player_in_battle_'					+ formationType + postfix) :
							isCommander		?	('commander_'			+ readySuffix	+ formationType + postfix) :
							!isMercenary	?	('player_'				+ readySuffix	+ formationType + postfix)
											:	'mercenary_'			+ readySuffix	+ formationType"/>
		</block>
	</block>
	<block className="BackButton">
		<style>
			<height value="30px"/>
		</style>
		<block className="button_dock" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="name" value="btn_back"/>
			</params>
			<bind name="input"/>
			<bind name="dispatch" value="'buttonClick'; _event	 ? _event  : null; _eventData	 ? _eventData : {}"/>
			<bind name="action" value="'buttonClick'; _action	 ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<params>
				<param name="focusable" value="false"/>
			</params>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<hitTest value="false"/>
					<alpha value="0.75"/>
					<marginLeft value="6px"/>
					<width value="14px"/>
					<height value="14px"/>
					<backgroundImage value="url:../service_kit/buttons/icon_navigate/left.png"/>
				</style>
			</block>
			<block>
				<bind name="name" value="_name ? _name : '' "/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="5px"/>
					<marginRight value="10px"/>
				</style>
				<block>
					<style>
						<marginTop value="-3px"/>
					</style>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.5"/>
							<top value="1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.3"/>
							<top value="-1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.3"/>
							<left value="1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.3"/>
							<left value="-1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<style>
							<alpha value="0.85"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PlayerNameAndClanTag">
		<bind name="watch" value="'clanTagColor'; ('0xff' + _clanTagColor)"/>
		<bind name="watch" value="'haveClanTag'; _clanTag != null &amp;&amp;
								_clanTag != ''"/>
		<bind name="watch" value="'isColoredClanTag'; (haveClanTag &amp;&amp; _clanTagColor != null)"/>
		<bind name="watch" value="'playerName'; 	isColoredClanTag 	?	_playerName :
								haveClanTag			?	('[' + _clanTag + ']' + _playerName)
													: _playerName"/>
		<bind name="watch" value="'fontColor'; 	_isAccountButton				?	_ctkStatus					? '$FontColorCompareNegative' :
																	_isAbuser					? '$FontColorTeamkiller' :
																	_isPremiumAccount			? '$FontColorGolden'
																								: '$FontColorBlueish':
								_isSelf							?	_isAbuser					? '$FontColorTeamkiller'
																								: '$FontColorGolden' :
								!_isDead 						?	_isInSameDivision			? '$FontColorGolden' :
																	_isAbuser					? '$FontColorTeamkiller'
																								: '$FontColorWhite' :
								_isInPostBattle	&amp;&amp; _isAbuser	?								'$FontColorTeamkiller'
																:	'$FontColorAlmostBlack' "/>
		<style>
			<hitTest value="false"/>
			<flow value="horizontal"/>
			<width value="100%f"/>
		</style>
		<block type="text">
			<style>
				<marginLeft value="3px"/>
			</style>
			<bind name="visible" value="isColoredClanTag"/>
			<style>
				<multiline value="false"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'fontSize'; _fontSize ? _fontSize : 15"/>
			<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
			<bind name="style" value="'textColor'; clanTagColor"/>
			<bind name="text" value="tr('[' + _clanTag + ']')"/>
		</block>
		<block type="text">
			<style>
				<marginLeft value="3px"/>
				<multiline value="false"/>
				<width value="100%f"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'fontSize'; _fontSize ? _fontSize : 15"/>
			<bind name="style" value="'noTranslate'; _isSuspended ? false : !_isBot"/>
			<bind name="class" value="_isSelf 	? '$Bold' : '$None'"/>
			<bind name="class" value="(_isDead &amp;&amp; !_isSelf &amp;&amp; !_isAbuser ? '$FontDropShadowWhite' : '$None')"/>
			<bind name="class" value="fontColor"/>
			<bind name="text" value="playerName"/>
		</block>
	</block>
	<block className="HotkeyWithText">
		<bind name="dispatch" value="'click'; _event	? _event  	: null; _eventData	 	? _eventData 	: {}"/>
		<bind name="action" value="'click'; _action	? _action 	: null; _actionParams 	? _actionParams : {}"/>
		<bind name="request" value="'click'; _request 	? _request 	: null; _requestParams 	? _requestParams: {}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? { _text: _tooltipText } : null; TooltipBehaviour.simple"/>
		<bind name="soundSet" value="'default_button'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_isDisabled != true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_isDisabled != true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<style>
			<backgroundImage value="url:../service_kit/buttons/hotkey_background.png"/>
			<background9Slice value="[5,13]"/>
		</style>
		<block type="text">
			<style>
				<marginLeft value="3px"/>
				<marginRight value="3px"/>
				<marginTop value="-1px"/>
				<marginBottom value="-1px"/>
			</style>
			<styleClass value="$BlackLabel"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="CloseButton">
		<bind name="dispatch" value="'click'; _event		? _event  		: null; _eventData			? _eventData 		: {}"/>
		<bind name="action" value="'click'; _action		? _action 		: null; _actionParams		? _actionParams 	: {}"/>
		<bind name="request" value="'click'; _request 		? _request 		: null; _requestParams		? _requestParams	: {}"/>
		<bind name="directEvent" value="'click'; _directEvent	? _directEvent 	: null; _directEventParams	? _directEventParams: {}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? { _text: _tooltipText } : null; TooltipBehaviour.simple"/>
		<bind name="name" value="_name"/>
		<bind name="soundSet" value="'default_button'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_isDisabled != true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_isDisabled != true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<style>
			<width value="12px"/>
			<height value="12px"/>
			<backgroundImage value="url:../service_kit/buttons/button_close.png"/>
			<margin value="-1px"/>
		</style>
	</block>
	<block className="NavigationButton">
		<style>
			<marginBottom value="1px"/>
		</style>
		<block className="button_navigation_small" type="native">
			<bind name="name" value="_name"/>
			<bind name="label" value="_label"/>
			<bind name="selected" value="_selectedIndex == $index"/>
			<bind name="dispatch" value="'click'; 'evClicked'; { selectedIndex: $index }"/>
		</block>
	</block>
	<block className="RewardItemWithStamp">
		<block>
			<style>
				<width value="80px"/>
				<height value="80px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; _backgroundImage"/>
			<bind name="scaleX" value="_scale ? _scale : 1"/>
			<bind name="scaleY" value="_scale ? _scale : 1"/>
			<bind name="ubScaleX" value="_scale ? _scale : 1"/>
			<bind name="ubScaleY" value="_scale ? _scale : 1"/>
		</block>
		<block>
			<bind name="scaleX" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="scaleY" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="ubScaleX" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="ubScaleY" value="_scale ? (_scale - 0.14) : 0.86"/>
			<style>
				<position value="absolute"/>
				<alpha value="0.9"/>
				<hitTest value="false"/>
				<top value="46%"/>
				<left value="42%"/>
			</style>
			<block className="icon_issued" type="native">
				<bind name="gotoAndStop!" value="_issued	? 'issued' : 'not_issued'"/>
				<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
				<bind name="rotation" value="-2"/>
			</block>
		</block>
	</block>
	<block className="ColorTransformPicker">
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'redMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'greenMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'blueMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'alphaMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'redOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'greenOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'blueOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'alphaOffset'}"/>
	</block>
	<block className="ColorTransformSlider">
		<style>
			<marginTop value="20px"/>
		</style>
		<block>
			<bind name="dispatch" value="'value'+varChanged; 'colorTransformChanged'; [_name, value]"/>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<maxHeight value="500"/>
					<backgroundColor value="0x80000000"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<margin value="4px"/>
						<maxWidth value="600"/>
					</style>
					<bind name="text" value="'_name: ' + (_name)"/>
				</block>
			</block>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<maxHeight value="500"/>
					<backgroundColor value="0x80000000"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<margin value="4px"/>
						<maxWidth value="600"/>
					</style>
					<bind name="text" value="'value: ' + (value)"/>
				</block>
			</block>
			<block>
				<bind name="mc" value="'slider_default'; ['valueChange']; ['value']; {maximum:_maximum, minimum:_minimum, step:_step, value:_value}"/>
			</block>
		</block>
	</block>
	<block className="StatusLine">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block>
			<bind name="visible" value="_unifiedStatus &amp;&amp; _unifiedStatus != SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
			<style>
				<width value="19px"/>
				<height value="19px"/>
				<marginTop value="-4px"/>
				<marginLeft value="-3px"/>
				<marginBottom value="-7px"/>
				<marginRight value="5px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/unified_status_icons/icon_' + _unifiedStatus + '.png'"/>
		</block>
		<block type="text">
			<params>
				<param name="name" value="'statusLine'"/>
			</params>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 9999"/>
			<bind name="class" value="_textClass ? _textClass : '$TextDefaultNM'"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ImageItemsCounter">
		<bind name="visible" value="_amount"/>
		<style>
			<align value="center"/>
			<minWidth value="19"/>
			<paddingLeft value="5px"/>
			<paddingRight value="4px"/>
			<paddingTop value="4px"/>
			<paddingBottom value="4px"/>
			<background9Slice value="[4,4]"/>
			<backgroundImage value="url:../service_kit/panel_backgrounds/counter.png"/>
		</style>
		<block type="text">
			<style>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="text" value="format(_amount, -1)"/>
		</block>
	</block>
	<block className="ImageTextCounter">
		<style>
			<align value="center"/>
			<minWidth value="19"/>
			<paddingLeft value="5px"/>
			<paddingRight value="4px"/>
			<paddingTop value="4px"/>
			<paddingBottom value="4px"/>
			<backgroundImage value="url:../service_kit/panel_backgrounds/counter.png"/>
			<background9Slice value="[4,4]"/>
		</style>
		<bind name="watch" value="'textColor'; _textColor ? _textColor : SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<block type="text">
			<bind name="alpha" value="textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.9 : 1"/>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="style" value="'textColor';	textColor"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ImageCurrencyCounter">
		<style>
			<align value="center"/>
			<minWidth value="19"/>
			<paddingLeft value="5px"/>
			<paddingRight value="4px"/>
			<paddingTop value="4px"/>
			<paddingBottom value="4px"/>
			<background9Slice value="[4,4]"/>
		</style>
		<bind name="watch" value="'textColor';	priceInfo.currency == SC.Common.CURRENCIES.GOLD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
								priceInfo.currency == SC.Common.CURRENCIES.FREE_XP	? SC.Ui_styles.SERVICE_COLORS.LIGHT_GREEN :
								priceInfo.currency == SC.Common.CURRENCIES.ELITE_XP	? SC.Ui_styles.SERVICE_COLORS.LIGHT_BLUE
																					: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="style" value="'backgroundImage'; priceInfo.finalPrice &lt; 0	? 'url:../service_kit/panel_backgrounds/counter_negative.png'
																: 'url:../service_kit/panel_backgrounds/counter.png'"/>
		<block type="text">
			<bind name="alpha" value="textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.9 : 1"/>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="style" value="'textColor';	textColor"/>
			<bind name="text" value="format(priceInfo.finalPrice, -1)"/>
		</block>
	</block>
	<block className="ProgressParamsElement">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginRight value="4px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="text" value="_text"/>
		</block>
		<block type="text">
			<bind name="visible" value="_param_1"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="'( '"/>
		</block>
		<block type="text">
			<bind name="visible" value="_param_1"/>
			<styleClass value="$TextDefaultNM"/>
			<styleClass value="$FontColorGreen"/>
			<bind name="text" value="'+' + format(_param_1)"/>
		</block>
		<block type="text">
			<bind name="visible" value="_param_1"/>
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="' )'"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<marginLeft value="4px"/>
			</style>
			<bind name="text" value="format(_param_2)"/>
		</block>
	</block>
	<block className="TextInputWithCancel">
		<styleClass value="$Fullsize"/>
		<bind name="catch" value="'removedFromStage'; {textInput: ''}"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<block className="text_input_caps_enter" type="native">
					<bind name="name" value="'textFieldSearch'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? {_text: _tooltipText} : null"/>
					<bind name="style" value="'width'; _tfWidth ? _tfWidth : '270px'"/>
					<params>
						<param name="actAsButton" value="true"/>
						<param name="noTranslate" value="true"/>
					</params>
					<bind name="maxChars" value="_maxChars ? _maxChars : 32"/>
					<bind name="defaultText" value="defaultText"/>
					<bind name="var" value="{textInput: _currentText ? _currentText : _defaultInputValue}"/>
					<bind name="ubFocus" value="0; true; true; true"/>
					<bind name="restrict" value="restrict"/>
					<bind name="text" value="textInput"/>
					<bind name="sync" value="'text'; 'change'; 'textInput'"/>
					<bind name="dispatch" value="'change'; 'TextInputWithCancel.'+ onInputStrChangedEvent; {inputStr: textInput}"/>
					<bind name="dispatch" value="'textInputEnter'; 'TextInputWithCancel.' + onEnterEvent; {inputStr: textInput}"/>
					<block className="button_dock" type="native">
						<bind name="tooltip" value="'SimpleStatusTooltip'; _onEnterTooltipText ? {_text: _onEnterTooltipText} : null"/>
						<styleClass value="$TextInputEnterButton"/>
						<bind name="enabled" value="textInput.length &gt; 0"/>
						<bind name="dispatch" value="'buttonClick'; 'TextInputWithCancel.' + onEnterEvent; {inputStr: textInput}"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="8px"/>
				</style>
				<bind name="instance" value="'CloseButton'; {
				_event: 'TextInputWithCancel.' + onCancelEvent,
				_tooltipText: 'IDS_CANCEL'
			}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ComplexityLevel">
		<block className="ComplexityLevel" type="ublock">
			<bind name="build!" value="{	_complexityLevel: _complexityLevel,
						_maxComplexityLevel: _maxComplexityLevel,
						_size: _size}"/>
		</block>
	</block>
	<block className="CurrentXPLarge">
		<params>
			<param name="name" value="upgrade_tree_CurrentShipXP"/>
		</params>
		<block>
			<style>
				<marginLeft value="-3px"/>
			</style>
			<bind name="instance" value="'PriceTag'; {	priceInfo: {finalPrice: _exp, currency: SC.Common.CURRENCIES.XP},
										_medium: true} "/>
		</block>
		<block type="text">
			<style>
				<alpha value="0.75"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_label"/>
		</block>
	</block>
	<block className="StatusLineWithIcon">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_warning_orange" type="native">
			<bind name="style" value="'top'; _small	? '4' :
							_large	? '7'
									: '4'"/>
			<style>
				<marginRight value="2px"/>
			</style>
		</block>
		<block type="text">
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 264"/>
			<bind name="class" value="_large ? '$TextHeaderBigDefault' 
							:_small ? '$TextSecondary' : '$TextDefault'"/>
			<bind name="class" value="_positive ? '$FontColorGreen' : '$FontColorOrange'"/>
			<bind name="class" value="_bold ? '$Bold' : '$None'"/>
			<bind name="text" value="_text"/>
		</block>
	</block>

	<!-- container_with_rewards -->
	<block className="ContainerWithRewards">
		<bind name="watch" value="'rewardsLength'; _rewards.length"/>
		<bind name="watch" value="'itemsInRow'; _itemsInRow ? _itemsInRow : 6"/>
		<bind name="watch" value="'isRewardsALittel'; rewardsLength &lt; itemsInRow"/>
		<style>
			<width value="100%"/>
			<flow value="htile"/>
		</style>
		<bind name="style" value="'align'; _align ? _align : isRewardsALittel ? 'center' : 'left'"/>
		<bind name="repeat" value="_rewards; 'ModalRewardItemAdapter'; {_itemHeight: _itemHeight}"/>
	</block>
	<block className="ModalRewardItemAdapter">
		<bind name="entityDH" value="'rewardEntity'; $value"/>
		<bind name="watchDH" value="'params';	['rewardEntity.rewardComponent.evUpdate']; rewardEntity.rewardComponent.params"/>
		<bind name="watchDH" value="'reasons';	['rewardEntity.rewardComponent.evUpdate']; rewardEntity.rewardComponent.reasons"/>
		<bind name="watchDH" value="'amount';	['rewardEntity.rewardComponent.evUpdate']; rewardEntity.rewardComponent.amount"/>
		<bind name="watchDH" value="'name';		['rewardEntity.rewardComponent.evUpdate']; rewardEntity.rewardComponent.name"/>
		<bind name="watchDH" value="'subtype';	['rewardEntity.rewardComponent.evUpdate']; rewardEntity.rewardComponent.subtype"/>
		<bind name="watchDH" value="'type';		['rewardEntity.rewardComponent.evUpdate']; rewardEntity.rewardComponent.type"/>
		<bind name="watchDH" value="'id';		['rewardEntity.rewardComponent.evUpdate']; rewardEntity.rewardComponent.id"/>
		<style>
			<align value="center|middle"/>
			<minWidth value="160"/>
		</style>
		<bind name="style" value="'height'; _itemHeight ? _itemHeight + 'px' : '80px'"/>
		<bind name="instance" value="'RewardItem'; (rewardEntity.rewardComponent == null)	? null
																			: { isPRMP: true,
																				params: params,
																				reasons: reasons,
																				amount: amount,
																				name: name,
																				subtype: subtype,
																				type: type,
																				id: id,
																				_disableWarning: true
																			}"/>
	</block>

	<!-- costs -->
	<block className="CrAndGoldDeficit">
		<params>
			<param name="name" value="upgrade_tree_Credit_deficit"/>
		</params>
		<styleClass value="$InfoLineBoundaries"/>
		<style>
			<flow value="horizontal"/>
			<marginBottom value="5px"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_warning_red" type="native">
				<style>
					<marginRight value="2px"/>
				</style>
				<bind name="style" value="'marginTop'; _large ? '5px' : '0px'"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<default_text value="IDS_NOT_ENOUGH"/>
		</block>
		<block>
			<bind name="visible" value="_creditsDeficit &gt; 0"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<style>
					<marginTop value="2px"/>
				</style>
				<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: _creditsDeficit, currency: SC.Common.CURRENCIES.CREDITS }, _large: _large, _medium: _medium, _small: _small }"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_creditsDeficit &gt; 0 &amp;&amp; _goldDeficit &gt; 0"/>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	_large ? '$FontSizeHeader6':
							_medium ? '$FontSizeLarge' :
							_small ? '$FontSizeSmall' : '$None'"/>
				<bind name="class" value="_bold ? '$FontFamilyDefaultBold' : '$None'"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<style>
					<marginTop value="1px"/>
				</style>
				<default_text value="IDS_AND"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_goldDeficit &gt; 0"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<style>
					<marginTop value="2px"/>
				</style>
				<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: _goldDeficit, currency: SC.Common.CURRENCIES.GOLD }, _large: _large, _medium: _medium, _small: _small }"/>
			</block>
		</block>
	</block>

	<!-- crew_context_menu -->
	<block className="CrewMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'crewsSingleton'; ['dockEntity.crewData.evUpdate']; dockEntity.crewData"/>
		<bind name="watch" value="'canDisassignCrew'; crewsSingleton.freeBarracksSlots &gt; 0"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watch" value="'isDisabledBarracks';			!crew.canMove"/>
		<bind name="watch" value="'isDisabledCrewFire';			!crew.canDismiss"/>
		<bind name="watch" value="'isDisabledLearnSkills';		!crew.canLearnSkills"/>
		<bind name="watch" value="'isDisabledCrewLevelUp';		!crew.canLevelUp"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; crew.shipID"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; crew.shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'isLocked';		['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';	['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isInFormation"/>
		<bind name="watch" value="'isInAdaptation'; crewRetraining.isInAdaptation == true"/>
		<bind name="watch" value="'isCrewActionNoBlocked'; !isLocked &amp;&amp; !isInFormation"/>
		<bind name="watch" value="'isDisassignButtonEnabled'; isCrewActionNoBlocked &amp;&amp; !isDisabledBarracks &amp;&amp; canDisassignCrew"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; false ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(false) ? {} : null"/>
		</block>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<bind name="tooltip" value="'SimpleStatusTooltip';	isDisabledLearnSkills	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																			_text: 'IDS_CONTEXT_BUTTON_STATUS_CREW_HAS_RESTRICTION_ON_LEARN_SKILL' } :
												isInFormation			? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																			_text: 'IDS_HINT_CREW_INFO_UNAVAILABLE_DUE_IN_FORMATION' }
																		: null"/>
			<block className="dock_submenu_item" type="native">
				<bind name="enabled" value="!(isDisabledLearnSkills || isInFormation)"/>
				<bind name="request" value="'buttonClick'; 'openModalWindowCrewInfo'; { _crewId: _crewId }"/>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'alpha'; !(isDisabledLearnSkills || isInFormation) ? 1 : 0.5"/>
				<block type="text">
					<style>
						<position value="absolute"/>
					</style>
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<default_text value="IDS_CREW_PROFILE_INFO"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<bind name="visible" value="isInAdaptation"/>
			<bind name="tooltip" value="'SimpleStatusTooltip';	isInFormation					? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																					_text: 'IDS_RETRAINING_DISABLE_REASON_SHIP_IS_IN_FORMATION' } :
												isLocked						? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																					_text: 'IDS_RETRAINING_DISABLE_REASON_SHIP_IS_IN_BATTLE' } :
												crewRetraining.allTypesBlocked	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																					_text: 'IDS_NOT_ENOUGH_FUNDS' }
																				: null"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="request" value="'buttonClick'; 'openRetrainCrewWindow'; {	shipId: crew.shipID,
																				crewId: _crewId}"/>
				<bind name="enabled" value="!crewRetraining.allTypesBlocked &amp;&amp; !isLocked &amp;&amp; !isInFormation"/>
				<bind name="style" value="'alpha'; !crewRetraining.allTypesBlocked &amp;&amp; !isLocked &amp;&amp; !isInFormation ? 1 : 0.5"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="style" value="'alpha'; !crewRetraining.allTypesBlocked &amp;&amp; !isLocked &amp;&amp; !isInFormation ? 1 : 0.5"/>
				<default_text value="IDS_FINISH_RETRAINING_LOWER_CASE_BUTTON"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip';	isInFormation						? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																						_text: 'IDS_DISASSIGN_CREW_DENY_REASON_IN_FORMATION' } :
												isLocked							? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																						_text: 'IDS_DISASSIGN_CREW_DENY_REASON_IN_BATTLE' } :
												isDisabledBarracks					? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																						_text: 'IDS_CONTEXT_BUTTON_STATUS_CREW_HAS_RESTRICTION_ON_BARRACKS' } :
												!canDisassignCrew					? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																						_text: 'IDS_ASSIGN_NEW_CREW_DISABLE_REASON_FULL_BARRACKS' }
																					: null"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'hitTest'; !isDisassignButtonEnabled ? false : true"/>
				<bind name="style" value="'alpha'; !isDisassignButtonEnabled ? 0.5 : 1.0"/>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_CREW_TO_BARRACKS'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="name" value="'dismissCrew'"/>
				<bind name="action" value="'click'; canDisassignCrew ? 'disassignCrew' : null; {crewId: _crewId}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="crew.canDismiss"/>
			<bind name="tooltip" value="'SimpleStatusTooltip';	isInFormation									? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																									_text: 'IDS_FIRE_CREW_DENY_REASON_IN_FORMATION' } :
												isLocked										? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																									_text: 'IDS_FIRE_CREW_DENY_REASON_IN_BATTLE' } :
												isDisabledCrewFire || !isCrewActionNoBlocked	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																									_text: 'IDS_CREW_CAN_NOT_BE_DEMOBOLIZED' }
																								: null"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<bind name="name" value="'CrewFireButton'"/>
				<bind name="enabled" value="!isDisabledCrewFire &amp;&amp; isCrewActionNoBlocked"/>
				<bind name="request" value="'buttonClick'; 'openFireCrewWindow'; {crewId: _crewId}"/>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'alpha'; !isDisabledCrewFire &amp;&amp; isCrewActionNoBlocked ? 1 : 0.5"/>
				<block type="text">
					<style>
						<position value="absolute"/>
					</style>
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<default_text value="IDS_CREW_FIRE"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="!crew.isMaxLevel"/>
			<style>
				<width value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="watch" value="'fastTrainingDenyReasonStatus';	isInFormation	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																			_text: 'IDS_FAST_TRAINING_DISABLE_REASON_SHIP_IS_IN_FORMATION' } :
														isLocked		? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																			_text: 'IDS_FAST_TRAINING_DISABLE_REASON_SHIP_IS_IN_BATTLE' } :
														isInAdaptation	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																			_text: 'IDS_FAST_TRAINING_DISABLE_REASON_IN_ADAPTATION' } :
												isDisabledCrewLevelUp	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																			_text: 'IDS_CONTEXT_BUTTON_STATUS_CREW_HAS_RESTRICTION_ON_LEVEL_UP' } 
																		: null"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; fastTrainingDenyReasonStatus"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'hitTest'; !fastTrainingDenyReasonStatus &amp;&amp; !isDisabledCrewLevelUp"/>
				<bind name="style" value="'alpha'; 	!fastTrainingDenyReasonStatus &amp;&amp; !isDisabledCrewLevelUp ? 1 : 0.5"/>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_CREW_FAST_LEARNING'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="request" value="'click'; 'crewFastTraining'; { shipId: crew.shipID, crewID: _crewId }"/>
			</block>
		</block>
	</block>

	<!-- crew_elements -->
	<block className="CrewStereotypeWithName">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'CrewStereotype'; {	_crewId: _crewId,
											_shipClass: _shipClass,
											_hideSkillPoints: _hideSkillPoints,
											_size: _size}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'CrewNameWithIcon'; {	_crewId: _crewId,
												_isBig: _size != 0,
												_isRentIconHidden: _isRentIconHidden}"/>
		</block>
	</block>
	<block className="CrewStereotype">
		<block className="CrewStereotype" type="ublock">
			<bind name="build!" value="{	_crewId: _crewId ? _crewId : 0,
						_crewHistoryId: _crewHistoryId ? _crewHistoryId : 0,
						_shipClass: _shipClass ? _shipClass : '',
						_size: _size ? _size : 0,
						_showRentIcon: _showRentIcon ? _showRentIcon : false,
						_hideSkillPoints: _hideSkillPoints ? _hideSkillPoints : false,
						_isAnimated: _isAnimated ? _isAnimated : true }"/>
		</block>
	</block>
	<block className="RentIcon">
		<style>
			<width value="21px"/>
			<height value="21px"/>
		</style>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'rentTimeLeft'; _timeRent - serverTime"/>
		<bind name="style" value="'backgroundImage'; rentTimeLeft &gt; 86400 || _daysRent	? 'url:../service_kit/icons/icon_rent_white.png'
																				: 'url:../service_kit/icons/icon_rent_orange.png'"/>
	</block>
	<block className="CrewNameWithIcon">
		<bind name="primaryEntityDH" value="'crewEntity';	_crewId ? CC.crew : CC.crewHistoryInfo;
											_crewId ? _crewId : _crewHistoryId"/>
		<bind name="watchDH" value="'crew'; ['crewEntity.crew.evChanged']; _crewId	? crewEntity.crew
																	: crewEntity.crewHistoryInfo"/>
		<bind name="watchDH" value="'rankIDS'; ['crewEntity.crew.evLevelUp']; _crewId	? crewEntity.crew.rankIDS
																		: crewEntity.crewHistoryInfo.rankIDS"/>
		<bind name="watch" value="'classificationId'; crew.classificationId"/>
		<bind name="watchDH" value="'timeRent'; ['crewEntity.crew.evTimeRentChanged']; _crewId	? crewEntity.crew.timeRent
																				: crewEntity.crewHistoryInfo.rentUntil"/>
		<bind name="watch" value="'isCrewUnique'; classificationId == SC.Common.COMMANDER_CLASSIFICATIONS.UNIQUE"/>
		<bind name="watch" value="'isCrewElite'; classificationId == SC.Common.COMMANDER_CLASSIFICATIONS.ELITE"/>
		<bind name="watch" value="'isCrewAdvanced'; classificationId == SC.Common.COMMANDER_CLASSIFICATIONS.ADVANCED"/>
		<bind name="watch" value="'isSpecial';	isCrewUnique || isCrewElite || isCrewAdvanced"/>
		<bind name="watch" value="'iconName';	!isSpecial		? 'common.png' :
								isCrewUnique	? 'unique.png'
												: 'advanced.png'"/>
		<bind name="watch" value="'textColor'; 	!crew			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
								isCrewUnique	? SC.Ui_styles.SERVICE_COLORS.YELLOW
												: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'nameTextAlpha'; textColor == SC.Ui_styles.SERVICE_COLORS.WHITE	? 0.9
																					: 1"/>
		<bind name="watch" value="'rankTextAlpha'; textColor == SC.Ui_styles.SERVICE_COLORS.WHITE	? 0.75
																					: 1"/>
		<bind name="watch" value="'crewRank';	!crew			? null :
								crew.hasRank	? toUpperCase(rankIDS) :
								isCrewUnique	? 'IDS_UNIQUE_CREW_STATUS' :
								isCrewElite		? 'IDS_ELITE_CREW_STATUS' :
								isCrewAdvanced	? 'IDS_ADVANCED_CREW_STATUS'
												: 'IDS_SPECIAL_CREW_STATUS'"/>
		<bind name="watch" value="'crewName';	!crew	? tr('IDS_NO_CREW')
										: crew.fullName"/>
		<bind name="watch" value="'isRental'; (timeRent || crew.rentDuration) &amp;&amp; !_isRentIconHidden"/>
		<params>
			<param name="name" value="CrewName"/>
		</params>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="8px"/>
			</style>
			<bind name="style" value="'align'; _isCentred ? 'center' : 'none'"/>
			<bind name="style" value="'marginLeft'; _isTTX &amp;&amp; isSpecial ? '-20px' : 0"/>
			<block>
				<bind name="visible" value="isSpecial"/>
				<style>
					<width value="27px"/>
					<height value="27px"/>
					<marginLeft value="-9px"/>
					<marginBottom value="-10px"/>
				</style>
				<bind name="style" value="'marginTop'; _isBig ? '-6px' : '-8px'"/>
				<bind name="style" value="'marginRight'; _isTTX ? '2px' : '-4px'"/>
				<bind name="style" value="'backgroundImage'; 'url:../crew_commander/icons/' + iconName"/>
			</block>
			<block type="text">
				<bind name="name" value="'Commander_' + crewName"/>
				<bind name="class" value="_isBig ? '$TextDefaultBold21NM' : '$TextDefaultBold17NM'"/>
				<bind name="alpha" value="nameTextAlpha"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="style" value="'multiline'; _isTTX ? false : true"/>
				<style>
					<leading value="-4"/>
					<width value="100%f"/>
				</style>
				<bind name="text" value="crewName"/>
			</block>
			<block>
				<bind name="visible" value="isRental"/>
				<style>
					<width value="21px"/>
					<height value="21px"/>
					<marginBottom value="-7px"/>
					<marginLeft value="8px"/>
				</style>
				<bind name="style" value="'marginTop'; _isBig ? '-3px' : '-4px'"/>
				<bind name="instance" value="'RentIcon'; isRental ? {_timeRent: timeRent, _daysRent: crew.rentDuration} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!!crewRank"/>
			<bind name="transition" value="_hideRank; 0.09;	{alpha: 1,	ubScaleY: 1, scaleY: 1};
											{alpha: 0,	ubScaleY: 0, scaleY: 0};
											{alpha: 1,	ubScaleY: 1, scaleY: 1}"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'textColor';	textColor"/>
				<bind name="alpha" value="rankTextAlpha"/>
				<bind name="text" value="crewRank"/>
			</block>
		</block>
	</block>
	<block className="CrewSkillPoints">
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="primaryEntityDH" value="'skillTreeEntity'; CC.skillTree; str(_crewId + '_' + _shipClass)"/>
		<bind name="watchDH" value="'freeSkillPoints'; ['skillTreeEntity.skillTree.evFreeSkillPointsChanged']; skillTreeEntity != undefined	? skillTreeEntity.skillTree.freeSkillPoints
																															: crew.allSkillPoints"/>
		<bind name="instance" value="'CrewSkillPointsView'; {_allSkillPoints: crew.allSkillPoints, _freeSkillPoints: freeSkillPoints, _isBig: _isBig, _isMaxLevelCrew: crew.isMaxLevel, _isLockSkills: !crew.canLearnSkills}"/>
	</block>
	<block className="CrewSkillPointsView">
		<bind name="watch" value="'levelText';	!_isMaxLevelCrew	? _allSkillPoints :
								_isBig				? ('[el_left]' + _allSkillPoints + '[el_right]')
													: ('[el_left_sm]' + _allSkillPoints + '[el_right_sm]')"/>
		<bind name="watch" value="'substituteMap'; { '[el_left]':	'elite_wreath_left',
									'[el_right]':   'elite_wreath_right',
									'[el_left_sm]': 'elite_wreath_left_small',
									'[el_right_sm]':'elite_wreath_right_small'}"/>
		<bind name="sharedTooltip" value="'CrewSkillPointsTooltip'; {	_isMaxLevelCrew: _isMaxLevelCrew,
														_freeSkillPoints: _freeSkillPoints,
														_crewLevel: _allSkillPoints}"/>
		<block>
			<style>
				<align value="center"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/counter.png"/>
				<background9Slice value="[4,4]"/>
			</style>
			<bind name="style" value="'minWidth'; _isBig ? 32 : 24"/>
			<block type="text">
				<style>
					<alpha value="0.9"/>
					<marginLeft value="4px"/>
				</style>
				<bind name="style" value="'marginTop'; _isBig ? '6px' : '4px'"/>
				<bind name="style" value="'marginBottom'; _isBig ? '6px' : '4px'"/>
				<bind name="style" value="'marginRight'; _isMaxLevelCrew ? '2px' : '4px'"/>
				<bind name="class" value="_isBig ? '$TextDefaultBold21NM' : '$TextDefaultBold17NM'"/>
				<bind name="substitute" value="_isBig ? 7 : 6; substituteMap; levelText"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="style" value="'top'; _isBig ? '-19px' : '-16px'"/>
			<bind name="style" value="'right'; _isBig ? '-5px' : '-9px'"/>
			<bind name="child" value="	!_freeSkillPoints || _isLockSkills	? 0 :
						_isBig								? 1
															: 2; { _newContentCounter: _freeSkillPoints}; 'EmptyItem'; 'MarkerNewCounterBig'; 'MarkerNewCounter'"/>
		</block>
	</block>
	<block className="ShipWithLabel">
		<style>
			<width value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginRight value="12px"/>
				<marginTop value="12px"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_label"/>
		</block>
		<block>
			<bind name="visible" value="_shipId"/>
			<style>
				<marginTop value="12px"/>
			</style>
			<bind name="instance" value="'ShipLineItemNM'; _shipId	? { _shipId: _shipId, _withFlag: true}
													: null"/>
		</block>
	</block>
	<block className="CrewExperienceBar">
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watch" value="'isMaxLevelStatusVisible'; crew.isMaxLevel &amp;&amp; !crewRetraining.isInAdaptation"/>
		<bind name="watch" value="'showAdaptation'; !!crewRetraining.isInAdaptation"/>
		<bind name="watch" value="'curXpValue';	showAdaptation 	? crewRetraining.adaptationExperienceEarned
												: crew.experience"/>
		<bind name="watch" value="'maxXpValue';	showAdaptation 	? crewRetraining.adaptationExperiencePenalty
												: crew.experienceToRichNextLevel"/>
		<bind name="watch" value="'unifiedStatus'; showAdaptation	? SC.Ui_styles.UNIFIED_STATUS.ATTENTION
													: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'progressBarColor'; showAdaptation	? SC.Ui_styles.SERVICE_COLORS.ORANGE
													: SC.Ui_styles.SERVICE_COLORS.YELLOW"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="!isMaxLevelStatusVisible"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="4px"/>
				</style>
				<bind name="instance" value="'DefaultProgressBar';	{	_progress: curXpValue/maxXpValue,
														_color: progressBarColor}"/>
			</block>
			<block>
				<bind name="sharedTooltip" value="'CurrencyTooltip'; {	_currency: SC.Common.CURRENCIES.CREW_XP,
														_amount: curXpValue }"/>
				<bind name="instance" value="'DefaultDividedCounter';	{	_curValueTextClass: '$TextDefaultNM',
															_curValue: curXpValue,
															_maxValue: maxXpValue,
															_unifiedStatus: unifiedStatus}"/>
			</block>
		</block>
	</block>
	<block className="CrewSkillPointBadge">
		<style>
			<width value="32px"/>
			<height value="32px"/>
		</style>
		<block className="icon_sticker_new_small" type="native">
			<style>
				<position value="absolute"/>
			</style>
			<bind name="gotoAndStop!" value="_state == 'inactive' ? 'inactive' : 'active'"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextDefaultBold"/>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="text" value="'+' + _skillPoints"/>
		</block>
	</block>

	<!-- crew_portraits -->
	<block className="CrewPortraitWithBGR">
		<bind name="watch" value="'bgrName';	!_baseUrl															? '' :
							_classificationId == SC.Common.COMMANDER_CLASSIFICATIONS.ADVANCED	? 'advanced.png' :
							_classificationId == SC.Common.COMMANDER_CLASSIFICATIONS.UNIQUE		? 'unique.png' :
							_classificationId == SC.Common.COMMANDER_CLASSIFICATIONS.SPECIAL	? 'special.png'
																								: 'common.png'"/>
		<bind name="watch" value="'portraitBaseUrl';	_baseUrl	? ('url:' + _baseUrl)
												: 'url:../crew_commander/backgrounds/no_crew_portrait.png'"/>
		<styleClass value="$CrewPortraitSizeNormal"/>
		<style>
			<margin value="8px"/>
			<width value="100px"/>
			<height value="92px"/>
		</style>
		<bind name="style" value="'width'; _portraitWidth ? _portraitWidth : '100px'"/>
		<bind name="style" value="'height'; _portraitHeight ? _portraitHeight : '92px'"/>
		<bind name="style" value="'margin'; _borderSize ? _borderSize : '4px'"/>
		<block>
			<style>
				<margin value="-8px"/>
			</style>
			<bind name="style" value="'margin'; _borderSize ? '-'+_borderSize : '-4px'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../crew_commander/backgrounds/frame.png"/>
				<background9Slice value="[6]"/>
			</style>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<bind name="visible" value="bgrName != ''"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../crew_commander/backgrounds/' + bgrName"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'backgroundImage'; portraitBaseUrl"/>
			</block>
			<block>
				<bind name="visible" value="(_overlayUrl &amp;&amp; _overlayUrl != '')"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:' + _overlayUrl"/>
			</block>
		</block>
		<block>
			<style>
				<margin value="-8px"/>
				<backgroundSize value="fill"/>
			</style>
			<bind name="style" value="'margin'; _borderSize ? '-'+_borderSize : '-4px'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundImage'; 'url:../crew_commander/backgrounds/overlay.png'"/>
		</block>
	</block>
	<block className="CrewPortraitBig">
		<styleClass value="$CrewPortraitSizeBig"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="fill"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:' + _baseUrl"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="_overlayUrl != ''"/>
			<style>
				<backgroundSize value="fill"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:' + _overlayUrl"/>
		</block>
	</block>

	<!-- default_divided_counter -->
	<block className="DefaultDividedCounter">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<bind name="var" value="{counterProperties: {	'$TextDefaultNM':		{	maxValueTextClass: '$TextDefaultNM',
																	maxValueTopMargin: '0px',
																	maxValueLeftMargin: 3,
																	dividerLeftMargin: 4},
										'$TextDefaultBoldNM':	{	maxValueTextClass: '$TextDefaultBold13NM',
																	maxValueTopMargin: '2px',
																	maxValueLeftMargin: 3},
										'$TextDefaultBold17NM': {	maxValueTextClass: '$TextDefaultBoldNM',
																	maxValueTopMargin: '1px',
																	maxValueLeftMargin: 2},
										'$TextDefaultBold19NM': {	maxValueTextClass: '$TextDefaultBold17NM',
																	maxValueTopMargin: '1px',
																	maxValueLeftMargin: 2},
										'$TextDefaultBold21NM': {	maxValueTextClass: '$TextDefaultBold19NM',
																	maxValueTopMargin: '2px',
																	maxValueLeftMargin: 2},
										'$TextDefaultBold23NM': {	maxValueTextClass: '$TextDefaultBold21NM',
																	maxValueTopMargin: '1px',
																	maxValueLeftMargin: 3},
										'$TextDefaultBold36NM': {	maxValueTextClass: '$TextDefaultBold30NM',
																	maxValueTopMargin: '4px',
																	maxValueLeftMargin: 3}
									}}"/>
		<bind name="visible" value="	_doNotHideOnZeroMaxValue	? true :
					_maxValue &gt; 0				? true
												: false"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'alpha';	_doNotAlphaOnZeroCurValue	? 1 :
							_curValue == 0				? 0.6
														: 1"/>
		<block>
			<style>
				<backgroundColor value="0x01FFFFFF"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; _curValueTooltipText ? { _text: _curValueTooltipText } : null"/>
			<block type="text">
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="class" value="_curValueTextClass"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="text" value="(_curValue &gt; 0)	? format(_curValue)
										: _curValue"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_maxValue &gt; 0"/>
			<style>
				<backgroundColor value="0x01FFFFFF"/>
				<alpha value="0.75"/>
			</style>
			<bind name="style" value="'marginTop'; counterProperties[_curValueTextClass].maxValueTopMargin"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; _maxValueTooltipText ? { _text: _maxValueTooltipText } : null"/>
			<block type="text">
				<bind name="class" value="counterProperties[_curValueTextClass].maxValueTextClass"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="style" value="'marginLeft'; ((counterProperties[_curValueTextClass].dividerLeftMargin	?	counterProperties[_curValueTextClass].dividerLeftMargin
																									:	counterProperties[_curValueTextClass].maxValueLeftMargin) + 'px')"/>
				<bind name="text" value="'/'"/>
			</block>
			<block type="text">
				<bind name="class" value="counterProperties[_curValueTextClass].maxValueTextClass"/>
				<bind name="style" value="'marginLeft'; (counterProperties[_curValueTextClass].maxValueLeftMargin + 'px')"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="text" value="format(_maxValue)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- default_plugs -->
	<block className="NoItemsComeBackLater">
		<style>
			<width value="100%"/>
			<position value="absolute"/>
			<top value="35%"/>
			<marginTop value="-50%"/>
			<align value="center"/>
		</style>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$TextDefaultBold25NM"/>
			<bind name="text" value="toUpperCase(tr('IDS_NO_CURRENT_' + _type))"/>
		</block>
		<bind name="instance" value="'InstructionBigTech'; _disableSubText != true ? { _instructionText: _subText ? _subText : 'IDS_COME_BACK_LATER', _type: 'info', _maxWidth: 980 } : null"/>
	</block>
	<block className="ServerIsUnavailable">
		<styleClass value="$MiddleVAligned"/>
		<style>
			<width value="100%"/>
			<align value="center"/>
			<paddingLeft value="8px"/>
			<paddingRight value="8px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold17NM"/>
			<style>
				<alpha value="0.9"/>
				<textAlign value="center"/>
				<marginBottom value="16px"/>
				<width value="100%"/>
				<maxWidth value="300"/>
				<leading value="-2"/>
			</style>
			<bind name="text" value="tr('IDS_SERVICE_IS_UNAVAILABLE_CHAT')"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<alpha value="0.45"/>
				<textAlign value="center"/>
				<maxWidth value="280"/>
				<width value="100%"/>
				<leading value="-2"/>
			</style>
			<default_text value="IDS_WE_ARE_WORKING_ON_THIS"/>
		</block>
	</block>
	<block className="SimpleLockPlug">
		<style>
			<width value="100%"/>
		</style>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="16px"/>
				<marginBottom value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<style>
					<textAlign value="center"/>
					<maxWidth value="480"/>
				</style>
				<bind name="class" value="'$FontColorOrange'"/>
				<bind name="text" value="toUpperCase(tr(_text))"/>
			</block>
		</block>
	</block>

	<!-- divisions_elements -->
	<block className="FormationResizableMainElement">
		<styleClass value="$ChatDivisionDefaultWidth"/>
		<style>
			<height value="100%"/>
		</style>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'divisionPlayersListWidth'; (userPrefs.divisionPlayersListWidth) ? userPrefs.divisionPlayersListWidth : '280'"/>
		<bind name="width" value="divisionPlayersListWidth"/>
		<block className="FormationMainElement">
			<bind name="name" value="'FormationMainElement_' + _teamId"/>
			<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
			<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
			<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
			<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
			<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
			<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
			<bind name="watchDH" value="'trainingRoomTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
			<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
			<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
			<bind name="watchDH" value="'selectedBattleType'; ['selectedBattleTypeEntity.battleType.evBattleTypeChanged']; selectedBattleTypeEntity.battleType.type"/>
			<bind name="watch" value="'teamId'; _teamId != undefined ? _teamId : selfTeamId"/>
			<bind name="watch" value="'activeIds'; 	isSelfPlayerOwner 		? 	_teamId == 0 	? ['-1', '1', '-1_bot', '1_bot', '100'] :
															_teamId == 1 	? ['0', '-1', '0_bot', '-1_bot', '100'] :
															_teamId == 100 	? ['0', '1', '-1', '0_bot', '-1_bot'] 
																			: ['0', '1', '0_bot', '1_bot', '100'] :

								isSelfPlayerCommander	?	selfTeamId == _teamId 										? ['-1', '-1_bot'] :
															_teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM 	? (selfTeamId == 0 ? ['0', '0_bot'] : ['1', '1_bot'])
																														: []
														:	[]"/>
			<bind name="droppable" value="'this'; activeIds; activeIds; 'droppableStatus'"/>
			<bind name="droppable" value="'botFakeDropZone'; []; ['0_bot', '1_bot']; 'droppableStatusBot'"/>
			<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
			<bind name="watchDH" value="'isSelfPlayerOwner'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
			<bind name="watchDH" value="'isSelfPlayerInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
			<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.trainingRoomPlayer.evUpdate']; selfPlayerEntity.trainingRoomPlayer.isCommander"/>
			<bind name="watch" value="'isTeamManagementAvailable'; isSelfPlayerOwner || (isSelfPlayerCommander &amp;&amp; selfTeamId == _teamId)"/>
			<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
			<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
			<bind name="watch" value="'preBattlePlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.preBattleMembers.sorted' 
															: 'byPreBattle.' + selfPreBattleId + '.preBattleMembers.sorted'"/>
			<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; preBattlePlayersFilter"/>
			<bind name="watch" value="'preBattleInvitedPlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.invitedPlayers' 
																	: 'byPreBattle.' + selfPreBattleId + '.invitedPlayers'"/>
			<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattleInvitedPlayers'; preBattleInvitedPlayersFilter"/>
			<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
			<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
			<bind name="watch" value="'isNeutralTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
			<bind name="watch" value="'isObserverTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
			<bind name="watch" value="'maxPlayersInFormation'; _isTrainingRoom 	? isNeutralTeam || isObserverTeam	? preBattlePlayers.length
																								: trainingRoomTeamSize
															: shipRestrictions.maxPlayers"/>
			<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
			<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
			<bind name="watchDH" value="'selfIsInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
			<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
			<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
			<bind name="watch" value="'showFormationPlayers'; isChatServerAvailable || _isTrainingRoom"/>
			<bind name="action" value="'droppableStatus' + varChanged;	droppableStatus == 'accept' ? 'setTeamInTrainingRoom' : null;
													{ playerID: droppableStatusData['playerId'], teamID: teamId }"/>
			<bind name="watch" value="'preBattlePlayersCount'; preBattlePlayers.length + preBattleInvitedPlayers.length "/>
			<bind name="watch" value="'divisionItemsLength'; preBattlePlayersCount &gt; maxPlayersInFormation ? preBattlePlayersCount : maxPlayersInFormation "/>
			<styleClass value="$Fullsize"/>
			<block>
				<bind name="visible" value="false"/>
				<params>
					<param name="name" value="botFakeDropZone"/>
				</params>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<block>
					<styleClass value="$DefaultScrollBar"/>
					<style>
						<height value="100%f"/>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="divisionItemsLength; 'DivisionListItem'; {
				_isTrainingRoom: _isTrainingRoom,
				_teamId: teamId,
				_formationPlayerClass: _formationPlayerClass,
				_showInvites:	isTeamManagementAvailable &amp;&amp;
								!(_isTrainingRoom &amp;&amp; (teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM)) &amp;&amp;
								!(isFormationInBattle &amp;&amp; selfIsInBattle),
				_preBattlePlayers: preBattlePlayers,
				_preBattleInvitedPlayers: preBattleInvitedPlayers,
				_channelEntityId: _channelEntityId	}"/>
				</block>
			</block>
			<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
			<bind name="watch" value="'chosenOperationId'; selectedBattleTypes[0].battleType.battleTypeGameParamId"/>
			<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; chosenOperationId"/>
			<bind name="watchDH" value="'operationStatus'; ['operationEntity.operation.evStatusChanged']; operationEntity.operation.status"/>
			<bind name="firstEntityDH" value="'pveStateEntity'; CC.pveState"/>
			<bind name="watchDH" value="'enterMatchmaker'; ['pveStateEntity.pveState.evEnterMatchmakerChanged']; pveStateEntity.pveState.enterMatchmaker"/>
			<bind name="watch" value="'isChosenOperationOfTheWeek'; operationStatus == SC.Common.PVE_OPERATION_STATUS.WEEKLY"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="4px"/>
				</style>
				<bind name="visible" value="teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
				<block>
					<bind name="fade" value="((!_isTrainingRoom &amp;&amp; !isSelfPlayerInBattle) || (selfTeamId == _teamId)); 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: -5}; 2"/>
					<style>
						<marginTop value="6px"/>
						<width value="100%"/>
						<align value="center"/>
					</style>
					<bind name="instance" value="'FormationReadySwitcher'; teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM ? {_isTrainingRoom: _isTrainingRoom} : null"/>
				</block>
				<block>
					<style>
						<marginTop value="12px"/>
						<marginLeft value="12px"/>
						<marginRight value="8px"/>
						<width value="100%"/>
						<marginBottom value="2px"/>
					</style>
					<bind name="fade" value="(selectedBattleType == SC.Common.BATTLE_TYPES.PVE_BATTLE &amp;&amp; !isSelfPlayerInBattle); 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: -5}; 2"/>
					<bind name="tooltip" value="'DescriptionStatusLineTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																_statusText: !isSelfPlayerOwner ? 'IDS_PVE_DIVISION_MATCHMAKER_CONFIG_AVAILABLE_FOR_COMMANDER' : '',
																_descriptionText: enterMatchmaker ? 'IDS_PVE_DIVISION_MATCHMAKER_ON_INFO' : 'IDS_PVE_DIVISION_MATCHMAKER_OFF_INFO' }"/>
					<bind name="instance" value="'CheckBox'; {	_isChecked: (enterMatchmaker &amp;&amp; isChosenOperationOfTheWeek),
													_label: 'IDS_PVE_DIVISION_MATCHMAKER_CHECKBOX_TEXT',
													_disabled: !(isSelfPlayerOwner &amp;&amp; isChosenOperationOfTheWeek),
													_maxTfWidth: 200,
													_action: 'PVEScriptsProxy.changeEnterMatchmaker',
													_actionParams: {	enterMatchmaker: !(enterMatchmaker)}}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="transition" value="droppableStatusState == 'active'; 0.15; {alpha: 0}; {alpha: 1}"/>
				<block className="outlined_panel_shaded" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<marginTop value="-1px"/>
					</style>
					<bind name="watch" value="'isBot'; droppableStatusBotState == 'active' &amp;&amp; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
					<bind name="gotoAndStop!" value="isBot ? 'orange' : 'white'"/>
					<bind name="transition" value="droppableStatus == 'fadeIn' || droppableStatusBot == 'fadeIn'; 0.15; {alpha: 0.5}; {alpha: 1}"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; 'HANGAR_DRAGGING_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="8px"/>
				<height value="100%"/>
				<right value="-4px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="gripper_right"/>
			</params>
		</block>
		<bind name="resize" value="'gripper_right'; 'right'; 'divisionPlayersListWidth'"/>
	</block>
	<block className="FormationMainElement">
		<bind name="name" value="'FormationMainElement_' + _teamId"/>
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="watchDH" value="'trainingRoomTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watchDH" value="'selectedBattleType'; ['selectedBattleTypeEntity.battleType.evBattleTypeChanged']; selectedBattleTypeEntity.battleType.type"/>
		<bind name="watch" value="'teamId'; _teamId != undefined ? _teamId : selfTeamId"/>
		<bind name="watch" value="'activeIds'; 	isSelfPlayerOwner 		? 	_teamId == 0 	? ['-1', '1', '-1_bot', '1_bot', '100'] :
															_teamId == 1 	? ['0', '-1', '0_bot', '-1_bot', '100'] :
															_teamId == 100 	? ['0', '1', '-1', '0_bot', '-1_bot'] 
																			: ['0', '1', '0_bot', '1_bot', '100'] :

								isSelfPlayerCommander	?	selfTeamId == _teamId 										? ['-1', '-1_bot'] :
															_teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM 	? (selfTeamId == 0 ? ['0', '0_bot'] : ['1', '1_bot'])
																														: []
														:	[]"/>
		<bind name="droppable" value="'this'; activeIds; activeIds; 'droppableStatus'"/>
		<bind name="droppable" value="'botFakeDropZone'; []; ['0_bot', '1_bot']; 'droppableStatusBot'"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerOwner'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isSelfPlayerInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.trainingRoomPlayer.evUpdate']; selfPlayerEntity.trainingRoomPlayer.isCommander"/>
		<bind name="watch" value="'isTeamManagementAvailable'; isSelfPlayerOwner || (isSelfPlayerCommander &amp;&amp; selfTeamId == _teamId)"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watch" value="'preBattlePlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.preBattleMembers.sorted' 
															: 'byPreBattle.' + selfPreBattleId + '.preBattleMembers.sorted'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; preBattlePlayersFilter"/>
		<bind name="watch" value="'preBattleInvitedPlayersFilter'; _isTrainingRoom 	? 'byPreBattleAndTeam.' + selfPreBattleId + '_' + teamId + '.invitedPlayers' 
																	: 'byPreBattle.' + selfPreBattleId + '.invitedPlayers'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattleInvitedPlayers'; preBattleInvitedPlayersFilter"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="watch" value="'isNeutralTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
		<bind name="watch" value="'isObserverTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
		<bind name="watch" value="'maxPlayersInFormation'; _isTrainingRoom 	? isNeutralTeam || isObserverTeam	? preBattlePlayers.length
																								: trainingRoomTeamSize
															: shipRestrictions.maxPlayers"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
		<bind name="watchDH" value="'selfIsInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watch" value="'showFormationPlayers'; isChatServerAvailable || _isTrainingRoom"/>
		<bind name="action" value="'droppableStatus' + varChanged;	droppableStatus == 'accept' ? 'setTeamInTrainingRoom' : null;
													{ playerID: droppableStatusData['playerId'], teamID: teamId }"/>
		<bind name="watch" value="'preBattlePlayersCount'; preBattlePlayers.length + preBattleInvitedPlayers.length "/>
		<bind name="watch" value="'divisionItemsLength'; preBattlePlayersCount &gt; maxPlayersInFormation ? preBattlePlayersCount : maxPlayersInFormation "/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="visible" value="false"/>
			<params>
				<param name="name" value="botFakeDropZone"/>
			</params>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<height value="100%f"/>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="divisionItemsLength; 'DivisionListItem'; {
				_isTrainingRoom: _isTrainingRoom,
				_teamId: teamId,
				_formationPlayerClass: _formationPlayerClass,
				_showInvites:	isTeamManagementAvailable &amp;&amp;
								!(_isTrainingRoom &amp;&amp; (teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM)) &amp;&amp;
								!(isFormationInBattle &amp;&amp; selfIsInBattle),
				_preBattlePlayers: preBattlePlayers,
				_preBattleInvitedPlayers: preBattleInvitedPlayers,
				_channelEntityId: _channelEntityId	}"/>
			</block>
		</block>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'chosenOperationId'; selectedBattleTypes[0].battleType.battleTypeGameParamId"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; chosenOperationId"/>
		<bind name="watchDH" value="'operationStatus'; ['operationEntity.operation.evStatusChanged']; operationEntity.operation.status"/>
		<bind name="firstEntityDH" value="'pveStateEntity'; CC.pveState"/>
		<bind name="watchDH" value="'enterMatchmaker'; ['pveStateEntity.pveState.evEnterMatchmakerChanged']; pveStateEntity.pveState.enterMatchmaker"/>
		<bind name="watch" value="'isChosenOperationOfTheWeek'; operationStatus == SC.Common.PVE_OPERATION_STATUS.WEEKLY"/>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="4px"/>
			</style>
			<bind name="visible" value="teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
			<block>
				<bind name="fade" value="((!_isTrainingRoom &amp;&amp; !isSelfPlayerInBattle) || (selfTeamId == _teamId)); 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: -5}; 2"/>
				<style>
					<marginTop value="6px"/>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'FormationReadySwitcher'; teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM ? {_isTrainingRoom: _isTrainingRoom} : null"/>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
					<marginLeft value="12px"/>
					<marginRight value="8px"/>
					<width value="100%"/>
					<marginBottom value="2px"/>
				</style>
				<bind name="fade" value="(selectedBattleType == SC.Common.BATTLE_TYPES.PVE_BATTLE &amp;&amp; !isSelfPlayerInBattle); 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: -5}; 2"/>
				<bind name="tooltip" value="'DescriptionStatusLineTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																_statusText: !isSelfPlayerOwner ? 'IDS_PVE_DIVISION_MATCHMAKER_CONFIG_AVAILABLE_FOR_COMMANDER' : '',
																_descriptionText: enterMatchmaker ? 'IDS_PVE_DIVISION_MATCHMAKER_ON_INFO' : 'IDS_PVE_DIVISION_MATCHMAKER_OFF_INFO' }"/>
				<bind name="instance" value="'CheckBox'; {	_isChecked: (enterMatchmaker &amp;&amp; isChosenOperationOfTheWeek),
													_label: 'IDS_PVE_DIVISION_MATCHMAKER_CHECKBOX_TEXT',
													_disabled: !(isSelfPlayerOwner &amp;&amp; isChosenOperationOfTheWeek),
													_maxTfWidth: 200,
													_action: 'PVEScriptsProxy.changeEnterMatchmaker',
													_actionParams: {	enterMatchmaker: !(enterMatchmaker)}}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="droppableStatusState == 'active'; 0.15; {alpha: 0}; {alpha: 1}"/>
			<block className="outlined_panel_shaded" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginTop value="-1px"/>
				</style>
				<bind name="watch" value="'isBot'; droppableStatusBotState == 'active' &amp;&amp; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM"/>
				<bind name="gotoAndStop!" value="isBot ? 'orange' : 'white'"/>
				<bind name="transition" value="droppableStatus == 'fadeIn' || droppableStatusBot == 'fadeIn'; 0.15; {alpha: 0.5}; {alpha: 1}"/>
			</block>
		</block>
	</block>
	<block className="FormationStatuses">
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'divisionShipClassEntities'; 'shipClassCountRestrictions'"/>
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'divisionShipLevelsEntities'; 'shipLevelCountRestrictions'"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId';		['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'restrictionEntityId'; ['selectedBattleTypes[0].battleType.evRestrictionEntityIdChanged']; selectedBattleTypes[0].battleType.restrictionEntityId"/>
		<bind name="entityDH" value="'restrictionsEntity'; restrictionsEntityId"/>
		<bind name="watchDH" value="'limitedShips';	['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.limitedShips"/>
		<bind name="watchDH" value="'excludedShips';	['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.excludedShips"/>
		<bind name="watchDH" value="'levelsCount';	['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.levelsCount"/>
		<bind name="watch" value="'isVerticalDividerVisible'; divisionShipClassEntities.length &gt; 0 &amp;&amp; divisionShipLevelsEntities.length &gt; 0"/>
		<bind name="fade" value="_divisionsAvailable; 0.1; {alpha: 0, ubScaleY: 0}; {alpha: 1, ubScaleY: 1}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<flow value="horizontal"/>
			<marginLeft value="9px"/>
			<alpha value="0.9"/>
			<overflow value="hidden"/>
		</style>
		<block>
			<style>
				<marginTop value="11px"/>
			</style>
			<bind name="instance" value="'FormationShipClassesStatus'; {_preBattleId: selfPreBattleId, _teamId: selfTeamId}"/>
		</block>
		<block>
			<bind name="visible" value="isVerticalDividerVisible"/>
			<style>
				<height value="20px"/>
				<marginTop value="8px"/>
				<marginRight value="16px"/>
				<marginLeft value="16px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="11px"/>
			</style>
			<bind name="instance" value="'FormationShipLevelsStatus'; {_preBattleId: selfPreBattleId, _teamId: selfTeamId}"/>
		</block>
		<block>
			<bind name="watchDH" value="'maxAllowedMercenaries'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.maxAllowedMercenaries"/>
			<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
			<bind name="watchDH" value="'nonClanMembersCount'; ['clanTeamEntity.clanTeam.evNonClanMembersCountChanged'];	clanTeamEntity.clanTeam.nonClanMembersCount"/>
			<bind name="watchDH" value="'isClanBattleType'; ['clanTeamEntity.clanTeam.evIsClanBattleTypeChanged'];	clanTeamEntity.clanTeam.isClanBattleType"/>
			<bind name="fade" value="isClanBattleType &amp;&amp; (maxAllowedMercenaries &gt; 0); 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
			<style>
				<flow value="horizontal"/>
				<marginTop value="9px"/>
			</style>
			<block>
				<style>
					<height value="18px"/>
					<width value="3px"/>
					<marginRight value="16px"/>
					<marginLeft value="16px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="watch" value="'hasTooMuchMercenaries'; nonClanMembersCount &gt; maxAllowedMercenaries"/>
				<bind name="tooltip" value="'MercenariesTooltip'; {_hasTooMuchMercenaries: hasTooMuchMercenaries}"/>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<block className="formation_player_status" type="native">
					<style>
						<marginRight value="4px"/>
					</style>
					<bind name="gotoAndStop!" value="'mercenary_ready_division'"/>
				</block>
				<block>
					<style>
						<marginTop value="2"/>
					</style>
					<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold17NM',
															_textColorClass: hasTooMuchMercenaries ? '$FontColorOrange' : '$None',
															_curValue: nonClanMembersCount,
															_maxValue: maxAllowedMercenaries,
															_doNotAlphaOnZeroCurValue: true	}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
		</block>
		<block>
			<bind name="fade" value="!!(limitedShips.length || excludedShips.length); 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
			<bind name="tooltip" value="'SeasonShipRestrictionsTooltip'; {}"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginRight value="8px"/>
				<marginLeft value="12px"/>
				<height value="22px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<marginRight value="8px"/>
					<marginTop value="4px"/>
					<alpha value="0.75"/>
				</style>
				<default_text value="IDS_SEASON_RESTRICTIONS"/>
			</block>
			<block>
				<bind name="tooltip" value="'SeasonShipRestrictionsInfotip'; {	_limitedShips: limitedShips,
																_excludedShips: excludedShips }; TooltipBehaviour.infotip"/>
				<bind name="instance" value="'ImageButton'; {	_width: '22px',
												_height: '22px',
												_enabled: true,
												_backgroundImage: 'url:../service_kit/buttons/icon_info.png'	}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MercenariesTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: 'IDS_MERCENARIES' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: _hasTooMuchMercenaries ? SC.Ui_styles.UNIFIED_STATUS.ATTENTION : SC.Ui_styles.UNIFIED_STATUS.INFO,
														_text:	'IDS_MERCENARIES_TOOLTIP_RESTRICTIONS'}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: 'IDS_MERCENARIES_TOOLTIP_DESCRIPTION' }"/>
			</block>
		</block>
	</block>
	<block className="DivisionHeaderLock">
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'isPreBattleLocked';	['divisionDataEntity.division.evLockedChanged']; divisionDataEntity.division.locked"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfPreBattleId';		['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'ownerId'; ['preBattleEntity.preBattle.evOwnerIdChanged']; preBattleEntity.preBattle.ownerId"/>
		<bind name="primaryEntityDH" value="'preBattleOwnerPlayerEntity'; CC.preBattlePlayerSimple; ownerId"/>
		<bind name="visible" value="preBattleOwnerPlayerEntity.clanman"/>
		<bind name="tooltip" value="'DescriptionStatusLineTooltip'; {	_unifiedStatus: isSelfPlayerCommander	? SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT
																								: SC.Ui_styles.UNIFIED_STATUS.WARNING,
														_statusText: isSelfPlayerCommander	?	isPreBattleLocked	? 'IDS_CLAN_MOUSE_INSTRUCTION_UNLOCK_DIVISION'
																													: 'IDS_CLAN_MOUSE_INSTRUCTION_LOCK_DIVISION'
																							:	'IDS_PVE_DIVISION_MATCHMAKER_CONFIG_AVAILABLE_FOR_COMMANDER',
														_descriptionText: isPreBattleLocked ? 'IDS_CLAN_LOCKED_DIVISION'
																							: 'IDS_CLAN_UNLOCKED_DIVISION' }"/>
		<bind name="action" value="'click'; isSelfPlayerCommander ?  (isPreBattleLocked ? 'unlockDivision' : 'lockDivision') : null; {id: selfPreBattleId}"/>
		<block className="button_lock" type="native">
			<bind name="selected" value="isPreBattleLocked"/>
			<bind name="enabled" value="isSelfPlayerCommander"/>
		</block>
	</block>
	<block className="FormationHeader">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="firstEntityDH" value="'divisionEntranceInfoEntity'; CC.divisionEntranceInfo"/>
		<bind name="watchDH" value="'isDivisionAvailable'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evIsDivisionAvailableChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.isDivisionAvailable"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'isMercenary'; ['selfPlayerEntity.preBattlePlayerSimple.evIsMercenaryChanged']; selfPlayerEntity.preBattlePlayerSimple.isMercenary"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watchDH" value="'isFormationInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
		<bind name="watchDH" value="'ownerId'; ['preBattleEntity.preBattle.evOwnerIdChanged']; preBattleEntity.preBattle.ownerId"/>
		<bind name="primaryEntityDH" value="'preBattleOwnerPlayerEntity'; CC.preBattlePlayerSimple; ownerId"/>
		<bind name="watchDH" value="'clanId'; ['preBattleOwnerPlayerEntity.clanman.evClanIdChanged']; preBattleOwnerPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged']; clanTeamEntity.clanTeam.squadId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="watch" value="'isLeadingSquad'; squadId == leadingSquadId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watch" value="'isShowClanSquadModifier'; hasClanSquadModifier &amp;&amp; !isMercenary &amp;&amp; squadId"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watchDH" value="'trainingRoomTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
		<bind name="watchDH" value="'observersTeamSize'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.observersTeamSize"/>
		<bind name="watchDH" value="'alphaTeamName'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.alphaTeamName"/>
		<bind name="watchDH" value="'bravoTeamName'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.bravoTeamName"/>
		<bind name="watchDH" value="'fightButtonDenyReasons'; ['selectedBattleTypeEntity.battleType.evDisableReasonChanged']; selectedBattleTypeEntity.battleType.fightButtonReasons"/>
		<bind name="watchDH" value="'selectedBattleType'; ['selectedBattleTypeEntity.battleType.evBattleTypeChanged']; selectedBattleTypeEntity.battleType.type"/>
		<bind name="watch" value="'isObserverTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OBSERVER_TEAM"/>
		<bind name="watch" value="'isSelfTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.SELF_TEAM"/>
		<bind name="watch" value="'isOtherTeam'; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.OTHER_TEAM"/>
		<bind name="watch" value="'maxPlayersInFormation';	_isTrainingRoom		?	isObserverTeam	? observersTeamSize
																					: trainingRoomTeamSize
																:	shipRestrictions.maxPlayers"/>
		<bind name="watch" value="'preBattlePlayersFilter'; _isTrainingRoom ? 	'byPreBattleAndTeam.' + selfPreBattleId + '_' + _teamId + '.preBattleMembers' : 
																'byPreBattle.' + selfPreBattleId + '.preBattleMembers'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; preBattlePlayersFilter"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattleInvitedPlayers'; 'byPreBattleAndTeam.' + selfPreBattleId + '_' + _teamId + '.invitedPlayers'"/>
		<bind name="watch" value="'curPlayersInFormation'; (preBattlePlayers.length + preBattleInvitedPlayers.length)"/>
		<bind name="watch" value="'label'; 	_isTrainingRoom 	? 	isSelfTeam											? alphaTeamName	? alphaTeamName
																														: SC.Common.BASE_TEAM_NAMES.ALPHA_TEAM_NAME
												:	isOtherTeam											? bravoTeamName	? bravoTeamName
																														: SC.Common.BASE_TEAM_NAMES.BRAVO_TEAM_NAME
																										: toUpperCase(tr('IDS_DIVISION_' + _teamId)) :
							isFormationInBattle ? 	tr('IDS_IN_BATTLE') :
							_isClanDivision		? 	'[' + clanTag + '] ' + tr( isShowClanSquadModifier	? 'IDS_CLAN_SQUAD_' + squadId
																										: 'IDS_DIVISION')
												: 	tr('IDS_DIVISION')"/>
		<bind name="watch" value="'limitExceed'; curPlayersInFormation &gt;= maxPlayersInFormation"/>
		<bind name="name" value="'headerDivision'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="!_isTrainingRoom &amp;&amp; !(preBattleOwnerPlayerEntity.clanman)"/>
			<style>
				<hitTest value="false"/>
				<width value="19px"/>
				<height value="19px"/>
				<marginTop value="-2px"/>
				<marginRight value="2px"/>
				<backgroundImage value="url:../service_kit/chat_channels/division.png"/>
			</style>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="class" value="	_isTrainingRoom &amp;&amp; _teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM	? '$FontColorWhite'	 :
						_isTrainingRoom &amp;&amp; selfTeamId == _teamId										? '$FontColorGolden' :
						_isTrainingRoom &amp;&amp; selfTeamId != _teamId 										? '$FontColorWhite' :
						isFormationInBattle || !isDivisionAvailable										? '$FontColorOrange'
																										: '$FontColorGolden'"/>
			<style>
				<marginLeft value="4px"/>
				<marginTop value="1px"/>
			</style>
			<bind name="text" value="label"/>
		</block>
		<block>
			<bind name="watch" value="'isLeadingIconVisible'; _isClanDivision &amp;&amp; isShowClanSquadModifier &amp;&amp; isLeadingSquad &amp;&amp; !isFormationInBattle"/>
			<bind name="visible" value="isLeadingIconVisible"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="8px"/>
				<marginTop value="-1px"/>
			</style>
			<bind name="instance" value="'LeadingClanSquadIcon'; isLeadingIconVisible ? { _isGolden: true } : null"/>
		</block>
		<bind name="watch" value="'colorClass'; 	_isTrainingRoom &amp;&amp; selfTeamId == _teamId 	? '$FontColorGolden' :
								_isTrainingRoom &amp;&amp; selfTeamId != _teamId 	? '$FontColorWhite'	 :
								isFormationInBattle							? '$FontColorOrange'
																			: '$FontColorGolden'"/>
		<block>
			<bind name="visible" value="(isDivisionAvailable &amp;&amp; !_isTrainingRoom) || (_isTrainingRoom &amp;&amp; _teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM)"/>
			<bind name="style" value="'alpha'; limitExceed ? 0.5 : 1"/>
			<style>
				<marginLeft value="8px"/>
				<marginTop value="1px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold19NM"/>
				<bind name="class" value="colorClass"/>
				<style>
					<marginRight value="2px"/>
				</style>
				<bind name="text" value="'(' + curPlayersInFormation"/>
			</block>
			<block type="text">
				<bind name="style" value="'alpha'; limitExceed ? 1 : 0.8"/>
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="class" value="colorClass"/>
				<style>
					<marginTop value="1px"/>
					<marginRight value="1px"/>
				</style>
				<bind name="text" value="'/' + maxPlayersInFormation"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold19NM"/>
				<bind name="class" value="colorClass"/>
				<bind name="text" value="')'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="FormationPlayerItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'itemAccountEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId ? _entityAccountId : itemAccountEntity.id"/>
		<bind name="watch" value="'isSelfPlayer'; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="watch" value="'isBot'; entityAccount.bot != undefined"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watchDH" value="'shipId'; ['entityAccount.preBattlePlayerSimple.evShipIdChanged']; entityAccount.preBattlePlayerSimple.shipId"/>
		<bind name="watchDH" value="'teamId'; ['entityAccount.preBattlePlayerSimple.evTeamIdChanged']; entityAccount.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'isReady'; ['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'isInBattle'; ['entityAccount.preBattlePlayerSimple.evIsInBattleChanged']; entityAccount.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'isCommander'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isMercenary'; ['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="' isSelfPreBattlePlayerSimpleInBattle'; ['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watch" value="'isContextMenuAvailable'; !isSelfPlayer &amp;&amp; ((isSelfPlayerCommander &amp;&amp; ! isSelfPreBattlePlayerSimpleInBattle) || isChatServerAvailable)"/>
		<bind name="var" value="{isAnimationPreUnlocked: false,
				isAnimationUnlocked: 	false}"/>
		<bind name="dispatch" value="'addedToStage'; 'animationPreActivationEvent'; null; false; 0.1"/>
		<bind name="catch" value="'animationPreActivationEvent'; {isAnimationPreUnlocked: true}"/>
		<bind name="changeDispatch" value="isReady; 'animationActivationEvent'"/>
		<bind name="catch" value="'animationActivationEvent'; {isAnimationUnlocked: isAnimationPreUnlocked ? true : false}"/>
		<bind name="entityDH" value="'channelEntity'; _channelEntityId"/>
		<bind name="var" value="{canReportPortChatMisbehaviour : false}"/>
		<style>
			<width value="100%"/>
			<height value="27px"/>
			<flow value="horizontal"/>
		</style>
		<block className="inner_panel" type="native">
			<bind name="visible" value="isSelfPlayer"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="clickSplit"/>
			<bind name="style" value="'hitTest'; !(isSuspended)"/>
			<bind name="transition" value="(rollOver || _rollOver || formationPlayerContextMenuVisible) &amp;&amp; isContextMenuAvailable; 0.15; {alpha: 0}; {alpha: 1}"/>
			<bind name="tooltip" value="'ContactInfoTooltip';	{	_entityAccountId: entityAccount.id, 
													_actionDenyReason: 'no_reason',
													_isContextMenuAvailable: isContextMenuAvailable,
													_playerContext: {type: 'startPrivateChat'}}"/>
			<bind name="action" value="'left_click';	!(isSelfPlayer) &amp;&amp; !(isBot) ? 'openChannelForPrivateMessages' : null; {dbId: entityAccount.accountSimple.dbId}"/>
			<bind name="menu" value="'ContactContextMenu'; !isSelfPlayer	? 	{	_entityAccountId: entityAccount.id, 
																_playerContext: {type: 'startPrivateChat'},
																_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON,
																_isTrainingRoom: _isTrainingRoom, 
																_isBot: isBot,
																_channelId: canReportPortChatMisbehaviour ? channelEntity.channel.channelId : null }
														: null; null; null; 'formationPlayerContextMenuVisible'"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="fade" value="(!isReady || isInBattle) &amp;&amp; isAnimationUnlocked; 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<backgroundColor value="0x90FF9933"/>
					</style>
					<bind name="fade" value="(!isReady || isInBattle) &amp;&amp; isAnimationUnlocked; 1.0; {alpha: 1}; {alpha: 0}; {alpha: 1}; 1; 0.5"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="fade" value="isReady &amp;&amp; isAnimationUnlocked; 0.3; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0"/>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<backgroundColor value="0x804CE8AA"/>
					</style>
					<bind name="fade" value="isReady &amp;&amp; isAnimationUnlocked; 1.0; {alpha: 1}; {alpha: 0}; {alpha: 1}; 1; 0.5"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="name" value="'participantDivisionPlayer_' + nickName"/>
			<styleClass value="$Fullsize"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<marginLeft value="-12px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'VoiceChatDockIcon'; { _playerName: pureName, _isSelf: isSelfPlayer}"/>
			</block>
			<block>
				<bind name="name" value="'participantDivisionPlayer_' + teamId + '_' + nickName"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'DHFormationPlayerIcon'; teamId != SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM ? {_entityAccountId: entityAccount.id, _isOtherDivision: selfTeamId != teamId, _isTrainingRoom: _isTrainingRoom} : null"/>
			</block>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="1px"/>
					<width value="47%"/>
					<multiline value="false"/>
					<noTranslate value="true"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	teamId == SC.Common.TRAINING_ROOM_TEAMS_IDS.NEUTRAL_TEAM &amp;&amp; !isSelfPlayer	? '$FontColorGrey' :
							selfTeamId == teamId &amp;&amp; !isMercenary										? '$FontColorGolden'
																										: '$FontColorWhite'"/>
				<bind name="class" value="isSelfPlayer ? '$Bold' : '$None'"/>
				<bind name="text" value="nickName"/>
			</block>
			<block>
				<bind name="visible" value="shipId"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="53%"/>
				</style>
				<bind name="instance" value="'PreBattlePlayerShip'; (isReady || isInBattle) ? {_shipId: shipId} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PreBattlePlayerShip">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<marginTop value="1px"/>
				<marginBottom value="-1px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype}"/>
		</block>
		<block>
			<bind name="style" value="'marginLeft'; shipInfo.levelIcon.length == 0 ? '3px' : '0px'"/>
			<bind name="style" value="'marginRight'; shipInfo.levelIcon.length == 0 ? '2px' : '1px'"/>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: shipInfo.levelIcon,
											_alpha: 0.9,
										 	_levelRome : shipInfo.levelRome,
										 	_fontClass : '$TextDefaultBoldNM',
										}"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<alpha value="0.9"/>
				<width value="100%"/>
				<multiline value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="InvitedPlayerItem">
		<bind name="name" value="'invitedDivisionPlayer_' + nickName"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watch" value="'isSelfPlayer'; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'prebattlePlayerId'; []; entityAccount.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<style>
			<width value="100%"/>
			<height value="27px"/>
			<flow value="horizontal"/>
		</style>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="style" value="'hitTest'; !(isSelfPlayer)"/>
			<bind name="clickSplit"/>
			<bind name="transition" value="(rollOver || _rollOver || formationPlayerContextMenuVisible); 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="action" value="'left_click';	'openChannelForPrivateMessages'; {dbId: entityAccount.accountSimple.dbId}"/>
			<bind name="tooltip" value="'ContactInfoTooltip'; {	_entityAccountId: entityAccount.id, _actionDenyReason: 'no_reason',
												_playerContext: {type: 'startPrivateChat'}, _expirationTime: expirationTime }"/>
			<bind name="menu" value="'ContactContextMenu'; !isSelfPlayer ? {	_entityAccountId: entityAccount.id,
															_playerContext: {	type: 'startPrivateChat',
																				isInvitation: true },
															_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON }
														: null; null; null; 'formationPlayerContextMenuVisible'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
		</block>
		<block className="button_cross" type="native">
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_RECALL_INVITATION'}"/>
			<bind name="visible" value="(rollOver || _rollOver) &amp;&amp; isSelfPlayerCommander"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="6px"/>
			</style>
			<bind name="action" value="'buttonClick'; 'revokeInvitationToDivision'; {id: prebattlePlayerId}"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="13px"/>
				<hitTest value="false"/>
				<alpha value="0.7"/>
			</style>
			<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: true}"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="1px"/>
				<width value="262px"/>
				<hitTest value="false"/>
				<multiline value="false"/>
				<alpha value="0.7"/>
				<noTranslate value="true"/>
			</style>
			<styleClass value="$TextDefault"/>
			<styleClass value="$FontColorGrey"/>
			<bind name="text" value="nickName"/>
		</block>
	</block>
	<block className="FormationReadySwitcher">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerReady';		['selfPlayerEntity.preBattlePlayerSimple.evIsReadyChanged']; selfPlayerEntity.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'isSelfPlayerInBattle';	['selfPlayerEntity.preBattlePlayerSimple.evIsInBattleChanged']; selfPlayerEntity.preBattlePlayerSimple.isInBattle"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'selectedBattleType'; selectedBattleTypes[0].battleType.type"/>
		<bind name="entityDH" value="'battleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watchDH" value="'readyButtonDenyReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.readyButtonReasons"/>
		<bind name="watch" value="'isReadyBtnEnabled'; (readyButtonDenyReasons.length == 0) || isSelfPlayerReady ? true : false"/>
		<style>
			<flow value="horizontal"/>
			<marginTop value="8px"/>
			<marginBottom value="4px"/>
			<marginLeft value="2px"/>
			<marginRight value="2px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/buttons/tab_bar/bg.png"/>
				<background9Slice value="[4,4]"/>
				<margin value="-2px"/>
			</style>
		</block>
		<block>
			<bind name="name" value="isSelfPlayerReady ? 'isReadyDivision' : 'isNotReadyDivision'"/>
			<bind name="tooltip" value="'MultipleWarningsTooltip'; isReadyBtnEnabled ? null : {_warningsArr: readyButtonDenyReasons}"/>
			<bind name="tooltip" value="'FormationReadyButtonTooltip'; isReadyBtnEnabled ? {} : null; TooltipBehaviour.simple"/>
			<bind name="instance" value="'TextSwitchTab'; {	_width: '115px',
												_height: '25px',
												_label: toUpperCase(tr('IDS_READY')),
												_disabled: !isReadyBtnEnabled,
												_isReadyBtn: true,
												_name: 'readyDivision',
												_action: _isTrainingRoom ? 'setIsReadyInTrainingRoom' : 'setIsReadyInDivision',
												_actionParams: {isReady: true},
												_selected: isSelfPlayerReady || isSelfPlayerInBattle }"/>
		</block>
		<block>
			<style>
				<height value="100%"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'FormationNotReadyButtonTooltip'; {_isReadyBtnEnabled: isReadyBtnEnabled}; TooltipBehaviour.simple"/>
			<bind name="instance" value="'TextSwitchTab'; {	_width: '115px',
												_height: '25px',
												_label: toUpperCase(tr('IDS_NOT_READY')),
												_isReadyBtn: false,
												_name: 'notReadyDivision',
												_action: _isTrainingRoom ? 'setIsReadyInTrainingRoom' : 'setIsReadyInDivision',
												_actionParams: {isReady: false},
												_selected: !(isSelfPlayerReady) &amp;&amp; !(isSelfPlayerInBattle) }"/>
		</block>
	</block>
	<block className="FormationShipClassesStatus">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'childId'; 'shipClassCountRestrictions.byPreBattleAndTeam.' +  _preBattleId + '_' + _teamId + '.sorted'"/>
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'classesList'; childId"/>
		<bind name="repeat" value="classesList; 'FormationShipClassStatus'; {}"/>
	</block>
	<block className="FormationShipLevelsStatus">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'childId'; 'shipLevelCountRestrictions.byPreBattleAndTeam.' +  _preBattleId + '_' + _teamId"/>
		<bind name="collectionDH" value="CC.divisionShipCountRestriction; 'levelsList'; childId"/>
		<bind name="repeat" value="levelsList; 'FormationShipLevelStatus'; {}"/>
	</block>
	<block className="FormationShipClassStatus">
		<bind name="dataRefDH" value="'divisionShipClassCountEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'shipClasses'; ['divisionShipClassCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipClassCountEntity.divisionShipCountRestriction.shipClasses"/>
		<bind name="watchDH" value="'curCount'; ['divisionShipClassCountEntity.divisionShipCountRestriction.evCurCountChanged']; divisionShipClassCountEntity.divisionShipCountRestriction.curCount"/>
		<bind name="watchDH" value="'maxCount'; ['divisionShipClassCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipClassCountEntity.divisionShipCountRestriction.maxCount"/>
		<bind name="watch" value="'restrictionsIds'; shipClasses.length &gt; 1 ? 'IDS_DEPENDED_CLASSES_RESTRICTIONS_FOR_DIVISION_TOOLTIP' : 'IDS_CLASS_RESTRICTIONS_FOR_DIVISION_TOOLTIP'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: tr(restrictionsIds) }"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'marginLeft'; $index ? '12px' : '0'"/>
		<block>
			<style>
				<marginRight value="2px"/>
			</style>
			<bind name="repeat" value="shipClasses; 'ShipClassIconWrapper'; {_length: shipClasses.length}; {}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold17NM',
													_curValue: curCount,
													_maxValue: maxCount,
													_doNotHideOnZeroMaxValue: true,
													_doNotAlphaOnZeroCurValue: true	}"/>
		</block>
	</block>
	<block className="FormationShipLevelStatus">
		<bind name="dataRefDH" value="'divisionShipLevelCountEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'shipLevelRoman'; ['divisionShipLevelCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipLevelCountEntity.divisionShipCountRestriction.shipLevelRoman"/>
		<bind name="watchDH" value="'curCount'; ['divisionShipLevelCountEntity.divisionShipCountRestriction.evCurCountChanged']; divisionShipLevelCountEntity.divisionShipCountRestriction.curCount"/>
		<bind name="watchDH" value="'maxCount'; ['divisionShipLevelCountEntity.divisionShipCountRestriction.evUpdate']; divisionShipLevelCountEntity.divisionShipCountRestriction.maxCount"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_LEVEL_RESTRICTIONS_FOR_DIVISION_TOOLTIP' }"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'marginLeft'; $index ? '16px' : '0'"/>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<style>
				<marginRight value="6px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="shipLevelRoman"/>
		</block>
		<block>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold17NM',
													_curValue: curCount,
													_maxValue: maxCount,
													_doNotHideOnZeroMaxValue: true,
													_doNotAlphaOnZeroCurValue: true	}"/>
		</block>
	</block>
	<block className="ShipClassIconWrapper">
		<style>
			<marginTop value="-6px"/>
		</style>
		<bind name="style" value="'marginLeft'; _length &gt; 1 &amp;&amp; ($index != (_length - 1)) ? '-5px' : '0'"/>
		<bind name="instance" value="'ShipIcon'; {_shipType: $value}"/>
	</block>
	<block className="FormationInviteListItem">
		<style>
			<position value="absolute"/>
			<width value="100%"/>
			<height value="27px"/>
		</style>
		<bind name="name" value="'FormationInviteListItem_' + _teamId"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="soundSet" value="dropdown"/>
			</params>
			<bind name="selected" value="divisionEntranceInfotipIsVisible"/>
		</block>
		<block>
			<style>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
				<marginTop value="2px"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_plus" type="native">
				<styleClass value="$MiddleVAligned"/>
			</block>
			<block type="text">
				<bind name="watch" value="'formationType'; _isTrainingRoom ? 'TRAINING_ROOM' : 'DIVISION'"/>
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="2px"/>
				</style>
				<bind name="text" value="tr(toUpperCase('IDS_HINT_LEFT_CLICK_TO_INVITE_TO_' + formationType))"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DHFormationPlayerIcon">
		<bind name="dataRefDH" value="'itemAccountEntity'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId ? _entityAccountId : itemAccountEntity.id"/>
		<bind name="watchDH" value="'isReady'; ['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'isInBattle'; ['entityAccount.preBattlePlayerSimple.evIsInBattleChanged']; entityAccount.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'isCommander'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isMercenary'; ['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watchDH" value="'isTeamCommander'; ['entityAccount.trainingRoomPlayer.evUpdate']; entityAccount.trainingRoomPlayer.isCommander"/>
		<bind name="instance" value="'FormationPlayerIcon'; {	isCommander: _isTrainingRoom ? isTeamCommander : isCommander,
												isMercenary: isMercenary,
												isReady: isReady,
												isInBattle: isInBattle,
												isOtherDivision: _isOtherDivision	}"/>
	</block>
	<block className="DivisionListItem">
		<style>
			<width value="100%"/>
			<height value="27px"/>
		</style>
		<bind name="watch" value="'entityPlayer'; _preBattlePlayers[$index]"/>
		<bind name="watch" value="'entityInvitedPlayer'; $index &gt;= _preBattlePlayers.length ? _preBattleInvitedPlayers[$index - _preBattlePlayers.length] : null"/>
		<block>
			<bind name="visible" value="entityPlayer"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="_formationPlayerClass ? _formationPlayerClass : 'FormationPlayerItem'; entityPlayer != null ? {	_entityAccountId: entityPlayer.id,
																														_channelEntityId: _channelEntityId}
																													: null "/>
		</block>
		<block>
			<bind name="visible" value="entityInvitedPlayer"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InvitedPlayerItem'; entityInvitedPlayer != null ? { entityAccount: entityInvitedPlayer} : null"/>
		</block>
		<block>
			<bind name="visible" value="_showInvites &amp;&amp; entityPlayer == null &amp;&amp; entityInvitedPlayer == null"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'FormationInviteListItem'; _showInvites &amp;&amp; entityPlayer == null &amp;&amp; entityInvitedPlayer == null ? { _isTrainingRoom: _isTrainingRoom, _teamId: _teamId} : null"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_HINT_INVITE_PLAYERS'}"/>
			<bind name="tooltip" value="'DivisionEntranceInfotip'; { _isFromTrainingRoomBtn: _isTrainingRoom, _teamId: _teamId }; TooltipBehaviour.infotip; 'divisionEntranceInfotipIsVisible'"/>
		</block>
	</block>

	<!-- dock -->
	<block className="Dock">
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.WINDOWS.DOCK"/>
		<bind name="watchDH" value="'isInDock'; ['routeEntity.route.evIsActiveChanged']; routeEntity.route.isActive"/>
		<bind name="watchDH" value="'currentDockState'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
		<bind name="watchDH" value="'prevDockState'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.prevActiveChild"/>
		<bind name="watchDH" value="'availableDockStates'; ['routeEntity.route.evChildrenChanged']; routeEntity.route.children"/>
		<bind name="primaryEntityDH" value="'routeEntityisInMain'; CC.route; SC.Ui_windows.ROUTE.MAIN"/>
		<bind name="watchDH" value="'isInMain'; ['routeEntityisInMain.route.evIsActiveChanged']; routeEntityisInMain.route.isActive"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'carouselAreaHeightEntity'; CC.preference; 'ui.carousel.carouselAreaHeight'"/>
		<bind name="watchDH" value="'carouselAreaHeight'; ['carouselAreaHeightEntity.preference.evValueChanged']; Number(carouselAreaHeightEntity.preference.value)"/>
		<bind name="firstEntityDH" value="'shipAttrs'; CC.shipEconomicAttributes"/>
		<bind name="lag" value="'lagAfterAddedToStage'; {}; false; 1.5"/>
		<bind name="request" value="'lagAfterAddedToStage'; 'dockReady'"/>
		<styleClass value="$Fullsize"/>
		<bind name="collectionDH" value="CC.referral; 'referralCollection'"/>
		<bind name="watch" value="'isRefSysParticipant'; referralCollection.length &gt; 0"/>
		<bind name="action" value="'addedToStage'; isRefSysParticipant ? 'ReferralProgramProxy.requestReferralPoints' : null; {}"/>
		<bind name="primaryEntityDH" value="'ctaPlayButtonResearchEntity'; CC.splitRunTest; 'Player_Focus_And_CTA_Button_Research'"/>
		<bind name="watchDH" value="'isCTABattleButtonActive'; ['ctaPlayButtonResearchEntity.splitRunTest.evDataChanged']; ctaPlayButtonResearchEntity.splitRunTest.data.isCTABattleButtonActive"/>
		<bind name="watchDH" value="'ctaPlayButtonResearchEntityTag'; ['ctaPlayButtonResearchEntity.splitRunTest.evDataChanged']; ctaPlayButtonResearchEntity.splitRunTest.id"/>
		<bind name="collectionDH" value="CC.sseCore; 'taskCollection'; 'firstLineSSE.bySSETag.' + ctaPlayButtonResearchEntityTag"/>
		<bind name="watch" value="'isTaskEntity'; taskCollection[0] != null"/>
		<bind name="watch" value="'isCTABannerVisible'; isInMain &amp;&amp; isCTABattleButtonActive &amp;&amp; isTaskEntity &amp;&amp; currentDockState == SC.Ui_windows.ROUTE.PORT"/>
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="handleEventDH" value="'dockDataEntity.dockData.evHideSpace'; 'evHideSpace'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatchDelayReset" value="'evHideSpace'; 'spaceFadingFinished'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.15"/>
		<bind name="action" value="'spaceFadingFinished'; 'onHideSpace'; {}"/>
		<bind name="handleEventDH" value="'dockDataEntity.dockData.evShowSpace'; 'evShowSpace'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0xff000000"/>
				<alpha value="0"/>
				<hitTest value="false"/>
			</style>
			<bind name="appear" value="'evHideSpace'; 0.15; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'evShowSpace'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<bind name="fade" value="currentDockState == SC.Ui_windows.ROUTE.PORT; 0.4; {alpha: 0}; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD;
					prevDockState == SC.Ui_windows.ROUTE.BARGE	? 0.5 :
					prevDockState ==  SC.Ui_windows.ROUTE.SHIP_PREVIEW	? 0.2 : 0"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'hitTest'; currentDockState == SC.Ui_windows.ROUTE.PORT"/>
			<bind name="instance" value="'DefaultDock'; {}"/>
		</block>
		<block>
			<bind name="fade" value="currentDockState == SC.Ui_windows.ROUTE.BARGE; 0.4; {alpha: 0}; {alpha: 1}; {alpha: 0};
					SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; prevDockState == SC.Ui_windows.ROUTE.PORT ? 0.5 : 0"/>
			<bind name="name" value="'barge'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="Lootboxes" type="ublock">
				<bind name="build!" value="{}"/>
			</block>
		</block>
		<block>
			<bind name="fade" value="currentDockState == SC.Ui_windows.ROUTE.SHIP_PREVIEW; 0.4; {alpha: 0}; {alpha: 1}; {alpha: 0};
					SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; prevDockState == SC.Ui_windows.ROUTE.PORT ? 0.2 : 0"/>
			<bind name="name" value="'ship_preview'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'ShipPreview'; {}"/>
		</block>
		<block>
			<bind name="fade" value="currentDockState == SC.Ui_windows.ROUTE.NEWBIE_GIFTS; 0.4; {alpha: 0}; {alpha: 1}; {alpha: 0};
					SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; prevDockState == SC.Ui_windows.ROUTE.PORT ? 0.2 : 0"/>
			<bind name="name" value="'newbie_gifts'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'NewbieGifts'; currentDockState == SC.Ui_windows.ROUTE.NEWBIE_GIFTS ? {} : null"/>
		</block>
		<block>
			<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
			<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
			<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
			<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
			<bind name="fade" value="isCTABannerVisible; 0.4; {alpha: 0}; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD;
					prevDockState == SC.Ui_windows.ROUTE.BARGE ? 0.5 :
					prevDockState ==  SC.Ui_windows.ROUTE.SHIP_PREVIEW ? 0.2 : 0"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<top value="12px"/>
			</style>
			<block className="CallToActionPlayButtonBanner" type="ublock">
				<bind name="build!" value="{}"/>
			</block>
		</block>
		<block className="InformerLogContainer" type="ublock">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="build!" value="{}"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<align value="center|bottom"/>
			</style>
			<bind name="style" value="'paddingBottom'; carouselAreaHeight"/>
			<block className="InstructionHintBlock" type="ublock">
				<bind name="build!" value="{}"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="tooltip" value="'WgncMessageTooltip'; {}; TooltipBehaviour.window; null; null; true"/>
		</block>
	</block>
	<block className="WgncMessageTooltip">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<bind name="firstEntityDH" value="'wgncTooltipStateEntity'; CC.wgncTooltipState"/>
		<bind name="watchDH" value="'isWgncMessageVisible'; ['wgncTooltipStateEntity.wgncTooltipState.evIsVisibleChanged']; wgncTooltipStateEntity.wgncTooltipState.isVisible"/>
		<bind name="draggableWindow" value="'wgncMessageDragZone'; 'wgncMessagePosition'; 'WGNC'"/>
		<bind name="changeDispatch" value="dragging; 'draggingChangedEv'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; true"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'wgncMessagePositionX';	userPrefs.wgncMessagePositionX.WGNC ? userPrefs.wgncMessagePositionX.WGNC : (stageWidth / 2) - (400/2)"/>
		<bind name="watch" value="'wgncMessagePositionY';	userPrefs.wgncMessagePositionY.WGNC ? userPrefs.wgncMessagePositionY.WGNC : stageHeight * 0.23"/>
		<bind name="watch" value="'dragPositionsWasSet'; !!wgncMessagePositionX &amp;&amp; !!wgncMessagePositionY"/>
		<bind name="changeDispatch" value="wgncMessagePositionX &amp;&amp; dragPositionsWasSet; 'wgncMessagePositionXchanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="changeDispatch" value="wgncMessagePositionY &amp;&amp; dragPositionsWasSet; 'wgncMessagePositionYchanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="action" value="'wgncMessagePositionXchanged' ; 'setUserPref' ; {value : wgncMessagePositionX, name: 'wgncMessagePositionX', subName: 'WGNC'}"/>
		<bind name="action" value="'wgncMessagePositionYchanged' ; 'setUserPref' ; {value : wgncMessagePositionY, name: 'wgncMessagePositionY', subName: 'WGNC'}"/>
		<bind name="left" value="wgncMessagePositionX"/>
		<bind name="top" value="wgncMessagePositionY"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<params>
				<param name="name" value="wgncMessageDragZone"/>
			</params>
		</block>
		<block>
			<bind name="fade" value="isWgncMessageVisible; 0.2; {alpha: 0}; {alpha: 1}; {alpha: 0}; 0; 0.1"/>
			<bind name="style" value="'hitTest'; isWgncMessageVisible"/>
			<block className="WgncMessageContainer" type="ublock">
				<bind name="build!" value="{}"/>
			</block>
		</block>
	</block>
	<block className="DefaultDock">
		<bind name="primaryEntityDH" value="'routeEntityisInPort'; CC.route; SC.Ui_windows.ROUTE.PORT"/>
		<bind name="watchDH" value="'isInPort'; ['routeEntityisInPort.route.evIsActiveChanged']; routeEntityisInPort.route.isActive"/>
		<bind name="dispatch" value="'isInPort' + varChanged; 'dockStateChanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0"/>
		<bind name="dispatch" value="'dockStateChanged';isInPort ? 'startShow' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0"/>
		<bind name="dispatch" value="'dockStateChanged'; !isInPort ? 'startHide' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'selectedBattleType'; selectedBattleTypes[0].battleType.type"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="var" value="{inPort: true}"/>
			<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
			<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
			<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
			<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
			<styleClass value="$Fullsize"/>
			<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.PORT"/>
			<bind name="watchDH" value="'isInPort'; ['routeEntity.route.evIsActiveChanged']; routeEntity.route.isActive"/>
			<bind name="watchDH" value="'currentPortSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
			<bind name="watchDH" value="'prevPortSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.prevActiveChild"/>
			<bind name="watchDH" value="'availablePortSubroutes'; ['routeEntity.route.evChildrenChanged']; routeEntity.route.children"/>
			<bind name="watch" value="'notNullPortSubroute'; currentPortSubroute ? currentPortSubroute : notNullPortSubroute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<paddingTop value="60px"/>
				</style>
				<bind name="child" value="notNullPortSubroute || 'main'; {playerShipId: playerShipId, viewedShipId: viewedShipId};	{	main: 'PortMainInset',
																														profile: 'ProfileMainInset',
																														research: 'ShipResearchMainInset',
																														management: 'ShipManagementMainInset',
																														exterior: 'ExteriorsMainInset',
																														clans: 'ClanMainInset'	}"/>
			</block>
			<block className="DockHeader" type="ublock">
				<bind name="build!" value="{}"/>
			</block>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
	</block>
	<block className="WGWalletServiceStatus">
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<backgroundColor value="0x01000000"/>
			<align value="center|middle"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION, _text: 'IDS_SERVICE_IS_LIMITED'}"/>
		<block>
			<style>
				<height value="22px"/>
				<width value="22px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_status_attention.png'"/>
		</block>
	</block>

	<!-- dock_hotkey_indicator -->
	<block className="DockHotkeyIndicator">
		<styleClass value="$DockHotkeyItem"/>
		<bind name="var" value="{NOT_LOCALIZE_KEYS: {	F1: true,
										F2: true,
										F3: true,
										F4: true,
										F5: true,
										F6: true,
										F7: true,
										F8: true,
										F9: true,
										F10: true,
										F11: true,
										F12: true
									}}"/>
		<bind name="primaryEntityDH" value="'command'; CC.commandMappingCommand; _commandId"/>
		<bind name="watchDH" value="'commandName'; []; command.commandMappingCommandName.commandName"/>
		<bind name="primaryEntityDH" value="'commandKeyMainEntity'; CC.preference; 'commands.' + commandName + '.VALUE1.KEY'"/>
		<bind name="watchDH" value="'commandKeyMain'; ['commandKeyMainEntity.preference.evValueChanged']; commandKeyMainEntity.preference.value"/>
		<bind name="watch" value="'cmdMappingKeyIndex'; commandKeyMain ? 1 : 2"/>
		<bind name="primaryEntityDH" value="'keyCodeEntity'; CC.preference; 'commands.' + commandName + '.VALUE' + cmdMappingKeyIndex + '.KEY'"/>
		<bind name="primaryEntityDH" value="'modsMaskEntity'; CC.preference; 'commands.' + commandName + '.VALUE' + cmdMappingKeyIndex + '.MODS'"/>
		<bind name="watchDH" value="'keyCode'; ['keyCodeEntity.preference.evValueChanged']; keyCodeEntity.preference.value"/>
		<bind name="watchDH" value="'modsMask'; ['modsMaskEntity.preference.evValueChanged']; modsMaskEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'inputKeyEntity'; CC.inputKey; keyCode"/>
		<bind name="watchDH" value="'keyName'; ['inputKeyEntity.evAdded']; inputKeyEntity.inputKey.name"/>
		<bind name="watchDH" value="'keyPureName'; ['inputKeyEntity.evAdded']; inputKeyEntity.inputKey.pureName"/>
		<bind name="primaryEntityDH" value="'cmModKeyEntity'; CC.commandMappingMod; modsMask"/>
		<bind name="watch" value="'modKeyCode'; cmModKeyEntity ? cmModKeyEntity.commandMappingModKey.keyCode : 0"/>
		<bind name="primaryEntityDH" value="'inputModKeyEntity'; CC.inputKey; modKeyCode"/>
		<bind name="watchDH" value="'modKeyName'; ['inputModKeyEntity.evAdded']; inputModKeyEntity.inputKey.name"/>
		<bind name="watchDH" value="'modKeyPureName'; ['inputModKeyEntity.evAdded']; inputModKeyEntity.inputKey.pureName"/>
		<bind name="watch" value="'modKeyText'; modKeyCode	? (modKeyPureName.length == 1 || NOT_LOCALIZE_KEYS[modKeyPureName]) ? (modKeyPureName + ' + ')
																												: (tr('IDS_' + modKeyName) + ' + ')
											: ''"/>
		<bind name="watch" value="'hotkeyText'; modKeyText + (keyCode	? (keyPureName.length == 1 || NOT_LOCALIZE_KEYS[keyPureName]) 	? keyPureName
																														: tr('IDS_' + keyName)
														: '-')"/>
		<bind name="watch" value="'hotkeyTextClass'; !!_isContextRelatedKey	? '$TextDockHotkeyWhite'
															: '$TextDockHotkeyBlack'"/>
		<bind name="watch" value="'isDefaultWidthHotkey'; (keyPureName.length == 1) &amp;&amp; (!modKeyCode)"/>
		<bind name="style" value="'width'; isDefaultWidthHotkey ? '18px' : 'auto'"/>
		<bind name="style" value="'maxWidth'; isDefaultWidthHotkey ? '18' : '999'"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<background9Slice value="[4]"/>
				<minWidth value="18"/>
			</style>
			<bind name="style" value="'backgroundImage';	!!_isContextRelatedKey	? 'bitmap:hotkey_holder_black' :
										_isActive				? 'bitmap:hotkey_holder_green'
																: 'bitmap:hotkey_holder_white'"/>
		</block>
		<block>
			<style>
				<align value="center"/>
				<marginTop value="4px"/>
				<marginBottom value="4px"/>
			</style>
			<bind name="style" value="'width'; isDefaultWidthHotkey ? '100%' : 'auto'"/>
			<bind name="style" value="'marginLeft'; isDefaultWidthHotkey ? '0px' : '8px'"/>
			<bind name="style" value="'marginRight'; isDefaultWidthHotkey ? '0px' : '8px'"/>
			<block type="text">
				<bind name="class" value="hotkeyTextClass"/>
				<style>
					<textAlign value="center"/>
				</style>
				<bind name="style" value="'width'; isDefaultWidthHotkey ? '100%' : 'auto'"/>
				<bind name="text" value="hotkeyText"/>
			</block>
		</block>
	</block>
	<block className="LabelAuto">
		<style>
			<position value="absolute"/>
			<width value="46px"/>
			<height value="20px"/>
			<alpha value="0.8"/>
			<backgroundImage value="url:../aircraft/key_auto_label.png"/>
		</style>
	</block>

	<!-- dynamic_divisions -->
	<block className="DynamicDivisions">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'maxDivisions'; battleDataEntity.battleInfo.maxDivisions"/>
		<bind name="collectionDH" value="CC.division; 'dynamicDivisionsCollection'"/>
		<bind name="collectionDH" value="CC.dynamicDivisionMember; 'membersInDivisionWithPlayer'; 'byPreBattleId.' + selfPlayer.divisionId"/>
		<bind name="watch" value="'divisionsAmount'; dynamicDivisionsCollection.length"/>
		<bind name="watch" value="'divisionSlotsNum';	divisionsAmount &lt; maxDivisions &amp;&amp;
										membersInDivisionWithPlayer.length != 1		? divisionsAmount + 1
																					: divisionsAmount"/>
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<align value="center"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'DeclareBlurLayer'; _isBattleLoading ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="690px"/>
				<flow value="htile"/>
				<align value="center"/>
			</style>
			<bind name="repeat" value="divisionSlotsNum; 'DivisionSlotOrCreateDivision';	{ _isBattleStats:	_isBattleStats,
																		  _isBattleLoading:	_isBattleLoading }"/>
		</block>
		<block>
			<bind name="visible" value="dynamicDivisionsCollection.length == maxDivisions"/>
			<style>
				<marginTop value="8px"/>
			</style>
			<bind name="instance" value="'StatusLineWithIcon'; { _text: 'IDS_MAX_DIVISIONS_CREATED', _maxWidth: 900, _large: true}"/>
		</block>
	</block>
	<block className="DivisionSlotOrCreateDivision">
		<bind name="collectionDH" value="CC.division; 'dynamicDivisionsCollection'"/>
		<bind name="instance" value="'DivisionSlot';				$index &lt;= dynamicDivisionsCollection.length - 1	?	{ _idInCol:			$index,
																									  _isBattleStats:	_isBattleStats }
																								:	null"/>
		<bind name="instance" value="'CreateDynamicDivision';	$index == dynamicDivisionsCollection.length		?	{ _isBattleStats:	_isBattleStats,
																									  _isBattleLoading:	_isBattleLoading }
																								:	null"/>
	</block>
	<block className="DivisionSlot">
		<bind name="collectionDH" value="CC.division; 'dynamicDivisionsCollectionSorted'; 'sorted'"/>
		<bind name="watch" value="'dynamicDivisionEntity'; dynamicDivisionsCollectionSorted[_idInCol]"/>
		<bind name="watchDH" value="'preBattleId';				[]; dynamicDivisionEntity.division.preBattleId"/>
		<bind name="firstEntityDH" value="'myAccountEntity'; CC.playerAvatar"/>
		<bind name="watchDH" value="'isAlive'; ['myAccountEntity.health.evIsAliveChanged']; myAccountEntity.health.isAlive"/>
		<bind name="style" value="'colorMatrixFilter'; isAlive ? '' : '0 -100 0 0'"/>
		<bind name="alpha" value="isAlive ? 1 : 0.7"/>
		<styleClass value="$DynamicDivisionsItemSize"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'DynamicDivisionItem';	{ _preBattleId:		preBattleId,
												  _isBattleStats:	_isBattleStats }"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="!isAlive"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; !isAlive	? {	_text: 'IDS_DIVISION_MANAGEMENT_LOCKED_FOR_DESTROYED'}
														: null"/>
		</block>
	</block>
	<block className="CreateDynamicDivision">
		<styleClass value="$DynamicDivisionsItemSize"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 1}"/>
		<block>
			<style>
				<width value="220px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled &amp;&amp; _isBattleLoading"/>
				<block className="mc_blurmap5" type="native">
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DynamicDivisionHeader'; {	_isCommander: false,
														_isPlayersDivision: false,
														_newDivision: true,
														_isBattleStats: _isBattleStats}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="3; 'JoinDynamicDivisionItem'; {_isBattleStats: _isBattleStats}"/>
			</block>
		</block>
	</block>
	<block className="EmptyDynamicDivision">
		<bind name="visible" value="false"/>
	</block>
	<block className="DynamicDivisionItem">
		<bind name="primaryEntityDH" value="'divisionEntity'; CC.division; _preBattleId"/>
		<bind name="watchDH" value="'ownerId';					['divisionEntity.division.evOwnerIdChanged']; divisionEntity.division.ownerId"/>
		<bind name="watchDH" value="'inPortParticipantsCount';	['divisionEntity.division.evInPortParticipantsCountChanged']; divisionEntity.division.inPortParticipantsCount"/>
		<bind name="watchDH" value="'locked';					['divisionEntity.division.evLockedChanged']; divisionEntity.division.locked"/>
		<bind name="watchDH" value="'name';						['divisionEntity.division.evNameChanged']; divisionEntity.division.name"/>
		<bind name="collectionDH" value="CC.dynamicDivisionMember; 'dynamicDivisionsByPrebattle'; 'byPreBattleId.' + _preBattleId"/>
		<bind name="watch" value="'membersCount'; dynamicDivisionsByPrebattle.length"/>
		<bind name="firstEntityDH" value="'myAccountEntity'; CC.playerAvatar"/>
		<bind name="watchDH" value="'selfId'; ['']; myAccountEntity.avatar.id"/>
		<bind name="watch" value="'isCurPlayerCommander';	selfId == ownerId"/>
		<bind name="primaryEntityDH" value="'myDynamicDivisionMemership'; CC.dynamicDivisionMember; selfId"/>
		<bind name="watchDH" value="'divisionId'; ['myDynamicDivisionMemership.dynamicDivisionMember.evChanged']; myDynamicDivisionMemership.dynamicDivisionMember.preBattleId"/>
		<bind name="primaryEntityDH" value="'selfPlayerInvitedToDivision'; CC.invitationToDivision; _preBattleId"/>
		<bind name="collectionDH" value="CC.playerInvitedToPrebattleInfo; 'invitedPlayersCollection'"/>
		<bind name="watch" value="'invitedPlayers'; isPlayersDivision ? invitedPlayersCollection : []"/>
		<bind name="watch" value="'isSelfInvitedToThisDivision'; selfPlayerInvitedToDivision"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0.0; {alpha: 0}; {alpha: 1}"/>
		<bind name="watch" value="'isPlayersDivision'; _preBattleId == divisionId"/>
		<bind name="watch" value="'reservedPlacesCounter'; isPlayersDivision ? ((inPortParticipantsCount - invitedPlayers.length) &lt; 0) 	? 0
																																		: (inPortParticipantsCount - invitedPlayers.length)
															: (isSelfInvitedToThisDivision	&amp;&amp;	(inPortParticipantsCount &gt; 0)) 	? (inPortParticipantsCount - 1)
																																		: inPortParticipantsCount"/>
		<block>
			<style>
				<width value="220px"/>
			</style>
			<bind name="style" value="'alpha'; locked &amp;&amp; !isPlayersDivision ? 0.6 : 1"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled &amp;&amp; !(_isBattleStats)"/>
				<block className="mc_blurmap5" type="native">
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DynamicDivisionHeader'; {	_isCommander: isCurPlayerCommander,
														_isPlayersDivision: isPlayersDivision,  
														_newDivision: false,
														_name: name,
														_locked: locked,
														_isBattleStats: _isBattleStats}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="collectionRepeatDH" value="CC.dynamicDivisionMember; 'DynamicDivisionPlayerItem'; 'byPreBattleId.' + _preBattleId; {	_isPlayersDivision: isPlayersDivision,
					_isCurPlayerCommander: isCurPlayerCommander,
					_commanderId: ownerId, _isBattleStats: _isBattleStats
				}"/>
				</block>
				<block>
					<bind name="visible" value="isPlayersDivision"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="collectionRepeatDH" value="CC.playerInvitedToPrebattleInfo; 'DynamicDivisionInvitedPlayerItem'; ''; {
					_isCurPlayerCommander: isCurPlayerCommander,
					_isBattleStats: _isBattleStats
				}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="visible" value="!(isPlayersDivision)"/>
					<block>
						<bind name="visible" value="!(isSelfInvitedToThisDivision)"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="repeat" value="3 - (membersCount + inPortParticipantsCount); 'JoinDynamicDivisionItem'; {	_divisionId: _preBattleId, _locked: locked,
																															_isBattleStats: _isBattleStats}"/>
					</block>
					<block>
						<bind name="visible" value="isSelfInvitedToThisDivision"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="repeat" value="3 - (membersCount + inPortParticipantsCount - 1); 'ApplyDivisionInvitation'; { _invitationData: selfPlayerInvitedToDivision.invitationToDivision,
																															 _isBattleStats: _isBattleStats}"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="reservedPlacesCounter; 'DynamicDivisionReservedItem'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ApplyDivisionInvitation">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="countdown" value="_invitationData.expirationTime; 'countdownText'; 'mm:ss'"/>
		<bind name="action" value="'click'; 'acceptDivisionInvitation'; {id: _invitationData.preBattleId}"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
		</style>
		<block className="dock_submenu_item_bg" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1}"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: '-' + countdownText}"/>
		</block>
		<block>
			<style>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
				<marginTop value="2px"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_plus" type="native">
				<styleClass value="$MiddleVAligned"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="2px"/>
				</style>
				<default_text value="IDS_ACCEPT_INVITATION"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="JoinDynamicDivisionItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'playerAvatarEntity'; CC.playerAvatar"/>
		<bind name="watchDH" value="'enterToDynamicDivisionCooldown'; ['playerAvatarEntity.playerAvatar.evEnterToDynamicDivisionCooldownChanged']; playerAvatarEntity.playerAvatar.enterToDynamicDivisionCooldown"/>
		<bind name="watch" value="'joinTimeOut'; enterToDynamicDivisionCooldown"/>
		<bind name="style" value="'alpha'; joinTimeOut &gt; 0 ? 0.7 : 1"/>
		<bind name="catch" value="'timeoutEvent'; {joinTimeOut : 0}"/>
		<bind name="countdown" value="joinTimeOut; 'joinTimeOutText'; 'mm:ss'; 'timeoutEvent'"/>
		<bind name="soundSet" value="'button_secondary'"/>
		<bind name="action" value="'click'; joinTimeOut &gt; 0	? null :
								_divisionId	? 'joinDivision'
											: 'createDivision'; joinTimeOut &gt; 0 ? {} :
																_divisionId	? {divisionId: _divisionId}
																			: {}"/>
		<bind name="watch" value="'isJoinTimeOutTooltip'; joinTimeOut &gt; 0"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
		</style>
		<bind name="name" value="(_divisionId ? 'JoinDiv_' : 'JoinNew_') + $index"/>
		<block className="dock_submenu_item_bg" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="transition" value="rollOver &amp;&amp; !(joinTimeOut &gt; 0); 0.15; {alpha: 0}; {alpha: 1}"/>
			<bind name="style" value="'hitTest'; _locked ? false : true"/>
			<bind name="tooltip" value="'SimpleStatusTooltip';	isJoinTimeOutTooltip	? {	_text: tr('IDS_WAIT_TIMEOUT_TO_JOIN_DIVISION') + ' ' + joinTimeOutText}
																			: null"/>
			<bind name="tooltip" value="'DescriptionStatusLineTooltip'; !isJoinTimeOutTooltip	?	_divisionId	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																										_statusText: 'IDS_JOIN_DYNAMIC_DIVISION_MOUSE_HINT',
																										_descriptionText: 'IDS_JOIN_DYNAMIC_DIVISION_HINT' }
																								:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																										_statusText: 'IDS_CREATE_NEW_DIVISION_MOUSE_HINT',
																										_descriptionText: 'IDS_CREATE_NEW_DIVISION_HINT' }
																				: null"/>
		</block>
		<block>
			<style>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
				<marginTop value="2px"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_plus" type="native">
				<styleClass value="$MiddleVAligned"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="2px"/>
				</style>
				<default_text value="IDS_JOIN_DIVISION"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DynamicDivisionReservedItem">
		<style>
			<height value="27px"/>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginLeft value="11px"/>
				<marginRight value="6px"/>
				<hitTest value="false"/>
				<height value="100%"/>
			</style>
			<block className="icon_player_lock" type="native">
				<style>
					<marginTop value="3px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="1px"/>
				</style>
				<default_text value="IDS_PLACE_IS_LOCKED"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DynamicDivisionHeader">
		<style>
			<width value="100%"/>
			<height value="36px"/>
		</style>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="6px"/>
				<marginRight value="6px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block className="icon_formation" type="native">
				<style>
					<position value="absolute"/>
					<marginLeft value="-2px"/>
				</style>
				<bind name="gotoAndStop!" value=" _isCommander	? 'commander_division'
												: 'not_commander_division'"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; _isPlayersDivision	?	{	_text: _isCommander ? 'IDS_YOU_ARE_COMMANDER' : 'IDS_YOU_ARE_MEMBER_DIVISION_IN_BATTLE' }
																		: null"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<bind name="visible" value="!(_newDivision)"/>
					<bind name="tooltip" value="'DescriptionStatusLineTooltip';	_isCommander	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																					_statusText: _locked ? 'IDS_UNLOCK_DIVISION' : 'IDS_LOCK_DIVISION',
																					_descriptionText: _locked ? 'IDS_DIVISION_IS_LOCKED_COMMANDER' : 'IDS_DIVISION_IS_NOT_LOCKED_COMMANDER' }
																				: null"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; !_isCommander	? {	_text: _locked ? 'IDS_DIVISION_IS_LOCKED' : 'IDS_DIVISION_IS_NOT_LOCKED'}
																	: null"/>
					<block className="button_lock" type="native">
						<bind name="visible" value="_isCommander || (!(_isCommander) &amp;&amp; _locked)"/>
						<bind name="action" value="'click'; _isCommander ? (_locked	? 'unlockDivision'
																	: 'lockDivision')
														: null; {id: preBattleId}"/>
						<bind name="selected" value="_locked"/>
						<bind name="enabled" value="_isCommander"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="tooltip" value="'SimpleStatusTooltip'; _isPlayersDivision	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_RIGHT,
																				_text: 'IDS_HINT_RIGHT_CLICK_FOR_CONTEXT_MENU' }
																			: null"/>
					<bind name="menu" value="'DivisionHeaderRightClickBattleMenu'; _isPlayersDivision	? {	_isCommander: _isCommander,
																							_isInBattle: _isBattleStats }
																						: null; null"/>
					<block type="text">
						<styleClass value="$TextHeaderWhiteBold"/>
						<bind name="class" value="_isPlayersDivision ? '$FontColorGolden': '$None'"/>
						<bind name="text" value="_newDivision	? toUpperCase(tr('IDS_NEW_DIVISION'))
												: toUpperCase(tr('IDS_DIVISION')) + ' ' + _name"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="name" value="'LeaveDiv'"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_LEAVE_DIVISION' }"/>
			<style>
				<position value="absolute"/>
				<right value="8px"/>
				<top value="10px"/>
			</style>
			<bind name="instance" value="'CloseButton'; _isPlayersDivision	? { _action: 'leaveDivision' }
															: null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="DynamicDivisionInvitedPlayerItem">
		<bind name="dataRefDH" value="'playerEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'id'; ['']; playerEntity.avatar.id"/>
		<bind name="watchDH" value="'name'; ['']; playerEntity.accountName.name"/>
		<bind name="watchDH" value="'dbid'; ['']; playerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'preBattleId'; ['playerEntity.dynamicDivisionMember.evChanged']; playerEntity.dynamicDivisionMember.preBattleId"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.playerAvatar"/>
		<bind name="watch" value="'_isCurrentPlayer'; selfPlayerEntity.avatar.id == id"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="tooltip" value="'BattlePlayerTooltip'; {	_battleType: battleType,
												_playerDbId: dbid, _playerId: id}"/>
			<bind name="menu" value="'UIListPlayerContextMenu'; {	_playerId: id,
													_battleType: battleType,
													_complaintsAvailable: true,
													_isBattleLoading: !_isBattleStats,
													_isBattleStats: _isBattleStats }; null; null; 'contextMenuVisible'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="selected" value="contextMenuVisible"/>
		</block>
		<block className="button_cross" type="native">
			<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_RECALL_INVITATION' }"/>
			<bind name="visible" value="rollOver &amp;&amp; _isCurPlayerCommander"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="6px"/>
			</style>
			<bind name="action" value="'buttonClick'; 'revokeInvitationToDivision'; {id: id}"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="13px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: true}"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="1px"/>
				<width value="160px"/>
				<multiline value="false"/>
				<hitTest value="false"/>
				<noTranslate value="true"/>
			</style>
			<styleClass value="$TextDefaultBold"/>
			<bind name="text" value="name"/>
		</block>
	</block>
	<block className="DynamicDivisionPlayerItem">
		<bind name="dataRefDH" value="'dynamicDivisionMemberEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'playerId'; ['dynamicDivisionMemberEntity.dynamicDivisionMember.evChanged']; dynamicDivisionMemberEntity.dynamicDivisionMember.playerId"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'myAccountEntity'; CC.playerAvatar"/>
		<bind name="watchDH" value="'selfId'; ['myAccountEntity.avatar.id']; myAccountEntity.avatar.id"/>
		<bind name="primaryEntityDH" value="'selfDynamicDivisionMember'; CC.dynamicDivisionMember; myAccountEntity.avatar.id"/>
		<bind name="watchDH" value="'selfPlayerDivisionId'; ['selfDynamicDivisionMember.dynamicDivisionMember.evChanged']; selfDynamicDivisionMember.dynamicDivisionMember.preBattleId"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="primaryEntityDH" value="'playerAvatarEntity'; CC.avatar; playerId"/>
		<bind name="watchDH" value="'shipId'; 		['playerAvatarEntity.avatar.evShipRefChanged']; 		playerAvatarEntity.avatar.ship.ref.ship.id"/>
		<bind name="watchDH" value="'playerDBId'; 	['']; 													playerAvatarEntity.accountInfo.dbId"/>
		<bind name="watchDH" value="'name'; 			['']; 													playerAvatarEntity.avatar.name"/>
		<bind name="watchDH" value="'isAbuser'; 		['playerAvatarEntity.avatar.evIsAbuserStatusChanged']; 	playerAvatarEntity.avatar.isAbuser"/>
		<bind name="watchDH" value="'isAlive'; 		['playerAvatarEntity.health.evIsAliveChanged']; 		playerAvatarEntity.health.isAlive"/>
		<bind name="watchDH" value="'pureName'; 		['']; playerAvatarEntity.avatar.pureName"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; pureName"/>
		<bind name="watchDH" value="'isSpeaking'; 		['playerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; playerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="watchDH" value="'isMuted'; 			['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; 	playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watch" value="'isInVoiceChat';	!!playerVoiceChatEntity"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId"/>
		<bind name="watchDH" value="'subtype'; ['']; shipEntity.ship.subtype"/>
		<bind name="watchDH" value="'levelRome';	['']; shipEntity.ship.levelRome"/>
		<bind name="watchDH" value="'nameIDS'; ['']; shipEntity.ship.nameIDS"/>
		<bind name="watch" value="'_isCurrentPlayer'; selfId == playerId"/>
		<bind name="watch" value="'_isCommander'; _commanderId == playerId"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="_isCurrentPlayer"/>
			<bind name="tooltip" value="'BattlePlayerTooltip'; _isCurrentPlayer	? {	_playerDbId: playerDBId,
																	_playerId: playerId,
																	_battleType: battleType}
																: null"/>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="style" value="'hitTest'; !(_isCurrentPlayer)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="transition" value="rollOver &amp;&amp; !_isCurrentPlayer; 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="tooltip" value="'BattlePlayerTooltip'; !(_isCurrentPlayer) 	? {	_playerDbId: playerDBId,
																		_playerId: playerId,
																		_battleType: battleType,
																		_isContextMenuAvailable: true}
																	: null"/>
			<bind name="menu" value="'UIListPlayerContextMenu'; {	_playerId: playerId,
													_battleType: battleType,
													_complaintsAvailable: true,
													_isBattleLoading: !_isBattleStats,
													_isBattleStats: _isBattleStats };  null; null; 'contextMenuVisible'"/>
			<bind name="selected" value="contextMenuVisible"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="-1px"/>
			</style>
			<bind name="visible" value="_isCurPlayerCommander &amp;&amp; !(_isCurrentPlayer) &amp;&amp; rollOver"/>
			<block className="button_cross" type="native">
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_EXCLUDE_PLAYER_OUT_OF_DIVISION' }"/>
				<bind name="action" value="'click'; 'kickPlayerFromDivision'; {playerId: playerId}"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<top value="-1"/>
					<marginLeft value="-11px"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'UIListVoiceTextChatIcons'; {_playerId: playerId, _isInSameDivision: _isPlayersDivision, _selfPlayerDivisionId: selfPlayerDivisionId,
														 _isSpeaking: isSpeaking, _battleType: battleType,
														 _isVoiceChatMuted: isMuted, _isInVoiceChat: isInVoiceChat}"/>
			</block>
			<block>
				<style>
					<marginTop value="2px"/>
				</style>
				<bind name="instance" value="'FormationPlayerIcon'; {isCommander: _isCommander, isReady: true, isInBattle: false,
													isOtherDivision: !(_isPlayersDivision)}"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<style>
					<marginLeft value="1px"/>
					<marginTop value="2px"/>
					<width value="84px"/>
					<multiline value="false"/>
					<noTranslate value="true"/>
				</style>
				<bind name="class" value="	!isAlive &amp;&amp; !_isCurrentPlayer				? '$FontColorAlmostBlack' :
							player.isAbuser								? '$FontColorTeamkiller' :
							_isPlayersDivision 							? '$FontColorGolden'
																		: '$None'"/>
				<bind name="class" value="isAlive || _isCurrentPlayer ? '$None' : '$FontDropShadowWhite'"/>
				<bind name="class" value="_isCurrentPlayer ? '$Bold' : '$None'"/>
				<bind name="text" value="name"/>
			</block>
			<block>
				<style>
					<marginTop value="1px"/>
				</style>
				<bind name="instance" value="'ShipIcon'; {_shipType: subtype}"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<style>
					<width value="70px"/>
					<multiline value="false"/>
					<marginTop value="2px"/>
				</style>
				<bind name="class" value="_isCurrentPlayer ? '$Bold' : '$None'"/>
				<bind name="class" value="'$LetterSpacingSmall'"/>
				<bind name="class" value="	_isCurrentPlayer	?	'$FontColorGolden' :
							!isAlive 	?	'$FontColorAlmostBlack'
												: '$None'"/>
				<bind name="class" value="isAlive || _isCurrentPlayer ? '$None' : '$FontDropShadowWhite'"/>
				<bind name="text" value="levelRome + ' ' + toUpperCase(tr(nameIDS))"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DivisionHeaderRightClickBattleMenu">
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<bind name="visible" value="_isCommander"/>
			<block className="dock_submenu_item" type="native">
				<bind name="action" value="'buttonClick'; 'dismissDivision'"/>
				<params>
					<param name="soundSet" value="dropdown"/>
				</params>
				<styleClass value="$Fullsize"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_DISMISS_DIVISION'"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<bind name="action" value="'buttonClick'; 'leaveDivision'"/>
				<params>
					<param name="soundSet" value="dropdown"/>
				</params>
				<styleClass value="$Fullsize"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_LEAVE_DIVISION'"/>
				</block>
			</block>
		</block>
	</block>

	<!-- economic_boost_item -->
	<block className="EconomicBoostItemStatic">
		<block className="EconomicBoostItemStatic" type="ublock">
			<bind name="build!" value="{	_id: _id,
						_amount: _amount,
						_isReward: _isReward,
						_params: _params }"/>
		</block>
	</block>
	<block className="EconomicBoostItemView">
		<block className="EconomicBoostItemView" type="ublock">
			<bind name="build!" value="{	_ecoBoostName: _name,
						_ecoBoostType: _type,
						_amount: _amount ? _amount : 0,
						_isUnlinkedLinkableBoost: _isUnlinkedLinkableBoost ? _isUnlinkedLinkableBoost : false }"/>
		</block>
	</block>

	<!-- ensign_item -->
	<block className="EnsignItemStatic">
		<bind name="primaryEntityDH" value="'ensignEntity'; CC.ensign; _id"/>
		<bind name="name" value="'EnsignItem_' + ensignEntity.ensign.name"/>
		<style>
			<width value="60px"/>
			<height value="60px"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../exteriors/ensigns/' + ensignEntity.ensign.name + '.png'"/>
		<bind name="sharedTooltip" value="'EnsignTooltip';	{	_id: _id,
												_noMouseInstructions: true,
												_isReward: _isReward }"/>
	</block>

	<!-- exteriors_inset -->
	<block className="ExteriorsMainInset">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; playerShipId"/>
		<bind name="watchDH" value="'canEquipCamouflage';	['shipOwnEntity.ownShip.evUpdateConfig'];	shipOwnEntity.ownShip.canEquipCamouflage"/>
		<bind name="watchDH" value="'isInFormation';			['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isInFormation"/>
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.EXTERIOR"/>
		<bind name="watchDH" value="'isInExterior'; ['routeEntity.route.evIsActiveChanged']; routeEntity.route.isActive"/>
		<bind name="watchDH" value="'currentExteriorSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
		<bind name="watchDH" value="'prevExteriorSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.prevActiveChild"/>
		<bind name="watchDH" value="'availableExteriorSubroutes'; ['routeEntity.route.evChildrenChanged']; routeEntity.route.children"/>
		<bind name="watch" value="'previewExteriorId'; userPrefs.previewExteriorId"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 10; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="soundOn" value="'lagAfterAddedToStage'; 'exterior'; 'dock_inset'"/>
		<bind name="watch" value="'exteriorPage'; !canEquipCamouflage ? SC.Ui_windows.ROUTE.ENSIGN : currentExteriorSubroute"/>
		<bind name="action" value="'exteriorPage' + varChanged; !canEquipCamouflage &amp;&amp; currentExteriorSubroute == SC.Ui_windows.ROUTE.CAMOUFLAGE ? 'navigateTo' : null; 
																												{route: SC.Ui_windows.ROUTE.ENSIGN}"/>
		<bind name="action" value="'removedFromStage';			previewExteriorId	? 'setUserPref'
																	: null; {value: 0, name: 'previewExteriorId'}"/>
		<bind name="action" value="'exteriorPage' + varChanged;	previewExteriorId	? 'setUserPref'
																	: null; {value: 0, name: 'previewExteriorId'}"/>
		<bind name="action" value="'playerShipId' + varChanged;	previewExteriorId	? 'setUserPref'
																	: null; {value: 0, name: 'previewExteriorId'}"/>
		<bind name="action" value="'isInFormation' + varChanged;	previewExteriorId	? 'setUserPref'
																	: null; {value: 0, name: 'previewExteriorId'}"/>
		<bind name="action" value="'removedFromStage'; 			previewExteriorId	? 'disableExteriorPreview'
																	: null; {exteriorId: previewExteriorId}"/>
		<bind name="action" value="'exteriorPage' + varChanged;	previewExteriorId	? 'disableExteriorPreview'
																	: null; {exteriorId: previewExteriorId}"/>
		<bind name="action" value="'isInFormation' + varChanged;	previewExteriorId	? 'disableExteriorPreview'
																	: null; {exteriorId: previewExteriorId}"/>
		<styleClass value="$Fullsize"/>
		<block className="ExteriorInsetContent" type="ublock">
			<style>
				<height value="100%"/>
			</style>
			<bind name="build!" value="{_exteriorPage: exteriorPage}"/>
		</block>
	</block>

	<!-- gallery_viewer -->
	<block className="GalleryViewer">
		<bind name="watch" value="'currentSelectedImage'; 	_currentImageIdx ? _currentImageIdx : 1"/>
		<bind name="watch" value="'nextSelectedImage'; 		(currentSelectedImage == _galleryItemRendererParams.length	? 1
																										: currentSelectedImage + 1)"/>
		<bind name="watch" value="'previousSelectedImage';	(currentSelectedImage == 1	? _galleryItemRendererParams.length
																		: currentSelectedImage - 1)"/>
		<bind name="dispatch" value="'imageSelectionEv'; 'changeImage'; null; 1; 0.08"/>
		<bind name="catch" value="'imageSelectionEv'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="var" value="{ _isAutoSwitchStoped: false }"/>
		<bind name="watch" value="'autoSwitchStopped'; _isAutoSwitchStoped == true || _galleryItemRendererParams.length &lt; 2"/>
		<bind name="catch" value="'nextEv'; 		{ autoSwitchStopped: true }"/>
		<bind name="catch" value="'previousEv'; 	{ autoSwitchStopped: true }"/>
		<bind name="catch" value="'changeImage'; { autoSwitchStopped: true }"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="var" value="{ timerTimeStamp: 0 }"/>
		<bind name="catch" value="'addedToStage'; { timerTimeStamp: serverTime - (-_autoSwitchDelay) }"/>
		<bind name="countdown" value="timerTimeStamp; 'countdownText'; 'ss'; (autoSwitchStopped == true) ? null : 'timeoutEvent'"/>
		<bind name="catch" value="'timeoutEvent'; (autoSwitchStopped == true) ? null : { timerTimeStamp: serverTime - (-_autoSwitchDelay), currentSelectedImage: nextSelectedImage}"/>
		<bind name="dispatch" value="'timeoutEvent'; (autoSwitchStopped == true) ? null : 'timeOutEv'; {}; 1"/>
		<block>
			<bind name="visible" value="(_galleryItemRendererParams.length &gt; 1) &amp;&amp; (_arrowsDisabled != true)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0.5}; {alpha: 1}"/>
			<bind name="dispatch" value="'click'; 'previousEv'; {}; 1"/>
			<bind name="catch" value="'click'; { currentSelectedImage: previousSelectedImage }"/>
			<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
			<bind name="style" value="'height'; _fakeHitboxWidth &gt; 0 ? _galleryImageHeight + 'px' : '100%' "/>
			<style>
				<width value="40px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block className="button_slide_left" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
			</block>
			<block>
				<bind name="visible" value="_fakeHitboxWidth &gt; 0"/>
				<bind name="style" value="'width'; _fakeHitboxWidth ? _fakeHitboxWidth + 'px' : '0' "/>
				<bind name="style" value="'left'; _fakeHitboxWidth ? -(_fakeHitboxWidth - 40) + 'px' : '0' "/>
				<style>
					<backgroundColor value="0x01000000"/>
					<height value="100%"/>
					<position value="absolute"/>
				</style>
			</block>
		</block>
		<block>
			<block>
				<style>
					<overflow value="scroll"/>
					<scrollbar value="ModernScrollBar"/>
					<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
					<scrollArea value="ModernScrollArea"/>
					<scrollbarTrackMode value="scrollToCursor"/>
				</style>
				<bind name="style" value="'width'; _galleryImageWidth + 'px'"/>
				<bind name="style" value="'height'; _galleryImageHeight + 'px'"/>
				<bind name="repeat" value="_galleryItemRendererParams; 'GalleryItem'; {	_currentSelectedImage: 	 	currentSelectedImage,
																		_nextSelectedImage: 		nextSelectedImage,
																		_previousSelectedImage: 	previousSelectedImage,
																		_galleryImageWidth: 		_galleryImageWidth, 
																		_galleryImageHeight: 		_galleryImageHeight, 
																		_galleryItemRenderer: 		_galleryItemRenderer, 
																		_galleryItemRendererParams: _galleryItemRendererParams
																	}; true"/>
			</block>
			<block>
				<bind name="visible" value="(_galleryItemRendererParams.length &gt; 1) &amp;&amp; (_indicatorDisabled != true)"/>
				<bind name="style" value="'marginLeft'; _galleryItemRendererImageIndicatorMarginLeft ? (_galleryItemRendererImageIndicatorMarginLeft + 'px') : 0"/>
				<bind name="repeat" value="_galleryItemRendererParams; _galleryItemRendererImageIndicator; 	{	
																							_currentSelectedImage: currentSelectedImage,
																							_imageCount: _galleryItemRendererParams.length,
																							_imageWidth: _galleryImageWidth
																							}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="(_galleryItemRendererParams.length &gt; 1) &amp;&amp; (_arrowsDisabled != true)"/>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0.5}; {alpha: 1}"/>
			<bind name="dispatch" value="'click'; 'nextEv'; {}; 1"/>
			<bind name="catch" value="'click'; { currentSelectedImage: nextSelectedImage }"/>
			<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
			<bind name="style" value="'height'; _fakeHitboxWidth &gt; 0 ? _galleryImageHeight + 'px' : '100%' "/>
			<style>
				<width value="40px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block className="button_slide_right" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
			</block>
			<block>
				<bind name="visible" value="_fakeHitboxWidth &gt; 0"/>
				<bind name="style" value="'width'; _fakeHitboxWidth ? _fakeHitboxWidth + 'px' : '0' "/>
				<style>
					<backgroundColor value="0x01000000"/>
					<height value="100%"/>
					<position value="absolute"/>
				</style>
			</block>
		</block>
	</block>
	<block className="GalleryItem">
		<bind name="var" value="{imageIndex: $index + 1}"/>
		<bind name="appear" value="imageIndex == _nextSelectedImage		?	'timeOutEv'		: null ; 0.35; 0; 	{alpha: 1, left: _galleryImageWidth};		{alpha: 1, left: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage	?	'timeOutEv'		: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: -_galleryImageWidth}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="imageIndex == _nextSelectedImage		?	'nextEv'		: null ; 0.35; 0; 	{alpha: 1, left: _galleryImageWidth};		{alpha: 1, left: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage	?	'nextEv'		: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: -_galleryImageWidth}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="imageIndex == _previousSelectedImage 	?	'previousEv'	: null ; 0.35; 0; 	{alpha: 1, left: -_galleryImageWidth};		{alpha: 1, left: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage 	?	'previousEv'	: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: _galleryImageWidth};SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage 	?	'changeImage'	: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="imageIndex != _currentSelectedImage	? 	'changeImage'	: null ; 0; 0;		{alpha: 0, left: _galleryImageWidth};		{alpha: 0, left: _galleryImageWidth}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="style" value="'alpha'; (imageIndex == _currentSelectedImage) ? 1 : 0"/>
		<bind name="instance" value="_galleryItemRenderer; { _galleryItemRendererParams: _galleryItemRendererParams, _index: $index,
											_galleryImageWidth: _galleryImageWidth, _galleryImageHeight: _galleryImageHeight }"/>
	</block>
	<block className="SelectedImageIndicator">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watch" value="'indicatorLength'; ((_imageWidth - ((_imageCount - 1)*2)) / _imageCount)"/>
		<bind name="watch" value="'indicatorLengthRemainder'; ((_imageWidth - ((_imageCount - 1)*2)) % _imageCount)"/>
		<bind name="style" value="'marginRight'; (($index + 1) &lt; _imageCount) ? '2px' : '0px'"/>
		<bind name="style" value="'width'; $index &lt; indicatorLengthRemainder ? ((indicatorLength + 1) + 'px') : indicatorLength + 'px'"/>
		<bind name="var" value="{ imageIndex: $index + 1 }"/>
		<bind name="dispatch" value="'click'; 'imageSelectionEv'; { currentSelectedImage: imageIndex }; 0"/>
		<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
		<bind name="style" value="'backgroundColor'; ( _currentSelectedImage == imageIndex ) ? '0xCC4CE8AA' : '0x779CBABA'"/>
		<bind name="transition" value="rollOver; 0.05; {height: 5}; {height: 10}"/>
		<style>
			<height value="5px"/>
		</style>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<height value="60px"/>
				<top value="-10px"/>
				<position value="absolute"/>
				<width value="100%"/>
			</style>
		</block>
	</block>
	<block className="SelectedImageIndicatorAccountLeveling">
		<bind name="watch" value="'indicatorState'; _currentSelectedImage == imageIndex ? 'selected' : 'unselected'"/>
		<bind name="var" value="{ imageIndex: $index + 1 }"/>
		<bind name="dispatch" value="'click'; 'imageSelectionEv'; { currentSelectedImage: imageIndex }; 0"/>
		<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<style>
			<width value="25px"/>
			<height value="25px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="9px"/>
				<height value="9px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../accountLevel/progressBarIcons/account_leveling_gallery_conrol_' + indicatorState + '.png'"/>
		</block>
	</block>

	<!-- game_exit_modal_window -->
	<block className="ConfirmExitGameModalWindow">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'isTrainingBattle';	battleDataEntity.battleInfo.battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isReplayPlaying'; battleDataEntity.battleInfo.isReplayPlaying"/>
		<bind name="firstEntityDH" value="'avatar'; CC.playerAvatar"/>
		<bind name="watchDH" value="'isAlive'; ['avatar.health.evIsAliveChanged']; avatar.health.isAlive"/>
		<bind name="watch" value="'headerExitBattle';	isAlive &amp;&amp; !isTrainingBattle &amp;&amp; !isReplayPlaying	? 'IDS_WINDOW_HEADER_EARLY_EXIT_BATTLE'
																							: 'IDS_WINDOW_HEADER_CONFIRMATION'"/>
		<bind name="instance" value="'SmallModalWindow'; { _headerText: tr(headerExitBattle),
										  _contentElement: 'ConfirmExitGameContent' }"/>
	</block>
	<block className="ConfirmExitGameContent">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'isTrainingBattle';	battleDataEntity.battleInfo.battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isReplayPlaying'; battleDataEntity.battleInfo.isReplayPlaying"/>
		<bind name="firstEntityDH" value="'avatar'; CC.playerAvatar"/>
		<bind name="watchDH" value="'isAlive'; ['avatar.health.evIsAliveChanged']; avatar.health.isAlive"/>
		<bind name="watch" value="'isEarlyExitContentVisible'; isAlive &amp;&amp; !isTrainingBattle &amp;&amp; !isReplayPlaying"/>
		<bind name="watch" value="'buttonOrderAnimation'; isEarlyExitContentVisible ? 4 : 2"/>
		<bind name="watch" value="'focusBtn'; isEarlyExitContentVisible ? 2 : 1"/>
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="visible" value="isEarlyExitContentVisible"/>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="470px"/>
					<height value="200px"/>
					<marginTop value="16px"/>
					<backgroundImage value="url:../service_kit/premature_exit/premature_battle_exit.png"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<textAlign value="center"/>
						<width value="100%"/>
						<alpha value="0.75"/>
						<marginTop value="24px"/>
					</style>
					<styleClass value="$TextDefault21NM"/>
					<default_text value="IDS_EARLY_EXIT_BATTLE_ATTENTION"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginTop value="24px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; buttonOrderAnimation*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; buttonOrderAnimation * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<style>
					<textAlign value="center"/>
					<alpha value="0.9"/>
					<marginTop value="24px"/>
				</style>
				<styleClass value="$TextDefault25NM"/>
				<default_text value="IDS_CONFIRM_EXIT_GAME"/>
			</block>
		</block>
		<block>
			<bind name="instance" value="'ModalWindowOkCancel'; {_appearOrder: buttonOrderAnimation + 1, _focusBtn: focusBtn}"/>
		</block>
	</block>

	<!-- giftbox -->
	<block className="RewardContainerTooltip">
		<bind name="watch" value="'unifiedStatusSubheader'; _isReceived ? SC.Ui_styles.UNIFIED_STATUS.CHECK : SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText';	{	_headerText: _tooltipHeader,
																_unifiedStatus: unifiedStatusSubheader }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; _isReceived	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
																	_text: 'IDS_TOOLTIP_REWARD_TAKEN' }
																: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="_isReceived"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; _rewards.length &gt; 0 ? {_rewards: _rewards} : null"/>
			</block>
		</block>
	</block>
	<block className="RewardContainerTooltipItemAdapter">
		<bind name="entityDH" value="'rewardEntity'; $value"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'RewardContainerTooltipItem'; rewardEntity.rewardComponent"/>
	</block>
	<block className="RewardCategory">
		<block className="RewardCategory" type="ublock">
			<bind name="build!" value="{	_rewardCategory: _rewardCategory ? _rewardCategory : '',
						_isReceived: _isReceived ? _isReceived : false,
						_isUnavailable: _isUnavailable ? _isUnavailable : false,
						_isRewardActive: _isRewardActive ? _isRewardActive : false}"/>
		</block>
	</block>
	<block className="RewardItemAdapter">
		<bind name="entityDH" value="'rewardEntity'; $value"/>
		<bind name="name" value="'RewardItemAdapter' + $value"/>
		<style>
			<marginRight value="8px"/>
			<marginTop value="8px"/>
		</style>
		<bind name="instance" value="'RewardItem'; (rewardEntity.rewardComponent == null)	? null
																			:{ isPRMP: true,
																				params: rewardEntity.rewardComponent.params,
																				amount: rewardEntity.rewardComponent.amount,
																				name: rewardEntity.rewardComponent.name,
																				subtype: rewardEntity.rewardComponent.subtype,
																				type: rewardEntity.rewardComponent.type,
																				id: rewardEntity.rewardComponent.id,
																				_isClickDisabled: true,
																				_isUnavailable: _isUnavailable,
																				_isReceived: _isReceived,
																			}"/>
	</block>

	<!-- giftbox_rewards -->
	<block className="RewardItem">
		<style>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
			<marginBottom value="5px"/>
			<height value="80px"/>
		</style>
		<block>
			<bind name="name" value="'reward_item_' + type + '_' + subtype + '_' + amount + '_' + id"/>
			<bind name="alpha" value="_isReceived || _isUnavailable ? 0.5 : 1"/>
			<bind name="child" value="type; { rewardItem: {	id: id,
											amount: amount,
											name: name,
											type: type,
											subtype: subtype,
											isPRMP: isPRMP,
											params: params }, 	_withTooltip: true,
																_disableWarning: _disableWarning,
																_isClickDisabled: _isClickDisabled,
																_isReceived: _isReceived,
																_isBattlePassSmallShipView: _isBattlePassSmallShipView };
																									{	Exterior: 'GiftboxRewardExterior',
																										Modernization: 'RewardModernizationItem',
																										Ability: 'RewardResourceItem',
																										Ship: 'RewardShip',
																										Resource: 'RewardResourceItem',
																										ResourceCoeff: 'RewardResourceItem',
																										Crew: 'RewardCrew',
																										Unit: 'RewardResourceUnit',
																										Reward: 'UnsupportedReward',
																										Token: 'RewardTokenItem',
																										Exchange: 'RewardResourceItem',
																										Achievement: 'RewardAchievementItem',
																										Lootbox: 'RewardLootboxItem',
																										Collection: 'RewardResourceItem',
																										Unlock: 'RewardCollectionCrewItem',
																										DogTag: 'RewardDogTagItem',
																										SSETask: 'RewardSSEItem',
																										CampaignStar: 'RewardCampaignStarItem',
																										DummyReward: 'RewardDummyItem',
																										ShipComponent: 'RewardShipComponentItem',
																										ShipMaterial: 'RewardShipMaterialItem',
																										StrategicActionsBonus: 'RewardResourceItem',
																									}"/>
		</block>
		<block>
			<bind name="visible" value="!isPRMP || _isReceived"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<width value="48px"/>
				<height value="48px"/>
				<top value="16px"/>
				<hitTest value="false"/>
				<backgroundImage value="url:../reward_categories/icon_check.png"/>
			</style>
		</block>
	</block>
	<block className="RewardSSEItem">
		<bind name="entityDH" value="'sseEntity'; rewardItem.params.sseEntityId"/>
		<bind name="watch" value="'isPersistent'; !!sseEntity.sseCorePersistent"/>
		<bind name="watch" value="'sseCategoryId'; isPersistent ? sseEntity.sseCorePersistent.tag : sseEntity.sseCore.tag"/>
		<bind name="watch" value="'sseId'; isPersistent ? sseEntity.sseCorePersistent.id : sseEntity.sseCore.id"/>
		<bind name="action" value="'click'; 'SSEProxyCommonUSS.selectTag'; { tagId: sseCategoryId, skipDone: false}"/>
		<bind name="action" value="'click'; 'SSEProxyCommonUSS.selectItem'; { itemId: sseId }"/>
		<bind name="action" value="'click'; 'moveFromRewards' "/>
		<bind name="action" value="'click'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.SSE}"/>
		<bind name="tooltip" value="'PostBattleSseTaskTooltip'; { _sseId: rewardItem.params.sseEntityId, _isSseTokenReward: true }"/>
		<style>
			<backgroundImage value="url:../reward_icons/sse.png"/>
			<height value="54px"/>
			<width value="70px"/>
		</style>
	</block>
	<block className="GiftboxRewardExterior">
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; rewardItem.id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="primaryEntityDH" value="'featureEntity_14'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[14]"/>
		<bind name="watchDH" value="'feature_14'; ['featureEntity_14.accountFeature.evStateChanged']; featureEntity_14.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_14"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 14}"/>
		<bind name="primaryEntityDH" value="'featureEntity_15'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[15]"/>
		<bind name="watchDH" value="'feature_15'; ['featureEntity_15.accountFeature.evStateChanged']; featureEntity_15.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_15"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 15}"/>
		<bind name="watch" value="'_isPermoflage'; exteriorConfig.type == ExteriorTypes.CAMOUFLAGE &amp;&amp; exteriorConfig.isPermanent"/>
		<bind name="watch" value="'isFlagsUnavailable';		(feature_14 == 'locked' &amp;&amp; exteriorConfig.type == ExteriorTypes.FLAGS)"/>
		<bind name="watch" value="'isCamouflageUnavailable';	(feature_15 == 'locked' &amp;&amp; exteriorConfig.type == ExteriorTypes.CAMOUFLAGE)"/>
		<bind name="watch" value="'isEcoBoost';	rewardItem.subtype == 'Multiboost'	||
								rewardItem.subtype == 'Globalboost' ||
								rewardItem.subtype == 'Camoboost'"/>
		<bind name="action" value="	'click'; (isFlagsUnavailable || isCamouflageUnavailable || rewardItem.isPRMP || _isPermoflage)	? null
																													: 'goToReward';
					{ type: rewardItem.type, subtype: rewardItem.subtype }"/>
		<bind name="style" value="'marginTop';	isEcoBoost ? 0 : 20px"/>
		<bind name="style" value="'marginLeft';	isEcoBoost ? 0 : 8px"/>
		<bind name="style" value="'marginRight';	isEcoBoost ? 0 : 8px"/>
		<block>
			<bind name="child" value="rewardItem.subtype;	{	_id: rewardItem.id,
												_amount: rewardItem.amount,
												_isReward: true,
												_params: rewardItem.params };	{	Flags:		'SignalItemStatic',
																					Camoboost:	'EconomicBoostItemStatic',
																					Multiboost:	'EconomicBoostItemStatic',
																					Globalboost:'EconomicBoostItemStatic',
																					Camouflage:	'CamouflageItemStatic',
																					Permoflage:	'CamouflageItemStatic',
																					Skin:		'CamouflageItemStatic',
																					MSkin:		'CamouflageItemStatic',
																					Ensign:		'EnsignItemStatic' }"/>
		</block>
	</block>
	<block className="RewardContainerTooltipItem">
		<style>
			<width value="100%"/>
			<marginTop value="8px"/>
			<marginBottom value="8px"/>
		</style>
		<bind name="name" value="'reward_current_item_' + name"/>
		<bind name="child" value="type; { rewardItem: {	id: id,
										amount: amount,
										name: name,
										clientName: clientName,
										type: type,
										subtype: subtype,
										isPRMP: true,
										params: params}, 	_withTooltip: withTooltip,
															_disableWarning: _disableWarning,
															_isBattlePassSmallShipView: _isBattlePassSmallShipView }; {	Exterior: 'RewardContainerTooltipItemExterior',
																									Modernization: 'RewardContainerTooltipItemModenizationOrAbility',
																									Ability: 'RewardContainerTooltipItemModenizationOrAbility',
																									Ship: 'RewardContainerTooltipItemShip',
																									Resource: 'RewardContainerTooltipItemWithSpecialIcon',
																									ResourceCoeff: 'RewardContainerTooltipItemWithSpecialIcon',
																									Crew: 'RewardContainerTooltipItemCrew',
																									Unit: 'RewardUnitTooltipItem',
																									Reward: 'UnsupportedReward',
																									Token: 'TokenReward',
																									Exchange: 'RewardPersonalExchangeRatesTooltip',
																									Lootbox: 'LootboxReward',
																									Collection: 'RewardCollectionCardItemTooltip',
																									Unlock: 'RewardCollectionCrewItemTooltip',
																									DogTag: 'RewardDogTagTooltipItem',
																									SSETask: 'RewardSseTooltipItem',
																									DummyReward: 'DummyReward',
																									CampaignStar: 'RewardCampaignStarTooltipItem',
																									Achievement: 'RewardAchievementTooltipItem',
																									ShipComponent: 'RewardShipComponentTooltipItem',
																									ShipMaterial: 'RewardShipMaterialTooltipItem' }"/>
	</block>
	<block className="RewardAchievementTooltipItem">
		<bind name="primaryEntityDH" value="'achievementEntity'; CC.achievement; rewardItem.id"/>
		<bind name="watch" value="'typeIDS'; toUpperCase('IDS_ACHIEVEMENT_TYPE_' + achievementEntity.achievementInfo.uiType)"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: 'url:../achievements/icon_achievement_' +
																		achievementEntity.achievementInfo.name + '.png',
															_imageWidth: '80px',
															_imageHeight: '80px',
															_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
															_headerText: achievementEntity.achievementInfo.nameIDS,
															_headerIconType: 0,
															_subheaderText: typeIDS}"/>
	</block>
	<block className="RewardCampaignStarItem">
		<bind name="instance" value="'IconWithAmount'; {	_iconPath: 'url:../reward_icons/campaign_star.png',
										_amount: rewardItem.amount,
										_width: '80px',
										_height: '80px'	}"/>
		<bind name="tooltip" value="'RewardCampaignStarTooltip'; _withTooltip ? { rewardItem: rewardItem } : null"/>
	</block>
	<block className="RewardCampaignStarTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'RewardCampaignStarTooltipItem'; { rewardItem: rewardItem }"/>
			</block>
		</block>
	</block>
	<block className="RewardCampaignStarTooltipItem">
		<bind name="primaryEntityDH" value="'taskEntity'; CC.campaignTaskParams; rewardItem.params.taskId"/>
		<bind name="primaryEntityDH" value="'missionEntity'; CC.campaignMissionParams; taskEntity.campaignTaskParams.missionID"/>
		<bind name="watch" value="'campaignMissionParams'; missionEntity.campaignMissionParams"/>
		<bind name="watch" value="'uiNumber'; campaignMissionParams.uiNumber"/>
		<bind name="primaryEntityDH" value="'campaignEntity'; CC.campaignParams; campaignMissionParams.campaignID"/>
		<bind name="watch" value="'campaignParams'; campaignEntity.campaignParams"/>
		<bind name="watch" value="'campaignName'; campaignParams.name"/>
		<bind name="watch" value="'campaignNameIDS'; 'IDS_' + campaignName + '_TITLE'"/>
		<bind name="watch" value="'subheaderText'; tr(subst('IDS_CAMPAIGN_STARS_DESCRIPTION', [], { _campaignName: tr(campaignNameIDS), _missionNumber: uiNumber }))"/>
		<bind name="watch" value="'iconPath'; 'url:../reward_icons/campaign_star.png'"/>
		<bind name="watch" value="'amount'; rewardItem.amount"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'IconWithAmount'; {	_width: '80px',
											_height: '80px',
											_iconPath: iconPath,
											_amount: amount	}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {	_title: 'IDS_REWARD_CAMPAIGNSTAR_TITLE',
													_description: subheaderText}"/>
		</block>
	</block>
	<block className="UnsupportedReward">
		<block type="text">
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="'$FontColorOrange'"/>
			<style>
				<marginBottom value="5px"/>
			</style>
			<bind name="text" value="'REWARD: '+ rewardItem.type+'- IS NOT SUPPORTED'"/>
		</block>
	</block>
	<block className="TokenReward">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'RewardTokenItem'; { rewardItem: rewardItem, _withTooltip: _withTooltip }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {	_title: 'IDS_' + toUpperCase(rewardItem.name) + '_TOKEN',
													_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK}"/>
		</block>
	</block>
	<block className="LootboxReward">
		<bind name="primaryEntityDH" value="'featureEntity_21'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[21]"/>
		<bind name="watchDH" value="'feature_21'; ['featureEntity_21.accountFeature.evStateChanged']; featureEntity_21.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_21"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 21}"/>
		<bind name="watch" value="'warningText'; !_disableWarning &amp;&amp; (feature_21 == 'locked') ? 'IDS_LOW_ACCESS_LEVEL' : ''"/>
		<bind name="watch" value="'paramsLootbox'; rewardItem.params.additionalInfo"/>
		<bind name="watch" value="'isPremium'; paramsLootbox &amp; 1 &lt;&lt; SC.Common.LOOTBOX_ADDITIONAL_INFO.IS_PREMIUM"/>
		<bind name="watch" value="'subtitle'; isPremium ? 'IDS_LOOTBOX_PREMIUM' : 'IDS_LOOTBOX'"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'IconWithAmount'; {	_width: '80px',
											_height: '80px',
											_rewardItem: rewardItem,
											_iconPath: 'url:../reward_icons/' + rewardItem.subtype + '.png',
											_amount: rewardItem.amount	}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {	_title: 'IDS_REWARD_LOOTBOX_' + toUpperCase(rewardItem.subtype) + '_TITLE_SHORT',
													_description: subtitle,
													_warning: warningText}"/>
		</block>
	</block>
	<block className="DummyReward">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: 'url:../reward_icons/' + rewardItem.subtype + '.png',
															_imageWidth: 80,
															_imageHeight: 80,
															_headerText: 'IDS_REWARD_' + toUpperCase(rewardItem.subtype) + '_TITLE' }"/>
	</block>
	<block className="RewardShipComponentTooltipItem">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; rewardItem.params.shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipNameIDS'; ['']; shipInfo.nameIDS"/>
		<bind name="watch" value="'iconPath'; 'url:../reward_icons/' + rewardItem.type + '.png'"/>
		<bind name="watch" value="'title'; subst('IDS_CURRENCY_SHIPCOMPONENT', [], {_shipName: toUpperCase(tr(shipNameIDS))})"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'IconWithAmount'; {	_width: '80px',
											_height: '80px',
											_iconPath: iconPath,
											_amount: rewardItem.amount }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {	_title: title,
													_description: 'IDS_SHIP_SHARDS_COMMON_TITLE'}"/>
		</block>
	</block>
	<block className="RewardShipMaterialTooltipItem">
		<bind name="watch" value="'shipLevel'; rewardItem.params.shipLevel"/>
		<bind name="watch" value="'iconPath'; 'url:../reward_icons/' + rewardItem.type + '_' + shipLevel + '.png'"/>
		<bind name="watch" value="'title'; subst('IDS_CURRENCY_SHIPMATERIAL', [], {_shipLevel: toRomanShipLevels(shipLevel)})"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'IconWithAmount'; {	_width: '80px',
											_height: '80px',
											_iconPath: iconPath,
											_amount: rewardItem.amount }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {	_title: title,
													_description: 'IDS_SHIP_SHARDS_COMMON_TITLE'}"/>
		</block>
	</block>
	<block className="RewardContainerTooltipItemShip">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; rewardItem.id; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watch" value="'shipProfitabilitySuffix'; 	shipInfo.uiSpecial		? 'special' :
												shipInfo.isFarming		? 'premium'
																		: 'elite' "/>
		<bind name="watch" value="'rentDuration'; rewardItem.params.rentDuration"/>
		<bind name="watch" value="'rentUntil'; rewardItem.params.rentUntil"/>
		<bind name="watch" value="'isRental'; rentDuration || rentUntil"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<bind name="instance" value="'RewardShip'; {	rewardItem: rewardItem,
										_isRentHidden: true }"/>
		</block>
	</block>
	<block className="RewardContainerTooltipItemCrew">
		<bind name="watch" value="'shipId'; rewardItem.params.specializationID"/>
		<bind name="watch" value="'crewHistoryId'; rewardItem.params.primaryKey"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crewHistoryInfo; crewHistoryId"/>
		<bind name="watchDH" value="'crew'; ['crewEntity.crew.evChanged']; crewEntity.crewHistoryInfo"/>
		<bind name="watch" value="'crewNation'; crew.nation"/>
		<bind name="watch" value="'isCrewNationSpecialization'; crewNation != SC.Common.NATION.COMMON"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'CrewStereotype'; { _crewHistoryId: crewHistoryId, _size: 0 }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="8px"/>
				</style>
				<bind name="instance" value="'CrewNameWithIcon'; { _crewHistoryId: crewHistoryId }"/>
			</block>
			<block>
				<bind name="visible" value="isCrewNationSpecialization &amp;&amp; !shipId"/>
				<style>
					<marginTop value="-4px"/>
				</style>
				<bind name="instance" value="'NationFlagsTiny'; isCrewNationSpecialization &amp;&amp; !shipId ? { _shipCountry: crewNation } : null"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; shipId &gt; 0 ? { _shipId: shipId, _withFlag: true } : null"/>
			</block>
		</block>
	</block>
	<block className="RewardContainerTooltipItemWithSpecialIcon">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="80px"/>
				<top value="0"/>
				<align value="center"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'RewardResourceItem'; { rewardItem: rewardItem, _withTooltip: _withTooltip }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; { _title: 'IDS_REWARD_' + toUpperCase(rewardItem.subtype) + '_TITLE' }"/>
		</block>
	</block>
	<block className="RewardContainerTooltipItemExterior">
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; rewardItem.id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; rewardItem.params.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'signalEntity';		CC.signal;		rewardItem.id"/>
		<bind name="primaryEntityDH" value="'ensignEntity';		CC.ensign;		rewardItem.id"/>
		<bind name="primaryEntityDH" value="'ecoBoostEntity';	CC.ecoBoost;	rewardItem.id"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'filtersByLevel'; 'byFilterType.' + 'level'"/>
		<bind name="collectionDesign" value="'DES_filtersByLevel'; 'exteriorLevelfilters'; {'filter':isIn($entity.id, exteriorEntity.shipListRestrictions.selectedFilters)}; []"/>
		<bind name="collectionFields" value="'exteriorLevelfilters'; ['shipFilterItem.field']"/>
		<bind name="watch" value="'doesExteriorHasLevelRestrictions'; exteriorLevelfilters.length &gt; 0"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'filtersByLevel'; 'byFilterType.' + 'level'"/>
		<bind name="collectionDesign" value="'DES_filtersByLevel'; 'ecoboostLevelfilters'; {'filter':isIn($entity.id, ecoBoostEntity.shipListRestrictions.selectedFilters)}; []"/>
		<bind name="collectionFields" value="'ecoboostLevelfilters'; ['shipFilterItem.field']"/>
		<bind name="watch" value="'doesEcoboostHasLevelRestrictions'; ecoboostLevelfilters.length &gt; 0"/>
		<bind name="watch" value="'hasLevelRestrictions'; doesExteriorHasLevelRestrictions || doesEcoboostHasLevelRestrictions"/>
		<bind name="watch" value="'itemName';	exteriorEntity	? toUpperCase('IDS_' + exteriorConfig.name) :
								signalEntity	? toUpperCase('IDS_' + signalEntity.signal.name) :
								ensignEntity	? toUpperCase('IDS_' + ensignEntity.ensign.name) :
								ecoBoostEntity	? rewardItem.subtype != 'Multiboost'	? toUpperCase('IDS_' + ecoBoostEntity.ecoBoost.name)
																						: 'IDS_MULTIBOOST_TITLE'
												: ''"/>
		<bind name="watchDH" value="'ecoBoostRarity'; []; ecoBoostEntity.ecoBoost.rarity"/>
		<bind name="watchDH" value="'signalRarity'; []; signalEntity.signal.rarity"/>
		<bind name="watch" value="'basicTitleWithShipName';	rewardItem.subtype == 'Multiboost'	? 'IDS_MULTIBOOST_WITH_SHIP_TITLE'
																				: 'IDS_EXTERIOR_NAME_WITH_SHIP'"/>
		<bind name="watch" value="'basicTitleWithShipLevel';	rewardItem.subtype == 'Multiboost'	? 'IDS_MULTIBOOST_WITH_LEVEL_TITLE'
																				: 'IDS_EXTERIOR_NAME_WITH_LEVEL'"/>
		<bind name="watch" value="'romanLevel'; exteriorLevelfilters.length	? toRomanShipLevels(exteriorLevelfilters_shipFilterItem_field)
															: toRomanShipLevels(ecoboostLevelfilters_shipFilterItem_field)"/>
		<bind name="watch" value="'title';	rewardItem.params.shipId != null	? subst(basicTitleWithShipName, [], {exteriorName: tr(itemName), shipName: toUpperCase(tr(shipInfo.nameIDS))}) :
							hasLevelRestrictions				? subst(basicTitleWithShipLevel, [], {exteriorName: tr(itemName), levelRange: romanLevel})
																: tr(itemName)"/>
		<bind name="watch" value="'description';	rewardItem.subtype == SC.Ui_common.REWARD_EXTERIOR_TYPE.FLAGS			? tr('IDS_BATTLE_SIGNAL_RARITY_' + signalRarity) :
								isIn(rewardItem.subtype, SC.Ui_common.REWARD_EXTERIOR_TYPE.SHIP_PAINT)	? tr('IDS_EXTERIOR_TYPE_' + rewardItem.subtype) :
								rewardItem.subtype == SC.Ui_common.REWARD_EXTERIOR_TYPE.ENSIGN			? ensignEntity.ensign.group	? ('IDS_ENSIGN_GROUP_SUBTYPE_' + ensignEntity.ensign.group)
																																	: 'IDS_SEASON_ENSIGN' :
								rewardItem.subtype == SC.Ui_common.REWARD_EXTERIOR_TYPE.CAMOBOOST		? tr('IDS_ECONOMIC_BOOST_TYPE_EXPENDABLE_' + ecoBoostRarity) :
								rewardItem.subtype == SC.Ui_common.REWARD_EXTERIOR_TYPE.MULTIBOOST ||
								rewardItem.subtype == SC.Ui_common.REWARD_EXTERIOR_TYPE.GLOBALBOOST		? 'IDS_ECONOMIC_BOOST_TYPE_MULTIBOOST'
																										: itemName + '_DESCRIPTION'"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="80px"/>
				<top value="0"/>
				<align value="center"/>
				<marginRight value="16px"/>
			</style>
			<bind name="child" value="rewardItem.subtype;	{	_id: rewardItem.id,
												_isReward: true,
												_amount: rewardItem.amount,
												_params: rewardItem.params };

											{	Flags:			'SignalItemStatic',
												Camoboost:		'EconomicBoostItemStatic',
												Multiboost:		'EconomicBoostItemStatic',
												Globalboost:	'EconomicBoostItemStatic',
												Camouflage:		'CamouflageItemStatic',
												Permoflage:		'CamouflageItemStatic',
												Skin:			'CamouflageItemStatic',
												MSkin:			'CamouflageItemStatic',
												Ensign:			'EnsignItemStatic' }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {_title: title, _description: description}"/>
		</block>
	</block>
	<block className="RewardContainerTooltipItemModenizationOrAbility">
		<bind name="watch" value="'title'; (rewardItem.type =='Modernization'	? 'IDS_TITLE_' + toUpperCase(rewardItem.params.item.title)
																: rewardItem.params.item.title)"/>
		<bind name="watch" value="'description'; rewardItem.type =='Modernization' ? ('IDS_MODERNIZATION_' + toUpperCase(rewardItem.params.item.type))
																	: 'IDS_TITLE_CONSUMABLES'"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="80px"/>
				<top value="0"/>
				<align value="center"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'RewardResourceItem'; {rewardItem: rewardItem, _withTooltip: _withTooltip}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {_title:title, _description: description}"/>
		</block>
	</block>
	<block className="RewardCollectionCardItemTooltip">
		<bind name="watch" value="'title'; 					('IDS_' + rewardItem.params.item.title)"/>
		<bind name="watch" value="'collectionName'; 			('IDS_' + rewardItem.params.collectionName)"/>
		<bind name="watch" value="'collectionNameQuotes'; 	(tr(toUpperCase(collectionName) + '_QUOTES'))"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="80px"/>
				<top value="0"/>
				<align value="center"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'RewardCollectionItem'; { _iconPath: ('url:' + rewardItem.params.item.iconPath), _isDuplicate: rewardItem.params.isDuplicate }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {	_title: tr(toUpperCase(title)),
													_description: subst('IDS_COLLECTION_NAME', [], { _collectionName: collectionNameQuotes })	}"/>
		</block>
	</block>
	<block className="RewardTooltipItemText">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-4"/>
			</style>
			<styleClass value="$TextDefaultBold17NM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_title"/>
		</block>
		<block type="text">
			<bind name="visible" value="_description"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'alpha'; textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.75 : textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_description"/>
		</block>
		<block type="text">
			<bind name="visible" value="_warning"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<leading value="-2"/>
				<textColor value="0xFFFF9933"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_warning"/>
		</block>
	</block>
	<block className="IconWithAmount">
		<bind name="style" value="'width'; (_width ? _width : '60px')"/>
		<bind name="style" value="'height'; (_height ? _height : '60px')"/>
		<bind name="style" value="'backgroundImage'; _iconPath"/>
		<style>
			<backgroundSize value="fill"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageItemsCounter'; _amount ? {_amount: _amount} : null"/>
		</block>
	</block>
	<block className="RewardCollectionItem">
		<bind name="action" value="'click';  'moveFromRewards'"/>
		<bind name="action" value="'click'; 'goToReward';  { type: 'Lootbox', subtype: _rewardItem.params.collectionName,	subAlbum: _rewardItem.params.subAlbum }"/>
		<block>
			<style>
				<width value="90px"/>
				<height value="90px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; _iconPath"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageItemsCounter'; _amount &gt; 1 ? {_amount: _amount} : null"/>
		</block>
		<block>
			<bind name="visible" value="_isDuplicate"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'IssuedStampSmall'; _isDuplicate ? {_angleRotation: -3, _text: tr('IDS_DUPLICATE_STAMP')} : null"/>
		</block>
	</block>
	<block className="RewardResourceItem">
		<bind name="watch" value="'isEventumCNReward'; rewardItem.subtype == SC.Common.CURRENCIES.EVENTUM_CN"/>
		<bind name="watch" value="'isEventum'; isIn(rewardItem.subtype, SC.Common.CURRENCIES.IS_EVENT_CURRENCY)"/>
		<bind name="tooltip" value="'RewardResourcesCommonTooltip'; _withTooltip &amp;&amp; !isEventum	? {	rewardItem: rewardItem,
																					_isDuplicate: rewardItem.params.isDuplicate }
																				: null"/>
		<bind name="sharedTooltip" value="'CurrencyTooltip'; _withTooltip &amp;&amp; isEventum	? {	_currency: rewardItem.subtype,
																			_amount: rewardItem.amount,
																			_isEventumReward: isEventum &amp;&amp; !isEventumCNReward }
																		: null"/>
		<bind name="child" value="rewardItem.subtype ? rewardItem.subtype : 'noItem'; {	_rewardItem: rewardItem,
																		_iconPath: ('url:' + rewardItem.params.item.iconPath),
																		_isDuplicate: rewardItem.params.isDuplicate,
																		_amount: rewardItem.amount};	{	exp: 'RewardResources',
																											gold: 'RewardResources',
																											steel: 'RewardResources',
																											coal: 'RewardResources',
																											molybdenum: 'RewardResources',
																											brass: 'RewardResources',
																											saltpeter: 'RewardResources',
																											eventum_1: 'RewardResources',
																											eventum_2: 'RewardResources',
																											eventum_3: 'RewardResources',
																											eventum_4: 'RewardResources',
																											eventum_5: 'RewardResources',
																											eventum_6: 'RewardResources',
																											eventum_7: 'RewardResources',
																											eventum_8: 'RewardResources',
																											eventum_9: 'RewardResources',
																											eventum_10: 'RewardResources',
																											eventum_cn: 'RewardResources',
																											clientum_1: 'RewardResources',
																											clientum_2: 'RewardResources',
																											santium: 'RewardResources',
																											dockyardum_1: 'RewardResources',
																											dockyardum_2: 'RewardResources',
																											freeXP: 'RewardResources',
																											credits: 'RewardResources',
																											eliteXP: 'RewardResources',
																											accPoints: 'RewardResources',
																											crewXP: 'RewardResources',
																											clanResource: 'RewardResources',
																											premium: 'RewardResourcePremium',
																											wows_premium: 'RewardResourceWOWSPremium',
																											slots: 'RewardResourceSlot',
																											expCoeff: 'RewardResourcesCoeff',
																											freexpCoeff: 'RewardResourcesCoeff',
																											creditsCoeff: 'RewardResourcesCoeff',
																											shipCrewFreeXpCoeff: 'RewardResourcesCoeff',
																											accPointsCoeff: 'RewardResourcesCoeff',
																											crewPointsCoeff: 'RewardResourcesCoeff',
																											Ability: 'IconWithAmount',
																											Modernization: 'IconWithAmount',
																											creditsGold: 'RewardPersonalExchangeRates',
																											xpFreeExp: 'RewardPersonalExchangeRates',
																											goldMoney: 'RewardPersonalExchangeRates',
																											CollectionCard: 'RewardCollectionItem',
																											CollectionAlbum: 'RewardCollectionItem',
																											paragonXP: 'RewardResources',
																											recruitment_points: 'RewardResources',
																											noItem: 'EmptyItem',
																											snowflake: 'RewardResources',
																											bpPoints: 'RewardResources',
																											strategic_points: 'RewardResources'}"/>
		<bind name="action" value="'click'; rewardItem.isPRMP || !(rewardItem.type == 'Ability') ? '' : 'goToReward'; { type: rewardItem.type, subtype: rewardItem.subtype }"/>
	</block>
	<block className="RewardDogTagItem">
		<bind name="action" value="'click'; _isClickDisabled	? ''
											: 'moveFromRewards' "/>
		<bind name="request" value="'click'; _isClickDisabled ? '' : 'modalDogTag';  {}"/>
		<bind name="primaryEntityDH" value="'dogTagEntity'; CC.dogTagComponent; rewardItem.id"/>
		<bind name="watchDH" value="'gpName'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.gpName"/>
		<bind name="watchDH" value="'isColorizable'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.isColorizable"/>
		<bind name="tooltip" value="'DogTagComponentTooltip'; _isNoTooltip	? null
															: { _elementEntityId: dogTagEntity.id,
																_isNotSelf: true,
																_isRewardTooltip: true,
																_isClickDisabled: _isClickDisabled }"/>
		<bind name="watch" value="'iconPath'; 'url:../dogTags/small/' + gpName + (isColorizable ? '/PCNT001' : '') + '.png'"/>
		<block>
			<bind name="instance" value="'IconWithAmount'; {	_rewardItem: rewardItem,
											_iconPath: iconPath,
											_amount: rewardItem.amount &gt; 1 ? rewardItem.amount : null,
											_width: '80px',
											_height: '80px'	}"/>
		</block>
		<block>
			<bind name="visible" value="rewardItem.params.isDuplicate"/>
			<style>
				<position value="absolute"/>
				<top value="50%"/>
				<left value="50%"/>
				<alpha value="0.9"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_issued" type="native">
				<bind name="scaleX" value="0.6"/>
				<bind name="scaleY" value="0.6"/>
				<bind name="rotation" value="-3"/>
				<innerBind elementName="item.item" name="text" value="tr('IDS_DUPLICATE_STAMP')"/>
				<bind name="gotoAndStop!" value="'issued'"/>
			</block>
		</block>
	</block>
	<block className="RewardDogTagTooltipItem">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<bind name="primaryEntityDH" value="'dogTagEntity'; CC.dogTagComponent; rewardItem.id"/>
		<bind name="watchDH" value="'gpName'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.gpName"/>
		<bind name="watchDH" value="'categoryId'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.categoryId"/>
		<bind name="watch" value="'title'; tr(toUpperCase('IDS_DOGTAG_' + gpName + '_NAME'))"/>
		<bind name="watch" value="'description'; tr(toUpperCase('IDS_DOGTAG_COMPONENT_TOOLTIP_CATEGORY_' + categoryId))"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'RewardDogTagItem'; {rewardItem: rewardItem, _isNoTooltip: true, _isClickDisabled: _isClickDisabled}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {_title:title, _description: description}"/>
		</block>
	</block>
	<block className="RewardModernizationItem">
		<style>
			<marginTop value="9px"/>
			<marginRight value="8px"/>
			<marginLeft value="8px"/>
		</style>
		<bind name="tooltip" value="'RewardModernizationTooltip'; _withTooltip ? {rewardItem: rewardItem} : null"/>
		<bind name="instance" value="'IconWithAmount'; {	_rewardItem: rewardItem,
										_iconPath: ('url:' + rewardItem.params.item.iconPath),
										_amount: rewardItem.amount	}"/>
	</block>
	<block className="RewardTokenItem">
		<style>
			<width value="80px"/>
			<height value="80px"/>
			<backgroundSize value="cover"/>
		</style>
		<bind name="action" value="'click'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_CAMPAIGN}"/>
		<bind name="tooltip" value="'RewardResourcesTooltip'; _withTooltip ? {rewardItem: rewardItem} : null"/>
		<bind name="style" value="'backgroundImage'; ('url:../tokens/' + rewardItem.name + '.png')"/>
	</block>
	<block className="RewardLootboxItem">
		<bind name="tooltip" value="'RewardResourcesCommonTooltip'; _withTooltip	? {	rewardItem: rewardItem} : null"/>
		<bind name="instance" value="'IconWithAmount'; {	_width: '80px',
										_height: '80px',
										_rewardItem: rewardItem, 
										_iconPath: 'url:../reward_icons/' + rewardItem.subtype + '.png',
										_amount: rewardItem.amount	}"/>
	</block>
	<block className="RewardDummyItem">
		<bind name="tooltip" value="'RewardDummyTooltip'; _withTooltip ? { rewardItem: rewardItem} : null"/>
		<bind name="instance" value="'IconWithAmount'; {	_width: '80px',
										_height: '80px',
										_rewardItem: rewardItem,
										_iconPath: 'url:../reward_icons/' + rewardItem.subtype + '.png' }"/>
	</block>
	<block className="RewardShip">
		<block className="RewardShip" type="ublock">
			<bind name="build!" value="{ _rewardItem: rewardItem,
						_isRentHidden: _isRentHidden ? _isRentHidden : false,
						_isBattlePassSmallShipView: _isBattlePassSmallShipView ? _isBattlePassSmallShipView : false }"/>
		</block>
	</block>
	<block className="RewardResources">
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../reward_icons/' + _rewardItem.subtype + '.png'"/>
		<bind name="watch" value="'currency'; 	_rewardItem.subtype == SC.Common.CURRENCIES.CREW_XP				?	SC.Common.CURRENCIES.XP :
		 						_rewardItem.subtype == SC.Common.REWARD_SUBTYPE.CLANRESOURCE	?	SC.Common.CURRENCIES.CLAN_RESOURCE
																								:	_rewardItem.subtype"/>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageCurrencyCounter'; _rewardItem.amount &gt; 0 ? {priceInfo: {finalPrice: _rewardItem.amount, currency: currency}} : null"/>
		</block>
	</block>
	<block className="RewardCrew">
		<block className="CrewStereotype" type="ublock">
			<bind name="build!" value="{	_crewHistoryId: rewardItem.params.primaryKey,
						_showRentIcon: true,
						_size: 0,
						_isAnimated: !_isReceived }"/>
		</block>
	</block>
	<block className="RewardResourceSlot">
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../reward_icons/' + _rewardItem.subtype + '.png')"/>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageItemsCounter'; _rewardItem.amount &gt; 0 ? {_amount: _rewardItem.amount} : null"/>
		</block>
	</block>
	<block className="RewardResourcePremium">
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../reward_icons/' + _rewardItem.subtype + '.png')"/>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageTextCounter'; {_text: _rewardItem.params.text, _textColor: SC.Ui_styles.SERVICE_COLORS.YELLOW}"/>
		</block>
	</block>
	<block className="RewardResourceWOWSPremium">
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../reward_icons/' + _rewardItem.subtype + '.png')"/>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageTextCounter'; {_text: _rewardItem.params.text, _textColor: SC.Ui_styles.SERVICE_COLORS.YELLOW}"/>
		</block>
	</block>
	<block className="RewardResourcesCoeff">
		<bind name="watch" value="'isResMulCoeffPositive'; _rewardItem.amount &gt; 0"/>
		<bind name="watch" value="'resMulCoeff'; (isResMulCoeffPositive ? '+' : '') + _rewardItem.amount + '%'"/>
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../reward_icons/' + _rewardItem.subtype + '.png')"/>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="instance" value="'ImageTextCounter'; {_text: resMulCoeff}"/>
		</block>
	</block>
	<block className="RewardPersonalExchangeRates">
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../reward_icons/' + _rewardItem.subtype + '.png')"/>
	</block>
	<block className="RewardPersonalExchangeRatesTooltip">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="80px"/>
				<height value="80px"/>
			</style>
			<bind name="style" value="'backgroundImage'; ('url:../reward_icons/' + rewardItem.subtype + '.png')"/>
		</block>
		<block type="text">
			<style>
				<marginTop value="3px"/>
			</style>
			<styleClass value="$TextHeaderBold"/>
			<bind name="text" value="'IDS_PRMP_ITEM_' + toUpperCase(tr(rewardItem.subtype))"/>
		</block>
	</block>
	<block className="RewardDummyTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: 'url:../reward_icons/' + rewardItem.subtype + '.png',
																_imageWidth: 80,
																_imageHeight: 80,
																_headerText: 'IDS_REWARD_' + toUpperCase(rewardItem.subtype) + '_TITLE' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: 'IDS_REWARD_' + toUpperCase(rewardItem.subtype) + '_DESCRIPTION' }"/>
			</block>
		</block>
	</block>
	<block className="RewardResourcesCommonTooltip">
		<bind name="watch" value="'isPremium';		rewardItem.subtype == SC.Common.REWARD_SUBTYPE.WOWS_PREMIUM"/>
		<bind name="watch" value="'isSlot';			rewardItem.subtype == SC.Common.REWARD_SUBTYPE.SLOTS"/>
		<bind name="watch" value="'isLootbox';		rewardItem.type == SC.Common.REWARD_TYPE.LOOTBOX"/>
		<bind name="watch" value="'isCollection';	rewardItem.type == SC.Common.REWARD_TYPE.COLLECTION"/>
		<bind name="watch" value="'isResourceCoeff';	rewardItem.type == SC.Common.REWARD_TYPE.RESOURCE_COEFF || rewardItem.type == SC.Common.REWARD_TYPE.STRATEGIC_ACTIONS_BONUS"/>
		<bind name="watch" value="'isShipCrewFreeXpCoeff'; rewardItem.subtype == SC.Common.REWARD_SUBTYPE.SHIPCREWFREEXPCOEFF"/>
		<bind name="watch" value="'isPriceTag'; !isLootbox &amp;&amp; !isPremium &amp;&amp; !isSlot &amp;&amp; !isCollection &amp;&amp; !isResourceCoeff"/>
		<bind name="watch" value="'hasDublicates'; isCollection &amp;&amp; rewardItem.amount &gt; 1"/>
		<bind name="watch" value="'isCounterLine'; hasDublicates || _isDuplicate || isLootbox || isSlot"/>
		<bind name="watch" value="'hasAmountBlock'; isPriceTag || isCounterLine || isPremium"/>
		<bind name="watch" value="'collectionName'; ('IDS_' + rewardItem.params.collectionName)"/>
		<bind name="watch" value="'collectionNameQuotes'; (tr(toUpperCase(collectionName) + '_QUOTES'))"/>
		<bind name="watch" value="'collectionCount';	isCollection	? _isDuplicate ? rewardItem.amount : rewardItem.amount-1
													: rewardItem.amount"/>
		<bind name="watch" value="'count';	isCollection	? collectionCount :
							isResourceCoeff	? 1
											: rewardItem.amount"/>
		<bind name="watch" value="'counterLineTitle'; isCollection ? 'IDS_DUPLICATE_STATUS_COLON' : 'IDS_COUNT'"/>
		<bind name="watch" value="'paramsLootbox'; rewardItem.params.additionalInfo"/>
		<bind name="watch" value="'isLootboxPremium'; paramsLootbox &amp; 1 &lt;&lt; SC.Common.LOOTBOX_ADDITIONAL_INFO.IS_PREMIUM"/>
		<bind name="watch" value="'subheaderText';	isCollection	? subst('IDS_COLLECTION_NAME', [], { _collectionName: collectionNameQuotes }) :
									isLootbox		? isLootboxPremium ? 'IDS_LOOTBOX_PREMIUM' : 'IDS_LOOTBOX'
													: null"/>
		<bind name="watch" value="'mouseInstructionText';	isCollection											?	'IDS_GO_TO_COLLECTION_SCREEN':
											rewardItem.type == SC.Common.REWARD_TYPE.TOKEN &amp;&amp;
											rewardItem.subtype == SC.Common.REWARD_SUBTYPE.CAMPAIGN	?	'IDS_GO_TO_CAMPAIGNS_MOUSE_INSTRUCTION'
																									: null"/>
		<bind name="watch" value="'iconPath'; isCollection	? 'url:../collections/object_icons/small/' + rewardItem.params.item.title + '.png'
											: 'url:../reward_icons/' + rewardItem.subtype + '.png'"/>
		<bind name="watch" value="'headerText';	isCollection	? 'IDS_' + rewardItem.params.item.title :
								isLootbox		? 'IDS_REWARD_LOOTBOX_' + toUpperCase(rewardItem.subtype) + '_TITLE_SHORT'
												: 'IDS_REWARD_' + toUpperCase(rewardItem.subtype) + '_TITLE'"/>
		<bind name="watch" value="'priceInfo'; { currency: rewardItem.subtype, finalPrice: rewardItem.amount }"/>
		<bind name="watch" value="'isResMulCoeffPositive'; rewardItem.amount &gt; 0"/>
		<bind name="watch" value="'resMulCoeff'; (isResMulCoeffPositive ? '+' : '') + rewardItem.amount + '%'"/>
		<bind name="watch" value="'resMulCategory'; isResMulCoeffPositive ? 'positive' : 'negative'"/>
		<bind name="watch" value="'attributeIDS';	rewardItem.subtype == SC.Common.REWARD_SUBTYPE.CREWPOINTSCOEFF	? 'IDS_PARAMS_MODIFIER_CREWEXPFACTOR' :
									rewardItem.subtype == SC.Common.REWARD_SUBTYPE.FREEXPCOEFF		? 'IDS_PARAMS_MODIFIER_FREEEXPFACTOR' :
									rewardItem.subtype == SC.Common.REWARD_SUBTYPE.CREDITSCOEFF		? 'IDS_PARAMS_MODIFIER_CREDITSFACTOR'
																									: 'IDS_PARAMS_MODIFIER_SHIPEXPFACTOR'"/>
		<bind name="watch" value="'attr'; !isShipCrewFreeXpCoeff	?	[	{	attributeIDS: attributeIDS,
															measuredValue: resMulCoeff,
															category: resMulCategory
														}]
												:	[	{	attributeIDS: 'IDS_PARAMS_MODIFIER_SHIPEXPFACTOR',
															measuredValue: resMulCoeff,
															category: resMulCategory},
														{	attributeIDS: 'IDS_PARAMS_MODIFIER_CREWEXPFACTOR',
															measuredValue: resMulCoeff,
															category: resMulCategory},
														{	attributeIDS: 'IDS_PARAMS_MODIFIER_FREEEXPFACTOR',
															measuredValue: resMulCoeff,
															category: resMulCategory}]"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: iconPath,
																_imageWidth: 80,
																_imageHeight: 80,
																_headerText: headerText,
																_subheaderText: subheaderText}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="hasAmountBlock"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemPriceTagLine'; isPriceTag ? { _title: 'IDS_COUNT', _priceInfo: priceInfo } : null"/>
				<bind name="instance" value="'TooltipSystemStatusLine'; isPremium	? {	_text: subst('IDS_SUBST_REWARD_PREM_DAYS',
																			[], {_days: rewardItem.params.text})}
																: null"/>
				<bind name="instance" value="'TooltipSystemCounterLine'; isCounterLine ? { _title: counterLineTitle, _count: count } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isResourceCoeff"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemParamsModifiersList'; isResourceCoeff	? {	_attributesPositive: isResMulCoeffPositive ? attr : null,
																				_attributesNegative: isResMulCoeffPositive ? null : attr }
																			: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="mouseInstructionText"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; mouseInstructionText	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																			_text: mouseInstructionText }
																		: null"/>
			</block>
		</block>
	</block>
	<block className="RewardResourcesTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="6px"/>
				<marginBottom value="9px"/>
				<marginLeft value="16px"/>
				<marginRight value="12px"/>
			</style>
			<bind name="instance" value="'RewardContainerTooltipItem'; {	id: rewardItem.id,
														amount: rewardItem.amount,
														name: rewardItem.name,
														type: rewardItem.type,
														subtype: rewardItem.subtype,
														params: rewardItem.params,
														_disableWarning: _disableWarning }"/>
		</block>
		<block>
			<bind name="visible" value="(rewardItem.type == 'Ability' || rewardItem.subtype == 'slots')  &amp;&amp; !rewardItem.isPRMP"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block type="text">
				<style>
					<marginLeft value="12px"/>
					<marginBottom value="9px"/>
					<marginTop value="9px"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="tr('IDS_EARNED')+ tr('IDS_COLON') + ' '+ rewardItem.amount"/>
			</block>
		</block>
		<bind name="watch" value="'mouseInstructionText';	rewardItem.subtype == 'CollectionCard'	?	'IDS_GO_TO_COLLECTION_SCREEN':
											rewardItem.type == 'Token' &amp;&amp;
											rewardItem.subtype == 'Campaign'		?	'IDS_GO_TO_CAMPAIGNS_MOUSE_INSTRUCTION'
																					: null"/>
		<block>
			<bind name="visible" value="mouseInstructionText"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<marginTop value="12px"/>
					<marginBottom value="9px"/>
				</style>
				<bind name="instance" value="'MouseInstruction'; {_type: 'left', _instructionText: mouseInstructionText, _maxWidth: 300}"/>
			</block>
		</block>
	</block>
	<block className="RewardModernizationTooltip">
		<bind name="watch" value="'descriptionText';				tr('IDS_DESC_' + toUpperCase(rewardItem.params.item.description))"/>
		<bind name="watch" value="'descriptionVisible'; 			descriptionText != ' '"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="6px"/>
				<marginBottom value="9px"/>
				<marginLeft value="12px"/>
				<marginRight value="12px"/>
			</style>
			<bind name="instance" value="'RewardContainerTooltipItem'; {	id: rewardItem.id,
														amount: rewardItem.amount,
														name: rewardItem.name,
														type: rewardItem.type,
														subtype: rewardItem.subtype,
														params: rewardItem.params}"/>
		</block>
		<block>
			<bind name="visible" value="(!rewardItem.isPRMP)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="tr('IDS_EARNED')+ tr('IDS_COLON') + ' '+ rewardItem.amount"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="descriptionVisible"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="descriptionText"/>
			</block>
		</block>
	</block>
	<block className="RewardCollectionCrewItem">
		<bind name="watch" value="'rewardUnlockIconPath'; rewardItem.params.shipClasses == ''	? ('url:../reward_icons/reward_unlocks/reward_' + toLowerCase(tr(rewardItem.name)) + '.png')
																				: ('url:../reward_icons/reward_unlocks/reward_' + toLowerCase(tr(rewardItem.name)) + '_' + toLowerCase(tr(rewardItem.params.shipClasses)) + '.png')"/>
		<style>
			<marginTop value="9px"/>
			<marginRight value="8px"/>
			<marginLeft value="8px"/>
			<width value="60px"/>
			<height value="60px"/>
			<backgroundSize value="cover"/>
		</style>
		<bind name="tooltip" value="'RewardCollectionCrewTooltip'; _withTooltip ? { rewardItem: rewardItem } : null"/>
		<bind name="style" value="'backgroundImage'; rewardUnlockIconPath"/>
	</block>
	<block className="RewardCollectionCrewItemTooltip">
		<bind name="watch" value="'title'; tr('IDS_REWARD_' + tr(rewardItem.name) +
							(!rewardItem.params.nation == '' ? '_' + tr(rewardItem.params.nation)
															: ''))"/>
		<bind name="watch" value="'description'; tr('IDS_REWARD_' + tr(rewardItem.name) +
								(!rewardItem.params.nation == '' 		? '_' + tr(rewardItem.params.nation)
																		: '') +
								(rewardItem.params.shipClasses == '' 	? ''
																		: '_' + tr(rewardItem.params.shipClasses))
								+ '_DESCRIPTION')"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="80px"/>
				<top value="0"/>
				<align value="center"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'RewardCollectionCrewItem'; { rewardItem: rewardItem }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {_title: title, _description: description}"/>
		</block>
	</block>
	<block className="RewardCollectionCrewTooltip">
		<bind name="watch" value="'rewardNation'; 		rewardItem.params.nation"/>
		<bind name="watch" value="'rewardshipClasses'; 	rewardItem.params.shipClasses"/>
		<bind name="watch" value="'crewFirstNameIDS'; 	rewardItem.params.item.firstNameIDS"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="12px"/>
			</style>
			<bind name="instance" value="'RewardContainerTooltipItem'; {	id: rewardItem.id,
														amount: rewardItem.amount,
														name: rewardItem.name,
														type: rewardItem.type,
														subtype: rewardItem.subtype,
														params: rewardItem.params }"/>
		</block>
		<block>
			<bind name="visible" value="crewFirstNameIDS || (rewardshipClasses.length &gt; 0 || rewardNation != '')"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="crewFirstNameIDS"/>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="instance" value="'NotificationCommanderBlock'; {_crewHistoryId: rewardItem.params.item.id}"/>
		</block>
		<block>
			<bind name="visible" value="rewardshipClasses.length &gt; 0 || rewardNation != ''"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<bind name="instance" value="'RewardShipAndNationRestriction'; { _rewardshipClasses: rewardshipClasses, _rewardNation: rewardNation }"/>
			</block>
		</block>
	</block>
	<block className="NotificationCommanderBlock">
		<style>
			<flow value="horizontal"/>
			<hitTest value="false"/>
			<width value="100%"/>
			<align value="middle"/>
			<paddingLeft value="14px"/>
			<paddingRight value="14px"/>
			<paddingTop value="8px"/>
			<paddingBottom value="8px"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'CrewStereotype'; {	_crewHistoryId: _crewHistoryId,
											_size: 0}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'CrewNameWithIcon'; {_crewHistoryId: _crewHistoryId }"/>
		</block>
	</block>
	<block className="RewardSseTooltipItem">
		<bind name="watch" value="'title'; rewardItem.subtype == SC.Ui_styles.SSE_TYPES.CHALLENGE ? 'IDS_PERSONAL_CHALLENGE' : 'IDS_PERSONAL_BATTLE_TASK'"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="80px"/>
				<height value="80px"/>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../reward_icons/sse.png'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; {	_title: title,
													_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK}"/>
		</block>
	</block>
	<block className="RewardResourceUnit">
		<bind name="watch" value="'iconPath'; rewardItem.params.item.uiState			?	'url:../modules/icon_module' + rewardItem.params.item.type + rewardItem.params.item.uiState + '.png' :
							rewardItem.params.item.moduleIconName	?	'url:../modules/event/' + rewardItem.params.item.type + '/icon_module_' + rewardItem.params.item.moduleIconName + '.png'
																	:	'url:../modules/icon_module' + rewardItem.params.item.type + '.png'"/>
		<bind name="tooltip" value="'RewardUnitTooltip'; _withTooltip ? {rewardItem: rewardItem, _iconPath: iconPath} : null"/>
		<bind name="instance" value="'IconWithAmount'; {	_rewardItem: rewardItem,
										_iconPath: iconPath,
										_amount: rewardItem.amount	}"/>
	</block>
	<block className="RewardUnitTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'RewardUnitTooltipItem'; { rewardItem: rewardItem }"/>
			</block>
		</block>
	</block>
	<block className="RewardUnitTooltipItem">
		<bind name="watch" value="'iconPath'; rewardItem.params.item.uiState			?	'url:../modules/icon_module' + rewardItem.params.item.type + rewardItem.params.item.uiState + '.png' :
							 rewardItem.params.item.moduleIconName	?	'url:../modules/event/' + rewardItem.params.item.type + '/icon_module_' + rewardItem.params.item.moduleIconName + '.png'
																	:	'url:../modules/icon_module' + rewardItem.params.item.type + '.png'"/>
		<bind name="watch" value="'headerText'; toUpperCase('IDS_'+ rewardItem.params.item.name)"/>
		<bind name="watch" value="'subheaderText'; toUpperCase('IDS_MODULE_TYPE' + rewardItem.params.item.type)"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<top value="0"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'IconWithAmount'; {	_width: '60px',
											_height: '60px',
											_iconPath: iconPath,
											_amount: rewardItem.amount	}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RewardTooltipItemText'; { _title: headerText, _description: subheaderText }"/>
		</block>
	</block>
	<block className="RewardShipAndNationRestriction">
		<styleClass value="$InfoBlockIndent"/>
		<style>
			<height value="25px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="_rewardshipClasses.length &gt; 0"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="repeat" value="_rewardshipClasses; 'IconShipClass'; {}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="_rewardshipClasses.length &gt; 0"/>
			<style>
				<height value="100%"/>
				<marginLeft value="5px"/>
				<marginRight value="5px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="_rewardNation != ''"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="instance" value="'NationFlagsTiny'; { _shipCountry: _rewardNation }"/>
		</block>
	</block>
	<block className="IconShipClass">
		<bind name="instance" value="'ShipIcon'; {_shipType: $value}"/>
	</block>
	<block className="RewardAchievementItem">
		<bind name="primaryEntityDH" value="'achievementEntity'; CC.achievement; rewardItem.id"/>
		<bind name="watch" value="'achievementInfo'; achievementEntity.achievementInfo"/>
		<bind name="watch" value="'achievementPath'; 'url:../achievements/icon_achievement_' + achievementInfo.name + '.png'"/>
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage'; achievementPath"/>
		<bind name="tooltip" value="'AchievementTooltip'; { _id: achievementEntity.id }"/>
	</block>
	<block className="RewardShipComponentItem">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; rewardItem.params.shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipNameIDS'; ['']; shipInfo.nameIDS"/>
		<bind name="watch" value="'iconPath'; 'url:../reward_icons/' + rewardItem.type + '.png'"/>
		<bind name="watch" value="'headerText'; subst('IDS_CURRENCY_SHIPCOMPONENT', [], {_shipName: toUpperCase(tr(shipNameIDS))})"/>
		<bind name="instance" value="'IconWithAmount'; {	_iconPath: iconPath,
										_amount: rewardItem.amount,
										_width: '80px',
										_height: '80px'	}"/>
		<bind name="tooltip" value="'RewardShipComponentTooltip'; _withTooltip	? {	_rewardItem: rewardItem,
																	_imageUrl: iconPath,
																	_headerText: headerText}
																: null"/>
	</block>
	<block className="RewardShipMaterialItem">
		<bind name="watch" value="'shipLevel'; rewardItem.params.shipLevel"/>
		<bind name="watch" value="'iconPath'; 'url:../reward_icons/' + rewardItem.type + '_' + shipLevel + '.png'"/>
		<bind name="watch" value="'headerText'; subst('IDS_CURRENCY_SHIPMATERIAL', [], {_shipLevel: toRomanShipLevels(shipLevel)})"/>
		<bind name="instance" value="'IconWithAmount'; {	_iconPath: iconPath,
										_amount: rewardItem.amount,
										_width: '80px',
										_height: '80px'	}"/>
		<bind name="tooltip" value="'RewardShipMaterialTooltip'; _withTooltip	? {	_rewardItem: rewardItem,
																	_imageUrl: iconPath,
																	_headerText: headerText }
																: null"/>
	</block>
	<block className="RewardShipShardsCommonContentTooltip">
		<bind name="watch" value="'priceInfo'; {finalPrice: _rewardItem.amount, currency: _rewardItem.type}"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: _imageUrl,
																_headerText: _headerText,
																_subheaderText: 'IDS_SHIP_SHARDS_COMMON_TITLE',
																_imageWidth: 80,
																_imageHeight: 80 }"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="true"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemPriceTagLine'; {_title: 'IDS_COUNT', _priceInfo: priceInfo}"/>
		</block>
	</block>
	<block className="RewardShipMaterialTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<bind name="instance" value="'RewardShipShardsCommonContentTooltip'; {	_rewardItem: _rewardItem,
																_imageUrl: _imageUrl,
																_headerText: _headerText}"/>
		</block>
	</block>
	<block className="RewardShipComponentTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'RewardShipShardsCommonContentTooltip'; {	_rewardItem: _rewardItem,
																	_imageUrl: _imageUrl,
																	_headerText: _headerText}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; {_shipId: _rewardItem.params.shipID, _withFlag: true}"/>
			</block>
		</block>
	</block>

	<!-- infotip_elements -->
	<block className="InfotipBg">
		<styleClass value="$FullsizeAbsolute"/>
		<block className="InfotipPanelBg">
			<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
			<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<style>
				<margin value="-2px"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<background9Slice value="[3]"/>
				</style>
				<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-2px"/>
			</style>
			<block className="InfotipPins">
				<styleClass value="$FullsizeAbsolute"/>
				<params>
					<param name="name" value="pinContainer"/>
				</params>
				<block>
					<params>
						<param name="name" value="pinTop"/>
					</params>
					<style>
						<position value="absolute"/>
						<top value="-10px"/>
					</style>
					<block>
						<style>
							<position value="absolute"/>
						</style>
						<block className="mc_blurmap_infotip_arrow_vert" type="native">
							<style>
								<position value="absolute"/>
								<width value="22px"/>
								<height value="12px"/>
							</style>
							<bind name="visible" value="false"/>
						</block>
						<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
					</block>
					<block>
						<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
						<style>
							<width value="22px"/>
							<height value="12px"/>
							<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
						</style>
					</block>
				</block>
				<block>
					<params>
						<param name="name" value="pinBottom"/>
					</params>
					<style>
						<position value="absolute"/>
						<bottom value="-22px"/>
					</style>
					<bind name="scaleY" value="-1"/>
					<block>
						<style>
							<position value="absolute"/>
						</style>
						<block className="mc_blurmap_infotip_arrow_vert" type="native">
							<style>
								<position value="absolute"/>
								<width value="22px"/>
								<height value="12px"/>
							</style>
							<bind name="visible" value="false"/>
						</block>
						<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
					</block>
					<block>
						<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
						<style>
							<width value="22px"/>
							<height value="12px"/>
							<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
						</style>
					</block>
				</block>
				<block>
					<params>
						<param name="name" value="pinLeft"/>
					</params>
					<style>
						<position value="absolute"/>
						<left value="-10px"/>
					</style>
					<block>
						<style>
							<position value="absolute"/>
						</style>
						<block className="mc_blurmap_infotip_arrow_hor" type="native">
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
							</style>
							<bind name="visible" value="false"/>
						</block>
						<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
					</block>
					<block>
						<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
						<style>
							<position value="absolute"/>
							<width value="12px"/>
							<height value="22px"/>
							<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
						</style>
					</block>
				</block>
				<block>
					<params>
						<param name="name" value="pinRight"/>
					</params>
					<style>
						<position value="absolute"/>
						<right value="-10px"/>
					</style>
					<bind name="scaleX" value="-1"/>
					<block>
						<style>
							<position value="absolute"/>
						</style>
						<block className="mc_blurmap_infotip_arrow_hor" type="native">
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
							</style>
							<bind name="visible" value="false"/>
						</block>
						<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
					</block>
					<block>
						<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
						<style>
							<position value="absolute"/>
							<width value="12px"/>
							<height value="22px"/>
							<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
						</style>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="InfotipPanelBg">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<style>
			<margin value="-2px"/>
		</style>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
			<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
			<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<background9Slice value="[3]"/>
			</style>
			<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
		</block>
	</block>
	<block className="InfotipPins">
		<styleClass value="$FullsizeAbsolute"/>
		<params>
			<param name="name" value="pinContainer"/>
		</params>
		<block>
			<params>
				<param name="name" value="pinTop"/>
			</params>
			<style>
				<position value="absolute"/>
				<top value="-10px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<block className="mc_blurmap_infotip_arrow_vert" type="native">
					<style>
						<position value="absolute"/>
						<width value="22px"/>
						<height value="12px"/>
					</style>
					<bind name="visible" value="false"/>
				</block>
				<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<width value="22px"/>
					<height value="12px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
				</style>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="pinBottom"/>
			</params>
			<style>
				<position value="absolute"/>
				<bottom value="-22px"/>
			</style>
			<bind name="scaleY" value="-1"/>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<block className="mc_blurmap_infotip_arrow_vert" type="native">
					<style>
						<position value="absolute"/>
						<width value="22px"/>
						<height value="12px"/>
					</style>
					<bind name="visible" value="false"/>
				</block>
				<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<width value="22px"/>
					<height value="12px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
				</style>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="pinLeft"/>
			</params>
			<style>
				<position value="absolute"/>
				<left value="-10px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<block className="mc_blurmap_infotip_arrow_hor" type="native">
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="22px"/>
					</style>
					<bind name="visible" value="false"/>
				</block>
				<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<position value="absolute"/>
					<width value="12px"/>
					<height value="22px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
				</style>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="pinRight"/>
			</params>
			<style>
				<position value="absolute"/>
				<right value="-10px"/>
			</style>
			<bind name="scaleX" value="-1"/>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<block className="mc_blurmap_infotip_arrow_hor" type="native">
					<style>
						<position value="absolute"/>
						<width value="12px"/>
						<height value="22px"/>
					</style>
					<bind name="visible" value="false"/>
				</block>
				<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
				<style>
					<position value="absolute"/>
					<width value="12px"/>
					<height value="22px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="InfotipBlurmap">
		<styleClass value="$FullsizeAbsolute"/>
		<block className="mc_blurmap_medium" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.1; 0; {alpha: 1}; {alpha: 0}"/>
			<bind name="blurMap" value="0"/>
		</block>
	</block>
	<block className="InfotipPinBlurmapVert">
		<block className="mc_blurmap_infotip_arrow_vert" type="native">
			<style>
				<position value="absolute"/>
				<width value="22px"/>
				<height value="12px"/>
			</style>
			<bind name="appear" value="'startShow'; 0.1; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.1; 0; {alpha: 1}; {alpha: 0}"/>
			<bind name="blurMap" value="0"/>
		</block>
	</block>
	<block className="InfotipPinBlurmapHor">
		<block className="mc_blurmap_infotip_arrow_hor" type="native">
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="22px"/>
			</style>
			<bind name="appear" value="'startShow'; 0.1; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.1; 0; {alpha: 1}; {alpha: 0}"/>
			<bind name="blurMap" value="0"/>
		</block>
	</block>

	<!-- item_chooser -->
	<block className="ItemChooser">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="name" value="_name"/>
		<bind name="var" value="{ _lastItemIndex: curIndex }"/>
		<bind name="var" value="{ _tooltipData: !_itemChooserTooltipText || (_items.length &lt;= 1) ? null : { _text: _itemChooserTooltipText } }"/>
		<bind name="watch" value="'_curItemIndex'; curIndex"/>
		<bind name="watch" value="'_direction'; curDirection"/>
		<bind name="watch" value="'isEnabled'; _disabled != true"/>
		<bind name="watch" value="'isSmthToChooseFrom'; _items.length &gt; 1"/>
		<bind name="watch" value="'isItemNavigateVisible'; isSmthToChooseFrom &amp;&amp; isEnabled"/>
		<bind name="catch" value="'ItemChooserInnerEvent.' + onItemSelectedEvent"/>
		<bind name="catch" value="'ItemChooserInnerEventDublicate.' + onItemSelectedEvent; {	_direction: _curItemIndex == _lastItemIndex ? !_direction : false,
																			_lastItemIndex: _curItemIndex }"/>
		<bind name="dispatch" value="'ItemChooserInnerEventDublicate.' + onItemSelectedEvent;
					'ItemChooser.' + onItemSelectedEvent;
					{ _curItemIndex: _curItemIndex, _direction: _direction };
					SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP;
					0.01"/>
		<bind name="tooltip" value="_customDropdown ? _customDropdown : 'ItemChooserDropdown';
		isSmthToChooseFrom 	? {	_items: _items,
								_listItemRenderer: _listItemRenderer,
								_listItemRendererData: _listItemRendererData,
								_onItemSelectedEvent: onItemSelectedEvent,
								_curItemIndex: _curItemIndex,
								_maxDropDownHeight: _maxDropDownHeight,
								_dropDownWidth: _dropDownWidth }
							: null;
		TooltipBehaviour.verticalInfoWidget; null;
		'isDropdownChooserListVisible'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipData"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'hitTest'; isSmthToChooseFrom &amp;&amp; isEnabled"/>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<bind name="style" value="'marginRight'; isItemNavigateVisible ? '-8px' : '0px'"/>
		<bind name="soundSet" value="isSmthToChooseFrom ? 'dropdown' : ''"/>
		<block>
			<bind name="visible" value="isSmthToChooseFrom"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="1px"/>
				<marginBottom value="3px"/>
			</style>
			<block>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown &amp;&amp; !isDropdownChooserListVisible; 0.15; { alpha: 0 }; { alpha: 1 }"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/buttons/button_dock/over.png"/>
					<background9Slice value="[4]"/>
				</style>
			</block>
			<block>
				<bind name="transition" value="mouseDown || isDropdownChooserListVisible; 0.15; { alpha: 0 }; { alpha: 1 }"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/buttons/button_dock/down.png"/>
					<background9Slice value="[4]"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="name" value="_items[curIndex]"/>
			<bind name="style" value="'width'; _width ? '100%f' : 'auto'"/>
			<bind name="instance" value="_choosedItemRenderer; {_item: _items[curIndex], _choosedItemRendererParams: _choosedItemRendererParams}"/>
		</block>
		<block>
			<bind name="visible" value="isItemNavigateVisible"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<hitTest value="false"/>
				<alpha value="0.7"/>
				<marginRight value="4px"/>
				<width value="16px"/>
				<height value="16px"/>
				<backgroundImage value="url:../service_kit/buttons/navigate_arrow/down.png"/>
			</style>
		</block>
	</block>
	<block className="ItemChooserDropdown">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<bind name="style" value="'width'; _dropDownWidth ? _dropDownWidth : '180px'"/>
		<block className="InfotipBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="InfotipPanelBg">
				<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
				<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
				<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
				<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<style>
					<margin value="-2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<background9Slice value="[3]"/>
					</style>
					<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<margin value="-2px"/>
				</style>
				<block className="InfotipPins">
					<styleClass value="$FullsizeAbsolute"/>
					<params>
						<param name="name" value="pinContainer"/>
					</params>
					<block>
						<params>
							<param name="name" value="pinTop"/>
						</params>
						<style>
							<position value="absolute"/>
							<top value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinBottom"/>
						</params>
						<style>
							<position value="absolute"/>
							<bottom value="-22px"/>
						</style>
						<bind name="scaleY" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinLeft"/>
						</params>
						<style>
							<position value="absolute"/>
							<left value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinRight"/>
						</params>
						<style>
							<position value="absolute"/>
							<right value="-10px"/>
						</style>
						<bind name="scaleX" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<params>
				<param name="name" value="ItemChooserDropdown"/>
			</params>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'maxHeight'; _maxDropDownHeight ? _maxDropDownHeight : 220"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_items; _listItemRenderer; {_onItemSelectedEvent: _onItemSelectedEvent, _curItemIndex: _curItemIndex, _listItemRendererData: _listItemRendererData}"/>
			</block>
		</block>
	</block>
	<block className="DefaultTextChoosedItemRenderer">
		<style>
			<height value="32px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultItemChooser"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="7px"/>
				<marginRight value="3px"/>
				<marginTop value="8px"/>
				<alpha value="0.75"/>
			</style>
			<bind name="text" value="(tr(_item))"/>
		</block>
	</block>
	<block className="LargeTextChoosedItemRenderer">
		<style>
			<height value="35px"/>
		</style>
		<block type="text">
			<style>
				<hitTest value="false"/>
				<marginLeft value="4px"/>
				<marginTop value="1px"/>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextItemChooserDockBig"/>
			<bind name="text" value="(tr(_item))"/>
		</block>
	</block>
	<block className="TextListItemRenderer">
		<styleClass value="$ContextMenuListItem"/>
		<block className="MenuItemWithSelection">
			<bind name="watch" value="'isSelected'; ((_curItemIndex == $index))"/>
			<styleClass value="$Fullsize"/>
			<bind name="name" value="$value"/>
			<bind name="instance" value="'DefaultMenuItemBackground'; { _isSelected: isSelected }"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="class" value="isSelected ? '$Bold' : '$None'"/>
				<bind name="text" value="(_toLowerCase ? toLowerCase(tr($value))
											: (tr($value)))"/>
				<bind name="name" value="'menu_item_' + _titleIds"/>
			</block>
		</block>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEvent.' + _onItemSelectedEvent); {_curItemIndex: $index}"/>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEventDublicate.' + _onItemSelectedEvent)"/>
	</block>

	<!-- login -->
	<block className="EmptyWindowWithHideBelow">
		<bind name="firstEntityDH" value="'loginProgressEntity'; CC.loginProgress"/>
		<bind name="watch" value="'firstTimeLogin'; loginProgressEntity.loginProgress.firstTimeLogin"/>
		<bind name="handleEventDH" value="'loginProgressEntity.loginProgress.evStartFade'; 'switchBgStateEv'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block>
			<bind name="visible" value="!firstTimeLogin"/>
			<bind name="dispatch" value="'switchBgStateEv'; firstTimeLogin ? null : 'delayedSwitchBgStateEv'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; SC.Common.PERFECT_LOGIN.HIDE_TIME"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0xFF000000"/>
				<alpha value="1"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="firstTimeLogin"/>
			<bind name="var" value="{isBlack: false}"/>
			<bind name="catch" value="'switchBgStateEv'; {isBlack: firstTimeLogin ? !isBlack : isBlack}"/>
			<bind name="transition" value="isBlack; SC.Common.PERFECT_LOGIN.HIDE_TIME; {alpha : 0}; {alpha :1}"/>
			<bind name="dispatch" value="'onTransitionInFinished'; 'delayedSwitchBgStateEv'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0xFF000000"/>
				<alpha value="0"/>
			</style>
		</block>
		<bind name="appear" value="'startHide'; SC.Common.PERFECT_LOGIN.HIDE_TIME; 0; {alpha: 1}; {alpha: 0}"/>
		<bind name="action" value="'delayedSwitchBgStateEv'; 'finiLoadingScreen'; {}"/>
	</block>
	<block className="Login">
		<bind name="firstEntityDH" value="'loginProgressEntity'; CC.loginProgress"/>
		<bind name="watchDH" value="'doneLoading'; ['loginProgressEntity.loginProgress.evDoneLoadingChanged']; loginProgressEntity.loginProgress.doneLoading"/>
		<bind name="handleEventDH" value="'loginProgressEntity.loginProgress.evStartFade'; 'switchLoginBgStateEv'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="appear" value="'switchLoginBgStateEv'; SC.Common.PERFECT_LOGIN.HIDE_TIME; 0; {alpha: 1}; {alpha: 0}"/>
		<bind name="appear" value="'startShow'; 0; 0; {alpha: 0}; {alpha: 1}"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'LoginContent'; doneLoading ? {} : null"/>
		</block>
	</block>
	<block className="LoginContent">
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="firstEntityDH" value="'loginProgressEntity'; CC.loginProgress"/>
		<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
		<bind name="watchDH" value="'isConnected';		['loginProgressEntity.loginProgress.evIsConnectedChanged'];		loginProgressEntity.loginProgress.isConnected"/>
		<bind name="watchDH" value="'firstTimeLogin';	['loginProgressEntity.loginProgress.evFirstTimeLoginChanged'];	loginProgressEntity.loginProgress.firstTimeLogin"/>
		<bind name="watch" value="'staticScreen'; firstTimeLogin ? '' : 'img://' + loginEntity.loginData.staticScreen"/>
		<bind name="watchDH" value="'savedHostIndex';	['loginEntity.loginData.evUpdate'];	loginEntity.loginData.selectedHostIndex"/>
		<bind name="watch" value="'curHostIndex'; savedHostIndex ? savedHostIndex : 0"/>
		<bind name="var" value="{ isWaitingAnswer: loginEntity.loginData.isWaitingAnswer }"/>
		<bind name="handleEventDH" value="'loginEntity.loginData.evUpdate'; 'loginDataEvUpdate'"/>
		<bind name="dispatch" value="'loginDataEvUpdate'; 'isWaitingAnswerUpdate'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; loginEntity.loginData.isWaitingAnswer ? 0.7 : 0"/>
		<bind name="catch" value="'isWaitingAnswerUpdate'; { isWaitingAnswer: loginEntity.loginData.isWaitingAnswer }"/>
		<bind name="watchDH" value="'isExternalPlatformClient';	['loginEntity.loginData.evUpdate'];				loginEntity.loginData.isExternalPlatformClient"/>
		<bind name="firstEntityDH" value="'steamLoginEntity'; CC.steamLoginData"/>
		<bind name="watchDH" value="'isSteamIdConnected';		['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.hasAccount"/>
		<bind name="watchDH" value="'isGettingBoundAccountInfo';	['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.isGettingBoundAccountInfo"/>
		<bind name="watchDH" value="'needToReconnect';			['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.needToReconnect"/>
		<bind name="watchDH" value="'isSteamHostChosen';			['steamLoginEntity.steamLoginData.evUpdate'];	!steamLoginEntity.steamLoginData.isDefaultRealm"/>
		<bind name="watchDH" value="'platformLoginDenied';		['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.loginDenied"/>
		<bind name="watchDH" value="'isRegionValid'; 			['steamLoginEntity.steamLoginData.evUpdate']; 	steamLoginEntity.steamLoginData.isRegionValid"/>
		<bind name="watchDH" value="'isWinStore'; ['loginEntity.loginData.evUpdate']; loginEntity.loginData.isWinStore"/>
		<bind name="watch" value="'isWinStoreHostChosen'; isWinStore &amp;&amp; !isSteamHostChosen"/>
		<bind name="watch" value="'isProcessing';	isSteamIdConnected || isGettingBoundAccountInfo"/>
		<bind name="watch" value="'isLoading';		isWaitingAnswer || isConnected"/>
		<bind name="watch" value="'loginScreenState';	isLoading &amp;&amp; !isWinStoreHostChosen		? 0 :
										needToReconnect							? 1 :
										platformLoginDenied						? 4 :
										isProcessing							? 0 :
										isSteamHostChosen &amp;&amp; isRegionValid		? 3 :
										isSteamHostChosen						? 5

																				: 1"/>
		<bind name="var" value="{ hasContentUnderLogo: (!isProcessing &amp;&amp; isSteamHostChosen) || platformLoginDenied}"/>
		<bind name="firstEntityDH" value="'loginMessageEntity'; CC.loginMessageData"/>
		<bind name="watchDH" value="'loginMessage';			['loginMessageEntity.loginMessageData.evUpdate']; loginMessageEntity.loginMessageData.message"/>
		<bind name="watchDH" value="'loginMessageHeader';	['loginMessageEntity.loginMessageData.evUpdate']; loginMessageEntity.loginMessageData.header"/>
		<bind name="watchDH" value="'loginMessageHighlight';	['loginMessageEntity.loginMessageData.evUpdate']; loginMessageEntity.loginMessageData.messageHighlight"/>
		<bind name="watch" value="'waitingText';	isGettingBoundAccountInfo &amp;&amp; !isConnected	? 'IDS_STATUS_GET_ACCOUNT_INFO' :
								isConnected									? 'IDS_LOGGING_IN'
																			: 'IDS_LOADING'"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="visible" value="!firstTimeLogin"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'BackgroundAnimatedSwitcher'; { _bgSymbol: staticScreen }"/>
		</block>
		<block>
			<bind name="action" value="'addedToStage'; 'login.shown'; {}"/>
			<styleClass value="$MiddleAligned"/>
			<bind name="style" value="'bottom'; hasContentUnderLogo ? '276px' : '159px'"/>
			<block className="game_logo_flat" type="native"/>
		</block>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<bottom value="64px"/>
				<align value="center"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<bind name="catch" value="'changeLoginScreenState'"/>
			<bind name="action" value="'changeLoginScreenState'; 'showErrorMessage'; { header: '', message: '' }"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; 0.2; {alpha: 0}; {alpha: 1}"/>
				<bind name="child" value="loginScreenState;	{	_curHostIndex:				curHostIndex,
												_loginMessage:				loginMessage,
												_loginMessageHighlight:		loginMessageHighlight,
												_loginMessageHeader:		loginMessageHeader,
												_hasContentUnderLogo:		hasContentUnderLogo };

												'EmptyItem';
												'ReconnectionScreenContent';
												'EmptyItem';
												'ExternalNewNicknameContent';
												'ExternalLoginDenied';
												'ExternalChooseCountryContent'"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<bottom value="24px"/>
			</style>
			<bind name="instance" value="'AutoLoginContent'; !loginScreenState ? { _waitingText: waitingText } : null"/>
		</block>
		<block>
			<style>
				<marginLeft value="18px"/>
				<marginTop value="15px"/>
				<position value="absolute"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<block>
				<block className="button_settings" type="native">
					<bind name="enabled" value="loginScreenState"/>
					<bind name="tooltip" value="'SimpleStatusTooltip';	{ _text: 'IDS_TOOLTIP_MENU' }"/>
					<params>
						<param name="name" value="loginButtonSettings"/>
					</params>
					<bind name="input"/>
					<bind name="style" value="'alpha'; loginScreenState ? 1 : 0.5"/>
					<bind name="action" value="'click'; 'navigateTo' : ''; { route: SC.Ui_windows.MODAL.PREFERENCES }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<params>
				<param name="name" value="buttonClose"/>
			</params>
			<bind name="input"/>
			<style>
				<position value="absolute"/>
				<top value="20px"/>
				<right value="20px"/>
			</style>
			<bind name="style" value="'alpha'; !loginScreenState ? 0.5 : 1"/>
			<bind name="instance" value="'CloseButton'; { _tooltipText: 'IDS_CLOSE', _isDisabled: !loginScreenState }"/>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
	</block>

	<!-- login_choose_country -->
	<block className="ExternalChooseCountryContent">
		<bind name="var" value="{childStates:	{	0:	'PlatformChooseCountryDescription',
									1:	'PlatformChooseCountryList' }}"/>
		<bind name="watch" value="'childState'; 0"/>
		<bind name="catch" value="'evChangeChildState'"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0 + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="child" value="childState ? childState : 0; {}; childStates"/>
	</block>
	<block className="PlatformChooseCountryDescription">
		<style>
			<width value="450px"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<bottom value="140px"/>
			</style>
			<block className="BlurMapCustomPxOutbound">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'marginLeft'; -3px"/>
				<bind name="style" value="'marginRight'; -3px"/>
				<bind name="style" value="'marginTop'; -3px"/>
				<bind name="style" value="'marginBottom'; -3px"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap10_feather" type="native">
					<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 0.7}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
				</style>
				<default_text value="IDS_PLATFORM_CHOOSE_COUNTRY_DESC"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<align value="center"/>
				<bottom value="32px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '256px',
											_size: 2,
											_dispatch: 'evChangeChildState',
											_dispatchParams: {childState: 1},
											_name: 'buttonShowCountryList',
											_enabled: true,
											_label: 'IDS_PLATFORM_CHOOSE_COUNTRY_BUTTON'}"/>
		</block>
	</block>
	<block className="PlatformChooseCountryList">
		<bind name="firstEntityDH" value="'steamLoginEntity'; CC.steamLoginData"/>
		<bind name="watchDH" value="'allowedCountries'; ['steamLoginEntity.steamLoginData.evUpdate']; steamLoginEntity.steamLoginData.allowedCountries"/>
		<style>
			<marginBottom value="80px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/inner_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<maxHeight value="100"/>
			</style>
			<bind name="repeat" value="allowedCountries; 'PlatformCountryRenderer'; {}"/>
		</block>
	</block>
	<block className="PlatformCountryRenderer">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="name" value="'wgnrCountry_' + $value"/>
		<style>
			<width value="256px"/>
			<height value="48px"/>
			<align value="middle"/>
		</style>
		<block>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="dock_submenu_item_bg" type="native">
				<styleClass value="$Fullsize"/>
				<bind name="transition" value="mouseDown; 0.03; {alpha: 1}; {alpha: 0.5}"/>
				<bind name="request" value="'click'; 'confirmPlatformCountry'; {countryCode: $value}"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextDefault19NM"/>
			<style>
				<hitTest value="false"/>
				<alpha value="0.9"/>
				<width value="100%"/>
				<textAlign value="center"/>
				<margin value="3px|3px|7px|5px"/>
			</style>
			<bind name="text" value="'IDS_COUNTRIES_' + $value"/>
		</block>
	</block>
	<block className="ConfirmPlatformCountryModalWindow">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_PLATFORM_CHOOSE_COUNTRY_MODAL_HEADER', _contentElement: 'ConfirmPlatformCountryModalWindowContent'}"/>
	</block>
	<block className="ConfirmPlatformCountryModalWindowContent">
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<marginTop value="16px"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<default_text value="IDS_PLATFORM_CHOOSE_COUNTRY_MODAL_DESC"/>
			</block>
		</block>
		<block>
			<style>
				<flow value="horizontal"/>
				<marginTop value="40px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_ok',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_PLATFORM_CHOOSE_COUNTRY_MODAL_BUTTON',
												_focusIndex: 1,
												_defaultFocused: false,
												_clickInterval: 2000}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_cancel',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON',
												_defaultFocused: false,
												_focusIndex: 2}"/>
			</block>
		</block>
	</block>

	<!-- login_elements -->
	<block className="AutoLoginContent">
		<bind name="appear" value="'addedToStage'; 0.15; 0 + 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<style>
			<flow value="horizontal"/>
			<left value="-7px"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<bottom value="4px"/>
				<alpha value="1.25"/>
			</style>
			<bind name="colorTransform" value="{	redOffset: 255,
								greenOffset: 255,
								blueOffset: 255,
								alphaOffset: 0 }"/>
			<block className="indicator_busy_small" type="native"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold17NM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_waitingText"/>
		</block>
	</block>
	<block className="ReconnectionScreenContent">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watch" value="'buttonActionParams';	{ hostId:			_curHostIndex,
										  user:				'',
										  password:			'',
										  savePassword:		false }"/>
		<style>
			<width value="200px"/>
			<marginTop value="32px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '100%',
												_name: 'steamLoginRetryBtn',
												_size: 2,
												_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
												_action: 'reconnect',
												_actionParams: buttonActionParams,
												_enabled: true,
												_focusIndex: 0,
												_defaultFocused: true,
												_label: 'IDS_LOGIN_BUTTON'}"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'bottom'; _hasContentUnderLogo ? '342px' : '290px'"/>
				<bind name="instance" value="'ServerMessage'; _loginMessage.length &gt; 0	? {	_messageHighlight:	_loginMessageHighlight,
																			_headerText:		_loginMessageHeader,
																			_messageText:		_loginMessage }
																		: null"/>
			</block>
		</block>
	</block>
	<block className="ExternalChooseRealmContent">
		<bind name="firstEntityDH" value="'steamLoginEntity'; CC.steamLoginData"/>
		<bind name="watchDH" value="'selectedSteamHostIndex'; ['steamLoginEntity.steamLoginData.evUpdate']; steamLoginEntity.steamLoginData.selectedHostIndex"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0 + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<style>
			<marginTop value="12px"/>
			<width value="250px"/>
		</style>
		<block className="BlurMapCustomPxOutbound">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'marginLeft'; -20px"/>
			<bind name="style" value="'marginRight'; -20px"/>
			<bind name="style" value="'marginTop'; -20px"/>
			<bind name="style" value="'marginBottom'; -20px"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap10_feather" type="native">
				<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 0.7}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="400px"/>
					<textAlign value="center"/>
					<marginBottom value="8px"/>
				</style>
				<bind name="text" value="'IDS_CHOOSE_REGION'"/>
			</block>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<width value="100%"/>
				<maxHeight value="250"/>
			</style>
			<bind name="repeat" value="steamLoginEntity.steamLoginData.hostsDataProvider; 'SteamHostRenderer'; { _selectedSteamHostIndex: selectedSteamHostIndex }"/>
		</block>
	</block>
	<block className="ExternalNewNicknameContent">
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="firstEntityDH" value="'steamLoginEntity'; CC.steamLoginData"/>
		<bind name="watchDH" value="'nicknameMaxLength';				[];	realmConstantsEntity.realmConstants.nicknameMaxLength"/>
		<bind name="watchDH" value="'nicknameRestrict';				[];	realmConstantsEntity.realmConstants.nicknameRestrict"/>
		<bind name="watchDH" value="'nicknameRestrictRegexp';		[];	realmConstantsEntity.realmConstants.nicknameRestrictRegexp"/>
		<bind name="watchDH" value="'selectedSteamHostName';			['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.hostsDataProvider[steamLoginEntity.steamLoginData.selectedHostIndex].ids"/>
		<bind name="watchDH" value="'nicknameSuggestions';			['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.nicknameSuggestions"/>
		<bind name="watchDH" value="'lastAttemptedNickname';			['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.lastAttemptedNickname"/>
		<bind name="watchDH" value="'isNicknameInUse';				['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.isNicknameInUse"/>
		<bind name="watchDH" value="'isNicknameInvalid';				['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.isNicknameInvalid"/>
		<bind name="watchDH" value="'isWrongName';					['steamLoginEntity.steamLoginData.evUpdate'];	(steamLoginEntity.steamLoginData.isNicknameInUse ||
																									steamLoginEntity.steamLoginData.isNicknameInvalid)"/>
		<bind name="watchDH" value="'isNicknameValidationRunning';	['steamLoginEntity.steamLoginData.evUpdate'];	steamLoginEntity.steamLoginData.isNicknameValidationRunning"/>
		<bind name="catch" value="'steamSelectName'"/>
		<bind name="catch" value="'nameChangedEv'; { isFirstEdit: false }"/>
		<bind name="catch" value="'hideWrongMessageEv'; { isWrongSymbolInputed: false, isWrongNickNotificationShown: false }"/>
		<bind name="catch" value="'nameChangedEv'; { selectedNameIndex: ((steamNewNickname != nicknameSuggestions[selectedNameIndex]) ? -1 : selectedNameIndex) }"/>
		<bind name="var" value="{ isFirstEdit: true }"/>
		<bind name="var" value="{ selectedNameIndex: -1 }"/>
		<bind name="watch" value="'isSteamNewNicknameLoginBtnEnabled'; !(isWrongName || isNicknameValidationRunning)"/>
		<bind name="watch" value="'steamNewNickname';			(nicknameSuggestions.length &gt; 0) &amp;&amp; (selectedNameIndex != -1)	? nicknameSuggestions[selectedNameIndex] :
																								isFirstEdit		? lastAttemptedNickname
																												: steamNewNickname"/>
		<bind name="watch" value="'isWrongNickNotificationShown';	(steamNewNickname.length &gt; 0 &amp;&amp; (isWrongName &amp;&amp; !isNicknameValidationRunning))"/>
		<bind name="watch" value="'validationState';					isNicknameValidationRunning					? 'validation' :
													(isNicknameInvalid || isNicknameInUse)		? 'invalid'
																								: 'valid'"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0 + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<style>
			<width value="400px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<top value="-80px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
				</style>
				<block className="BlurMapCustomPxOutbound">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="style" value="'marginLeft'; -20px"/>
					<bind name="style" value="'marginRight'; -20px"/>
					<bind name="style" value="'marginTop'; -22px"/>
					<bind name="style" value="'marginBottom'; -22px"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="mc_blurmap10_feather" type="native">
						<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 0.7}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$Fullsize"/>
						<bind name="blurMap" value="0"/>
					</block>
				</block>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<alpha value="0.9"/>
						<width value="100%"/>
						<textAlign value="center"/>
					</style>
					<bind name="text" value="'IDS_CHOOSE_WOWS_NAME'"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<block className="BlurMapCustomPxOutbound">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="style" value="'marginLeft'; -10px"/>
					<bind name="style" value="'marginRight'; -10px"/>
					<bind name="style" value="'marginTop'; -4px"/>
					<bind name="style" value="'marginBottom'; -4px"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="mc_blurmap10_feather" type="native">
						<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 0.7}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$Fullsize"/>
						<bind name="blurMap" value="0"/>
					</block>
				</block>
				<block className="text_input_caps" type="native">
					<params>
						<param name="actAsButton" value="true"/>
						<param name="itemRenderer" value="drop_down_list_item"/>
						<param name="soundSet" value="hard_textinput"/>
						<param name="noTranslate" value="true"/>
					</params>
					<params>
						<param name="name" value="steamUserNameField"/>
					</params>
					<bind name="enabled" value="!isWaitingAnswer"/>
					<bind name="maxChars" value="nicknameMaxLength"/>
					<bind name="restrict" value="nicknameRestrict"/>
					<bind name="restrictFeedback" value="nicknameRestrictRegexp; 'isWrongSymbolInputed'"/>
					<bind name="soundOn" value="'click'; 'press'; 'default_button'"/>
					<bind name="action" value="'textInputEnter'; isSteamNewNicknameLoginBtnEnabled ? 'steamNicknameEdited' : null; { nickname: steamNewNickname }"/>
					<bind name="defaultText" value="tr('IDS_ENTER_LOGIN_ON_LOGIN')"/>
					<bind name="sync" value="'text'; 'change'; 'steamNewNickname'; 'evUsernameChanged'"/>
					<bind name="dispatch" value="'steamNewNickname' + varChanged; 'nameChangedEv'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
					<bind name="ubFocus" value="1; usernameFocused; true; true"/>
					<bind name="action" value="'nameChangedEv';	'nickNameChange';	{ nickname: steamNewNickname }"/>
					<bind name="action" value="'addedToStage';	'nickNameChange';	{ nickname: steamNewNickname }"/>
					<style>
						<width value="200px"/>
						<height value="29px"/>
					</style>
					<block>
						<style>
							<width value="410px"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<block>
							<style>
								<width value="410px"/>
								<position value="absolute"/>
								<bottom value="16px"/>
							</style>
							<bind name="instance" value="'WrongNickNameNotificationAndSuggestions';	isWrongNickNotificationShown ||
																					isWrongSymbolInputed			?	{ _isWrongSymbolInputed: isWrongSymbolInputed,
																														_selectedNameIndex: selectedNameIndex }
																													:	null"/>
						</block>
					</block>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<right value="-2px"/>
					</style>
					<bind name="instance" value="'ValidationState';	(steamNewNickname.length &gt; 0)	? { _validationState: validationState }
																					: null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="32px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '200px',
											_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
											_size: 2,
											_name: isSteamNewNicknameLoginBtnEnabled ? 'steamNewNicknameBtn' : '',
											_action: 'steamNicknameEdited',
											_actionParams: { nickname: steamNewNickname },
											_focusIndex: 2,
											_enabled: isSteamNewNicknameLoginBtnEnabled,
											_label: 'IDS_LOGIN_BUTTON'}"/>
		</block>
	</block>
	<block className="ValidationState">
		<block>
			<bind name="transition" value="(_validationState == 'invalid'); 0.07; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<style>
				<position value="absolute"/>
				<left value="3px"/>
				<top value="8px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'bitmap:icon_warning_orange_bm'"/>
		</block>
		<block>
			<bind name="transition" value="(_validationState == 'valid'); 0.07; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<style>
				<position value="absolute"/>
				<top value="5px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'bitmap:checkbox_check'"/>
		</block>
		<block>
			<bind name="transition" value="(_validationState == 'validation'); 0.07; {alpha: 0}; {alpha: 1}"/>
			<style>
				<position value="absolute"/>
				<top value="15px"/>
				<left value="10px"/>
			</style>
			<block className="loading_bar_small_centered" type="native"/>
		</block>
	</block>
	<block className="ExternalLoginDenied">
		<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
		<bind name="firstEntityDH" value="'steamLoginEntity'; CC.steamLoginData"/>
		<bind name="watchDH" value="'isWinStore';	['loginEntity.loginData.evUpdate'];	loginEntity.loginData.isWinStore"/>
		<bind name="watchDH" value="'isEGSClient';	['loginEntity.loginData.evUpdate'];	loginEntity.loginData.isEGS"/>
		<bind name="watchDH" value="'lastAttemptedNickname'; ['steamLoginEntity.steamLoginData.evUpdate']; steamLoginEntity.steamLoginData.lastAttemptedNickname"/>
		<bind name="watch" value="'buttonActionParams';	{ hostId:			_curHostIndex,
										  user:				'',
										  password:			'',
										  savePassword:		false }"/>
		<style>
			<width value="420px"/>
			<marginTop value="32px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
			</style>
			<block className="BlurMapCustomPxOutbound">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'marginLeft'; -20px"/>
				<bind name="style" value="'marginRight'; -20px"/>
				<bind name="style" value="'marginTop'; -20px"/>
				<bind name="style" value="'marginBottom'; -20px"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap10_feather" type="native">
					<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 0.7}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<alpha value="0.9"/>
						<width value="100%"/>
						<leading value="-1"/>
						<textAlign value="center"/>
						<styleSheet value="h3
						{
							color: #FFCC66;
						}"/>
					</style>
					<bind name="text" value="isWinStore 	? ('&lt;body&gt;' + subst('IDS_PLATFORM_MICROSOFT_ACCOUNT_DENIED',	[], {accountName: '&lt;h3&gt;' + lastAttemptedNickname + '&lt;/h3&gt;'}) + '&lt;/body&gt;') :
							isEGSClient	? ('&lt;body&gt;' + subst('IDS_PLATFORM_EGS_ACCOUNT_DENIED',			[], {accountName: '&lt;h3&gt;' + lastAttemptedNickname + '&lt;/h3&gt;'}) + '&lt;/body&gt;')
										: ('&lt;body&gt;' + subst('IDS_PLATFORM_STEAM_ACCOUNT_DENIED',		[], {accountName: '&lt;h3&gt;' + lastAttemptedNickname + '&lt;/h3&gt;'}) + '&lt;/body&gt;')"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<params>
				<param name="name" value="personalAccountBtn"/>
			</params>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<block className="BlurMapCustomPxOutbound">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'marginLeft'; -3px"/>
				<bind name="style" value="'marginRight'; -3px"/>
				<bind name="style" value="'marginTop'; -3px"/>
				<bind name="style" value="'marginBottom'; -3px"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap10_feather" type="native">
					<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 0.7}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block>
				<style>
					<height value="44px"/>
					<width value="200px"/>
				</style>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
													_text: 'IDS_PERSONAL_ACCOUNT_HINT' }"/>
				<bind name="action" value="'click'; 'gotoUrlByIdent';	{ ident: SC.Ui_windows.GUI_URL.PERSONAL_ACCOUNT }"/>
				<block className="button_infopanel_no_label" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block>
					<bind name="transition" value="rollOver; 0.1; {alpha: 0.85}; {alpha: 1}"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBoldNM"/>
						<style>
							<hitTest value="false"/>
							<alpha value="0.9"/>
							<width value="100%"/>
							<textAlign value="center"/>
							<marginLeft value="6px"/>
							<marginRight value="6px"/>
							<leading value="-3"/>
						</style>
						<bind name="text" value="'IDS_PERSONAL_ACCOUNT_BTN'"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '200px',
											_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
											_name: 'steamLoginRetryBtn',
											_size: 2,
											_action: 'reconnect',
											_actionParams: buttonActionParams,
											_enabled: true,
											_label: 'IDS_LOGIN_BUTTON'}"/>
		</block>
	</block>
	<block className="WrongNickNameNotificationAndSuggestions">
		<bind name="firstEntityDH" value="'steamLoginEntity'; CC.steamLoginData"/>
		<bind name="watchDH" value="'isNicknameInvalid';		['steamLoginEntity.steamLoginData.evUpdate']; steamLoginEntity.steamLoginData.isNicknameInvalid"/>
		<bind name="watchDH" value="'nicknameSuggestions';	['steamLoginEntity.steamLoginData.evUpdate']; steamLoginEntity.steamLoginData.nicknameSuggestions"/>
		<bind name="watch" value="'notificationText';	_isWrongSymbolInputed			? (tr('IDS_LOGIN_SCREEN_WRONG_SYMBOL_INPUT')) :
										isNicknameInvalid				? (tr('IDS_LOGIN_SCREEN_NAME_RESTRICTIONS')) :
										nicknameSuggestions.length &gt; 0	? (tr('IDS_CHOOSED_NAME_IS_TAKEN_IN_WOWS_SUGGESTIONS'))
																		: (tr('IDS_CHOOSED_NAME_IS_TAKEN_IN_WOWS'))"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginBottom value="-7px"/>
				<marginTop value="-8px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginTop value="1px"/>
					<marginBottom value="1px"/>
				</style>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="BlurMapCustom">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="mc_blurmap3" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$Fullsize"/>
						<bind name="blurMap" value="0"/>
					</block>
				</block>
			</block>
			<block className="notification_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'WarningMessage'; {	_delay:				0,
											_startTop:			10,
											_maxWidth:			356,
											_text:				notificationText }"/>
		</block>
		<block>
			<style>
				<marginTop value="4px"/>
				<width value="100%"/>
				<flow value="htile"/>
				<align value="center"/>
			</style>
			<bind name="visible" value="nicknameSuggestions.length &gt; 0 &amp;&amp; !_isWrongSymbolInputed"/>
			<bind name="repeat" value="nicknameSuggestions; 'SteamNamesRenderer'; { _selectedNameIndex: _selectedNameIndex }"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="12px"/>
				<top value="5px"/>
			</style>
			<bind name="instance" value="'CloseButton';	{ _event:		'hideWrongMessageEv',
										  _tooltipText:	'IDS_CLOSE' }"/>
		</block>
	</block>
	<block className="SteamHostRenderer">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="name" value="'steamRealm_' + ids"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="firstEntityDH" value="'steamLoginEntity'; CC.steamLoginData"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="watchDH" value="'steamHostRealm'; ['steamLoginEntity.steamLoginData.evUpdate']; steamLoginEntity.steamLoginData.hostsDataProvider[$index].realm"/>
		<bind name="var" value="{steamHostRealmToRegion: {CN: 'CN', RU: 'RU'}}"/>
		<bind name="watch" value="'steamHostRegion'; steamHostRealmToRegion[steamHostRealm] ? steamHostRealmToRegion[steamHostRealm] : 'WW'"/>
		<bind name="watch" value="'isSelected'; _selectedSteamHostIndex == $index"/>
		<style>
			<width value="100%"/>
			<height value="50px"/>
		</style>
		<block>
			<bind name="transition" value="rollOver || isSelected; 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="dock_submenu_item_bg" type="native">
				<styleClass value="$Fullsize"/>
				<bind name="transition" value="mouseDown; 0.03; {alpha: 1}; {alpha: 0.5}"/>
				<bind name="action" value="'click'; 'updateSteamSelectedHost'; { hostIndex: $index }"/>
				<bind name="dispatch" value="steamHostRegion == currentRegion ? 'click' : ''; 'changeLoginScreenState'; { loginScreenState: 3 }; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
				<hitTest value="false"/>
			</style>
			<block type="text">
				<bind name="class" value="isSelected ? '$TextDefaultBold19NM' : '$TextDefault19NM'"/>
				<style>
					<alpha value="0.9"/>
					<width value="100%"/>
					<textAlign value="center"/>
				</style>
				<bind name="style" value="'margin'; isSelected	? '3px|3px|8px|6px'
												: '3px|3px|7px|5px'"/>
				<bind name="text" value="ids"/>
			</block>
			<block>
				<bind name="visible" value="isRecommended"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault13NM"/>
					<style>
						<alpha value="0.75"/>
						<width value="100%"/>
						<textAlign value="center"/>
						<marginBottom value="4px"/>
					</style>
					<default_text value="IDS_RECOMMENDED"/>
				</block>
			</block>
		</block>
	</block>
	<block className="SteamNamesRenderer">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="name" value="'SteamNamesRenderer_' + $index"/>
		<bind name="watch" value="'isActive'; _selectedNameIndex == $index"/>
		<bind name="dispatch" value="'click'; 'steamSelectName'; { selectedNameIndex: $index }; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<height value="29px"/>
			<marginLeft value="2px"/>
			<marginRight value="2px"/>
		</style>
		<block className="button_dock_bg" type="native">
			<bind name="gotoAndStop!" value="'down'"/>
			<bind name="transition" value="rollOver || isActive; 0.15; {alpha: isActive ? 1 : 0}; {alpha: 1}"/>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<bind name="transition" value="rollOver; 0.15; {alpha: isActive ? 1 : 0.85}; {alpha: 1.0}"/>
				<style>
					<height value="100%"/>
					<marginLeft value="8px"/>
					<marginRight value="8px"/>
					<marginTop value="8px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<hitTest value="false"/>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="$value"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ServerMessage">
		<bind name="action" value="'click'; 'showErrorMessage'; { header: '', message: '' }"/>
		<bind name="var" value="{ errorStringsToIgnoreSupportLinkFor: [	'IDS_ACCOUNT_ACTIVATION_ERROR_ALL_INCORRECT_CONFIRMATION_CODE',
														'IDS_ACCOUNT_ACTIVATION_ERROR_CODE_MIN_LENGTH',
														'IDS_ACCOUNT_ACTIVATION_ERROR_CODE_MAX_LENGTH',
														'IDS_ACCOUNT_ACTIVATION_ERROR_ALL_INCORRECT_CONFIRMATION_CODE_REQUEST_DEACTIVATED' ] }"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<block className="InfotipPanelBg">
			<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
			<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<style>
				<margin value="-2px"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<background9Slice value="[3]"/>
				</style>
				<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
			</block>
		</block>
		<block>
			<style>
				<marginLeft value="24px"/>
				<marginRight value="24px"/>
				<marginTop value="16px"/>
				<marginBottom value="16px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<leading value="-2"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="style" value="'textColor'; _messageHighlight ? SC.Ui_styles.SERVICE_COLORS.RED : SC.Ui_styles.SERVICE_COLORS.ORANGE"/>
				<bind name="name" value="'messageLoggerHeader'"/>
				<bind name="text" value="_headerText"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<minWidth value="300"/>
					<maxWidth value="600"/>
					<marginBottom value="12px"/>
					<textAlign value="center"/>
				</style>
				<bind name="style" value="'textColor'; _messageHighlight ? SC.Ui_styles.SERVICE_COLORS.RED : SC.Ui_styles.SERVICE_COLORS.ORANGE"/>
				<bind name="name" value="'messageLogger'"/>
				<bind name="text" value="_messageText"/>
			</block>
			<block>
				<bind name="instance" value="'LinkText'; errorStringsToIgnoreSupportLinkFor.indexOf(_messageText) &gt; -1	? null
																										: {	_label:			'IDS_LINK_SUPPORT',
																											_urlIdent:		SC.Ui_windows.GUI_URL.SUPPORT,
																											_tooltipText:	'IDS_LINK_SUPPORT_HINT',
																											_name:			'ButtonSupport' }"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
				<margin value="-1px"/>
				<backgroundImage value="url:../service_kit/frames/one_pixel_frame.png"/>
				<background9Slice value="[2]"/>
			</style>
			<bind name="colorTransform" value="_messageHighlight ? {redOffset:0,greenOffset:-153,blueOffset:-255} :	{redOffset:0,greenOffset:-102,blueOffset:-204}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="8px"/>
				<top value="9px"/>
			</style>
			<bind name="instance" value="'CloseButton'; { _tooltipText: 'IDS_CLOSE' }"/>
		</block>
	</block>
	<block className="LinkText">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: _tooltipText }"/>
		<bind name="action" value="'click'; 'gotoUrlByIdent'; { ident: _urlIdent }"/>
		<bind name="name" value="_name"/>
		<block type="text">
			<bind name="class" value="_large ? '$TextHeader' : '$TextDefault'"/>
			<bind name="class" value="(rollOver &amp;&amp; !mouseDown) ? '$FontColorWhite' : '$FontColorDefault'"/>
			<bind name="text" value="_label"/>
		</block>
		<block className="Underline">
			<bind name="style" value="'backgroundColor'; (rollOver &amp;&amp; !mouseDown) ? '0xFFFFFFFF' : '0x00856933'"/>
			<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) == true; 0.3; {scaleX : 0, alpha : 0}; {scaleX : 1, alpha :1}"/>
			<style>
				<backgroundColor value="0xFFFFFFFF"/>
				<position value="absolute"/>
				<height value="1px"/>
				<width value="100%"/>
				<bottom value="0px"/>
				<marginLeft value="2px"/>
				<marginRight value="2px"/>
			</style>
		</block>
	</block>
	<block className="DevTraces"/>

	<!-- login_queue -->
	<block className="LoginQueue">
		<bind name="firstEntityDH" value="'loginQueueEntity'; CC.loginQueue"/>
		<bind name="watchDH" value="'queueType'; ['loginQueueEntity.loginQueue.evChanged']; loginQueueEntity.loginQueue.queueType"/>
		<bind name="watchDH" value="'message'; ['loginQueueEntity.loginQueue.evChanged']; loginQueueEntity.loginQueue.message"/>
		<styleClass value="$Fullsize"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<styleClass value="$EyeLevelVAligned"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="540px"/>
				<height value="110px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<block>
					<bind name="appear" value="'startShow'; 0.15; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
					<block type="text">
						<styleClass value="$TextDefault21NM"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="message"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'startShow'; 0.15; 0.20; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.20; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
					<style>
						<marginTop value="24px"/>
					</style>
					<block type="text">
						<style>
							<maxWidth value="526"/>
							<textAlign value="center"/>
							<alpha value="0.75"/>
						</style>
						<styleClass value="$TextDefault17NM"/>
						<bind name="text" value="queueType == 0 	? 'IDS_YOU_WILL_ENTER_GAME_SHORTLY' 
												: queueType == 1 	? 'IDS_SERVER_IS_FULL_WAIT_FOR_YOU_TURN'
																	: ''"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="name" value="'btn_ok'"/>
			<bind name="input"/>
			<style>
				<position value="absolute"/>
				<top value="20px"/>
				<right value="20px"/>
			</style>
			<bind name="instance" value="'CloseButton'; { _tooltipText: 'IDS_CLOSE' }"/>
		</block>
	</block>

	<!-- markers_attention -->
	<block className="MarkerAttention">
		<bind name="watch" value="'markerSize';	_size == 0		? '19px'	:
								_size == 1		? '38px'	:
								_size == 2		? '80px'
														: '19px'"/>
		<bind name="watch" value="'markerImage';	_size == 0		? 'url:../service_kit/markers/marker_attention.png'			:
								_size == 1		? 'url:../service_kit/markers/marker_attention_big.png'		:
								_size == 2		? 'url:../service_kit/markers/marker_attention_huge.png'
														: 'url:../service_kit/markers/marker_attention.png'"/>
		<style>
			<hitTest value="false"/>
		</style>
		<bind name="style" value="'width'; markerSize"/>
		<bind name="style" value="'height'; markerSize"/>
		<bind name="style" value="'backgroundImage'; markerImage"/>
	</block>

	<!-- markers_new -->
	<block className="MarkerNewCounter">
		<style>
			<minWidth value="15"/>
		</style>
		<block className="MarkerNew" type="ublock">
			<bind name="build!" value="{ _newContentCounter: _newContentCounter}"/>
		</block>
	</block>
	<block className="MarkerNewCounterBig">
		<style>
			<hitTest value="false"/>
			<background9Slice value="[9]"/>
		</style>
		<bind name="style" value="'backgroundImage'; _isNegative ? 'url:../service_kit/markers/marker_bg_black.png' : 'url:../service_kit/markers/marker_bg.png'"/>
		<block type="text">
			<style>
				<marginLeft value="10px"/>
				<marginRight value="10px"/>
				<marginTop value="6px"/>
				<marginBottom value="6px"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="class" value="'$DropShadowDisabler'"/>
			<bind name="text" value="_newContentCounter"/>
		</block>
	</block>
	<block className="MarkerNewAttention">
		<style>
			<width value="41px"/>
		</style>
		<block className="MarkerNew" type="ublock">
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="MarkerNewRewardsAnimate">
		<style>
			<position value="absolute"/>
			<top value="-10px"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<right value="8px"/>
				<top value="17px"/>
			</style>
			<bind name="instance" value="'RewardsMarkerAnimation'; {}"/>
		</block>
		<block>
			<style>
				<width value="32px"/>
				<height value="32px"/>
			</style>
			<bind name="style" value="'backgroundImage'; _iconReward"/>
		</block>
	</block>
	<block className="RewardsMarkerAnimation">
		<style>
			<width value="17px"/>
			<height value="12px"/>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../animations/spine/sparks/sparks.skel"/>
		</style>
	</block>

	<!-- menu_items -->
	<block className="BigMenuItemWithPrice">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; !_isAvailable &amp;&amp; _disableReason	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																					_text: _disableReason}
																			:	null"/>
		<bind name="dispatch" value="'click'; _isAvailable ? 'menuItemSelectedEv' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="soundSet" value="_isAvailable ? 'default_button' : ''"/>
		<style>
			<backgroundColor value="0x30000000"/>
		</style>
		<bind name="style" value="'width';	_width	? _width	: '100%'"/>
		<bind name="style" value="'height';	_height	? _height	: '74px' "/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="_isAvailable &amp;&amp; _isSelected; 0.1; {alpha: 0.4}; {alpha: 1.0}"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="transition" value="_isAvailable &amp;&amp; (_isSelected || rollOver); 0.1; {alpha: 0}; {alpha: 1.0}"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
					<background9Slice value="[3,3]"/>
					<hitTest value="false"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<paddingLeft value="24px"/>
				<paddingRight value="24px"/>
				<align value="middle"/>
			</style>
			<bind name="style" value="'alpha';	_isSelected		? 1 :
								_isAvailable	? 0.8
												: 0.35"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<bind name="visible" value="!!_title"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<styleClass value="$TextDefaultBold19NM"/>
						<bind name="text" value="_title"/>
					</block>
					<block>
						<bind name="visible" value="!!_titlePriceInfo"/>
						<style>
							<marginLeft value="-3px"/>
							<marginTop value="-7px"/>
							<marginBottom value="-8px"/>
						</style>
						<bind name="instance" value="'PriceTag'; {priceInfo: _titlePriceInfo, _showDiscountTag: false, _medium: true}"/>
					</block>
					<block>
						<bind name="visible" value="_newCounterValue &gt; 0"/>
						<style>
							<marginLeft value="2px"/>
							<marginTop value="-8px"/>
						</style>
						<bind name="instance" value="'MarkerNewCounter'; { _newContentCounter: _newCounterValue}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block type="text">
					<bind name="visible" value="!!_subTitle"/>
					<style>
						<width value="100%"/>
						<marginTop value="8px"/>
						<alpha value="0.75"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="_subTitle"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="!!_priceInfo"/>
				<style>
					<align value="right"/>
					<marginLeft value="16px"/>
					<marginRight value="-6px"/>
				</style>
				<bind name="instance" value="'PriceTag'; {priceInfo: _priceInfo, _showDiscountTag: true, _medium: true }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="SmallMenuItemWithPrice">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; !_isAvailable &amp;&amp; _disableReason	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																					_text: _disableReason}
																			:	null"/>
		<bind name="dispatch" value="'click'; _isAvailable ? 'menuItemSelectedEv' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="soundSet" value="_isAvailable ? 'default_button' : ''"/>
		<style>
			<backgroundColor value="0x30000000"/>
		</style>
		<bind name="style" value="'width';	_width	? _width	: '100%'"/>
		<bind name="style" value="'height';	_height	? _height	: '74px' "/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="_isAvailable &amp;&amp; _isSelected; 0.1; {alpha: 0.4}; {alpha: 1.0}"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="transition" value="_isAvailable &amp;&amp; (_isSelected || rollOver); 0.1; {alpha: 0}; {alpha: 1.0}"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
					<background9Slice value="[3,3]"/>
					<hitTest value="false"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<align value="middle"/>
			</style>
			<bind name="style" value="'alpha';	_isSelected		? 1 :
								_isAvailable	? 0.8
												: 0.35"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<alpha value="0.9"/>
					</style>
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="text" value="_title"/>
				</block>
				<block>
					<bind name="visible" value="_newCounterValue &gt; 0"/>
					<style>
						<marginLeft value="2px"/>
						<marginTop value="-8px"/>
					</style>
					<bind name="instance" value="'MarkerNewCounter'; { _newContentCounter: _newCounterValue}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="!!_priceInfo"/>
				<style>
					<align value="right"/>
					<marginLeft value="16px"/>
					<marginRight value="-2px"/>
				</style>
				<bind name="instance" value="'PriceTag'; {priceInfo: _priceInfo, _showDiscountTag: true }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_account_level_up -->
	<block className="ModalWindowAccountLevelUp">
		<bind name="watch" value="'isWindowAppearAnimation'; $root.promoRewardId || $root.isNewLevelGained"/>
		<bind name="changeDispatch" value="isWindowAppearAnimation; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; true"/>
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="lag" value="'lagAfterAddedToStage'"/>
		<bind name="catch" value="'lagAfterAddedToStage'; {isEndOfLag: true}"/>
		<bind name="name" value="'ModalWindowAccountLevelUp'"/>
		<styleClass value="$Fullsize"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap_gamemenu" type="native">
				<bind name="appear" value="'evStartShow'; 0.6; 0.3; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.3; 0.1; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'evStartShow'; 0.6; 0.3; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.3; 0.1; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="contrast"/>
			</block>
			<block className="modal_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="appear" value="'startHide'; 0.3; 0; {alpha: 1}; {alpha: 0}"/>
			<bind name="instance" value="'ModalWindowAccountLevelUpContent'; isEndOfLag ? {} : null"/>
		</block>
	</block>
	<block className="ModalWindowAccountLevelUpContent">
		<bind name="var" value="{isStopShowFeature: false}"/>
		<bind name="watch" value="'isNewLevelGained'; $root.isNewLevelGained"/>
		<bind name="watch" value="'promoRewardId'; $root.promoRewardId"/>
		<bind name="watch" value="'isPromoRewardEarned'; promoRewardId != null"/>
		<bind name="firstEntityDH" value="'accountLevelEntity'; CC.accountLevel"/>
		<bind name="watchDH" value="'curAccountLevel'; ['accountLevelEntity.accountLevel.evLevelChanged']; accountLevelEntity.accountLevel.level"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="appear" value="'startShow'; 0.3; 0.35; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.45; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<paddingRight value="1280:20,1920:46aw"/>
				<paddingLeft value="1280:20,1920:46aw"/>
				<paddingTop value="1280:20,1920:46aw"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<top value="9px"/>
					<right value="4px"/>
				</style>
				<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
			</block>
		</block>
		<block>
			<bind name="dispatch" value="'addedToStage'; isNewLevelGained ? null : 'stopShowFeature'; {}; 2; 0"/>
			<styleClass value="$EyeLevelVAligned"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<bind name="instance" value="'AccountLevelUpFeatureUnlock'; isNewLevelGained &amp;&amp; curAccountLevel &gt; 1 ? {_isLastElement: !isPromoRewardEarned} : null"/>
		</block>
		<block>
			<bind name="catch" value="'stopShowFeature'; {isStopShowFeature: true}"/>
			<styleClass value="$EyeLevelVAligned"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<bind name="instance" value="'AccountLevelUpPromoUnlock'; isStopShowFeature &amp;&amp; isPromoRewardEarned ? {} : null"/>
		</block>
	</block>
	<block className="AccountLevelUpFeatureUnlock">
		<bind name="firstEntityDH" value="'accountLevelEntity'; CC.accountLevel"/>
		<bind name="watchDH" value="'curAccountLevel'; ['accountLevelEntity.accountLevel.evLevelChanged']; accountLevelEntity.accountLevel.level"/>
		<bind name="primaryEntityDH" value="'accountLevelingStepEntity'; CC.accountLevelingStep; curAccountLevel"/>
		<bind name="watchDH" value="'stepFeatures'; ['accountLevelingStepEntity.accountLevelingStep.evFeaturesChanged']; accountLevelingStepEntity.accountLevelingStep.features"/>
		<bind name="primaryEntityDH" value="'featureEntity'; CC.accountFeature; stepFeatures"/>
		<bind name="watchDH" value="'titleFeature'; ['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.title"/>
		<bind name="watchDH" value="'levelUpText'; ['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.levelUpText"/>
		<bind name="watchDH" value="'iconFeaturePath'; ['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.iconPath"/>
		<bind name="firstEntityDH" value="'voicePromptEntity'; CC.voicePrompt"/>
		<bind name="watchDH" value="'isPlaying'; ['voicePromptEntity.voicePrompt.evPlay', 'voicePromptEntity.voicePrompt.evStop']; voicePromptEntity.voicePrompt.isPlaying"/>
		<bind name="dispatch" value="'addedToStage';				'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.7"/>
		<bind name="dispatch" value="'evProgressbarAppear';		'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.8"/>
		<bind name="dispatch" value="'evProgressbarShine';		'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.2"/>
		<bind name="dispatch" value="'Step_0';					'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.3"/>
		<bind name="dispatch" value="'startVideoAnimation';		'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.2"/>
		<bind name="dispatch" value="'Step_1';					'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.1"/>
		<bind name="dispatch" value="'Step_2';					'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.2"/>
		<bind name="dispatch" value="'startVideoAnimationBG';	'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.8"/>
		<bind name="dispatch" value="'Step_3';					'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.7"/>
		<bind name="dispatch" value="'startMoveFeatureIcon';		'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 1"/>
		<bind name="dispatch" value="'endMoveFeatureIcon';		'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.3"/>
		<bind name="dispatch" value="'evStartVoicePrompt';		'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 2.3"/>
		<bind name="dispatch" value="'evFirstTextFade';			'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.3"/>
		<bind name="dispatch" value="'evSecondTextAppear';		'evBannerAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 5"/>
		<bind name="dispatch" value="'allAnimationFinishedEvent'; _isLastElement ? 'closeModalWindow' : 'endTextAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'endTextAnimation'; 'stopShowFeature'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; 0.3"/>
		<bind name="request" value="'closeModalWindow'; 'closeModalWindowAccountLevelUp'; {}"/>
		<bind name="eventSequence" value="[	'evProgressbarAppear',
							'evProgressbarShine',
							'Step_0',
							'startVideoAnimation',
							'Step_1',
							'Step_2',
							'startVideoAnimationBG',
							'Step_3',
							'startMoveFeatureIcon',
							'endMoveFeatureIcon',
							'evStartVoicePrompt',
							'evFirstTextFade',
							'evSecondTextAppear',
							'evSecondTextFade']; 'evBannerAnimation'; 'allAnimationFinishedEvent'; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; true"/>
		<style>
			<width value="980px"/>
			<height value="1px"/>
		</style>
		<block>
			<bind name="appear" value="'startMoveFeatureIcon'; 0.7; 0; {left: 0}; {left:-690}; SC.Common.UB1_EASING_FUNCTIONS.ON_OUT_QUAD"/>
			<bind name="appear" value="'endTextAnimation'; 0.3; 0; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<right value="128"/>
				<width value="1px"/>
				<height value="1px"/>
			</style>
			<block>
				<bind name="appear" value="'startVideoAnimationBG'; 0.5; 0; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="760px"/>
					<height value="760px"/>
					<alpha value="0"/>
				</style>
				<bind name="catch" value="'startVideoAnimationBG'; {startLevelUpAnimationBG: true}"/>
				<bind name="instance" value="'BGAnimation'; startLevelUpAnimationBG ? {} : null"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<right value="128"/>
				<width value="1px"/>
				<height value="1px"/>
			</style>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="700px"/>
					<height value="700px"/>
				</style>
				<bind name="catch" value="'startVideoAnimation'; {startLevelUpAnimation: true}"/>
				<bind name="instance" value="'BoomAnimation'; startLevelUpAnimation ? {} : null"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'evProgressbarAppear'; 0.7; 0; {alpha:0}; {alpha:1}"/>
			<bind name="appear" value="'startMoveFeatureIcon'; 0.25; 0; {alpha:1}; {alpha:0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="soundOn" value="'addedToStage'; 'AccountLevelUpLineProgress'; 'levelUpAnimation'"/>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<left value="0"/>
				<height value="37px"/>
				<alpha value="0"/>
			</style>
			<bind name="instance" value="'AccountLevelUpLineProgress'; {}"/>
		</block>
		<block>
			<bind name="soundOn" value="'Step_0'; 'AccountLevelUpAfterProgressIconAppear'; 'levelUpAnimation'"/>
			<bind name="appear" value="'Step_0'; 0.5; 0; {alpha:0, scaleX:1.9, scaleY:1.9, rotation:-12}; {alpha:1, scaleX:0.98, scaleY:0.98, rotation:0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="appear" value="'Step_1'; 0.1; 0; {scaleX:0.98, scaleY:0.98}; {scaleX:1.02, scaleY:1.02}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'Step_2'; 0.2; 0; {scaleX:1.02, scaleY:1.02}; {scaleX:1, scaleY:1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="soundOn" value="'startMoveFeatureIcon'; 'AccountLevelUpIconMove'; 'levelUpAnimation'"/>
			<bind name="appear" value="'startMoveFeatureIcon'; 0.7; 0; {left: 0}; {left:-690}; SC.Common.UB1_EASING_FUNCTIONS.ON_OUT_QUAD"/>
			<bind name="appear" value="'endTextAnimation'; 0.5; 0; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<right value="128"/>
				<width value="1px"/>
				<height value="1px"/>
				<alpha value="0"/>
			</style>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="256px"/>
					<height value="256px"/>
				</style>
				<bind name="instance" value="'IconAccountLevelUpItem'; 	{_iconFeaturePath: iconFeaturePath,
														_curAccountLevel: curAccountLevel}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'Step_1'; 0.1; 0; {alpha:1, scaleX:0.98, scaleY:0.98}; {alpha:1, scaleX:1.02, scaleY:1.02}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'Step_2'; 0.2; 0; {scaleX:1.02, scaleY:1.02, alpha:1}; {scaleX:1, scaleY:1, alpha:0.7}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'Step_3'; 0.7; 0; {scaleX:1, scaleY:1, alpha:0.7}; {scaleX:1, scaleY:1, alpha:0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<right value="128"/>
				<width value="1px"/>
				<height value="1px"/>
				<alpha value="0"/>
			</style>
			<bind name="colorTransform" value="{
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 150,
			greenOffset: 150,
			blueOffset: 150,
			alphaOffset: 0
		}"/>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="256px"/>
					<height value="256px"/>
				</style>
				<bind name="instance" value="'IconAccountLevelUpItem';	{_iconFeaturePath: iconFeaturePath,
														_curAccountLevel: curAccountLevel}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'evSecondTextFade'; 0.5; 0; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="appear" value="'evFirstTextFade'; 0.3; 0; {alpha: 0.9}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<left value="290"/>
				</style>
				<block type="text">
					<bind name="soundOn" value="'endMoveFeatureIcon'; 'AccountLevelUpTextAvailableAppear'; 'levelUpAnimation'"/>
					<bind name="appear" value="'endMoveFeatureIcon'; 0.3; 0; {top: 30, alpha: 0}; {top: 0, alpha: 0.9}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<styleClass value="$TextDefaultBold36NM"/>
					<style>
						<maxWidth value="600"/>
						<leading value="-3"/>
						<alpha value="0"/>
					</style>
					<bind name="text" value="'IDS_ACCESS_LEVEL_RISES'"/>
				</block>
				<block>
					<bind name="action" value="'evStartVoicePrompt'; 'playVoicePrompt'; {level: curAccountLevel}"/>
					<bind name="appear" value="'evStartVoicePrompt'; 0.15; 0.2; {top: 30, alpha: 0}; {top: 0, alpha: 0.9}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="visible" value="isPlaying"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<alpha value="0"/>
						<marginLeft value="32px"/>
						<marginTop value="-4px"/>
					</style>
					<block className="audio_prompt" type="native"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="soundOn" value="'evSecondTextAppear'; 'AccountLevelUpTextHeaderAppear'; 'levelUpAnimation'"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<left value="290"/>
				</style>
				<block type="text">
					<bind name="appear" value="'evSecondTextAppear'; 0.3; 0; {top: 30, alpha: 0}; {top: 0, alpha: 0.9}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<styleClass value="$TextDefault19NM"/>
					<style>
						<maxWidth value="600"/>
						<leading value="-3"/>
						<alpha value="0"/>
						<styleSheet value="h3{font-size: 36; font-family: $WWSDefaultFontBold}"/>
					</style>
					<bind name="text" value=" tr(levelUpText)"/>
				</block>
				<block>
					<bind name="appear" value="'evSecondTextAppear'; 0.15; 0.2; {top: 30, alpha: 0}; {top: 0, alpha: 0.9}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="visible" value="isPlaying"/>
					<style>
						<alpha value="0"/>
						<position value="absolute"/>
						<right value="-69px"/>
						<bottom value="21px"/>
					</style>
					<block className="audio_prompt" type="native"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="AccountLevelUpLineProgress">
		<bind name="var" value="{elementWidth: 710}"/>
		<bind name="catch" value="'evProgressbarAppear'"/>
		<bind name="catch" value="'evProgressbarShine'"/>
		<bind name="catch" value="'startVideoAnimation'"/>
		<style>
			<align value="right"/>
			<flow value="horizontal"/>
			<height value="37px"/>
		</style>
		<block>
			<style>
				<width value="1px"/>
				<height value="100%"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<height value="31px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/ALBigProgressRepeaterBG.png"/>
				<backgroundRepeatX value="true"/>
			</style>
			<bind name="style" value="'width'; elementWidth + 'px'"/>
			<block>
				<bind name="appear" value="'evProgressbarAppear'; 0.8; 0; {width: 71}; {width: elementWidth}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<style>
					<position value="absolute"/>
					<top value="2"/>
					<width value="71px"/>
					<height value="27px"/>
					<backgroundColor value="0xFFFFCC66"/>
					<overflow value="hidden"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<height value="27px"/>
						<backgroundImage value="url:../accountLevel/progressBarIcons/ALBigProgressShinyMiddle.png"/>
						<backgroundSize value="fill"/>
						<alpha value="0.6"/>
					</style>
					<bind name="style" value="'width'; elementWidth + 'px'"/>
				</block>
				<block>
					<bind name="appear" value="'evProgressbarAppear'; 0.8; 0; {width: 500}; {width: 30}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<style>
						<position value="absolute"/>
						<right value="0"/>
						<width value="500px"/>
						<height value="27px"/>
						<backgroundImage value="url:../accountLevel/progressBarIcons/ALBigProgressShinyEnd.png"/>
						<backgroundSize value="fill"/>
						<alpha value="0.8"/>
					</style>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundColor value="0xFFFFFFFF"/>
						<alpha value="0"/>
					</style>
					<bind name="appear" value="'evProgressbarShine'; 0.4; 0; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startVideoAnimation'; 0.4; 0; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="1px"/>
				<height value="100%"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
	</block>
	<block className="AccountLevelUpPromoUnlock">
		<bind name="entityDH" value="'promoRewardEntity'; $root.promoRewardId"/>
		<bind name="watchDH" value="'rewardHeader'; 		['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.title"/>
		<bind name="watchDH" value="'promoRewardImageBig';	['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.imageBig"/>
		<bind name="primaryEntityDH" value="'imageEntity'; CC.byteArrayData; promoRewardImageBig"/>
		<bind name="watchDH" value="'imageData'; ['imageEntity.byteArrayData.evChanged']; imageEntity.byteArrayData.data"/>
		<bind name="lag" value="'lagAfterAddedToStage'"/>
		<bind name="dispatch" value="'lagAfterAddedToStage'; 'startAnimation'; {}; 2; 0.6"/>
		<bind name="dispatch" value="'lagAfterAddedToStage'; 'startSound'; {}; 2; 0.6"/>
		<bind name="request" value="'closeModalWindow'; 'closeModalWindowAccountLevelUp'; {}"/>
		<style>
			<width value="980px"/>
		</style>
		<block>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<left value="128"/>
				<width value="1px"/>
				<height value="1px"/>
				<marginLeft value="34px"/>
			</style>
			<block>
				<bind name="appear" value="'startVideoAnimationBG'; 0.5; 0; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="760px"/>
					<height value="760px"/>
				</style>
				<bind name="dispatch" value="'startAnimation'; 'startVideoAnimationBG'; {}; 2; 1.5"/>
				<bind name="catch" value="'startVideoAnimationBG'; {startLevelUpAnimationBG: true}"/>
				<bind name="instance" value="'BGAnimation'; startLevelUpAnimationBG ? {} : null"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<left value="128"/>
				<width value="1px"/>
				<height value="1px"/>
				<marginLeft value="34px"/>
			</style>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="700px"/>
					<height value="700px"/>
				</style>
				<bind name="dispatch" value="'startAnimation'; 'startVideoAnimation'; {}; 2; 0.3"/>
				<bind name="catch" value="'startVideoAnimation'; {startLevelUpAnimation: true}"/>
				<bind name="instance" value="'BoomAnimation'; startLevelUpAnimation ? {} : null"/>
			</block>
		</block>
		<block>
			<bind name="soundOn" value="'startSound'; isMoney	? 'AccountLevelUpMoneyIconAppear'
												: 'AccountLevelUpIconAppear'
														; 'levelUpAnimation'"/>
			<bind name="dispatch" value="'startAnimation'; 'Step_0'; {}; 2; 0"/>
			<bind name="appear" value="'Step_0'; 0.5; 0; {alpha:0, scaleX:1.9, scaleY:1.9}; {alpha:1, scaleX:0.98, scaleY:0.98}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="dispatch" value="'Step_0'; 'Step_1'; {}; 2; 0.5"/>
			<bind name="appear" value="'Step_1'; 0.1; 0; {scaleX:0.98, scaleY:0.98}; {scaleX:1.02, scaleY:1.02}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="dispatch" value="'Step_1'; 'Step_2'; {}; 2; 0.1"/>
			<bind name="appear" value="'Step_2'; 0.2; 0; {scaleX:1.02, scaleY:1.02}; {scaleX:1, scaleY:1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="dispatch" value="'Step_2'; 'Step_3'; {}; 2; 0.2"/>
			<bind name="dispatch" value="'Step_3'; 'endScaleIcon'; {}; 2; 1.0"/>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<left value="128"/>
				<width value="1px"/>
				<height value="1px"/>
				<marginLeft value="34"/>
				<alpha value="0"/>
			</style>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="256px"/>
					<height value="256px"/>
				</style>
				<bind name="instance" value="'IconAlDataItem'; imageData ? { _imageData: imageData, _iconSize: '256px' } : null"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'Step_1'; 0.1; 0; {alpha:1, scaleX:0.98, scaleY:0.98}; {alpha:1, scaleX:1.02, scaleY:1.02}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'Step_2'; 0.2; 0; {scaleX:1.02, scaleY:1.02, alpha:1}; {scaleX:1, scaleY:1, alpha:0.7}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'Step_3'; 0.7; 0; {scaleX:1, scaleY:1, alpha:0.7}; {scaleX:1, scaleY:1, alpha:0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<left value="128"/>
				<width value="1px"/>
				<height value="1px"/>
				<marginLeft value="34"/>
				<alpha value="0"/>
			</style>
			<bind name="colorTransform" value="{
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 150,
			greenOffset: 150,
			blueOffset: 150,
			alphaOffset: 0
		}"/>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="256px"/>
					<height value="256px"/>
				</style>
				<bind name="instance" value="'IconAlDataItem'; imageData ? { _imageData: imageData, _iconSize: '256px' } : null"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<top value="-116"/>
				<left value="290"/>
				<width value="600px"/>
				<marginTop value="32"/>
				<marginLeft value="32"/>
			</style>
			<block>
				<bind name="soundOn" value="'endScaleIcon'; 'AccountLevelUpTextHeaderAppear'; 'levelUpAnimation'"/>
				<bind name="appear" value="'endScaleIcon'; 0.3; 0; {top:30, alpha:0}; {top:0, alpha:0.9}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="16"/>
					<alpha value="0"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold36NM"/>
					<style>
						<maxWidth value="600"/>
						<leading value="-3"/>
					</style>
					<bind name="text" value="rewardHeader"/>
				</block>
			</block>
			<block>
				<bind name="dispatch" value="'endScaleIcon'; 'showTextAvailable'; {}; 2; 0.5"/>
				<bind name="soundOn" value="'showTextAvailable'; 'AccountLevelUpTextAvailableAppear'; 'levelUpAnimation'"/>
				<bind name="appear" value="'endScaleIcon'; 0.3; 0.5; {alpha:0, scaleX:4, scaleY:4, left:-150, top:-50}; {alpha:0.8, scaleX:1, scaleY:1, left:0, top:0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="dispatch" value="'endScaleIcon'; 'closeModalWindow'; {}; 2; 3.4"/>
				<style>
					<width value="100%"/>
					<alpha value="0"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="14px"/>
						<height value="19px"/>
						<marginRight value="12px"/>
						<backgroundSize value="cover"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_status_check.png'"/>
				</block>
				<block type="text">
					<bind name="class" value="'$TextDefault19NM'"/>
					<style>
						<width value="100%"/>
						<leading value="-3"/>
						<textColor value="0xFFFFCC66"/>
					</style>
					<bind name="text" value="'IDS_REWARD_IS_TAKEN'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="IconAccountLevelUpItem">
		<style>
			<width value="256px"/>
			<height value="256px"/>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:' + _iconFeaturePath + '_big.png'"/>
	</block>

	<!-- modal_account_premium_choose_period -->
	<block className="ModalWindowPremiumAccountChoosePeriod">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_MODAL_WINDOW_TITLE_PREMIUM_ACCOUNT_PURCHASE', _hideDivider: true, _contentElement: 'ModalWindowPremiumAccountChoosePeriodContent'}"/>
	</block>
	<block className="ModalWindowPremiumAccountChoosePeriodContent">
		<bind name="primaryEntityDH" value="'priceInfoEntity'; CC.priceComponent; premid + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'priceInfo'; ['priceInfoEntity.priceComponent.evChanged']; priceInfoEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="collectionDH" value="CC.premiumItem; 'premiumPeriods'; 'byPremiumType.' + SC.Common.PREMIUM_TYPE.WOWS"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold'; 	['resourceEntity.accountResource.evChangedGold']; resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'wowsPremBefore';['resourceEntity.accountResource.evChangedPrem']; resourceEntity.accountResource.wowsPremBefore"/>
		<bind name="entityDH" value="'premItemEntity'; entityId"/>
		<bind name="watchDH" value="'premid'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.id"/>
		<bind name="watchDH" value="'selected'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.isSelected"/>
		<bind name="watchDH" value="'gold'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.gold"/>
		<bind name="watchDH" value="'cashbackGold'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.cashbackGold"/>
		<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
		<bind name="watchDH" value="'isEGSClient';	['loginEntity.loginData.evUpdate']; loginEntity.loginData.isEGS"/>
		<bind name="watch" value="'enoughResources'; selected &amp;&amp; (accountGold &gt;= gold)"/>
		<bind name="watch" value="'currenciesPanelPrices'; [{currency: SC.Common.CURRENCIES.GOLD, finalPrice: enoughResources ? -gold : 0}]"/>
		<bind name="catch" value="'selectedItemChanged'"/>
		<style>
			<width value="520px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 520 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
				<marginBottom value="24px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<alpha value="0.8"/>
				</style>
				<bind name="text" value="'IDS_PREMIUM_ACCOUNT_SUBHEADER'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-3px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="premiumPeriods; 'PremiumAccountDateString'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="$root.isFromPBS"/>
			<style>
				<marginTop value="33px"/>
			</style>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="-2px"/>
					<marginRight value="6px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<bind name="class" value="'$FontColorOrange'"/>
				<bind name="text" value="'IDS_PURCHASE_PREMIUM_WARNING_NEXT_BATTLE'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="enoughResources"/>
			<style>
				<marginTop value="32px"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; enoughResources	?	{	_questionText: 'IDS_PURCHASE_WOWS_ACCOUNT_FOR', 
																							_priceInfo: priceInfo }
																					:	null"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="cashbackGold &gt; 0 &amp;&amp; enoughResources"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<bind name="text" value="'IDS_COMPENSATION_PRICE_INFO'"/>
			</block>
			<block>
				<style>
					<marginTop value="-7px"/>
					<marginLeft value="6px"/>
				</style>
				<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: cashbackGold, currency: SC.Common.CURRENCIES.GOLD}, _medium: true }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="!enoughResources"/>
			<style>
				<marginTop value="37px"/>
			</style>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="-2px"/>
					<marginRight value="6px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<bind name="class" value="'$FontColorOrange'"/>
				<bind name="text" value="'IDS_NOT_ENOUGH_GOLD_TO_BUY_PREMIUM_WOWS'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="32"/>
			</style>
			<block>
				<block>
					<bind name="fade" value="(accountGold &gt;= gold); 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 150}; {alpha: 0, width: 0}"/>
					<style>
						<width value="150px"/>
						<marginRight value="32px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_width: '150px',
															_name: 'Modal_window_action_Button' + 'IDS_PURCHASE_UPPER_CASE',
															_enabled: enoughResources, 
															_label: 'IDS_PURCHASE_UPPER_CASE',
															_isTransactionBtn: true,
															_focusIndex: 1,
															_defaultFocused: true, 
															_request: 'buyPremiumAccount',
															_requestParams: { premId: premid }}"/>
				</block>
			</block>
			<block>
				<bind name="instance" value="'DefaultButton';	{	_width: '150px',
															_label: 'IDS_CANCEL_UPPER_CASE',
															_request: 'btn_cancel',
															_focusIndex: 2,
															_enabled: true}"/>
			</block>
			<block>
				<bind name="visible" value=" currentRegion != 'CN' &amp;&amp; !isEGSClient"/>
				<style>
					<position value="absolute"/>
					<right value="1280:-270,1920:-370aw"/>
				</style>
				<bind name="instance" value="'DefaultButton'; $root.isFromPBS	?	null 
																	:	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																			_label: 'IDS_PREMIUM_ACCOUNT_WG',
																			_request: 'openMetashop',
																			_requestParams: {url: SC.Ui_windows.GUI_URL.BUY_TOTAL_PREMIUM_IN_GAME},
																			_enabled: true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PremiumAccountDateString">
		<bind name="primaryEntityDH" value="'priceInfoEntity'; CC.priceComponent; premid + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'priceInfo'; ['priceInfoEntity.priceComponent.evChanged']; priceInfoEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold'; ['resourceEntity.accountResource.evChangedGold']; resourceEntity.accountResource.gold"/>
		<bind name="entityDH" value="'premItemEntity'; id"/>
		<bind name="watchDH" value="'premid'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.id"/>
		<bind name="watchDH" value="'duration'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.duration"/>
		<bind name="watchDH" value="'selected'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.isSelected"/>
		<bind name="watchDH" value="'gold'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.gold"/>
		<bind name="watchDH" value="'cashbackGold'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.cashbackGold"/>
		<bind name="dispatch" value="'selected'+varChanged; selected ? 'selectedItemChanged' : null; { entityId: id }"/>
		<bind name="dispatch" value="'addedToStage'; selected ? 'selectedItemChanged' : null; { entityId: id }"/>
		<bind name="action" value="'click'; accountGold &gt;= gold ? 'premiumSelectionChanged' : null; { id: premid }"/>
		<bind name="var" value="{animationIndex: 2.5 + $index*0.5}"/>
		<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'lagAfterAddedToStage'; 0.15; animationIndex*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'startHide'; 0.15; animationIndex * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
			<height value="48px"/>
		</style>
		<bind name="soundSet" value="'button_gold'"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<block>
			<bind name="visible" value="accountGold &gt;= gold"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'alpha'; selected ? 0.5 : 0"/>
			<bind name="transition" value="rollOver ; 0.15; {alpha: selected ? 0.5 : 0}; {alpha: 1.0}"/>
			<block className="dock_submenu_item_bg" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginBottom value="-1px"/>
				</style>
				<bind name="transition" value="mouseDown; 0.03; {alpha: 1}; {alpha: 0.3}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="-1px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="selected"/>
			<style>
				<position value="absolute"/>
				<marginLeft value="12"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_check" type="native"/>
		</block>
		<block>
			<bind name="style" value="'alpha'; (accountGold &gt;= gold) ? 1 : 0.3"/>
			<style>
				<height value="48px"/>
				<width value="100%"/>
				<flow value="horizontal"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="name" value="'PremiumAccountPeriod_' + duration"/>
				<style>
					<marginLeft value="35px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<bind name="text" value="'IDS_PREMIUM_PERIOD_' + duration"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<right value="12"/>
				</style>
				<block>
					<bind name="visible" value="cashbackGold &gt; 0"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginRight value="4"/>
					</style>
					<bind name="instance" value="'CashbackTtem'; { _entityId: id }"/>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<bind name="name" value="'PremiumAccountPeriod_' + duration"/>
					<bind name="instance" value="'PriceTag'; { priceInfo: priceInfo, _showDiscountTag: true, _medium: true }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="CashbackTtem">
		<bind name="tooltip" value="'CashbackTtemTooltip'; { _entityId: _entityId }"/>
		<block>
			<style>
				<width value="23px"/>
				<height value="20px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/cashback.png'"/>
		</block>
	</block>
	<block className="CashbackTtemTooltip">
		<bind name="entityDH" value="'premItemEntity'; _entityId"/>
		<bind name="watchDH" value="'cashbackDays'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.cashbackDays"/>
		<bind name="watchDH" value="'cashbackGold'; ['premItemEntity.premiumItem.evChanged']; premItemEntity.premiumItem.cashbackGold"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="360px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16|16|16|16"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$TextDefaultBold19NM"/>
					<bind name="text" value="'IDS_COMPENSATION'"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="14px"/>
					<marginLeft value="-16"/>
					<marginRight value="-16"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="12"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<bind name="text" value="'IDS_COMPENSATION_DESCR'"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="10px"/>
					<marginLeft value="-16"/>
					<marginRight value="-16"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="inner_panel" type="native">
					<style>
						<marginLeft value="-16"/>
						<marginRight value="-16"/>
						<marginBottom value="-16"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="16"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<block type="text">
							<style>
								<maxWidth value="240"/>
							</style>
							<styleClass value="$TextDefault17NM"/>
							<bind name="text" value="'IDS_COMPENSATION_PRICE'"/>
						</block>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<right value="0px"/>
							<marginTop value="-7px"/>
						</style>
						<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: cashbackGold, currency: SC.Common.CURRENCIES.GOLD}, _medium: true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="16"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<block type="text">
							<style>
								<maxWidth value="240"/>
							</style>
							<styleClass value="$TextDefault17NM"/>
							<bind name="text" value="'IDS_COMPENSATION_INTERSECTION'"/>
						</block>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<right value="0px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold17NM"/>
							<bind name="text" value="subst('IDS_COMPENSATION_DAYS', [], { days: cashbackDays }, cashbackDays)"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_al_carousel_element_info -->
	<block className="ModalALCarouselElementInfo">
		<bind name="firstEntityDH" value="'myAccountEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'abuseStatus';  ['myAccountEntity.accountInfo.evAbuseStatusChanged']; myAccountEntity.accountInfo.abuseStatus"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; abuseStatus == SC.Common.ABUSE_STATUS.CONFIRMED"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="var" value="{battles: $root.battles, battlesToStep: $root.battlesToStep}"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="timeFormat" value="$root.dueDate; 'dd.MM.yy'; 'formattedDueDatePromoReward'; true"/>
		<bind name="watch" value="'timerText';subst('IDS_PROMO_REWARD_DAYS_LEFT', [], { _date: formattedDueDatePromoReward })"/>
		<bind name="watch" value="'levelStatus'; isAbuseStatusConfirmed	? {	_text: 'IDS_ACCOUNT_PROGRESS_ABUSED',
															_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING}
														: {	_text: subst('IDS_BATTLES_TO_NEXT_STEP', [], {battles: battlesToStep}, battlesToStep),
															_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.LOCK}"/>
		<bind name="watch" value="'isTimeLeftVisible'; (battlesToStep &gt; 0 &amp;&amp; $root.dueDate &gt; 0)"/>
		<bind name="watch" value="'isTimeRunningOut'; $root.dueDate - serverTime &lt; 86400"/>
		<bind name="watch" value="'isRewardTaken'; battles &lt;= currentPoints"/>
		<bind name="watch" value="'hasRewards'; $root.rewards.length &gt; 0"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxContainerHeight';	stageHeight &gt; 940	? 312 :
										stageHeight &gt; 830	? 208
															: 104"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<style>
			<align value="center|middle"/>
		</style>
		<block>
			<style>
				<width value="640px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<bind name="style" value="'marginBottom'; battles &gt; 0 ? '16' : '24'"/>
				<block type="text">
					<params>
						<param name="name" value="'accountLevelingItemTitle'"/>
					</params>
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="toUpperCase(tr($root.headerText))"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="16px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="battlesToStep &gt; 0"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginBottom value="16px"/>
				</style>
				<block>
					<bind name="instance" value="'StatusLine'; levelStatus"/>
				</block>
				<block>
					<bind name="visible" value="isTimeLeftVisible"/>
					<style>
						<marginLeft value="24px"/>
					</style>
					<bind name="instance" value="'StatusLine'; {	_text: timerText,
												_unifiedStatus: isTimeRunningOut	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																					: SC.Ui_styles.UNIFIED_STATUS.DATE}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="battlesToStep &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginBottom value="16px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="$root.descriptionText.length &gt; 0"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<params>
						<param name="name" value="'accountLevelingItemFullDescription'"/>
					</params>
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<alpha value="0.75"/>
					</style>
					<bind name="text" value="$root.descriptionText"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="$root.descriptionArray.length &gt; 0"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="$root.descriptionArray; 'RepeatParagraphItemNM'; {_maxWidth: 600, _marginBottom: 16, _alpha: 0.75,
																			_class: '$TextDefault17NM', _isTextInValue: true}"/>
			</block>
			<block>
				<bind name="visible" value="$root.locationText.length &gt; 0"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<alpha value="0.75"/>
					</style>
					<bind name="text" value="$root.locationText"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginTop value="16px"/>
					<marginBottom value="24px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="hasRewards"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="visible" value="(isRewardTaken || !($root.isPromo))"/>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<align value="center|middle"/>
						<marginBottom value="24px"/>
					</style>
					<bind name="instance" value="'StatusLine'; isRewardTaken ? {	_text: 'IDS_PROMO_REWARD_DESCRIPTION_WINDOW_REWARD_TAKEN',
																_unifiedStatus:  SC.Ui_styles.UNIFIED_STATUS.CHECK}
															: {	_text: 'IDS_ACCOUNT_LEVEL_REWARD_TITLE',
																_unifiedStatus:  SC.Ui_styles.UNIFIED_STATUS.DEFAULT}"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<marginBottom value="24px"/>
					</style>
					<bind name="style" value="'maxHeight'; maxContainerHeight"/>
					<block>
						<styleClass value="$DefaultScrollBar"/>
						<style>
							<width value="100%"/>
							<height value="100%f"/>
						</style>
						<bind name="instance" value="'ContainerWithRewards'; hasRewards ? {_itemHeight: 104, _rewards: $root.rewards, _align: $root.rewards.length &gt; 4 ?  'left' : 'center'} : null"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<marginBottom value="24px"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginBottom value="32px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '120px',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 1,
												_defaultFocused: 1,
												_label: 'IDS_CLOSE_UPPER_CASE'}"/>
			</block>
		</block>
	</block>

	<!-- modal_battle_type_renderer -->
	<block className="ModalBattleTypeRenderer">
		<block className="ModalBattleTypeRenderer" type="ublock">
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_forceVisible: _forceVisible ? _forceVisible : false,
						_showBattleHeader: _showBattleHeader ? _showBattleHeader : true,
						_showBattleSubheader: _showBattleSubheader ? _showBattleSubheader : true,
						_dontShowSmokeAnimation: _dontShowSmokeAnimation ? _dontShowSmokeAnimation : false}"/>
		</block>
	</block>

	<!-- modal_buy_object -->
	<block className="ModalWindowBuyCollectionObject">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_CONFIRMATION', _contentElement: 'ModalWindowBuyObject'}"/>
	</block>
	<block className="ModalWindowBuyObject">
		<bind name="primaryEntityDH" value="'collectionCardEntity'; CC.collectionCard; $root.objID"/>
		<bind name="watchDH" value="'id';[];				collectionCardEntity.collectionCard.id"/>
		<bind name="watchDH" value="'name';[];			collectionCardEntity.collectionCard.name"/>
		<bind name="watchDH" value="'collectionId';[];	collectionCardEntity.collectionCard.collectionId"/>
		<bind name="watchDH" value="'collectionName';[];	collectionCardEntity.collectionCard.collectionName"/>
		<bind name="watch" value="'cardName'; isPuzzle ? 'IDS_PUZZLE_COLLECTION_OWNED_TOOLTIP_HEADER' : tr('IDS_' + toUpperCase(name))"/>
		<bind name="watch" value="'collectionNameQuotes'; 	subst('IDS_COLLECTION_NAME_NO_ENTER', [],
											{ _collectionName: tr('IDS_' + toUpperCase(collectionName) + '_QUOTES')})"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; collectionId"/>
		<bind name="watchDH" value="'cardCost';		[]; collectionEntity.collectionAlbum.cardCost"/>
		<bind name="watchDH" value="'duplicates';	['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.duplicates"/>
		<bind name="watchDH" value="'isPuzzle';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isPuzzle"/>
		<bind name="watch" value="'isBuyAvailable';	duplicates &gt;= cardCost"/>
		<bind name="watch" value="'imageUrl';	isPuzzle 	? 'url:../bg/puzzle_collection/default_puzzle_card.png'
											: 'url:../collections/object_icons/small/' + name + '.png'"/>
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<flow value="horizontal"/>
				<align value="middle"/>
				<margin value="16px"/>
			</style>
			<block>
				<style>
					<top value="0"/>
					<marginRight value="16px"/>
					<backgroundSize value="cover"/>
					<width value="120px"/>
					<height value="120px"/>
				</style>
				<bind name="style" value="'backgroundImage'; imageUrl"/>
			</block>
			<block>
				<bind name="watch" value="'textColor';	SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									SC.Ui_styles.UNIFIED_STATUS.DEFAULT == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
				<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-4"/>
					</style>
					<styleClass value="$TextDefaultBold19NM"/>
					<bind name="style" value="'alpha'; textAlpha"/>
					<bind name="style" value="'textColor'; textColor"/>
					<bind name="text" value="cardName"/>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
						<leading value="-2"/>
						<alpha value="0.75"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<bind name="style" value="'textColor'; textColor"/>
					<bind name="text" value="collectionNameQuotes"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBuyAvailable"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="24px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="subst('IDS_COLLECTION_EXCHANGE_FOR_DUPLICATES_QUESTION', [], { amount: cardCost}, cardCost)"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!isBuyAvailable"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="watch" value="'duplicateDeficit'; cardCost - duplicates"/>
			<style>
				<align value="center"/>
				<marginBottom value="24px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
					<marginBottom value="16px"/>
				</style>
				<bind name="text" value="subst('IDS_COLLECTION_NEED_DUPLICATES_FOR_EXCHANGE', [], { amount: cardCost}, cardCost)"/>
			</block>
			<block>
				<bind name="instance" value="'PriceDeficit'; { 	_hideIcon: true, 
												_deficit: duplicateDeficit, 
												_large: true, 
												priceInfo: {currency:SC.Common.CURRENCIES.MONEY} }"/>
			</block>
		</block>
		<block>
			<bind name="watch" value="'btnOkEnabled'; duplicates &gt;= cardCost"/>
			<bind name="watch" value="'buttonCloseFocusIndex'; btnOkEnabled ? 1 : 0"/>
			<bind name="watch" value="'buttonCloseDefaultFocused'; btnOkEnabled ? false : true"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="btnOkEnabled"/>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_name: 'btn_ok',
												_enabled: btnOkEnabled,
												_isTransactionBtn: true,
												_request: isPuzzle ? 'closeBuyWindow' : 'showPreviewWindow',
												_requestParams: { objID: $root.objID },
												_action: 'CollectionProxy.buyCard',
												_actionParams: { cardID: id },
												_label: 'IDS_YES', 
												_focusIndex: 0, 
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton';	{	_label: btnOkEnabled ? 'IDS_NO' : 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_enabled: true,
													_focusIndex: buttonCloseFocusIndex,
													_defaultFocused: buttonCloseDefaultFocused
												}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_coach_complete_account -->
	<block className="ModalCoachWindowCompleteAccount">
		<bind name="instance" value="'ModalCoachWindowCompleteAccountContent'; {}"/>
	</block>
	<block className="ModalCoachWindowCompleteAccountContent">
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<styleClass value="$EyeLevelVAligned"/>
			<style>
				<width value="1056px"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="40px"/>
				</style>
				<bind name="instance" value="'ModalWindowHeaderFullSize'; { _windowName: 'IDS_ACCOUNT_COMPLETION_PROMO_HEADER', _hideBackButton: true}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="40px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault19NM"/>
					<style>
						<width value="100%"/>
						<textAlign value="center"/>
						<leading value="0"/>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_ACCOUNT_COMPLETION_PROMO_DESCRIPTION"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<align value="center|middle"/>
					<marginBottom value="40px"/>
				</style>
				<bind name="firstEntityDH" value="'completionRewardsEntity'; CC.completionRewards"/>
				<bind name="watchDH" value="'rewards';[]; completionRewardsEntity.completionRewards.rewards"/>
				<bind name="repeat" value="rewards; 'AccountCompletionRewardItem'; {}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="32px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_type: SC.Ui_styles.BUTTON_TYPE.ACCENT, 
												_label: 'IDS_ACCOUNT_COMPLETION_PROMO_BTN',
												_size: 2,
												_enabled: true, 
												_request: 'openModalWindowCompleteAccount',
												_focusIndex: 0,
												_defaultFocused: true}"/>
			</block>
		</block>
	</block>

	<!-- modal_collection_description -->
	<block className="ModalWindowCollectionDescription">
		<bind name="soundOn" value="'addedToStage'; $root.isComplete ? 'collection_window' : null; 'collection_item_complete'"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; $root.collectionID"/>
		<bind name="watchDH" value="'name';			[]; collectionEntity.collectionAlbum.name"/>
		<bind name="watchDH" value="'description';	[]; collectionEntity.collectionAlbum.description"/>
		<bind name="watchDH" value="'rewards';		[]; collectionEntity.collectionAlbum.rewards"/>
		<bind name="watchDH" value="'isFull';		[]; collectionEntity.collectionAlbum.isFull"/>
		<bind name="watch" value="'windowHeader'; isFull ? 'IDS_COLLECTION_WINDOW_TITLE_COLLECTED_UPPER' : 'IDS_COLLECTION_WINDOW_TITLE_UPPER'"/>
		<bind name="var" value="{ windowShown: false }"/>
		<params>
			<param name="name" value="modal_full_collection"/>
		</params>
		<bind name="dispatch" value="'startShow'; 'collectionCongratulationWindowShown'"/>
		<bind name="catch" value="'collectionCongratulationWindowShown'; { windowShown: true }"/>
		<bind name="action" value="'windowShown'+varChanged; $root.isComplete ? 'CollectionProxy.makeCollectionCongratulation' : ''; { albumId: $root.collectionID }"/>
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<style>
				<width value="750px"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginTop value="720:16,1080:40ah"/>
					<marginBottom value="720:24,1080:40ah"/>
					<align value="center"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<marginBottom value="16px"/>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="windowHeader"/>
				</block>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginBottom value="720:0,1080:48ah"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="370px"/>
						<height value="370px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../collections/collection_icons/big/' + name + '.png'"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<marginLeft value="24px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
							<marginBottom value="16px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold25NM"/>
							<style>
								<alpha value="0.9"/>
							</style>
							<bind name="text" value="toUpperCase('IDS_' + name)"/>
						</block>
					</block>
					<block>
						<styleClass value="$DefaultScrollBar"/>
						<style>
							<width value="100%"/>
							<height value="720:370,1080:420ah"/>
							<overflow value="scroll"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
								<alpha value="0.75"/>
								<marginLeft value="2px"/>
								<marginRight value="8px"/>
								<marginTop value="2px"/>
								<marginBottom value="2px"/>
								<leading value="2"/>
							</style>
							<bind name="text" value="description"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginBottom value="720:16,1080:32ah"/>
				</style>
				<bind name="instance" value="'StatusLine'; {	_text: isFull	? 'IDS_COLLECTION_MODAL_DESCRIPTION_REWARD_RECEIVED'
															: 'IDS_COLLECTION_MODAL_DESCRIPTION_REWARD',
											_unifiedStatus: isFull	? SC.Ui_styles.UNIFIED_STATUS.CHECK
																	: SC.Ui_styles.UNIFIED_STATUS.DEFAULT}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginBottom value="32px"/>
				</style>
				<bind name="repeat" value="rewards; 'RewardItemAdapter'"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="128px"/>
				</style>
				<bind name="instance" value="'DefaultButton';	{	_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_enabled: true,
													_focusIndex: 0,
													_defaultFocused: true
												}"/>
			</block>
		</block>
	</block>

	<!-- modal_complete_account -->
	<block className="AccountCompletionRewardItem">
		<bind name="appear" value="'addedToStage'; 0.15; 0.4 + $index*0.3; {alpha: 0, top: 35}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<style>
			<width value="320px"/>
			<marginLeft value="24px"/>
			<marginRight value="24px"/>
		</style>
		<bind name="entityDH" value="'rewardEntity'; $value"/>
		<bind name="watch" value="'rewardType'; rewardEntity.rewardComponent.type"/>
		<bind name="watch" value="'rewardSubtype'; rewardEntity.rewardComponent.subtype"/>
		<bind name="watch" value="'rewardAmountPremium'; rewardSubtype == SC.Common.REWARD_SUBTYPE.PREMIUM || rewardSubtype == SC.Common.REWARD_SUBTYPE.WOWS_PREMIUM"/>
		<bind name="watch" value="'rewardAmountLootbox'; rewardType == SC.Common.REWARD_TYPE.LOOTBOX"/>
		<bind name="watch" value="'rewardName';	rewardAmountLootbox	? tr(toUpperCase('IDS_REWARD_LOOTBOX_' + rewardSubtype + '_TITLE'))
													: tr(toUpperCase('IDS_REWARD_' + rewardSubtype + '_TITLE'))"/>
		<bind name="watch" value="'rewardAmount';	rewardAmountPremium	? rewardEntity.rewardComponent.params.text :
									rewardAmountLootbox	? subst('IDS_PL_LOOTBOX_COUNT', [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount)
														: format(rewardEntity.rewardComponent.amount, -1)"/>
		<bind name="var" value="{pricesWithTag:[ {currency: SC.Common.CURRENCIES.CREDITS},			{currency: SC.Common.CURRENCIES.GOLD},			{currency: SC.Common.CURRENCIES.XP},			{currency: SC.Common.CURRENCIES.FREE_XP},
								{currency: SC.Common.CURRENCIES.ELITE_XP},			{currency: SC.Common.CURRENCIES.EVENTUM_1},		{currency: SC.Common.CURRENCIES.EVENTUM_2},		{currency: SC.Common.CURRENCIES.PARAGON_XP},
								{currency: SC.Common.CURRENCIES.COAL},				{currency: SC.Common.CURRENCIES.STEEL},			{currency: SC.Common.CURRENCIES.BRASS},			{currency: SC.Common.CURRENCIES.MOLYBDENUM},
								{currency: SC.Common.CURRENCIES.CLAN_RESOURCE},		{currency: 'duplicate'},						{currency: 'brotherhood'},
								{currency: SC.Common.CURRENCIES.EVENTUM_3},			{currency: SC.Common.CURRENCIES.EVENTUM_4},		{currency: SC.Common.CURRENCIES.EVENTUM_5},		{currency: SC.Common.CURRENCIES.EVENTUM_6},
								{currency: SC.Common.CURRENCIES.EVENTUM_7},			{currency: SC.Common.CURRENCIES.EVENTUM_8},		{currency: SC.Common.CURRENCIES.EVENTUM_9},		{currency: SC.Common.CURRENCIES.EVENTUM_10},
								{currency: SC.Common.CURRENCIES.EVENTUM_CN},		{currency: SC.Common.CURRENCIES.CLIENTUM_1},	{currency: SC.Common.CURRENCIES.CLIENTUM_2},	{currency: SC.Common.CURRENCIES.SANTIUM},
								{currency: SC.Common.CURRENCIES.DOCKYARDUM_1},		{currency: SC.Common.CURRENCIES.DOCKYARDUM_2},
								]}"/>
		<bind name="indexOf" value="pricesWithTag; 'indexOfPricesWithTag'; { 'currency': rewardSubtype }"/>
		<bind name="watch" value="'isPricesWithTag'; indexOfPricesWithTag &gt; -1"/>
		<bind name="watch" value="'priceInfo'; { currency: rewardSubtype,
								finalPrice: rewardEntity.rewardComponent.amount }"/>
		<bind name="watch" value="'imageUrl'; 'url:../reward_icons/big/' + rewardSubtype + '.png'"/>
		<block>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<bind name="tooltip" value="'AccountCompletionRewardItemTooltip'; _isRewardTaken ? null : {_rewardEntityId: $value}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/frames/one_pixel_frame.png"/>
					<background9Slice value="[2,2]"/>
					<alpha value="0.45"/>
				</style>
			</block>
			<block>
				<bind name="fade" value="_isRewardTaken; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
				<style>
					<width value="48px"/>
					<height value="48px"/>
					<top value="16px"/>
					<right value="16px"/>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../reward_categories/icon_check.png'"/>
			</block>
			<block>
				<style>
					<width value="256px"/>
					<height value="256px"/>
					<marginBottom value="24px"/>
					<marginTop value="32px"/>
				</style>
				<bind name="style" value="'backgroundImage'; imageUrl"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="40px"/>
					<marginBottom value="8px"/>
					<align value="center|middle"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault21NM"/>
					<style>
						<alpha value="0.9"/>
						<maxWidth value="300"/>
						<textAlign value="center"/>
						<leading value="-4"/>
					</style>
					<bind name="text" value="rewardName"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'PriceTag'; isPricesWithTag ? { _large: true, priceInfo: priceInfo } : null"/>
				<block>
					<bind name="visible" value="!isPricesWithTag"/>
					<style>
						<marginTop value="9px"/>
						<marginBottom value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBold25NM"/>
						<bind name="alpha" value="rewardAmountPremium ? 1 : 0.9"/>
						<bind name="style" value="'textColor'; rewardAmountPremium ? SC.Ui_styles.SERVICE_COLORS.YELLOW : SC.Ui_styles.SERVICE_COLORS.WHITE"/>
						<bind name="text" value="rewardAmount"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowCompleteAccount">
		<params>
			<param name="name" value="window_ModalWindowCompleteAccount"/>
		</params>
		<bind name="instance" value="'ModalWindowCompleteAccountContent'; {}"/>
	</block>
	<block className="ModalWindowCompleteAccountContent">
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<bind name="action" value="'addedToStage'; 'SteamContext.clearErrors'; {}"/>
		<bind name="firstEntityDH" value="'incompleteAccountEntity'; CC.incompleteAccount"/>
		<bind name="watchDH" value="'codeSent';						['incompleteAccountEntity.incompleteAccount.evCodeSent'];			incompleteAccountEntity.incompleteAccount.codeSent"/>
		<bind name="watchDH" value="'error';							['incompleteAccountEntity.incompleteAccount.evErrorCodeChanged'];	incompleteAccountEntity.incompleteAccount.error"/>
		<bind name="watchDH" value="'errorIDS';						['incompleteAccountEntity.incompleteAccount.evErrorCodeChanged'];	incompleteAccountEntity.incompleteAccount.errorIDS"/>
		<bind name="watchDH" value="'isPasswordInvalid';				['incompleteAccountEntity.incompleteAccount.evValidationUpdate']; 	incompleteAccountEntity.incompleteAccount.isPasswordInvalid"/>
		<bind name="watchDH" value="'isPasswordValidationRunning';	['incompleteAccountEntity.incompleteAccount.evValidationUpdate']; 	incompleteAccountEntity.incompleteAccount.isPasswordValidationRunning"/>
		<bind name="watchDH" value="'isLoginInvalid';				['incompleteAccountEntity.incompleteAccount.evValidationUpdate']; 	incompleteAccountEntity.incompleteAccount.isLoginInvalid"/>
		<bind name="watchDH" value="'isLoginValidationRunning';		['incompleteAccountEntity.incompleteAccount.evValidationUpdate']; 	incompleteAccountEntity.incompleteAccount.isLoginValidationRunning"/>
		<bind name="watch" value="'userEmail'; ''"/>
		<bind name="dispatch" value="'userEmail' + varChanged; 'evEmailChanged'"/>
		<bind name="action" value="'evEmailChanged'; 'SteamContext.loginChange'; {login: userEmail}"/>
		<bind name="catch" value="'evUsernameChanged'; { error: '' }"/>
		<bind name="watch" value="'password'; ''"/>
		<bind name="dispatch" value="'password' + varChanged; 'evPassChanged'"/>
		<bind name="action" value="'evPassChanged'; 'SteamContext.passwordChange'; {password: password}"/>
		<bind name="catch" value="'evPasswordChanged'; { error: '' }"/>
		<bind name="catch" value="'evEmailChanged';	{ wrongPasswordNotification: false, passWrongSymbolInputed: false }"/>
		<bind name="catch" value="'evPassChanged';	{ wrongLoginNotification: false, emailWrongSymbolInputed: false }"/>
		<bind name="catch" value="'evEmailWrongChanged';	{ wrongPasswordNotification: false, passWrongSymbolInputed: false }"/>
		<bind name="catch" value="'evPassWrongChanged';	{ wrongLoginNotification: false, emailWrongSymbolInputed: false }"/>
		<bind name="dispatch" value="'emailWrongSymbolInputed' + varChanged; emailWrongSymbolInputed == true ? 'evEmailWrongChanged' : null"/>
		<bind name="dispatch" value="'passWrongSymbolInputed' + varChanged; passWrongSymbolInputed == true ? 'evPassWrongChanged' : null"/>
		<bind name="action" value="'evEmailChanged';	'showErrorMessage'; {header: '', message: ''}"/>
		<bind name="action" value="'evPassChanged';	'showErrorMessage'; {header: '', message: ''}"/>
		<bind name="watch" value="'code'; ''"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="var" value="{timerTimeStamp: serverTime,
				windowAppearLag: 0.4,
				isRewardTaken: false}"/>
		<bind name="watch" value="'isServerTimeout'; serverTime &lt; timerTimeStamp"/>
		<bind name="catch" value="'restartServerTimeout'; {timerTimeStamp: serverTime -(- 35)}"/>
		<bind name="catch" value="'evRewardTaken'; {isRewardTaken: true}"/>
		<bind name="countdown" value="timerTimeStamp; 'countdownText'; 'mm:ss';"/>
		<bind name="watch" value="'accountComplitionState';	(!codeSent &amp;&amp; incompleteAccountEntity != null)	? 0 :
											(codeSent  &amp;&amp; incompleteAccountEntity != null)	? 1 
																							: 2"/>
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<styleClass value="$EyeLevelVAligned"/>
			<bind name="style" value="'width'; accountComplitionState == 2 ? '1056px' : '800px'"/>
			<bind name="childParentScope" value="accountComplitionState;
								'EmailModal';
								'CodeModal';
								'AccountDoneModal'"/>
		</block>
	</block>
	<block className="EmailModal">
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'loginMaxLengthWgnr'; []; realmConstantsEntity.realmConstants.loginMaxLengthWgnr"/>
		<bind name="watchDH" value="'loginRestrict'; []; realmConstantsEntity.realmConstants.loginRestrict"/>
		<bind name="watchDH" value="'loginRestrictRegexp'; []; realmConstantsEntity.realmConstants.loginRestrictRegexp"/>
		<bind name="watchDH" value="'passRestrict'; []; realmConstantsEntity.realmConstants.passRestrict"/>
		<bind name="watchDH" value="'passRestrictRegexp'; []; realmConstantsEntity.realmConstants.passRestrictRegexp"/>
		<bind name="watchDH" value="'passMaxLengthWgnr'; []; realmConstantsEntity.realmConstants.passMaxLengthWgnr"/>
		<style>
			<width value="100%"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="40px"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; { 	_windowName: 'IDS_ACCOUNT_COMPLETION_SEND_EMAIL_HEADER',
														_hideBackButton: true}"/>
		</block>
		<block>
			<style>
				<width value="686px"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginBottom value="64px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault19NM"/>
					<style>
						<width value="100%"/>
						<textAlign value="center"/>
						<leading value="0"/>
						<maxWidth value="686"/>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_ACCOUNT_COMPLETION_SEND_EMAIL_DESCRIPTION"/>
				</block>
			</block>
			<bind name="action" value="'hideWrongMessageEv'; 'SteamContext.clearErrors'; {}"/>
			<bind name="catch" value="'hideWrongMessageEv'; { 	wrongLoginNotification: false, wrongPasswordNotification: false,
												emailWrongSymbolInputed: false, passWrongSymbolInputed: false }"/>
			<bind name="watch" value="'loginValidationState'; 	isLoginValidationRunning					? 'validation' :
												isLoginInvalid	|| (userEmail.length == 0)	? 'invalid'
																							: 'valid'"/>
			<bind name="watch" value="'passwordValidationState'; isPasswordValidationRunning					? 'validation' :
												isPasswordInvalid || (password.length == 0)	? 'invalid'
																							: 'valid'"/>
			<bind name="watch" value="'wrongLoginNotification';	(userEmail.length &gt; 0 &amp;&amp;
												(loginValidationState == 'invalid')) "/>
			<bind name="watch" value="'wrongPasswordNotification';	(password.length &gt; 0 &amp;&amp;
													(passwordValidationState == 'invalid')) "/>
			<bind name="watch" value="'sendButtonEnabled'; (loginValidationState == 'valid') &amp;&amp; (passwordValidationState == 'valid') &amp;&amp; !isServerTimeout"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginBottom value="24px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<top value="7px"/>
						<right value="100%"/>
						<paddingRight value="24"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault19NM"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<default_text value="IDS_ACCOUNT_COMPLETION_ENTER_EMAIL"/>
					</block>
				</block>
				<block>
					<style>
						<width value="210px"/>
					</style>
					<block className="text_input_caps" type="native">
						<params>
							<param name="name" value="emailField"/>
						</params>
						<style>
							<width value="100%"/>
						</style>
						<params>
							<param name="actAsButton" value="true"/>
							<param name="soundSet" value="hard_textinput"/>
						</params>
						<bind name="action" value="'textInputEnter'; sendButtonEnabled	? 'SteamContext.completeAccount'
																		: null; {login: userEmail, password: password }"/>
						<bind name="dispatch" value="'textInputEnter'; sendButtonEnabled	? 'restartServerTimeout' : null"/>
						<bind name="maxChars" value="loginMaxLengthWgnr"/>
						<bind name="restrict" value="loginRestrict"/>
						<bind name="restrictFeedback" value="loginRestrictRegexp; 'emailWrongSymbolInputed'"/>
						<bind name="defaultText" value="'IDS_ACCOUNT_COMPLETION_EMAIL_DEFAULT_TEXT'"/>
						<bind name="enabled" value="true"/>
						<bind name="soundOn" value="'click'; 'press'; 'default_button'"/>
						<bind name="sync" value="'text'; 'change'; 'userEmail'; 'evUsernameChanged'"/>
						<bind name="ubFocus" value="0; true; true; true"/>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<right value="-4px"/>
						</style>
						<bind name="instance" value="'ValidationState'; (userEmail.length &gt; 0) ? {_validationState: loginValidationState} : null"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3.2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginBottom value="64px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<top value="7px"/>
						<right value="100%"/>
						<paddingRight value="24px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault19NM"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<default_text value="IDS_ACCOUNT_COMPLETION_ENTER_PASSWORD"/>
					</block>
				</block>
				<bind name="var" value="{showPassword: true}"/>
				<bind name="catch" value="'toggleShowPassword'; {showPassword: !(showPassword)}"/>
				<block>
					<style>
						<width value="210px"/>
					</style>
					<block className="text_input_caps" type="native">
						<params>
							<param name="name" value="passwordField"/>
						</params>
						<style>
							<width value="100%"/>
							<marginBottom value="24px"/>
						</style>
						<bind name="enabled" value="true"/>
						<params>
							<param name="actAsButton" value="true"/>
							<param name="soundSet" value="hard_textinput"/>
						</params>
						<bind name="action" value="'textInputEnter'; sendButtonEnabled	? 'SteamContext.completeAccount'
																		: null; {login: userEmail, password: password }"/>
						<bind name="dispatch" value="'textInputEnter'; sendButtonEnabled	? 'restartServerTimeout' : null"/>
						<bind name="displayAsPassword" value="showPassword"/>
						<bind name="defaultText" value="'IDS_ACCOUNT_COMPLETION_PASSWORD_DEFAULT_TEXT'"/>
						<bind name="maxChars" value="passMaxLengthWgnr"/>
						<bind name="restrict" value="passRestrict"/>
						<bind name="restrictFeedback" value="passRestrictRegexp; 'passWrongSymbolInputed'"/>
						<bind name="sync" value="'text'; 'change'; 'password'; 'evPasswordChanged'"/>
						<bind name="soundOn" value="'click'; 'press'; 'default_button'"/>
						<bind name="ubFocus" value="1; false; true; true"/>
						<params>
							<param name="name" value="passwordField"/>
						</params>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<right value="-4px"/>
						</style>
						<bind name="instance" value="'ValidationState'; (password.length &gt; 0) ? {_validationState: passwordValidationState} : null"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 3.2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<bind name="instance" value="'CheckBox'; {	_isChecked: !showPassword,
													_label: 'IDS_ACCOUNT_COMPLETION_SHOW_PASSWORD_CHECKBOX',
													_maxTfWidth: 170,
													_dispatch: 'toggleShowPassword'}"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<width value="410px"/>
					<position value="absolute"/>
					<bottom value="210px"/>
				</style>
				<bind name="instance" value="'WrongLoginAndPassword';	(error != '') ||
														emailWrongSymbolInputed || passWrongSymbolInputed ||
														wrongLoginNotification || wrongPasswordNotification ?	{	_maxWidth: 356, _startTop: 10,
																													_messageText: errorIDS,
																													_emailWrongSymbolInputed: emailWrongSymbolInputed,
																													_passWrongSymbolInputed: passWrongSymbolInputed,
																													_isPasswordInvalid: wrongPasswordNotification,
																													_isLoginInvalid: wrongLoginNotification
																												}
																											:	null"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="32px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; isServerTimeout ? {_text: countdownText} : null"/>
			<bind name="instance" value="'DefaultButton'; {	_name: 'completeBtn',
											_size: 2,
											_enabled: sendButtonEnabled,
											_action: 'SteamContext.completeAccount',
											_actionParams: {login: userEmail, password: password},
											_dispatch: 'restartServerTimeout',
											_label: 'IDS_ACCOUNT_COMPLETION_SEND_EMAIL_BUTTON',
											_focusIndex: 2,
											_defaultFocused: false}"/>
		</block>
	</block>
	<block className="WrongLoginAndPassword">
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'passMinLengthWgnr'; []; realmConstantsEntity.realmConstants.passMinLengthWgnr"/>
		<bind name="watch" value="'notificationText';	_emailWrongSymbolInputed	?	tr('IDS_ACCOUNT_COMPLETION_EMAIL_WRONG_CHARACTERS') :
										_passWrongSymbolInputed		?	tr('IDS_ACCOUNT_COMPLETION_PASSWORD_WRONG_CHARACTERS') :
										_isLoginInvalid				?	tr('IDS_ACCOUNT_ERROR_LOGIN_INVALID') :
										_isPasswordInvalid			?	subst('IDS_ACCOUNT_ERROR_PASSWORD_MIN_LENGTH', [], {minCharsPwd: passMinLengthWgnr}) :
										_messageText				?	subst(_messageText, [], {minCharsPwd: passMinLengthWgnr})
																	:	null"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginBottom value="-7px"/>
				<marginTop value="-8px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginTop value="1px"/>
					<marginBottom value="1px"/>
				</style>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="BlurMapCustom">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="mc_blurmap3" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$Fullsize"/>
						<bind name="blurMap" value="0"/>
					</block>
				</block>
			</block>
			<block className="notification_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'WarningMessage'; { _delay: 0, _startTop: _startTop, _text: notificationText, _maxWidth: _maxWidth}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="12px"/>
				<top value="5px"/>
			</style>
			<bind name="instance" value="'CloseButton'; { 
			_event: 'hideWrongMessageEv',
			_tooltipText: 'IDS_CLOSE'
		}"/>
		</block>
	</block>
	<block className="CodeModal">
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'loginRestrict'; []; realmConstantsEntity.realmConstants.loginRestrict"/>
		<style>
			<width value="100%"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="40px"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; { 	_windowName: 'IDS_ACCOUNT_COMPLETION_CONFIRMATION_CODE_HEADER',
														_innerCloseButton: true,
														_backButtonText: 'IDS_ACCOUNT_COMPLETION_BACK_BUTTON',
														_action: 'SteamContext.resetCompletion'
														}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefault19NM"/>
				<style>
					<marginBottom value="64px"/>
					<textAlign value="center"/>
					<alpha value="0.9"/>
					<leading value="0"/>
					<maxWidth value="686"/>
					<styleSheet value="h3
					{
						font-family: $WWSDefaultFontBold;
					}"/>
				</style>
				<bind name="text" value="subst('IDS_ACCOUNT_COMPLETION_CONFIRMATION_CODE_DESCRIPTION', [], {login: userEmail})"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="64px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<top value="6px"/>
					<right value="100%"/>
					<paddingRight value="16px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault19NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_ACCOUNT_COMPLETION_CONFIRMATION_KEY"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="96px"/>
				</style>
				<block className="text_input_caps" type="native">
					<params>
						<param name="name" value="codeConfirmationField"/>
					</params>
					<style>
						<width value="100%"/>
					</style>
					<params>
						<param name="actAsButton" value="true"/>
						<param name="itemRenderer" value="drop_down_list_item"/>
						<param name="maxChars" value="100"/>
						<param name="soundSet" value="hard_textinput"/>
					</params>
					<bind name="enabled" value="true"/>
					<bind name="action" value="'textInputEnter'; 'SteamContext.activateAccount'; {activationCode: code }"/>
					<bind name="dispatch" value="'change'; 'hideWrongMessageEv'; {}"/>
					<bind name="restrict" value="loginRestrict"/>
					<bind name="soundOn" value="'click'; 'press'; 'default_button'"/>
					<bind name="sync" value="'text'; 'change'; 'code'; 'evCodeChanged'"/>
					<bind name="ubFocus" value="0; true; true;  true"/>
					<params>
						<param name="name" value="codeField"/>
					</params>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<bottom value="32px"/>
				</style>
				<bind name="dispatch" value="'click'; 'hideWrongMessageEv'; {}"/>
				<bind name="instance" value="'ServerMessage'; error != ''	? {	_messageHighlight:	false,
																_headerText:		'',
																_messageText:		errorIDS }
															: null"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="32px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="32px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_name: 'completeBtn',
											_size: 2,
											_enabled: true,
											_action: 'SteamContext.activateAccount',
											_actionParams: {activationCode: code},
											_dispatch: 'restartServerTimeout',
											_label: 'IDS_ACCOUNT_COMPLETION_CONFIRMATION_CODE_BUTTON',
											_focusIndex: 1,
											_defaultFocused: false}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'ButtonSendConfirmationKey'; (userEmail.length &gt; 0) ? {_userEmail: userEmail, _password: password, _sendButtonConfirmationKeyEnabled: !(isServerTimeout), _countdownText: countdownText} : null"/>
		</block>
	</block>
	<block className="AccountDoneModal">
		<style>
			<width value="100%"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="40px"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; { 	_windowName: 'IDS_ACCOUNT_COMPLETION_FINISH_HEADER',
														_hideBackButton: true}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="40px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault19NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_ACCOUNT_COMPLETION_FINISH_DESCRIPTION"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<align value="center|middle"/>
				<marginBottom value="32px"/>
			</style>
			<bind name="firstEntityDH" value="'completionRewardsEntity'; CC.completionRewards"/>
			<bind name="watchDH" value="'rewards';[]; completionRewardsEntity.completionRewards.rewards"/>
			<bind name="repeat" value="rewards; 'AccountCompletionRewardItem'; {_isRewardTaken: isRewardTaken}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="16px"/>
				<marginBottom value="32px"/>
			</style>
			<block>
				<bind name="fade" value="isRewardTaken; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="48px"/>
						<height value="48px"/>
						<marginRight value="8px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../reward_categories/icon_check.png'"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault19NM"/>
					<styleClass value="$FontColorGolden"/>
					<default_text value="IDS_ACCOUNT_COMPLETION_FINISH_POPUP"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="32px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'DefaultButton'; {	_enabled: true,
											_size: 2,
											_label: isRewardTaken ? 'IDS_ACCOUNT_COMPLETION_TO_DOCK' : 'IDS_ACCOUNT_COMPLETION_TAKE_REWARD',
											_dispatch: isRewardTaken ? null : 'evRewardTaken',
											_name: isRewardTaken ? 'btn_cancel' : null,
											_focusIndex: 3,
											_defaultFocused: false}"/>
		</block>
	</block>
	<block className="ButtonSendConfirmationKey">
		<bind name="tooltip" value="'SimpleStatusTooltip'; _sendButtonConfirmationKeyEnabled ? null : {_text: _countdownText}"/>
		<bind name="instance" value="'DefaultButton';	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
											_size: 2,
											_label: 'IDS_ACCOUNT_COMPLETION_CONFIRMATION_CODE_RESEND',
											_action: 'SteamContext.completeAccount',
											_actionParams: {login: _userEmail, password: _password},
											_dispatch: 'restartServerTimeout',
											_enabled: _sendButtonConfirmationKeyEnabled,
 											_focusIndex: 2,
 											_defaultFocused: false}"/>
	</block>

	<!-- modal_crew_battle_without_commander_alert -->
	<block className="ModalWindowStartBattleWithoutCommander">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_CONFIRMATION', _contentElement: 'ModalWindowStartBattleWithoutCommanderContent'}"/>
	</block>
	<block className="ModalWindowStartBattleWithoutCommanderContent">
		<style>
			<width value="600px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<align value="middle"/>
				<padding value="32px"/>
			</style>
			<block>
				<style>
					<marginRight value="32px"/>
					<top value="0"/>
				</style>
				<bind name="instance" value="'CrewPortraitWithBGR'; {_portraitWidth: '168px',
													_portraitHeight: '155px'}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<marginBottom value="16px"/>
					</style>
					<styleClass value="$TextDefaultBold21NM"/>
					<bind name="class" value="'$FontColorOrange'"/>
					<default_text value="IDS_NO_CREW"/>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-3"/>
						<alpha value="0.75"/>
						<marginBottom value="12px"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<default_text value="IDS_MODAL_ENTER_BATTLE_WITHOUT_CREW_DESCRIPTION_PARAGRAPH_1"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<marginTop value="32px"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_ENTER_BATTLE_WITHOUT_CREW_QUESTION"/>
				<params>
					<param name="name" value="'without_crew_question'"/>
				</params>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="32px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="129px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_YES',
												_focusIndex: 1,
												_enabled: true,
												_defaultFocused: true,
												_name: 'btn_ok'}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="129px"/>
					<marginLeft value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_CANCEL_UPPER_CASE',
												_focusIndex: 2,
												_enabled: true,
												_name: 'btn_cancel'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_crew_battle_without_skills -->
	<block className="ModalWindowStartBattleWithoutSkills">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_CONFIRMATION', _contentElement: 'ModalWindowStartBattleWithoutSkillsContent'}"/>
	</block>
	<block className="ModalWindowStartBattleWithoutSkillsContent">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'divisionShipId'; ['selfPlayerEntity.preBattlePlayerSimple.evShipIdChanged']; selfPlayerEntity.preBattlePlayerSimple.shipId"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="watch" value="'actualShipId'; divisionShipId ? divisionShipId : playerShipId"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; actualShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'crewId'; ['ownShipEntity.ownShip.evCrewChanged'];	ownShipEntity.ownShip.crewId"/>
		<style>
			<width value="600px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<paddingTop value="32px"/>
				<paddingBottom value="32px"/>
				<paddingLeft value="32px"/>
				<paddingRight value="32px"/>
			</style>
			<block>
				<style>
					<width value="180px"/>
					<marginRight value="16px"/>
					<marginRight value="32px"/>
				</style>
				<bind name="instance" value="'CrewStereotypeWithName'; {	_crewId: crewId,
														_shipClass: ownShipInfo.subtype,
														_size: 2,
														_isRentIconHidden: true}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="8px"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<marginBottom value="16px"/>
					</style>
					<styleClass value="$TextDefaultBold21NM"/>
					<bind name="class" value="'$FontColorOrange'"/>
					<default_text value="IDS_ENTER_BATTLE_WITHOUT_SKILLS_HEADER"/>
					<params>
						<param name="name" value="NoCrewSkillsAlert"/>
					</params>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-2"/>
						<alpha value="0.75"/>
						<marginBottom value="12px"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<default_text value="IDS_MODAL_ENTER_BATTLE_WITHOUT_SKILLS_DESCRIPTION_PARAGRAPH_1"/>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-2"/>
						<alpha value="0.75"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<default_text value="IDS_MODAL_ENTER_BATTLE_WITHOUT_SKILLS_DESCRIPTION_PARAGRAPH_2"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<marginTop value="32px"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_ENTER_BATTLE_WITHOUT_SKILLS_QUESTION"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="32px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="129px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_YES',
												_focusIndex: 1,
												_enabled: true,
												_defaultFocused: true,
												_name: 'btn_ok'}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="129px"/>
					<marginLeft value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_CANCEL_UPPER_CASE',
												_focusIndex: 2,
												_enabled: true,
												_name: 'btn_cancel'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_crew_fast_training -->
	<block className="ModalWindowCrewFastTraining">
		<bind name="soundOn" value="'addedToStage'; 'openExchange'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_CREW_FAST_LEARNING_HEADER', _contentElement: 'CrewFastTrainingContent'}"/>
	</block>
	<block className="CrewFastTrainingContent">
		<bind name="watch" value="'shipId'; crew.shipID ? crew.shipID : crew.specializationID"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'crewsSingleton'; ['dockEntity.crewData.evUpdate']; dockEntity.crewData"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; $root.crewID"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watch" value="'_shipId'; crew.shipID ? crew.shipID : crew.specializationID"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; _shipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'timeRent'; ['crewEntity.crew.evTimeRentChanged']; crewEntity.crew.timeRent"/>
		<bind name="watch" value="'isRentalCrew'; timeRent &gt; 0"/>
		<bind name="request" value="'isRentalCrew' + varChanged; isRentalCrew ? null : 'closeModalWindowCrewFastTraining'; {}"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'eliteXP'; 		['resourceEntity.accountResource.evChangedEliteXP'];resourceEntity.accountResource.eliteXP"/>
		<bind name="watchDH" value="'accountFreeXP';	['resourceEntity.accountResource.evChangedFreeXP'];	resourceEntity.accountResource.freeXP"/>
		<bind name="watch" value="'currentCrewLevel'; 	crew.allSkillPoints + 1"/>
		<bind name="watch" value="'maxCrewLevel'; 		crew.maxSkillPoints + 1"/>
		<bind name="var" value="{crewLevelToTrain:		currentCrewLevel + 1}"/>
		<bind name="watch" value="'crewCurExp';			(crewsSingleton.crewTotalExpPerLevel[currentCrewLevel] + crew.experience)"/>
		<bind name="watch" value="'crewNeedExp'; 		crewsSingleton.crewTotalExpPerLevel[crewLevelToTrain]"/>
		<bind name="watch" value="'expNeedToPay'; 		crewNeedExp - crewCurExp"/>
		<bind name="watch" value="'eliteExpNeedToPay'; 	eliteXP - expNeedToPay"/>
		<bind name="watch" value="'levelUpBtnEnabled';	crewLevelToTrain &gt; currentCrewLevel + 1"/>
		<bind name="watch" value="'levelDownBtnEnabled';	crewLevelToTrain &lt; maxCrewLevel"/>
		<bind name="catch" value="'levelDownBtnClicked';	{ crewLevelToTrain: levelUpBtnEnabled	? crewLevelToTrain - 1
																				: crewLevelToTrain}"/>
		<bind name="catch" value="'levelUpBtnClicked';	{ crewLevelToTrain: crewLevelToTrain &lt; maxCrewLevel		? crewLevelToTrain + 1
																								: crewLevelToTrain }"/>
		<style>
			<align value="center"/>
			<marginTop value="32px"/>
		</style>
		<block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="16px"/>
					<width value="220px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'CrewStereotypeWithName'; {	_size: 2,
															_crewId: crew.id,
															_shipClass: ownShipInfo.subtype}"/>
				</block>
				<block>
					<bind name="visible" value="crew.isInBarracks"/>
					<style>
						<marginTop value="27px"/>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBold17NM"/>
						<style>
							<width value="100%"/>
							<textColor value="0xFFFF9933"/>
						</style>
						<bind name="text" value="toUpperCase(tr('IDS_CREW_IN_BARRACKS'))"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="320px"/>
					<marginTop value="16px"/>
				</style>
				<block>
					<style>
						<marginRight value="60px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault19NM"/>
						<style>
							<alpha value="0.75"/>
							<marginLeft value="4px"/>
							<marginBottom value="4px"/>
						</style>
						<default_text value="IDS_BEFORE_TRAINING"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { priceInfo: {finalPrice: eliteXP, currency: SC.Common.CURRENCIES.ELITE_XP}, _medium: true }"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { priceInfo: {finalPrice: accountFreeXP, currency: SC.Common.CURRENCIES.FREE_XP}, _medium: true} "/>
					</block>
				</block>
				<block>
					<block type="text">
						<styleClass value="$TextDefault19NM"/>
						<style>
							<alpha value="0.75"/>
							<marginLeft value="3px"/>
							<marginBottom value="4px"/>
						</style>
						<default_text value="IDS_AFTER_TRAINING"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { priceInfo: {	finalPrice: (eliteExpNeedToPay &gt; 0) ? eliteExpNeedToPay : 0, currency: SC.Common.CURRENCIES.ELITE_XP}, _medium: true }"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { priceInfo: { 	finalPrice: (eliteExpNeedToPay &gt; 0) 				? accountFreeXP : 
																((accountFreeXP - (expNeedToPay - eliteXP)) &gt; 0) 	? (accountFreeXP - (expNeedToPay - eliteXP)) 
																													: 0,
																currency: SC.Common.CURRENCIES.FREE_XP}, _medium: true} "/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="32px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="24px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="'IDS_TRAINING_LEVEL'"/>
			</block>
			<block>
				<style>
					<marginLeft value="12px"/>
					<marginTop value="-13px"/>
					<align value="center|middle"/>
				</style>
				<block className="textinput_bg" type="native">
					<style>
						<width value="86px"/>
						<height value="42px"/>
						<hitTest value="false"/>
					</style>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<align value="center|middle"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault25NM"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="(crewLevelToTrain - 1)"/>
					</block>
				</block>
				<block>
					<bind name="dispatch" value="'click'; 'levelDownBtnClicked'"/>
					<style>
						<position value="absolute"/>
						<left value="1px"/>
						<top value="1px"/>
					</style>
					<block className="button_spinner_navigation_left" type="native">
						<bind name="visible" value="levelUpBtnEnabled"/>
						<style>
							<width value="22px"/>
							<height value="40px"/>
						</style>
					</block>
					<block className="button_spinner_arrow_disabled_left" type="native">
						<bind name="visible" value="!levelUpBtnEnabled"/>
						<style>
							<marginTop value="14px"/>
							<marginLeft value="7px"/>
							<hitTest value="false"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="dispatch" value="'click'; 'levelUpBtnClicked'"/>
					<style>
						<position value="absolute"/>
						<right value="1px"/>
						<top value="1px"/>
					</style>
					<block className="button_spinner_navigation_right" type="native">
						<bind name="visible" value="levelDownBtnEnabled"/>
						<style>
							<width value="22px"/>
							<height value="40px"/>
						</style>
					</block>
					<block className="button_spinner_arrow_disabled_right" type="native">
						<bind name="visible" value="!levelDownBtnEnabled"/>
						<style>
							<marginTop value="14px"/>
							<marginRight value="7px"/>
							<hitTest value="false"/>
						</style>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="120px"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="expDeficit == 0"/>
				<style>
					<marginTop value="6px"/>
					<align value="center"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault25NM"/>
					<style>
						<marginTop value="9px"/>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="tr('IDS_TRAINING_FOR') + ' '"/>
				</block>
				<block>
					<bind name="instance" value="'PriceTag'; { priceInfo: 	{finalPrice: (eliteExpNeedToPay &gt; 0) ? expNeedToPay : eliteXP, 
															currency: SC.Common.CURRENCIES.ELITE_XP}, _large: true }"/>
				</block>
				<block>
					<style>
						<marginLeft value="12px"/>
					</style>
					<bind name="visible" value="(eliteExpNeedToPay &lt; 0)"/>
					<block type="text">
						<styleClass value="$TextDefault25NM"/>
						<style>
							<marginTop value="9px"/>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="tr('IDS_TRAINING_AND') + ' '"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { priceInfo: {finalPrice: ((expNeedToPay - eliteXP) &lt;  accountFreeXP)	? (expNeedToPay - eliteXP) 
																														: accountFreeXP, currency: SC.Common.CURRENCIES.FREE_XP},
												 _large: true } "/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block type="text">
					<styleClass value="$TextDefault25NM"/>
					<style>
						<marginTop value="9px"/>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_QUESTION"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="expDeficit != 0"/>
				<bind name="watch" value="'expDeficit'; ((eliteXP + accountFreeXP) &lt; expNeedToPay) ? (expNeedToPay - (eliteXP + accountFreeXP)) : 0"/>
				<style>
					<marginTop value="12px"/>
					<align value="center"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<align value="center"/>
					</style>
					<block>
						<style>
							<marginRight value="4px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefault17NM"/>
							<bind name="text" value="'IDS_TRAINING_COST'"/>
						</block>
					</block>
					<block>
						<style>
							<marginTop value="-7px"/>
							<marginBottom value="-8px"/>
						</style>
						<bind name="instance" value="'PriceTag'; { priceInfo:  {finalPrice: expNeedToPay, currency: SC.Common.CURRENCIES.ELITE_XP}, _medium: true}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<marginTop value="6px"/>
						<align value="center"/>
					</style>
					<block>
						<bind name="instance" value="'PriceDeficit'; { priceInfo:  { currency: SC.Common.CURRENCIES.ELITE_XP }, _deficit: expDeficit, _hideIcon: true}"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 6*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 6 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginTop value="24px"/>
					<align value="center"/>
				</style>
				<block>
					<style>
						<width value="129px"/>
						<marginRight value="20px"/>
					</style>
					<bind name="soundOn" value="'click'; expDeficit == 0 ? 'spendMoney' : null; 'crew'"/>
					<bind name="fade" value="(expDeficit == 0); 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 129}; {alpha: 0, width: 0}"/>
					<bind name="instance" value="'DefaultButton'; {	_width: '129px',
													_name: 'btn_ok',
													_enabled: (expDeficit &lt;= 0),
													_isTransactionBtn: true,
													_request: 'trainFast',
													_requestParams: {crewID: $root.crewID, level: crewLevelToTrain},
													_label: 'IDS_YES', 
													_focusIndex: 0,
													_defaultFocused: true}"/>
				</block>
				<block>
					<bind name="instance" value="'DefaultButton';	{	_width: '129px',
														_label: 'IDS_CLOSE_UPPER_CASE',
														_name: 'btn_cancel',
														_enabled: true,
														_focusIndex: 3,
														_defaultFocused: false
													}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_crew_fire -->
	<block className="ModalWindowFireCrew">
		<bind name="name" value="'ModalWindowFireCrew'"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; $root.crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watchDH" value="'timeRent'; ['crewEntity.crew.evTimeRentChanged']; crewEntity.crew.timeRent"/>
		<bind name="watch" value="'isRentalCrew'; timeRent &gt; 0"/>
		<bind name="request" value="'isRentalCrew' + varChanged; isRentalCrew ? null : 'closeModalWindowFireCrew'; {}"/>
		<bind name="soundOn" value="'addedToStage'; 'openExchange'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow'; {   _headerText: 'IDS_CREW_MODAL_HEADER_FIRE_UPPERCASE',
											_hideDivider: true,
											_contentElement: 'ModalWindowFireCrewContent'}"/>
	</block>
	<block className="ModalWindowFireCrewContent">
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; $root.crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watch" value="'_shipId'; crew.shipID ? crew.shipID : crew.specializationID"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; _shipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'baseFiringCrewEntity'; CC.priceComponent; SC.Common.CREW_FIRING_COST.BASE + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'baseFiringCrew'; ['baseFiringCrewEntity.priceComponent.evChanged']; baseFiringCrewEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'firingCrewForCreditsEntity'; CC.priceComponent; SC.Common.CREW_FIRING_COST.CREDIT + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'firingCrewForCredits'; ['firingCrewForCreditsEntity.priceComponent.evChanged']; firingCrewForCreditsEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'firingCrewForGoldEntity'; CC.priceComponent; SC.Common.CREW_FIRING_COST.GOLD + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'firingCrewForGold'; ['firingCrewForGoldEntity.priceComponent.evChanged']; firingCrewForGoldEntity.priceComponent"/>
		<bind name="watchDH" value="'isInBattle'; ['crewEntity.crew.evIsInBattleChanged']; crewEntity.crew.isInBattle"/>
		<bind name="watch" value="'selectedFiringType';	crew.timeRent						?	SC.Common.CREW_FIRING_TYPE.BASE :
										userPrefs.crewFiringOption == null 	?	SC.Common.CREW_FIRING_TYPE.GOLD
																			:	userPrefs.crewFiringOption"/>
		<bind name="watch" value="'isSelectedFiringTypeGold'; selectedFiringType == SC.Common.CREW_FIRING_TYPE.GOLD"/>
		<bind name="watch" value="'isSelectedFiringTypeCredits'; selectedFiringType == SC.Common.CREW_FIRING_TYPE.MONEY"/>
		<bind name="watch" value="'priceInfo'; 	isSelectedFiringTypeGold 	    ? firingCrewForGold :
								isSelectedFiringTypeCredits 	? firingCrewForCredits
																: baseFiringCrew"/>
		<bind name="watch" value="'crewFiringProfit';	isSelectedFiringTypeGold		? firingCrewForGoldEntity.refundComponent.profit :
										isSelectedFiringTypeCredits		? firingCrewForCreditsEntity.refundComponent.profit
																		: baseFiringCrewEntity.refundComponent.profit"/>
		<bind name="catch" value="'changeSelectedFiringTypeEv'"/>
		<bind name="action" value="'changeSelectedFiringTypeEv'; 'setUserPref'; {value: selectedFiringType, name: 'crewFiringOption'}"/>
		<bind name="catch" value="'selectedFiringTypeDisabledEv'; {selectedFiringType: SC.Common.CREW_FIRING_TYPE.BASE}"/>
		<bind name="action" value="'selectedFiringTypeDisabledEv'; isCrewDemobilizationOptionsEnabled ? 'setUserPref' : null; {value: SC.Common.CREW_FIRING_TYPE.BASE, name: 'crewFiringOption'}"/>
		<bind name="watch" value="'priceDataELXP';	selectedFiringType != SC.Common.CREW_FIRING_TYPE.BASE 	? { priceInfo: { finalPrice: crewFiringProfit, currency: SC.Common.CURRENCIES.ELITE_XP }, _medium: true }
																							: 0"/>
		<bind name="watch" value="'currentCrewLevel'; crew.allSkillPoints + 1"/>
		<bind name="watch" value="'isCrewDemobilizationOptionsEnabled'; currentCrewLevel + crew.experience &gt; 1 &amp;&amp; !crew.timeRent"/>
		<bind name="watch" value="'questionText'; selectedFiringType == SC.Common.CREW_FIRING_TYPE.BASE 	? 'IDS_CREW_FIRE_FULL_FREE' 
																						: 'IDS_CREW_FIRE_FULL'"/>
		<bind name="watch" value="'currenciesPanelPrices'; [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: isSelectedFiringTypeGold ? -firingCrewForGold.finalPrice : 0},
											{currency: SC.Common.CURRENCIES.CREDITS,	finalPrice: isSelectedFiringTypeCredits	? -firingCrewForCredits.finalPrice : 0},
											{currency: SC.Common.CURRENCIES.ELITE_XP,	finalPrice: crewFiringProfit}]"/>
		<style>
			<width value="1px"/>
			<align value="center"/>
		</style>
		<bind name="watch" value="'windowWidth'; isCrewDemobilizationOptionsEnabled ? 702 : 600"/>
		<bind name="style" value="'width'; windowWidth"/>
		<block>
			<bind name="visible" value="!isCrewDemobilizationOptionsEnabled"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isCrewDemobilizationOptionsEnabled"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: windowWidth }"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isCrewDemobilizationOptionsEnabled"/>
			<style>
				<marginTop value="16px"/>
				<marginBottom value="16px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="32px"/>
					<width value="220px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'CrewStereotypeWithName'; {	_size: 2,
															_crewId: crew.id,
															_shipClass: ownShipInfo.subtype}"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="450px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="SC.Common.CREW_FIRING_TYPE.FIRING_OPTIONS; 'CrewFiringTypeItem'; {_crewId: crew.id, 
																								_selectedFiringType: selectedFiringType}"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isCrewDemobilizationOptionsEnabled"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="145px"/>
				<align value="center"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginTop value="24px"/>
				</style>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<bind name="appear" value="'selectedFiringType' + varChanged; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<style>
						<width value="100%"/>
						<height value="30px"/>
						<align value="center"/>
					</style>
					<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; {	_questionText:	questionText, 
																		_priceInfo:		priceInfo.finalPrice &gt; 0 ? priceInfo : null }"/>
				</block>
				<block>
					<bind name="visible" value="selectedFiringType != SC.Common.CREW_FIRING_TYPE.BASE"/>
					<bind name="appear" value="'selectedFiringType' + varChanged; 0.12; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<style>
						<width value="100%"/>
						<align value="center"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault19NM"/>
						<style>
							<marginTop value="4px"/>
							<alpha value="0.75"/>
						</style>
						<default_text value="IDS_FIRE_CREW_WILL_RECEIVE"/>
					</block>
					<block>
						<style>
							<marginLeft value="8px"/>
							<marginTop value="-1px"/>
						</style>
						<bind name="instance" value="'PriceTag'; priceDataELXP"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginTop value="16px"/>
					<align value="center"/>
				</style>
				<block>
					<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
												_text: 'IDS_INSTRUCTION_FIRE_CREW' }"/>
				</block>
				<block>
					<bind name="style" value="'marginTop'; isInBattle ? '8px' : '0'"/>
					<bind name="instance" value="'StatusLine'; isInBattle	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																_text: 'IDS_INSTRUCTION_FIRE_CREW_IN_BATTLE' }
															: null"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginTop value="24px"/>
				</style>
				<block>
					<style>
						<marginRight value="24px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_name: 'btn_ok',
													_enabled: true, 
													_isTransactionBtn: true,
													_request: 'fireCrew', 
													_requestParams: {	crewId: crew.id,
																		firing: selectedFiringType },
													_label: 'IDS_YES',
													_focusIndex: 1,
													_defaultFocused: true}"/>
				</block>
				<bind name="instance" value="'DefaultButton';	{	_label: 'IDS_NO',
													_name: 'btn_cancel',
													_enabled: true,
													_focusIndex: 2,
													_defaultFocused: false
												}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="CrewFiringTypeItem">
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="primaryEntityDH" value="'baseFiringCrewEntity'; CC.priceComponent; SC.Common.CREW_FIRING_COST.BASE + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'baseFiringCrew'; ['baseFiringCrewEntity.priceComponent.evChanged']; baseFiringCrewEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'firingCrewForCreditsEntity'; CC.priceComponent; SC.Common.CREW_FIRING_COST.CREDIT + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'firingCrewForCredits'; ['firingCrewForCreditsEntity.priceComponent.evChanged']; firingCrewForCreditsEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'firingCrewForGoldEntity'; CC.priceComponent; SC.Common.CREW_FIRING_COST.GOLD + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'firingCrewForGold'; ['firingCrewForGoldEntity.priceComponent.evChanged']; firingCrewForGoldEntity.priceComponent"/>
		<bind name="watch" value="'priceInfo'; 	$value == SC.Common.CREW_FIRING_TYPE.GOLD 	? firingCrewForGold :
								$value == SC.Common.CREW_FIRING_TYPE.MONEY 	? firingCrewForCredits
																			: baseFiringCrew"/>
		<bind name="watch" value="'crewFiringProfit';	$value == SC.Common.CREW_FIRING_TYPE.GOLD	? firingCrewForGoldEntity.refundComponent.profit :
										$value == SC.Common.CREW_FIRING_TYPE.MONEY	? firingCrewForCreditsEntity.refundComponent.profit
																					: baseFiringCrewEntity.refundComponent.profit"/>
		<bind name="watch" value="'priceInfoELXP';	{ finalPrice: crewFiringProfit, currency: SC.Common.CURRENCIES.ELITE_XP }"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountResource';		['resourceEntity.accountResource.evChangedGold','resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource"/>
		<bind name="watch" value="'isCurrencyDeficit'; $value != SC.Common.CREW_FIRING_TYPE.BASE &amp;&amp; accountResource[priceInfo.currency] - priceInfo.finalPrice  &lt; 0 "/>
		<bind name="watch" value="'isFiringNotWorth'; $value != SC.Common.CREW_FIRING_TYPE.BASE &amp;&amp; (priceInfo.finalPrice &lt;= 0 || crewFiringProfit &lt;= 0) "/>
		<bind name="watch" value="'disableReasonText'; 	isFiringNotWorth 	? tr('IDS_CREW_NOT_ENOUGH_EXP_TO_DEMOBILIZE')	: 
										isCurrencyDeficit	? $value == SC.Common.CREW_FIRING_TYPE.MONEY 	? tr('IDS_NOT_ENOUGH_CREDITS') 
																											: tr('IDS_NOT_ENOUGH_GOLD') 
															: null"/>
		<bind name="watch" value="'subTitle'; 'IDS_CREW_FIRING_TYPE_WITH_EXP_CONVERT_' + $value"/>
		<bind name="watch" value="'isSelected'; $value == _selectedFiringType"/>
		<bind name="watch" value="'isAvailable'; !isCurrencyDeficit &amp;&amp; !isFiringNotWorth"/>
		<bind name="dispatch" value="'menuItemSelectedEv'; 'changeSelectedFiringTypeEv'; {selectedFiringType: $value}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="changeDispatch" value="isAvailable; isSelected ? 'selectedFiringTypeDisabledEv' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; false"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'BigMenuItemWithPrice'; {	_width: _width, _height: _height,
												_subTitle: subTitle,
												_isSelected: isSelected,
												_isAvailable: isAvailable,
												_disableReason: disableReasonText,
												_priceInfo: priceInfo,
												_titlePriceInfo: priceInfoELXP}"/>
	</block>

	<!-- modal_crew_freeskillpoints -->
	<block className="ModalWindowFreeSkillPoints">
		<bind name="soundOn" value="'addedToStage'; 'openYesNoConfirmation'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_RESET_SKILLPOINTS_HEADER',
										_hideDivider: true,
										_contentElement: 'ModalWindowFreeSkillPointsContent'}"/>
	</block>
	<block className="ModalWindowFreeSkillPointsContent">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; playerShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watch" value="'selectedShipClass'; ownShipInfo.subtype"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; $root.crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'skillTreeEntity'; CC.skillTree; str($root.crewId + '_' + $root.selectedShipClass)"/>
		<bind name="watch" value="'priceResetSkillsForGold'; crew.canResetSkillsForFree ? 'POINT_RESET_GOLD_0' : 'POINT_RESET_GOLD_' + str(skillTreeEntity.skillTree.usedSkillPoints)"/>
		<bind name="watch" value="'priceResetSkillsForElXp'; crew.canResetSkillsForFree ? 'POINT_RESET_ELXP_0' : 'POINT_RESET_ELXP_' + str(skillTreeEntity.skillTree.usedSkillPoints)"/>
		<bind name="primaryEntityDH" value="'resetSkillsForGoldEntity'; CC.priceComponent; priceResetSkillsForGold + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'resetSkillsForGold'; ['resetSkillsForGoldEntity.priceComponent.evChanged']; resetSkillsForGoldEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'resetSkillsForElXpEntity'; CC.priceComponent; priceResetSkillsForElXp + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'resetSkillsForElXp'; ['resetSkillsForElXpEntity.priceComponent.evChanged']; resetSkillsForElXpEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold'; 	['resourceEntity.accountResource.evChangedGold']; resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'eliteXP'; 		['resourceEntity.accountResource.evChangedEliteXP']; resourceEntity.accountResource.eliteXP"/>
		<bind name="watchDH" value="'accountFreeXP';	['resourceEntity.accountResource.evChangedFreeXP']; resourceEntity.accountResource.freeXP"/>
		<bind name="watch" value="'eliteXPPrice'; (eliteXP &gt;= resetSkillsForElXp.finalPrice) ? resetSkillsForElXp.finalPrice : eliteXP"/>
		<bind name="watch" value="'freeXPPrice'; (accountFreeXP &gt;= (resetSkillsForElXp.finalPrice - eliteXPPrice)) ? (resetSkillsForElXp.finalPrice - eliteXPPrice) : 0"/>
		<bind name="watch" value="'isEnoughGold'; (accountGold &gt;= resetSkillsForGold.finalPrice)"/>
		<bind name="watch" value="'isEnoughEXP'; (eliteXPPrice + freeXPPrice) &gt;= resetSkillsForElXp.finalPrice"/>
		<bind name="watch" value="'selectedFreeSkillPointsType';	userPrefs.crewResetSkillType"/>
		<bind name="action" value="'selectedFreeSkillPointsTypeAvailabilityEv'; 'setUserPref' ; {	name : 'crewResetSkillType',
																					value : selectedFreeSkillPointsType == SC.Common.CREW_RESET_SKILL_TYPE.GoldReset 	? isEnoughGold 	? SC.Common.CREW_RESET_SKILL_TYPE.GoldReset
																																														: SC.Common.CREW_RESET_SKILL_TYPE.XPReset
																																										: isEnoughEXP 	? SC.Common.CREW_RESET_SKILL_TYPE.XPReset
																																														: SC.Common.CREW_RESET_SKILL_TYPE.GoldReset}"/>
		<bind name="watch" value="'btnOkEnabled'; isEnoughGold || isEnoughEXP"/>
		<bind name="watch" value="'priceInfo';	selectedFreeSkillPointsType == SC.Common.CREW_RESET_SKILL_TYPE.XPReset 	?	{	finalPrice: eliteXPPrice,
																												currency: SC.Common.CURRENCIES.ELITE_XP}
																										:	resetSkillsForGold"/>
		<bind name="watch" value="'optionalPriceInfo'; selectedFreeSkillPointsType == SC.Common.CREW_RESET_SKILL_TYPE.XPReset &amp;&amp; (freeXPPrice != 0) 	?	{	finalPrice: accountFreeXP &gt;= freeXPPrice ? freeXPPrice : 0,
																																			currency: SC.Common.CURRENCIES.FREE_XP }
																																	: null"/>
		<bind name="watch" value="'isSelectedFreeSkillPointsEliteXP'; selectedFreeSkillPointsType == SC.Common.CREW_RESET_SKILL_TYPE.XPReset"/>
		<bind name="watch" value="'isAvailableResetFreeSkillPoints'; isEnoughEXP || isEnoughGold"/>
		<bind name="watch" value="'hideFreeXP'; eliteXPPrice &gt;= resetSkillsForElXp.finalPrice"/>
		<bind name="watch" value="'currenciesPanelPrices'; hideFreeXP	? [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: !isSelectedFreeSkillPointsEliteXP ? -priceInfo.finalPrice	: 0},
															{currency: SC.Common.CURRENCIES.ELITE_XP,	finalPrice: isSelectedFreeSkillPointsEliteXP ? -priceInfo.finalPrice	: 0}]
														: [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: !isSelectedFreeSkillPointsEliteXP ? -priceInfo.finalPrice	: 0},
															{currency: SC.Common.CURRENCIES.ELITE_XP,	finalPrice: isSelectedFreeSkillPointsEliteXP ? -priceInfo.finalPrice	: 0},
															{currency: SC.Common.CURRENCIES.FREE_XP,	finalPrice: -optionalPriceInfo.finalPrice}]"/>
		<style>
			<width value="404px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 404 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="SC.Common.CREW_RESET_SKILL_TYPE.RESET_SKILL_OPTIONS; 'CrewFreeSkillPointsItem'; {	_height: '42px',
																										_crewId: crew.id,
																										_selectedFreeSkillPointsType: selectedFreeSkillPointsType}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="visible" value="isAvailableResetFreeSkillPoints"/>
				<bind name="appear" value="'selectedFreeSkillPointsType' + varChanged; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<style>
					<marginTop value="24px"/>
				</style>
				<bind name="instance" value="'ModalWindowSystemQuestionWithPrice';	isAvailableResetFreeSkillPoints	?	{	_questionText: tr('IDS_QUESTION_RESET_SKILLPOINTS_FOR_' + toUpperCase(selectedShipClass)),
																											_priceInfo: priceInfo,
																											_optionalPriceInfo: optionalPriceInfo }
																									:	null"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="!isAvailableResetFreeSkillPoints"/>
			<style>
				<width value="100%"/>
				<marginTop value="24px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<style>
					<maxWidth value="300"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$TextDefault25NM"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<bind name="text" value="tr('IDS_NOT_ENOUGH_FUNDS')"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="24px"/>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="fade" value="btnOkEnabled; 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 139}; {alpha: 0, width: 0}"/>
				<style>
					<width value="139px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '139px',
												_name: 'btn_ok',
												_enabled: btnOkEnabled,
												_isTransactionBtn: true,
												_request: 'freeSkillPoints',
												_requestParams: {	crewID: $root.crewId,
																	shipType: $root.selectedShipClass,
																	resetType: (selectedFreeSkillPointsType)},
												_label: 'IDS_YES',
												_focusIndex: 0,
												_defaultFocused: true}"/>
			</block>
			<block>
				<style>
					<width value="139px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '139px',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 1,
												_label: btnOkEnabled ? 'IDS_NO' : 'IDS_CANCEL_UPPER_CASE'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CrewFreeSkillPointsItem">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; $root.crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="primaryEntityDH" value="'skillTreeEntity'; CC.skillTree; str($root.crewId + '_' + $root.selectedShipClass)"/>
		<bind name="watch" value="'priceResetSkillsForGold'; crew.canResetSkillsForFree ? 'POINT_RESET_GOLD_0' : 'POINT_RESET_GOLD_' + str(skillTreeEntity.skillTree.usedSkillPoints)"/>
		<bind name="watch" value="'priceResetSkillsForElXp'; crew.canResetSkillsForFree ? 'POINT_RESET_ELXP_0' : 'POINT_RESET_ELXP_' + str(skillTreeEntity.skillTree.usedSkillPoints)"/>
		<bind name="primaryEntityDH" value="'resetSkillsForGoldEntity'; CC.priceComponent; priceResetSkillsForGold + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'resetSkillsForGold'; ['resetSkillsForGoldEntity.priceComponent.evChanged']; resetSkillsForGoldEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'resetSkillsForElXpEntity'; CC.priceComponent; priceResetSkillsForElXp + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'resetSkillsForElXp'; ['resetSkillsForElXpEntity.priceComponent.evChanged']; resetSkillsForElXpEntity.priceComponent"/>
		<bind name="watch" value="'priceInfo'; 	$value == 0 ?  resetSkillsForGold : resetSkillsForElXp"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountResource';		['resourceEntity.accountResource.evChangedGold','resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource"/>
		<bind name="watchDH" value="'accountGold'; 	['resourceEntity.accountResource.evChangedGold']; resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'eliteXP'; 		['resourceEntity.accountResource.evChangedEliteXP']; resourceEntity.accountResource.eliteXP"/>
		<bind name="watchDH" value="'accountFreeXP';	['resourceEntity.accountResource.evChangedFreeXP']; resourceEntity.accountResource.freeXP"/>
		<bind name="watch" value="'eliteXPPrice'; (eliteXP &gt;= resetSkillsForElXp.finalPrice) ? resetSkillsForElXp.finalPrice : eliteXP"/>
		<bind name="watch" value="'freeXPPrice'; (accountFreeXP &gt;= (resetSkillsForElXp.finalPrice - eliteXPPrice)) ? (resetSkillsForElXp.finalPrice - eliteXPPrice) : 0"/>
		<bind name="watch" value="'isEnoughGold'; (accountGold &gt;= resetSkillsForGold.finalPrice)"/>
		<bind name="watch" value="'isEnoughEXP'; (eliteXPPrice + freeXPPrice) &gt;= resetSkillsForElXp.finalPrice"/>
		<bind name="watch" value="'isCurrencyDeficit'; $value == SC.Common.CREW_RESET_SKILL_TYPE.GoldReset 	? !isEnoughGold
																							: !isEnoughEXP"/>
		<bind name="watch" value="'disableReasonText'; 	isCurrencyDeficit	? $value == SC.Common.CREW_RESET_SKILL_TYPE.GoldReset 	? tr('IDS_NOT_ENOUGH_GOLD')
																													: tr('IDS_RESET_SKILLPOINTS_DISABLED_NOT_ENOUGH_ELXP')
															: null"/>
		<bind name="watch" value="'title'; 'IDS_RESET_SKILLPOINTS_TYPE_' + $value"/>
		<bind name="watch" value="'isAvailable'; !isCurrencyDeficit"/>
		<bind name="watch" value="'isSelected'; isAvailable &amp;&amp; $value == _selectedFreeSkillPointsType"/>
		<bind name="action" value="userPrefs.crewResetSkillType == null ? 'addedToStage' : ''; 'setUserPref' ; {name : 'crewResetSkillType', value : SC.Common.CREW_RESET_SKILL_TYPE.GoldReset}"/>
		<bind name="action" value="'menuItemSelectedEv'; 'setUserPref'; {name: 'crewResetSkillType', value: $value}"/>
		<bind name="changeDispatch" value="isAvailable; 'selectedFreeSkillPointsTypeAvailabilityEv'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'SmallMenuItemWithPrice'; {	_width: _width, _height: _height,
												_title: title,
												_isSelected: isSelected,
												_isAvailable: isAvailable,
												_disableReason: disableReasonText,
												_priceInfo: priceInfo}"/>
	</block>

	<!-- modal_crew_hire -->
	<block className="ModalWindowHireCrew">
		<bind name="soundOn" value="'addedToStage'; 'openExchange'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow'; {	_headerText: 'IDS_CREW_TRAINING',
											_hideDivider: true,
											_contentElement: 'ModalWindowHireCrewContent'}"/>
	</block>
	<block className="ModalWindowHireCrewContent">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; playerShipId"/>
		<bind name="watchDH" value="'shipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'ownShipTimeRent';		['ownShipEntity.ownShip.evUpdateDockState'];	ownShipEntity.ownShip.timeRent"/>
		<bind name="watchDH" value="'freeBarracksSlots';		['dockEntity.crewData.evUpdate'];				dockEntity.crewData.freeBarracksSlots"/>
		<bind name="watch" value="'isRentalOwnShip';				ownShipTimeRent &gt; 0"/>
		<bind name="watch" value="'areAnySlotsInBarracks';		freeBarracksSlots &gt; 0"/>
		<bind name="watch" value="'isNewCrewHiringImpossible';	!areAnySlotsInBarracks &amp;&amp; isRentalOwnShip"/>
		<bind name="primaryEntityDH" value="'moneyTrainingHirePriceEntity'; CC.priceComponent; 'CREW_CR_TRAINING_Cost' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'moneyTrainingHirePrice'; ['moneyTrainingHirePriceEntity.priceComponent.evChanged']; moneyTrainingHirePriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'goldTrainingHirePriceEntity'; CC.priceComponent; 'CREW_GOLD_TRAINING_Cost' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'goldTrainingHirePrice'; ['goldTrainingHirePriceEntity.priceComponent.evChanged']; goldTrainingHirePriceEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'crewToHireEntity'; CC.crewToHirePersonality"/>
		<bind name="watchDH" value="'goldTrainingLevel';		['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.goldTrainingLevel"/>
		<bind name="watchDH" value="'moneyTrainingLevel';	['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.moneyTrainingLevel"/>
		<bind name="watchDH" value="'baseTrainingLevel';		['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.baseTrainingLevel"/>
		<bind name="watch" value="'hireTypes';	{	0:	{	hireSkillPoints: baseTrainingLevel-1, hireLevel: baseTrainingLevel},
									1:	{	hireSkillPoints: moneyTrainingLevel-1, hireLevel: moneyTrainingLevel, priceInfo: moneyTrainingHirePrice},
									2:	{	hireSkillPoints: goldTrainingLevel-1, hireLevel: goldTrainingLevel, priceInfo: goldTrainingHirePrice}
								}"/>
		<bind name="watch" value="'selectedHireType'; userPrefs.crewRecruitmentOption == null ? SC.Common.CREW_TRAINING_TYPE.GoldTraining : userPrefs.crewRecruitmentOption"/>
		<bind name="watch" value="'isSelectedHireTypeGold'; selectedHireType == SC.Common.CREW_TRAINING_TYPE.GoldTraining"/>
		<bind name="watch" value="'questionText'; !!hireTypes[selectedHireType].priceInfo ? 'IDS_HIRE_FOR' : 'IDS_HIRE_FOR_FREE'"/>
		<bind name="watch" value="'priceInfo'; !!hireTypes[selectedHireType].priceInfo 	? hireTypes[selectedHireType].priceInfo
																		: null"/>
		<bind name="watch" value="'currenciesPanelPrices'; [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: isSelectedHireTypeGold ? -priceInfo.finalPrice : 0},
											{currency: SC.Common.CURRENCIES.CREDITS,	finalPrice: !isSelectedHireTypeGold ? -priceInfo.finalPrice : 0}]"/>
		<bind name="catch" value="'selectedHireTypeChangedEv'"/>
		<bind name="action" value="'selectedHireTypeChangedEv'; 'setUserPref'; {value: selectedHireType, name: 'crewRecruitmentOption'}"/>
		<bind name="catch" value="'selectedHireTypeDisabledEv'; {selectedHireType: SC.Common.CREW_TRAINING_TYPE.BaseTraining}"/>
		<bind name="action" value="'selectedHireTypeDisabledEv'; 'setUserPref'; {value: SC.Common.CREW_TRAINING_TYPE.BaseTraining, name: 'crewRecruitmentOption'}"/>
		<bind name="action" value="'addedToStage'; 'setCrewToHireLevel'; {level: hireTypes[selectedHireType].hireLevel}"/>
		<bind name="action" value="'selectedHireType' + varChanged; 'setCrewToHireLevel'; {level: hireTypes[selectedHireType].hireLevel}"/>
		<bind name="changeDispatch" value="isNewCrewHiringImpossible; 'closeModalWindow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="request" value="'closeModalWindow'; 'close'; {}"/>
		<style>
			<align value="center"/>
			<width value="702px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 702 }"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="16px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="32px"/>
					<width value="220px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'HireCrewStereotype'; {	_size: 2,
														_hireSkillPoints: hireTypes[selectedHireType].hireSkillPoints}"/>
				</block>
				<block>
					<style>
						<marginTop value="24px"/>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
													_width: '100%',
													_label: 'IDS_CREW_HIRE_CHANGE_PORTRAIT_BUTTON_LABEL',
													_action: 'changeCrewPortrait',
													_enabled: true}"/>
				</block>
				<block>
					<style>
						<marginTop value="8px"/>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
													_width: '100%',
													_label: 'IDS_CREW_HIRE_CHANGE_NAME_BUTTON_LABEL',
													_action: 'changeCrewName',
													_enabled: true}"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="450px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="repeatObject" value="hireTypes; 'CrewHireTypeItem'; {_selectedHireType: selectedHireType}; true"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="32px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
				<align value="center"/>
				<marginTop value="24px"/>
			</style>
			<block>
				<bind name="appear" value="'selectedHireType' + varChanged; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; {	_questionText: questionText, 
																	_priceInfo: priceInfo}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="12px"/>
			</style>
			<block>
				<style>
					<marginRight value="30px"/>
				</style>
				<bind name="name" value="'btn_hireCrew'"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '154px',
												_enabled: !isNewCrewHiringImpossible,
												_isTransactionBtn: true,
												_request: 'hireCrew',
												_requestParams: {	shipId: playerShipId,
																	trainingType: selectedHireType},
												_label: 'IDS_YES',
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultButton'; {	_width: '154px',
												_label: 'IDS_CANCEL_UPPER_CASE',
												_enabled: true,
												_focusIndex: 2,
												_request: 'closeWindow'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CrewHireTypeItem">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'currentCurrencyResource';	[	'resourceEntity.accountResource.evChangedGold',
													'resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource[$index_key_value.priceInfo.currency]"/>
		<bind name="watch" value="'isAvailable'; !$index_key_value.priceInfo || ($index_key_value.priceInfo.finalPrice &lt;= currentCurrencyResource)"/>
		<bind name="watch" value="'isSelected'; $index_key_name == _selectedHireType"/>
		<bind name="watch" value="'title'; tr('IDS_CREW_HIRE_TYPE_HEADER_' + $index_key_name)"/>
		<bind name="watch" value="'subTitle'; $index_key_value.hireSkillPoints &gt; 0	? subst('IDS_CREW_HIRE_TYPE_DESCRIPTION_PAID_PL', [], { _amount: $index_key_value.hireSkillPoints}, $index_key_value.hireSkillPoints)
																: null"/>
		<bind name="watch" value="'disableReasonText'; toUpperCase('IDS_NOT_ENOUGH_' + $index_key_value.priceInfo.currency)"/>
		<bind name="dispatch" value="'menuItemSelectedEv'; 'selectedHireTypeChangedEv'; {selectedHireType: $index_key_name}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="changeDispatch" value="isAvailable; isSelected ? 'selectedHireTypeDisabledEv' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; false"/>
		<bind name="name" value="'crew_hire_type_' + $index_key_name"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'BigMenuItemWithPrice'; {	_width: _width, _height: _height,
												_title: title, _subTitle: subTitle,
												_isSelected: isSelected,
												_isAvailable: isAvailable,
												_disableReason: disableReasonText,
												_newCounterValue: $index_key_value.hireSkillPoints,
												_priceInfo: $index_key_value.priceInfo}"/>
	</block>
	<block className="HireCrewStereotype">
		<bind name="firstEntityDH" value="'crewToHireEntity'; CC.crewToHirePersonality"/>
		<bind name="watchDH" value="'skillPoints';			['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.level"/>
		<bind name="watchDH" value="'crewRank';				['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.rankIDS"/>
		<bind name="watchDH" value="'fullName';				['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.fullName"/>
		<bind name="watchDH" value="'baseCommanderUrl';		['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.baseUrl"/>
		<bind name="watchDH" value="'overlayCommanderUrl';	['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.overlayUrl"/>
		<bind name="watch" value="'portraitWidth';		_isSmall ? '125px'	: '160px'"/>
		<bind name="watch" value="'portraitHeight';		_isSmall ? '114px'	: '147px'"/>
		<bind name="watch" value="'portraitBorderSize';	'4px'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginBottom value="12px"/>
			</style>
			<block>
				<bind name="instance" value="'CrewPortraitWithBGR'; {_baseUrl: baseCommanderUrl,
													_overlayUrl: overlayCommanderUrl,
													_classificationId: crew.classificationId,
													_portraitWidth: portraitWidth,
													_portraitHeight: portraitHeight,
													_borderSize: portraitBorderSize}"/>
			</block>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'bottom';	portraitBorderSize"/>
				<bind name="style" value="'right';	portraitBorderSize"/>
				<bind name="instance" value="'CrewSkillPointsView'; _hireSkillPoints &gt; 0	? {	_allSkillPoints: _hireSkillPoints,
																			_freeSkillPoints: _hireSkillPoints,
																			_isBig: true,
																			_isMaxLevelCrew: crew.isMaxLevel }
																		: null"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'HireCrewNameWithIcon'; {_fullName: fullName, _crewRank: toUpperCase(crewRank)}"/>
		</block>
	</block>
	<block className="HireCrewNameWithIcon">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold19NM"/>
			<style>
				<width value="100%"/>
				<leading value="-4"/>
				<marginBottom value="6px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_fullName"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<alpha value="0.75"/>
			</style>
			<bind name="text" value="tr(_crewRank)"/>
		</block>
	</block>

	<!-- modal_crew_retrain -->
	<block className="ModalWindowRetrainCrew">
		<bind name="soundOn" value="'addedToStage'; 'openExchange'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow'; {   _headerText: 'IDS_CREW_RETRAINING', 
											_hideDivider: true,
											_contentElement: 'ModalWindowRetrainCrewContent'}"/>
	</block>
	<block className="ModalWindowRetrainCrewContent">
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; Number($root.crewId)"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; $root.shipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountFreeXP';		['resourceEntity.accountResource.evChangedFreeXP'];		resourceEntity.accountResource.freeXP"/>
		<bind name="watchDH" value="'eliteXP';			['resourceEntity.accountResource.evChangedEliteXP'];	resourceEntity.accountResource.eliteXP"/>
		<bind name="watch" value="'okButtonRequest'; $root.shipId == crew.shipID ? 'retrainCrew'
																: 'retrainAndAssignCrew'"/>
		<bind name="watch" value="'retrainToShipId'; okButtonRequest == 'retrainCrew'	? crew.specializationID
																				: $root.shipId"/>
		<bind name="watch" value="'availableRetrainingOptions'; okButtonRequest == 'retrainCrew'	? SC.Common.CREW_RETRAINING_TYPE.INSTANT_RETRAINING_OPTIONS
																						: SC.Common.CREW_RETRAINING_TYPE.RETRAINING_OPTIONS"/>
		<bind name="collectionDH" value="CC.retrainingOption; 'availableRetrainingTypes'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'availableRetrainingTypes'+'ROOT'; 'availableRetrainingTypes'; {'filter': $entity.retrainingOption.blockReason == SC.Common.RETRAINING_OPTION_BLOCK_REASON.NO_REASON &amp;&amp;
											isIn($entity.retrainingOption.type, availableRetrainingOptions)}; ['retrainingOption.evUpdate']"/>
		<bind name="watch" value="'selectedTrainingType'; okButtonRequest == 'retrainCrew' 	? userPrefs.crewRetrainingOption == null 			? SC.Common.CREW_RETRAINING_TYPE.GoldRetraining 
																																		: userPrefs.crewRetrainingOption
																					: userPrefs.crewAssignRetrainingOption == null 		? SC.Common.CREW_RETRAINING_TYPE.GoldRetraining 
																																		: userPrefs.crewAssignRetrainingOption"/>
		<bind name="primaryEntityDH" value="'retrainingOptionEntity'; CC.retrainingOption; selectedTrainingType"/>
		<bind name="watchDH" value="'retrainingPriceInfo';	['retrainingOptionEntity.retrainingOption.evUpdate'];	retrainingOptionEntity.priceComponent"/>
		<bind name="watch" value="'freeRetrainingPrice';	retrainingOptionEntity.retrainingOption.needExpForRetraining"/>
		<bind name="watch" value="'eliteXpDeficit'; retrainingPriceInfo.finalPrice &gt; eliteXP	?	retrainingPriceInfo.finalPrice - eliteXP
																			:	0"/>
		<bind name="watch" value="'priceInfo'; retrainingPriceInfo.currency ==  SC.Common.CURRENCIES.ELITE_XP	? {	finalPrice: retrainingPriceInfo.finalPrice - eliteXpDeficit,
																									currency: SC.Common.CURRENCIES.ELITE_XP}
																								: retrainingPriceInfo"/>
		<bind name="watch" value="'freeXPpriceInfo'; retrainingPriceInfo.currency ==  SC.Common.CURRENCIES.ELITE_XP	? {	finalPrice: eliteXpDeficit,
																										currency: SC.Common.CURRENCIES.FREE_XP}
																									: {	finalPrice: 0,
																										currency: SC.Common.CURRENCIES.FREE_XP}"/>
		<bind name="watch" value="'isFreeOperation'; priceInfo.finalPrice + freeXPpriceInfo.finalPrice == 0"/>
		<bind name="catch" value="'selectedTrainingTypeChangedEv'"/>
		<bind name="action" value="'selectedTrainingTypeChangedEv'; 'setUserPref'; {value: selectedTrainingType, name: okButtonRequest == 'retrainCrew' ? 'crewRetrainingOption' : 'crewAssignRetrainingOption'}"/>
		<bind name="catch" value="'selectedRetrainingTypeDisabledEv'; {selectedTrainingType: okButtonRequest == 'retrainCrew'	? availableRetrainingTypes[0].retrainingOption.type
																														: SC.Common.CREW_RETRAINING_TYPE.FreeRetraining}"/>
		<bind name="action" value="'selectedRetrainingTypeDisabledEv'; 'setUserPref'; okButtonRequest == 'retrainCrew' 	? {value: availableRetrainingTypes[0].retrainingOption.type, name: 'crewRetrainingOption'}
																												: {value: SC.Common.CREW_RETRAINING_TYPE.FreeRetraining, name: 'crewAssignRetrainingOption'}"/>
		<bind name="changeDispatch" value="crewRetraining.allTypesBlocked; okButtonRequest == 'retrainCrew' ? 'allTypesBlockedEv' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="request" value="'allTypesBlockedEv'; 'closeWindow'; {}"/>
		<bind name="watch" value="'questionText';	selectedTrainingType == SC.Common.CREW_RETRAINING_TYPE.FreeRetraining	? 'IDS_CREW_START_FREE_RETRAINING_QUESTION' :
									okButtonRequest == 'retrainCrew'								? isFreeOperation	? 'IDS_SPEED_UP_RETRAINING_FOR_FREE_QUESTION'
																																: 'IDS_SPEED_UP_RETRAINING_FOR' :
									isFreeOperation															? 'IDS_RETRAIN_CREW_FOR_FREE_QUESTION'
																											: 'IDS_RETRAIN_CREW_FOR'"/>
		<bind name="watch" value="'optionalPriceInfo'; !isFreeOperation &amp;&amp; freeXPpriceInfo.finalPrice &gt; 0	?	freeXPpriceInfo
																							:	null"/>
		<bind name="watch" value="'hideFreeXP'; eliteXP - freeRetrainingPrice &gt;= 0"/>
		<bind name="watch" value="'isGoldOperation'; !isFreeOperation &amp;&amp; priceInfo.currency == SC.Common.CURRENCIES.GOLD"/>
		<bind name="watch" value="'isEliteXpOperation'; priceInfo.currency == SC.Common.CURRENCIES.ELITE_XP"/>
		<bind name="watch" value="'currenciesPanelPrices'; hideFreeXP	? [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: isGoldOperation		? -priceInfo.finalPrice : 0},
															{currency: SC.Common.CURRENCIES.ELITE_XP,	finalPrice: isEliteXpOperation 	? -priceInfo.finalPrice : 0}]
														: [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: isGoldOperation		? -priceInfo.finalPrice : 0},
															{currency: SC.Common.CURRENCIES.ELITE_XP,	finalPrice: isEliteXpOperation 	? -priceInfo.finalPrice : 0},
															{currency: SC.Common.CURRENCIES.FREE_XP,	finalPrice: -optionalPriceInfo.finalPrice}]"/>
		<style>
			<align value="center"/>
			<width value="702px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 702 }"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="16px"/>
				<marginBottom value="16px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="32px"/>
					<width value="220px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'CrewStereotypeWithName'; {	_size: 2,
															_crewId: Number($root.crewId),
															_shipClass: ownShipInfo.subtype}"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="450px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="availableRetrainingOptions; 'CrewRetrainingTypeItem'; {	_crewId: crew.id,
																						_selectedTrainingType: selectedTrainingType}"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="appear" value="'selectedTrainingType' + varChanged; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<style>
					<marginTop value="24px"/>
					<height value="30px"/>
				</style>
				<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; {	_questionText: questionText, 
																	_priceInfo: !isFreeOperation &amp;&amp; priceInfo.finalPrice &gt; 0 ? priceInfo :	null,
																	_optionalPriceInfo: optionalPriceInfo }"/>
			</block>
			<block>
				<bind name="visible" value="selectedTrainingType == SC.Common.CREW_RETRAINING_TYPE.FreeRetraining"/>
				<bind name="appear" value="'selectedTrainingType' + varChanged; 0.12; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginBottom value="8px"/>
					<marginTop value="16px"/>
				</style>
				<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
											_text: 'IDS_CREW_SKILLS_FREE_RETRAINING_PENALTY_INFO' }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<block>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="soundOn" value="'click'; okButtonRequest == 'retrainAndAssignCrew' ? null :
							isFreeOperation												? 'setup'
																						: 'spendMoney'; 'crew'"/>
				<bind name="instance" value="'DefaultButton'; {	_name: 'btn_ok',
												_enabled: true,
												_isTransactionBtn: true,
												_request: okButtonRequest,
												_requestParams: {	crewId: $root.crewId,
																	specialization: retrainToShipId,
																	retrainingType: selectedTrainingType },
												_label: 'IDS_YES',
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_CANCEL_UPPER_CASE',
												_enabled: true,
												_focusIndex: 2,
												_request: 'closeWindow'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CrewRetrainingTypeItem">
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="primaryEntityDH" value="'retrainingOptionEntity'; CC.retrainingOption; $value"/>
		<bind name="watchDH" value="'priceInfo';	['retrainingOptionEntity.retrainingOption.evUpdate'];	retrainingOptionEntity.priceComponent"/>
		<bind name="watchDH" value="'disableReason';	['retrainingOptionEntity.retrainingOption.evUpdate'];	retrainingOptionEntity.retrainingOption.blockReason"/>
		<bind name="watch" value="'disableReasonText'; tr('IDS_CREW_TRAINING_TYPE_DISABLE_REASON_' + disableReason)"/>
		<bind name="watch" value="'title'; 'IDS_CREW_TRAINING_TYPE_HEADER_' + $value"/>
		<bind name="watch" value="'subTitle';	$value == SC.Common.CREW_RETRAINING_TYPE.FreeRetraining	? subst('IDS_CREW_TRAINING_TYPE_DESCRIPTION_1', [], { _amount: retrainingOptionEntity.retrainingOption.needExpForRetraining })
																						: ('IDS_CREW_TRAINING_TYPE_DESCRIPTION_' + $value)"/>
		<bind name="watch" value="'isSelected'; $value == _selectedTrainingType"/>
		<bind name="watch" value="'isAvailable'; disableReason == SC.Common.RETRAINING_OPTION_BLOCK_REASON.NO_REASON"/>
		<bind name="dispatch" value="'menuItemSelectedEv'; 'selectedTrainingTypeChangedEv'; {selectedTrainingType: $value}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="changeDispatch" value="isAvailable; isSelected ? 'selectedRetrainingTypeDisabledEv' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; false"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'BigMenuItemWithPrice'; {	_width: _width, _height: _height,
												_title: title, _subTitle: subTitle,
												_isSelected: isSelected,
												_isAvailable: isAvailable,
												_disableReason: disableReasonText,
												_priceInfo: priceInfo}"/>
	</block>

	<!-- modal_cvc_battle_results -->
	<block className="ModalCvCBattleResults">
		<styleClass value="$FullsizeAbsolute"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMapCustom">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap3" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="appear" value="'startShow'; 0.3; 1; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.3; 0.45; {alpha: 1}; {alpha: 0}"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="contrast"/>
		</block>
		<block className="modal_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="instance" value="'ModalCvCBattleResultsContent'; {}"/>
	</block>
	<block className="ModalCvCBattleResultsContent">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="var" value="{windowAppearLag: 2}"/>
		<bind name="primaryEntityDH" value="'clanBattleResultsEntity'; CC.clanBattleResult; $root.arenaId"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="1280:0,1920:60aw"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_CLAN_BATTLE_RESULTS', _headerWidth: '850px', _showInnerCloseButton:true}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalCvCBattleResultsContentUnderHeader'; clanBattleResultsEntity ? {} : null"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'NoItemsComeBackLater'; clanBattleResultsEntity ? null : {_type: 'CVC_RESULTS', _subText: 'IDS_NO_CURRENT_CVC_RESULTS_SUBTEXT'} "/>
		</block>
	</block>
	<block className="ModalCvCBattleResultsContentUnderHeader">
		<style>
			<width value="100%"/>
		</style>
		<bind name="var" value="{ windowAppearLag: 2 }"/>
		<bind name="primaryEntityDH" value="'clanBattleStageResultsEntity'; CC.clanBattleStageResult; $root.arenaId"/>
		<bind name="watchDH" value="'fromLeagueIdStage'; []; clanBattleStageResultsEntity.clanBattleStageResult.fromLeagueId"/>
		<bind name="watchDH" value="'toLeagueIdStage'; []; clanBattleStageResultsEntity.clanBattleStageResult.toLeagueId"/>
		<bind name="watchDH" value="'fromDivisionIdStage'; []; clanBattleStageResultsEntity.clanBattleStageResult.fromDivisionId"/>
		<bind name="watchDH" value="'toDivisionIdStage'; []; clanBattleStageResultsEntity.clanBattleStageResult.toDivisionId"/>
		<bind name="watchDH" value="'stage'; []; clanBattleStageResultsEntity.clanBattleStageResult.stage"/>
		<bind name="watchDH" value="'isProgressFinished'; []; clanBattleStageResultsEntity.clanBattleStageResult.isProgressFinished"/>
		<bind name="watchDH" value="'toBattleProgress'; []; clanBattleStageResultsEntity.clanBattleStageResult.toBattleProgress"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanBattleResultsEntity'; CC.clanBattleResult; $root.arenaId"/>
		<bind name="watchDH" value="'battleResult'; []; clanBattleResultsEntity.clanBattleResult.battleResult"/>
		<bind name="watchDH" value="'fromRating'; []; clanBattleResultsEntity.clanBattleResult.fromRating"/>
		<bind name="watchDH" value="'toRating'; []; clanBattleResultsEntity.clanBattleResult.toRating"/>
		<bind name="watchDH" value="'fromPublicRating'; []; clanBattleResultsEntity.clanBattleResult.fromPublicRating"/>
		<bind name="watchDH" value="'toPublicRating'; []; clanBattleResultsEntity.clanBattleResult.toPublicRating"/>
		<bind name="watchDH" value="'fromDivisionId'; []; clanBattleResultsEntity.clanBattleResult.fromDivisionId"/>
		<bind name="watchDH" value="'toDivisionId'; []; clanBattleResultsEntity.clanBattleResult.toDivisionId"/>
		<bind name="watchDH" value="'fromLeagueId'; []; clanBattleResultsEntity.clanBattleResult.fromLeagueId"/>
		<bind name="watchDH" value="'toLeagueId'; []; clanBattleResultsEntity.clanBattleResult.toLeagueId"/>
		<bind name="watchDH" value="'squadId'; []; clanBattleResultsEntity.clanBattleResult.squadId"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="watch" value="'isLeading'; squadId == leadingSquadId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="watch" value="'receivedRating'; toPublicRating &gt; fromPublicRating ? toPublicRating - fromPublicRating: fromPublicRating - toPublicRating"/>
		<bind name="watch" value="'receivedRatingStr';  fromPublicRating &lt; toPublicRating ? '+ ' : '- '"/>
		<bind name="var" value="{'defaultRecievedRating': 0}"/>
		<block>
			<style>
				<marginTop value="24px"/>
				<marginBottom value="24px"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefaultBold46NM"/>
				<bind name="class" value="battleResult == 'victory'	? '$FontColorGolden' : '$FontColorStrongBlueish'"/>
				<bind name="text" value="battleResult == 'defeat'	? 'IDS_DEFEAT' :
						battleResult == 'victory'	? 'IDS_VICTORY'
													: 'IDS_DRAW' "/>
			</block>
			<block>
				<style>
					<marginLeft value="24px"/>
				</style>
				<bind name="visible" value="!clanBattleStageResultsEntity &amp;&amp; fromPublicRating != toPublicRating"/>
				<block type="text">
					<style>
						<marginTop value="-2px"/>
						<marginRight value="-6px"/>
					</style>
					<bind name="class" value="battleResult == 'victory'	? '$FontColorGolden' : '$FontColorStrongBlueish'"/>
					<styleClass value="$TextDefaultBold46NM"/>
					<bind name="text" value="toPublicRating &gt; fromPublicRating ? '+ ' : '- '"/>
				</block>
				<block type="text">
					<bind name="class" value="battleResult == 'victory'	? '$FontColorGolden' : '$FontColorStrongBlueish'"/>
					<styleClass value="$TextDefaultBold46NM"/>
					<bind name="text" value="receivedRating"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<width value="512px"/>
					<height value="512px"/>
				</style>
				<bind name="stageSize"/>
				<bind name="watch" value="'logoScaleIndex'; stageHeight &lt;= 800 ? 0.8 : 1"/>
				<bind name="scaleY" value="logoScaleIndex"/>
				<bind name="scaleX" value="logoScaleIndex"/>
				<bind name="ubScaleY" value="logoScaleIndex"/>
				<bind name="ubScaleX" value="logoScaleIndex"/>
				<bind name="instance" value="'ClanLeagueLogo'; battleResult == 'qualification' ? null : {}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="24px"/>
				<marginBottom value="16px"/>
				<alpha value="0"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<style>
					<alpha value="0.6"/>
				</style>
				<styleClass value="$TextDefaultBold30NM"/>
				<bind name="text" value="	(fromLeagueId &lt; toLeagueId) &amp;&amp; isProgressFinished							?	'IDS_CLAN_BATTLE_DESCENDED_LEAGUE' :
							(fromLeagueId &gt; toLeagueId) &amp;&amp; isProgressFinished							?	'IDS_CLAN_BATTLE_RAISED_LEAGUE' :
							(fromLeagueId == toLeagueId) &amp;&amp; isProgressFinished &amp;&amp; stage == 'promotion'	?	'IDS_CLAN_PROMOTION_LOSE_BATTLE_FOR_LEAGUE' :
							(fromLeagueId == toLeagueId) &amp;&amp; isProgressFinished &amp;&amp; stage == 'demotion'	?	'IDS_CLAN_DEMOTION_WON_BATTLE_FOR_LEAGUE' :
							fromDivisionId &lt; toDivisionId												?	'IDS_CLAN_BATTLE_DESCENDED_DIVISION' :
							fromDivisionId &gt; toDivisionId												?	'IDS_CLAN_BATTLE_RAISED_DIVISION' :
							stage == 'promotion' &amp;&amp; !isProgressFinished									?	'IDS_CLAN_PROMOTION_BATTLE_FOR_LEAGUE' :
							stage == 'demotion' &amp;&amp;	!isProgressFinished									?	'IDS_CLAN_DEMOTION_BATTLE_FOR_LEAGUE' :
							fromPublicRating &lt; toPublicRating														?	'IDS_CLAN_BATTLE_RAISED_RATING' :
							fromPublicRating == toPublicRating														?	'IDS_CLAN_RATING_DID_NOT_CHANGED' :
							(fromPublicRating == 0 &amp;&amp; toPublicRating == 0)											?	'[' + clanTag + ']'
																										:	'IDS_CLAN_BATTLE_DESCENDED_RATING'"/>
			</block>
		</block>
		<block>
			<style>
				<marginBottom value="16px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block>
				<block type="text">
					<style>
						<alpha value="0.6"/>
					</style>
					<styleClass value="$TextDefaultBold30NM"/>
					<bind name="text" value="'['+clanTag+'] ' + (hasClanSquadModifier ? tr('IDS_CLAN_SQUAD_' + squadId) : '')"/>
				</block>
				<block>
					<bind name="visible" value="hasClanSquadModifier &amp;&amp; isLeading"/>
					<style>
						<marginLeft value="12px"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_TOOLTIP_LEADING_CLAN_SQUAD'}"/>
					<bind name="instance" value="'LeadingClanSquadIcon'; hasClanSquadModifier &amp;&amp; isLeading ? { _isBig: true } : null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="720:20,1080:80ah"/>
				<width value="100%"/>
				<alpha value="0"/>
				<align value="center"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0.5 + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'DefaultButton';	{	_label: 'IDS_CLOSE_UPPER_CASE',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 0,
												_defaultFocused: true
											}"/>
		</block>
	</block>
	<block className="ClanLeagueLogo">
		<style>
			<width value="512px"/>
			<height value="512px"/>
		</style>
		<bind name="var" value="{ windowAppearLag: 2 }"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanBattleStageResultsEntity'; CC.clanBattleStageResult; $root.arenaId"/>
		<bind name="watch" value="'fromBattleProgress';	clanBattleStageResultsEntity.clanBattleStageResult.fromBattleProgress"/>
		<bind name="watch" value="'toBattleProgress';	clanBattleStageResultsEntity.clanBattleStageResult.toBattleProgress"/>
		<bind name="watch" value="'isProgressFinished';	clanBattleStageResultsEntity.clanBattleStageResult.isProgressFinished"/>
		<bind name="watch" value="'targetLeagueId';		clanBattleStageResultsEntity.clanBattleStageResult.toLeagueId"/>
		<bind name="watch" value="'targetDivisionId';	clanBattleStageResultsEntity.clanBattleStageResult.toDivisionId"/>
		<bind name="primaryEntityDH" value="'clanBattleResultsEntity'; CC.clanBattleResult; $root.arenaId"/>
		<bind name="watch" value="'battleResult';	clanBattleResultsEntity.clanBattleResult.battleResult"/>
		<bind name="watch" value="'fromRating';		clanBattleResultsEntity.clanBattleResult.fromRating"/>
		<bind name="watch" value="'toRating';		clanBattleResultsEntity.clanBattleResult.toRating"/>
		<bind name="watch" value="'fromPublicRating';clanBattleResultsEntity.clanBattleResult.fromPublicRating"/>
		<bind name="watch" value="'toPublicRating';	clanBattleResultsEntity.clanBattleResult.toPublicRating"/>
		<bind name="watch" value="'fromDivisionId';	clanBattleResultsEntity.clanBattleResult.fromDivisionId"/>
		<bind name="watch" value="'toDivisionId';	clanBattleResultsEntity.clanBattleResult.toDivisionId"/>
		<bind name="watch" value="'fromLeagueId';	clanBattleResultsEntity.clanBattleResult.fromLeagueId"/>
		<bind name="watch" value="'toLeagueId';		clanBattleResultsEntity.clanBattleResult.toLeagueId"/>
		<bind name="watch" value="'stage';			clanBattleResultsEntity.clanBattleResult.stage"/>
		<bind name="watch" value="'divisionRatingToDegrees'; divisionRatingMax &amp;&amp; !((toLeagueId == 0) &amp;&amp; (toDivisionId == 1)) ? (toRating / divisionRatingMax) * 360 : 0"/>
		<bind name="watch" value="'isNewLeague'; fromLeagueId == toLeagueId ? false : true "/>
		<block>
			<style>
				<width value="512px"/>
				<height value="512px"/>
				<paddingLeft value="256px"/>
				<paddingTop value="256px"/>
			</style>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_CLAN_LEAGUE_' + toLeagueId)}"/>
			<block>
				<style>
					<width value="512px"/>
					<height value="512px"/>
					<alpha value="1"/>
					<paddingLeft value="-256px"/>
					<paddingTop value="-256px"/>
					<position value="absolute"/>
				</style>
				<block>
					<style>
						<width value="512px"/>
						<height value="512px"/>
						<backgroundSize value="fill"/>
					</style>
					<bind name="style" value="'backgroundImage'; toLeagueId &gt;= 0	? 'url:../clans/leagues/cvc_league_' + toLeagueId + '.png'
																: '' "/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="((stage == 'demotion' &amp;&amp; !isProgressFinished) || ((toLeagueId == 0) &amp;&amp; (toDivisionId == 1)))"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundImage'; toLeagueId &gt;= 0	? 'url:../clans/leagues/cvc_league_' + toLeagueId + '_stub.png'
														: '' "/>
		</block>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<bind name="instance" value="'ClanRatingProgressBar'; clanBattleStageResultsEntity &amp;&amp; !isProgressFinished &amp;&amp; stage == 'promotion'	? {	promotionProgress: 360,
																																	toDivisionId: toDivisionId,
																																	fromDivisionId: fromDivisionId,
																																	toLeagueId: toLeagueId } :

													clanBattleStageResultsEntity &amp;&amp; !isProgressFinished &amp;&amp; stage == 'demotion'	? {	promotionProgress: 0,
																																	toDivisionId: toDivisionId,
																																	fromDivisionId: fromDivisionId,
																																	toLeagueId: toLeagueId }

																																: { promotionProgress: divisionRatingToDegrees, 
																																	toDivisionId: toDivisionId, 
																																	fromDivisionId: fromDivisionId, 
																																	startRatingToDegrees: startRatingToDegrees, 
																																	toLeagueId: toLeagueId,
																																	isProgressFinished: isProgressFinished,
																																	fromLeagueId: fromLeagueId}"/>
		</block>
		<bind name="watch" value="'isStarsVisible'; clanBattleStageResultsEntity &amp;&amp; !isProgressFinished ? true : false"/>
		<block>
			<style>
				<width value="512px"/>
				<height value="512px"/>
				<bottom value="0"/>
				<paddingLeft value="256px"/>
				<paddingTop value="440px"/>
			</style>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<block>
				<style>
					<width value="512px"/>
					<height value="512px"/>
					<paddingLeft value="-256px"/>
					<paddingTop value="-440px"/>
				</style>
				<bind name="visible" value="isStarsVisible"/>
				<bind name="instance" value="'ClanBattleResultsStarsBlock'; clanBattleStageResultsEntity ? {	toLeagueId: toLeagueId }
																						: null"/>
			</block>
		</block>
		<block>
			<style>
				<width value="512px"/>
				<height value="512px"/>
				<bottom value="0"/>
				<paddingLeft value="256px"/>
				<paddingTop value="440px"/>
			</style>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<block>
				<style>
					<width value="512px"/>
					<height value="512px"/>
					<paddingLeft value="-256px"/>
					<paddingTop value="-440px"/>
				</style>
				<bind name="visible" value="!isStarsVisible"/>
				<bind name="instance" value="'ClanBattleRatingBlock'; {	_toLeagueId: toLeagueId, _toRating: toRating } "/>
			</block>
		</block>
	</block>
	<block className="ClanRatingProgressBar">
		<style>
			<width value="242px"/>
			<height value="242px"/>
		</style>
		<bind name="watch" value="'currentLeagueColor';		toLeagueId == 0		? 0xAB45E6 :
											toLeagueId == 1		? 0xE5124A :
											toLeagueId == 2		? 0xF1AE07 :
											toLeagueId == 3		? 0x0644D9 :
											toLeagueId == 4		? 0x00D8D0
																: 0xFFFFFF "/>
		<block>
			<style>
				<top value="179px"/>
				<width value="200px"/>
				<height value="200px"/>
			</style>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_BATTLES_LOGO_DIVISION'}"/>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; toDivisionId	? 'url:../clans/divisions/cvc_division_' + toDivisionId + '.png'
															: '' "/>
			</block>
		</block>
		<block>
			<style>
				<top value="278px"/>
			</style>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLAN_BATTLES_LOGO_RATING'}"/>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<block className="lesta.display.Sector" type="native">
					<bind name="color" value="currentLeagueColor"/>
					<bind name="offset" value="-90"/>
					<bind name="arc" value="promotionProgress"/>
					<params>
						<param name="innerRadius" value="110"/>
						<param name="radius" value="122"/>
					</params>
				</block>
			</block>
		</block>
	</block>
	<block className="ClanBattleResultsStarsBlock">
		<style>
			<width value="512px"/>
			<height value="512px"/>
		</style>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundImage'; toLeagueId != undefined	? 'url:../clans/leagues/cvc_league_' + toLeagueId + '_ribbon_big.png'
																: ''"/>
		</block>
		<bind name="primaryEntityDH" value="'clanBattleStageResultsEntity'; CC.clanBattleStageResult; $root.arenaId"/>
		<bind name="watchDH" value="'fromBattleProgress'; []; clanBattleStageResultsEntity.clanBattleStageResult.fromBattleProgress"/>
		<bind name="watchDH" value="'toBattleProgress'; []; clanBattleStageResultsEntity.clanBattleStageResult.toBattleProgress"/>
		<block>
			<style>
				<width value="512px"/>
				<height value="120px"/>
				<position value="absolute"/>
				<bottom value="0"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="visible" value="isStarsVisible"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_CLAN_' + toUpperCase(stage) + '_BATTLE_FOR_LEAGUE')}"/>
		</block>
		<block>
			<style>
				<marginTop value="418px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="repeat" value="toBattleProgress; 'ClanBattleResultsStar'; {}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ClanBattleResultsStar">
		<style>
			<width value="70px"/>
			<height value="70px"/>
			<marginLeft value="2px"/>
			<marginRight value="2px"/>
			<paddingLeft value="35px"/>
			<paddingTop value="35px"/>
			<alpha value="0.8"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_CLAN_STAR_' + toUpperCase($value) + '_DESCRIPTION')}"/>
		<block>
			<style>
				<width value="70px"/>
				<height value="70px"/>
				<paddingLeft value="-35px"/>
				<paddingTop value="-35px"/>
				<alpha value="1"/>
			</style>
			<block>
				<style>
					<width value="70px"/>
					<height value="70px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../clans/stars/cvc_star_' + $value + '.png'"/>
			</block>
		</block>
	</block>
	<block className="ClanBattleRatingBlock">
		<style>
			<width value="512px"/>
			<height value="512px"/>
		</style>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundImage'; _toLeagueId != undefined	? 'url:../clans/leagues/cvc_league_' + _toLeagueId + '_ribbon_small.png'
																	: '' "/>
		</block>
		<block>
			<style>
				<top value="432px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_CLAN_BATTLES_LOGO_RATING')}"/>
			<block type="text">
				<style>
					<width value="170px"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$TextDefaultBold46NM"/>
				<bind name="text" value="_toRating"/>
			</block>
		</block>
	</block>

	<!-- modal_cvc_battles_schedule -->
	<block className="ModalWindowClanBattlesSchedule">
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block className="ModalWindowClanBattlesScheduleContent">
			<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
			<bind name="watchDH" value="'cbs_finishTime'; ['clanCurrentSeasonEntity.timeOfBattleEvent.evChanged']; clanCurrentSeasonEntity.timeOfBattleEvent.finishTime"/>
			<bind name="countdown" value="cbs_finishTime; 'seasonFinishTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
			<bind name="var" value="{ windowAppearLag: 0.8 }"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1200px"/>
				<height value="100%"/>
				<paddingBottom value="720:50,1080:100ah"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'ModalWindowHeaderFullSize';{ 	_windowName: 'IDS_CLAN_BATTLES_SCHEDULE', 
															_paddingRight: '0px', _paddingLeft: '0px', 
															_backButtonText: 'IDS_RETURN_TO_BATTLETYPE_CHOOSER', 
															_request: 'returnToBattleTypeChooserClanBattlesSchedule'
											  			}"/>
				</block>
				<block>
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="8"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault17NMTech"/>
						<bind name="text" value="'IDS_TILL_CLAN_BATTLE_SEASON_END'"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<marginLeft value="12"/>
						</style>
						<bind name="text" value="seasonFinishTimeText"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginTop value="720:40,1080:64ah"/>
				</style>
				<styleClass value="$Fullsize"/>
				<block className="ClanBattlesScheduleTable">
					<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
					<bind name="watchDH" value="'cbs_resetPrimeTimes'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.resetPrimeTimes"/>
					<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
					<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
					<bind name="watch" value="'hasClanPermissions'; (role == 'commander') || (role == 'executive_officer') || (role == 'recruitment_officer')"/>
					<bind name="catch" value="'evSelectPrimeTimeChanged'"/>
					<bind name="primaryEntityDH" value="'selectedPrimeTime'; CC.clanBattlePrimeTime; selectedPrimeTimeId"/>
					<bind name="watchDH" value="'isChosen'; 						['selectedPrimeTime.clanBattlePrimeTime.evChanged']; selectedPrimeTime.clanBattlePrimeTime.isChosen"/>
					<bind name="watchDH" value="'isFixed'; 						['selectedPrimeTime.clanBattlePrimeTime.evChanged']; selectedPrimeTime.clanBattlePrimeTime.isFixed"/>
					<bind name="watchDH" value="'selectedPrimeTimeFinishTime'; 	['selectedPrimeTime.primeTime.evChanged']; selectedPrimeTime.primeTime.primeTimeFinishTime"/>
					<bind name="watchDH" value="'daylightshift'; 				['selectedPrimeTime.primeTime.evChanged']; selectedPrimeTime.primeTime.daylightshift"/>
					<bind name="serverTime" value="'serverTime'"/>
					<bind name="timeFormat" value="cbs_resetPrimeTimes; 'hh:mm'; 'localResetTime'; true"/>
					<bind name="watch" value="'isSelectedPrimeActive'; (selectedPrimeTimeFinishTime - daylightshift) &gt; serverTime"/>
					<bind name="watch" value="'enabledButton'; isSelectedPrimeActive &amp;&amp; !isChosen"/>
					<bind name="var" value="{ windowAppearLag: 0.5 }"/>
					<style>
						<flow value="horizontal"/>
					</style>
					<styleClass value="$Fullsize"/>
					<block>
						<style>
							<width value="100%"/>
							<height value="100%f"/>
						</style>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'ClanBattlePrimeTimesTableHeader'; {}"/>
						</block>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<style>
								<width value="100%"/>
								<alpha value="3"/>
								<marginTop value="16"/>
							</style>
							<block className="HorizontalDivider">
								<styleClass value="$PxHorizontalCorrection"/>
								<style>
									<width value="100%"/>
									<height value="2px"/>
									<backgroundSize value="fill"/>
									<marginTop value="1px"/>
									<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
								</style>
							</block>
						</block>
						<block>
							<block className="inner_panel" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<style>
								<width value="100%"/>
								<height value="100%f"/>
							</style>
							<block>
								<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
								<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
								<style>
									<width value="100%"/>
									<height value="100%f"/>
									<marginRight value="8px"/>
									<scrollbar value="ModernScrollBar"/>
									<scrollArea value="ModernScrollArea"/>
									<scrollbarTrackMode value="scrollToCursor"/>
									<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
									<wheelScrollSpeed value="15"/>
									<overflow value="scroll"/>
								</style>
								<bind name="collectionRepeatDH" value="CC.day; 'ClanBattlePrimeTimeItem'; 'clanPrimes'; {_selectedPrimeTimeId: selectedPrimeTimeId, _hasClanPermissions: hasClanPermissions, _currentDay:currentDay, _beforeBattle:$root.beforeBattle}"/>
							</block>
							<block>
								<style>
									<width value="100%"/>
									<alpha value="2"/>
								</style>
								<block className="HorizontalDivider">
									<styleClass value="$PxHorizontalCorrection"/>
									<style>
										<width value="100%"/>
										<height value="2px"/>
										<backgroundSize value="fill"/>
										<marginTop value="1px"/>
										<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
									</style>
								</block>
							</block>
							<block>
								<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
								<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
								<style>
									<height value="100%"/>
									<position value="absolute"/>
									<right value="0"/>
								</style>
								<block className="VerticalDivider">
									<style>
										<height value="100%"/>
										<width value="3px"/>
										<backgroundSize value="fill"/>
										<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
									</style>
								</block>
							</block>
							<block>
								<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
								<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
								<style>
									<height value="100%"/>
									<position value="absolute"/>
								</style>
								<block className="VerticalDivider">
									<style>
										<height value="100%"/>
										<width value="3px"/>
										<backgroundSize value="fill"/>
										<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
									</style>
								</block>
							</block>
						</block>
						<block>
							<bind name="visible" value="hasClanPermissions"/>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<style>
								<width value="100%"/>
								<align value="right"/>
								<marginTop value="32px"/>
							</style>
							<bind name="instance" value="'DefaultButton'; {	_width: '180px',
													_focusIndex: 1, _defaultFocused: false,
													_action: enabledButton ? 'AccountClanComponent.sendPlannedPrimeTime' : '',
													_actionParams: { primeTimeId: selectedPrimeTime.clanBattlePrimeTime.primeTimeId },
													_enabled: enabledButton,
													_containerName: 'primeTimeConfirmAccept',
													_label: 'IDS_CHOOSE_PRIME_TIME_CONFIRMATION_BUTTON'
												 }"/>
						</block>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<style>
							<width value="280px"/>
							<marginLeft value="32px"/>
							<marginTop value="32px"/>
						</style>
						<block>
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'TextWithAccent'; { _text: tr('IDS_CLAN_BATTLES_SERVER_RESET_TITLE') + ': ', _accentText: localResetTime, _textClass: '$TextDefault19NM'}"/>
						</block>
						<block>
							<style>
								<width value="100%"/>
								<marginTop value="24px"/>
							</style>
							<bind name="instance" value="'ClanBattlesPrimeTimeSelectionNotes'; {}"/>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowClanBattlesScheduleContent">
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'cbs_finishTime'; ['clanCurrentSeasonEntity.timeOfBattleEvent.evChanged']; clanCurrentSeasonEntity.timeOfBattleEvent.finishTime"/>
		<bind name="countdown" value="cbs_finishTime; 'seasonFinishTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
		<bind name="var" value="{ windowAppearLag: 0.8 }"/>
		<styleClass value="$MiddleAligned"/>
		<style>
			<width value="1200px"/>
			<height value="100%"/>
			<paddingBottom value="720:50,1080:100ah"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'ModalWindowHeaderFullSize';{ 	_windowName: 'IDS_CLAN_BATTLES_SCHEDULE', 
															_paddingRight: '0px', _paddingLeft: '0px', 
															_backButtonText: 'IDS_RETURN_TO_BATTLETYPE_CHOOSER', 
															_request: 'returnToBattleTypeChooserClanBattlesSchedule'
											  			}"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="8"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NMTech"/>
					<bind name="text" value="'IDS_TILL_CLAN_BATTLE_SEASON_END'"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<marginLeft value="12"/>
					</style>
					<bind name="text" value="seasonFinishTimeText"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:40,1080:64ah"/>
			</style>
			<styleClass value="$Fullsize"/>
			<block className="ClanBattlesScheduleTable">
				<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
				<bind name="watchDH" value="'cbs_resetPrimeTimes'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.resetPrimeTimes"/>
				<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
				<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
				<bind name="watch" value="'hasClanPermissions'; (role == 'commander') || (role == 'executive_officer') || (role == 'recruitment_officer')"/>
				<bind name="catch" value="'evSelectPrimeTimeChanged'"/>
				<bind name="primaryEntityDH" value="'selectedPrimeTime'; CC.clanBattlePrimeTime; selectedPrimeTimeId"/>
				<bind name="watchDH" value="'isChosen'; 						['selectedPrimeTime.clanBattlePrimeTime.evChanged']; selectedPrimeTime.clanBattlePrimeTime.isChosen"/>
				<bind name="watchDH" value="'isFixed'; 						['selectedPrimeTime.clanBattlePrimeTime.evChanged']; selectedPrimeTime.clanBattlePrimeTime.isFixed"/>
				<bind name="watchDH" value="'selectedPrimeTimeFinishTime'; 	['selectedPrimeTime.primeTime.evChanged']; selectedPrimeTime.primeTime.primeTimeFinishTime"/>
				<bind name="watchDH" value="'daylightshift'; 				['selectedPrimeTime.primeTime.evChanged']; selectedPrimeTime.primeTime.daylightshift"/>
				<bind name="serverTime" value="'serverTime'"/>
				<bind name="timeFormat" value="cbs_resetPrimeTimes; 'hh:mm'; 'localResetTime'; true"/>
				<bind name="watch" value="'isSelectedPrimeActive'; (selectedPrimeTimeFinishTime - daylightshift) &gt; serverTime"/>
				<bind name="watch" value="'enabledButton'; isSelectedPrimeActive &amp;&amp; !isChosen"/>
				<bind name="var" value="{ windowAppearLag: 0.5 }"/>
				<style>
					<flow value="horizontal"/>
				</style>
				<styleClass value="$Fullsize"/>
				<block>
					<style>
						<width value="100%"/>
						<height value="100%f"/>
					</style>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'ClanBattlePrimeTimesTableHeader'; {}"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<style>
							<width value="100%"/>
							<alpha value="3"/>
							<marginTop value="16"/>
						</style>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
					<block>
						<block className="inner_panel" type="native">
							<styleClass value="$FullsizeAbsolute"/>
						</block>
						<style>
							<width value="100%"/>
							<height value="100%f"/>
						</style>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<style>
								<width value="100%"/>
								<height value="100%f"/>
								<marginRight value="8px"/>
								<scrollbar value="ModernScrollBar"/>
								<scrollArea value="ModernScrollArea"/>
								<scrollbarTrackMode value="scrollToCursor"/>
								<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
								<wheelScrollSpeed value="15"/>
								<overflow value="scroll"/>
							</style>
							<bind name="collectionRepeatDH" value="CC.day; 'ClanBattlePrimeTimeItem'; 'clanPrimes'; {_selectedPrimeTimeId: selectedPrimeTimeId, _hasClanPermissions: hasClanPermissions, _currentDay:currentDay, _beforeBattle:$root.beforeBattle}"/>
						</block>
						<block>
							<style>
								<width value="100%"/>
								<alpha value="2"/>
							</style>
							<block className="HorizontalDivider">
								<styleClass value="$PxHorizontalCorrection"/>
								<style>
									<width value="100%"/>
									<height value="2px"/>
									<backgroundSize value="fill"/>
									<marginTop value="1px"/>
									<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
								</style>
							</block>
						</block>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<style>
								<height value="100%"/>
								<position value="absolute"/>
								<right value="0"/>
							</style>
							<block className="VerticalDivider">
								<style>
									<height value="100%"/>
									<width value="3px"/>
									<backgroundSize value="fill"/>
									<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
								</style>
							</block>
						</block>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<style>
								<height value="100%"/>
								<position value="absolute"/>
							</style>
							<block className="VerticalDivider">
								<style>
									<height value="100%"/>
									<width value="3px"/>
									<backgroundSize value="fill"/>
									<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
								</style>
							</block>
						</block>
					</block>
					<block>
						<bind name="visible" value="hasClanPermissions"/>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<style>
							<width value="100%"/>
							<align value="right"/>
							<marginTop value="32px"/>
						</style>
						<bind name="instance" value="'DefaultButton'; {	_width: '180px',
													_focusIndex: 1, _defaultFocused: false,
													_action: enabledButton ? 'AccountClanComponent.sendPlannedPrimeTime' : '',
													_actionParams: { primeTimeId: selectedPrimeTime.clanBattlePrimeTime.primeTimeId },
													_enabled: enabledButton,
													_containerName: 'primeTimeConfirmAccept',
													_label: 'IDS_CHOOSE_PRIME_TIME_CONFIRMATION_BUTTON'
												 }"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="280px"/>
						<marginLeft value="32px"/>
						<marginTop value="32px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'TextWithAccent'; { _text: tr('IDS_CLAN_BATTLES_SERVER_RESET_TITLE') + ': ', _accentText: localResetTime, _textClass: '$TextDefault19NM'}"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginTop value="24px"/>
						</style>
						<bind name="instance" value="'ClanBattlesPrimeTimeSelectionNotes'; {}"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="ClanBattlesScheduleTable">
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'cbs_resetPrimeTimes'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.resetPrimeTimes"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
		<bind name="watch" value="'hasClanPermissions'; (role == 'commander') || (role == 'executive_officer') || (role == 'recruitment_officer')"/>
		<bind name="catch" value="'evSelectPrimeTimeChanged'"/>
		<bind name="primaryEntityDH" value="'selectedPrimeTime'; CC.clanBattlePrimeTime; selectedPrimeTimeId"/>
		<bind name="watchDH" value="'isChosen'; 						['selectedPrimeTime.clanBattlePrimeTime.evChanged']; selectedPrimeTime.clanBattlePrimeTime.isChosen"/>
		<bind name="watchDH" value="'isFixed'; 						['selectedPrimeTime.clanBattlePrimeTime.evChanged']; selectedPrimeTime.clanBattlePrimeTime.isFixed"/>
		<bind name="watchDH" value="'selectedPrimeTimeFinishTime'; 	['selectedPrimeTime.primeTime.evChanged']; selectedPrimeTime.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift'; 				['selectedPrimeTime.primeTime.evChanged']; selectedPrimeTime.primeTime.daylightshift"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="timeFormat" value="cbs_resetPrimeTimes; 'hh:mm'; 'localResetTime'; true"/>
		<bind name="watch" value="'isSelectedPrimeActive'; (selectedPrimeTimeFinishTime - daylightshift) &gt; serverTime"/>
		<bind name="watch" value="'enabledButton'; isSelectedPrimeActive &amp;&amp; !isChosen"/>
		<bind name="var" value="{ windowAppearLag: 0.5 }"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
				<height value="100%f"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'ClanBattlePrimeTimesTableHeader'; {}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<alpha value="3"/>
					<marginTop value="16"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<block className="inner_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<style>
					<width value="100%"/>
					<height value="100%f"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<height value="100%f"/>
						<marginRight value="8px"/>
						<scrollbar value="ModernScrollBar"/>
						<scrollArea value="ModernScrollArea"/>
						<scrollbarTrackMode value="scrollToCursor"/>
						<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
						<wheelScrollSpeed value="15"/>
						<overflow value="scroll"/>
					</style>
					<bind name="collectionRepeatDH" value="CC.day; 'ClanBattlePrimeTimeItem'; 'clanPrimes'; {_selectedPrimeTimeId: selectedPrimeTimeId, _hasClanPermissions: hasClanPermissions, _currentDay:currentDay, _beforeBattle:$root.beforeBattle}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<alpha value="2"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<height value="100%"/>
						<position value="absolute"/>
						<right value="0"/>
					</style>
					<block className="VerticalDivider">
						<style>
							<height value="100%"/>
							<width value="3px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<height value="100%"/>
						<position value="absolute"/>
					</style>
					<block className="VerticalDivider">
						<style>
							<height value="100%"/>
							<width value="3px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="hasClanPermissions"/>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<align value="right"/>
					<marginTop value="32px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '180px',
													_focusIndex: 1, _defaultFocused: false,
													_action: enabledButton ? 'AccountClanComponent.sendPlannedPrimeTime' : '',
													_actionParams: { primeTimeId: selectedPrimeTime.clanBattlePrimeTime.primeTimeId },
													_enabled: enabledButton,
													_containerName: 'primeTimeConfirmAccept',
													_label: 'IDS_CHOOSE_PRIME_TIME_CONFIRMATION_BUTTON'
												 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="280px"/>
				<marginLeft value="32px"/>
				<marginTop value="32px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TextWithAccent'; { _text: tr('IDS_CLAN_BATTLES_SERVER_RESET_TITLE') + ': ', _accentText: localResetTime, _textClass: '$TextDefault19NM'}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="24px"/>
				</style>
				<bind name="instance" value="'ClanBattlesPrimeTimeSelectionNotes'; {}"/>
			</block>
		</block>
	</block>

	<!-- modal_cvc_season_ends -->
	<block className="ModalCvCSeasonEnds">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ClanSeasonEnds'; {}"/>
			</block>
		</block>
	</block>
	<block className="ClanSeasonEnds">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; selfPlayerEntity.clanman.clanId"/>
		<bind name="watch" value="'clanTag'; clanEntity.clan.tag"/>
		<bind name="var" value="{ windowAppearLag: 0.15 }"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:0,1080:60ah"/>
			</style>
			<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_CLAN_BATTLES_SEASON_RESULT_HEADER', _headerWidth: '700px', _showInnerCloseButton: true}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:20,1080:30ah"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefaultBold36NM"/>
				<bind name="text" value="'[' + clanTag + ']'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:20,1080:30ah"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefaultBold36NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_CLAN_BATTLES_SEASON_END"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:10,1080:15ah"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<bind name="instance" value="'ClanLeagueLogoBig'; {}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="10px"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextAccent"/>
				<default_text value="IDS_REWARD_FOR_CLAN_BATTLE"/>
			</block>
			<block>
				<bind name="tooltip" value="'RewardContainerTooltip'; { _rewards: rewards, _tooltipHeader: 'IDS_REWARD_FOR_COLLECTION'}"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<width value="94px"/>
					<height value="86px"/>
					<marginTop value="10px"/>
					<backgroundImage value="url:../campaigns/campaign_icons/giftbox.png"/>
				</style>
				<block className="icon_issued" type="native">
					<style>
						<position value="absolute"/>
						<top value="45px"/>
						<left value="45px"/>
						<alpha value="0.8"/>
						<hitTest value="false"/>
					</style>
					<bind name="gotoAndStop!" value="'issued'"/>
					<innerBind elementName="item.item" name="text" value="toUpperCase(tr('IDS_ISSUED_STAMP'))"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="720:20,1080:50ah"/>
			</style>
			<bind name="instance" value="'DefaultButton';	{	_label: 'IDS_CLOSE_UPPER_CASE',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 0,
												_defaultFocused: true
											}"/>
		</block>
	</block>
	<block className="ClanLeagueLogoBig">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="primaryEntityDH" value="'clanBattleInfoEntity'; CC.clanSquadLadderInfo; selfPlayerEntity.clanman.clanId"/>
		<bind name="watch" value="'rating'; 		clanBattleInfoEntity.clanBattleInfo.rating"/>
		<bind name="watch" value="'divisionId'; 	clanBattleInfoEntity.clanBattleInfo.divisionId"/>
		<bind name="watch" value="'leagueId'; 	clanBattleInfoEntity.clanBattleInfo.leagueId"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'smallResolution'; 	(stageWidth &lt;= 1300) || (stageHeight &lt;= 800)"/>
		<bind name="watch" value="'mediumResolution'; 	(stageWidth &lt;= 1440) || (stageHeight &lt;= 960)"/>
		<bind name="watch" value="'logoSize'; 	smallResolution		? '350px' :
								mediumResolution	? '450px'
													: '512px'"/>
		<bind name="style" value="'width';  logoSize"/>
		<bind name="style" value="'height'; logoSize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; leagueId &gt;= 0	? 'url:../clans/leagues/cvc_league_' + leagueId + '.png'
														: '' "/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; leagueId &gt;= 0	? 'url:../clans/leagues/cvc_league_' + leagueId + '_ribbon_small.png'
														: '' "/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'marginTop'; 	smallResolution		? '288px' :
									mediumResolution	? '378px'
														: '432px'"/>
			<block type="text">
				<styleClass value="$TextDefaultBold46NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="rating"/>
			</block>
		</block>
		<block>
			<bind name="watch" value="'leagueSize'; 	smallResolution		? '150px' :
									mediumResolution	? '175px'
														: '200px'"/>
			<bind name="watch" value="'margin'; 		smallResolution		? '115px' :
									mediumResolution	? '158px'
														: '180px'"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'width';  leagueSize"/>
			<bind name="style" value="'height'; leagueSize"/>
			<bind name="style" value="'marginTop'; margin"/>
			<bind name="style" value="'backgroundImage'; divisionId &gt;= 0	? 'url:../clans/divisions/cvc_division_' + divisionId + '.png'
														: '' "/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; leagueId &gt;= 0	? 'url:../clans/leagues/cvc_league_' + leagueId + '_stub.png'
														: '' "/>
		</block>
	</block>

	<!-- modal_division_not_ready -->
	<block className="ModalWindowDivisionNotReady">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ModalWindowDivisionNotReadyContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowDivisionNotReadyContent">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="child" value="!!trainingRoomEntity ? 0 : 1; {}; 'ModalWindowDivisionNotReadyContentNew'; 'ModalWindowDivisionNotReadyContentOld'"/>
	</block>
	<block className="ModalWindowDivisionNotReadyContentNew">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isSelfPlayerReady'; ['selfPlayerEntity.preBattlePlayerSimple.evIsReadyChanged']; selfPlayerEntity.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'timer'; ['trainingRoomEntity.trainingRoomWindowState.evTimerChanged']; trainingRoomEntity.trainingRoomWindowState.timer"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; selfPreBattleId"/>
		<bind name="watch" value="'formationType'; preBattleEntity.preBattleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE ? 'TRAINING_BATTLE' : 'DIVISION'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'unreadyPlayers'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'unreadyPlayers'+'ROOT'; 'unreadyPlayers'; {'filter': !($entity.preBattlePlayerSimple.isReady)}; ['preBattlePlayerSimple.evIsReadyChanged']"/>
		<bind name="watch" value="'isEveryoneReady'; unreadyPlayers.length == 0"/>
		<style>
			<width value="680px"/>
		</style>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="watch" value="'headerTitle'; isEveryoneReady 		? ('IDS_DIVISION_READY') : 
									!(isSelfPlayerReady)	? ('IDS_DIVISION_LEAVES_WITHOUT_YOU')
															: tr('IDS_INCOMPLETE_DIVISION')"/>
			<bind name="instance" value="'ModalWindowHeaderWithIcon'; {	_header: headerTitle, _headerWidth: '100%', _type: isSelfPlayerCommander ? 'division_commander' : 'division_member',
														_showInnerCloseButton: (notReadyWindowState != 2) &amp;&amp; (isSelfPlayerCommander || !isSelfPlayerReady) }"/>
		</block>
		<block>
			<bind name="visible" value="!(isSelfPlayerReady)"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: 'IDS_DIVISION_LEAVES_WITHOUT_YOU_INFO', _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="isSelfPlayerReady"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<width value="320px"/>
					<marginRight value="16px"/>
				</style>
				<bind name="instance" value="'FormationStatusMainElement'; {_isTrainingRoom: true, _width: '320px', _teamId: 0}"/>
			</block>
			<block>
				<style>
					<width value="320px"/>
				</style>
				<bind name="instance" value="'FormationStatusMainElement'; {_isTrainingRoom: true, _width: '320px', _teamId: 1}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isSelfPlayerReady &amp;&amp; (notReadyWindowState != 2)"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: ('IDS_DIVISION_NOT_READY_COMMANDER_INFO'), _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccent"/>
			<bind name="class" value="'$FontColorWhite'"/>
			<bind name="text" value="'IDS_FORMATION_GO_TO_BATTLE_AFTER'"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextAccent"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="countdown" value="timer; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="countdownText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="22px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'UnreadyPlayerControls'; !(isSelfPlayerCommander) &amp;&amp; !(isSelfPlayerReady) ? {windowAppearLag: windowAppearLag, _windowState: notReadyWindowState} : null"/>
			<bind name="instance" value="'CommanderControls'; isSelfPlayerCommander ? {windowAppearLag: windowAppearLag, _windowState: notReadyWindowState} : null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="FormationStatusMainElement">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; 'byPreBattleAndTeam.' + selfPreBattleId + '_' + _teamId + '.preBattleMembers.sorted'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="8px"/>
				<align value="center"/>
			</style>
			<block>
				<style>
					<marginBottom value="16px"/>
				</style>
				<bind name="instance" value="'FormationHeader'; { _isTrainingRoom: _isTrainingRoom, _teamId: _teamId }"/>
			</block>
			<block>
				<bind name="instance" value="'FormationShipClassesStatus'; {_preBattleId: selfPreBattleId, _teamId: _teamId}"/>
			</block>
		</block>
		<block>
			<bind name="style" value="'height'; preBattlePlayers.length &lt; 5 ? preBattlePlayers.length * 30 + 'px' : '150px'"/>
			<style>
				<width value="100%"/>
				<height value="50px"/>
				<overflow value="scroll"/>
				<flow value="vertical"/>
				<scrollbar value="ModernScrollBar"/>
				<scrollArea value="ModernScrollArea"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
				<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
				<itemWidth value="340px"/>
				<itemHeight value="30px"/>
				<wheelScrollSpeed value="100"/>
			</style>
			<bind name="generator" value="preBattlePlayers; 'DHBigFormationPlayerItem'; {}"/>
		</block>
	</block>
	<block className="UnreadyPlayerControls">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="watch" value="'isTrainingRoom'; !!trainingRoomEntity"/>
		<bind name="collectionDH" value="CC.ownShip; 'shipsList'; 'forDivision.sorted'"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="22px"/>
			</style>
			<block>
				<bind name="visible" value="shipsList.length &gt; 0"/>
				<block type="text">
					<style>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$TextHeaderBigWhite"/>
					<bind name="text" value="'IDS_YOUR_SHIP'"/>
				</block>
				<block>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="var" value="{_curItemIndex: 0,
							_direction: false}"/>
					<bind name="catch" value="'ItemChooser.shipSelected'"/>
					<bind name="instance" value="'ItemChooser'; shipsList.length &gt; 0 ? {_items: shipsList, _choosedItemRenderer: 'ShipItemChoosedRendererDH', _listItemRenderer: 'ShipItemChooserListRendererDH',
																			curIndex: _curItemIndex, onItemSelectedEvent: 'shipSelected', _itemChooserTooltipText: 'IDS_CHOOSE_SHIP',
																			_customDropdown: 'ShipItemChooserDropdown'}
																	: null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="shipsList.length == 0"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<block>
					<style>
						<marginRight value="3px"/>
						<marginTop value="2px"/>
					</style>
					<block className="icon_warning_orange_mid" type="native"/>
				</block>
				<block type="text">
					<bind name="class" value="'$TextHeaderBigWhite'"/>
					<bind name="class" value="'$FontColorOrange'"/>
					<bind name="text" value="'IDS_NO_ALLOWED_SHIPS_FOR_THIS_BATTLE'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="transition" value="(_windowState == 1); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<bind name="style" value="'hitTest'; _windowState != 2"/>
			<style>
				<marginTop value="8px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 7 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 7 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="firstEntityDH" value="'battleTypeEntity'; CC.battleType; 'selected'"/>
				<bind name="watchDH" value="'battleTypeReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.battleTypeReasons"/>
				<bind name="watchDH" value="'battleTypeStatus'; ['battleTypeEntity.battleType.evStatusChanged']; battleTypeEntity.battleType.status"/>
				<bind name="watch" value="'isReadyBtnEnabled';  (shipsList.length &gt; 0) &amp;&amp; (battleTypeStatus != SC.Common.BATTLE_TYPE_STATE.DISABLED)"/>
				<bind name="tooltip" value="'MultipleWarningsTooltip'; (battleTypeReasons.length &gt; 0) ? {_warningsArr: battleTypeReasons} : null"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; shipsList.length == 0 &amp;&amp; battleTypeReasons.length == 0 ? {	_text: tr('IDS_NO_ALLOWED_SHIPS_FOR_THIS_BATTLE'),
																												_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING } : null"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '160px', 
												_enabled: isReadyBtnEnabled,
												_isTransactionBtn: true,
												_action: isTrainingRoom ? 'setIsReadyInTrainingRoom' : '',
												_actionParams: {isReady: true, shipId: shipsList[_curItemIndex].ship.id},
												_request: !(isTrainingRoom) ? 'playerJoinedBattle' : '',
												_requestParams: {shipId: shipsList[_curItemIndex].ship.id},
												_label: 'IDS_FORMATION_SET_READY_GO_BATTLE',
												_focusIndex: 0,
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 6 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 6 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '160px',
												_name: 'btn_cancel',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_FORMATION_STAY_IN_DOCK',
												_focusIndex: 1,
												_defaultFocused: false}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipItemChooserDropdown">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<style>
			<width value="180px"/>
		</style>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; true ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(true) ? {} : null"/>
		</block>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<params>
				<param name="name" value="ItemChooserDropdown"/>
			</params>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="180px"/>
				<width value="100%"/>
				<scrollbar value="ModernScrollBar"/>
				<scrollArea value="ModernScrollArea"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
				<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
				<itemWidth value="180px"/>
				<itemHeight value="36px"/>
			</style>
			<bind name="generatorDH" value="CC.ownShip; _listItemRenderer; 'forDivision.sorted'; {_onItemSelectedEvent: _onItemSelectedEvent, _curItemIndex: _curItemIndex, _listItemRendererData: _listItemRendererData}"/>
		</block>
	</block>
	<block className="ModalWindowDivisionNotReadyContentOld">
		<style>
			<width value="500px"/>
		</style>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isReady';	['divisionDataEntity.division.evIsReadyChanged']; divisionDataEntity.division.isReady"/>
		<bind name="watchDH" value="'isEveryoneReady';	['divisionDataEntity.division.evIsEveryoneReadyChanged']; divisionDataEntity.division.isEveryoneReady"/>
		<bind name="watchDH" value="'windowState';	['divisionDataEntity.division.evWindowStateChanged']; divisionDataEntity.division.windowState"/>
		<bind name="watchDH" value="'timer';	['divisionDataEntity.division.evTimerChanged']; divisionDataEntity.division.timer"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="20px"/>
			</style>
			<bind name="watch" value="'headerTitle'; isEveryoneReady ? 'IDS_DIVISION_READY'
																 : !(isReady)	? 'IDS_DIVISION_LEAVES_WITHOUT_YOU'
																 							: tr('IDS_INCOMPLETE_DIVISION')"/>
			<bind name="instance" value="'ModalWindowHeaderWithIcon'; {	_header: headerTitle, _headerWidth: '100%', _type: 'division_' + (isCommander ? 'commander' : 'member'),
														_showInnerCloseButton: (windowState != 2) &amp;&amp; (isCommander || !isReady) }"/>
		</block>
		<block>
			<bind name="visible" value="!isReady"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="22px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: 'IDS_DIVISION_LEAVES_WITHOUT_YOU_INFO', _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="visible" value="isReady"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="320px"/>
				<left value="50%"/>
				<marginLeft value="-50%"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="instance" value="'FormationPlayersList'; isReady ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isReady &amp;&amp; (windowState != 2)"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: 'IDS_DIVISION_NOT_READY_COMMANDER_INFO', _maxWidth: 480 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccent"/>
			<bind name="class" value="'$FontColorWhite'"/>
			<bind name="text" value="'IDS_FORMATION_GO_TO_BATTLE_AFTER'"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextAccent"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="countdown" value="timer; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="countdownText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="22px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'UnreadyPlayerControls'; !(isCommander) &amp;&amp; !(isReady) ? {windowAppearLag: windowAppearLag, _windowState: windowState} : null"/>
			<bind name="instance" value="'CommanderControls'; isCommander ? {windowAppearLag: windowAppearLag, _windowState: windowState} : null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="FormationPlayersList">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'preBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="collectionRepeatDH" value="CC.preBattlePlayerSimple; 'BigFormationPlayerItem'; 'byPreBattle.' + preBattleId + '.preBattleMembers.sorted'; {_isCurPlayerCommander: isCommander, _formationType: 'division'}"/>
		</block>
	</block>
	<block className="CommanderControls">
		<bind name="transition" value="(_windowState == 1); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
		<bind name="style" value="'hitTest'; _windowState != 2"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '160px',
											_name: 'btn_cancel',
											_enabled: true,
											_isTransactionBtn: true,
											_label: 'IDS_CANCEL',
											_focusIndex: 0,
											_defaultFocused: true}"/>
		</block>
	</block>
	<block className="DHBigFormationPlayerItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'entityAccount'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'shipId'; ['entityAccount.preBattlePlayerSimple.evShipIdChanged']; entityAccount.preBattlePlayerSimple.shipId"/>
		<bind name="watchDH" value="'isReady'; ['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="watchDH" value="'isCommander'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'BigFormationPlayerItem'; { _isReady: isReady,
												_dbid: entityAccount.accountSimple.dbId,
												_isCommander: isCommander,
												_isCurrentPlayer: isSelf,
												_shipId: shipId,
												_formationType: 'division'}"/>
	</block>
	<block className="BigFormationPlayerItem">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="dataRefDH" value="'entityAcc'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'dataBaseId'; []; entityAcc ? entityAcc.accountSimple.dbId : _dbid"/>
		<bind name="watchDH" value="'isReady'; ['entityAcc.preBattlePlayerSimple.evIsReadyChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.isReady : _isReady"/>
		<bind name="watchDH" value="'isIgnored'; ['entityAcc.preBattlePlayerSimple.evIsIgnoredChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.isIgnored : false"/>
		<bind name="watchDH" value="'isCommander'; ['entityAcc.preBattlePlayerSimple.evIsCommanderChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.isCommander : _isCommander"/>
		<bind name="watchDH" value="'isSelf'; []; entityAcc ? entityAcc.accountSimple.isSelfPlayer : _isCurrentPlayer"/>
		<bind name="watchDH" value="'shipId'; ['entityAcc.preBattlePlayerSimple.evShipIdChanged']; entityAcc ? entityAcc.preBattlePlayerSimple.shipId : _shipId"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
			<marginBottom value="1px"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block className="inner_panel" type="native">
			<bind name="visible" value="isSelf"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
				<width value="100%"/>
				<marginLeft value="8px"/>
				<marginRight value="8px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'FormationPlayerIcon'; {isCommander: isCommander, isReady: isReady}"/>
				</block>
				<bind name="primaryEntityDH" value="'entityAccount'; CC.accountSimple; dataBaseId"/>
				<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
				<block type="text">
					<style>
						<marginLeft value="3px"/>
						<width value="90px"/>
						<multiline value="false"/>
						<noTranslate value="true"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="class" value="_formationType == 'division' || isSelf	? '$FontColorGolden'
																	: '$FontColorDefault'"/>
					<bind name="class" value="isSelf ? '$Bold' : '$None'"/>
					<bind name="text" value="nickName"/>
				</block>
				<block>
					<bind name="visible" value="isReady &amp;&amp; shipInfo"/>
					<style>
						<marginLeft value="6px"/>
						<marginTop value="2px"/>
					</style>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype}"/>
					</block>
					<block type="text">
						<style>
							<width value="90px"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextDefaultBold"/>
						<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<right value="0px"/>
					<marginTop value="2px"/>
					<position value="absolute"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="100"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="style" value="'alpha'; isIgnored ? 0.8 : 1"/>
					<bind name="class" value="(isReady	? '$FontColorGreen'
										: isIgnored	? '$FontColorDefault'
													: '$FontColorOrange')"/>
					<bind name="text" value="(isReady ? toUpperCase(tr('IDS_READY'))
									 : isIgnored	? toUpperCase(tr('IDS_DECLINED'))
													: toUpperCase(tr('IDS_NOT_READY')) )"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipItemChoosedRendererDH">
		<style>
			<marginLeft value="4px"/>
			<marginTop value="7px"/>
			<marginBottom value="5px"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'ShipTitleWithIconAndLevel'; {_shipID: _item.ship.id}"/>
	</block>
	<block className="ShipItemChooserListRendererDH">
		<style>
			<width value="100%"/>
			<height value="36px"/>
		</style>
		<bind name="dataRefDH" value="'shipEntity'; '$dataRef.ref'"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="_curItemIndex == $index"/>
		</block>
		<block>
			<style>
				<marginLeft value="4px"/>
				<marginTop value="5px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'ShipTitleWithIconAndLevel'; {_shipID: shipEntity.ship.id}"/>
		</block>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEvent.' + _onItemSelectedEvent); {_curItemIndex: $index}"/>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEventDublicate.' + _onItemSelectedEvent)"/>
	</block>

	<!-- modal_eco_boost_buy -->
	<block className="ModalWindowBuyEcoBoost">
		<bind name="soundOn" value="'addedToStage'; 'openYesNoConfirmation'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow';	{	_headerText:	$root._isCommonBoost	? 'IDS_MODAL_WINDOW_TITLE_ECOBOOST_PURCHASE' :
															$root._linkFromStorage	? 'IDS_MODAL_WINDOW_TITLE_MULTIBOOST_LINK'
																					: 'IDS_MODAL_WINDOW_TITLE_MULTIBOOST_PURCHASE',
											_hideDivider: true,
											_contentElement: 'ModalWindowBuyEcoBoostContent' }"/>
	</block>
	<block className="ModalWindowBuyEcoBoostContent">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'ecoBoostPriceEntity'; CC.priceComponent; $root._ecoBoostId + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'ecoBoostPrice'; ['ecoBoostPriceEntity.priceComponent.evChanged']; ecoBoostPriceEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource.credits"/>
		<bind name="watch" value="'priceDeficit'; ecoBoostPrice.finalPrice - ((ecoBoostPrice.currency == 'gold') ? accountGold : accountCredits)"/>
		<bind name="primaryEntityDH" value="'ecoBoostEntity'; CC.ecoBoost; $root._ecoBoostId"/>
		<bind name="collectionDH" value="CC.ecoBoost; 'MultiBoostsCollection'; 'availableToUser.' + 'byType.' + SC.Common.ECOBOOST_TYPES.LINKABLE"/>
		<bind name="watch" value="'multiBoost'; MultiBoostsCollection[0]"/>
		<bind name="watchDH" value="'multiBoostModifiers';	['multiBoost.attributes.evChanged'];	multiBoost.attributes.modifiers"/>
		<bind name="watchDH" value="'multiboostsAmount';		['multiBoost.countComponent.evUpdate'];	multiBoost.countComponent.value"/>
		<bind name="watch" value="'isBuyAvailable'; $root._isCommonBoost	? priceDeficit &lt;= 0
														: priceDeficit &lt;= 0 &amp;&amp; multiboostsAmount == 0"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'filtersByLevel'; 'byFilterType.' + 'level'"/>
		<bind name="collectionDesign" value="'DES_filtersByLevel'; 'levelfilters'; {'filter':isIn($entity.id, ecoBoostEntity.shipListRestrictions.selectedFilters)}; []"/>
		<bind name="collectionFields" value="'levelfilters'; ['shipFilterItem.field']"/>
		<bind name="watch" value="'hasLevelRestrictions'; levelfilters.length &gt; 0"/>
		<bind name="watchDH" value="'ecoBoostType'; ['ecoBoostEntity.ecoBoost.evUpdated']; ecoBoostEntity.ecoBoost.type"/>
		<bind name="watchDH" value="'name';					[];											ecoBoostEntity.ecoBoost.name"/>
		<bind name="watchDH" value="'attributesNegative';	['ecoBoostEntity.attributes.evChanged'];	ecoBoostEntity.attributes.negative"/>
		<bind name="watchDH" value="'attributesNeutral';		['ecoBoostEntity.attributes.evChanged'];	ecoBoostEntity.attributes.neutral"/>
		<bind name="watchDH" value="'attributesPositive';	['ecoBoostEntity.attributes.evChanged'];	ecoBoostEntity.attributes.positive"/>
		<bind name="watchDH" value="'boostSubType';			['ecoBoostEntity.ecoBoost.evUpdated'];		ecoBoostEntity.ecoBoost.subType"/>
		<bind name="watchDH" value="'rarity';				[];											ecoBoostEntity.ecoBoost.rarity"/>
		<bind name="watch" value="'headerText';	$root._isCommonBoost		? 'IDS_' + toUpperCase(name) :
								!$root._linkFromStorage		? subst('IDS_MULTIBOOST_WITH_SHIP_TITLE',  [], { shipName: toUpperCase(tr(shipInfo.nameIDS)) }) :
								hasLevelRestrictions		? subst('IDS_MULTIBOOST_WITH_LEVEL_TITLE', [], { levelRange: toRomanShipLevels(levelfilters_shipFilterItem_field) })
															: tr('IDS_MULTIBOOST_TITLE')"/>
		<bind name="watch" value="'subheaderText'; $root._isCommonBoost		? tr('IDS_ECONOMIC_BOOST_TYPE_EXPENDABLE_' + rarity)
															: 'IDS_ECONOMIC_BOOST_TYPE_MULTIBOOST'"/>
		<bind name="watch" value="'isCurrenciesPanelVisible'; !$root._linkFromStorage"/>
		<bind name="watch" value="'currenciesPanelPrices'; [{currency: ecoBoostPrice.currency, finalPrice: -ecoBoostPrice.finalPrice}]"/>
		<style>
			<align value="center"/>
			<width value="340px"/>
		</style>
		<block>
			<bind name="visible" value="!isCurrenciesPanelVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
				<marginTop value="-4px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isCurrenciesPanelVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 340 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="tooltip" value="$root._isCommonBoost ? 'EconomicBoostTooltip' : 'MultiBoostTooltip';	{	_id: $root._ecoBoostId,
																								_noMouseInstructions: true}"/>
			<bind name="instance" value="'ModalWindowSystemExpendableIconWithHeaderAndSubheader';	{	_headerIconType: 2,
																						_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																						_headerText: headerText,
																						_subheaderText: subheaderText,
																						_maxWidth: 300,
																						_data:	{ name: name,
																								  type: ecoBoostType,
																								  linking: $root._linkFromStorage} }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBuyAvailable"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; isBuyAvailable	?	{	_questionText: 'IDS_QUESTION_PURCHASE_AND_INSTALL_FOR',
																						_priceInfo: ecoBoostPrice }
																				:	null"/>
		</block>
		<block>
			<bind name="visible" value="$root._linkFromStorage"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_QUESTION_MULTIBOOST_LINK"/>
			</block>
			<block>
				<style>
					<marginLeft value="16px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: viewedShipId, _withFlag: false, _fontClass: '$TextDefaultBold25NM' }"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_QUESTION"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!$root._linkFromStorage &amp;&amp; priceDeficit &gt; 0"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<textColor value="0xFFFF9933"/>
				</style>
				<default_text value="IDS_NOT_ENOUGH_FUNDS"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!$root._linkFromStorage &amp;&amp; priceDeficit &gt; 0"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'PriceDeficit'; !$root._linkFromStorage &amp;&amp; priceDeficit &gt; 0	?	{ _large: true, priceInfo: { currency: ecoBoostPrice.currency }, _deficit: priceDeficit }
																								:	null"/>
		</block>
		<block>
			<bind name="visible" value="$root._linkFromStorage"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="380"/>
					<textAlign value="center"/>
				</style>
				<bind name="style" value="'textColor'; SC.Ui_styles.SERVICE_COLORS.ORANGE"/>
				<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; '[icon] ' + tr('IDS_WARNING_MULTIBOOST_BEFORE_LINK')"/>
			</block>
		</block>
		<block>
			<styleClass value="$InfoLineBoundaries"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<bind name="watch" value="'btnOkEnabled'; priceDeficit &lt;= 0 || $root._linkFromStorage"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<bind name="fade" value="btnOkEnabled; 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 129}; {alpha: 0, width: 0}"/>
					<style>
						<marginRight value="24px"/>
					</style>
					<bind name="soundSet" value="btnOkEnabled ? 'button_card' : ''"/>
					<bind name="instance" value="'DefaultButton';	{
														_width: '129px',
														_name: 'btn_ok',
														_enabled: btnOkEnabled,
														_isTransactionBtn: true,
														_request:	$root._isCommonBoost	? 'buyAndInstallEcoBoost' :
																	$root._linkFromStorage	? 'linkMultiboost'
																							: 'buyMultiboost',
														_requestParams: { boostId: $root._ecoBoostId },
														_label: 'IDS_YES',
														_focusIndex: 1,
														_defaultFocused: true
													}"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_label: btnOkEnabled ? 'IDS_NO' : 'IDS_CLOSE_UPPER_CASE',
												_width: '129px',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 2,
												_defaultFocused: false}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_elements_shipinfo -->
	<block className="ModalWindowShipPreview">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<block>
			<style>
				<width value="404px"/>
				<height value="155px"/>
				<backgroundImage value="url:../ships_silhouettes/ship_background.png"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="style" value="'backgroundImage'; 'url:../ships_silhouettes/' + shipInfo.shortName + '.png'"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../ships_silhouettes/ship_background_overlay.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'ModalWindowShipPreviewText'; { _shipId: _shipId, _width: '360px' }"/>
		</block>
	</block>
	<block className="ModalWindowShipPreviewText">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="instance" value="'ShipLineItemNM'; { _shipId: _shipId, _withFlag: true, _fontClass: '$TextDefaultBold21NM' }"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
			</style>
			<bind name="instance" value="'ShipClassLineItemNM'; { _shipId: _shipId, _fontClass : '$TextDefault17NM', _width: _width }"/>
		</block>
	</block>

	<!-- modal_event_intro -->
	<block className="EventIntroContent">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'battleTypeEntity'; CC.battleType; str(SC.Common.BATTLE_TYPES.EVENT_BATTLE) + '_' + str($root.eventId)"/>
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center|middle"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="watch" value="'isBattleType'; _logoStereotype == 'ModalBattleTypeRenderer'"/>
			<styleClass value="$IntroWindowAlignCenter"/>
			<style>
				<overflow value="hidden"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'height'; isBattleType ? '240px' : '288px'"/>
			<bind name="style" value="'align'; isBattleType ? 'center|bottom' : 'center'"/>
			<block>
				<bind name="visible" value="_logoStereotype"/>
				<bind name="instance" value="_logoStereotype; _logoStereotypeParams"/>
			</block>
			<block>
				<bind name="visible" value="_logoUrl"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="style" value="'width'; _logoWidth"/>
				<bind name="style" value="'height'; _logoHeight"/>
				<bind name="style" value="'backgroundImage'; _logoUrl"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$IntroWindowAlignCenter"/>
			<style>
				<marginTop value="48px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold50NM"/>
				<style>
					<width value="512px"/>
					<textAlign value="center"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="toUpperCase(tr(_title))"/>
				<params>
					<param name="name" value="eventIntroTitle"/>
				</params>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$IntroWindowAlignCenter"/>
			<style>
				<marginTop value="32px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault21NM"/>
				<style>
					<width value="640px"/>
					<textAlign value="center"/>
					<alpha value="0.75"/>
					<leading value="1"/>
				</style>
				<bind name="text" value="_subTitle"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$IntroWindowAlignCenter"/>
			<style>
				<marginTop value="48px"/>
			</style>
			<block>
				<params>
					<param name="name" value="eventIntroOkButton"/>
				</params>
				<bind name="watch" value="'isNew'; battleTypeEntity.hasComponent(CC.newItem)"/>
				<bind name="action" value="_okDispatch; isNew ? 'makeSeen' : null; { entityId: battleTypeEntity.id }"/>
				<bind name="action" value="_okDispatch; isNew ? 'featureSeen' : null; { featureIndex: battleTypeEntity.battleType.featureId }"/>
				<bind name="visible" value="_isNotCompleted"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '140px',
												_label: _okLabel || 'IDS_INTRO_MODAL_CHOICE_OK_DEFAULT',
												_request: _okRequest,
												_requestParams: _okRequestParams,
												_action: _okAction,
												_actionParams: _okActionParams,
												_dispatch: _okDispatch,
												_dispatchParams: _okDispatchParams,
												_enabled: true,
												_focusIndex: 1,
												_defaultFocused: true	}"/>
			</block>
			<block>
				<bind name="style" value="'marginLeft'; _isNotCompleted ? 24 : 0"/>
				<bind name="watch" value="'_skipLabel'; (_isNotCompleted ? _cancelLabel || 'IDS_CLOSE_UPPER_CASE' : 'IDS_CLOSE_UPPER_CASE')"/>
				<bind name="instance" value="'DefaultButton'; {  _width: '140px',
												_label: _skipLabel,
												_request: _cancelRequest,
												_requestParams: _cancelRequestParams,
												_action: _cancelAction,
												_actionParams: _cancelParams,
												_dispatch: _cancelDispatch,
												_dispatchParams: _cancelDispatchParams,
												_enabled: true,
												_focusIndex: 2	}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ModalWindowShipAcesIntro">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<params>
			<param name="name" value="window_ModalWindowShipAcesIntro"/>
		</params>
		<bind name="instance" value="'EventIntroContent'; {	_okLabel: 'IDS_SHIP_ACES_INTRO_CHOICE_OK',
											_okAction: 'navigateTo',
											_okActionParams: {	route: SC.Ui_windows.ROUTE.SSE_SHIP_ACES	},
											_okRequest: 'setSplashScreenViewed',
											_okRequestParams: { clickedButtonType: 'ingame' },
											_cancelRequest: 'setSplashScreenExited',
											_title: 'IDS_SHIP_ACES_COMMON_TITLE',
											_subTitle:	'IDS_SHIP_ACES_INTRO_SUBHEADER',
											_logoUrl: 'url:../sse/ship_aces/intro_modal_logo.png',
											_logoWidth: '240px',
											_logoHeight: '240px',
											_isNotCompleted: $root.isNotCompleted	}"/>
	</block>
	<block className="ModalWindowArcEventIntro">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<params>
			<param name="name" value="window_ModalWindowArcEventIntro"/>
		</params>
		<block>
			<bind name="appear" value="'startShow'; 0.2; 0.1; 	{alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; 	{alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="AnimatedBackground" type="ublock">
				<bind name="build!" value="{_selectedCategory: 'intro', _type: SC.Ui_styles.ANIMATED_BG.ARC_EVENT}"/>
			</block>
		</block>
		<bind name="instance" value="'EventIntroContent'; {	_okRequest: 'arcEventChooseSide',
											_okRequestParams: { clickedButtonType: 'ingame' },
											_cancelRequest: 'setSplashScreenExited',
											_cancelLabel: 'IDS_ARC_EVENT_INTRO_MODAL_CHOICE_CANCEL',
											_cancelAction: 'VSEventProxyUSS.refuseParticipation',
											_cancelParams: { state: false },
											_title: 'IDS_ARC_EVENT_COMMON_EVENT_TITLE',
											_subTitle:	'IDS_ARC_EVENT_INTRO_SUBHEADER',
											_logoStereotype: 'ArcEventLogo',
											_logoStereotypeParams: { _sideId: -1, _size: SC.Ui_styles.SIZE.LARGE },
											_isNotCompleted: $root.isNotCompleted != null ? $root.isNotCompleted : true	}"/>
	</block>
	<block className="ArcEventLogo">
		<block className="ArcEventSideStereotype" type="ublock">
			<bind name="build!" value="{ _sideId: _sideId, _size: _size}"/>
		</block>
	</block>
	<block className="ModalWindowEventBattleIntro">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<params>
			<param name="name" value="window_ModalWindowEventBattleIntro"/>
		</params>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'"/>
		<bind name="primaryEntityDH" value="'battleTypeEntity'; CC.battleType; str(SC.Common.BATTLE_TYPES.EVENT_BATTLE) + '_' + str($root.eventId)"/>
		<bind name="dispatch" value="'battleTypeChose'; 'delayedCloseIntroModalWindow'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.25"/>
		<bind name="dispatch" value="'battleTypeChose'; 'Tooltip.Close'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="request" value="'delayedCloseIntroModalWindow'; 'closeModalEventBattleIntro'; {}"/>
		<bind name="instance" value="'EventIntroContent'; {	_okAction: 'setBattleType',
											_okActionParams: { battleType: SC.Common.BATTLE_TYPES.EVENT_BATTLE, battleTypeGameParamId: $root.eventId},
											_okDispatch: 'battleTypeChose',
											_okRequest: 'setSplashScreenViewed',
											_okRequestParams: { clickedButtonType: 'ingame' },
											_cancelRequest: 'setSplashScreenExited',
											_title: 'IDS_' + toUpperCase($root.eventBattleName),
											_subTitle:	'IDS_' + toUpperCase($root.eventBattleName) + '_PROMO_DESCRIPTION',
											_logoStereotype: 'ModalBattleTypeRenderer',
											_logoStereotypeParams: {	_battleTypeEntityId: battleTypeEntity ? battleTypeEntity.id : null,
																		_forceVisible: true,
																		_dontShowSmokeAnimation: true,
																		_showBattleHeader: false,
																		_showBattleSubheader: false},
											_isNotCompleted: $root.isNotCompleted	}"/>
	</block>
	<block className="ModalWindowSnowflakesIntro">
		<bind name="instance" value="'EventIntroContent'; {	_okLabel: 'IDS_CONTINUE',
											_okRequest: 'snowflakesTakeBonuses',
											_okRequestParams: { clickedButtonType: 'ingame' },
											_cancelRequest: 'setSplashScreenExited',
											_title: 'IDS_SNOWFLAKES_COMMON_TITLE',
											_subTitle:	'IDS_SNOWFLAKES_INTRO_SUBHEADER',
											_logoUrl: 'url:../events/snowflakes/icon_intro.png',
											_logoWidth: '256px',
											_logoHeight: '256px',
											_isNotCompleted: true	}"/>
	</block>
	<block className="ModalWindowSnowflakesBackground">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="var" value="{lagEnded: false}"/>
		<bind name="catch" value="'lagAfterAddedToStage'; {lagEnded: true}"/>
		<bind name="firstEntityDH" value="'bonusTagSeasonEntity'; CC.bonusTagSeason; 'snowflakeSeasonCollection'"/>
		<bind name="watchDH" value="'snowflakesBackground'; ['bonusTagSeasonEntity.bonusTagSeason.evChanged']; bonusTagSeasonEntity.bonusTagSeason.background"/>
		<block>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="AnimatedBackground" type="ublock">
				<bind name="build!" value="{ _selectedCategory: snowflakesBackground,
							_type: SC.Ui_styles.ANIMATED_BG.ALMANAC_AND_SNOWFLAKES,
							_startShow: lagEnded }"/>
			</block>
		</block>
	</block>

	<!-- modal_extended_system_message -->
	<block className="ExtendedSystemLogWindow">
		<bind name="stageSize"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'PBSScreenActiveTabIndex'; userPrefs.PBSScreenActiveTabIndex == null ? SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT : userPrefs.PBSScreenActiveTabIndex"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'battleResults'; ['battleResultsDH.dataComponent.evDataChanged']; battleResultsDH.dataComponent.data"/>
		<bind name="watch" value="'gameData'; 			battleResults.game_data"/>
		<bind name="watch" value="'personal'; 			battleResults.personal"/>
		<bind name="watch" value="'teamResults'; 		battleResults.team_results"/>
		<bind name="watch" value="'creditsExperience'; 	battleResults.credits_experience"/>
		<bind name="watch" value="'result'; 				gameData.battle_result"/>
		<bind name="watch" value="'resultText'; result == SC.Battle.BATTLE_RESULT.WON_POSITION 	? subst('IDS_SYS_MSG_BATTLE_RESULTS_' + result, [], {_wonPosition: personal.wonPosition})
																				: UIStrings.getEndBattleResult(result)"/>
		<bind name="watch" value="'isSpectator'; gameData.isSpectator"/>
		<bind name="watch" value="'game_mode'; 	gameData.game_mode"/>
		<bind name="watch" value="'scenario'; 	gameData.scenario"/>
		<bind name="watch" value="'isPersonalResultsOnly';	scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'isBattleResultReasonHided'; false"/>
		<bind name="watch" value="'isTeamResultVisible'; 	game_mode != GameMode.BATTLE_CHALLENGES &amp;&amp; game_mode != GameMode.BATTLE_TRIALS"/>
		<bind name="watch" value="'isDetailedReportVisible'; game_mode != GameMode.BATTLE_CHALLENGES"/>
		<bind name="watch" value="'commentText'; UIStrings.getEndBattleComment(isBattleResultReasonHided || !battleResults ? {} : battleResults)"/>
		<bind name="watch" value="'validTabIndex';	isPersonalResultsOnly 	? SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT :
									isSpectator 			? SC.Common.POST_BATTLE_SCREEN_TAB.TEAM_REPORT
															: PBSScreenActiveTabIndex"/>
		<bind name="watch" value="'hideTabBars'; isSpectator || isPersonalResultsOnly"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="action" value="'addedToStage'; 'setUserPref'; { name: 'PBSScreenActiveTabIndex', value: SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT }"/>
		<styleClass value="$Fullsize"/>
		<block className="ExtendedSystemLogWindowBG">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="primaryEntityDH" value="'replayEntity'; CC.replayMetadata; $root.replayId"/>
			<bind name="watchDH" value="'replay'; ['replayEntity.replayMetadata.evUpdate']; replayEntity.replayMetadata"/>
			<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'mapInfoEntity'; CC.mapInfo; replay.mapName"/>
			<bind name="var" value="{replayBGPath: ('../maps_bg/' + mapInfoEntity.mapInfo.gpName + '.jpg')}"/>
			<block>
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<style>
					<backgroundSize value="cover"/>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:' + ($root.isOnReplayWindow ? replayBGPath : battleResults.game_data.map_path)"/>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="blurmap_low" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'startShow'; 0.3; 0.15; {alpha: 0}; {alpha: 0.3}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 0.3}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="contrast_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="visible" value="((contrast) &amp;&amp; (PBSScreenActiveTabIndex != SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT))"/>
				</block>
				<block className="modal_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<alpha value="1.6"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="stageSize"/>
		<bind name="watch" value="'PBSWidth'; 1077 + (stageWidth - 1280)*0.5"/>
		<bind name="watch" value="'PBSHeight'; 630 + (stageHeight - 720)*0.3"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="100%"/>
				<width value="1280:1077,1920:1420aw"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; stageWidth &gt;= 1440 ? '24px' : '12px'"/>
				<bind name="appear" value="'startShow'; 0.15; 0.1; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'TabBarResults'; hideTabBars 	? null
																: { _currentTabIndex: validTabIndex,
																	_isTeamResultVisible: isTeamResultVisible,
																	_isDetailedReportVisible: isDetailedReportVisible }"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<top value="7px"/>
						<right value="-60px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'startHide'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<style>
					<width value="100%"/>
					<height value="720:630,1080:738ah"/>
				</style>
				<bind name="style" value="'marginTop'; 10 + (stageHeight - 720) * 0.2"/>
				<bind name="child" value="validTabIndex; {	_data: {	personal: personal,
														game_data: gameData,
														credits_experience: creditsExperience,
														team_results: teamResults,
														player: battleResults.player,
														resultText: resultText,
														commentText: commentText,
														delay: 0.6,
														ribbonsDelay: 1.4,
														_PBSWidth: PBSWidth, _PBSHeight: PBSHeight, _isHistoryPBS: true
													}
										}; 'PersonalResultSection'; 'TeamResultSection'; 'DetailedReportSection'; 'EconomicsSection'"/>
			</block>
			<block>
				<bind name="style" value="'bottom'; 10 + (stageHeight - 720) * 0.15"/>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<align value="center"/>
				</style>
				<block>
					<bind name="appear" value="'startShow'; 0.15; 0.7; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
					<bind name="instance" value="'DefaultButton'; {	_label: $root.isOnReplayWindow	? 'IDS_BATTLE_STATS_BACK_TO_REPLAYS'
																					: 'IDS_BATTLE_STATS_BACK_TO_DOCK',
													_width: '164px',
													_name: 'btn_cancel',
													_enabled: true, 
													_focusIndex: 1,
													_defaultFocused: true}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="UnavailableExtendedSystemLogWindow">
		<styleClass value="$Fullsize"/>
		<block className="ExtendedSystemLogWindowBG">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="primaryEntityDH" value="'replayEntity'; CC.replayMetadata; $root.replayId"/>
			<bind name="watchDH" value="'replay'; ['replayEntity.replayMetadata.evUpdate']; replayEntity.replayMetadata"/>
			<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'mapInfoEntity'; CC.mapInfo; replay.mapName"/>
			<bind name="var" value="{replayBGPath: ('../maps_bg/' + mapInfoEntity.mapInfo.gpName + '.jpg')}"/>
			<block>
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<style>
					<backgroundSize value="cover"/>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:' + ($root.isOnReplayWindow ? replayBGPath : battleResults.game_data.map_path)"/>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="blurmap_low" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'startShow'; 0.3; 0.15; {alpha: 0}; {alpha: 0.3}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 0.3}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="contrast_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="visible" value="((contrast) &amp;&amp; (PBSScreenActiveTabIndex != SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT))"/>
				</block>
				<block className="modal_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<alpha value="1.6"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="stageSize"/>
		<block>
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<style>
				<position value="absolute"/>
				<top value="720:20,1080:50ah"/>
				<right value="1280:20,1920:46aw"/>
			</style>
			<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1280:1077,1920:1420aw"/>
				<height value="100%"/>
			</style>
			<block>
				<bind name="appear" value="'startShow'; 0.3; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<styleClass value="$MiddleVHAbsolutely"/>
				<block type="text">
					<styleClass value="$TextHeaderBold"/>
					<style>
						<textAlign value="center"/>
						<maxWidth value="350"/>
						<leading value="6"/>
					</style>
					<bind name="class" value="'$FontColorOrange'"/>
					<bind name="text" value="toUpperCase(tr('IDS_WARNING_BATTLESTATS_AVAILABILITY'))"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<align value="center"/>
				</style>
				<bind name="style" value="'bottom'; 10 + (stageHeight - 720) * 0.15"/>
				<block>
					<bind name="appear" value="'startShow'; 0.15; 0.3; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.07; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
					<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_BATTLE_STATS_BACK_TO_DOCK',
													_width: '164px',
													_name: 'btn_cancel',
													_enabled: true, 
													_focusIndex: 1,
													_defaultFocused: true}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ExtendedSystemLogWindowBG">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="primaryEntityDH" value="'replayEntity'; CC.replayMetadata; $root.replayId"/>
		<bind name="watchDH" value="'replay'; ['replayEntity.replayMetadata.evUpdate']; replayEntity.replayMetadata"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'mapInfoEntity'; CC.mapInfo; replay.mapName"/>
		<bind name="var" value="{replayBGPath: ('../maps_bg/' + mapInfoEntity.mapInfo.gpName + '.jpg')}"/>
		<block>
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundSize value="cover"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:' + ($root.isOnReplayWindow ? replayBGPath : battleResults.game_data.map_path)"/>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMapCustom">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="blurmap_low" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.3; 0.15; {alpha: 0}; {alpha: 0.3}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 0.3}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="((contrast) &amp;&amp; (PBSScreenActiveTabIndex != SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT))"/>
			</block>
			<block className="modal_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<alpha value="1.6"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_exterior_buy -->
	<block className="ModalWindowBuyCamouflage">
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; $root.exteriorId"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="instance" value="'SmallModalWindow';	{	_headerText:	exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE	? 'IDS_MODAL_WINDOW_TITLE_CAMOUFLAGE_PURCHASE' :
															exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.MSKIN			? 'IDS_MODAL_WINDOW_TITLE_PERMOFLAGE_LINK'
																															: 'IDS_MODAL_WINDOW_TITLE_PERMOFLAGE_PURCHASE',
											_headerWidth: '400px',
											_hideDivider: true,
											_contentElement: 'ModalWindowBuyCamouflageContent' }"/>
	</block>
	<block className="ModalWindowBuyCamouflageContent">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watch" value="'exteriorPriceName'; exteriorConfig.type != SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE 	? $root.exteriorId
																								: 'CAMOUFLAGE_GROUP_' + exteriorEntity.ownCamouflage.camoGroup"/>
		<bind name="primaryEntityDH" value="'exteriorPriceEntity'; CC.priceComponent; exteriorPriceName + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'exteriorPrice'; ['exteriorPriceEntity.priceComponent.evChanged']; exteriorPriceEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountResource'; ['resourceEntity.accountResource.evChangedGold','resourceEntity.accountResource.evChangedCredit']; resourceEntity.accountResource"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; playerShipId"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'permoflageFirstBuyGoldDiscount';	['shipEntity.ownShip.evPermoflageFirstBuyGoldDiscountChanged'];	shipEntity.ownShip.permoflageFirstBuyGoldDiscount"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; $root.exteriorId"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watch" value="'exteriorConfigNameUpper'; toUpperCase(exteriorConfig.name)"/>
		<bind name="watch" value="'isFirstBuyDiscount'; exteriorConfig.type != SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE &amp;&amp; permoflageFirstBuyGoldDiscount"/>
		<bind name="watch" value="'finalCamouflagePriceInfo'; isFirstBuyDiscount	? {	currency: SC.Common.CURRENCIES.GOLD,
																	finalPrice: (exteriorPrice.basePrice - permoflageFirstBuyGoldDiscount),
																	basePrice: exteriorPrice.basePrice,
																	type: 3}
																: exteriorPrice"/>
		<bind name="watch" value="'priceDeficit'; finalCamouflagePriceInfo.finalPrice - accountResource[finalCamouflagePriceInfo.currency]"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'filtersByLevel'; 'byFilterType.' + 'level'"/>
		<bind name="collectionDesign" value="'DES_filtersByLevel'; 'levelfilters'; {'filter':isIn($entity.id, exteriorEntity.shipListRestrictions.selectedFilters)}; []"/>
		<bind name="collectionFields" value="'levelfilters'; ['shipFilterItem.field']"/>
		<bind name="watch" value="'hasLevelRestrictions'; levelfilters.length &gt; 0"/>
		<bind name="watchDH" value="'hasColorSchemeConfig';		['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.hasColorSchemeConfig"/>
		<bind name="watchDH" value="'camoColorSchemes'; 			['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.camoColorSchemes"/>
		<bind name="watchDH" value="'previewCamoColorScheme';	['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.previewCamoColorScheme"/>
		<bind name="entityDH" value="'previewColorSchemeEntity'; previewCamoColorScheme"/>
		<bind name="watch" value="'previewColorSchemeIndex'; previewColorSchemeEntity.colorScheme.index"/>
		<bind name="watch" value="'isMSkin'; exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.MSKIN"/>
		<bind name="watch" value="'headerIconPath';	exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.CAMOUFLAGE 	? ('url:../exteriors/camouflages/' + exteriorConfig.name + '.png') :
									exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.PERMOFLAGE	? ('url:../exteriors/permoflages/' + exteriorConfig.name + '.png')
																									: ('url:../exteriors/skins/' + exteriorConfig.name + '.png')"/>
		<bind name="watch" value="'unifiedStatus'; SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'headerText';		exteriorConfig.type == SC.Exteriors.EXTERIOR_TYPE.PERMOFLAGE	? subst('IDS_EXTERIOR_NAME_WITH_SHIP',  [], { exteriorName: tr('IDS_' + exteriorConfigNameUpper), shipName: toUpperCase(tr(shipInfo.nameIDS)) }) :
									hasLevelRestrictions											? subst('IDS_EXTERIOR_NAME_WITH_LEVEL', [], { exteriorName: tr('IDS_' + exteriorConfigNameUpper), levelRange: toRomanShipLevels(levelfilters_shipFilterItem_field) })
																									: tr('IDS_' + exteriorConfigNameUpper)"/>
		<bind name="watch" value="'subheaderText'; 'IDS_EXTERIOR_TYPE_' + SC.Exteriors.EXTERIOR_TYPE.VALUE_TO_NAME[exteriorConfig.type]"/>
		<bind name="watch" value="'headerIconType'; camoColorSchemes.length &gt; 0	? 1
																: 0"/>
		<bind name="watch" value="'isBuyAvailable'; priceDeficit &lt;= 0 &amp;&amp; !isMSkin"/>
		<bind name="watch" value="'сurrenciesPanelPrices'; [{currency: finalCamouflagePriceInfo.currency, finalPrice: -finalCamouflagePriceInfo.finalPrice}]"/>
		<style>
			<align value="center"/>
			<width value="400px"/>
		</style>
		<block>
			<bind name="visible" value="!isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: сurrenciesPanelPrices, _width: 400 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="sharedTooltip" value="'CamouflageTooltip'; { _id: Number($root.exteriorId), _noMouseInstructions: true }"/>
			<bind name="instance" value="'ModalWindowSystemExpendableIconWithHeaderAndSubheader';	{	_headerIconType: headerIconType,
																						_imageUrl: headerIconPath,
																						_unifiedStatus: unifiedStatus,
																						_headerText: headerText,
																						_subheaderText: subheaderText,
																						_maxWidth: 300,
																						_data:	{	shipId: shipId,
																									exteriorType: exteriorConfig.type,
																									camouflageId: $root.exteriorId} }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBuyAvailable"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; isBuyAvailable	?	{	_questionText: 'IDS_QUESTION_PURCHASE_AND_INSTALL_FOR',
																						_priceInfo: finalCamouflagePriceInfo }
																				:	null"/>
		</block>
		<block>
			<bind name="visible" value="priceDeficit &gt; 0 || isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<bind name="style" value="'textColor';	priceDeficit &gt; 0	? SC.Ui_styles.SERVICE_COLORS.ORANGE
															: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
				<bind name="style" value="'alpha';		priceDeficit &gt; 0	? 1 : 0.9"/>
				<bind name="text" value="priceDeficit &gt; 0	? 'IDS_NOT_ENOUGH_FUNDS'
											: 'IDS_QUESTION_MSKIN_LINK'"/>
			</block>
			<block>
				<bind name="visible" value="isMSkin"/>
				<style>
					<marginLeft value="16px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: playerShipId, _withFlag: false, _fontClass: '$TextDefaultBold25NM' }"/>
			</block>
			<block>
				<bind name="visible" value="isMSkin"/>
				<block type="text">
					<styleClass value="$TextDefault25NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_QUESTION"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="priceDeficit &gt; 0 &amp;&amp; !isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'PriceDeficit'; priceDeficit &gt; 0 &amp;&amp; !isMSkin ? { _large: true, priceInfo: finalCamouflagePriceInfo, _deficit: priceDeficit } : null"/>
		</block>
		<block>
			<bind name="visible" value="isMSkin"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<maxWidth value="380"/>
					<textAlign value="center"/>
					<textColor value="0xFFFF9933"/>
				</style>
				<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; '[icon] ' + tr('IDS_WARNING_MSKIN_BEFORE_LINK')"/>
			</block>
		</block>
		<block>
			<styleClass value="$InfoLineBoundaries"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<bind name="watch" value="'btnOkEnabled'; priceDeficit &lt;= 0 || isMSkin"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<bind name="fade" value="btnOkEnabled; 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 129}; {alpha: 0, width: 0}"/>
					<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
					<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
					<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
					<bind name="watch" value="'previewExteriorId'; userPrefs.previewExteriorId"/>
					<bind name="action" value="'buyButtonClicked';	previewExteriorId	? 'setCompareInfo'
																		: null;
													{clear: true}"/>
					<bind name="action" value="'buyButtonClicked';	previewExteriorId	? 'setUserPref'
																		: null;
													{value: 0, name: 'previewExteriorId'}"/>
					<style>
						<width value="129px"/>
						<marginRight value="24px"/>
					</style>
					<bind name="instance" value="'DefaultButton';	{	_width: '129px',
														_name: 'btn_ok',
														_enabled: btnOkEnabled,
														_isTransactionBtn: true,
														_request: isMSkin	? 'installCamouflage'
																			: 'buyAndInstallCamouflage',
														_requestParams:	{	exteriorId: $root.exteriorId,
																			colorsSchemeIndex: hasColorSchemeConfig ? previewColorSchemeIndex
																													: null},
														_dispatch: 'buyButtonClicked',
														_label: 'IDS_YES',
														_focusIndex: 1,
														_defaultFocused: true }"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_label: btnOkEnabled ? 'IDS_NO' : 'IDS_CLOSE_UPPER_CASE',
												_width: '129px',
												_name: 'btn_cancel',
												_enabled: true, 
												_focusIndex: 2,
												_defaultFocused: false}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_feature_splash -->
	<block className="ModalWindowFeatureSplash">
		<params>
			<param name="name" value="window_ModalWindowFeatureSplash"/>
		</params>
		<bind name="watch" value="'activeOperationId'; $root.operationId"/>
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; activeOperationId"/>
		<bind name="primaryEntityDH" value="'battleTypeEntity'; CC.battleType; str(SC.Common.BATTLE_TYPES.PVE_BATTLE) + '_' + str(activeOperationId)"/>
		<bind name="var" value="{ windowApperaLag: 0.3 }"/>
		<styleClass value="$Fullsize"/>
		<bind name="dispatch" value="'battleTypeChose'; 'hideBattleTypesOnBattleTypeChose'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; 0.05"/>
		<bind name="dispatch" value="'battleTypeChose'; 'delayedCloseChooserModalWindow'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.25"/>
		<bind name="request" value="'delayedCloseChooserModalWindow'; 'closeModalSelectBattleType'; {}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap5" type="native">
				<bind name="appear" value="'startShow'; 0.15; 0.3; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.25; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; 0.3; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.25; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="contrast"/>
			</block>
			<block className="modal_panel" type="native">
				<style>
					<alpha value="0.7"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<paddingRight value="1280:20,1920:46aw"/>
				<paddingLeft value="1280:20,1920:46aw"/>
				<paddingBottom value="1280:20,1920:46aw"/>
				<paddingTop value="1280:20,1920:46aw"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<style>
						<position value="absolute"/>
						<top value="1px"/>
					</style>
					<bind name="instance" value="'BackButton'; {_text: 'IDS_RETURN_TO_DOCK'}"/>
					<bind name="name" value="'btn_cancel'"/>
					<bind name="input"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<right value="4px"/>
						<top value="9px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="toUpperCase(tr('IDS_NEW_OPERATION_AVAILABLE'))"/>
						<params>
							<param name="name" value="featureSplashHeader"/>
						</params>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginTop value="720:2,1080:4ah"/>
						</style>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<top value="18sh"/>
					<position value="absolute"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<block className="ModalBattleTypeRenderer" type="ublock">
						<bind name="build!" value="{_battleTypeEntityId: battleTypeEntity ? battleTypeEntity.id : null,
									_forceVisible: true,
									_dontShowSmokeAnimation: true,
									_showBattleSubheader: false}"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="700px"/>
						<marginTop value="16px"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowApperaLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="800px"/>
						<marginLeft value="-8px"/>
						<marginRight value="-8px"/>
						<marginTop value="1px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
							<height value="100%"/>
							<position value="absolute"/>
						</style>
						<block className="gradient_half_sphere" type="native">
							<style>
								<width value="100%"/>
								<height value="130%"/>
								<alpha value="0.6"/>
							</style>
						</block>
					</block>
					<block>
						<styleClass value="$MiddleAligned"/>
						<block type="text">
							<style>
								<width value="600px"/>
								<alpha value="0.75"/>
								<marginTop value="16px"/>
								<textAlign value="center"/>
							</style>
							<styleClass value="$TextDefault19NM"/>
							<bind name="text" value="tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_DESCRIPTION')"/>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_login_errors -->
	<block className="ModalWindowLoginErrors">
		<styleClass value="$FullsizeAbsolute"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMapCustom">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap3" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="var" value="{windowAppearLag: 2}"/>
		<bind name="appear" value="'startShow'; 0.3; 1; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.3; 0.45; {alpha: 1}; {alpha: 0}"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="contrast"/>
		</block>
		<block className="modal_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="var" value="{headerText:			$root.headerText			?	$root.headerText		: 'IDS_ERROR_HEADER_DEFAULT' }"/>
		<bind name="var" value="{descriptionText:	$root.descriptionText		?	$root.descriptionText	: 'IDS_DEFAULT_ERROR_TEXT' }"/>
		<bind name="var" value="{okButtonText:		$root.okButtonText			?	$root.okButtonText		: 'IDS_LOGIN_CLIENT_ERROR_EXIT_BUTTON' }"/>
		<bind name="var" value="{okButtonAction:		$root.okButtonAction		?	$root.okButtonAction	: 'exitGame' }"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$EyeLevelVAligned"/>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'ModalWindowHeaderOptionalIcon'; { _header: headerText, _headerWidth: '600px', _showIcon: true, _showInnerCloseButton: false }"/>
			</block>
			<block>
				<style>
					<marginTop value="24px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<block type="text">
					<style>
						<width value="600px"/>
						<marginBottom value="32px"/>
						<textAlign value="center"/>
						<alpha value="0.7"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<bind name="text" value="descriptionText"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginRight value="-12px"/>
						<marginLeft value="-12px"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="16px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_label: okButtonText,
													_enabled: true,
													_action: okButtonAction,
													_focusIndex: 0,
													_defaultFocused: true}"/>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_master_changer -->
	<block className="ModalMasterChanger">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ModalMasterChangerContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="ModalMasterChangerContent">
		<bind name="firstEntityDH" value="'masterChangedEntity'; CC.masterChanger"/>
		<bind name="watchDH" value="'countBattles'; ['masterChangedEntity.masterChanger.evCountBattlesChanged']; masterChangedEntity.masterChanger.countBattles"/>
		<bind name="watchDH" value="'lastBattleTimestamp'; ['masterChangedEntity.masterChanger.evLastBattleTimestampChanged']; masterChangedEntity.masterChanger.lastBattleTimestamp"/>
		<bind name="var" value="{windowAppearLag: 0.1}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="540px"/>
				<top value="40%"/>
				<marginTop value="-50%"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'ModalWindowHeader'; { _header: toUpperCase(tr('IDS_SERVER_SWITCH')), _headerWidth: '540px', _showInnerCloseButton:true }"/>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
					<width value="100%"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<style>
							<maxWidth value="526"/>
							<textAlign value="center"/>
							<marginBottom value="12px"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="class" value="'$FontColorBlueish'"/>
						<default_text value="IDS_INSTRUCTION_SERVER_SWITCH"/>
					</block>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<height value="150px"/>
					</style>
					<block>
						<bind name="fade" value="countBattles &gt; 0; 0.07; {alpha: 0}; {alpha: 1}"/>
						<style>
							<width value="100%"/>
						</style>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
							<styleClass value="$MiddleAligned"/>
							<style>
								<marginBottom value="6px"/>
								<marginTop value="12px"/>
							</style>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_SERVER_SWITCH_TIMER'}"/>
							<bind name="countdown" value="lastBattleTimestamp; 'countdownText'; 'mm:ss'"/>
							<block type="text">
								<style>
									<width value="138px"/>
								</style>
								<styleClass value="$TextDefaultBold"/>
								<bind name="class" value="'$FontAccentSize1'"/>
								<bind name="text" value="countdownText"/>
								<bind name="name" value="'waiting_time'"/>
							</block>
						</block>
						<block>
							<style>
								<width value="100%"/>
							</style>
							<block>
								<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
								<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_SERVER_SWITCH_BATTLES'}"/>
								<styleClass value="$MiddleAligned"/>
								<style>
									<marginBottom value="18px"/>
								</style>
								<block type="text">
									<styleClass value="$TextAccent"/>
									<bind name="class" value="'$FontColorWhite'"/>
									<default_text value="IDS_UNFINISHED_BATTLES_COLON"/>
								</block>
								<block type="text">
									<styleClass value="$TextAccentBold"/>
									<bind name="class" value="'$FontColorWhite'"/>
									<bind name="name" value="'battles_to_end'"/>
									<bind name="text" value="countBattles"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
						</block>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<styleClass value="$Fullsize"/>
						<bind name="fade" value="countBattles == 0; 0.3; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}; 3; 0.15"/>
						<block type="text">
							<styleClass value="$MiddleAligned"/>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$TextAccent"/>
							<bind name="class" value="'$FontColorWhite'"/>
							<default_text value="IDS_TRANSFER_IN_PROGRESS"/>
						</block>
					</block>
					<block>
						<style>
							<position value="absolute"/>
							<width value="100%"/>
							<bottom value="0"/>
						</style>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_module_purchase_install -->
	<block className="ModalWindowPurchaseAndInstallModule">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_PURCHASE_AND_INSTALL_MODULE_HEADER', _contentElement: 'ModalWindowPurchaseAndInstallModuleContent'}"/>
	</block>
	<block className="ModalWindowPurchaseAndInstallModuleContent">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'moduleEntity'; CC.module; $root.modulePK"/>
		<bind name="watchDH" value="'moduleInfo'; ['moduleEntity.module.evUpdated']; moduleEntity.module"/>
		<bind name="watch" value="'buttonRequest'; 'purchaseAndInstallModule'"/>
		<bind name="watch" value="'priceInfo'; {	finalPrice:	moduleInfo.totalCostCR,
								currency:	SC.Common.CURRENCIES.CREDITS }"/>
		<bind name="watch" value="'currenciesPanelPrices'; [{currency: SC.Common.CURRENCIES.CREDITS, finalPrice: -moduleInfo.totalCostCR}]"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource.credits"/>
		<bind name="watch" value="'priceDeficit'; priceInfo.finalPrice - accountCredits"/>
		<bind name="watch" value="'isPriceDeficit'; priceDeficit &gt; 0"/>
		<bind name="action" value="'addedToStage'; 'setModalPreviewData'; {moduleId: moduleInfo.id}"/>
		<bind name="action" value="'removedFromStage'; 'setModalPreviewData'; {moduleId: null}"/>
		<style>
			<align value="center"/>
			<width value="350px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 350 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<align value="center"/>
				<width value="100%"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="instance" value="'ModuleElementModalWindow'; { _modulePK: $root.modulePK, _maxWidth: 350 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="ShipIntegralParams" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{ _showOnlyDiff: true }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="8px"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; {	_questionText: 'IDS_QUESTION_PURCHASE_AND_INSTALL_FOR', 
																_priceInfo: priceInfo}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="isPriceDeficit"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<textColor value="0xFFFF9933"/>
				</style>
				<default_text value="IDS_NOT_ENOUGH_FUNDS"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="isPriceDeficit"/>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'PriceDeficit'; { _large: true, priceInfo: { currency: priceInfo.currency }, _deficit: priceDeficit }"/>
		</block>
		<block>
			<styleClass value="$InfoLineBoundaries"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton';	{	_width: '129px',
													_name: 'btn_ok',
													_enabled: !isPriceDeficit,
													_isTransactionBtn: true,
													_request: 'purchaseAndInstallModule',
													_requestParams: { shipId: playerShipId, moduleId: moduleInfo.id },
													_label: 'IDS_YES',
													_focusIndex: 1,
													_defaultFocused: true
												}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_NO',
												_name: 'btn_cancel',
												_defaultFocused: false,
												_focusIndex: 2}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_module_research -->
	<block className="ModalWindowResearchModule">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_RESEARCH_MODULE_HEADER',
										_hideDivider: true,
										_contentElement: 'ModalWindowResearchModuleContent'}"/>
	</block>
	<block className="ModalWindowResearchModuleContent">
		<bind name="primaryEntityDH" value="'moduleExplorePriceEntity'; CC.priceComponent; moduleInfo.id + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'moduleExplorePrice'; ['moduleExplorePriceEntity.priceComponent.evChanged']; moduleExplorePriceEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'ownShipExp';	['ownShipEntity.ownShip.evUpdateConfig'];	ownShipEntity.ownShip.exp"/>
		<bind name="primaryEntityDH" value="'moduleEntity'; CC.module; $root.modulePK"/>
		<bind name="watchDH" value="'moduleInfo'; ['moduleEntity.module.evUpdated']; moduleEntity.module"/>
		<bind name="watchDH" value="'moduleCostFreeXP';	['moduleEntity.module.evUpdated'];	moduleEntity.module.costFreeXP"/>
		<bind name="watch" value="'questionText'; moduleInfo.totalCostXP &gt; 0		? 'IDS_QUESTION_RESEARCH_FOR'
																: 'IDS_QUESTION_RESEARCH_FOR_FREE'"/>
		<bind name="watch" value="'priceInfo'; moduleInfo.totalCostXP - moduleCostFreeXP &gt; 0	?	{	finalPrice: moduleInfo.totalCostXP - moduleCostFreeXP,
																					currency: SC.Common.CURRENCIES.XP }
																			: null"/>
		<bind name="watch" value="'optionalPriceInfo'; moduleCostFreeXP &gt; 0	?	{	finalPrice: moduleCostFreeXP,
																	currency: SC.Common.CURRENCIES.FREE_XP }
															: null"/>
		<bind name="action" value="'addedToStage'; 'setModalPreviewData'; {moduleId: moduleInfo.id}"/>
		<bind name="action" value="'removedFromStage'; 'setModalPreviewData'; {moduleId: null}"/>
		<bind name="watch" value="'isUsedFreeXP'; optionalPriceInfo.finalPrice != null &amp;&amp; optionalPriceInfo.finalPrice != 0"/>
		<bind name="watch" value="'currenciesPanelPrices'; isUsedFreeXP	? [	{currency: SC.Common.CURRENCIES.XP, finalPrice: priceInfo ? -priceInfo.finalPrice : 0, expPreviousShip: ownShipExp ? ownShipExp : 0},
															{currency: SC.Common.CURRENCIES.FREE_XP, finalPrice: optionalPriceInfo ? -optionalPriceInfo.finalPrice : 0}]
														: [ {currency: SC.Common.CURRENCIES.XP, finalPrice: priceInfo ? -priceInfo.finalPrice : 0, expPreviousShip: ownShipExp ? ownShipExp : 0}]"/>
		<style>
			<align value="center"/>
			<width value="350px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 350 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="style" value="'align'; moduleInfo.dependentModules.length &gt; 0 ? 'left' : 'center'"/>
			<bind name="instance" value="'ModuleElementModalWindow';	{ _modulePK:	$root.modulePK,
													  _maxWidth:	318 }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="moduleInfo.dependentModules.length &gt; 0"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginLeft value="13px"/>
				<marginRight value="16px"/>
				<marginTop value="-12px"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="instance" value="'PriceTagWithLabel'; { priceInfo: moduleExplorePrice, _label: 'IDS_RESEARCH_COST', _showDiscountTag:true, _width: '100%'}"/>
		</block>
		<block>
			<bind name="visible" value="moduleInfo.dependentModules.length &gt; 0"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'ModuleDependenciesBlock'; moduleInfo.dependentModules.length &gt; 0	? {	_type: [0,'research'],
																								_dependentModules: moduleInfo.dependentModules}
																							: null"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="ShipIntegralParams" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{ _showOnlyDiff: true }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="8px"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; {	_questionText: questionText, 
																_priceInfo: priceInfo,
																_optionalPriceInfo: optionalPriceInfo }"/>
		</block>
		<block>
			<bind name="instance" value="'ModalWindowOkCancel'; {	_appearOrder: 4,
													_focusBtn: 1,
													_request: 'researchModule',
													_requestParams: { shipId: viewedShipId, moduleId: moduleInfo.id }}"/>
		</block>
	</block>
	<block className="ModuleDependenciesBlock">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginLeft value="16px"/>
				<marginRight value="12px"/>
				<alpha value="0.9"/>
				<marginBottom value="8px"/>
			</style>
			<default_text value="IDS_WILL_BE_ALSO_RESEARCHED"/>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/inner_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="8px"/>
					<paddingBottom value="8px"/>
				</style>
				<bind name="repeat" value="_dependentModules; 'DependencyRepeatItem'; {}"/>
			</block>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
	</block>
	<block className="DependencyRepeatItem">
		<style>
			<width value="100%"/>
			<marginLeft value="16px"/>
			<marginRight value="16px"/>
			<marginTop value="4px"/>
			<marginBottom value="4px"/>
		</style>
		<bind name="instance" value="'ResearchDependenciesListItem'; { _moduleDataArray: dataArray }"/>
	</block>
	<block className="ResearchDependenciesListItem">
		<bind name="primaryEntityDH" value="'moduleExplorePriceEntity'; CC.priceComponent; _moduleDataArray[1] + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'moduleExplorePrice'; ['moduleExplorePriceEntity.priceComponent.evChanged']; moduleExplorePriceEntity.priceComponent"/>
		<bind name="watch" value="'modulePK'; _moduleDataArray[3] + '_' + _moduleDataArray[5]"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<block className="ModalWindowSystemExpendableIconWithHeaderAndSubheader" type="ublock">
				<bind name="build!" value="{	_headerIconType:	'ModalWindowSystemModuleIcon',
							_imageWidth:		60,
							_imageHeight:		60,
							_maxWidth:			240,
							_headerText:		toUpperCase(_moduleDataArray[2]),
							_subheaderText:		toUpperCase('IDS_MODULE_TYPE' + _moduleDataArray[3]),
							_unifiedStatus:		SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
							_data:				{ moduleInfoType:	_moduleDataArray[3],
												  isExplored:		false } }"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="tooltip" value="'ModuleTooltip'; {_modulePK: modulePK, _noMouseInstructions: true}"/>
			</block>
		</block>
		<block>
			<style>
				<align value="right|middle"/>
				<position value="absolute"/>
				<right value="0px"/>
				<height value="100%"/>
			</style>
			<block>
				<bind name="instance" value="'PriceTag'; { priceInfo: moduleExplorePrice, _showDiscountTag: true}"/>
			</block>
		</block>
	</block>

	<!-- modal_pve_results -->
	<block className="ModalWindowPVEResults">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_PVE_OPERATION_RESULTS', _contentElement: 'ModalWindowPVEResultsContent'}"/>
	</block>
	<block className="ModalWindowPVEResultsContent">
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'private'; []; battleResultsDH.dataComponent.data.personal"/>
		<bind name="watchDH" value="'game_data'; []; battleResultsDH.dataComponent.data.game_data"/>
		<bind name="watch" value="'_difficulty'; private.pve_details.difficulty"/>
		<bind name="watch" value="'_operationId'; private.pve_details.operationId"/>
		<bind name="watch" value="'_secondaryTasks'; game_data.battle_logic_info.tasks"/>
		<bind name="watch" value="'isWinner'; private.team_id == game_data.winner_team_id"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; _operationId"/>
		<bind name="watch" value="'opNameString'; (tr('IDS_' + toUpperCase(game_data.scenario) + '_NAME_RESULT_SCREEN'))"/>
		<bind name="watch" value="'operationStatusIDS'; isWinner == true ? 'IDS_PVE_OPERATION_RESULTS_DONE' : 'IDS_PVE_OPERATION_RESULTS_UNDONE'"/>
		<style>
			<width value="850px"/>
			<align value="center"/>
			<paddingTop value="32px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="32px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold36NM"/>
				<style>
					<width value="800px"/>
					<textAlign value="center"/>
					<leading value="-3"/>
				</style>
				<bind name="class" value="isWinner ? '$FontColorGolden' : '$FontColorStrongBlueish'"/>
				<bind name="text" value="subst(operationStatusIDS, {opName: opNameString}) "/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="repeat" value="_secondaryTasks; 'PVETaskResultElement'; {	_isWinner: isWinner}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block>
				<style>
					<marginTop value="40px"/>
				</style>
				<block className="DefaultButtonModal">
					<style>
						<marginBottom value="6px"/>
						<marginTop value="6px"/>
					</style>
					<bind name="name" value="'Modal_window_action_Button' + 'IDS_CLOSE_UPPER_CASE'"/>
					<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_focusIndex: 1,
													_defaultFocused: false}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="PVETaskResultElement">
		<bind name="visible" value="category == 2"/>
		<style>
			<flow value="horizontal"/>
			<marginBottom value="16"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<marginTop value="3px"/>
			</style>
			<bind name="style" value="'colorMatrixFilter'; _isWinner == true	? '' : '0 -100 0 0'"/>
			<block className="icon_task_status" type="native">
				<bind name="gotoAndStop!" value="status == TaskStatus.SUCCESS	? 'success'
																: 'fail'"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextDefault19NM"/>
			<style>
				<maxWidth value="500"/>
			</style>
			<bind name="style" value="'alpha'; status == TaskStatus.SUCCESS ? 0.7 : 0.4 "/>
			<bind name="text" value="text"/>
		</block>
	</block>

	<!-- modal_rank_changed -->
	<block className="ModalWindowRankChanged">
		<bind name="name" value="'ModalWindowRankUp'"/>
		<bind name="primaryEntityDH" value="'postbattleRankInfoEntity'; CC.postBattleRankInfo; $root.arenaId"/>
		<bind name="watch" value="'changeRanks';		postbattleRankInfoEntity.postBattleRankInfo.changeRanks"/>
		<bind name="watch" value="'oldInfo';			postbattleRankInfoEntity.postBattleRankInfo.oldInfo"/>
		<bind name="watch" value="'newInfo';			postbattleRankInfoEntity.postBattleRankInfo.newInfo"/>
		<bind name="watch" value="'battleResult';	postbattleRankInfoEntity.postBattleRankInfo.battleResult"/>
		<bind name="watch" value="'currentLeague';					newInfo.league"/>
		<bind name="watch" value="'currentRank';						newInfo.rank"/>
		<bind name="watch" value="'currentStars';					newInfo.stars"/>
		<bind name="watch" value="'playerVictoryCount';				newInfo.victories"/>
		<bind name="watch" value="'currentLeagueRewardVictories';			postbattleRankInfoEntity.postBattleRankInfo.victories"/>
		<bind name="watch" value="'currentLeagueVictoryRewards';				postbattleRankInfoEntity.postBattleRankInfo.victoryRewards"/>
		<bind name="watch" value="'currentLeagueVictoryRewardCategories';	postbattleRankInfoEntity.postBattleRankInfo.victoryRewardsCategories"/>
		<bind name="watch" value="'currentLeagueVictoryRewardsProgress';		postbattleRankInfoEntity.postBattleRankInfo.victoryRewardsProgress"/>
		<bind name="watch" value="'rewardsTopRank';							postbattleRankInfoEntity.postBattleRankInfo.firstRankRewards"/>
		<bind name="watch" value="'rewardCategoryTopRank';					postbattleRankInfoEntity.postBattleRankInfo.firstRankRewardsCategory"/>
		<bind name="watch" value="'rewardsQualification';					postbattleRankInfoEntity.postBattleRankInfo.qualificationRewards"/>
		<bind name="watch" value="'rewardCategoryQualification';				postbattleRankInfoEntity.postBattleRankInfo.qualificationRewardsCategory"/>
		<bind name="watch" value="'remainingRewards';				postbattleRankInfoEntity.postBattleRankInfo.remainingRewards"/>
		<bind name="watch" value="'remainingVictories';				postbattleRankInfoEntity.postBattleRankInfo.remainingVictories"/>
		<bind name="watch" value="'remainingRewardsCategories';		postbattleRankInfoEntity.postBattleRankInfo.remainingRewardsCategories"/>
		<bind name="primaryEntityDH" value="'currentLeagueEntity'; CC.rankLeague; currentLeague"/>
		<bind name="watch" value="'currentVictoryRewardIndex';	indexOf(playerVictoryCount, currentLeagueRewardVictories)"/>
		<bind name="watch" value="'nextVictoryRewardIndex';		indexOf(nextRewardedVictoryCount, currentLeagueRewardVictories)"/>
		<bind name="watch" value="'victoryRewardProgressBarValueMin'; playerVictoryCount - previousRewardedVictoryCount"/>
		<bind name="watch" value="'isVictoryRewardProgressIncreased'; battleResult == SC.Battle.BATTLE_RESULT.VICTORY"/>
		<bind name="watch" value="'categoryRewardsVictories'; currentLeagueRewardVictories [currentLeagueRewardVictories.length - 1] ? currentLeagueRewardVictories [currentLeagueRewardVictories.length - 1] : 0"/>
		<bind name="watch" value="'hasReceivedAllVictoryRewards';	playerVictoryCount &gt;= categoryRewardsVictories"/>
		<bind name="watch" value="'isFinalVictoryReward';			playerVictoryCount == currentLeagueRewardVictories [currentLeagueRewardVictories.length - 1] &amp;&amp; isVictoryRewardProgressIncreased"/>
		<bind name="watch" value="'isOtherRewardAvailable';	isSeasonEnded &amp;&amp; rewardsSeasonParticipation.length ||
											isQualificationPassed ||
											isFirstRankReached ||
											isTopRankReached ||
											isFinalVictoryReward"/>
		<bind name="watch" value="'isAnyRewardAvailable'; (isVictoryRewardProgressIncreased || isOtherRewardAvailable) &amp;&amp; !isAfk"/>
		<bind name="watch" value="'isAfk';	isVictoryRewardProgressIncreased &amp;&amp;
							oldInfo.stars == newInfo.stars &amp;&amp;
							newInfo.stars &lt; starsToNextRank"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason"/>
		<bind name="watchDH" value="'seasonTitle';			['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.title"/>
		<bind name="watchDH" value="'rankSeasonStage';		['rankSeasonEntity.rankSeason.evStageChanged'];	rankSeasonEntity.rankSeason.stage"/>
		<bind name="watch" value="'isSeamlessRanked'; rankSeasonEntity.rankSeason.seamlessLeagues"/>
		<bind name="watch" value="'isRankSeasonActive';		rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.ACTIVE"/>
		<bind name="watch" value="'isRankSeasonInactive';	rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.INACTIVE"/>
		<bind name="watch" value="'isRankSeasonFinished';	rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.FINISHED || rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.CLOSED"/>
		<bind name="watch" value="'isRankSeasonWaiting';		rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.WAITING"/>
		<bind name="watchDH" value="'rankSeasonStartTime';	['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.startTime"/>
		<bind name="watchDH" value="'rankSeasonFinishTime';	['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.finishTime"/>
		<bind name="watchDH" value="'currentSprintId';		['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.currentSprintId"/>
		<bind name="watchDH" value="'previousSprintId';		['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.previousSprintId"/>
		<bind name="watchDH" value="'nextSprintId';			['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.nextSprintId"/>
		<bind name="watch" value="'hasNextSprint'; nextSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT"/>
		<bind name="watch" value="'isActiveSprint'; currentSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT "/>
		<bind name="watch" value="'isSprintFinished'; !isActiveSprint &amp;&amp; hasNextSprint"/>
		<bind name="watch" value="'isPauseBetweenSprints'; isRankSeasonActive &amp;&amp; isSprintFinished &amp;&amp; !isSprintOrSeasonSummaryHidden"/>
		<bind name="primaryEntityDH" value="'rankInfoEntity'; CC.rankInfo; currentRank + '_' + currentLeague"/>
		<bind name="watch" value="'starsToNextRank'; rankInfoEntity.rankInfo.starsToNext"/>
		<bind name="primaryEntityDH" value="'nextSprintEntity'; CC.rankSprint; nextSprintId"/>
		<bind name="watch" value="'nextSprintStartTime'; nextSprintEntity.rankSprint.startTime"/>
		<bind name="firstEntityDH" value="'primeTimeEntity'; CC.primeTime"/>
		<bind name="watchDH" value="'primeTimeStartTime';	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeStartTime"/>
		<bind name="watchDH" value="'primeTimeFinishTime';	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift'; 		['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.daylightshift"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeftToStart';		primeTimeStartTime	- serverTime - daylightshift"/>
		<bind name="watch" value="'timeLeftToFinish';	primeTimeFinishTime	- serverTime - daylightshift"/>
		<bind name="watch" value="'isStarEarnCondition'; oldInfo.stars &lt; newInfo.stars"/>
		<bind name="watch" value="'isStarLossCondition'; oldInfo.stars &gt; newInfo.stars"/>
		<bind name="watch" value="'isOutOfStars';	changeRanks.length == 1 &amp;&amp;
									oldInfo.stars == newInfo.stars &amp;&amp; oldInfo.stars == 0"/>
		<bind name="var" value="{windowAppearLag: 0.4}"/>
		<bind name="var" value="{RANKED_STATES: {	SEASON_ENDED: 			'RANKED_STATE_SEASON_ENDED',
									SPRINT_ENDED:			'RANKED_STATE_SPRINT_ENDED',
									QUALIFICATION_PASSED:	'RANKED_STATE_QUALIFICATION_PASSED',
									FIRST_RANK_REACHED:		'RANKED_STATE_FIRST_RANK_REACHED',
									TOP_RANK_REACHED:		'RANKED_STATE_TOP_RANK_REACHED',
									RANK_CHANGED:			'RANKED_STATE_RANK_CHANGED',
									STARS_CHANGED:			'RANKED_STATE_STARS_CHANGED',
									STAR_SAVED:				'RANKED_STATE_STAR_SAVED'	}}"/>
		<bind name="watch" value="'isTopRank';	currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
		<bind name="watch" value="'isTopLeague';	currentLeague == SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE"/>
		<bind name="watch" value="'windowState';
		changeRanks.length == 2	? 	isTopRank &amp;&amp; isTopLeague					? RANKED_STATES.TOP_RANK_REACHED :
									isTopRank									? RANKED_STATES.FIRST_RANK_REACHED
																				: RANKED_STATES.RANK_CHANGED :
		changeRanks.length == 1	? 	isTopRank									?	currentStars == starsToNextRank				? RANKED_STATES.QUALIFICATION_PASSED :
																					isStarEarnCondition || isStarLossCondition	? RANKED_STATES.STARS_CHANGED
																																: RANKED_STATES.STAR_SAVED :
									isStarEarnCondition || isStarLossCondition	? RANKED_STATES.STARS_CHANGED
																				: RANKED_STATES.STAR_SAVED
								: 'RANKED_STATE_UNKNOWN'"/>
		<bind name="watch" value="'isQualificationPassed';	windowState == RANKED_STATES.QUALIFICATION_PASSED"/>
		<bind name="watch" value="'isFirstRankReached';		windowState == RANKED_STATES.FIRST_RANK_REACHED"/>
		<bind name="watch" value="'isTopRankReached';		windowState == RANKED_STATES.TOP_RANK_REACHED"/>
		<bind name="watch" value="'isRankChanged';			windowState == RANKED_STATES.RANK_CHANGED ||
											windowState == RANKED_STATES.FIRST_RANK_REACHED ||
											windowState == RANKED_STATES.TOP_RANK_REACHED"/>
		<bind name="watch" value="'isStarsChanged';			windowState == RANKED_STATES.STARS_CHANGED"/>
		<bind name="watch" value="'isRemainingRewardAvailable'; remainingRewards.length &gt; 0"/>
		<bind name="watch" value="'rankStereotypeHeaderText';
		isQualificationPassed	? 'IDS_RANKED_QUALIFICATION_PASSED_EXCLAMATION' :
		isRankChanged			? isVictoryRewardProgressIncreased	? isTopRank	? 'IDS_TOP_RANK'
																				: 'IDS_NEW_RANK'
																	: 'IDS_OLD_RANK' :
		isStarsChanged			? isVictoryRewardProgressIncreased	? 'IDS_RANK_STAR_EARNED'
																	: 'IDS_RANK_STAR_LOST' :
		isOutOfStars			? 'IDS_RANK_NO_CHANGES'
								: 'IDS_RANK_STAR_SAVED'"/>
		<bind name="watch" value="'rankStereotypeSubheaderText'; isQualificationPassed	?	tr('IDS_RANKED_NEXT_LEAGUE_DETERMINED_' +
																			(isSeamlessRanked ? 'SEAMLESS_' : '') + 
																			(currentLeague - 1))
																		:	hasNextSprint	? 'IDS_RANK_BATTLES_FIRST_RANK_REACHED'
																							: 'IDS_RANK_BATTLES_LAST_FIRST_RANK_REACHED'"/>
		<bind name="var" value="{	WAIT_FOR_ANNOUNCEMENT:	'WAIT_FOR_ANNOUNCEMENT',
					SEASON_ANNOUNCEMENT:	'SEASON_ANNOUNCEMENT',
					SPRINT_ANNOUNCEMENT:	'SPRINT_ANNOUNCEMENT',
					PRIME_TIME_ACTIVE:		'PRIME_TIME_ACTIVE',
					PRIME_TIME_INACTIVE:	'PRIME_TIME_INACTIVE'	}"/>
		<bind name="watch" value="'periodStatus';	isRankSeasonFinished ||
									(!isActiveSprint &amp;&amp; !hasNextSprint)							? WAIT_FOR_ANNOUNCEMENT :
									isRankSeasonInactive || isRankSeasonWaiting					? SEASON_ANNOUNCEMENT :
									isQualificationPassed &amp;&amp; hasNextSprint || isSprintFinished	? SPRINT_ANNOUNCEMENT :
									timeLeftToStart &gt; 0											? PRIME_TIME_INACTIVE :
									timeLeftToFinish &gt; 0										? PRIME_TIME_ACTIVE
																								: WAIT_FOR_ANNOUNCEMENT"/>
		<bind name="watch" value="'rankStatusLineTimeStamp'; {	WAIT_FOR_ANNOUNCEMENT:	0,
												SEASON_ANNOUNCEMENT:	rankSeasonStartTime,
												SPRINT_ANNOUNCEMENT:	nextSprintStartTime,
												PRIME_TIME_ACTIVE:		primeTimeFinishTime,
												PRIME_TIME_INACTIVE:	primeTimeStartTime,}"/>
		<bind name="watch" value="'currentTimeStamp'; rankStatusLineTimeStamp[periodStatus]"/>
		<bind name="watch" value="'unifinedStatus'; (currentTimeStamp - serverTime) &gt; 86400	? SC.Ui_styles.UNIFIED_STATUS.DATE
																			: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION"/>
		<bind name="countdown" value="currentTimeStamp; 'formattedCountDown'; 'HIGHEST,WITH_DAYS';"/>
		<bind name="watch" value="'rankStatusLineData'; {
		WAIT_FOR_ANNOUNCEMENT:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_WAIT_FOR_NEXT_RANK_SEASON_ANNOUNCEMENT' },
		SEASON_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_SUBST_NTH_RANKED_SEASON_STARTS_IN', [], {	_seasonId: seasonTitle,
																									_timeTillStart: formattedCountDown }))},
		SPRINT_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_RANKED_SPRINT_STARTS_IN', [], {	_nextSprintId: nextSprintId + 1,
																							_timeLeft: formattedCountDown }))},
		PRIME_TIME_INACTIVE:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_STARTS_IN', [], { _timeLeft: formattedCountDown }))},
		PRIME_TIME_ACTIVE:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_ENDS_IN', [], { _timeLeft: formattedCountDown }))},
		UNDEFINED_PERIOD:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_RANKED_STAGE_UNDEFINED' }	}"/>
		<bind name="watch" value="'isBeforeFirstReward';	currentLeagueVictoryRewardsProgress == SC.Ranked.RANK_VICTORIES_REWARDS_PROGRESS.BEFORE_FIRST"/>
		<bind name="watch" value="'isBeforeLastReward';	currentLeagueVictoryRewardsProgress == SC.Ranked.RANK_VICTORIES_REWARDS_PROGRESS.BEFORE_LAST"/>
		<bind name="watch" value="'isBoundaryReward';	isBeforeFirstReward || isBeforeLastReward"/>
		<bind name="watch" value="'rewardsWinCurrent'; currentLeagueVictoryRewards [currentVictoryRewardIndex]"/>
		<bind name="watch" value="'rewardCategoryWinCurrent'; currentLeagueVictoryRewardCategories [currentVictoryRewardIndex]"/>
		<bind name="watch" value="'victoryRewards'; [currentLeagueVictoryRewards[0], currentLeagueVictoryRewards[1], null]"/>
		<bind name="watch" value="'victoryRewardsToShow'; isBoundaryReward	? currentLeagueVictoryRewards
															: victoryRewards"/>
		<bind name="watch" value="'victories'; [currentLeagueRewardVictories[0], currentLeagueRewardVictories[1], null]"/>
		<bind name="watch" value="'victoriesToShow'; isBoundaryReward	? currentLeagueRewardVictories
														: victories"/>
		<bind name="watch" value="'victoryRewardCategories'; [currentLeagueVictoryRewardCategories[0], currentLeagueVictoryRewardCategories[1], null]"/>
		<bind name="watch" value="'victoryRewardCategoriesToShow'; isBoundaryReward	? currentLeagueVictoryRewardCategories
																	: victoryRewardCategories"/>
		<bind name="watch" value="'victoryRewardIndexToShow'; isBeforeFirstReward ? 0 : 1"/>
		<bind name="watch" value="'victoriesTillNextReward'; currentLeagueRewardVictories[victoryRewardIndexToShow] - playerVictoryCount"/>
		<bind name="watch" value="'step'; postbattleRankInfoEntity.postBattleRankInfo.step"/>
		<bind name="watch" value="'rewardArray'; [
		isQualificationPassed					?	[	rewardsQualification,
														rewardCategoryQualification,
														'IDS_RANK_REWARDS_QUALIFICATION',
														true	]
												: null,
		isFirstRankReached || isTopRankReached	? 	[	rewardsTopRank,
														rewardCategoryTopRank,
														'IDS_RANK_REWARDS_TOP_RANK',
														true	]
												: null,
		isFinalVictoryReward					?	[	rewardsWinCurrent,
														rewardCategoryWinCurrent,
														'IDS_RANK_REWARDS_VICTORIES_FINAL',
														true	]
												: null]"/>
		<bind name="watch" value="'isQualificationView'; isTopRank &amp;&amp;
										currentLeague != SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE &amp;&amp;
										changeRanks.length == 1"/>
		<bind name="soundOn" value="'addedToStage';	step &gt; 0	? 'star'		:
									step &lt; 0	? 'star_lost'
												: 'exchange_window'; 'rank_window'"/>
		<bind name="dispatch" value="'addedToStage'; 'animationStepFinished'; null ; false; 1.5"/>
		<bind name="eventSequence" value="postbattleRankInfoEntity.postBattleRankInfo.changeEvents; 'animationStepFinished'; 'allAnimationFinishedEvent'; true"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; {	_windowName: 'IDS_RANKED_BATTLE_RESULTS_MODAL_HEADER',
														_backButtonText: 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON',
														_request: 'closeModalRankChanged'	}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="!postbattleRankInfoEntity"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'NoItemsComeBackLater'; {	_type: 'RANKED_SEASON',
													_subText: 'IDS_RANKED_SEASON_DELETED_ON_SERVER' }"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 6*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 6 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<position value="absolute"/>
					<bottom value="64"/>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_cancel',
												_enabled: true,
												_label: 'IDS_CLOSE_UPPER_CASE',
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="postbattleRankInfoEntity"/>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'RankedResults'; {	_currentLeague: currentLeague,
											_modalWindowHeaderText: 'IDS_RANKED_BATTLE_RESULTS_MODAL_HEADER',
											_rankStereotypeHeaderText: rankStereotypeHeaderText,
											_isRankStereotypeSubheaderTextVisible:	isQualificationPassed
																					|| (isFirstRankReached &amp;&amp; !isSeamlessRanked)
																					|| isTopRankReached,
											_rankStereotypeSubheaderText: rankStereotypeSubheaderText,
											_rankStatusLineData: rankStatusLineData[periodStatus],
											_isChangeRanksAnimationVisible: true,
											_isQualificationView: isQualificationView,
											_isQualificationPassed: isQualificationPassed,
											_isAnyRewardAvailable: isAnyRewardAvailable,
											_victoryRewardsToShow: victoryRewardsToShow,
											_rewardsParams: {	_victories: victoriesToShow,
																_rewardsCategories: victoryRewardCategoriesToShow,
																_currentVictories: playerVictoryCount,
																_achievedRewardsCount: victoryRewardIndexToShow,
																_leagueStatus: 'CURRENT',
																_previousRewardedVictoryCount: previousRewardedVictoryCount,
																_isZeroHidden: !isBeforeFirstReward },
											_isOtherRewardAvailable: isOtherRewardAvailable,
											_rewardArray: rewardArray,
											_isRemainingRewardAvailable: isRemainingRewardAvailable,
											_remainingRewardArray: remainingRewards,
											_remainingRewardsParams: {	_remainingRewardsCategories: remainingRewardsCategories,
																				_remainingVictories: remainingVictories},
											_changeRanks: changeRanks,
											_oldInfo: oldInfo,
											_hasReceivedAllVictoryRewards: hasReceivedAllVictoryRewards,
											_isVictoryRewardProgressIncreased: isVictoryRewardProgressIncreased,
											_victoriesTillNextReward: victoriesTillNextReward
		}"/>
		</block>
	</block>

	<!-- modal_ranked_summary -->
	<block className="ModalWindowRankedSummary">
		<bind name="name" value="'ModalWindowRankedSummary'"/>
		<bind name="action" value="'startHide'; 'rankResultsWindowClosed'; {}"/>
		<bind name="firstEntityDH" value="'rankSeasonSummaryEntity'; CC.rankSeasonSummary"/>
		<bind name="firstEntityDH" value="'rankSprintSummaryEntity'; CC.rankSprintSummary"/>
		<bind name="watch" value="'isSeasonEnded'; 	!!rankSeasonSummaryEntity"/>
		<bind name="watch" value="'isSprintEnded';	!!rankSprintSummaryEntity"/>
		<bind name="watch" value="'summaryEntityComponent';	rankSeasonSummaryEntity.rankSeasonSummary || rankSprintSummaryEntity.rankSprintSummary"/>
		<bind name="watchDH" value="'leagueId';	['summaryEntityComponent.evChanged'];	summaryEntityComponent.league || summaryEntityComponent.currentLeague"/>
		<bind name="watch" value="'rewardsSeasonParticipation';			rankSeasonSummaryEntity.rankSeasonSummary.rewards"/>
		<bind name="watch" value="'rewardCategorySeasonParticipation';	rankSeasonSummaryEntity.rankSeasonSummary.rewardCategory"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason;"/>
		<bind name="watchDH" value="'rankSeasonStage';		['rankSeasonEntity.rankSeason.evStageChanged'];	rankSeasonEntity.rankSeason.stage"/>
		<bind name="watch" value="'isRankSeasonActive';		rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.ACTIVE"/>
		<bind name="watch" value="'isRankSeasonInactive';	rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.INACTIVE"/>
		<bind name="watch" value="'isRankSeasonFinished';	rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.FINISHED || rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.CLOSED"/>
		<bind name="watch" value="'isRankSeasonWaiting';		rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.WAITING"/>
		<bind name="watchDH" value="'rankSeasonStartTime';	['rankSeasonEntity.timeOfBattleEvent.evChanged'];	rankSeasonEntity.timeOfBattleEvent.startTime"/>
		<bind name="watchDH" value="'rankSeasonFinishTime';	['rankSeasonEntity.timeOfBattleEvent.evChanged'];	rankSeasonEntity.timeOfBattleEvent.finishTime"/>
		<bind name="watchDH" value="'currentSprintId';		['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.currentSprintId"/>
		<bind name="watchDH" value="'previousSprintId';		['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.previousSprintId"/>
		<bind name="watchDH" value="'nextSprintId';			['rankSeasonEntity.rankSeason.evChanged'];	rankSeasonEntity.rankSeason.nextSprintId"/>
		<bind name="watch" value="'hasNextSprint'; nextSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT"/>
		<bind name="watch" value="'isActiveSprint'; currentSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT "/>
		<bind name="watch" value="'isSprintFinished'; !isActiveSprint &amp;&amp; hasNextSprint"/>
		<bind name="primaryEntityDH" value="'nextSprintEntity'; CC.rankSprint; nextSprintId"/>
		<bind name="watch" value="'nextSprintStartTime'; nextSprintEntity.rankSprint.startTime"/>
		<bind name="firstEntityDH" value="'primeTimeEntity'; CC.primeTime"/>
		<bind name="watchDH" value="'primeTimeStartTime'; 	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeStartTime"/>
		<bind name="watchDH" value="'primeTimeFinishTime'; 	['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift'; 		['primeTimeEntity.primeTime.evChanged']; primeTimeEntity.primeTime.daylightshift"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeftToStart';		primeTimeStartTime	- serverTime - daylightshift"/>
		<bind name="watch" value="'timeLeftToFinish';	primeTimeFinishTime	- serverTime - daylightshift"/>
		<bind name="watch" value="'starsToNextRank'; summaryEntityComponent.starsToNext"/>
		<bind name="watch" value="'stars'; summaryEntityComponent.stars"/>
		<bind name="watch" value="'currentRank'; summaryEntityComponent.rank"/>
		<bind name="watch" value="'isTopRankReached'; currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK "/>
		<bind name="watch" value="'isQualificationPassed';	isTopRankReached &amp;&amp; (starsToNextRank == stars)"/>
		<bind name="watch" value="'rankStereotypeHeaderText';	isSeasonEnded	? subst('IDS_RANKED_BATTLES_SEASON_ENDED', [], { _seasonId: rankSeasonSummaryEntity.rankSeasonSummary.seasonId })
																: subst('IDS_RANKED_BATTLES_SPRINT_ENDED', [], { _sprintId: previousSprintId + 1 })"/>
		<bind name="watch" value="'rankStereotypeSubheaderText';	isTopRankReached &amp;&amp; !isQualificationPassed	?	'IDS_RANK_BATTLES_FIRST_RANK_REACHED'
																							:	tr('IDS_RANKED_NEXT_LEAGUE_DETERMINED_' +
																									(isActiveSprint ? 'SPRINT_STARTED_' : '') +
																									rankSprintSummaryEntity.rankSprintSummary.nextSprintLeague)"/>
		<bind name="watch" value="'historicalRankStereotypeData';	{	_iconSize: 160,
														_league: leagueId,
														_rank: currentRank,
														_isTopRank: currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK,
														_isGuaranteed: true,
														_starsToNextRank: isTopRankReached ? 0 : starsToNextRank,
														_currentStars: summaryEntityComponent.stars }"/>
		<bind name="watch" value="'rewardArray'; [	isSeasonEnded &amp;&amp; rewardsSeasonParticipation.length	? 	[	rewardsSeasonParticipation,
																								rewardCategorySeasonParticipation,
																								'IDS_RANK_REWARDS_SEASON_PARTICIPATION',
																								true	]
																						: null	]"/>
		<bind name="watch" value="'modalWindowHeaderText';	isSeasonEnded	? 'IDS_RANKED_SEASON_ENDED_MODAL_HEADER' : 'IDS_RANKED_SPRINT_ENDED_MODAL_HEADER'"/>
		<bind name="watch" value="'isQualificationView'; currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK &amp;&amp; leagueId != SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE"/>
		<bind name="var" value="{	WAIT_FOR_ANNOUNCEMENT:	'WAIT_FOR_ANNOUNCEMENT',
					SEASON_ANNOUNCEMENT:	'SEASON_ANNOUNCEMENT',
					SPRINT_ANNOUNCEMENT:	'SPRINT_ANNOUNCEMENT',
					PRIME_TIME_ACTIVE:		'PRIME_TIME_ACTIVE',
					PRIME_TIME_INACTIVE:	'PRIME_TIME_INACTIVE'	}"/>
		<bind name="watch" value="'periodStatus';	isRankSeasonFinished ||
									(!isActiveSprint &amp;&amp; !hasNextSprint)							? WAIT_FOR_ANNOUNCEMENT :
									isRankSeasonInactive || isRankSeasonWaiting					? SEASON_ANNOUNCEMENT :
									isQualificationPassed &amp;&amp; hasNextSprint || isSprintFinished	? SPRINT_ANNOUNCEMENT :
									timeLeftToStart &gt; 0											? PRIME_TIME_INACTIVE :
									timeLeftToFinish &gt; 0										? PRIME_TIME_ACTIVE
																								: WAIT_FOR_ANNOUNCEMENT"/>
		<bind name="watch" value="'rankStatusLineTimeStamp'; {	WAIT_FOR_ANNOUNCEMENT:	0,
												SEASON_ANNOUNCEMENT:	rankSeasonStartTime,
												SPRINT_ANNOUNCEMENT:	nextSprintStartTime,
												PRIME_TIME_ACTIVE:		primeTimeFinishTime,
												PRIME_TIME_INACTIVE:	primeTimeStartTime,}"/>
		<bind name="watch" value="'currentTimeStamp'; rankStatusLineTimeStamp[periodStatus]"/>
		<bind name="watch" value="'unifinedStatus'; (currentTimeStamp - serverTime) &gt; 86400	? SC.Ui_styles.UNIFIED_STATUS.DATE
																			: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION"/>
		<bind name="countdown" value="currentTimeStamp; 'formattedCountDown'; 'HIGHEST,WITH_DAYS';"/>
		<bind name="watch" value="'rankStatusLineData'; {
		WAIT_FOR_ANNOUNCEMENT:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_WAIT_FOR_NEXT_RANK_SEASON_ANNOUNCEMENT' },
		SEASON_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_SUBST_NTH_RANKED_SEASON_STARTS_IN', [], {	_seasonId: seasonTitle,
																									_timeTillStart: formattedCountDown }))},
		SPRINT_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_RANKED_SPRINT_STARTS_IN', [], {	_nextSprintId: nextSprintId + 1,
																							_timeLeft: formattedCountDown }))},
		PRIME_TIME_INACTIVE:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_STARTS_IN', [], { _timeLeft: formattedCountDown }))},
		PRIME_TIME_ACTIVE:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_ENDS_IN', [], { _timeLeft: formattedCountDown }))},
		UNDEFINED_PERIOD:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_RANKED_STAGE_UNDEFINED' }	}"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; {	_windowName: modalWindowHeaderText,
														_backButtonText: 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON',
														_request: 'closeModalRankedSummary'	}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="!rankSeasonSummaryEntity &amp;&amp; !rankSprintSummaryEntity"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'NoItemsComeBackLater'; {	_type: 'RANKED_SEASON',
													_subText: 'IDS_RANKED_SEASON_DELETED_ON_SERVER' }"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<position value="absolute"/>
					<bottom value="64"/>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_cancel',
												_enabled: true,
												_label: 'IDS_CLOSE_UPPER_CASE',
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="rankSeasonSummaryEntity || rankSprintSummaryEntity"/>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'RankedResults'; {	_leagueId: leagueId,
											_currentLeague: leagueId,
											_modalWindowHeaderText: modalWindowHeaderText,
											_rankStereotypeHeaderText: rankStereotypeHeaderText,
											_isRankStereotypeSubheaderTextVisible: isSprintEnded &amp;&amp; !isSeasonEnded,
											_rankStereotypeSubheaderText: rankStereotypeSubheaderText,
											_rankStatusLineData: rankStatusLineData[periodStatus],
											_isQualificationView: isQualificationView,
											_isQualificationPassed: isQualificationPassed,
											_isOtherRewardAvailable: isSeasonEnded &amp;&amp; rewardsSeasonParticipation.length,
											_isAnyRewardAvailable: isSeasonEnded &amp;&amp; rewardsSeasonParticipation.length,
											_rewardArray: rewardArray,
											_historicalRankStereotypeData: historicalRankStereotypeData }"/>
		</block>
	</block>

	<!-- modal_select_port -->
	<block className="BackgroundModalWindowPort">
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowSelectPort">
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'isReady';	['divisionDataEntity.division.evIsReadyChanged']; divisionDataEntity.division.isReady"/>
		<bind name="collectionDH" value="CC.port; 'ports'; 'visible.sorted'"/>
		<bind name="firstEntityDH" value="'currentPort'; CC.port; 'current'"/>
		<bind name="primaryEntityDH" value="'selectedPortEntity'; CC.port; selectedPortId"/>
		<bind name="catch" value="'changeSelectedPortId'"/>
		<bind name="var" value="{selectedPortId: currentPort.port.id}"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="stageSize"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<style>
				<width value="1280:1280,1360:1290aw"/>
				<height value="720:576,2160:930ah"/>
				<top value="720:72,2160:480ah"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_CHOOSE_PORT_HEADER', _headerWidth: '1280px', _innerCloseButton: (stageWidth &gt; 1400 ? false : true)}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$TextHeaderWhite"/>
					<style>
						<marginTop value="6px"/>
						<marginBottom value="6px"/>
					</style>
					<bind name="class" value="'$FontColorBlueish'"/>
					<default_text value="IDS_BUY_CLICK_TO_SET_PORT"/>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<width value="100%"/>
					<height value="100%f"/>
				</style>
				<block>
					<style>
						<flow value="htile"/>
						<align value="left"/>
						<width value="100%"/>
						<marginTop value="20px"/>
						<marginBottom value="20px"/>
					</style>
					<bind name="collectionRepeatDH" value="CC.port; 'PortItem'; 'visible.sorted'; {_currentSelectedPortId: selectedPortId}"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="isReady"/>
					<style>
						<marginTop value="18px"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'StatusLineWithIcon'; { _text: 'IDS_CHANGE_PORT_HINT_DIVISION', _maxWidth: 1000, _large: true }"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="24px"/>
					</style>
					<block>
						<bind name="fade" value="!(selectedPortEntity.port.current); 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 190}; {alpha: 0, width: 0}"/>
						<style>
							<width value="190px"/>
							<marginRight value="24px"/>
						</style>
						<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_SAVE_CHANGES',
														_width: '190px',
														_name: 'btn_ok',
														_enabled: !isReady,
														_action: 'setPortPreset',
														_actionParams: {portId: selectedPortId},
														_focusIndex: 0,
														_defaultFocused: true}"/>
					</block>
					<block>
						<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_CLOSE_UPPER_CASE',
														_name: 'btn_cancel',
														_enabled: true, 
														_focusIndex: 1,
														_defaultFocused: false}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="PortItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'entity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'currentPortId'; []; entity.port.id"/>
		<bind name="watchDH" value="'portUnavailableReason'; ['entity.port.evChanged']; entity.port.unavailableReason"/>
		<bind name="watch" value="'isNew';	entity.newItem != null"/>
		<bind name="var" value="{bgWidth: 304, bgHeight: 154}"/>
		<bind name="watch" value="'isSelected'; _currentSelectedPortId == currentPortId"/>
		<bind name="name" value="isSelected? 'port_' + entity.port.id + '_selected': 'port_' + entity.port.id"/>
		<bind name="style" value="'width'; (bgWidth + 16) + 'px'"/>
		<bind name="style" value="'height'; (bgHeight + 16) + 'px'"/>
		<bind name="watch" value="'isFebruaryPort'; entity.port.id == 'february'"/>
		<bind name="watch" value="'isPortUnavailableReasonNoTwitchPrime'; portUnavailableReason == 2"/>
		<block>
			<bind name="style" value="'width'; bgWidth + 'px'"/>
			<bind name="style" value="'height'; bgHeight  + 'px'"/>
			<bind name="transition" value=" isSelected; 0.1; {width: bgWidth, height: bgHeight}; {width: (bgWidth + 16), height: (bgHeight + 16)}"/>
			<bind name="dispatch" value="'click'; isPortUnavailableReasonNoTwitchPrime	?	null
																		:	'changeSelectedPortId'; {selectedPortId: currentPortId}"/>
			<bind name="action" value="'click';	isNew ? 'makeSeen' : null; {entityId: entity.id}"/>
			<bind name="soundSet" value="isPortUnavailableReasonNoTwitchPrime ? '' : 'button_port'"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="transition" value="rollOver || isSelected ; 0.15; {alpha: 0}; {alpha: 1}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<margin value="-1"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="firstEntityDH" value="'playerArcEventInfoEntity'; CC.playerArcEventInfo"/>
				<bind name="watchDH" value="'arcEventParticipant'; ['playerArcEventInfoEntity.playerArcEventInfo.evSideChanged']; playerArcEventInfoEntity.playerArcEventInfo.sideId"/>
				<bind name="tooltip" value="'DescriptionStatusLineTooltip';	isFebruaryPort							?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																											_statusText: 'IDS_SELECT_PORT',
																											_descriptionText:	arcEventParticipant == 0 	? 'IDS_PORT_BLACKSEAHONOR_TOOLTIP' :
																																arcEventParticipant == 1 	? 'IDS_PORT_BLACKSEAGLORY_TOOLTIP'
																																							: tr(entity.port.nameIds + '_TOOLTIP') } :
															!isPortUnavailableReasonNoTwitchPrime	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																											_statusText: 'IDS_SELECT_PORT',
																											_descriptionText: tr(entity.port.nameIds + '_TOOLTIP') }
																										: null"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; !isFebruaryPort &amp;&amp; isPortUnavailableReasonNoTwitchPrime	?	{	_text: 'IDS_PORT_TWITCH_UNAVAILABLE_REASON' }
																											: null"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="style" value="'alpha'; isSelected ? 1 : 0.5"/>
				<style>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; !isFebruaryPort				? 'url:../ports/' + entity.port.id + '.jpg' :
											arcEventParticipant == 0	? 'url:../ports/february_honor.jpg' :
											arcEventParticipant == 1 	? 'url:../ports/february_glory.jpg'
																		: 'url:../ports/' + entity.port.id + '.jpg'"/>
			</block>
			<block>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_PORT_TWITCH_UNAVAILABLE_REASON'}"/>
				<style>
					<marginTop value="9px"/>
					<marginLeft value="9px"/>
				</style>
				<bind name="visible" value="entity.port.nameIds == 'IDS_PORT_TWITCH'"/>
				<block>
					<style>
						<width value="31px"/>
						<height value="31px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_twitch_port.png'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<bottom value="6px"/>
					<height value="30px"/>
					<position value="absolute"/>
					<hitTest value="false"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$MiddleAligned"/>
					<block type="text">
						<style>
							<marginLeft value="3px"/>
						</style>
						<styleClass value="$TextAccentBold"/>
						<styleClass value="$MiddleVAligned"/>
						<bind name="class" value="isSelected ? '$FontColorGolden' : '$None' "/>
						<bind name="text" value="(entity.port.id == 'february' &amp;&amp; arcEventParticipant == 0) 	? 'IDS_PORT_BLACKSEAHONOR' :
								(entity.port.id == 'february' &amp;&amp; arcEventParticipant == 1) 	? 'IDS_PORT_BLACKSEAGLORY'
																							: entity.port.nameIds"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="fade" value="isNew; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
				<style>
					<position value="absolute"/>
					<right value="8px"/>
					<top value="8px"/>
				</style>
				<bind name="instance" value="'MarkerNewAttention'; { }"/>
			</block>
			<block>
				<bind name="transition" value="(!isNew &amp;&amp; isSelected); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0.15"/>
				<style>
					<position value="absolute"/>
					<right value="9px"/>
					<top value="9px"/>
				</style>
				<block className="icon_check_big" type="native">
					<styleClass value="$MouseDisable"/>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_ship_aces_results -->
	<block className="ModalShipAcesResults">
		<bind name="instance" value="'SmallModalWindow'; { _headerText: 'IDS_SHIP_ACES_RESULTS_TITLE', _contentElement: 'ModalShipAcesResultsContent' }"/>
	</block>
	<block className="ModalShipAcesResultsContent">
		<bind name="firstEntityDH" value="'shipAcesStatsEntity'; CC.shipAcesFinalStats"/>
		<bind name="watchDH" value="'bestBattleResults';	['shipAcesStatsEntity.shipAcesFinalStats.evChanged']; shipAcesStatsEntity.shipAcesFinalStats.bestBattleResults"/>
		<bind name="watchDH" value="'incomeList';		['shipAcesStatsEntity.shipAcesFinalStats.evChanged']; shipAcesStatsEntity.shipAcesFinalStats.incomeList"/>
		<style>
			<align value="center"/>
			<width value="682px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:32,1080:64ah"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold21NM"/>
				<style>
					<marginBottom value="24px"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_SHIP_ACES_FINAL_STAT_TYPE_BATTLE_SUMMARY"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="720:64,1080:128ah"/>
			</style>
			<bind name="repeatObject" value="bestBattleResults; 'ShipAcesBestResult'; {}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefaultBold21NM"/>
				<style>
					<marginBottom value="24px"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_REWARDS"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="720:32,1080:64ah"/>
			</style>
			<bind name="repeat" value="incomeList; 'ModalRewardItemAdapter'"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginBottom value="720:16,1080:32ah"/>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '154px',
											_name: 'btn_cancel',
											_label: 'IDS_CLOSE_UPPER_CASE',
											_enabled: true,
											_focusIndex: 0,
											_defaultFocused: true }"/>
		</block>
	</block>
	<block className="ShipAcesBestResult">
		<style>
			<align value="center"/>
		</style>
		<bind name="style" value="'marginLeft'; $index ? '48px' : 0"/>
		<block type="text">
			<styleClass value="$TextDefaultBold46NM"/>
			<style>
				<marginBottom value="12px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="format($index_key_value, -1)"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<alpha value="0.75"/>
			</style>
			<bind name="text" value="tr('IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + $index_key_name + '_SHORT')"/>
		</block>
	</block>

	<!-- modal_ship_get_gift -->
	<block className="ModalWindowGiftShipGettingConfirm">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: toUpperCase(tr('IDS_GET_GIFT_SHIP_HEADER')), _contentElement: 'ModalWindowGiftShipContent'}"/>
	</block>
	<block className="ModalWindowGiftShipContent">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; $root.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watch" value="'rewardIdx'; shipEntity.giftCounterComponent.rewardIndex"/>
		<style>
			<align value="center"/>
			<width value="412px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="ModalWindowShipPreview" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{ _shipId: Number($root.shipId) }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
				<align value="center"/>
				<marginTop value="24px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<bind name="text" value="'IDS_QUESTION_GET_GIFT_SHIP'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="12px"/>
			</style>
			<block>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_ok',
												_enabled: true,
												_action: 'GiftListsProxy.claimGift',
												_actionParams: {rewardIdx: rewardIdx},
												_label: 'IDS_YES',
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_cancel',
												_enabled: true,
												_label: 'IDS_NO'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_ship_purchase -->
	<block className="ModalWindowPurchaseShip">
		<bind name="instance" value="'SmallModalWindow'; {	_headerText: 'IDS_PURCHASE_SHIP_HEADER', 
											_hideDivider: true,
											_contentElement: 'ModalWindowPurchaseShipContent'}"/>
	</block>
	<block className="ModalWindowPurchaseShipContent">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; $root.data.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'shipBuyPriceEntity'; CC.priceComponent; $root.data.shipId + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'shipBuyPrice'; ['shipBuyPriceEntity.priceComponent.evChanged']; shipBuyPriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'slotPriceEntity'; CC.priceComponent; 'SLOT_COST' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'slotPrice'; ['slotPriceEntity.priceComponent.evChanged']; slotPriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'moneyTrainingHirePriceEntity'; CC.priceComponent; 'CREW_CR_TRAINING_Cost' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'moneyTrainingHirePrice'; ['moneyTrainingHirePriceEntity.priceComponent.evChanged']; moneyTrainingHirePriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'goldTrainingHirePriceEntity'; CC.priceComponent; 'CREW_GOLD_TRAINING_Cost' + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'goldTrainingHirePrice'; ['goldTrainingHirePriceEntity.priceComponent.evChanged']; goldTrainingHirePriceEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'crewToHireEntity'; CC.crewToHirePersonality"/>
		<bind name="watchDH" value="'goldTrainingLevel';		['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.goldTrainingLevel"/>
		<bind name="watchDH" value="'moneyTrainingLevel';	['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.moneyTrainingLevel"/>
		<bind name="watchDH" value="'baseTrainingLevel';		['crewToHireEntity.crewToHirePersonality.evChanged'];	crewToHireEntity.crewToHirePersonality.baseTrainingLevel"/>
		<bind name="watch" value="'hireTypes';	{	2:	{	skillPoints: goldTrainingLevel - 1, priceInfo: goldTrainingHirePrice},
									1:	{	skillPoints: moneyTrainingLevel - 1, priceInfo: moneyTrainingHirePrice},
									0:	{	skillPoints: baseTrainingLevel -1}
								}"/>
		<bind name="primaryEntityDH" value="'featureEntity_13'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[13]"/>
		<bind name="watchDH" value="'feature_13'; ['featureEntity_13.accountFeature.evStateChanged']; featureEntity_13.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_13"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 13}"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountSlotsNum';	['resourceEntity.accountResource.evChangedSlotsNum'];	resourceEntity.accountResource.slotsNum"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];		resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];		resourceEntity.accountResource.credits"/>
		<bind name="watchDH" value="'freeBarracksSlots';	['dockEntity.crewData.evUpdate'];						dockEntity.crewData.freeBarracksSlots"/>
		<bind name="watch" value="'areAnySlotsInBarracks'; freeBarracksSlots &gt; 0"/>
		<bind name="watch" value="'hireCrewSwitchState';	areAnySlotsInBarracks ? userPrefs.switchPurchaseShipBuyCommander : false"/>
		<bind name="watch" value="'selectedHireType';	userPrefs.crewRecruitmentOnPurchaseOption"/>
		<bind name="watch" value="'crewGoldTrainingCost';	hireCrewSwitchState &amp;&amp; selectedHireType == SC.Common.CREW_TRAINING_TYPE.GoldTraining	? goldTrainingHirePrice.finalPrice	: 0"/>
		<bind name="watch" value="'crewCreditTrainingCost';	hireCrewSwitchState &amp;&amp; selectedHireType == SC.Common.CREW_TRAINING_TYPE.MoneyTraining	? moneyTrainingHirePrice.finalPrice	: 0"/>
		<bind name="watch" value="'isNotEnoughSlots'; accountSlotsNum == 0"/>
		<bind name="watch" value="'buySlotSwitchState';	userPrefs.switchPurchaseShipBuySlots || isNotEnoughSlots"/>
		<bind name="watch" value="'slotCost'; buySlotSwitchState ? slotPrice.finalPrice : 0"/>
		<bind name="watch" value="'totalShipCreditCost'; (shipBuyPrice.currency == SC.Common.CURRENCIES.CREDITS	? shipBuyPrice.finalPrice : 0)"/>
		<bind name="watch" value="'totalShipGoldCost';	(shipBuyPrice.currency == SC.Common.CURRENCIES.GOLD		? shipBuyPrice.finalPrice : 0)"/>
		<bind name="watch" value="'finalCreditCost'; totalShipCreditCost + crewCreditTrainingCost"/>
		<bind name="watch" value="'finalGoldCost';	totalShipGoldCost + crewGoldTrainingCost + slotCost"/>
		<bind name="watch" value="'totalGoldAfterPurchase'; accountGold - finalGoldCost"/>
		<bind name="watch" value="'isEnoughGold'; totalGoldAfterPurchase &gt;= 0"/>
		<bind name="watch" value="'totalCreditsAfterPurchase'; accountCredits - finalCreditCost"/>
		<bind name="watch" value="'isEnoughCredits'; totalCreditsAfterPurchase &gt;= 0"/>
		<bind name="watch" value="'isNotEnoughFunds'; !isEnoughGold || !isEnoughCredits"/>
		<bind name="watch" value="'priceInfo'; (hireCrewSwitchState &amp;&amp; selectedHireType == SC.Common.CREW_TRAINING_TYPE.MoneyTraining) || !(shipInfo.isPremium)	?	{	finalPrice: finalCreditCost,
																																						currency: SC.Common.CURRENCIES.CREDITS }
																																				: null"/>
		<bind name="watch" value="'optionalPriceInfo'; shipInfo.isPremium || (hireCrewSwitchState &amp;&amp; selectedHireType == SC.Common.CREW_TRAINING_TYPE.GoldTraining) || buySlotSwitchState	?	{	finalPrice: finalGoldCost,
																																													currency: SC.Common.CURRENCIES.GOLD }
																																											: null"/>
		<bind name="watch" value="'currenciesPanelPrices'; [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: -finalGoldCost},
											{currency: SC.Common.CURRENCIES.CREDITS,	finalPrice: -finalCreditCost}]"/>
		<style>
			<align value="center"/>
			<width value="412px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 412 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="ModalWindowShipPreview" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{ _shipId: Number($root.data.shipId) }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<paddingTop value="12px"/>
				<paddingBottom value="4px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<alpha value="0.75"/>
					</style>
					<styleClass value="$TextDefault17NM"/>
					<default_text value="IDS_MODAL_WINDOW_SHIP_PURCHASE_SHIP_PRICE"/>
				</block>
				<block>
					<style>
						<marginTop value="-6px"/>
						<marginRight value="-2px"/>
					</style>
					<bind name="instance" value="'PriceTag'; { priceInfo: shipBuyPrice, _showDiscountTag: true}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="fade" value="!isEnoughCredits;	0.15; {alpha: 0, height: 0}; {alpha: 1, height: 20}; {alpha: 0, height: 0}"/>
				<style>
					<width value="100%"/>
					<height value="20px"/>
					<marginRight value="-2px"/>
					<marginTop value="4px"/>
				</style>
				<bind name="instance" value="'PriceTagWithDeficitAndLabelRow';	{	_priceInfo: {finalPrice: math.abs(totalCreditsAfterPurchase), currency: SC.Common.CURRENCIES.CREDITS},
																	_title: 'IDS_NOT_ENOUGH',
																	_small: true
																}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="action" value="'evBuySlotSwitcherStateChanged'; 'setUserPref'; {name: 'switchPurchaseShipBuySlots', value: !buySlotSwitchState}"/>
			<style>
				<width value="100%"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<paddingTop value="12px"/>
				<paddingBottom value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'SwitchWithRightLabel';	{	_state: buySlotSwitchState,
															_eventName: 'evBuySlotSwitcherStateChanged',
															_tooltipData: !isNotEnoughSlots	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																								_text: buySlotSwitchState	? 'IDS_BUY_SLOT_SWITCH_OFF_TOOLTIP'
																															: 'IDS_BUY_SLOT_SWITCH_ON_TOOLTIP' }
																							: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
																								_text: 'IDS_NO_FREE_SLOTS'},
															_label: buySlotSwitchState ? 'IDS_WITH_SLOT' : 'IDS_WITHOUT_SLOT',
															_enabled: !isNotEnoughSlots,
															_textClass: '$TextDefault17NM' }"/>
				</block>
				<block>
					<bind name="visible" value="buySlotSwitchState"/>
					<style>
						<marginTop value="-6px"/>
						<marginBottom value="-4px"/>
						<marginRight value="-2px"/>
					</style>
					<bind name="instance" value="'PriceTag'; { priceInfo: slotPrice, _showDiscountTag: true}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="20px"/>
					<marginLeft value="44px"/>
					<marginRight value="-2px"/>
				</style>
				<bind name="fade" value="!isEnoughGold &amp;&amp; buySlotSwitchState;	0.15; {alpha: 0, height: 0}; {alpha: 1, height: 20}; {alpha: 0, height: 0}"/>
				<bind name="instance" value="'PriceTagWithDeficitAndLabelRow';	{	_priceInfo: {finalPrice: math.abs(totalGoldAfterPurchase), currency: SC.Common.CURRENCIES.GOLD},
																	_title: 'IDS_NOT_ENOUGH',
																	_marginTop: 8,
																	_small: true
																}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="feature_13 != 'locked'"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="action" value="userPrefs.switchPurchaseShipBuyCommander == null ? 'addedToStage' : ''; 'setUserPref' ; {name : 'switchPurchaseShipBuyCommander', value : true}"/>
				<bind name="action" value="'evHireCrewSwitcherStateChanged'; 'setUserPref'; {name: 'switchPurchaseShipBuyCommander', value: !hireCrewSwitchState}"/>
				<style>
					<width value="100%"/>
					<height value="40px"/>
					<paddingLeft value="16px"/>
					<paddingRight value="16px"/>
					<align value="middle"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'SwitchWithRightLabel';	{	_state: hireCrewSwitchState,
															_eventName: 'evHireCrewSwitcherStateChanged',
															_tooltipData:	{ _unifiedStatus:	!areAnySlotsInBarracks	? SC.Ui_styles.UNIFIED_STATUS.NEGATIVE
																														: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																			  _text:			!areAnySlotsInBarracks	? 'IDS_UNABLE_HIRE_CREW_NO_PLACE_IN_BARRACKS_TOOLTIP' :
																								hireCrewSwitchState		? 'IDS_HIRE_CREW_SWITCH_OFF_TOOLTIP'
																														: 'IDS_HIRE_CREW_SWITCH_ON_TOOLTIP' },
															_label: hireCrewSwitchState ? 'IDS_WITH_COMMANDER' : 'IDS_WITHOUT_COMMANDER',
															_enabled: areAnySlotsInBarracks,
															_textClass: '$TextDefault17NM'}"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeatObject" value="hireTypes; 'CrewHireTypeSmallItem'; {_selectedHireType: selectedHireType,
																	_isVisible: hireCrewSwitchState,
																	_availableGoldAfterShipPurchase: accountGold - totalShipGoldCost - slotCost,
																	_availableCreditsAfterShipPurchase: accountCredits - totalShipCreditCost}; true; 0; false"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!isNotEnoughFunds"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
				<align value="center"/>
				<marginTop value="24px"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; !isNotEnoughFunds	?	{	_questionText: 'IDS_QUESTION_PURCHASE_SHIP_FOR', 
																						_priceInfo: priceInfo,
																						_optionalPriceInfo: optionalPriceInfo }
																				:	null"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="isNotEnoughFunds"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
				<marginTop value="24px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$TextDefault25NM"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<default_text value="IDS_NOT_ENOUGH_FUNDS"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="12px"/>
			</style>
			<block>
				<bind name="fade" value="!isNotEnoughFunds;	0.15; {alpha: 0, width: 0}; {alpha: 1, width: 154}; {alpha: 0, width: 0}"/>
				<style>
					<marginRight value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_ok',
												_enabled: !isNotEnoughFunds,
												_isTransactionBtn: true,
												_request: 'buyShip',
												_requestParams: {	shipId: shipInfo.id,
																	hireCrew: hireCrewSwitchState,
																	trainingType: selectedHireType,
																	buySlot: buySlotSwitchState},
												_label: 'IDS_YES',
												_focusIndex: 0,
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultButton'; {	_width: '129px',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 1,
												_label: !isNotEnoughFunds ? 'IDS_NO' : 'IDS_CANCEL_UPPER_CASE'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CrewHireTypeSmallItem">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'featureEntity_13'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[13]"/>
		<bind name="watchDH" value="'feature_13'; ['featureEntity_13.accountFeature.evStateChanged']; featureEntity_13.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_13"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 13}"/>
		<bind name="watch" value="'availableBalanceAfterShipPurchase'; $index_key_value.priceInfo.currency == SC.Common.CURRENCIES.GOLD ? _availableGoldAfterShipPurchase : _availableCreditsAfterShipPurchase"/>
		<bind name="watch" value="'isAvailable'; !$index_key_value.priceInfo || availableBalanceAfterShipPurchase - $index_key_value.priceInfo.finalPrice &gt;= 0"/>
		<bind name="watch" value="'isSelected'; $index_key_name == _selectedHireType"/>
		<bind name="watch" value="'title'; tr('IDS_CREW_HIRE_TYPE_HEADER_' + $index_key_name)"/>
		<bind name="watch" value="'subTitle'; $index_key_value.skillPoints &gt; 0	? subst('IDS_CREW_HIRE_TYPE_DESCRIPTION_PAID_PL', [], { _amount: $index_key_value.skillPoints}, $index_key_value.skillPoints)
																: null"/>
		<bind name="watch" value="'disableReasonText'; toUpperCase('IDS_NOT_ENOUGH_' + $index_key_value.priceInfo.currency)"/>
		<bind name="action" value="feature_13 == 'locked' || userPrefs.crewRecruitmentOnPurchaseOption == null ? 'addedToStage' : ''; 'setUserPref' ; {name : 'crewRecruitmentOnPurchaseOption', value : SC.Common.CREW_TRAINING_TYPE.BaseTraining}"/>
		<bind name="action" value="'menuItemSelectedEv'; 'setUserPref'; {name: 'crewRecruitmentOnPurchaseOption', value: $index_key_name}"/>
		<bind name="changeDispatch" value="isAvailable; isSelected ? 'selectedHireTypeDisabledEv' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; false"/>
		<bind name="action" value="'selectedHireTypeDisabledEv'; 'setUserPref'; {name: 'crewRecruitmentOnPurchaseOption', value: SC.Common.CREW_TRAINING_TYPE.BaseTraining}"/>
		<bind name="fade" value="_isVisible; 0.13; {alpha: 0, height: 0}; {alpha: 1, height: 40}; {alpha: 0, height: 0}; 1; 0.06 * $index"/>
		<style>
			<width value="100%"/>
			<height value="40px"/>
		</style>
		<bind name="instance" value="'SmallMenuItemWithPrice'; {	_height: '100%',
												_title: title,
												_isSelected: isSelected,
												_isAvailable: isAvailable,
												_disableReason: disableReasonText,
												_newCounterValue: $index_key_value.skillPoints,
												_priceInfo: $index_key_value.priceInfo}"/>
	</block>

	<!-- modal_ship_research -->
	<block className="ModalWindowResearchShip">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_RESEARCH_SHIP_HEADER',
										_contentElement: 'ModalWindowResearchShipContent',
										_hideDivider: true}"/>
	</block>
	<block className="ModalWindowResearchShipContent">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; $root.data.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; $root.data.shipId"/>
		<bind name="watchDH" value="'crewId';	['ownShipEntity.ownShip.evCrewChanged'];	ownShipEntity.ownShip.crewId"/>
		<bind name="watchDH" value="'dependenciesResearchPriceInfo'; 	['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.dependenciesResearchPriceInfo"/>
		<bind name="watchDH" value="'dependenciesResearchPriceVisible'; 	['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.dependenciesResearchPriceVisible"/>
		<bind name="watchDH" value="'researchPriceShipExp'; 				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.researchPriceShipExp"/>
		<bind name="watchDH" value="'researchPriceFreeExp';				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.researchPriceFreeExp"/>
		<bind name="watchDH" value="'researchPriceInfo'; 				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.researchPriceInfo"/>
		<bind name="watchDH" value="'prevShipResearchedExp';				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.prevShipResearchedExp"/>
		<bind name="watchDH" value="'isPrevShipResearched';				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isPrevShipResearched"/>
		<bind name="watch" value="'isGiftShip'; !!shipEntity.giftCounterComponent"/>
		<bind name="watch" value="'currentBattleCount'; shipEntity.giftCounterComponent.currentBattleCount"/>
		<bind name="watch" value="'totalBattleCount'; shipEntity.giftCounterComponent.totalBattleCount"/>
		<bind name="watch" value="'battlesLeft'; totalBattleCount-currentBattleCount"/>
		<bind name="watch" value="'dependenciesResearchTitle'; isPrevShipResearched ? 'IDS_PREV_SHIP_MODULES_WILL_BE_ALSO_RESEARCHED' : 'IDS_PREV_SHIPS_WILL_BE_ALSO_RESEARCHED'"/>
		<bind name="watch" value="'questionText'; researchPriceShipExp || researchPriceFreeExp 	? 'IDS_QUESTION_RESEARCH_SHIP_FOR'
																				: 'IDS_QUESTION_RESEARCH_SHIP_FOR_FREE'"/>
		<bind name="watch" value="'priceInfo'; researchPriceShipExp			?	{	finalPrice: researchPriceShipExp,
																	currency: SC.Common.CURRENCIES.XP }
															: null"/>
		<bind name="watch" value="'optionalPriceInfo'; researchPriceFreeExp	?	{	finalPrice: researchPriceFreeExp,
																	currency: SC.Common.CURRENCIES.FREE_XP }
															: null"/>
		<bind name="watch" value="'isUsedFreeXP'; optionalPriceInfo.finalPrice != null &amp;&amp; optionalPriceInfo.finalPrice != 0"/>
		<bind name="watch" value="'currenciesPanelPrices'; isUsedFreeXP  ? [	{currency: SC.Common.CURRENCIES.XP, finalPrice: priceInfo ? -priceInfo.finalPrice : 0, expPreviousShip: prevShipResearchedExp ? prevShipResearchedExp : 0},
															{currency: SC.Common.CURRENCIES.FREE_XP, finalPrice: optionalPriceInfo ? -optionalPriceInfo.finalPrice : 0}]
														: [ {currency: SC.Common.CURRENCIES.XP, finalPrice: priceInfo ? -priceInfo.finalPrice : 0, expPreviousShip: prevShipResearchedExp ? prevShipResearchedExp : 0}]"/>
		<style>
			<align value="center"/>
			<width value="412px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 412 }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<block className="ModalWindowShipPreview" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{ _shipId: Number($root.data.shipId) }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<style>
				<width value="100%"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<paddingTop value="12px"/>
				<paddingBottom value="12px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="100%"/>
					<alpha value="0.75"/>
				</style>
				<default_text value="IDS_RESEARCH_COST"/>
			</block>
			<block>
				<style>
					<marginTop value="-6px"/>
					<marginBottom value="-4px"/>
				</style>
				<bind name="instance" value="'PriceTag'; dependenciesResearchPriceVisible ? { priceInfo: researchPriceInfo, _showDiscountTag: true} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<paddingTop value="12px"/>
				<paddingBottom value="12px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="100%"/>
					<marginRight value="8px"/>
					<leading value="-3"/>
					<alpha value="0.75"/>
				</style>
				<bind name="text" value="dependenciesResearchTitle"/>
			</block>
			<block>
				<style>
					<marginTop value="-6px"/>
					<marginBottom value="-4px"/>
				</style>
				<bind name="instance" value="'PriceTag'; dependenciesResearchPriceVisible ? { priceInfo: dependenciesResearchPriceInfo, _showDiscountTag: true} : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="dependenciesResearchPriceVisible"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemQuestionWithPrice'; {	_questionText: questionText, 
																_priceInfo: priceInfo,
																_optionalPriceInfo: optionalPriceInfo }"/>
		</block>
		<block>
			<bind name="visible" value="isGiftShip"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="24px"/>
				<align value="center"/>
			</style>
			<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
										_text: tr(subst('IDS_SUBST_NEWBIE_GIFTS_BATTLES_TO_PLAY', [], {battleCount: battlesLeft}, battlesLeft)),
										_textClass: '$TextDefaultNM',
										_leading: -3}"/>
		</block>
		<block>
			<bind name="instance" value="'ModalWindowOkCancel'; {	_appearOrder: 4,
													_focusBtn: 1,
													_request: 'doResearchShip',
													_requestParams: { shipId: $root.data.shipId }}"/>
		</block>
	</block>

	<!-- modal_training_room_does_not_exist -->
	<block className="ModalRoomDoesNotExist">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_ERROR_HEADER_DEFAULT', _contentElement: 'ModalRoomDoesNotExistContent'}"/>
	</block>
	<block className="ModalRoomDoesNotExistContent">
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<margin value="16px"/>
			</style>
			<block type="text">
				<style>
					<alpha value="0.9"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<default_text value="IDS_TRAINING_ROOM_DOES_NOT_EXIST_ERROR_DESC"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16"/>
			</style>
			<block className="DefaultButtonModal">
				<style>
					<marginBottom value="6px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="name" value="'Modal_window_action_Button' + 'IDS_CLOSE_UPPER_CASE'"/>
				<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_focusIndex: 1,
													_defaultFocused: false}"/>
			</block>
		</block>
	</block>

	<!-- modal_training_room_pwd_enter -->
	<block className="ModalWindowTrainingRoomPasswordEnter">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ModalWindowTrainingRoomPasswordEnterContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowTrainingRoomPasswordEnterContent">
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; $root.preBattleId"/>
		<bind name="handleEventDH" value="'preBattleEntity.passwordedRoom.evWrongPassword'; 'evWrongPassword'; {}; 2"/>
		<bind name="var" value="{_wrongPassword: false, _focusInput: true}"/>
		<bind name="catch" value="'evWrongPassword'; {_wrongPassword: true, _focusInput: true}"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<style>
			<width value="440px"/>
			<height value="720:720,2160:2160ah"/>
			<paddingTop value="720:200,1080:360ah"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<right value="4px"/>
					<top value="9px"/>
				</style>
				<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<marginBottom value="10px"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="toUpperCase(tr('IDS_TRAININGBATTLE'))"/>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
				<block type="text">
					<style>
						<marginTop value="10px"/>
						<marginBottom value="10px"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<bind name="text" value="'IDS_TRAINING_ROOM_ENTER_PWD'"/>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="32px"/>
				<marginTop value="10px"/>
				<marginBottom value="8px"/>
			</style>
			<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
			<bind name="watchDH" value="'passRestrict'; []; realmConstantsEntity.realmConstants.passRestrict"/>
			<bind name="watchDH" value="'passRestrictRegexp'; []; realmConstantsEntity.realmConstants.passRestrictRegexp"/>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<style>
					<position value="absolute"/>
					<width value="300px"/>
					<bottom value="36px"/>
				</style>
				<bind name="instance" value="'WrongTextInputNotification'; _wrongPassword	? 	{	_maxWidth: 300,
																					_startTop: 10,
																					_text: tr('IDS_WRONG_PASSWORD_TRY_AGAIN') }
																			:	null"/>
			</block>
			<block>
				<style>
					<width value="240px"/>
				</style>
				<params>
					<param name="name" value="training_room_enter_password"/>
				</params>
				<bind name="instance" value="'TrainingRoomTextInputPassword'; { 	onEnterEvent: 'pwdInputEnter',
																onInputStrChangedEvent: 'pwdStrChanged',
																_onEnterTooltipText: 'IDS_JOIN_TRAINING_ROOM_MOUSE_HINT',
																_disableCloseBtn: true,
																_defaultInputValue: '',
																_defaultText: 'IDS_TRAINING_ROOM_ENTER_TEXT_PWD',
																_maxChars: 8,
																_restrict: passRestrict,
																_restrictRegexp: passRestrictRegexp,
																_focusIndex: 0,
																_defaultFocused: _focusInput}"/>
				<bind name="catch" value="'pwdStr' + varChanged; {_wrongPassword: false, _wrongSymbol: false}"/>
				<bind name="catch" value="'TrainingRoomTextInput.pwdStrChanged'"/>
				<bind name="catch" value="'TrainingRoomTextInput.pwdInputEnter'; {_focusInput: false}"/>
				<bind name="dispatch" value="'TrainingRoomTextInput.pwdInputEnter'; 'evJoinRoomDelayed'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<bind name="dispatch" value="'evJoinRoomDelayed'; 'evJoinRoom'; {}; 0; 0.05"/>
		<bind name="action" value="'evJoinRoom'; 'joinTrainingRoom'; {preBattleId: $root.preBattleId, password: pwdStr}"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '120px',
											_enabled: true,
											_dispatch: 'evJoinRoom',
											_focusIndex: 1,
											_label: 'IDS_ENTER_WITH_PASSWORD_BUTTON'}"/>
		</block>
	</block>

	<!-- modal_training_rooms_list -->
	<block className="ModalWindowTrainingRoomsList">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<style>
			<align value="center"/>
		</style>
		<block className="ModalWindowTrainingRoomsContent">
			<bind name="action" value="'startShow'; 'startUpdateTrainingRooms'; {}"/>
			<bind name="action" value="'startHide'; 'stopUpdateTrainingRooms'; {}"/>
			<bind name="action" value="'hideTrainingRoomsEv'; 'hideTrainingRooms'; {}"/>
			<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
			<bind name="primaryEntityDH" value="'battleTypeEntity'; CC.battleType; str(SC.Common.BATTLE_TYPES.TRAINING_BATTLE + '_0')"/>
			<bind name="watchDH" value="'battleTypeDenyReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.battleTypeReasons"/>
			<bind name="watch" value="'isTrainingRoomsEnabled'; !divisionDataEntity"/>
			<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
			<bind name="watchDH" value="'selfName'; ['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
			<bind name="firstEntityDH" value="'roomsListWindowStateEntity'; CC.trainingRoomsListWindowState"/>
			<bind name="watchDH" value="'isProcessing'; ['roomsListWindowStateEntity.trainingRoomsListWindowState.evUpdate']; roomsListWindowStateEntity.trainingRoomsListWindowState.isProcessing"/>
			<bind name="var" value="{
		mapsSortType: 0,
		playersSortType: 2,
		activeSorting: 'players',
		playerNameFilter: '',
		isEditingPlayerName: false }"/>
			<bind name="watch" value="'currentSortField'; activeSorting == 'players' ? 'trainingRoom.currPlayersCount' : 'trainingRoom.mapId'"/>
			<bind name="watch" value="'currentSortType'; activeSorting == 'players' ? playersSortType : mapsSortType"/>
			<bind name="collectionDH" value="CC.trainingRoom; 'trainingRoomsAll'"/>
			<bind name="collectionDesign" value="'DES_trainingRoomsAll'; 'trainingRooms'; {
			'filter': ($entity.trainingRoom.ownerName != selfName),
			'sort': [currentSortField],
			'sortOrder': [currentSortType]
		}; ['trainingRoom.evUpdate']"/>
			<bind name="watch" value="'noTrainingRooms'; trainingRooms.length == 0 || !isTrainingRoomsEnabled"/>
			<bind name="stageSize"/>
			<styleClass value="$Fullsize"/>
			<style>
				<align value="center"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'ModalWindowHeaderFullSize'; {	_hideDivider: false,
															_hideCloseButton: false,
															_paddingRight: '16px',
															_paddingLeft: '16px',
															_windowName: toUpperCase(tr('IDS_CUSTOMROOMSLABEL')),
															_request: 'closeModalSelectBattleType',
															_backButtonText: 'IDS_RETURN_TO_DOCK',
															_event: 'hideTrainingRoomsEv'}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<paddingRight value="16px"/>
						<paddingLeft value="16px"/>
					</style>
					<block>
						<style>
							<marginTop value="12px"/>
							<marginBottom value="12px"/>
							<alpha value="0.8"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<block type="text">
							<styleClass value="$TextDefault17NM"/>
							<style>
								<alpha value="0.9"/>
							</style>
							<bind name="text" value="'IDS_CUSTOMROOMSDESCRIPTION1LABEL'"/>
						</block>
					</block>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="1188px"/>
					<height value="100%"/>
					<paddingBottom value="720:40,1080:86ah"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<height value="40px"/>
						<marginTop value="720:16,1080:32ah"/>
						<marginBottom value="2px"/>
					</style>
					<block>
						<styleClass value="$Fullsize"/>
						<bind name="visible" value="!noTrainingRooms || playerNameFilter != '' || isProcessing"/>
						<bind name="transition" value="!noTrainingRooms || playerNameFilter != '' || isProcessing; 0.5; {alpha: 0}; {alpha: 1}"/>
						<block>
							<style>
								<width value="346px"/>
								<height value="100%"/>
							</style>
							<bind name="catch" value="'TextSortingBlock.mapSortChanged'; {mapsSortType: mapsSortType == 2 ? 0 : 2, activeSorting: 'maps'}"/>
							<bind name="instance" value="'TextSortingBlock'; {	_label: 'IDS_TRAINING_MAP', _isSort: true, _sortType: mapsSortType, 
															_sortChangedEvent: 'mapSortChanged', _active: activeSorting == 'maps'}"/>
						</block>
						<block>
							<style>
								<width value="728px"/>
								<height value="100%"/>
								<backgroundColor value="0x01FFFFFF"/>
							</style>
							<block>
								<bind name="visible" value="!(isEditingPlayerName)"/>
								<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'organizer_'"/>
								<bind name="name" value="'organizerSearchBtn'"/>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_SEARCH_BY_ORGANIZER_NAME'}"/>
								<bind name="catch" value="'click'; {isEditingPlayerName: true, isFirstFilter: true}"/>
								<style>
									<height value="100%"/>
									<marginRight value="16px"/>
									<marginLeft value="16px"/>
									<backgroundColor value="0x01ff0000"/>
								</style>
								<block>
									<styleClass value="$MiddleVAligned"/>
									<style>
										<hitTest value="false"/>
									</style>
									<bind name="transition" value="organizer_rollOver; 0.1; {alpha: 0.85}; {alpha: 1.1}; {alpha: 0.85}"/>
									<block type="text">
										<style>
											<multiline value="false"/>
										</style>
										<styleClass value="$TextDefaultBold17NM"/>
										<style>
											<alpha value="0.9"/>
										</style>
										<bind name="text" value="'IDS_TRAINING_ORGANIZER'"/>
									</block>
									<block>
										<style>
											<marginTop value="-3"/>
											<marginLeft value="8px"/>
											<width value="18px"/>
											<height value="18px"/>
											<backgroundImage value="url:../service_kit/buttons/context/search.png"/>
										</style>
									</block>
									<style>
										<flow value="horizontal"/>
									</style>
								</block>
							</block>
							<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
							<bind name="watchDH" value="'nicknameMaxLength'; []; realmConstantsEntity.realmConstants.nicknameMaxLength"/>
							<bind name="watchDH" value="'nicknameRestrict'; []; realmConstantsEntity.realmConstants.nicknameRestrict"/>
							<bind name="watchDH" value="'nicknameRestrictRegexp'; []; realmConstantsEntity.realmConstants.nicknameRestrictRegexp"/>
							<bind name="catch" value="'evWrongSymbolInputed'; {isFirstFilter: false, isWrongSymbol: isFirstFilter ? false : true}"/>
							<bind name="catch" value="'TrainingRoomTextInput.pNameSearchCancelled'; {isEditingPlayerName: false, pNameStr: '', isFirstFilter: true}"/>
							<block>
								<bind name="visible" value="isEditingPlayerName"/>
								<bind name="var" value="{isFirstFilter: true}"/>
								<style>
									<width value="240px"/>
									<marginLeft value="36px"/>
								</style>
								<styleClass value="$MiddleVAligned"/>
								<block>
									<style>
										<position value="absolute"/>
										<top value="0px"/>
										<left value="-26px"/>
									</style>
									<bind name="watch" value="'validationState'; isProcessing	? 'validation' :
															isWrongName		? 'invalid'
																			: ''"/>
									<bind name="instance" value="'ValidationState'; (pNameStr.length &gt; 0) ? {_validationState: validationState} : null"/>
								</block>
								<block>
									<style>
										<width value="100%"/>
									</style>
									<bind name="instance" value="'TrainingRoomTextInputPlayerName'; isEditingPlayerName ? {	onEnterEvent: 'playerFilterInputEnter',
																										onInputStrChangedEvent: 'pNameStrChanged',
																										onCancelEvent: 'pNameSearchCancelled',
																										_onEnterTooltipText: 'IDS_HINT_FIND',
																										_disableCloseBtn: false,
																										_maxChars: nicknameMaxLength,
																										_restrict: nicknameRestrict,
																										_restrictRegexp: nicknameRestrictRegexp,
																										_defaultText: 'IDS_ENTER_PLAYER_NAME',
																										_closeButtonTooltipText: 'IDS_CANCEL_ORGANIZER_SEARCH',
																										_defaultFocused: true,
																										_focusIndex: 1}
																									: null"/>
								</block>
								<bind name="catch" value="'pNameStr' + varChanged; {playerNameFilter: pNameStr, isWrongName: pNameStr.length &lt; 3 &amp;&amp; pNameStr != '', isWrongSymbol: false, isFirstFilter: false}; 'evOwnerNameFilterChanged'"/>
								<bind name="catch" value="'TrainingRoomTextInput.pNameStrChanged'"/>
								<bind name="request" value="'evOwnerNameFilterChanged'; !isWrongName ? 'setOwnerNameFilter' : ''; {ownerName: playerNameFilter}"/>
								<block>
									<styleClass value="$MiddleAlignedAbsolutely"/>
									<style>
										<position value="absolute"/>
										<width value="350px"/>
										<bottom value="24px"/>
									</style>
									<bind name="instance" value="'WrongTextInputNotification'; 	(isWrongName || isWrongSymbol) &amp;&amp; !isFirstFilter	? {	_maxWidth : 350, _startTop: 10,
																												_text: isWrongSymbol ? tr('IDS_LOGIN_SCREEN_WRONG_SYMBOL_INPUT')
																																	: tr('IDS_LOGIN_SCREEN_NAME_RESTRICTIONS')
																											}
																											: null"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
						</block>
						<block>
							<style>
								<width value="114px"/>
								<height value="100%"/>
							</style>
							<bind name="catch" value="'TextSortingBlock.playersSortChanged'; {playersSortType: playersSortType == 2 ? 0
																																	: 2,
																		activeSorting: 'players'}"/>
							<bind name="instance" value="'TextSortingBlock'; {	_label: 'IDS_PLAYERS', _isSort: true, _align: 'right', 
															_sortType: playersSortType, _sortChangedEvent: 'playersSortChanged',
															_active: activeSorting == 'players'}"/>
						</block>
						<block>
							<style>
								<width value="100%"/>
								<position value="absolute"/>
								<bottom value="-2"/>
							</style>
							<block className="HorizontalDivider">
								<styleClass value="$PxHorizontalCorrection"/>
								<style>
									<width value="100%"/>
									<height value="2px"/>
									<backgroundSize value="fill"/>
									<marginTop value="1px"/>
									<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
								</style>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$Fullsize"/>
					<block>
						<bind name="visible" value="!noTrainingRooms"/>
						<styleClass value="$Fullsize"/>
						<styleClass value="$DefaultScrollBar"/>
						<bind name="repeat" value="trainingRooms; 'TrainingRoomListItemRenderer'; {}"/>
					</block>
					<block>
						<bind name="visible" value="noTrainingRooms"/>
						<bind name="transition" value="noTrainingRooms; 0.5; {alpha: 0}; {alpha: 1}"/>
						<styleClass value="$Fullsize"/>
						<style>
							<alpha value="0.85"/>
						</style>
						<bind name="instance" value="'NoItemsComeBackLater'; noTrainingRooms ? { _disableSubText: true, _type: noTrainingRooms &amp;&amp; playerNameFilter == '' &amp;&amp; !isProcessing ? 'TRAINING_ROOMS_CREATED' : 'TRAINING_ROOMS_SUITED_FOR_REQUEST' }
																		: null"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<align value="center"/>
						<marginTop value="720:24,1080:32ah"/>
						<width value="100%"/>
						<marginBottom value="16px"/>
					</style>
					<bind name="tooltip" value="'SimpleStatusTooltip'; !isTrainingRoomsEnabled	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING,
																				_text: battleTypeDenyReasons[0]}
																			: null"/>
					<bind name="instance" value="'DefaultButton';	{	_width: '164px',
													_label: 'IDS_CREATEROOMBUTTON',
													_name: 'ButtonCreateTrainingRoom',
													_enabled: isTrainingRoomsEnabled,
													_dispatch: 'hideTrainingRoomsEv',
													_action: 'createTrainingRoomWindow', 
													_actionParams: data.callbackData[0],
													_focusIndex: 0,
													_defaultFocused: true}
												"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowTrainingRoomsContent">
		<bind name="action" value="'startShow'; 'startUpdateTrainingRooms'; {}"/>
		<bind name="action" value="'startHide'; 'stopUpdateTrainingRooms'; {}"/>
		<bind name="action" value="'hideTrainingRoomsEv'; 'hideTrainingRooms'; {}"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="primaryEntityDH" value="'battleTypeEntity'; CC.battleType; str(SC.Common.BATTLE_TYPES.TRAINING_BATTLE + '_0')"/>
		<bind name="watchDH" value="'battleTypeDenyReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.battleTypeReasons"/>
		<bind name="watch" value="'isTrainingRoomsEnabled'; !divisionDataEntity"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfName'; ['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="firstEntityDH" value="'roomsListWindowStateEntity'; CC.trainingRoomsListWindowState"/>
		<bind name="watchDH" value="'isProcessing'; ['roomsListWindowStateEntity.trainingRoomsListWindowState.evUpdate']; roomsListWindowStateEntity.trainingRoomsListWindowState.isProcessing"/>
		<bind name="var" value="{
		mapsSortType: 0,
		playersSortType: 2,
		activeSorting: 'players',
		playerNameFilter: '',
		isEditingPlayerName: false }"/>
		<bind name="watch" value="'currentSortField'; activeSorting == 'players' ? 'trainingRoom.currPlayersCount' : 'trainingRoom.mapId'"/>
		<bind name="watch" value="'currentSortType'; activeSorting == 'players' ? playersSortType : mapsSortType"/>
		<bind name="collectionDH" value="CC.trainingRoom; 'trainingRoomsAll'"/>
		<bind name="collectionDesign" value="'DES_trainingRoomsAll'; 'trainingRooms'; {
			'filter': ($entity.trainingRoom.ownerName != selfName),
			'sort': [currentSortField],
			'sortOrder': [currentSortType]
		}; ['trainingRoom.evUpdate']"/>
		<bind name="watch" value="'noTrainingRooms'; trainingRooms.length == 0 || !isTrainingRoomsEnabled"/>
		<bind name="stageSize"/>
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'ModalWindowHeaderFullSize'; {	_hideDivider: false,
															_hideCloseButton: false,
															_paddingRight: '16px',
															_paddingLeft: '16px',
															_windowName: toUpperCase(tr('IDS_CUSTOMROOMSLABEL')),
															_request: 'closeModalSelectBattleType',
															_backButtonText: 'IDS_RETURN_TO_DOCK',
															_event: 'hideTrainingRoomsEv'}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingRight value="16px"/>
					<paddingLeft value="16px"/>
				</style>
				<block>
					<style>
						<marginTop value="12px"/>
						<marginBottom value="12px"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="'IDS_CUSTOMROOMSDESCRIPTION1LABEL'"/>
					</block>
				</block>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="1188px"/>
				<height value="100%"/>
				<paddingBottom value="720:40,1080:86ah"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<height value="40px"/>
					<marginTop value="720:16,1080:32ah"/>
					<marginBottom value="2px"/>
				</style>
				<block>
					<styleClass value="$Fullsize"/>
					<bind name="visible" value="!noTrainingRooms || playerNameFilter != '' || isProcessing"/>
					<bind name="transition" value="!noTrainingRooms || playerNameFilter != '' || isProcessing; 0.5; {alpha: 0}; {alpha: 1}"/>
					<block>
						<style>
							<width value="346px"/>
							<height value="100%"/>
						</style>
						<bind name="catch" value="'TextSortingBlock.mapSortChanged'; {mapsSortType: mapsSortType == 2 ? 0 : 2, activeSorting: 'maps'}"/>
						<bind name="instance" value="'TextSortingBlock'; {	_label: 'IDS_TRAINING_MAP', _isSort: true, _sortType: mapsSortType, 
															_sortChangedEvent: 'mapSortChanged', _active: activeSorting == 'maps'}"/>
					</block>
					<block>
						<style>
							<width value="728px"/>
							<height value="100%"/>
							<backgroundColor value="0x01FFFFFF"/>
						</style>
						<block>
							<bind name="visible" value="!(isEditingPlayerName)"/>
							<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'organizer_'"/>
							<bind name="name" value="'organizerSearchBtn'"/>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_SEARCH_BY_ORGANIZER_NAME'}"/>
							<bind name="catch" value="'click'; {isEditingPlayerName: true, isFirstFilter: true}"/>
							<style>
								<height value="100%"/>
								<marginRight value="16px"/>
								<marginLeft value="16px"/>
								<backgroundColor value="0x01ff0000"/>
							</style>
							<block>
								<styleClass value="$MiddleVAligned"/>
								<style>
									<hitTest value="false"/>
								</style>
								<bind name="transition" value="organizer_rollOver; 0.1; {alpha: 0.85}; {alpha: 1.1}; {alpha: 0.85}"/>
								<block type="text">
									<style>
										<multiline value="false"/>
									</style>
									<styleClass value="$TextDefaultBold17NM"/>
									<style>
										<alpha value="0.9"/>
									</style>
									<bind name="text" value="'IDS_TRAINING_ORGANIZER'"/>
								</block>
								<block>
									<style>
										<marginTop value="-3"/>
										<marginLeft value="8px"/>
										<width value="18px"/>
										<height value="18px"/>
										<backgroundImage value="url:../service_kit/buttons/context/search.png"/>
									</style>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
						</block>
						<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
						<bind name="watchDH" value="'nicknameMaxLength'; []; realmConstantsEntity.realmConstants.nicknameMaxLength"/>
						<bind name="watchDH" value="'nicknameRestrict'; []; realmConstantsEntity.realmConstants.nicknameRestrict"/>
						<bind name="watchDH" value="'nicknameRestrictRegexp'; []; realmConstantsEntity.realmConstants.nicknameRestrictRegexp"/>
						<bind name="catch" value="'evWrongSymbolInputed'; {isFirstFilter: false, isWrongSymbol: isFirstFilter ? false : true}"/>
						<bind name="catch" value="'TrainingRoomTextInput.pNameSearchCancelled'; {isEditingPlayerName: false, pNameStr: '', isFirstFilter: true}"/>
						<block>
							<bind name="visible" value="isEditingPlayerName"/>
							<bind name="var" value="{isFirstFilter: true}"/>
							<style>
								<width value="240px"/>
								<marginLeft value="36px"/>
							</style>
							<styleClass value="$MiddleVAligned"/>
							<block>
								<style>
									<position value="absolute"/>
									<top value="0px"/>
									<left value="-26px"/>
								</style>
								<bind name="watch" value="'validationState'; isProcessing	? 'validation' :
															isWrongName		? 'invalid'
																			: ''"/>
								<bind name="instance" value="'ValidationState'; (pNameStr.length &gt; 0) ? {_validationState: validationState} : null"/>
							</block>
							<block>
								<style>
									<width value="100%"/>
								</style>
								<bind name="instance" value="'TrainingRoomTextInputPlayerName'; isEditingPlayerName ? {	onEnterEvent: 'playerFilterInputEnter',
																										onInputStrChangedEvent: 'pNameStrChanged',
																										onCancelEvent: 'pNameSearchCancelled',
																										_onEnterTooltipText: 'IDS_HINT_FIND',
																										_disableCloseBtn: false,
																										_maxChars: nicknameMaxLength,
																										_restrict: nicknameRestrict,
																										_restrictRegexp: nicknameRestrictRegexp,
																										_defaultText: 'IDS_ENTER_PLAYER_NAME',
																										_closeButtonTooltipText: 'IDS_CANCEL_ORGANIZER_SEARCH',
																										_defaultFocused: true,
																										_focusIndex: 1}
																									: null"/>
							</block>
							<bind name="catch" value="'pNameStr' + varChanged; {playerNameFilter: pNameStr, isWrongName: pNameStr.length &lt; 3 &amp;&amp; pNameStr != '', isWrongSymbol: false, isFirstFilter: false}; 'evOwnerNameFilterChanged'"/>
							<bind name="catch" value="'TrainingRoomTextInput.pNameStrChanged'"/>
							<bind name="request" value="'evOwnerNameFilterChanged'; !isWrongName ? 'setOwnerNameFilter' : ''; {ownerName: playerNameFilter}"/>
							<block>
								<styleClass value="$MiddleAlignedAbsolutely"/>
								<style>
									<position value="absolute"/>
									<width value="350px"/>
									<bottom value="24px"/>
								</style>
								<bind name="instance" value="'WrongTextInputNotification'; 	(isWrongName || isWrongSymbol) &amp;&amp; !isFirstFilter	? {	_maxWidth : 350, _startTop: 10,
																												_text: isWrongSymbol ? tr('IDS_LOGIN_SCREEN_WRONG_SYMBOL_INPUT')
																																	: tr('IDS_LOGIN_SCREEN_NAME_RESTRICTIONS')
																											}
																											: null"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
					<block>
						<style>
							<width value="114px"/>
							<height value="100%"/>
						</style>
						<bind name="catch" value="'TextSortingBlock.playersSortChanged'; {playersSortType: playersSortType == 2 ? 0
																																	: 2,
																		activeSorting: 'players'}"/>
						<bind name="instance" value="'TextSortingBlock'; {	_label: 'IDS_PLAYERS', _isSort: true, _align: 'right', 
															_sortType: playersSortType, _sortChangedEvent: 'playersSortChanged',
															_active: activeSorting == 'players'}"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<position value="absolute"/>
							<bottom value="-2"/>
						</style>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$Fullsize"/>
				<block>
					<bind name="visible" value="!noTrainingRooms"/>
					<styleClass value="$Fullsize"/>
					<styleClass value="$DefaultScrollBar"/>
					<bind name="repeat" value="trainingRooms; 'TrainingRoomListItemRenderer'; {}"/>
				</block>
				<block>
					<bind name="visible" value="noTrainingRooms"/>
					<bind name="transition" value="noTrainingRooms; 0.5; {alpha: 0}; {alpha: 1}"/>
					<styleClass value="$Fullsize"/>
					<style>
						<alpha value="0.85"/>
					</style>
					<bind name="instance" value="'NoItemsComeBackLater'; noTrainingRooms ? { _disableSubText: true, _type: noTrainingRooms &amp;&amp; playerNameFilter == '' &amp;&amp; !isProcessing ? 'TRAINING_ROOMS_CREATED' : 'TRAINING_ROOMS_SUITED_FOR_REQUEST' }
																		: null"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<align value="center"/>
					<marginTop value="720:24,1080:32ah"/>
					<width value="100%"/>
					<marginBottom value="16px"/>
				</style>
				<bind name="tooltip" value="'SimpleStatusTooltip'; !isTrainingRoomsEnabled	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING,
																				_text: battleTypeDenyReasons[0]}
																			: null"/>
				<bind name="instance" value="'DefaultButton';	{	_width: '164px',
													_label: 'IDS_CREATEROOMBUTTON',
													_name: 'ButtonCreateTrainingRoom',
													_enabled: isTrainingRoomsEnabled,
													_dispatch: 'hideTrainingRoomsEv',
													_action: 'createTrainingRoomWindow', 
													_actionParams: data.callbackData[0],
													_focusIndex: 0,
													_defaultFocused: true}
												"/>
			</block>
		</block>
	</block>
	<block className="TextSortingBlock">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dispatch" value="'mouseDown'; 'TextSortingBlock.' + _sortChangedEvent; {}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<backgroundColor value="0x01FFFFFF"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: _label + '_SORT_TOOLTIP'}"/>
		<block>
			<bind name="visible" value="_active"/>
			<bind name="transition" value="rollOver; 0.1; {alpha: 0.5}; {alpha: 1}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x20FFFFFF"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!_active &amp;&amp; _isSort"/>
			<bind name="transition" value="rollOver; 0.1; {alpha: 0}; {alpha: 1}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x10FFFFFF"/>
			</style>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="style" value="'paddingLeft'; _align != 'right' ? '16px' : '0px'"/>
			<bind name="style" value="'paddingRight'; _align == 'right' ? '16px' : '0px'"/>
			<bind name="style" value="'align'; _align ? _align : 'left'"/>
			<style>
				<flow value="horizontal"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<bind name="transition" value="rollOver; 0.1; {alpha: 0.85}; {alpha: 1}; {alpha: 0.85}"/>
					<styleClass value="$TextDefaultBold17NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="_label"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="_active"/>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<style>
						<marginTop value="7px"/>
						<marginBottom value="-2px"/>
						<marginLeft value="6px"/>
						<hitTest value="false"/>
					</style>
					<bind name="transition" value="_active; 0.05; {alpha: 0}; {alpha: 1}"/>
					<block className="button_expand_v" type="native">
						<bind name="scaleY" value="-1"/>
						<bind name="style" value="'alpha'; _sortType == 0 ? '1.0' : '0.6'"/>
					</block>
					<block className="button_expand_v" type="native">
						<style>
							<position value="absolute"/>
						</style>
						<bind name="style" value="'alpha'; _sortType == 2 ? '1.0' : '0.6'"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="TrainingRoomListItemRenderer">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="dataRefDH" value="'entityRoom'; '$dataRef.ref'"/>
		<bind name="clickSplit"/>
		<bind name="watch" value="'trainingRoomComponent'; entityRoom.trainingRoom"/>
		<bind name="watchDH" value="'roomMapId'; 			['trainingRoomComponent.evUpdate']; trainingRoomComponent.mapId"/>
		<bind name="watchDH" value="'description'; 			['trainingRoomComponent.evUpdate']; trainingRoomComponent.description"/>
		<bind name="watchDH" value="'duration'; 				['trainingRoomComponent.evUpdate']; trainingRoomComponent.duration"/>
		<bind name="watchDH" value="'currPlayersCount'; 		['trainingRoomComponent.evUpdate']; trainingRoomComponent.currPlayersCount"/>
		<bind name="watchDH" value="'teamSize'; 				['trainingRoomComponent.evUpdate']; trainingRoomComponent.teamSize"/>
		<bind name="watchDH" value="'scenario'; 				['trainingRoomComponent.evUpdate']; trainingRoomComponent.scenario"/>
		<bind name="watchDH" value="'isObserversAvailable'; 	['trainingRoomComponent.evUpdate']; trainingRoomComponent.observersAvailable"/>
		<bind name="watchDH" value="'isEnemyShipsHidden'; 	['trainingRoomComponent.evUpdate']; trainingRoomComponent.hideShips"/>
		<bind name="watchDH" value="'ownerName'; 			['trainingRoomComponent.evUpdate']; trainingRoomComponent.ownerName"/>
		<bind name="watchDH" value="'password'; 				['entityRoom.passwordedRoom.evUpdate']; entityRoom.passwordedRoom.password"/>
		<bind name="primaryEntityDH" value="'mapInfoEntity'; CC.mapInfo; roomMapId"/>
		<bind name="firstEntityDH" value="'chatRestrictionsEntity'; CC.chatRestrictions"/>
		<bind name="watchDH" value="'isDescriptionTextFieldsBlocked'; ['chatRestrictionsEntity.chatRestrictions.evBlockDescriptionTextFieldsChanged'];
							chatRestrictionsEntity.chatRestrictions.isBlockDescriptionTextFields"/>
		<bind name="watch" value="'isPassworded'; password ? true : false"/>
		<bind name="watch" value="'isDescriptionVisible'; description &amp;&amp; currentRealm != 'CN' &amp;&amp; !isDescriptionTextFieldsBlocked"/>
		<bind name="primaryEntityDH" value="'preBattleEntity'; CC.preBattle; entityRoom.preBattle.id"/>
		<bind name="watchDH" value="'isInBattle'; ['preBattleEntity.preBattle.evStatusChanged']; preBattleEntity.preBattle.isInBattle"/>
		<bind name="action" value="'click'; isPassworded ? 'joinPasswordedRoom' : 'joinTrainingRoom'; { preBattleId: entityRoom.preBattle.id }"/>
		<style>
			<width value="100%"/>
			<height value="96px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="346px"/>
				<height value="100%"/>
				<marginLeft value="1px"/>
				<marginBottom value="1px"/>
				<position value="absolute"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<backgroundSize value="cover"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../bg/training_room_maps_preview/' + mapInfoEntity.mapInfo.gpName + '.jpg'"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0x75000000"/>
					<hitTest value="false"/>
				</style>
			</block>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="name" value="'trainingRoomList_' + $index"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="tooltip" value="'TrainingRoomTooltip'; {_trainingRoomComponent: trainingRoomComponent}"/>
			<bind name="transition" value="rollOver || _rollOver; 0.1; {alpha: 0}; {alpha: 0.9}"/>
		</block>
		<block>
			<style>
				<width value="346px"/>
				<height value="100%"/>
				<hitTest value="false"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<block>
					<style>
						<width value="100%"/>
						<paddingLeft value="16px"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<style>
							<width value="100%"/>
							<align value="middle"/>
						</style>
						<block>
							<bind name="visible" value="isInBattle"/>
							<style>
								<marginRight value="4px"/>
								<width value="24px"/>
								<height value="24px"/>
								<marginTop value="-11px"/>
								<marginBottom value="-11px"/>
								<backgroundImage value="url:../service_kit/training_room/icon_in_training_battle.png"/>
							</style>
						</block>
						<block type="text">
							<styleClass value="$TextDefaultBold19NM"/>
							<style>
								<width value="100%"/>
								<leading value="-2"/>
								<alpha value="0.9"/>
							</style>
							<bind name="text" value="'IDS_' + toUpperCase(mapInfoEntity.mapInfo.name)"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<width value="100%"/>
							<alpha value="0.85"/>
							<leading value="-2"/>
							<marginTop value="8px"/>
						</style>
						<bind name="text" value="scenario != '' ? 'IDS_SCENARIO_' + toUpperCase(scenario) : ''"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="isPassworded || isObserversAvailable || isEnemyShipsHidden"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginRight value="4px"/>
					<align value="right"/>
				</style>
				<block>
					<block>
						<bind name="visible" value="isEnemyShipsHidden"/>
						<style>
							<marginLeft value="4px"/>
							<width value="24px"/>
							<height value="24px"/>
							<backgroundImage value="url:../service_kit/training_room/icon_ship_not_detected.png"/>
						</style>
					</block>
					<block>
						<bind name="visible" value="isObserversAvailable"/>
						<style>
							<marginLeft value="4px"/>
							<width value="24px"/>
							<height value="24px"/>
							<backgroundImage value="url:../service_kit/training_room/icon_observer.png"/>
						</style>
					</block>
					<block>
						<bind name="visible" value="isPassworded"/>
						<style>
							<marginLeft value="4px"/>
							<width value="24px"/>
							<height value="24px"/>
							<backgroundImage value="url:../service_kit/training_room/icon_locked_room.png"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="354px"/>
				<paddingLeft value="16px"/>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<bind name="name" value="'ownerName_' + ownerName"/>
				<style>
					<width value="100%"/>
					<alpha value="0.9"/>
					<marginTop value="-4px"/>
					<noTranslate value="true"/>
				</style>
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="text" value="ownerName"/>
			</block>
			<block type="text">
				<bind name="name" value="description ? 'roomDescription_' + description : ''"/>
				<bind name="visible" value="isDescriptionVisible"/>
				<styleClass value="$TextDefaultNM"/>
				<style>
					<width value="100%"/>
					<alpha value="0.85"/>
					<leading value="-2"/>
					<marginTop value="10px"/>
					<noTranslate value="true"/>
				</style>
				<bind name="text" value="description"/>
			</block>
		</block>
		<bind name="watchDH" value="'selectedFilters'; ['entityRoom.shipListRestrictions.evUpdate']; entityRoom.shipListRestrictions.selectedFilters"/>
		<bind name="watchDH" value="'typesCount'; ['entityRoom.divisionRestrictions.evUpdate']; entityRoom.divisionRestrictions.typesCount"/>
		<bind name="primaryEntityDH" value="'defaultRestrictionsEntity'; CC.battleTypeCommonRestrictions; SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watchDH" value="'defaultTypesCount' ; ['defaultRestrictionsEntity.divisionRestrictions.evUpdate']; defaultRestrictionsEntity.divisionRestrictions.typesCount"/>
		<bind name="watch" value="'isCarriersRestricted'; typesCount[ShipTypes.AircraftCarrier] &amp;&amp; typesCount[ShipTypes.AircraftCarrier][1] != defaultTypesCount[ShipTypes.AircraftCarrier][1]"/>
		<bind name="watch" value="'isBattleShipsRestricted'; typesCount[ShipTypes.BattleShip] &amp;&amp; typesCount[ShipTypes.BattleShip][1] != defaultTypesCount[ShipTypes.BattleShip][1]"/>
		<bind name="watch" value="'isCruisersRestricted'; typesCount[ShipTypes.Cruiser] &amp;&amp; typesCount[ShipTypes.Cruiser][1] != defaultTypesCount[ShipTypes.Cruiser][1]"/>
		<bind name="watch" value="'isDestroyersRestricted'; typesCount[ShipTypes.Destroyer] &amp;&amp; typesCount[ShipTypes.Destroyer][1] != defaultTypesCount[ShipTypes.Destroyer][1]"/>
		<bind name="watch" value="'isSubmarinesRestricted'; typesCount[ShipTypes.Submarine] &amp;&amp; typesCount[ShipTypes.Submarine][1] != defaultTypesCount[ShipTypes.Submarine][1]"/>
		<bind name="watch" value="'isAnyShipRestricted'; isCarriersRestricted || isBattleShipsRestricted || isCruisersRestricted || isDestroyersRestricted || isSubmarinesRestricted"/>
		<bind name="contains" value="typesCount; $item[1] == -1; 'hasForbiddenShipType'"/>
		<bind name="watch" value="'hasTrainingRoomRestrictions'; ((selectedFilters.length &gt; 0) || isShipRestrictionsVisible)"/>
		<bind name="watch" value="'isShipRestrictionsVisible'; isAnyShipRestricted &amp;&amp; hasForbiddenShipType"/>
		<block>
			<style>
				<width value="300px"/>
				<height value="100%"/>
				<hitTest value="false"/>
				<align value="right|middle"/>
			</style>
			<bind name="instance" value="'TrainingRoomAppliedFilter'; hasTrainingRoomRestrictions	? {	_width: '260px', _trainingRoomEntityId: entityRoom.id, 
																						_showShipRestrictions: isShipRestrictionsVisible,
																						_maxFiltersCount: 20, _align: 'right'}
																					: null"/>
		</block>
		<block>
			<style>
				<width value="88px"/>
				<height value="100%"/>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'TextDataBlock'; {_align: 'right', _text: (duration / 60) + ' ' + tr('IDS_MINUTE')}"/>
		</block>
		<block>
			<style>
				<width value="100px"/>
				<height value="100%"/>
				<marginTop value="41px"/>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<right value="16px"/>
				</style>
				<bind name="instance" value="'CurrentTotalIndicator'; {	_currentTextClass: '$TextDefaultBold19NM', _totalTextClass: '$TextDefaultBold17NM', 
														_colorClass: '$FontColorWhite', _current: currPlayersCount, _total: teamSize * 2}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="0"/>
				<hitTest value="false"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_view_object -->
	<block className="ModalWindowViewCollectionObject">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ModalWindowViewObject'; {}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowViewObject">
		<bind name="primaryEntityDH" value="'collectionCardEntity'; CC.collectionCard; $root.objID"/>
		<bind name="watchDH" value="'name';[]; collectionCardEntity.collectionCard.name"/>
		<bind name="watchDH" value="'collectionName';[]; collectionCardEntity.collectionCard.collectionName"/>
		<bind name="watchDH" value="'hasVideo';[]; collectionCardEntity.collectionCard.hasVideo"/>
		<bind name="watch" value="'collectionNameQuotes'; (tr('IDS_' +  toUpperCase(collectionName) + '_QUOTES'))"/>
		<bind name="var" value="{ windowAppearLag: 0.15 }"/>
		<style>
			<width value="1050px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeader'; { 	_header: subst('IDS_COLLECTION_NAME_NO_ENTER', [], { _collectionName: collectionNameQuotes }),
												_headerWidth: '100%', _showInnerCloseButton: true}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<height value="600px"/>
				<marginTop value="720:24,1080:32ah"/>
			</style>
			<block>
				<style>
					<width value="600px"/>
					<height value="600px"/>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../collections/object_icons/big/' + name + '.png'"/>
			</block>
			<block>
				<style>
					<width value="340px"/>
					<marginLeft value="24px"/>
					<height value="100%"/>
				</style>
				<block type="text">
					<style>
						<alpha value="0.9"/>
						<width value="100%"/>
						<leading value="-3"/>
						<marginBottom value="12px"/>
					</style>
					<styleClass value="$TextDefaultBold23NM"/>
					<bind name="text" value="toUpperCase('IDS_' + name)"/>
				</block>
				<block>
					<bind name="watch" value="'descriptionStr'; '&lt;body&gt;' + tr(toUpperCase('IDS_' + name + '_DESCRIPTION')) + '&lt;/body&gt;'"/>
					<styleClass value="$DefaultScrollBar"/>
					<style>
						<width value="100%"/>
						<height value="100%"/>
					</style>
					<block>
						<style>
							<marginBottom value="16px"/>
						</style>
						<block type="text">
							<style>
								<alpha value="0.75"/>
								<width value="330px"/>
								<marginTop value="16px"/>
								<leading value="-0.05"/>
								<styleSheet value="h3
								{	color: #FFFFFF; 
									font-family: $WWSDefaultFontBold;
								}"/>
							</style>
							<bind name="class" value="'$TextDefault17NM'"/>
							<bind name="text" value="descriptionStr"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="fade" value="hasVideo; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 1; 0.15"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
					<bind name="transition" value="mouseDown; 0.15; {alpha: 1}; {alpha: 0.7}"/>
					<bind name="action" value="'click'; 'navigateTo'; {	route: SC.Ui_windows.ROUTE.PORTAL,
														data: {url: 'collection_video_' + name + '_InGame'}}"/>
					<bind name="soundOn" value="'click'; 'open_muted'; 'window'"/>
					<style>
						<marginTop value="32"/>
						<backgroundColor value="0x01000000"/>
					</style>
					<block>
						<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.15; {alpha: 0.7}; {alpha: 1}"/>
						<block className="button_play_video" type="native">
							<bind name="gotoAndStop!" value="'up'"/>
							<style>
								<hitTest value="false"/>
							</style>
						</block>
						<block>
							<style>
								<marginLeft value="8"/>
								<marginTop value="5px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefault17NM"/>
								<bind name="text" value="'IDS_PLAY_COLLECTION_VIDEO'"/>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:16,1080:64ah"/>
			</style>
			<bind name="instance" value="'DefaultButton';	{	_label: 'IDS_CLOSE_UPPER_CASE',
												_name: 'btn_cancel',
												_enabled: true,
												_focusIndex: 0,
												_defaultFocused: true
											}"/>
		</block>
	</block>

	<!-- modal_window_battle_replay_finished -->
	<block className="ReplayIconButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="action" value="'click'; _action; {}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _enabled	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
															_text: _tooltip } : null"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; !_enabled	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
															_text: _tooltip + '_DISABLED' } : null"/>
		<block>
			<bind name="transition" value="!_enabled; 0.07; {alpha: 0.85}; {alpha: 0.5}"/>
			<bind name="transition" value="_enabled &amp;&amp; rollOver &amp;&amp; !(mouseDown); 0.07; {alpha: 0.85}; {alpha: 1.0}"/>
			<bind name="transition" value="_enabled &amp;&amp; mouseDown; 0.07; {alpha: 0.85}; {alpha: 0.7}"/>
			<style>
				<width value="128px"/>
				<height value="128px"/>
				<margin value="8px"/>
				<backgroundColor value="0x00FFFFFF"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="60px"/>
					<height value="60px"/>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/player_controls/button_' + _icon + '_big.png'"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowBattleReplayFinished">
		<bind name="firstEntityDH" value="'replayPlaybackDataEntity'; CC.replayPlaybackData"/>
		<bind name="watchDH" value="'hasNextReplay'; ['replayPlaybackDataEntity.replayPlaybackData.evUpdateReplayList']; replayPlaybackDataEntity.replayPlaybackData.hasNextReplay"/>
		<bind name="watchDH" value="'hasPrevReplay'; ['replayPlaybackDataEntity.replayPlaybackData.evUpdateReplayList']; replayPlaybackDataEntity.replayPlaybackData.hasPrevReplay"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMapCustom">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap_gamemenu" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<styleClass value="$Fullsize"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<bind name="var" value="{ windowAppearLag: 0.2 }"/>
		<block>
			<styleClass value="$EyeLevelVAligned"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="450px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'ReplayIconButton'; (hasNextReplay || hasPrevReplay) ? 
												{ _icon: 'jump_previous',
												  _tooltip: 'IDS_REPLAYS_PLAYBACK_PREV_REPLAY_DESC',
												  _action: 'replayPrev',
												  _enabled: hasPrevReplay} : null"/>
				<bind name="instance" value="'ReplayIconButton'; { _icon: 'replay',
												  _tooltip: 'IDS_REPLAYS_PLAYBACK_RESTART_DESC',
												  _action: 'replayRewind',
												  _enabled: true}"/>
				<bind name="instance" value="'ReplayIconButton'; (hasNextReplay || hasPrevReplay) ? 
												{ _icon: 'jump_next',
												  _tooltip: 'IDS_REPLAYS_PLAYBACK_NEXT_REPLAY_DESC',
												  _action: 'replayNext',
												  _enabled: hasNextReplay} : null"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_window_battle_replay_tutorial -->
	<block className="TutorialHintDivider">
		<style>
			<width value="100%"/>
			<paddingTop value="8px"/>
			<paddingBottom value="8px"/>
			<paddingLeft value="-48px"/>
			<paddingRight value="-48px"/>
		</style>
		<bind name="instance" value="'HorizontalDivider'; {}"/>
	</block>
	<block className="ModalWindowBattleReplayTutorial">
		<bind name="name" value="'ModalWindowBattleReplayTutorial'"/>
		<styleClass value="$Fullsize"/>
		<bind name="var" value="{ windowAppearLag: 0.2 }"/>
		<bind name="appear" value="'startShow'; 0.15; 0.2;	{alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 0.15; 0.3;	{alpha: 1}; {alpha: 0}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$BattleModalTint"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="680px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<styleClass value="$BattleModalWindowBG"/>
				</block>
				<block className="contrast_panel" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="16px"/>
					<marginLeft value="16px"/>
					<marginRight value="16px"/>
				</style>
				<bind name="appear" value="'startShow'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_REPLAYS_PLAYBACK_TUTORIAL_HEADER', _headerWidth: '100%', _innerCloseButton: true, _hideDivider: true}"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-1px"/>
				</style>
				<bind name="instance" value="'HorizontalDivider'; {}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="12px"/>
					<paddingLeft value="48px"/>
					<paddingRight value="48px"/>
				</style>
				<block>
					<styleClass value="$TutorialHintBlock"/>
					<block className="TutorialHintHeader">
						<style>
							<width value="180px"/>
							<paddingTop value="10px"/>
							<paddingRight value="16px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold17NM"/>
							<alpha value="0.75"/>
							<style>
								<width value="100%"/>
								<leading value="-3"/>
							</style>
							<default_text value="IDS_REPLAYS_PLAYBACK_UI"/>
						</block>
					</block>
					<block className="HotkeysTutorialUI" type="ublock">
						<bind name="build!" value="{}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block className="TutorialHintDivider">
					<style>
						<width value="100%"/>
						<paddingTop value="8px"/>
						<paddingBottom value="8px"/>
						<paddingLeft value="-48px"/>
						<paddingRight value="-48px"/>
					</style>
					<bind name="instance" value="'HorizontalDivider'; {}"/>
				</block>
				<block>
					<styleClass value="$TutorialHintBlock"/>
					<block className="TutorialHintHeader">
						<style>
							<width value="180px"/>
							<paddingTop value="10px"/>
							<paddingRight value="16px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold17NM"/>
							<alpha value="0.75"/>
							<style>
								<width value="100%"/>
								<leading value="-3"/>
							</style>
							<default_text value="IDS_REPLAYS_PLAYBACK_PLAYER"/>
						</block>
					</block>
					<block className="HotkeysTutorialPlayback" type="ublock">
						<bind name="build!" value="{}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block className="TutorialHintDivider">
					<style>
						<width value="100%"/>
						<paddingTop value="8px"/>
						<paddingBottom value="8px"/>
						<paddingLeft value="-48px"/>
						<paddingRight value="-48px"/>
					</style>
					<bind name="instance" value="'HorizontalDivider'; {}"/>
				</block>
				<block>
					<styleClass value="$TutorialHintBlock"/>
					<block className="TutorialHintHeader">
						<style>
							<width value="180px"/>
							<paddingTop value="10px"/>
							<paddingRight value="16px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold17NM"/>
							<alpha value="0.75"/>
							<style>
								<width value="100%"/>
								<leading value="-3"/>
							</style>
							<default_text value="IDS_REPLAYS_PLAYBACK_CAMERA"/>
						</block>
					</block>
					<block className="HotkeysTutorialCamera" type="ublock">
						<bind name="build!" value="{}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="8px"/>
				</style>
				<bind name="instance" value="'HorizontalDivider'; {}"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<paddingTop value="12px"/>
				</style>
				<block className="DefaultButtonModal">
					<style>
						<marginBottom value="6px"/>
						<marginTop value="6px"/>
					</style>
					<bind name="name" value="'Modal_window_action_Button' + 'IDS_GO_TO_PLAYBACK_UPPERCASE'"/>
					<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_GO_TO_PLAYBACK_UPPERCASE',
													_name: 'btn_cancel',
													_focusIndex: 0,
													_defaultFocused: true}"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
				<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
				<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
				<bind name="appear" value="'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<style>
					<marginTop value="4px"/>
					<marginBottom value="20px"/>
				</style>
				<bind name="watch" value="'hidePlaybackTutorial'; (userPrefs.hidePlaybackTutorial == null) ? false : userPrefs.hidePlaybackTutorial"/>
				<bind name="instance" value="'CheckBox'; {	_isChecked: hidePlaybackTutorial,
											_label: 'IDS_REPLAYS_PLAYBACK_TUTORIAL_HIDE',
											_action: 'setUserPref',
											_actionParams: {value: !hidePlaybackTutorial,
															name: 'hidePlaybackTutorial'}}"/>
			</block>
		</block>
	</block>

	<!-- modal_window_campaign_done -->
	<block className="ModalWindowCampaignDone">
		<bind name="name" value="'ModalWindowCampaignDone'"/>
		<styleClass value="$Fullsize"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMapCustom">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap3" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.3; 0.4; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.45; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="contrast"/>
			</block>
			<block className="modal_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="dispatch" value="'addedToStage'; 'delayedAddedToStage'; null; false; 0.8"/>
		<bind name="catch" value="'showWindow'"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'topOffset'; 35 + (stageHeight - 720) * 0.4"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="style" value="'marginTop'; topOffset+'px'"/>
			<style>
				<width value="900px"/>
			</style>
			<bind name="instance" value="'ModalWindowCampaignDoneContent'; {}"/>
		</block>
	</block>
	<block className="ModalWindowCampaignDoneContent">
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; $root.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evChanged']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'campaignCountCompletedTasks'; ['campaign.campaignPlayer.evChanged']; campaign.campaignPlayer.countCompletedTasks"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; $root.taskID"/>
		<bind name="watchDH" value="'rewards'; ['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watchDH" value="'isLooted';['missionMainTaskEntity.campaignTaskPlayer.evUpdate']; missionMainTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="dispatch" value="'addedToStage'; 'showWindowAnimation'; null; false; 0.15"/>
		<bind name="catch" value="'showWindowAnimation'; {startWindowAnimation: true}"/>
		<bind name="dispatch" value="'showWindowAnimation'; 'showGiftBoxStamp'; null; false; 0.5"/>
		<bind name="var" value="{giftBoxStampState: 'not_issued'}"/>
		<bind name="catch" value="'showGiftBoxStamp'; {giftBoxStampState: 'animation'}"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_CAMPAIGN_COMPLETED', _headerWidth: '900px', _showInnerCloseButton:true}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<width value="256px"/>
					<height value="256px"/>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../campaigns/campaign_logo/' + campaignName + '_logo_big.png'"/>
			</block>
			<block type="text">
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="class" value="'$FontSizeHeader4'"/>
				<style>
					<marginTop value="-10px"/>
					<marginBottom value="20px"/>
				</style>
				<bind name="text" value="tr('IDS_' + campaignName + '_TITLE')"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="20px"/>
				<marginBottom value="20px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<block type="text">
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="tr('IDS_DONE_TASKS_COUNT') + ' ' + campaignCountCompletedTasks"/>
				</block>
				<block type="text">
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="class" value="'$FontColorGrey'"/>
					<style>
						<marginTop value="2px"/>
						<marginLeft value="-5px"/>
					</style>
					<bind name="text" value="' / ' + campaignCountTasks"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block type="text">
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3.0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="campaignCountTasks != campaignCountCompletedTasks"/>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextHeader"/>
				<bind name="text" value="'IDS_COMPLETE_TASKS_GET_REWARD'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="20px"/>
				<marginBottom value="20px"/>
			</style>
			<block type="text">
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4.0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4.0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="text" value="'IDS_REWARD_FOR_CAMPAIGN'"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="10px"/>
				</style>
				<block>
					<bind name="transition" value="giftBoxStampState == 'animation'; 0.15; {alpha: 1}; {alpha: 0.6}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; giftBoxStampState == 'issued' ? 0 : 0.35"/>
					<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: rewards,
															_tooltipHeader: 'IDS_REWARD_FOR_CAMPAIGN',
															_isReceived: isLooted}"/>
					<style>
						<width value="94px"/>
						<height value="86px"/>
						<backgroundImage value="url:../campaigns/campaign_icons/giftbox.png"/>
					</style>
				</block>
				<block>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<position value="absolute"/>
						<hitTest value="false"/>
					</style>
					<block>
						<bind name="visible" value="giftBoxStampState == 'animation'"/>
						<style>
							<position value="absolute"/>
						</style>
						<block className="icon_issued" type="native">
							<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
							<bind name="gotoAndPlay!" value="giftBoxStampState ? giftBoxStampState : 'not_issued'"/>
						</block>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5.0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5.0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="10px"/>
			</style>
			<block>
				<style>
					<alpha value="0"/>
				</style>
				<bind name="fade" value="startWindowAnimation; 0.2; {alpha: 0, top: 15}; {alpha: 1, top: 0}; {alpha: 0, top: 15}; 1; 0.78"/>
				<bind name="appear" value="'startHide'; 0.15; 0.3; {alpha: 1, top: 0}; {alpha: 0, top: -15}"/>
				<bind name="instance" value="'DefaultButton'; {	_name: 'btn_ok',
												_label: 'IDS_CLOSE_UPPER_CASE',
												_enabled: true,
												_focusIndex: 0,
												_defaultFocused: true}"/>
			</block>
		</block>
	</block>

	<!-- modal_window_campaigns -->
	<block className="ModalWindowCampaigns">
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.CAMPAIGNS"/>
		<bind name="watchDH" value="'isInCampaigns'; ['routeEntity.route.evIsActiveChanged']; routeEntity.route.isActive"/>
		<bind name="watchDH" value="'currentCampaignInset'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
		<bind name="watchDH" value="'prevCampaignInset'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.prevActiveChild"/>
		<bind name="watchDH" value="'availableCampaignStates'; ['routeEntity.route.evChildrenChanged']; routeEntity.route.children"/>
		<bind name="primaryEntityDH" value="'routeEntityinCampaigns'; CC.route; SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_CAMPAIGN"/>
		<bind name="watchDH" value="'inCampaigns'; ['routeEntityinCampaigns.route.evIsActiveChanged']; routeEntityinCampaigns.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityinMissions'; CC.route; SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_MISSION"/>
		<bind name="watchDH" value="'inMissions'; ['routeEntityinMissions.route.evIsActiveChanged']; routeEntityinMissions.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityinTasks'; CC.route; SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_TASK"/>
		<bind name="watchDH" value="'inTasks'; ['routeEntityinTasks.route.evIsActiveChanged']; routeEntityinTasks.route.isActive"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; curCampaignId"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'stateDone'; 'active.taskStateDone'"/>
		<bind name="var" value="{ windowAppearLag: 0.2 }"/>
		<bind name="var" value="{ curCampaignId: $root.campaignId ? $root.campaignId : 0 }"/>
		<bind name="var" value="{ curMissionId: $root.missionId ? $root.missionId : 0 }"/>
		<bind name="catch" value="'campaignParamsChanged'"/>
		<bind name="watch" value="'campaignBackground'; inCampaigns 	? 'url:../bg/campaign/campaign_bg.jpg'
													: 'url:../bg/campaign/' + campaign.campaignParams.name + '_bg.jpg'"/>
		<block>
			<bind name="appear" value="'startShow'; 0.2;	windowAppearLag + 0.2; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.25; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'BackgroundAnimatedSwitcher'; { _bgSymbol: campaignBackground }"/>
			</block>
			<block className="inner_panel" type="native">
				<bind name="transition" value="inTasks; 0.15; {alpha: 0}; {alpha: 1}"/>
				<styleClass value="$Fullsize"/>
				<style>
					<alpha value="2.5"/>
				</style>
			</block>
		</block>
		<bind name="stageSize"/>
		<bind name="watch" value="'leftOffset'; 20 + (stageWidth - 1280)/14"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="230px"/>
				<marginTop value="-50%"/>
				<top value="45%"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'left'; (leftOffset + 'px')"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'CampaingsTasksBasket'; {}"/>
			</block>
			<block>
				<bind name="style" value="'hitTest'; (choosenTasks.length &gt; 0)"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="transition" value="(choosenTasks.length &gt; 0) &amp;&amp; (choosenTasks.length != stateDone.length); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; (choosenTasks.length &gt; 0) ? 0.23 : 0"/>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'BattleTypeChooser'; {}"/>
				</block>
				<block>
					<bind name="transition" value="(choosenTasks.length &gt; 0) &amp;&amp; (choosenTasks.length != stateDone.length); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; (choosenTasks.length &gt; 0) ? 0.3 : 0.07"/>
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="-2px"/>
					</style>
					<bind name="instance" value="'StartBattleButtonSmall'; {}"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="3sw"/>
				<marginTop value="-50%"/>
				<top value="45%"/>
			</style>
			<bind name="visible" value="(inMissions) &amp;&amp; (campaign.campaignParams.isNarrative)"/>
			<bind name="instance" value="'CampaignDescription'; { _text: 'IDS_' + campaign.campaignParams.name + '_DESCR' }"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="250px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<width value="74sw"/>
					<height value="70sh"/>
					<marginTop value="720:42,2260:200ah"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$Fullsize"/>
					<bind name="child" value="currentCampaignInset; 	{ _curMissionId: curMissionId, _curCampaignId: curCampaignId};
																	{	campaigns_choose_campaign	: 'ChooseCampaign', 
																		campaigns_choose_mission	: 'ChooseMission', 
																		campaigns_choose_task		: 'ChooseTask', 
																		no_item						: 'EmptyItem'}"/>
				</block>
			</block>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<position value="absolute"/>
				<top value="720:20,2260:140ah"/>
			</style>
			<bind name="style" value="'left'; (leftOffset - 11) + 'px'"/>
			<bind name="instance" value="'CampaignBackButton'; {	_inCampaigns: inCampaigns, _inMissions: inMissions,	_inTasks: inTasks}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<top value="720:20,2260:140ah"/>
			</style>
			<bind name="instance" value="'WindowHeaderCampaign'; {	_inCampaigns: inCampaigns, 
													_curCampaignId: curCampaignId,
													_curMissionId: curMissionId}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<position value="absolute"/>
				<top value="720:20,2260:140ah"/>
			</style>
			<bind name="style" value="'right'; (leftOffset - 4) + 'px'"/>
			<bind name="instance" value="'CampaignCloseButton'; {}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="choosenTasks.length &gt; 0"/>
			<style>
				<width value="100%"/>
				<marginBottom value="36px"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="ShipCarousel" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{}"/>
			</block>
		</block>
		<bind name="watch" value="'isPickInfoVisible'; ((choosenTasks.length == 0) &amp;&amp; (inTasks))"/>
		<block>
			<bind name="fade" value="isPickInfoVisible; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}; 1; 0"/>
			<style>
				<width value="100%"/>
				<bottom value="8sh"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'marginRight'; (leftOffset - 6) + 'px'"/>
			<bind name="style" value="'marginLeft'; (leftOffset - 6) + 'px'"/>
			<block type="text">
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
				</style>
				<bind name="class" value="'$FontColorBlueish'"/>
				<styleClass value="$TextLargeHeader"/>
				<bind name="text" value="'IDS_CHOOSE_TASKS_INFO'"/>
			</block>
		</block>
	</block>
	<block className="CampaignDescription">
		<style>
			<width value="1280:230,1920:300aw"/>
			<height value="720:400,1080:430ah"/>
		</style>
		<bind name="watch" value="'descriptionText'; _text"/>
		<bind name="var" value="{ isHackedDescription: false }"/>
		<bind name="changeDispatch" value="descriptionText; 'descriptionTextChanged'; null; 2"/>
		<bind name="catch" value="'descriptionTextChanged'; { isHackedDescription: true }"/>
		<bind name="dispatch" value="'descriptionTextChanged'; 'descriptionTextChangedDelayed'; {}; 2; 0.05"/>
		<bind name="catch" value="'descriptionTextChangedDelayed'; { isHackedDescription: false }"/>
		<block>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap10_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<style>
				<width value="100%"/>
				<height value="100%f"/>
			</style>
			<bind name="instance" value="'CampaignDescriptionText'; isHackedDescription ? null : { _descriptionText: descriptionText } "/>
		</block>
	</block>
	<block className="CampaignDescriptionText">
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="style" value="'backgroundColor'; contrast ? '0x55000000' : '0x00000000'"/>
		<bind name="appear" value="'addedToStage'; 0.1; 0; {alpha: 0}; {alpha: 1}"/>
		<bind name="stageSize"/>
		<styleClass value="$DefaultScrollBar"/>
		<style>
			<width value="100%"/>
			<height value="100%f"/>
		</style>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="stageWidth &gt;= 1600 ? '$TextHeaderBigDefault' : '$TextDefault'"/>
			<style>
				<width value="100%"/>
				<marginLeft value="5px"/>
				<marginRight value="5px"/>
				<marginTop value="10px"/>
				<marginBottom value="10px"/>
			</style>
			<bind name="text" value="_descriptionText"/>
		</block>
	</block>
	<block className="CampaignBackButton">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'blockName'; (_inCampaigns ? 'btn_cancel' : '')"/>
		<bind name="name" value="blockName"/>
		<bind name="input"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-12px"/>
				<marginRight value="-12px"/>
				<marginBottom value="-6px"/>
				<marginTop value="-6px"/>
			</style>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<bind name="watch" value="'backButtonText';	_inCampaigns 	? 'IDS_RETURN_TO_DOCK':
									_inMissions		? 'IDS_RETURN_TO_CAMPAIGNS' :
									_inTasks 		? 'IDS_RETURN_TO_MISSIONS'
													: 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON'"/>
		<block>
			<bind name="instance" value="'BackButton'; {	_text: backButtonText, 
										_action: 'navigateTo', 
										_actionParams: _inTasks ? {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_MISSION}
																: {route: SC.Ui_windows.ROUTE.CAMPAIGNS_CHOOSE_CAMPAIGN}}"/>
		</block>
	</block>
	<block className="CampaignCloseButton">
		<block>
			<style>
				<position value="absolute"/>
				<top value="-8"/>
				<right value="-8"/>
				<width value="38px"/>
				<height value="28px"/>
			</style>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0"/>
			</style>
			<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
		</block>
	</block>
	<block className="WindowHeaderCampaign">
		<style>
			<width value="100%"/>
			<height value="28px"/>
		</style>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watch" value="'headerLabel'; (_inCampaigns 	? ''
												: 'IDS_' + campaign.campaignParams.name + '_TITLE')"/>
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; _curMissionId"/>
		<bind name="watchDH" value="'state';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'uiNumber'; []; campaignMissionEntity.campaignMissionParams.uiNumber"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="text" value="toUpperCase(tr(headerLabel))"/>
			</block>
		</block>
	</block>

	<!-- modal_window_convert_exp -->
	<block className="ModalWindowConvertExp">
		<bind name="instance" value="'SmallModalWindow'; {	_headerText: 'IDS_FREE_EXP_CONVERSION',
											_hideDivider: true,
											_contentElement: 'ModalWindowConvertExpContent'}"/>
	</block>
	<block className="ModalWindowConvertExpContent">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'goldExpExchangeEntity'; CC.priceComponent; 'FREE_XP_RATE_PER_GOLD' + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'goldExpExchange'; ['goldExpExchangeEntity.priceComponent.evChanged']; goldExpExchangeEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'eliteXPToFreeExchangeEntity'; CC.priceComponent; 'FREE_XP_FOR_ELITE_XP_RATE_PER_GOLD' + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'eliteXPToFreeExchange'; ['eliteXPToFreeExchangeEntity.priceComponent.evChanged']; eliteXPToFreeExchangeEntity.priceComponent"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="collectionDH" value="CC.upgradableShipInfo; 'ships'; 'convertExp'"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];		resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountFreeXP';		['resourceEntity.accountResource.evChangedFreeXP'];		resourceEntity.accountResource.freeXP"/>
		<bind name="watchDH" value="'eliteXP'; 			['resourceEntity.accountResource.evChangedEliteXP'];	resourceEntity.accountResource.eliteXP"/>
		<bind name="var" value="{animationTime: 0.15}"/>
		<bind name="var" value="{animationDelay: 0}"/>
		<bind name="var" value="{isButtonLocked: false}"/>
		<bind name="firstEntityDH" value="'convertExpEntity'; CC.convertExp"/>
		<bind name="watchDH" value="'totalExp';		    	['convertExpEntity.convertExp.evSelectedExpChanged']; convertExpEntity.convertExp.selectedExp"/>
		<bind name="watchDH" value="'totalAvailableExp';		['convertExpEntity.convertExp.evAvailableExpChanged']; convertExpEntity.convertExp.availableExp"/>
		<bind name="watchDH" value="'allSelected'; 			['convertExpEntity.convertExp.evAllSelectedChanged']; convertExpEntity.convertExp.allSelected"/>
		<bind name="watch" value="'inset'; userPrefs.exchangeExpTabIndex == null	? SC.Common.EXCHANGE_EXP_INSET.SHIP_XP
																: userPrefs.exchangeExpTabIndex"/>
		<bind name="action" value="'addedToStage'; 'setUserPref'; { name: 'exchangeExpTabIndex', value: SC.Common.EXCHANGE_EXP_INSET.SHIP_XP }"/>
		<bind name="watch" value="'curExchangeRate'; inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP	? goldExpExchange.finalPrice
																					: eliteXPToFreeExchange.finalPrice"/>
		<bind name="catch" value="'inset' + varChanged; {curExchangeRate: inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP	? goldExpExchange.finalPrice
																										: eliteXPToFreeExchange.finalPrice}"/>
		<bind name="watch" value="'isNotEnoughExp'; totalAvailableExp &lt; goldExpExchange.finalPrice"/>
		<bind name="watch" value="'totalGoldForAllShipsExp'; (totalAvailableExp - (totalAvailableExp % goldExpExchange.finalPrice)) / goldExpExchange.finalPrice"/>
		<bind name="dispatch" value="'addedToStage'; 'curTotalExp' + varChanged; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.1"/>
		<bind name="watch" value="'curTotalExp'; (inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP	? totalExp : eliteXP)"/>
		<bind name="watch" value="'curTotalAvailableExp'; (inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP	? totalAvailableExp : eliteXP)"/>
		<bind name="catch" value="'curTotalExp' + varChanged; {	currentExpValue:	curTotalExp,
												currentGoldValue:	math.floor( curTotalExp / curExchangeRate ) };
											'maxValuesCount'"/>
		<bind name="catch" value="'curExchangeRate' + varChanged; {	currentExpValue:	curTotalExp,
														currentGoldValue:	math.floor( curTotalExp / curExchangeRate ) };
													'maxValuesCount'"/>
		<bind name="catch" value="'maxValuesCount';	{maxGold: math.min( accountGold, math.floor( curTotalExp / curExchangeRate ))};
									'maxExpNeedCount'"/>
		<bind name="catch" value="'maxExpNeedCount'; {maxExp: maxGold * curExchangeRate};
									'countNeedGold'"/>
		<bind name="watch" value="'goldToChange'; 0"/>
		<bind name="watch" value="'expToChange'; 0"/>
		<bind name="catch" value="'onGoldChange'; {	currentGoldValue:	goldToChange,
									currentExpValue:	goldToChange * curExchangeRate}; 'countNeedGold'"/>
		<bind name="catch" value="'countNeedGold'; {	needGoldForCurrentExp: math.floor( currentExpValue / curExchangeRate ) }; 'checkRestrictions'"/>
		<bind name="catch" value="'onExpChange'; {	currentGoldValue:	math.floor( expToChange / curExchangeRate ),
									currentExpValue:	expToChange}; 'countNeedGold'"/>
		<bind name="catch" value="'checkRestrictions'; {	goldToChange:	math.min( maxGold, needGoldForCurrentExp, currentGoldValue),
										expToChange:	math.min( maxGold, needGoldForCurrentExp, currentGoldValue) * curExchangeRate}"/>
		<bind name="watch" value="'currenciesPanelPrices'; [	{currency: SC.Common.CURRENCIES.GOLD,		finalPrice: -goldToChange},
											{currency: SC.Common.CURRENCIES.FREE_XP,	finalPrice: accountGold &gt; 0 ? math.toNum(expToChange) : 0}]"/>
		<bind name="watchDH" value="'useEliteXP'; ['resourceEntity.accountResource.evUseEliteXPChanged'];	resourceEntity.accountResource.useEliteXP"/>
		<style>
			<width value="492px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="CurrenciesPanel" type="ublock">
				<bind name="build!" value="{ _priceInfo: currenciesPanelPrices, _width: 492 }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="visible" value="useEliteXP"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block className="ConvertExpTabButtons" type="ublock">
					<bind name="build!" value="{ _tabIndex: inset }"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
					<marginTop value="4px"/>
					<marginBottom value="-16px"/>
				</style>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.25*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1.25 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<style>
						<width value="100%"/>
						<height value="39px"/>
						<align value="center|middle"/>
						<alpha value="0.9"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<default_text value="IDS_SHIPCLASSES_CONVERT_EXP"/>
					</block>
					<block>
						<style>
							<marginLeft value="2"/>
						</style>
						<bind name="watch" value="'shipTypes'; [	SC.Common.SHIP_SPECIAL_FILTER_TYPE.ELITE,
												SC.Common.SHIP_SPECIAL_FILTER_TYPE.SPECIAL,
												SC.Common.SHIP_SPECIAL_FILTER_TYPE.PREMIUM]"/>
						<bind name="repeat" value="shipTypes; 'ShipTypeIcon'; {}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="16px"/>
						<marginBottom value="16px"/>
					</style>
					<block type="text">
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<marginRight value="3px"/>
							<alpha value="0.9"/>
						</style>
						<default_text value="IDS_RATE"/>
					</block>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<paddingTop value="2px"/>
						</style>
						<bind name="instance" value="'PriceTag'; { priceInfo: ((inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP) 	? goldExpExchange
																												: eliteXPToFreeExchange),
												  _showDiscountTag: true, _medium: true, _customLabel: 'IDS_RATE'} "/>
					</block>
					<block type="text">
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$TextHeaderBigDefault"/>
						<default_text value="+"/>
					</block>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<paddingTop value="2px"/>
						</style>
						<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: 1, currency: SC.Common.CURRENCIES.GOLD }, _medium: true }"/>
					</block>
					<block type="text">
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$TextHeaderBigDefault"/>
						<default_text value="="/>
					</block>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<paddingTop value="2px"/>
						</style>
						<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: curExchangeRate, currency: SC.Common.CURRENCIES.FREE_XP }, _medium: true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginBottom value="-2px"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<bind name="fade" value="((inset == SC.Common.EXCHANGE_EXP_INSET.ELITE_XP) &amp;&amp; (eliteXP &gt; 0)); animationTime; {alpha: 0, height: 0}; {alpha: 1, height: 72}; {alpha: 0, height: 0}; 1; ((inset == SC.Common.EXCHANGE_EXP_INSET.ELITE_XP) &amp;&amp; (eliteXP &gt; 0)) ? animationDelay : 0"/>
				<style>
					<width value="100%"/>
					<height value="72px"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$Fullsize"/>
					<block>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<backgroundImage value="url:../service_kit/panel_backgrounds/background_green.png"/>
							<background9Slice value="[1]"/>
						</style>
					</block>
					<block>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$MiddleVAligned"/>
						<block type="text">
							<styleClass value="$TextHeaderWhiteBold"/>
							<default_text value="IDS_CURRENCY_ELITE_XP"/>
						</block>
						<block>
							<style>
								<marginLeft value="10px"/>
								<marginTop value="2px"/>
							</style>
							<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: eliteXP, currency: SC.Common.CURRENCIES.ELITE_XP }, _medium: true, _name: 'crew_elite_xp' }"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<position value="absolute"/>
							<bottom value="0px"/>
						</style>
						<block className="HorizontalDividerTwoPx">
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
			<bind name="watch" value="'isShipsVisible'; (inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP &amp;&amp; accountGold &gt; 0 &amp;&amp; ships.length &gt; 0)"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="fade" value="isShipsVisible; animationTime;
				{scaleY: 0, ubScaleY: 0, alpha: 0}; {scaleY: 1, ubScaleY: 1, alpha: 1}; {scaleY: 0, ubScaleY: 0, alpha: 0};
				SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<bind name="stageSize"/>
						<bind name="watch" value="'elementHeight';	stageHeight &lt;= 720	? 150 :
									stageHeight &gt;= 1080	? 295
														: (stageHeight-720)/360*(295 - 150)+150"/>
						<bind name="style" value="'maxHeight'; elementHeight"/>
						<styleClass value="$DefaultScrollBar"/>
						<style>
							<width value="100%"/>
							<backgroundImage value="url:../service_kit/panel_backgrounds/background_green.png"/>
							<background9Slice value="[1]"/>
							<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
							<itemWidth value="100%"/>
							<itemHeight value="48px"/>
							<wheelScrollSpeed value="16"/>
						</style>
						<bind name="generatorDH" value="CC.upgradableShipInfo; 'ShipRowSelectableElement'; 'convertExp'; {_hasPriceTag: true, _hasMouseInstructions: true}"/>
					</block>
					<block>
						<bind name="action" value="'click'; 'selectAll'; {}"/>
						<style>
							<width value="100%"/>
							<height value="48px"/>
						</style>
						<bind name="instance" value="'ShipsSelectElement'; { _label: 'IDS_ALL_VEHICLES',
															_hasPriceTag: true,
															_isSelected: allSelected,
															_totalAvailableExp: totalAvailableExp}"/>
						<bind name="tooltip" value="'TooltipExp'; {	_price: totalGoldForAllShipsExp, selected: allSelected,
													_showPrice: !(isNotEnoughExp),
													_text: isNotEnoughExp ? 'IDS_NOT_ENOUGH_EXP_TO_CONVERT' : 'IDS_COMMON_PRICE_FOR_ALL_FREE_EXP',
													_instructionText: allSelected ? 'IDS_HINT_LEFT_DESELECT_ALL_SHIPS' : 'IDS_HINT_LEFT_SELECT_ALL_SHIPS'}"/>
					</block>
				</block>
			</block>
			<bind name="watch" value="'isNotEnoughExpToConvert'; (curTotalAvailableExp &lt; curExchangeRate)"/>
			<bind name="watch" value="'isZeroGoldVisible'; (accountGold &lt;= 0 &amp;&amp; !(isNotEnoughExpToConvert))"/>
			<bind name="watch" value="'isConversionQuestionVisible'; !(isNotEnoughExpToConvert || isZeroGoldVisible)"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<height value="72px"/>
					</style>
					<bind name="fade" value="isConversionQuestionVisible; animationTime; {alpha: 0, height: 0}; {alpha: 1, height: 72}; {alpha: 0, height: 0}; 1; isConversionQuestionVisible ? animationDelay : 0"/>
					<block>
						<style>
							<height value="72px"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<block type="text">
							<styleClass value="$TextAccent"/>
							<styleClass value="$MiddleVAligned"/>
							<bind name="class" value="'$FontColorWhite'"/>
							<default_text value="IDS_QUESTION_CONVERT"/>
						</block>
						<block>
							<styleClass value="$MiddleVAligned"/>
							<style>
								<marginLeft value="6px"/>
							</style>
							<block className="text_input_stepper_free_exp" type="native">
								<style>
									<width value="100px"/>
								</style>
								<params>
									<param name="actAsButton" value="true"/>
									<param name="maxChars" value="100"/>
									<param name="restrict" value="0-9"/>
									<param name="enabled" value="true"/>
								</params>
								<bind name="maxValue" value="maxExp"/>
								<bind name="step" value="curExchangeRate"/>
								<bind name="sync" value="'text'; 'changedWithCorrection'; 'expToChange'; 'onExpChange'"/>
								<bind name="sync" value="'isLocked'; 'lockChanged'; 'isButtonLocked'"/>
								<bind name="ubFocus" value="0; false; true; true"/>
								<bind name="name" value="'ConvertExpInput'"/>
							</block>
						</block>
						<block>
							<styleClass value="$MiddleVAligned"/>
							<style>
								<marginLeft value="3px"/>
								<marginRight value="1px"/>
								<paddingTop value="1px"/>
								<width value="22px"/>
								<height value="23px"/>
								<overflow value="hidden"/>
							</style>
							<block>
								<style>
									<marginLeft value="-1px"/>
									<marginTop value="-9px"/>
								</style>
								<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.FREE_XP, _large: true }"/>
							</block>
						</block>
						<block type="text">
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$TextAccent"/>
							<style>
								<marginLeft value="5px"/>
							</style>
							<bind name="class" value="'$FontColorWhite'"/>
							<default_text value="IDS_FOR"/>
						</block>
						<block>
							<styleClass value="$MiddleVAligned"/>
							<style>
								<marginLeft value="6px"/>
							</style>
							<block className="text_input_stepper_gold" type="native">
								<style>
									<width value="100px"/>
								</style>
								<params>
									<param name="actAsButton" value="true"/>
									<param name="maxChars" value="100"/>
									<param name="restrict" value="0-9"/>
									<param name="enabled" value="true"/>
								</params>
								<bind name="maxValue" value="maxGold"/>
								<bind name="sync" value="'text'; 'changedWithCorrection'; 'goldToChange'; 'onGoldChange'"/>
								<bind name="sync" value="'isLocked'; 'lockChanged'; 'isButtonLocked'"/>
								<bind name="ubFocus" value="1; false; true; true"/>
								<bind name="name" value="'ConvertExpPrice'"/>
							</block>
						</block>
						<block>
							<styleClass value="$MiddleVAligned"/>
							<style>
								<marginLeft value="3px"/>
								<paddingTop value="1px"/>
								<width value="18px"/>
								<height value="18px"/>
								<overflow value="hidden"/>
							</style>
							<block>
								<style>
									<marginLeft value="-3px"/>
									<marginTop value="-12px"/>
								</style>
								<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.GOLD, _large: true }"/>
							</block>
						</block>
						<block type="text">
							<style>
								<marginLeft value="6px"/>
							</style>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$TextAccent"/>
							<bind name="class" value="'$FontColorWhite'"/>
							<default_text value="IDS_QUESTION"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="fade" value="isNotEnoughExpToConvert; animationTime; {alpha: 0, height: 0}; {alpha: 1, height: 72}; {alpha: 0, height: 0}; 1; isNotEnoughExpToConvert ? animationDelay : 0"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'NotEnoughExpToConvert'; isNotEnoughExpToConvert ? { _noExp: (curTotalAvailableExp == 0),
																					 _isEliteXP: (inset == SC.Common.EXCHANGE_EXP_INSET.ELITE_XP)} : null"/>
				</block>
				<block>
					<bind name="fade" value="isZeroGoldVisible; animationTime; {alpha: 0, height: 0}; {alpha: 1, height: 72}; {alpha: 0, height: 0}; 1; isZeroGoldVisible ? animationDelay : 0"/>
					<style>
						<width value="100%"/>
						<height value="72px"/>
					</style>
					<bind name="instance" value="'ZeroGold'; isZeroGoldVisible ? {} : null"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; isNotEnoughExpToConvert &amp;&amp; inset == SC.Common.EXCHANGE_EXP_INSET.ELITE_XP ? '20px' : '8px'"/>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginTop value="16px"/>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<block>
					<bind name="fade" value="(curTotalExp &gt;= curExchangeRate &amp;&amp; accountGold &gt; 0); 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 139}; {alpha: 0, width: 0}"/>
					<bind name="watch" value="'btnEnabled'; (goldToChange &gt; 0 &amp;&amp; expToChange &gt; 0 &amp;&amp; curTotalExp &gt;= curExchangeRate &amp;&amp; accountGold &gt; 0 &amp;&amp; !(isButtonLocked))"/>
					<style>
						<marginRight value="24px"/>
					</style>
					<bind name="name" value="'Modal_window_action_Button' + 'IDS_CONVERT_UPPER_CASE'"/>
					<bind name="instance" value="'DefaultButton'; {	_width: '139px',
													_name: 'btn_ok',
													_enabled: btnEnabled,
													_isTransactionBtn: true,
													_request: 'openConfirmationWindow',
													_requestParams: inset == SC.Common.EXCHANGE_EXP_INSET.SHIP_XP	? { _request: 			'changeExpToFreeexp', 
																														_requestParams: 	{expToChange: expToChange}, 
																														_firstPriceInfo: 	{finalPrice: expToChange, 
																																			currency: SC.Common.CURRENCIES.FREE_XP}, 
																														_secondPriceInfo: 	{finalPrice: goldToChange, 
																																			currency: SC.Common.CURRENCIES.GOLD}, 
																														_type: 				SC.Ui_common.CONFIRMATION_WINDOW_TYPE.CONVERT }
																													: { _action: 			'DockProxy.exchangeEliteXP', 
																														_actionParams: 		{eliteXP: expToChange}, 
																														_firstPriceInfo: 	{finalPrice: expToChange, 
																																			currency: SC.Common.CURRENCIES.FREE_XP}, 
																														_secondPriceInfo: 	{finalPrice: goldToChange, 
																																			currency: SC.Common.CURRENCIES.GOLD}, 
																														_type: 				SC.Ui_common.CONFIRMATION_WINDOW_TYPE.CONVERT },
													_label: 'IDS_CONVERT_UPPER_CASE',
													_focusIndex: 2,
													_defaultFocused: false}"/>
				</block>
				<block>
					<bind name="instance" value="'DefaultButton'; {	_width: '139px',
													_name: 'btn_cancel',
													_enabled: true,
													_focusIndex: 3,
													_label: 'IDS_CLOSE_UPPER_CASE'}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipRowSelectableElement">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'shipEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="entityDH" value="'bonusTagEntity'; shipEntity.ship.bonusTags[0]"/>
		<bind name="watchDH" value="'rewards'; []; bonusTagEntity.bonusTag.rewards"/>
		<bind name="watchDH" value="'isSelectedDH'; ['shipEntity.selection.evChanged']; shipEntity.selection.value"/>
		<bind name="watch" value="'isSelectedDesignerCollection'; _selectedShips ? isIn(shipEntity.ship.id, _selectedShips) : false"/>
		<bind name="watch" value="'isSelected'; isSelectedDH || isSelectedDesignerCollection"/>
		<bind name="watch" value="'isInactive'; _isAllSelected &amp;&amp; !isSelected || _isLocked"/>
		<bind name="watch" value="'isRolloverActive'; rollOver &amp;&amp; !isInactive"/>
		<bind name="watch" value="'hasMouseInstructionsTooltip'; !isInactive &amp;&amp; !_isSnowflakesModal"/>
		<bind name="watch" value="'hasRewardsTooltip'; !isInactive &amp;&amp; _isSnowflakesModal &amp;&amp; _hasMouseInstructions"/>
		<bind name="watch" value="'instructionText'; isSelected	? 'IDS_HINT_LEFT_DESELECT_SHIPS'
												: 'IDS_HINT_LEFT_SELECT_SHIPS'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; hasMouseInstructionsTooltip	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																			_text: instructionText }
																		: null"/>
		<bind name="tooltip" value="'SnowflakesRewardsTooltip'; hasRewardsTooltip ? {_rewards: rewards, _isSelected: isSelected} : null"/>
		<bind name="action" value="'click'; 'selectShipForConvert'; {shipId: shipEntity.ship.id}"/>
		<bind name="action" value="'click'; _needSelectionChange ? 'changeSelection' : null; { shipId: shipEntity.ship.id, selectionState: !isSelected }"/>
		<bind name="soundSet" value="isInactive || _isConfirmedList ? '' : 'button_secondary'"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'hitTest'; _isSnowflakesModal &amp;&amp; isInactive ? false : true"/>
		<block>
			<bind name="style" value="'alpha'; $index == 0 ? 0 : 1"/>
			<style>
				<width value="100%"/>
				<marginBottom value="1px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="48px"/>
				<align value="middle"/>
			</style>
			<bind name="alpha" value="isInactive ? 0.2 : 1"/>
			<block>
				<style>
					<position value="absolute"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
					<background9Slice value="[1]"/>
					<width value="100%"/>
					<height value="45px"/>
				</style>
				<bind name="alpha" value="	_isConfirmedList	? 0 :
							isRolloverActive	? 1 : isSelected ? 0.7 : 0 :
												: 0 "/>
			</block>
			<block>
				<style>
					<width value="178px"/>
					<marginLeft value="24px"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: shipEntity.ship.id,
												_withFlag: _isSnowflakesModal,
												_fontClass: '$TextDefaultBold17NM' }"/>
			</block>
			<block>
				<style>
					<width value="122px"/>
					<height value="22px"/>
					<marginBottom value="8px"/>
					<hitTest value="false"/>
					<align value="right"/>
				</style>
				<bind name="style" value="'marginLeft';	_isSnowflakesModal || _isConfirmedList	? '96px'
																				: '32px'"/>
				<bind name="style" value="'backgroundImage'; 'url:' + (shipEntity.ownShip != null ? shipEntity.ship.pathTinyIcon : shipEntity.ship.pathTinyDeadIcon)"/>
			</block>
			<block>
				<styleClass value="$MiddleVAlignedAbsolutely"/>
				<style>
					<right value="10px"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'PriceTag'; _hasPriceTag ? { priceInfo: { finalPrice: upgradableShipInfo.exp, currency: SC.Common.CURRENCIES.XP }, _medium: true } : null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipsSelectElement">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="soundSet" value="'button_secondary'"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="48px"/>
				<align value="middle"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/background_green.png"/>
				<background9Slice value="[1]"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
					<background9Slice value="[1]"/>
				</style>
				<bind name="alpha" value="rollOver	? 1 :
						_isSelected	? 0.7 : 0
									: 0"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<style>
					<marginLeft value="24px"/>
				</style>
				<bind name="text" value="_label"/>
			</block>
			<block>
				<bind name="visible" value="_hasPriceTag"/>
				<style>
					<position value="absolute"/>
					<right value="10px"/>
					<top value="11px"/>
				</style>
				<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: _totalAvailableExp, currency: SC.Common.CURRENCIES.XP }, _medium: true }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
	</block>
	<block className="TooltipExp">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<block type="text">
				<styleClass value="$InfoBlockIndentNoWidth"/>
				<styleClass value="$TextDefault"/>
				<style>
					<maxWidth value="220"/>
					<leading value="-3"/>
				</style>
				<bind name="text" value="_text"/>
			</block>
			<block>
				<bind name="visible" value="_showPrice"/>
				<style>
					<marginLeft value="1px"/>
					<marginRight value="8px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'PriceTag'; { priceInfo: { finalPrice: _price, currency: SC.Common.CURRENCIES.GOLD } }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<bind name="instance" value="'MouseInstruction'; { _type: 'left', _instructionText: _instructionText, _maxWidth: '220' }"/>
		</block>
	</block>
	<block className="NotEnoughExpToConvert">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginTop value="12px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginLeft value="3px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorOrange'"/>
				<bind name="text" value="_noExp	? 'IDS_NO_EXP_TO_CONVERT'
								: 'IDS_NOT_ENOUGH_EXP_TO_CONVERT'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isEliteXP"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="6px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; _isEliteXP ? { _instructionText:  'IDS_ACCUMULATE_ELITE_EXP', _maxWidth: '450', _leading: -5 } : null "/>
		</block>
	</block>
	<block className="ZeroGold">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginTop value="12px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="4px"/>
					<marginLeft value="3px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorOrange'"/>
				<default_text value="IDS_NO_GOLD_TO_CONVERT"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="6px"/>
			</style>
			<bind name="instance" value="'InstructionBigTech'; { _instructionText: 'IDS_BUY_GOLD_TO_COMPLETE', _maxWidth: '450' }"/>
		</block>
	</block>
	<block className="ShipTypeIcon">
		<style>
			<width value="39px"/>
			<height value="39px"/>
		</style>
		<bind name="watch" value="'imageURL'; 'swf:../service_kit/filters_svg/filters_svg.swf:' + $value"/>
		<bind name="tooltip" value="'ShipTypeIconTooltip'; {_shipType: $value}"/>
		<bind name="style" value="'backgroundImage'; imageURL"/>
	</block>
	<block className="ShipTypeIconTooltip">
		<bind name="watch" value="'imageURL'; 'url:../reward_icons/ship_' + _shipType + '.png'"/>
		<bind name="watch" value="'headerText'; 'IDS_' + _shipType + '_SHIPS'"/>
		<bind name="watch" value="'descriptionText'; 'IDS_' + _shipType + '_SHIPS_DESCRIPTION'"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
			<width value="300px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: imageURL,
																_imageWidth: 80,
																_imageHeight: 80,
																_headerText: headerText,
																_headerIconType: headerIconType,
																_iconAmount: 1,
																_subheaderText: 'IDS_SHIPCLASSES'}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; {	_descriptionText: descriptionText}"/>
			</block>
		</block>
	</block>

	<!-- modal_window_elements -->
	<block className="SmallModalWindow">
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<styleClass value="$EyeLevelVAligned"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginBottom'; _hideDivider ? '16px' : 0"/>
				<bind name="instance" value="'ModalWindowShortHeader'; { _header: _headerText,
														_unifiedStatus: _unifiedStatus,
														_hideDivider: _hideDivider}"/>
			</block>
			<block>
				<bind name="instance" value="_contentElement; {_subtitle: _subtitle, _btnTitle: _btnTitle, _instruction: _instruction}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowOkCancel">
		<style>
			<flow value="horizontal"/>
			<marginTop value="24px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; (_appearOrder + 1)*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; (_appearOrder + 1) * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginRight value="24px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_name: 'btn_ok',
											_enabled: true,
											_isTransactionBtn: true,
											_containerName: 'Modal_window_action_ButtonIDS_YES',
											_label: 'IDS_YES',
											_focusIndex: 1,
											_request: _request,
											_defaultFocused: _focusBtn == 1,
											_requestParams: _requestParams,
											_clickInterval: 2000}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; _appearOrder*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; _appearOrder * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_enabled: true,
											_isTransactionBtn: true,
											_label: 'IDS_NO',
											_name: 'btn_cancel',
											_defaultFocused: _focusBtn == 2,
											_focusIndex: 2}"/>
		</block>
	</block>
	<block className="ModalWindowCloseIcon">
		<bind name="name" value="'btn_cancel'"/>
		<bind name="input"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: _tooltipText ? _tooltipText : 'IDS_CLOSE' }; TooltipBehaviour.simple"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<styleClass value="$MiddleVAligned"/>
		<style>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<alpha value="0.8"/>
			</style>
			<bind name="instance" value="'HotkeyWithText'; { _text: 'ESC', _isDisabled: true }"/>
		</block>
		<block>
			<style>
				<marginLeft value="2px"/>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'CloseButton'; { _isDisabled: true }"/>
		</block>
	</block>
	<block className="ModalWindowShortHeader">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '100%'"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
			</style>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<styleClass value="$TextDefaultBold21NM"/>
			<bind name="text" value="toUpperCase(tr(_header))"/>
		</block>
		<block>
			<bind name="visible" value="!_hideDivider"/>
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeader">
		<style>
			<marginBottom value="3px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '450px'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextLargeHeaderBold"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="text" value="toUpperCase(tr(_header))"/>
			</block>
			<block>
				<bind name="visible" value="!_hideCloseButton"/>
				<style>
					<position value="absolute"/>
					<top value="11px"/>
				</style>
				<bind name="style" value="'right'; _innerCloseButton ? '10px' : '-50px'"/>
				<bind name="instance" value="'ModalWindowCloseIcon'; _hideCloseButton ? null : {}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_hideDivider"/>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="-3"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderWithIcon">
		<style>
			<marginBottom value="3px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '450px'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<block className="icons_modal_window_heading" type="native">
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginRight value="3px"/>
					</style>
					<bind name="gotoAndStop!" value="_type"/>
				</block>
				<block type="text">
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="toUpperCase(tr(_header))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<top value="9px"/>
					<right value="-50px"/>
				</style>
				<bind name="instance" value="'ModalWindowCloseIcon'; _showInnerCloseButton ? {} : null"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderFullSize">
		<bind name="style" value="'paddingTop';		_paddingTop		? _paddingTop	:	'720:20,1080:50ah'"/>
		<bind name="style" value="'paddingRight';	_paddingRight	? _paddingRight	:	'1280:20,1920:46aw'"/>
		<bind name="style" value="'paddingLeft'; 	_paddingLeft	? _paddingLeft	:	'1280:20,1920:46aw'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="!_hideBackButton"/>
			<style>
				<position value="absolute"/>
				<top value="-5px"/>
			</style>
			<bind name="instance" value="'BackButton'; !_hideBackButton	?	{	_text: _backButtonText,
																_event: _event, _eventData: _eventData,
																_action: _action, _actionParams: _actionParams,
																_request: _request, _requestParams: _requestParams }
														:	null"/>
		</block>
		<block>
			<bind name="visible" value="_windowName"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<params>
					<param name="name" value="ModalWindowHeaderName"/>
				</params>
				<styleClass value="$TextDefaultBold21NM"/>
				<bind name="text" value="toUpperCase(tr(_windowName))"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_hideCloseButton"/>
			<style>
				<position value="absolute"/>
				<right value="4px"/>
				<top value="3px"/>
			</style>
			<bind name="instance" value="'ModalWindowCloseIcon'; !_hideCloseButton ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="!_hideDivider"/>
			<style>
				<width value="100%"/>
				<marginTop value="720:12,1080:16ah"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_window_event_battle_details -->
	<block className="ModalWindowEventBattleDetails">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="entityDH" value="'eventBattleStateEntity'; $root.eventStateEntityId"/>
		<bind name="watchDH" value="'eventBattleName'; ['eventBattleStateEntity.eventBattleState.evChanged']; eventBattleStateEntity.eventBattleState.name"/>
		<bind name="watchDH" value="'eventId'; []; eventBattleStateEntity.eventBattleState.eventId"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'BackgroundAnimatedSwitcher'; { _bgSymbol: 'url:../events/legendary_battle/bg/event_details.jpg' }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; {	_paddingRight: '32px',
														_paddingLeft: '32px',
														_windowName: 'IDS_' + toUpperCase(eventBattleName),
														_backButtonText: 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON',
														_action: 'closeEventBattleDetails'	}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$Fullsize"/>
			<style>
				<marginTop value="720:16,1080:32ah"/>
				<marginBottom value="720:32,1080:64ah"/>
			</style>
			<bind name="instance" value="'ModalWindowEventBattleDetailsContent'; {_eventBattleName : eventBattleName}"/>
		</block>
	</block>
	<block className="ModalWindowEventBattleDetailsContent">
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<style>
				<marginTop value="16px"/>
				<height value="100%"/>
			</style>
			<bind name="repeat" value="$root.shipToIntroduceIds; 'NationalProgramShipWithDescription';{	_shipId: $value,
																						_lastIndex: $root.shipToIntroduceIds.length - 1,
																						_eventBattleName: _eventBattleName,
																						_eventId: eventId,
																					  }"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="720:32,1080:64ah"/>
			</style>
			<bind name="instance" value="'DefaultButton';	_eventBattleName	? {	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																	_size: 2,
																	_width: '190px',
																	_label: 'IDS_VIEW_EVENT_VIDEO_BUTTON_UPPER_CASE',
																	_action: 'navigateTo',
																	_actionParams: {	route: SC.Ui_windows.ROUTE.PORTAL,
																						data: {url: ('event_video_' + _eventBattleName + '_Promo')}},
																	_enabled: true}
																: null"/>
		</block>
	</block>
	<block className="NationalProgramShipWithDescription">
		<bind name="watch" value="'shipId'; $value ? $value : _shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'isSmallResolution'; stageHeight &lt;= 900"/>
		<bind name="watch" value="'nationProgram'; tr('IDS_LEGENDARY_PROGRAM_' + toUpperCase(shipInfo.flagName))"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="watch" value="'isOwned'; !!shipOwnEntity"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watch" value="'isSwitchBattleTypeAvailable'; isOwned &amp;&amp; (isCommander || !divisionDataEntity)"/>
		<bind name="style" value="'marginRight'; _lastIndex == $index ? '0px' : '720:64,1440:96ah'"/>
		<bind name="style" value="'width'; isSmallResolution ? '432px' : '480px'"/>
		<style>
			<height value="100%"/>
		</style>
		<block>
			<style>
				<marginBottom value="1280:8,1920:16aw"/>
				<backgroundSize value="fill"/>
			</style>
			<bind name="style" value="'width'; isSmallResolution ? '320px' : '480px'"/>
			<bind name="style" value="'height'; isSmallResolution ? '186px' : '280px'"/>
			<bind name="style" value="'backgroundImage'; 'url:../events/legendary_battle/ship_previews_photo/' + shipInfo.shortName + '.png'"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="720:16,1080:32ah"/>
				<marginTop value="8px"/>
			</style>
			<block>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: shipId, _withFlag: true, _fontClass: '$TextDefaultBold21NM' }"/>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
				</style>
				<bind name="instance" value="'ShipClassLineItemNM'; {_shipId: shipId,
													_fontClass: isSmallResolution	? '$TextDefaultNM'
																					: '$TextDefault17NM'
													}"/>
			</block>
			<block>
				<style>
					<marginTop value="720:16,1080:24ah"/>
				</style>
				<bind name="action" value="'click'; isSwitchBattleTypeAvailable ? 'setBattleType'	: null;	{	battleType: SC.Common.BATTLE_TYPES.EVENT_BATTLE,
			 																					eventBattleName: _eventBattleName, battleTypeGameParamId: _eventId	}"/>
				<bind name="action" value="'click'; isSwitchBattleTypeAvailable ? 'resetAllFilters'	: null;	{ ident: 0 }"/>
				<bind name="instance" value="'DefaultButton'; {	_width: '192px',
												_label: 'IDS_SELECT_EVENT_SHIP_BUTTON_UPPER_CASE',
												_action: 'selectShip', _actionParams: {shipId: shipId},
												_enabled: isOwned	}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="720:24,1080:40ah"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<alpha value="0.9"/>
					</style>
					<bind name="style" value="'marginRight'; isSmallResolution ? '16px' : '48px'"/>
					<bind name="class" value="isSmallResolution ? '$TextDefaultBold21NM' : '$TextDefaultBold27NM'"/>
					<bind name="text" value="subst('IDS_SUBST_LEGENDARY_PROGRAM_TITLE', [], {_nationProgram: nationProgram})"/>
				</block>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<marginTop value="720:16,1080:24ah"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<alpha value="0.75"/>
						<leading value="-1"/>
						<marginBottom value="8px"/>
					</style>
					<bind name="style" value="'marginRight'; isSmallResolution ? '16px' : '48px'"/>
					<bind name="class" value="isSmallResolution ? '$TextDefaultNM' : '$TextDefault17NM'"/>
					<bind name="text" value="tr('IDS_LEGENDARY_PROGRAM_' + toUpperCase(shipInfo.flagName) + '_DESC')"/>
				</block>
			</block>
		</block>
	</block>

	<!-- modal_window_ingame_survey -->
	<block className="InGameSurveyWindow">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'InGameSurveyWindowContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="InGameSurveyWindowContent">
		<bind name="primaryEntityDH" value="'surveyEntity'; CC.surveyData; $root.surveyId"/>
		<bind name="watchDH" value="'answers'; ['surveyEntity.surveyData.evUpdate']; surveyEntity.surveyData.answers"/>
		<bind name="watchDH" value="'isAnswered'; ['surveyEntity.surveyData.evUpdate']; surveyEntity.surveyData.answered"/>
		<bind name="action" value="'closeThankYouSign'; 'exit'; {}"/>
		<bind name="var" value="{windowAppearLag: 0.3}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1100px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="var" value="{answerIsClicked : false}"/>
				<bind name="catch" value="'showThankYouSign'; {answerIsClicked: true}"/>
				<bind name="dispatch" value="'showThankYouSign'; 'closeThankYouSign'; null; false; 3"/>
				<block>
					<bind name="visible" value="answerIsClicked"/>
					<bind name="appear" value="'showThankYouSign'; 0.15; 0.5; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.11; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$MiddleAlignedAbsolutely"/>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<styleClass value="$TextAccent"/>
						<bind name="class" value="'$FontColorWhite'"/>
						<default_text value="IDS_THANKS_FOR_MAKING_PROJECT_BETTER"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<position value="absolute"/>
						<right value="-50px"/>
						<top value="14px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$MiddleAligned"/>
					<block type="text">
						<bind name="appear" value="'showThankYouSign'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
						<style>
							<maxWidth value="900"/>
							<textAlign value="center"/>
						</style>
						<styleClass value="$TextAccent"/>
						<bind name="class" value="'$FontColorWhite'"/>
						<bind name="text" value="surveyEntity.surveyData.question"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<marginTop value="24px"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'showThankYouSign'; 0.15; 0.11; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
						<block>
							<bind name="visible" value="surveyEntity.surveyData.layout == 'horizontal'"/>
							<bind name="repeat" value="answers; 'SurveyAnswerItemHorizontalLayout'; {}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="surveyEntity.surveyData.layout == 'vertical'"/>
							<bind name="repeat" value="answers; 'SurveyAnswerItemVerticalLayout'; { _type: surveyEntity.surveyData.type }"/>
						</block>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * answers.length)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<style>
							<width value="100%"/>
							<marginTop value="15px"/>
						</style>
						<block className="HorizontalDivider">
							<styleClass value="$PxHorizontalCorrection"/>
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<marginTop value="1px"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * answers.length)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.15; 0.165; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="30px"/>
					</style>
					<bind name="contains" value="answers; ($item.selected == true); 'hasSelectedItems'"/>
					<bind name="watch" value="'isSubmitBtnEnabled'; hasSelectedItems &amp;&amp; !answerIsClicked"/>
					<block>
						<style>
							<width value="129px"/>
							<marginRight value="30px"/>
						</style>
						<bind name="fade" value="!answerIsClicked; 0.15; {alpha: 0, width: 0}; {alpha: 1, width: 129}; {alpha: 0, width: 0}"/>
						<bind name="instance" value="'DefaultButton'; {	_width: '129px',
														_enabled: isSubmitBtnEnabled,
														_action: 'inGameSurveySubmit',
														_actionParams: {surveyId: $root.surveyId},
														_dispatch: 'showThankYouSign',
														_isTransactionBtn: true,
														_label: 'IDS_SUBMIT', 
														_focusIndex: 1, 
														_defaultFocused: true }"/>
					</block>
					<block>
						<style>
							<width value="129px"/>
						</style>
						<bind name="instance" value="'DefaultButton'; {	_width: '129px', 
														_enabled: true, 
														_action: !isAnswered ? 'inGameSurveyCancel' : 'exit',
														_dispatch: 'closeThankYouSign',
														_actionParams: {surveyId: $root.surveyId},
														_label: 'IDS_CLOSE_UPPER_CASE', 
														_focusIndex: 2 }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="SurveyAnswerItemHorizontalLayout">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * $index)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<bind name="var" value="{windowAppearLag: 0.3}"/>
		<style>
			<width value="125px"/>
			<marginRight value="6px"/>
			<align value="center"/>
		</style>
		<bind name="action" value="'click'; 'inGameSurveyAnswer'; {variant: $index, surveyId: $root.surveyId}"/>
		<block className="radiobutton_notext" type="native">
			<bind name="selected" value="selected"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<marginTop value="3px"/>
				<maxWidth value="125"/>
				<textAlign value="center"/>
			</style>
			<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.15; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="text" value="text"/>
		</block>
	</block>
	<block className="SurveyAnswerItemVerticalLayout">
		<bind name="appear" value="'addedToStage'; 0.15; (windowAppearLag + (0.1 * $index)); {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<bind name="var" value="{windowAppearLag: 0.3}"/>
		<style>
			<width value="400px"/>
			<marginTop value="16px"/>
		</style>
		<block>
			<bind name="visible" value="_type == 'checkbox'"/>
			<bind name="instance" value="'CheckBox'; {	_isChecked: selected,
												_label: text,
												_maxTfWidth: 380,
												_action: 'inGameSurveyAnswer',
												_actionParams: {variant: $index, surveyId: $root.surveyId}}"/>
		</block>
		<block>
			<bind name="visible" value="_type == 'radio'"/>
			<bind name="action" value="'click'; 'inGameSurveyAnswer'; {variant: $index, surveyId: $root.surveyId}"/>
			<bind name="instance" value="'RadioButton'; { _selected: selected, _text: text, _maxTfWidth: 380 }"/>
		</block>
	</block>
	<block className="RadioButton">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<block className="radiobutton_notext" type="native">
			<style>
				<position value="absolute"/>
			</style>
			<bind name="selected" value="_selected"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<marginLeft value="23px"/>
				<marginTop value="-5px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxTfWidth ? _maxTfWidth : 250"/>
			<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.15; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="text" value="_text"/>
		</block>
	</block>

	<!-- modal_window_paragons_drop_branch -->
	<block className="ModalWindowParagonsDropBranch">
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<bind name="action" value="'addedToStage'; !(isSeenParagonInShipTree) ? 'ServerUIDataUSS.setUserTaskExecuted' : null; {taskId: SC.Common.USER_TASKS_FLAGS.KNOWS_ABOUT_PARAGONS_IN_SHIP_TREE}"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.4"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'ModalWindowParagonsDropBranchContent'; startShow ? {} : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="ModalWindowParagonsDropBranchContent">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'lagAfterAddedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'denyReasons'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.denyReasons"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize';{	_windowName: 'IDS_PARAGONS_DROP_BRANCH_MODAL_WINDOW_HEADER', 
														_backButtonText: 'IDS_RETURN_TO_TECH_TREE', 
														_request: 'returnToDock',
														_paddingRight: '1280:12,1920:24aw', _paddingLeft: '1280:12,1920:24aw',
										  			}"/>
		</block>
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'summa'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.summa"/>
		<bind name="watch" value="'creditsTotalSumm'; (summa['shipCost'] + summa['modulesCost'])"/>
		<block>
			<style>
				<marginTop value="720:0,1080:128ah"/>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block>
				<block>
					<style>
						<width value="340px"/>
					</style>
					<bind name="instance" value="'ParagonDropBranchInfoBlock'; {}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="60px"/>
					<height value="100px"/>
					<alpha value="0.5"/>
					<marginTop value="70px"/>
					<marginRight value="1280:16,1920:32aw"/>
					<marginLeft value="1280:16,1920:32aw"/>
					<backgroundImage value="url:../paragons/paragons_drop_branch/arrow.png"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="creditsTotalSumm &gt; 0"/>
				<block>
					<style>
						<width value="340px"/>
					</style>
					<bind name="instance" value="'ParagonDropBranchCompensationBlock'; creditsTotalSumm ? {} : null"/>
				</block>
				<block>
					<style>
						<width value="60px"/>
						<height value="100px"/>
						<alpha value="0.5"/>
						<marginTop value="70px"/>
						<marginRight value="1280:16,1920:32aw"/>
						<marginLeft value="1280:16,1920:32aw"/>
						<backgroundImage value="url:../paragons/paragons_drop_branch/arrow.png"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="340px"/>
				</style>
				<bind name="instance" value="'ParagonDropBranchBonusBlock'; {}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<align value="center"/>
				<marginTop value="720:24,1080:64ah"/>
			</style>
			<block>
				<bind name="visible" value="denyReasons"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginBottom value="720:16,1080:32ah"/>
					<marginTop value="-16px"/>
				</style>
				<bind name="watch" value="'paragonDenyReasons'; [
		'NO_REASON',
		'IS_IN_BATTLE',
		'IS_IN_DIVISION',
		'IS_NEED_SERVICE'
	]"/>
				<bind name="instance" value="'WarningMessageBigIcon'; denyReasons ? {	_text: tr('IDS_PARAGON_DENY_REASON_' + paragonDenyReasons[denyReasons]),
																		_noWidth: true, _medium: true} : null"/>
			</block>
			<block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 5.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<bind name="instance" value="'DefaultButton'; !denyReasons	? {	_width: '129px',
																	_label: 'IDS_CONTINUE',
																	_focusIndex: 0,
																	_enabled: true,
																	_request: 'showModalParagonsDropBranchConfirmation',
																	_requestParams: {shipId: $root.shipId}}
																: null"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<bind name="style" value="'marginLeft'; denyReasons ? 0 : '24px'"/>
					<bind name="instance" value="'DefaultButton'; {	_width: '129px',
													_label: 'IDS_CANCEL_UPPER_CASE',
													_focusIndex: 1,
													_enabled: true,
													_request: 'closeWindow'}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="WarningMessageBigIcon">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'width'; _noWidth ? 'auto' : '100%'"/>
		<block>
			<bind name="visible" value="!(_medium)"/>
			<style>
				<marginRight value="16px"/>
				<marginTop value="-2px"/>
				<marginBottom value="-3px"/>
			</style>
			<block className="icon_warning_orange_big" type="native"/>
		</block>
		<block>
			<bind name="visible" value="_medium"/>
			<style>
				<marginRight value="8px"/>
				<marginTop value="-3px"/>
			</style>
			<block className="icon_warning_orange_mid" type="native"/>
		</block>
		<block type="text">
			<bind name="class" value="_medium ? '$TextDefault17NM' : '$TextDefault25NM'"/>
			<bind name="class" value="'$FontColorOrange'"/>
			<bind name="style" value="'width'; _noWidth ? 'auto' : '100%'"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ParagonDropBranchInfoBlock">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; $root.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<width value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="tooltip" value="'ParagonDropBranchInfoTooltip'; {}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="256px"/>
				<height value="256px"/>
				<marginBottom value="16px"/>
				<backgroundImage value="url:../paragons/paragons_drop_branch/info.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="8px"/>
				<marginRight value="8px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-8"/>
					<marginBottom value="4px"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefaultBold25NM"/>
				<bind name="text" value="'IDS_DROP_BRANCH_PROGESS_LABEL'"/>
			</block>
			<block className="icon_info_big" type="native"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.8"/>
			</style>
			<styleClass value="$TextDefaultBold17NM"/>
			<bind name="text" value="tr(toUpperCase('IDS_' + shipInfo.country + '_' + shipInfo.subtype))"/>
		</block>
		<block>
			<style>
				<marginTop value="24px"/>
				<width value="100%"/>
				<alpha value="0.7"/>
			</style>
			<bind name="repeat" value="	[{ _paragraphText: 'IDS_PARAGONS_DROP_BRANCH_INFO_BLOCK_0'}]; 'RepeatParagraphItemNM'; {_leading: -1, _width: '100%', _class: '$TextDefault17NM', _marginBottom: '16px'}"/>
		</block>
	</block>
	<block className="ParagonDropBranchCompensationBlock">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'summa'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.summa"/>
		<bind name="watch" value="'creditsTotalCompenstionPriceInfo';	{currency: SC.Common.CURRENCIES.CREDITS, finalPrice: (summa['shipCost'] + summa['modulesCost'])}"/>
		<bind name="watch" value="'modulesTotalCompenstionPriceInfo';	{currency: SC.Common.CURRENCIES.CREDITS, finalPrice: summa['modulesCost']}"/>
		<style>
			<width value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="tooltip" value="'ParagonDropBranchCompensationTooltip'; {}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="256px"/>
				<height value="256px"/>
				<marginBottom value="16px"/>
				<backgroundImage value="url:../paragons/paragons_drop_branch/compensation.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="8px"/>
				<marginRight value="8px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-8"/>
					<marginBottom value="4px"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefaultBold25NM"/>
				<bind name="text" value="'IDS_DROP_BRANCH_COMPENSATION_LABEL'"/>
			</block>
			<block className="icon_info_big" type="native"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginLeft value="-2px"/>
				<marginTop value="-7px"/>
				<marginBottom value="-6px"/>
				<alpha value="0.8"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: creditsTotalCompenstionPriceInfo, _medium: true}"/>
		</block>
		<block>
			<style>
				<marginTop value="24px"/>
				<width value="100%"/>
				<alpha value="0.7"/>
			</style>
			<bind name="var" value="{compenstionDescriptionList: [	{_paragraphText: 'IDS_PARAGONS_DROP_BRANCH_COMPENSATION_INFO_BLOCK_0'},
													{_paragraphText: 'IDS_PARAGONS_DROP_BRANCH_COMPENSATION_INFO_BLOCK_1'},
													{_paragraphText: 'IDS_PARAGONS_DROP_BRANCH_COMPENSATION_INFO_BLOCK_2'},
													{_paragraphText: 'IDS_PARAGONS_DROP_BRANCH_COMPENSATION_INFO_BLOCK_3'},
													{_paragraphText: 'IDS_PARAGONS_DROP_BRANCH_COMPENSATION_INFO_BLOCK_4'},
													{_paragraphText: 'IDS_PARAGONS_DROP_BRANCH_COMPENSATION_INFO_BLOCK_5'}]}"/>
			<bind name="repeat" value="compenstionDescriptionList; 'RepeatParagraphItemNM'; {_leading: -1, _width: '100%', _class: '$TextDefault17NM', _marginBottom: '16px'}"/>
		</block>
	</block>
	<block className="ParagonDropBranchBonusBlock">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; $root.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'shipsToBonus'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.shipsToBonus"/>
		<bind name="watchDH" value="'summa'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.summa"/>
		<bind name="firstEntityDH" value="'paragonSeasonEntity'; CC.paragonSeason"/>
		<bind name="watchDH" value="'paragonSeasonDropsSharedMade';	['paragonSeasonEntity.paragonSeason.evUpdateDropsMade']; paragonSeasonEntity.paragonSeason.dropsSharedMade"/>
		<bind name="watchDH" value="'bonusTagsForFirstDrop';	['paragonSeasonEntity.paragonSeason.evUpdate']; paragonSeasonEntity.paragonSeason.bonusTagsForFirstDrop"/>
		<bind name="watch" value="'isMultiplierAvailable'; ((bonusTagsForFirstDrop &gt; 1) &amp;&amp; (paragonSeasonDropsSharedMade == 0))"/>
		<bind name="watch" value="'totalParagonXPBonusPriceInfo';	{currency: SC.Common.CURRENCIES.PARAGON_XP, finalPrice: summa['bonusParagon']}"/>
		<style>
			<width value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="tooltip" value="'ParagonDropBranchBonusTooltip'; {}"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="256px"/>
				<height value="256px"/>
				<marginBottom value="16px"/>
				<backgroundImage value="url:../paragons/paragons_drop_branch/bonus.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="8px"/>
				<marginRight value="8px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-8"/>
					<marginBottom value="4px"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefaultBold25NM"/>
				<bind name="text" value="isMultiplierAvailable	? 	subst('IDS_DROP_BRANCH_BONUSES_MULTIPLIER_LABEL', [], {multiplier: bonusTagsForFirstDrop})
												:	tr('IDS_DROP_BRANCH_BONUSES_LABEL')"/>
			</block>
			<block className="icon_info_big" type="native"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginLeft value="-2px"/>
				<marginTop value="-7px"/>
				<marginBottom value="-6px"/>
				<alpha value="0.8"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: totalParagonXPBonusPriceInfo, _medium: true}"/>
		</block>
		<block>
			<style>
				<marginTop value="24px"/>
				<width value="100%"/>
				<alpha value="0.7"/>
			</style>
			<bind name="instance" value="'RepeatParagraphItemNM'; {	_paragraphText: 'IDS_PARAGONS_DROP_BRANCH_BONUS_BLOCK_0', _leading: -1,
													_width: '100%', _class: '$TextDefault17NM', marginBottom: '16px'}"/>
		</block>
		<block type="text">
			<style>
				<leading value="-1"/>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="style" value="'textColor'; 0xFFFF9933"/>
			<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; '[icon] ' + tr('IDS_PARAGONS_DROP_BRANCH_BONUS_BLOCK_1')"/>
		</block>
	</block>
	<block className="ParagonDropBranchInfoTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {_headerText: 'IDS_DROP_BRANCH_TOOLTIP_HEADER'}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDropShipsList'; {}"/>
			</block>
		</block>
	</block>
	<block className="TooltipSystemDropShipsList">
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'shipsToReset'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.shipsToReset"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<style>
				<margin value="-12px"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-16px"/>
			</style>
			<bind name="repeat" value="shipsToReset; 'DropShipPriceTagLine'; {_currency: SC.Common.CURRENCIES.CREDITS, _noPriceTag: true}"/>
		</block>
	</block>
	<block className="ParagonDropBranchCompensationTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {_headerText: 'IDS_DROP_BRANCH_COMPENSATION_TOOLTIP_HEADER'}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemCompensationShipsList'; {}"/>
			</block>
		</block>
	</block>
	<block className="TooltipSystemCompensationShipsList">
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'shipsToSell'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.shipsToSell"/>
		<bind name="watchDH" value="'summa'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.summa"/>
		<bind name="watch" value="'creditsTotalCompenstionPriceInfo';	{currency: SC.Common.CURRENCIES.CREDITS, finalPrice: (summa['shipCost'] + summa['modulesCost'])}"/>
		<bind name="watch" value="'modulesTotalCompenstionPriceInfo';	{currency: SC.Common.CURRENCIES.CREDITS, finalPrice: summa['modulesCost']}"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-12px"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginLeft value="-12px"/>
					<marginRight value="-12px"/>
					<marginTop value="-12px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-12px"/>
				</style>
				<bind name="repeat" value="shipsToSell; 'DropShipPriceTagLine'; {_currency: SC.Common.CURRENCIES.CREDITS}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DropShipTotalPriceLine'; modulesTotalCompenstionPriceInfo.finalPrice &gt; 0	? {	_text: 'IDS_PARAGONS_TOTAL_MODULES_COMPENSATION_PRICE_LINE',
																											_priceInfo: modulesTotalCompenstionPriceInfo,
																											_small: true}
																										: null"/>
			</block>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="true"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-12px"/>
				<marginTop value="-12px"/>
			</style>
			<bind name="instance" value="'DropShipTotalPriceLine'; {	_text: 'IDS_BATTLE_STATS_TOTAL',
													_priceInfo: creditsTotalCompenstionPriceInfo,
													_big: true}"/>
		</block>
	</block>
	<block className="DropShipPriceTagLine">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<alpha value="0.9"/>
			<marginBottom value="16px"/>
		</style>
		<bind name="watch" value="'finalPriceCount'; _currency == SC.Common.CURRENCIES.PARAGON_XP	? bonusParagon : shipCost"/>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-6px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_isSelf: true, _shipID: id, _fontSizeClass: '$FontSizeSmall'}"/>
		</block>
		<block>
			<style>
				<marginTop value="-6px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'PriceTag'; _noPriceTag	? null
												: { priceInfo: {	currency: _currency,
																	finalPrice: finalPriceCount}, _small: true}"/>
		</block>
		<block>
			<bind name="visible" value="_noPriceTag ? false : true"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<alpha value="0.5"/>
				<bottom value="-3"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="TooltipSystemBonusShipsList">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; $root.shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'summa'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.summa"/>
		<bind name="firstEntityDH" value="'paragonSeasonEntity'; CC.paragonSeason"/>
		<bind name="watchDH" value="'paragonSeasonDropsSharedMade';	['paragonSeasonEntity.paragonSeason.evUpdateDropsMade']; paragonSeasonEntity.paragonSeason.dropsSharedMade"/>
		<bind name="watchDH" value="'bonusTagsForFirstDrop';	['paragonSeasonEntity.paragonSeason.evUpdate']; paragonSeasonEntity.paragonSeason.bonusTagsForFirstDrop"/>
		<bind name="watch" value="'isMultiplierAvailable'; ((bonusTagsForFirstDrop &gt; 1) &amp;&amp; (paragonSeasonDropsSharedMade == 0))"/>
		<bind name="watch" value="'totalParagonXPBonusPriceInfo';	{currency: SC.Common.CURRENCIES.PARAGON_XP, finalPrice: summa['bonusParagon']}"/>
		<bind name="watchDH" value="'shipsToBonus'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.shipsToBonus"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<margin value="-12px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-16px"/>
				</style>
				<bind name="repeat" value="shipsToBonus; 'DropShipPriceTagLine'; {_currency: SC.Common.CURRENCIES.PARAGON_XP}"/>
			</block>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="true"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-12px"/>
				<marginTop value="-12px"/>
			</style>
			<bind name="instance" value="'DropShipTotalPriceLine'; {	_text: 'IDS_BATTLE_STATS_TOTAL',
													_priceInfo: totalParagonXPBonusPriceInfo,
													_big: true}"/>
		</block>
	</block>
	<block className="ParagonDropBranchBonusTooltip">
		<bind name="firstEntityDH" value="'paragonSeasonEntity'; CC.paragonSeason"/>
		<bind name="watchDH" value="'paragonSeasonDropsSharedMade';	['paragonSeasonEntity.paragonSeason.evUpdateDropsMade']; paragonSeasonEntity.paragonSeason.dropsSharedMade"/>
		<bind name="watchDH" value="'bonusTagsForFirstDrop';	['paragonSeasonEntity.paragonSeason.evUpdate']; paragonSeasonEntity.paragonSeason.bonusTagsForFirstDrop"/>
		<bind name="watch" value="'isMultiplierAvailable'; ((bonusTagsForFirstDrop &gt; 1) &amp;&amp; (paragonSeasonDropsSharedMade == 0))"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {_headerText: isMultiplierAvailable ?	subst('IDS_DROP_BRANCH_BONUSES_TOOLTIP_MULTIPLIER_HEADER', [], {multiplier: bonusTagsForFirstDrop})
																								:	tr('IDS_DROP_BRANCH_BONUSES_TOOLTIP_HEADER')}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemBonusShipsList'; {}"/>
			</block>
		</block>
	</block>
	<block className="DropShipTotalPriceLine">
		<style>
			<width value="100%"/>
			<alpha value="0.9"/>
			<flow value="horizontal"/>
			<marginTop value="12px"/>
			<marginBottom value="12px"/>
		</style>
		<bind name="style" value="'alpha'; _big ? 1 : 0.9"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="class" value="	_small	? '$TextDefaultBold13NM' :
							_big	? '$TextDefaultBold17NM'
									: '$TextDefaultBoldNM'"/>
				<bind name="text" value="_text"/>
			</block>
		</block>
		<block>
			<style>
				<marginBottom value="-5px"/>
			</style>
			<bind name="style" value="'marginTop'; _big ? '-5px' : '-6px'"/>
			<bind name="instance" value="'PriceTag'; { priceInfo: _priceInfo, _small: _small}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<alpha value="0.5"/>
				<bottom value="-3"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>

	<!-- modal_window_paragons_drop_branch_confirmation -->
	<block className="ModalWindowParagonsDropBranchConfirmation">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: 'IDS_CONFIRMATION', _contentElement: 'ParagonsDropBranchConfirmationContent'}"/>
	</block>
	<block className="ParagonsDropBranchConfirmationContent">
		<bind name="firstEntityDH" value="'paragonInfoEntity'; CC.paragonInfo"/>
		<bind name="watchDH" value="'shipsToReset'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.shipsToReset"/>
		<bind name="watchDH" value="'shipsToBonus'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.shipsToBonus"/>
		<bind name="watch" value="'totalParagonXPBonusPriceInfo';	{currency: SC.Common.CURRENCIES.PARAGON_XP, finalPrice: summa['bonusParagon']}"/>
		<bind name="watchDH" value="'summa'; ['paragonInfoEntity.paragonInfo.evUpdate']; paragonInfoEntity.paragonInfo.summa"/>
		<bind name="watch" value="'creditsTotalCompenstionPriceInfo';	{currency: SC.Common.CURRENCIES.CREDITS, finalPrice: (summa['shipCost'] + summa['modulesCost'])}"/>
		<style>
			<width value="400px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
				<marginBottom value="16px"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
			</style>
			<block>
				<bind name="visible" value="creditsTotalCompenstionPriceInfo.finalPrice &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="tooltip" value="'ParagonDropBranchCompensationTooltip'; {}"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_isSelf: true, _shipID: shipsToReset[0].id, _fontSizeClass: '$FontSizeDefault'}"/>
					</block>
					<block type="text">
						<style>
							<marginTop value="4px"/>
							<marginLeft value="4px"/>
							<marginRight value="8px"/>
						</style>
						<styleClass value="$TextDefaultBold19NM"/>
						<default_text value="—"/>
					</block>
					<block>
						<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_isSelf: true, _shipID: shipsToReset[shipsToReset.length-1].id, _fontSizeClass: '$FontSizeDefault'}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<marginTop value="3px"/>
					</style>
					<bind name="instance" value="'PriceTag'; { priceInfo: creditsTotalCompenstionPriceInfo}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="tooltip" value="'ParagonDropBranchBonusTooltip'; {}"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_isSelf: true, _shipID: shipsToBonus[0].id, _fontSizeClass: '$FontSizeDefault'}"/>
					</block>
					<block type="text">
						<style>
							<marginTop value="4px"/>
							<marginLeft value="4px"/>
							<marginRight value="8px"/>
						</style>
						<styleClass value="$TextDefaultBold19NM"/>
						<default_text value="—"/>
					</block>
					<block>
						<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_isSelf: true, _shipID: shipsToBonus[shipsToBonus.length-1].id, _fontSizeClass: '$FontSizeDefault'}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<marginTop value="3px"/>
					</style>
					<bind name="instance" value="'PriceTag'; { priceInfo: totalParagonXPBonusPriceInfo}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="'IDS_QUESTION_DROP_BRANCH_CONFIRMATION_WINDOW'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="24px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="129px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_YES',
												_focusIndex: 0,
												_enabled: true ,
												_request: 'dropShipsBranch',
												_requestParams: {shipID: $root.shipId}}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="129px"/>
					<marginLeft value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_NO',
												_focusIndex: 1,
												_enabled: true,
												_request: 'closeWindow'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_window_postbattle_abuse_status -->
	<block className="ModalWindowPostbattleAbuseStatusReport">
		<bind name="soundOn" value="'addedToStage'; 'openExchange'; 'window'"/>
		<bind name="instance" value="'SmallModalWindow'; {	_headerText: 'IDS_PBS_ABUSE', 
											_contentElement: 'ModalWindowPostbattleAbuseStatusReportContent',
											_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT}"/>
	</block>
	<block className="AbuseReasonBulletedListElement">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginBottom value="12"/>
				<alpha value="0.75"/>
			</style>
			<styleClass value="$TextDefault21NM"/>
			<bind name="text" value="tr('IDS_ABUSE_REASON_' + toUpperCase($value) + '_WITH_BULLET')"/>
		</block>
	</block>
	<block className="ModalWindowPostbattleAbuseStatusReportContent">
		<bind name="firstEntityDH" value="'battleResult'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'postBattleData'; ['battleResult.dataComponent.evDataChanged']; battleResult.dataComponent.data"/>
		<bind name="watch" value="'abuseStatus'; postBattleData['personal']['player']['abuseStatus']"/>
		<bind name="watch" value="'isEconomicallyPunished'; postBattleData['personal']['isEconomicallyPunished']"/>
		<bind name="watch" value="'abuseComponents'; postBattleData['personal']['player']['abuse_components']"/>
		<bind name="watch" value="'abuseStatusStr'; SC.Common.ABUSE_STATUS.VALUE_TO_NAME[abuseStatus]"/>
		<style>
			<width value="560px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block>
				<block type="text">
					<style>
						<maxWidth value="560"/>
						<marginTop value="24px"/>
						<marginBottom value="12px"/>
						<alpha value="0.75"/>
					</style>
					<styleClass value="$TextDefault21NM"/>
					<default_text value="IDS_RESULT_SCREEN_MODAL_WINDOW_ABUSE_REASONS_LIST_HEADER"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginLeft value="24px"/>
						<marginBottom value="12px"/>
					</style>
					<bind name="repeat" value="abuseComponents; 'AbuseReasonBulletedListElement'; {}"/>
				</block>
				<block type="text">
					<bind name="visible" value="isEconomicallyPunished"/>
					<style>
						<maxWidth value="560"/>
						<marginBottom value="24px"/>
						<alpha value="0.75"/>
					</style>
					<styleClass value="$TextDefault21NM"/>
					<default_text value="IDS_ABUSE_ECONOMICALLY_PUNISHED"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault21NM"/>
					<style>
						<maxWidth value="560"/>
						<marginBottom value="24px"/>
						<alpha value="0.75"/>
					</style>
					<bind name="text" value="tr('IDS_ABUSE_STATUS_' + abuseStatusStr + '_DESCRIPTION')"/>
				</block>
			</block>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_name: 'btn_cancel',
											_type: SC.Ui_styles.BUTTON_TYPE.DEFAULT,
											_size: 1,
											_enabled: true,
											_focusIndex: 0,
											_label: 'IDS_CLOSE_UPPER_CASE'}"/>
		</block>
	</block>

	<!-- modal_window_postbattle_key_battle -->
	<block className="ModalWindowPostbattlKeyBattleRewards">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ModalWindowHeaderFullSize'; {_windowName:toUpperCase(tr('IDS_MODAL_WINDOW_POSTBATTLE_KEY_BATTLE_RESULTS_TITLE')), _hideBackButton: true, _hideCloseButton: true}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="instance" value="'ModalWindowPostbattlKeyBattleRewardsContent'; {}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<bottom value="720:40,1080:64ah"/>
			</style>
			<block className="DefaultButtonModal">
				<style>
					<marginBottom value="6px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="name" value="'Modal_window_action_Button' + 'IDS_CLOSE_UPPER_CASE'"/>
				<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_focusIndex: 1,
													_defaultFocused: false}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowPostbattlKeyBattleRewardsContent">
		<bind name="stageSize"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'bonusCurrency'; []; battleResultsDH.dataComponent.data.personal.bonusCurrency"/>
		<bind name="watch" value="'amount'; bonusCurrency.amount ? bonusCurrency.amount : 0"/>
		<bind name="watch" value="'currencyName'; bonusCurrency.currency ? bonusCurrency.currency : SC.Common.CURRENCIES.SALTPETER"/>
		<bind name="watch" value="'premiumBonusPercent'; bonusCurrency.premium_factor ? format(bonusCurrency.premium_factor * 100 - 100, -1) : 0"/>
		<bind name="watchDH" value="'game_data'; 	[]; battleResultsDH.dataComponent.data.game_data"/>
		<bind name="watchDH" value="'battleResult'; 	[]; game_data.battle_result"/>
		<bind name="watch" value="'isHD'; stageHeight &gt;= 1080 || stageWidth &gt;= 1920"/>
		<bind name="watch" value="'icon_path'; 'url:../events/halloween20/icon_reward_' + battleResult + (isHD ? ''  : '_small') + '.png'"/>
		<style>
			<width value="300px"/>
			<marginTop value="720:40,1080:64ah"/>
			<marginBottom value="720:40,1080:64ah"/>
		</style>
		<bind name="style" value="'width'; isHD ? 600 : 300"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginBottom value="720:8,1080:32ah"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefaultBold36NM"/>
				<bind name="text" value="'IDS_MODAL_WINDOW_POSTBATTLE_KEY_BATTLE_RESULTS_EVALUATION_TITLE_' + battleResult"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<width value="1px"/>
					<height value="1px"/>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'width'; (isHD ? 600 : 300) + 'px'"/>
				<bind name="style" value="'height'; (isHD ? 400 : 200) + 'px'"/>
				<bind name="style" value="'backgroundImage'; icon_path"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="32px"/>
				<marginBottom value="24px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold36NM"/>
				<bind name="text" value="'IDS_MODAL_WINDOW_POSTBATTLE_KEY_BATTLE_RESULTS_REWARD_TITLE'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<block>
				<style>
					<width value="100%f"/>
				</style>
				<block type="text">
					<style>
						<textAlign value="right"/>
						<position value="absolute"/>
						<width value="100%"/>
					</style>
					<styleClass value="$TextDefaultBoldCounter60NM"/>
					<bind name="appear" value="'addedToStage'; 0.8; 1; {intValue: 0}; {intValue: amount}"/>
					<bind name="text" value="intValue"/>
				</block>
				<block type="text">
					<style>
						<textAlign value="right"/>
						<alpha value="0"/>
						<marginLeft value="4px"/>
					</style>
					<styleClass value="$TextDefaultBoldCounter60NM"/>
					<bind name="text" value="format(amount, -1)"/>
				</block>
			</block>
			<block>
				<style>
					<width value="44px"/>
					<height value="44px"/>
					<backgroundSize value="cover"/>
					<marginLeft value="12px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<bind name="style" value="'backgroundImage'; 'url:../events/halloween20/icon_reward_' + toLowerCase(currencyName) + '_postbattle' + '.png'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="battleResult == SC.Battle.BATTLE_RESULT.PORTAL"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 6*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<default_text value="IDS_MODAL_WINDOW_POSTBATTLE_KEY_BATTLE_RESULTS_DESCRIPTION_5"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="8px"/>
				</style>
				<styleClass value="$TextDefaultNM"/>
				<styleClass value="$FontColorGreen"/>
				<default_text value="+100%"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="premiumBonusPercent &gt; 0"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<default_text value="IDS_MODAL_WINDOW_POSTBATTLE_KEY_BATTLE_RESULTS_DESCRIPTION_HAS_PREM"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="8px"/>
				</style>
				<styleClass value="$TextDefaultNM"/>
				<styleClass value="$FontColorGreen"/>
				<bind name="text" value="'+' + premiumBonusPercent + '%'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_window_postbattle_rewards -->
	<block className="ModalWindowPostbattleRewards">
		<bind name="instance" value="'SmallModalWindow'; {_headerText: toUpperCase(tr('IDS_MODAL_WINDOW_POSTBATTLE_RESULTS_TITLE')), _contentElement: 'ModalWindowPostbattleRewardsContent'}"/>
	</block>
	<block className="ModalWindowPostbattleRewardsContent">
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'bonusCurrency'; []; battleResultsDH.dataComponent.data.personal.bonusCurrency"/>
		<style>
			<width value="540px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="4px"/>
				<marginTop value="48px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold27NM"/>
				<bind name="text" value="'IDS_YOUR_REWARD'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<block>
				<block type="text">
					<style>
						<textAlign value="right"/>
						<width value="100%"/>
						<position value="absolute"/>
					</style>
					<styleClass value="$TextDefaultBoldCouner81NM"/>
					<bind name="soundOn" value="'addedToStage'; 'startGetAnimation'; SC.Common.CURRENCIES.EVENTUM_1"/>
					<bind name="appear" value="'addedToStage'; 0.6; 1.2; {intValue: 0}; {intValue: bonusCurrency.amount}"/>
					<bind name="dispatch" value="'playSoundAnimationEnd'; 'addedToStage'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 1.8"/>
					<bind name="soundOn" value="'playSoundAnimationEnd'; 'endGetAnimation'; SC.Common.CURRENCIES.EVENTUM_1"/>
					<bind name="text" value="intValue"/>
				</block>
				<block type="text">
					<style>
						<textAlign value="right"/>
						<alpha value="0"/>
						<marginLeft value="4px"/>
					</style>
					<styleClass value="$TextDefaultBoldCouner81NM"/>
					<bind name="text" value="format(bonusCurrency.amount, -1)"/>
				</block>
			</block>
			<block>
				<style>
					<width value="80px"/>
					<height value="80px"/>
					<backgroundSize value="cover"/>
					<marginLeft value="12px"/>
					<marginTop value="-1px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../reward_icons/' + toLowerCase(tr(bonusCurrency.currency)) + '.png'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="40px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<block className="DefaultButtonModal">
				<style>
					<marginBottom value="6px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="name" value="'Modal_window_action_Button' + 'IDS_CLOSE_UPPER_CASE'"/>
				<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_focusIndex: 1,
													_defaultFocused: false}"/>
			</block>
		</block>
	</block>

	<!-- modal_window_promoscreen -->
	<block className="ModalWindowPromoscreen">
		<params>
			<param name="name" value="window_ModalWindowPromoScreen"/>
		</params>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="child" value="$root.data.template_id; { data: $root.data.content }; 	'PromoscreenTemplate0';
																			'PromoscreenTemplate1';
																			'PromoscreenTemplate2';
																			'PromoscreenTemplate3'"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<paddingRight value="1280:20,1920:46aw"/>
				<paddingLeft value="1280:20,1920:46aw"/>
				<paddingTop value="720:20,2160:100ah"/>
			</style>
			<block>
				<bind name="visible" value="!$root.data.is_escape_blocked"/>
				<style>
					<position value="absolute"/>
					<right value="0px"/>
				</style>
				<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
				<params>
					<param name="name" value="escButtonPromoScreen"/>
				</params>
			</block>
			<block>
				<bind name="visible" value="$root.data.is_escape_blocked"/>
				<style>
					<right value="0px"/>
					<width value="40px"/>
					<height value="40px"/>
					<marginTop value="-16px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_CLOSE'}; TooltipBehaviour.simple"/>
				<bind name="name" value="'btn_close_promo'"/>
				<bind name="input" value=""/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'CloseButton'; {}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="PromoscreenTemplate0">
		<bind name="primaryEntityDH" value="'imageEntity'; CC.byteArrayData; data.image"/>
		<bind name="watchDH" value="'imageData'; ['imageEntity.byteArrayData.evChanged']; imageEntity.byteArrayData.data"/>
		<bind name="watch" value="'smallResolution'; scaleCoef &gt;= scaleFactor"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<bind name="watch" value="'scaleFactor'; 1.25"/>
		<params>
			<param name="name" value="promoScreenTemplate0"/>
		</params>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'widthCoef'; 	(1920 / stageWidth)"/>
		<bind name="watch" value="'heightCoef'; 	(1080 / stageHeight)"/>
		<bind name="watch" value="'scaleCoef'; 	math.max(widthCoef, heightCoef)"/>
		<block>
			<params>
				<param name="name" value="promoScreenBackgroundImage0"/>
			</params>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImageData'; imageData"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<width value="600px"/>
				<bottom value="720:24,1080:40ah"/>
			</style>
			<block type="text">
				<params>
					<param name="name" value="promoScreenHeaderZeroTemplate"/>
				</params>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="data.title"/>
				<bind name="class" value="smallResolution ? '$TextDefaultBold23NM' : '$TextDefaultBold30NM'"/>
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
				</style>
				<bind name="text" value="toUpperCase(tr(data.title))"/>
			</block>
			<block type="text">
				<params>
					<param name="name" value="promoScreenDescriptionZeroTemplate"/>
				</params>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="data.description"/>
				<bind name="class" value="smallResolution ? '$TextDefault17NM' : '$TextDefault19NM'"/>
				<style>
					<width value="100%"/>
					<marginTop value="32px"/>
					<alpha value="0.8"/>
					<textAlign value="center"/>
				</style>
				<bind name="text" value="data.description"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="720:32,1080:40ah"/>
				</style>
				<bind name="instance" value="'PromoscreenButtonSet'; { _data: data.button_set }"/>
			</block>
		</block>
	</block>
	<block className="PromoscreenTemplate1">
		<bind name="primaryEntityDH" value="'imageEntity'; CC.byteArrayData; data.image"/>
		<bind name="watchDH" value="'imageData'; ['imageEntity.byteArrayData.evChanged']; imageEntity.byteArrayData.data"/>
		<bind name="watch" value="'smallResolution'; scaleCoef &gt;= scaleFactor"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<bind name="watch" value="'scaleFactor'; 1.25"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'widthCoef'; 	(1920 / stageWidth)"/>
		<bind name="watch" value="'heightCoef'; 	(1080 / stageHeight)"/>
		<bind name="watch" value="'scaleCoef'; 	math.max(widthCoef, heightCoef)"/>
		<block>
			<params>
				<param name="name" value="promoScreenTemplate1"/>
			</params>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<top value="50%"/>
				<marginTop value="-52%"/>
			</style>
			<bind name="style" value="'width'; smallResolution ? '950px' : '1200px'"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PromoscreenHeader'; { _smallResolution: smallResolution, _header: data.header_text_1, _subHeader: data.header_text_2 }"/>
			</block>
			<block>
				<params>
					<param name="name" value="promoScreenBackgroundImage1"/>
				</params>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'width'; smallResolution ? '950px' : '1200px'"/>
				<bind name="style" value="'height'; smallResolution ? '355px' : '450px'"/>
				<bind name="style" value="'marginTop'; smallResolution ? '32px' : '40px'"/>
				<bind name="style" value="'backgroundImageData'; imageData"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; smallResolution ? '32px' : '40px'"/>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<bind name="visible" value="(data.date_start == null) &amp;&amp; (data.date_end != null)"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'PromoscreenTimer'; { _data: data }"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<bind name="visible" value="data.date_start &amp;&amp; data.date_end"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'PromoscreenTimeRange'; { _smallResolution: smallResolution, _data: data }"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'marginTop'; (data.date_end == null) ? '0px' : (smallResolution ? '16px' : '24px')"/>
					<bind name="instance" value="'PromoscreenDescr'; { _smallResolution: smallResolution, _descrText: data.description }"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<bind name="style" value="'marginTop'; smallResolution ? '40px' : '48px'"/>
					<bind name="instance" value="'PromoscreenButtonSet'; { _data: data.button_set }"/>
				</block>
			</block>
		</block>
	</block>
	<block className="PromoscreenTemplate2">
		<bind name="primaryEntityDH" value="'imageEntity'; CC.byteArrayData; data.image"/>
		<bind name="watchDH" value="'imageData'; ['imageEntity.byteArrayData.evChanged']; imageEntity.byteArrayData.data"/>
		<bind name="watch" value="'smallResolution'; scaleCoef &gt;= scaleFactor"/>
		<bind name="watch" value="'scaleFactor'; 1.25"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'widthCoef'; 	(1920 / stageWidth)"/>
		<bind name="watch" value="'heightCoef'; 	(1080 / stageHeight)"/>
		<bind name="watch" value="'scaleCoef'; 	math.max(widthCoef, heightCoef)"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<position value="absolute"/>
				<top value="50%"/>
				<marginTop value="-53%"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<params>
				<param name="name" value="promoScreenTemplate2"/>
			</params>
			<block>
				<params>
					<param name="name" value="promoScreenBackgroundImage2"/>
				</params>
				<style>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'width'; smallResolution ? '420px' : '500px'"/>
				<bind name="style" value="'height'; smallResolution ? '560px' : '665px'"/>
				<bind name="style" value="'backgroundImageData'; imageData"/>
			</block>
			<block>
				<style>
					<top value="50%"/>
					<marginTop value="-60%"/>
				</style>
				<bind name="style" value="'width'; smallResolution ? '500px' : '600px'"/>
				<bind name="style" value="'marginLeft'; smallResolution ? '48px' : '64px'"/>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'PromoscreenHeader'; { _smallResolution: smallResolution, _header: data.header_text_1, _subHeader: data.header_text_2 }"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'marginTop'; smallResolution ? '48px' : '64px'"/>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<bind name="visible" value="data.date_start == null &amp;&amp; data.date_end"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'PromoscreenTimer'; { _data: data }"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<bind name="visible" value="data.date_start &amp;&amp; data.date_end"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'PromoscreenTimeRange'; { _smallResolution: smallResolution, _data: data }"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="style" value="'marginTop'; (data.date_end == null) ? '0px' : (smallResolution ? '16px' : '24px')"/>
						<bind name="instance" value="'PromoscreenDescr'; { _smallResolution: smallResolution, _descrText: data.description }"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<bind name="style" value="'marginTop'; smallResolution ? '64px' : '96px'"/>
						<bind name="instance" value="'PromoscreenButtonSet'; { _data: data.button_set }"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PromoscreenTemplate3">
		<bind name="primaryEntityDH" value="'imageEntity'; CC.byteArrayData; data.image"/>
		<bind name="watchDH" value="'imageData'; ['imageEntity.byteArrayData.evChanged']; imageEntity.byteArrayData.data"/>
		<bind name="countdown" value="data.date_end; 'dateEnd'; 'HIGHEST,WITH_DAYS'"/>
		<bind name="countdown" value="data.date_start; 'startTime'; 'MM:dd'"/>
		<bind name="countdown" value="data.date_end; 'finishTime'; 'MM:dd'"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<bind name="watch" value="'scaleFactor'; 1.25"/>
		<bind name="watch" value="'smallResolution'; scaleCoef &gt;= scaleFactor"/>
		<params>
			<param name="name" value="promoScreenTemplate3"/>
		</params>
		<bind name="style" value="'width'; smallResolution ? '650px' : '800px'"/>
		<style>
			<position value="absolute"/>
			<top value="50%"/>
			<marginTop value="-50%"/>
		</style>
		<bind name="stageSize"/>
		<bind name="watch" value="'widthCoef'; 	(1920 / stageWidth)"/>
		<bind name="watch" value="'heightCoef'; 	(1080 / stageHeight)"/>
		<bind name="watch" value="'scaleCoef'; 	math.max(widthCoef, heightCoef)"/>
		<styleClass value="$MiddleAligned"/>
		<block>
			<params>
				<param name="name" value="promoScreenBackgroundImage3"/>
			</params>
			<bind name="soundOn" value="'click'; 'open_muted'; 'window'"/>
			<bind name="action" value="'click'; data.imageUrl ? 'navigateTo' : null; {	route: SC.Ui_windows.ROUTE.PORTAL,
																		data: { url: data.imageUrl,
																				isPrmp: true,
																				authorization: false}}"/>
			<bind name="action" value="'click' ; data.imageUrl ? 'setPromoViewed' : null ; {clickedButtonType: 'image'}"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'width'; smallResolution ? '650px' : '800px'"/>
			<bind name="style" value="'height'; smallResolution ? '365px' : '450px'"/>
			<bind name="style" value="'backgroundImageData'; imageData"/>
			<block>
				<bind name="visible" value="data.imageUrl"/>
				<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
				<bind name="transition" value="rollOver &amp;&amp; !(mouseDown); 0.1; {alpha: 0.3}; {alpha: 1.3}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginTop'; smallResolution ? '24px' : '32px'"/>
			<bind name="instance" value="'PromoscreenHeader'; { _smallResolution: smallResolution, _header: data.header_text_1, _subHeader: data.header_text_2 }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginTop'; smallResolution ? '32px' : '40px'"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="data.date_start == null &amp;&amp; data.date_end"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PromoscreenTimer'; { _data: data }"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="data.date_start &amp;&amp; data.date_end"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PromoscreenTimeRange'; { _smallResolution: smallResolution, _data: data }"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 4 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; (data.date_end == null) ? '0px' : (smallResolution ? '16px' : '24px')"/>
				<bind name="instance" value="'PromoscreenDescr'; { _smallResolution: smallResolution, _descrText: data.description }"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="style" value="'marginTop'; smallResolution ? '48px' : '64px'"/>
				<bind name="instance" value="'PromoscreenButtonSet'; { _data: data.button_set }"/>
			</block>
		</block>
	</block>
	<block className="PromoscreenHeader">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<params>
				<param name="name" value="promoScreenHeader"/>
			</params>
			<style>
				<width value="100%"/>
			</style>
			<bind name="class" value="_smallResolution ? '$TextDefaultBold30NM' : '$TextDefaultBold40NM'"/>
			<bind name="text" value="toUpperCase(tr(_header))"/>
		</block>
		<block type="text">
			<params>
				<param name="name" value="promoScreenSecondHeader"/>
			</params>
			<bind name="visible" value="_subHeader"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="style" value="'marginTop'; _smallResolution ? '14px' : '20px'"/>
			<bind name="class" value="_smallResolution ? '$TextDefault21NM' : '$TextDefault25NM'"/>
			<bind name="text" value="_subHeader"/>
		</block>
	</block>
	<block className="PromoscreenTimer">
		<bind name="countdown" value="_data.date_end; 'dateEnd'; 'HIGHEST,WITH_DAYS'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="21px"/>
				<height value="21px"/>
				<marginTop value="-5px"/>
				<marginRight value="8px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_rent_orange.png'"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="class" value="'$FontColorOrange'"/>
			<bind name="text" value="subst('IDS_PROMOSREEN_TIMER', [], { timer: dateEnd })"/>
		</block>
	</block>
	<block className="PromoscreenTimeRange">
		<bind name="timeFormat" value="_data.date_start; 'dd.MM'; 'formattedStartTime'"/>
		<bind name="timeFormat" value="_data.date_end; 'dd.MM'; 'formattedEndTime'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<bind name="class" value="_smallResolution ? '$TextDefaultBold19NM' : '$TextDefaultBold23NM'"/>
			<bind name="text" value="tr(formattedStartTime + ' — ')"/>
		</block>
		<block type="text">
			<bind name="class" value="_smallResolution ? '$TextDefaultBold19NM' : '$TextDefaultBold23NM'"/>
			<bind name="text" value="formattedEndTime"/>
		</block>
	</block>
	<block className="PromoscreenDescr">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<params>
				<param name="name" value="promoScreenDescription"/>
			</params>
			<style>
				<width value="100%"/>
				<alpha value="0.8"/>
			</style>
			<bind name="class" value="_smallResolution ? '$TextDefault17NM' : '$TextDefault19NM'"/>
			<bind name="text" value="_descrText"/>
		</block>
	</block>
	<block className="PromoscreenButtonSet">
		<bind name="var" value="{PROMOSCREEN_BUTTON_TYPES: {
			SEE_MORE: 'see_more',
			INGAME: 'ingame',
			BUY: 'buy'
		}
	}"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="isIn(PROMOSCREEN_BUTTON_TYPES.SEE_MORE, _data)"/>
			<bind name="instance" value="isIn(PROMOSCREEN_BUTTON_TYPES.SEE_MORE, _data) ? 'DefaultButton' : null; {
			_width: '200px',
																				_enabled: true,
																				_name: 'btn_promo_1',
																				_isTransactionBtn: true,
																				_request: 'gotoUrlByPRMP',
			_requestParams: {	url: _data.see_more.link, 
								isIngameUrl: _data.see_more.ingame,
								authorization: false	},
			_action: 'setPromoViewed',
			_actionParams: {clickedButtonType: PROMOSCREEN_BUTTON_TYPES.SEE_MORE},
			_label: _data.see_more.text,
			_focusIndex: 1,
			_isExternal: !_data.see_more.ingame
																			}"/>
		</block>
		<block>
			<bind name="visible" value="isIn(PROMOSCREEN_BUTTON_TYPES.INGAME, _data)"/>
			<bind name="style" value="'marginLeft'; isIn(PROMOSCREEN_BUTTON_TYPES.SEE_MORE, _data) ? '48px' : 0"/>
			<bind name="instance" value="isIn(PROMOSCREEN_BUTTON_TYPES.INGAME, _data) ? 'DefaultButton' : null; {
			_width: '200px',
			_enabled: true,
			_name: 'btn_promo_2',
			_isTransactionBtn: true,
			_request: 'navigateFromWeb',
			_requestParams: {	route: _data.ingame.route },
			_label: _data.ingame.text,
			_focusIndex: 2,
			_isExternal: !_data.ingame.ingame,
			_action: 'setPromoViewed',
			_actionParams: {clickedButtonType: PROMOSCREEN_BUTTON_TYPES.INGAME}}"/>
		</block>
		<block>
			<bind name="visible" value="isIn(PROMOSCREEN_BUTTON_TYPES.BUY, _data)"/>
			<bind name="style" value="'marginLeft'; isIn(PROMOSCREEN_BUTTON_TYPES.SEE_MORE, _data) || isIn(PROMOSCREEN_BUTTON_TYPES.INGAME, _data) ? '48px' : 0"/>
			<bind name="instance" value=" isIn(PROMOSCREEN_BUTTON_TYPES.BUY, _data) ? 'DefaultButton' : null; {
			_width: '200px',
																		_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
			_enabled: true,
			_focusIndex: 0,
			_defaultFocused: true,
																		_name: 'btn_promo_3',
																		_request: 'gotoUrlByPRMP',
																		_requestParams: {	url: _data.buy.link,
																							isIngameUrl: _data.buy.ingame,
																							authorization: false},
																		_action: 'setPromoViewed',
																		_actionParams: {clickedButtonType: PROMOSCREEN_BUTTON_TYPES.BUY},
																		_label: _data.buy.text,
			_isExternal: !_data.buy.ingame
		}"/>
		</block>
	</block>

	<!-- modal_window_replays -->
	<block className="ModalWindowReplays">
		<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 0 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<styleClass value="$Fullsize"/>
		<bind name="var" value="{windowAppearLag: 0.2}"/>
		<bind name="collectionDH" value="CC.replayMetadata; 'lastReplays'; 'lastReplays'"/>
		<bind name="collectionDH" value="CC.replayMetadata; 'savedReplays'; 'savedReplays'"/>
		<bind name="watch" value="'selectedTabIndex'; userPrefs.replaysTabIndex != null ? userPrefs.replaysTabIndex : SC.Common.REPLAYS_TABS.LAST"/>
		<bind name="watch" value="'replayCount'; (selectedTabIndex == SC.Common.REPLAYS_TABS.LAST) ? lastReplays.length : savedReplays.length"/>
		<bind name="watch" value="'tabVisibility'; lastReplays.length || savedReplays.length"/>
		<bind name="action" value="'addedToStage'; 'setUserPref'; { name: 'replaysTabIndex', value: !lastReplays.length &amp;&amp; savedReplays.length	? SC.Common.REPLAYS_TABS.SAVED
																																: SC.Common.REPLAYS_TABS.LAST }"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="88.6sw"/>
				<paddingTop value="1280:20,1920:46aw"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<top value="3px"/>
				</style>
				<bind name="instance" value="'BackButton'; {_text: 'IDS_RETURN_TO_DOCK', _request: 'closeModalReplays'}"/>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<top value="9px"/>
					<right value="1px"/>
				</style>
				<bind name="instance" value="'ModalWindowCloseIcon'; {}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="toUpperCase(tr('IDS_REPLAYS'))"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 1.5 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="88.6sw"/>
				<marginTop value="24px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextDefaultTech"/>
				<style>
					<marginTop value="4px"/>
					<marginBottom value="4px"/>
				</style>
				<bind name="text" value="'IDS_REPLAYS_SUBHEADER'"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="tabVisibility"/>
			<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="24px"/>
				<align value="center"/>
			</style>
			<block className="ReplaysMainTabButtons" type="ublock">
				<bind name="build!" value="{}"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1088px"/>
				<height value="100%"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<height value="32px"/>
					<marginTop value="24px"/>
					<paddingTop value="4px"/>
				</style>
				<block>
					<bind name="visible" value="replayCount"/>
					<styleClass value="$AlignRight"/>
					<block type="text">
						<styleClass value="$TextDefaultTech"/>
						<bind name="text" value="tr('IDS_REPLAYS_TABLE_REPLAYSTOTAL' + '_' + selectedTabIndex) + ': ' + format(replayCount)"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="replayCount"/>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'ReplaysTableContentWrapper'; replayCount	? {	_subcollection: selectedTabIndex == SC.Common.REPLAYS_TABS.LAST	? 'lastReplays'
																																			: 'savedReplays',
																			_selectedTabIndex: selectedTabIndex }
																		: null"/>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="instance" value="'NoItemsComeBackLater'; !(lastReplays.length || savedReplays.length)	? {	_type: 'REPLAYS',
																										_subText: 'IDS_NO_CURRENT_REPLAYS_DISCLAIMER' }
																									: (selectedTabIndex == SC.Common.REPLAYS_TABS.LAST &amp;&amp; !lastReplays.length)	? {	_type: 'LAST_REPLAYS',
																																													_subText: 'IDS_NO_CURRENT_LAST_REPLAYS_DISCLAIMER' }
																								 																				: (selectedTabIndex == SC.Common.REPLAYS_TABS.SAVED &amp;&amp;
																																												  !savedReplays.length)										? {	_type: 'SAVED_REPLAYS',
																																																												_subText: 'IDS_NO_CURRENT_SAVED_REPLAYS_DISCLAIMER' }
																								 																																			: null"/>
			</block>
		</block>
	</block>

	<!-- modal_window_replays_rename -->
	<block className="ModalWindowRenameReplays">
		<block className="ModalWindowContainer">
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
			<style>
				<align value="center"/>
			</style>
			<block>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'ModalWindowRenameReplaysContent'; {}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowRenameReplaysContent">
		<bind name="firstEntityDH" value="'divisionEntranceInfoEntity'; CC.divisionEntranceInfo"/>
		<bind name="watchDH" value="'commentStatus'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evCommentStatusChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.commentStatus"/>
		<bind name="watchDH" value="'isBanned'; ['divisionEntranceInfoEntity.divisionEntranceInfo.evIsBannedChanged']; divisionEntranceInfoEntity.divisionEntranceInfo.isBanned"/>
		<bind name="primaryEntityDH" value="'replayEntity'; CC.replayMetadata; $root.replayId"/>
		<bind name="watchDH" value="'replay'; ['replayEntity.replayMetadata.evUpdate']; replayEntity.replayMetadata"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'loginRestrict'; []; realmConstantsEntity.realmConstants.loginRestrict"/>
		<style>
			<width value="472"/>
		</style>
		<block>
			<bind name="appear" value="'startShow'; 0.15; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_REPLAYS_MODAL_SAVERENAME_HEADER', _headerWidth: '476px', _innerCloseButton: true}"/>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; 0.2; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.2; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<style>
				<width value="100%"/>
				<marginLeft value="-3px"/>
				<marginTop value="16px"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$PxHorizontalCorrection"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginTop value="-3px"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingLeft value="8px"/>
					<paddingRight value="8px"/>
				</style>
				<bind name="watch" value="'newName'; replay.replayName"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$FontFamilyDefault"/>
						<style>
							<minHeight value="24"/>
							<width value="100%"/>
							<marginLeft value="5px"/>
							<marginRight value="5px"/>
							<fontSize value="16"/>
							<leading value="2"/>
							<alpha value="0"/>
						</style>
						<bind name="text" value="newName"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<height value="28px"/>
						</style>
					</block>
					<block className="text_area_no_enter" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="restrict" value="loginRestrict"/>
						<bind name="watch" value="'maxChars'; 128"/>
						<params>
							<param name="actAsButton" value="true"/>
							<param name="maxChars" value="128"/>
						</params>
						<bind name="ubFocus" value="1; false; true; true"/>
						<bind name="defaultText" value="'IDS_REPLAYS_MODAL_SAVERENAME_TEXTAREA_DEFAULTTEXT'"/>
						<bind name="text" value="replay.replayName"/>
						<bind name="sync" value="'text'; 'change'; 'newName'"/>
						<bind name="action" value="'textInputEnter'; (newName.length &lt;= maxChars) &amp;&amp; newName.length ? 'ReplaysProxy.setName' : null; {replayId: replay.replayId, newReplayName: newName}"/>
						<block>
							<style>
								<position value="absolute"/>
								<bottom value="3"/>
								<right value="3"/>
							</style>
							<bind name="fade" value="isBanned || commentStatus != 'submitted'; 0.1;
									{top: 10, alpha: 0}; {top: 0, alpha: 1}; {top: 10, alpha: 0}"/>
							<bind name="instance" value="'CharCounter'; {_string: newName, _maxChars: maxChars}"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; 0.25; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.25; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<style>
				<width value="100%"/>
				<marginBottom value="-3px"/>
				<marginTop value="16px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="24px"/>
			</style>
			<block>
				<bind name="appear" value="'startShow'; 0.15; 0.30; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.30; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<style>
					<width value="129px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: 'IDS_REPLAYS_MODAL_SAVERENAME_BUTTON_SAVE',
												_focusIndex: 2,
												_name: 'btn_save',
												_enabled: (newName.length &lt;= maxChars) &amp;&amp; (newName.length &gt; 0),
												_action: 'ReplaysProxy.setName',
												_actionParams: {replayId: replay.replayId, newReplayName: newName}
											}"/>
			</block>
			<block>
				<bind name="appear" value="'startShow'; 0.15; 0.35; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.15; 0.35; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<style>
					<width value="129px"/>
					<marginLeft value="24px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: toUpperCase(tr('IDS_REPLAYS_MODAL_SAVERENAME_BUTTON_CANCEL')),
												_focusIndex: 3,
												_name: 'btn_cancel',
												_enabled: true
											}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_window_reward_container -->
	<block className="ModalWindowRewardContainer">
		<styleClass value="$Fullsize"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<bind name="var" value="{isAddedToStage: false}"/>
		<bind name="dispatch" value="'addedToStage'; 'delayedAddedToStage'; {}; 2; 1"/>
		<bind name="catch" value="'delayedAddedToStage'; {isAddedToStage: true}"/>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$EyeLevelVAligned"/>
			<bind name="appear" value="'startShow'; 0.15; 0.3; {alpha: 0, top:10}; {alpha: 1, top:0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'rewardsAddedToStage'; 0.15; 0.07; {alpha: 1, top:0}; {alpha: 0, top:-10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block type="text">
				<styleClass value="$TextDefaultBoldNM"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="6px"/>
					<marginTop value="4px"/>
				</style>
				<bind name="text" value="toUpperCase(tr('IDS_DATA_LOADING'))"/>
			</block>
		</block>
		<block>
			<style>
				<align value="center"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'ModalWindowRewardContainerContent'; isAddedToStage ? {} : null"/>
		</block>
	</block>
	<block className="ModalWindowRewardContainerContent">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'lagAfterAddedToStage'; 'rewardsAddedToStage'"/>
		<bind name="entityDH" value="'RewardsEntity'; $root.rewardsEntityId"/>
		<bind name="watchDH" value="'rewards'; ['RewardsEntity.rewardsStack.evChanged']; RewardsEntity.rewardsStack.rewards"/>
		<bind name="watch" value="'isRewardsALot'; rewards.length &gt; 18"/>
		<bind name="class" value="isRewardsALot ? '$MiddleVAligned' : '$EyeLevelVAligned'"/>
		<style>
			<align value="center"/>
			<width value="962px"/>
			<height value="100%f"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="720:20,1080:46ah"/>
				<marginBottom value="4px"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="text" value="toUpperCase(tr($root.header))"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block>
				<bind name="visible" value="$root.subheader.length &gt; 0"/>
				<style>
					<marginBottom value="4px"/>
					<alpha value="0.5"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<bind name="text" value="$root.subheader"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="720:2,1080:4ah"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="100%f"/>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ContainerWithRewards'; {_rewards: rewards, _itemHeight: 140}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:24,1080:32ah"/>
				<marginBottom value="1280:20,1920:46aw"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_name: 'btn_ok',
											_enabled: true,
											_label: 'IDS_CLOSE_UPPER_CASE',
											_focusIndex: 1,
											_defaultFocused: true}"/>
		</block>
	</block>

	<!-- modal_window_rules -->
	<block className="ModalWindowRules">
		<bind name="entityDH" value="'selectedBattleEntity'; $root._entityId"/>
		<bind name="watch" value="'prefixName'; 	$root._rulesType"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<style>
			<align value="center|middle"/>
		</style>
		<bind name="instance" value="'ModalWindowRulesContent'; {_prefix:prefixName, _width: '650px'}"/>
	</block>
	<block className="ModalWindowRulesContent">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="var" value="{battleRules: {
		'paragons':	[
						{	_imagePath: 'url:../modal_battle_rules/paragons/icon_rules_1_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET_HEADER },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET }
							]
						},
						{	_imagePath: 'url:../modal_battle_rules/paragons/icon_rules_2_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH }
							]
						},
						{	_imagePath: 'url:../modal_battle_rules/paragons/icon_rules_3_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH }
							]
						}
					],
		'snowflakes': [
						{	_imagePath: 'url:../modal_battle_rules/snowflakes/icon_rules_1_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH }
							]
						},

						{	_imagePath: 'url:../modal_battle_rules/snowflakes/icon_rules_2_paragraph.png',
							_textTypes: [
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET },
								{	_type: SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET }
							]
						}
					],
	}}"/>
		<style>
			<width value="600px"/>
			<height value="100%f"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '600px'"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="64"/>
			</style>
			<bind name="instance" value="'ModalWindowHeader'; { _header: 'IDS_MODAL_WINDOW_' + _prefix + '_RULES_HEADER', _headerWidth: '100%', _hideCloseButton: true}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="100%f"/>
				<width value="100%"/>
				<marginRight value="8px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="64px"/>
					<marginRight value="16px"/>
					<marginLeft value="16px"/>
				</style>
				<bind name="repeat" value="battleRules[_prefix]; 'ModalWindowRulesContentItem'; {_prefix: toUpperCase(tr(_prefix))}"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginBottom value="16"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="64"/>
			</style>
			<block className="DefaultButtonModal">
				<style>
					<marginBottom value="6px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="name" value="'Modal_window_action_Button' + 'IDS_CLOSE_UPPER_CASE'"/>
				<bind name="instance" value="'DefaultButton'; {	_enabled: true,
													_isTransactionBtn: true,
													_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_focusIndex: 1,
													_defaultFocused: true}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowRulesContentItem">
		<bind name="var" value="{appearIndex: 2 + $index}"/>
		<bind name="watch" value="'textBase'; 'IDS_MODAL_WINDOW_' + _prefix + '_RULES_PARAGRAPH_' + tr($index+1)"/>
		<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'lagAfterAddedToStage'; 0.15; appearIndex*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'startHide'; 0.15; appearIndex * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="48px"/>
			</style>
			<block>
				<bind name="visible" value="_imagePath != 'none'"/>
				<style>
					<width value="80px"/>
					<height value="80px"/>
					<marginTop value="-12"/>
					<backgroundSize value="cover"/>
					<top value="=0"/>
					<marginRight value="24"/>
				</style>
				<bind name="style" value="'backgroundImage'; _imagePath"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginLeft'; _imagePath != 'none' ? 0 : '80px'"/>
				<block>
					<bind name="visible" value="_header != 'none'"/>
					<style>
						<width value="100%"/>
						<marginBottom value="24px"/>
					</style>
					<block type="text">
						<style>
							<width value="100%"/>
							<alpha value="0.9"/>
						</style>
						<styleClass value="$TextDefaultBold23NM"/>
						<bind name="text" value="textBase + '_HEADER'"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginRight value="24px"/>
						<alpha value="0.75"/>
					</style>
					<bind name="visible" value="_textTypes.length"/>
					<bind name="repeat" value="_textTypes; 'ModalWindowParagonRulesItemWrapper';	{ _text: textBase + '_TEXT_' }"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ModalWindowParagonRulesItemWrapper">
		<bind name="watch" value="'isParagraphItem';		_type == SC.Ui_common.MODAL_RULES_TEXT_TYPE.PARAGRAPH"/>
		<bind name="watch" value="'isBulletHeaderItem';	_type == SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET_HEADER"/>
		<bind name="watch" value="'isBulletItem';		_type == SC.Ui_common.MODAL_RULES_TEXT_TYPE.BULLET"/>
		<bind name="watch" value="'textValue'; _text+($index+1)"/>
		<style>
			<width value="100%"/>
			<marginRight value="8px"/>
		</style>
		<bind name="child" value="_type;		isParagraphItem		?	{	_paragraphText: textValue,
														_class: '$TextDefault17NM',
														_marginBottom: '18px',
														_width: '100%',
														_leading: -1 }
												:	{	_text: textValue,
														_textClass: '$TextDefault17NM',
														_bulletType: isBulletHeaderItem	? 'none' : ' • '};		'RepeatParagraphItemNM';
																												'ListWithBulletsElement';
																												'ListWithBulletsElement'"/>
	</block>
	<block className="ListWithBulletsElement">
		<bind name="visible" value="_text || ($value.length &gt; 0)"/>
		<bind name="watch" value="'bulletIndex'; _bulletIndex ? _bulletIndex : false"/>
		<bind name="watch" value="'textItem'; _text	? bulletIndex == true	? _text + ($index + 1)
															: _text
									: $value"/>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '12px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="visible" value="_bulletType != 'none'"/>
				<bind name="class" value=" _textClass ? _textClass : '$TextDefaultNM'"/>
				<style>
					<marginRight value="10px"/>
					<width value="100%f"/>
				</style>
				<bind name="alpha" value=" _textAlpha ? _textAlpha : 0.75"/>
				<bind name="text" value="_bulletType ? _bulletType : '•'"/>
			</block>
			<block type="text">
				<style>
					<leading value="-3"/>
					<width value="100%"/>
				</style>
				<bind name="class" value=" _textClass ? _textClass : '$TextDefaultNM'"/>
				<bind name="alpha" value=" _textAlpha ? _textAlpha : 0.75"/>
				<bind name="substitute" value="	_substitute.imageOffset ? _substitute.imageOffset : 0;
								_substitute.map;
								(_toUpperCase ? toUpperCase(tr(textItem)) : tr(textItem));
								_substitute.postfix ? _substitute.postfix : ''"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- modal_window_simple -->
	<block className="ConfirmationModalWindow">
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<margin value="16px"/>
			</style>
			<block type="text">
				<style>
					<alpha value="0.9"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$TextDefault25NM"/>
				<bind name="text" value="_subtitle"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="style" value="'marginBottom'; _instruction ? 16 : 0"/>
			<bind name="instance" value="'InstructionBigTech'; _instruction ? { _instructionText: _instruction, _maxWidth: '450' } : null"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="instance" value="'ModalWindowOkCancel'; {_appearOrder: 3, _focusBtn: 1}"/>
		</block>
	</block>
	<block className="RestartModalWindow">
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<alpha value="0.9"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$TextDefault25NM"/>
				<bind name="text" value="_subtitle"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="16px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<marginRight value="32px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '210px',
												_enabled: true,
												_isTransactionBtn: false,
												_label: 'IDS_RESTART_NOW',
												_name: 'btn_restart',
												_focusIndex: 2,
												_defaultFocused: false}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="130px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '130px',
												_enabled: true,
												_isTransactionBtn: false,
												_label: _btnTitle ? _btnTitle : 'IDS_OK',
												_name: 'btn_ok',
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="NotificationModalWindow">
		<params>
			<param name="name" value="NotificationWindow"/>
		</params>
		<style>
			<width value="472"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<margin value="16px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$TextDefault21NM"/>
				<bind name="text" value="_subtitle"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_name: 'btn_ok',
											_enabled: true,
											_label: 'IDS_OK',
											_focusIndex: 1,
											_defaultFocused: true}"/>
		</block>
	</block>
	<block className="SimpleModalWindow">
		<styleClass value="$Fullsize"/>
		<bind name="var" value="{simpleModalsTypes: ['ConfirmationModalWindow',
									'NotificationModalWindow',
									'RestartModalWindow']}"/>
		<bind name="watch" value="'simpleModalsHeaders'; [	'IDS_CONFIRMATION',
											toUpperCase(tr($root.title)),
											toUpperCase(tr($root.title))]"/>
		<bind name="watch" value="'modalWindowType'; $root.type ? $root.type : 0"/>
		<bind name="instance" value="'SmallModalWindow'; {_headerText: simpleModalsHeaders[modalWindowType], _contentElement: simpleModalsTypes[modalWindowType], _subtitle: $root.subtitle, _btnTitle: $root.btnTitle, _instruction: $root.instruction}"/>
	</block>

	<!-- modal_window_system -->
	<block className="ModalWindowSystemExpendableIconWithHeaderAndSubheader">
		<bind name="watch" value="'headerSubheaderTotalMaxWidth'; _maxWidth ? _maxWidth : 9999"/>
		<bind name="watch" value="'imageWidth'; _headerIconType == 2 ? 80 : 60"/>
		<bind name="watch" value="'maxHeaderSubheaderWidth'; headerSubheaderTotalMaxWidth - (imageWidth + 12)"/>
		<style>
			<width value="100%f"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<top value="0"/>
			</style>
			<bind name="child" value="_headerIconType;	{	_imageUrl:		_imageUrl,
											_data:			_data};
										{	0:			'ModalWindowSystemCamouflageIcon',
											1:	'ModalWindowSystemCamouflageIconRepaint',
											2:	'ModalWindowSystemEconomicBoostIcon' }"/>
		</block>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<bind name="instance" value="'ModalWindowSystemHeaderSubheaderText';	{	_headerText:	_headerText,
																	_subheaderText:	_subheaderText,
																	_unifiedStatus:	_unifiedStatus,
																	_maxWidth:		maxHeaderSubheaderWidth }"/>
		</block>
	</block>
	<block className="ModalWindowSystemHeaderSubheaderText">
		<style>
			<width value="100%f"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block type="text">
			<params>
				<param name="name" value="modalWindowSystemHeader"/>
			</params>
			<styleClass value="$TextDefaultBold19NM"/>
			<style>
				<leading value="-4"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_headerText"/>
		</block>
		<block type="text">
			<bind name="visible" value="_subheaderText"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginTop value="8px"/>
				<leading value="-2"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth"/>
			<bind name="style" value="'alpha'; textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.75 : 1"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_subheaderText"/>
		</block>
	</block>
	<block className="ModalWindowSystemCamouflageIcon">
		<style>
			<width value="60px"/>
			<height value="60px"/>
		</style>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
		<bind name="instance" value="'LinkableItemIcon'; _data.exteriorType == SC.Exteriors.EXTERIOR_TYPE.MSKIN ? {} : null"/>
	</block>
	<block className="ModalWindowSystemCamouflageIconRepaint">
		<block className="CamouflageRepaintedIcon" type="ublock">
			<bind name="build!" value="{_camouflageId: _data.camouflageId}"/>
		</block>
	</block>
	<block className="ModalWindowSystemEconomicBoostIcon">
		<bind name="instance" value="'EconomicBoostItemView';	{	_name: _data.name,
													_type: _data.type,
													_isUnlinkedLinkableBoost: _data.linking }"/>
	</block>
	<block className="ModalWindowSystemQuestionWithPrice">
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault25NM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_questionText"/>
		</block>
		<block>
			<bind name="visible" value="_priceInfo"/>
			<style>
				<marginTop value="-9px"/>
				<marginBottom value="-8px"/>
				<marginLeft value="6px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: _priceInfo, _showDiscountTag: true, _large: true }"/>
		</block>
		<block>
			<bind name="visible" value="_priceInfo &amp;&amp; _optionalPriceInfo"/>
			<style>
				<marginLeft value="6px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_AND"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_optionalPriceInfo"/>
			<style>
				<marginTop value="-9px"/>
				<marginBottom value="-8px"/>
				<marginLeft value="6px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: _optionalPriceInfo, _showDiscountTag: true, _large: true }"/>
		</block>
		<block>
			<bind name="visible" value="_priceInfo || _optionalPriceInfo"/>
			<block type="text">
				<styleClass value="$TextDefault25NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_QUESTION"/>
			</block>
		</block>
	</block>

	<!-- modal_window_tutorial_content -->
	<block className="ModalWindowTutorialContent">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 0*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<styleClass value="$Fullsize"/>
		<styleClass value="$BattleModalTint"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$BattleModalWindowBG"/>
			<style>
				<width value="640px"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<marginTop value="16"/>
				</style>
				<bind name="instance" value="'ModalWindowHeader'; {	_header: toUpperCase('IDS_MODAL_WINDOW_' + _prefix + '_TUTORIAL_HEADER'),
													_headerWidth: '100%',
													_innerCloseButton: true	}"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="inner_panel" type="native">
					<style>
						<marginRight value="2px"/>
						<marginLeft value="2px"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<bind name="repeat" value="_paragraphs; 'ModalWindowTutorialContentItem'; {_prefix: _prefix}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="var" value="{ buttonAppearPositionY: 4 + _paragraphs.length }"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; buttonAppearPositionY*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; buttonAppearPositionY * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="16px"/>
					<marginBottom value="16px"/>
				</style>
				<bind name="instance" value="'DefaultButton';	{	_label: 'IDS_CLOSE_UPPER_CASE',
													_name: 'btn_cancel',
													_enabled: true,
													_focusIndex: 0,
													_defaultFocused: true
												}"/>
			</block>
		</block>
	</block>
	<block className="ModalWindowTutorialContentItem">
		<bind name="var" value="{ appearPositionY: 4 + $index }"/>
		<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'lagAfterAddedToStage'; 0.15; appearPositionY*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'startHide'; 0.15; appearPositionY * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
		<bind name="watch" value="'textBase'; toUpperCase('IDS_MODAL_WINDOW_' + _prefix + '_TUTORIAL_PARAGRAPH_' + str($index+1))"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'paragraphMargin'; stageHeight &gt; 780 ? '24px' : '16px'"/>
		<style>
			<width value="100%"/>
			<marginLeft value="24px"/>
			<marginRight value="24px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
			</style>
			<bind name="style" value="'marginBottom'; paragraphMargin"/>
			<bind name="instance" value="'TableDivider'; $index != 0 ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="16px"/>
			</style>
			<bind name="style" value="'marginBottom'; paragraphMargin"/>
			<block>
				<style>
					<width value="192px"/>
					<marginRight value="24"/>
				</style>
				<bind name="style" value="'backgroundImage'; _imagePath"/>
				<bind name="style" value="'height'; _imageHeight ? _imageHeight : '128px'"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="8px"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<alpha value="0.9"/>
					</style>
					<styleClass value="$TextDefaultBold19NM"/>
					<bind name="text" value="textBase + '_HEADER'"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="16px"/>
						<alpha value="0.75"/>
					</style>
					<bind name="repeat" value="_textTypes; 'ModalWindowTutorialItemWrapper'; {_text: textBase + '_TEXT_'}"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ModalWindowTutorialItemWrapper">
		<style>
			<width value="100%"/>
		</style>
		<bind name="stageSize"/>
		<bind name="watch" value="'fontClass'; stageHeight &gt; 780 ? '$TextDefault17NM' : '$TextDefaultNM'"/>
		<bind name="style" value="'marginTop'; $index !=0 ? '2px' : '0px'"/>
		<bind name="child" value="$value; $value == 0	? {	_paragraphText: _text+($index+1),
											_class: fontClass,
											_marginBottom: '24px',
											_width: '100%'}
										: {	_text: _text+($index+1),
											_textClass: fontClass,
											_substitute: {map:null, imageOffset:5, postfix:''},
											_bulletType: ($value == 2	? 'none'
																											: ' • ')};	'RepeatParagraphItemNM';
																														'ListWithBulletsElement';
																														'ListWithBulletsElement'"/>
	</block>

	<!-- modal_window_waiting -->
	<block className="WaitingWindow">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<bind name="visible" value="!$root.noBackground"/>
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<bind name="visible" value="!isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
				<style>
					<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isBlurOptionEnabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="mc_blurmap_medium" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.2; 0.2; {alpha: 1}; {alpha: 0}"/>
					<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
				</block>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="waiting"/>
			</params>
			<styleClass value="$EyeLevelVAligned"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block className="indicator_busy_main" type="native"/>
			</block>
			<block>
				<bind name="visible" value="$root.waitingText"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<style>
					<top value="96px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="$root.waitingText ? $root.waitingText : ''"/>
				</block>
			</block>
		</block>
	</block>
	<block className="CinematicWaitingWindow">
		<bind name="dispatch" value="'addedToStage'; 'waitingWindowLoaded'; {}; false; 0.3"/>
		<bind name="request" value="'waitingWindowLoaded'; 'modalWindowLoaded'; {}"/>
		<style>
			<align value="center"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 1; 0.2; {alpha: 1}; {alpha: 0}"/>
			<style>
				<backgroundImage value="url:../bg/nations_tree_v2.jpg"/>
				<backgroundSize value="cover"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 1; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startShow'; 0.2; 0.1; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 1; 0.2; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<params>
				<param name="name" value="waiting"/>
			</params>
			<styleClass value="$EyeLevelVAligned"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; 0 + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block className="indicator_busy_main" type="native"/>
			</block>
		</block>
	</block>

	<!-- modernizations_and_comsumables -->
	<block className="ModernizationItemView">
		<block className="ModernizationItemView" type="ublock">
			<bind name="build!" value="{	_name: _name,
						_amount: _amount ? _amount : 0,
						_isRecommended: _isRecommended }"/>
		</block>
	</block>
	<block className="WeaponSlotItem">
		<styleClass value="$ManagementSlotItem"/>
		<bind name="alpha" value="isOwned	? 1 : 0.5"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watch" value="'isOwned'; !!ownShipEntity"/>
		<bind name="dataRefDH" value="'weaponSlotEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'weaponType';		[]; weaponSlotEntity.visualSlotData.weaponType"/>
		<bind name="watchDH" value="'commandId';			[]; weaponSlotEntity.visualSlotData.commandId"/>
		<bind name="watchDH" value="'iconPath';			['weaponSlotEntity.visualSlotData.evIconPathChanged']; weaponSlotEntity.visualSlotData.iconPath"/>
		<bind name="watch" value="'isAutoUsage'; commandId == -2"/>
		<bind name="watch" value="'isSlotInteractive'; weaponType == SC.Ships.SHIP_WEAPON_TYPES.AIRPLANES"/>
		<bind name="watch" value="'isSlotSelected'; _selectedWeaponId == weaponSlotEntity.id"/>
		<bind name="watch" value="'isSlotActive'; isSlotInteractive &amp;&amp; !(isSlotSelected)"/>
		<bind name="firstEntityDH" value="'fireModeSlotEntity'; CC.fireModeSlot"/>
		<bind name="watchDH" value="'isFireModeSlot';		[]; weaponSlotEntity.id == fireModeSlotEntity.id"/>
		<bind name="watchDH" value="'isActiveFireMode';		['fireModeSlotEntity.fireModeSlot.evIsActiveChanged']; fireModeSlotEntity.fireModeSlot.isActive"/>
		<bind name="watchDH" value="'isSwitchableFireMode'; [];  fireModeSlotEntity.fireModeSlot.isSwitchable"/>
		<bind name="watchDH" value="'isDrumFire';			[]; fireModeSlotEntity.fireModeSlot.isDrumFire"/>
		<bind name="watch" value="'isCanDrum'; isDrumFire &amp;&amp; weaponType == SC.Ships.SHIP_WEAPON_TYPES.ARTILLERY"/>
		<bind name="watch" value="'isDrumModeActive'; isSwitchableFireMode &amp;&amp; isCanDrum ? isActiveFireMode : isCanDrum"/>
		<bind name="watch" value="'isHideFireModeSlot'; isFireModeSlot ? isSwitchableFireMode : true"/>
		<bind name="watch" value="'strokeIconName'; isActiveFireMode ? 'button_selected_slot.png' : 'button_full_slot_up.png'"/>
		<bind name="watch" value="'isHotKeyActive'; isFireModeSlot &amp;&amp; isDrumModeActive"/>
		<bind name="watch" value="'isSound'; isSlotActive || isFireModeSlot"/>
		<bind name="visible" value="isHideFireModeSlot"/>
		<block>
			<style>
				<width value="60px"/>
				<height value="60px"/>
			</style>
			<styleClass value="$MiddleVHAbsolutely"/>
			<bind name="dispatch" value="'click'; isSlotActive ? 'evWeaponItemClicked' : null; {selectedWeaponId: weaponSlotEntity.id}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP;"/>
			<bind name="action" value="'click'; isFireModeSlot ? 'changeFireModeState' : null; {}"/>
			<bind name="soundSet" value="isSlotActive ? 'button_consumable' : ''"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'backgroundImage'; iconPath"/>
				<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
				<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
				<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
				<bind name="colorTransform" value="	isSlotActive &amp;&amp; ct_mouseDown &amp;&amp; !isSlotSelected	? ctMouseDown :
							isSlotActive &amp;&amp; (ct_rollOver || isSlotSelected)	? ctRollOver
																		: {}"/>
				<bind name="sharedTooltip" value="'WeaponTooltip'; {_slotEntityId: weaponSlotEntity.id, _isActiveBurst: isDrumModeActive}; TooltipBehaviour.simple"/>
			</block>
			<block>
				<bind name="visible" value="isCanDrum &amp;&amp; isDrumModeActive"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundSize value="fill"/>
					<hitTest value="false"/>
					<backgroundImage value="url:../consumables/drumMode_indicator.png"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isSlotActive"/>
				<style>
					<position value="absolute"/>
					<bottom value="-36"/>
					<width value="100%"/>
					<height value="1px"/>
					<backgroundImage value="url:../service_kit/tabs/tabs_selectable_bar.png"/>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'alpha'; 	ct_mouseDown 	? 0.6 :
									ct_rollOver 	? 1
													: 0.7"/>
			</block>
			<block>
				<bind name="visible" value="commandId != -1"/>
				<style>
					<bottom value="-18px"/>
					<left value="7px"/>
					<width value="46px"/>
					<height value="18px"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'DockHotkeyIndicator'; !isAutoUsage ? {_commandId: commandId, _isActive: isHotKeyActive} : null"/>
				<bind name="instance" value="'LabelAuto'; isAutoUsage ? {} : null"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; isAutoUsage ? {_text: 'IDS_HINT_BATTLE_COMMAND_AUTO'} : null"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isSwitchableFireMode &amp;&amp; isFireModeSlot"/>
			<bind name="appear" value="'addedToStage'; 0.1; 0.12; {alpha: 0}; {alpha: 0.7}"/>
			<bind name="transition" value="rollOver; 0.1; {alpha: 0.7}; {alpha: 1}; {alpha: 0.7};"/>
			<style>
				<width value="64px"/>
				<height value="64px"/>
				<position value="absolute"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/slots/' + strokeIconName"/>
		</block>
	</block>
	<block className="ConsumableSlotItem">
		<bind name="appear" value="'addedToStage'; 0.15; 0; {ubScaleX: 0}; {ubScaleX: 1}"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watch" value="'isOwned'; !!ownShipEntity"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="dataRefDH" value="'equipmentSlotEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'installedEntityId';		['equipmentSlotEntity.equipmentSlot.evInstalledEntityIdChanged']; equipmentSlotEntity.equipmentSlot.installedEntityId"/>
		<bind name="watchDH" value="'slotComandId';		['equipmentSlotEntity.equipmentSlot.evCommandIdChanged'];			equipmentSlotEntity.equipmentSlot.commandId"/>
		<bind name="entityDH" value="'abilityEntity'; installedEntityId"/>
		<bind name="watchDH" value="'name';				['abilityEntity.ability.evNameChanged']; abilityEntity.ability.name"/>
		<bind name="watchDH" value="'numConsumables';	['abilityEntity.ability.evNumConsumablesChanged']; abilityEntity.ability.numConsumables"/>
		<bind name="watchDH" value="'slotId';			['']; abilityEntity.ability.slotId"/>
		<bind name="watchDH" value="'squadType';			['']; abilityEntity.ability.squadType"/>
		<bind name="watchDH" value="'isSquadronAbility';	['']; abilityEntity.ability.isSquadronAbility"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'isShipLocked';		['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';		['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isInFormation"/>
		<bind name="watchDH" value="'subCollectionKey';	['']; equipmentSlotEntity.equipmentSlot.subCollectionKey"/>
		<bind name="collectionDH" value="CC.ability; 'abilitiesBySlotCollection'; 'shipAbilsBySlotId.' + slotId"/>
		<bind name="watch" value="'hasAlternatives'; abilitiesBySlotCollection.length &gt; 1 &amp;&amp; !isShipLocked &amp;&amp; !isInFormation"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; viewedShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watch" value="'isAircarrierConsumable'; shipInfo.subtype == ShipTypes.AircraftCarrier &amp;&amp; !isSquadronAbility"/>
		<bind name="watch" value="'orderCustomizationActive'; !!userPrefs.consumablesOrderCustomizationActive &amp;&amp; !isSquadronAbility"/>
		<bind name="watch" value="'consumePostfix'; numConsumables == 0 &amp;&amp; !orderCustomizationActive ? '_empty' : ''"/>
		<bind name="watch" value="'itemImageUrl'; 'url:../consumables/consumable_' + name + consumePostfix + '.png'"/>
		<bind name="alpha" value="isOwned	? 1 : 0.5"/>
		<bind name="watch" value="'isEmptySlot'; abilityEntity == null"/>
		<bind name="dispatch" value="'dragging' + varChanged; dragging ? 'startDragging' : 'stopDragging'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; 0"/>
		<bind name="soundSet" value="hasAlternatives &amp;&amp; !orderCustomizationActive ? 'button_consumable' : ''"/>
		<bind name="soundOn" value="'mouseDown';	!orderCustomizationActive || (isEmptySlot &amp;&amp; !_isStartDragConsumableSlotItem)	? null	: 'press'; 'drag_n_drop'"/>
		<bind name="watch" value="'activeIds';  ['150']"/>
		<bind name="watch" value="'fakeSlotId';  '150'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="1280:4,1920:24aw"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.1; 0.12; {alpha: 0}; {alpha: 1}"/>
			<style>
				<width value="64px"/>
				<height value="64px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="tooltip" value="'ConsumableTooltip'; !orderCustomizationActive	? {	_abilityEntityId: installedEntityId,
																				_hasAlternatives: hasAlternatives}
																			: null; TooltipBehaviour.simple"/>
				<bind name="tooltip" value="'ConsumablesInfotip'; hasAlternatives &amp;&amp; !orderCustomizationActive	? {_slotId: slotId}
																								: null; TooltipBehaviour.verticalInfotip; null; 'consumablesInfotipIsVisible'"/>
				<bind name="dispatch" value="'consumableInfotipItemClicked'; consumablesInfotipIsVisible ? 'Tooltip.Close' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE;"/>
				<block>
					<bind name="fade" value="hasAlternatives || orderCustomizationActive; 0.15; {alpha: 0}; {alpha: 0.7}; {alpha: 0}; 2"/>
					<bind name="style" value="'hitTest'; !orderCustomizationActive"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'cts_'"/>
					<bind name="var" value="{ 
		ctsMouseUp: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 0.7,
			redOffset: 0,
			greenOffset: 0,
			blueOffset: 0,
			alphaOffset: 0
		}
	}"/>
					<bind name="var" value="{ 
		ctsMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 0.5,
			redOffset: 0,
			greenOffset: 0,
			blueOffset: 0,
			alphaOffset: 0
		}
	}"/>
					<bind name="colorTransform" value="	true &amp;&amp; cts_mouseDown &amp;&amp; !!!consumablesInfotipIsVisible	? ctsMouseDown :
							true &amp;&amp; (cts_rollOver || !!consumablesInfotipIsVisible)	? {}
																		: ctsMouseUp"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundImage value="url:../service_kit/frames/64px_not_empty_field.png"/>
					</style>
					<bind name="alpha" value="droppableStatus == 'fadeIn' ? 1 : 0.7"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<top value="2px"/>
						<left value="2px"/>
					</style>
					<bind name="tooltip" value="'SimpleStatusTooltip';	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
															_text: 'IDS_CONSUMABLE_CHANGE_ORDER_MOUSE_INSTRUCTION'}"/>
					<bind name="style" value="'hitTest'; orderCustomizationActive &amp;&amp; installedEntityId ? true : false"/>
					<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
					<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
					<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
					<bind name="colorTransform" value="	orderCustomizationActive &amp;&amp; !mouseDown &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							orderCustomizationActive &amp;&amp; !mouseDown &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
					<bind name="var" value="{isBitmapReady: true}"/>
					<bind name="dispatch" value="'mouseDown'; 'evBitmapReady'; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.05"/>
					<bind name="catch" value="'mouseDown'; {isBitmapReady: false}"/>
					<bind name="catch" value="'evBitmapReady'; {isBitmapReady: true}"/>
					<bind name="draggable" value="orderCustomizationActive ? 'this' : null; fakeSlotId; {	slotId: subCollectionKey,
																							commandId: slotComandId}; 'evBitmapReady'"/>
					<bind name="droppable" value="orderCustomizationActive ? 'this' : null; activeIds; activeIds; 'droppableStatus'"/>
					<bind name="action" value="'droppableStatus' + varChanged; droppableStatus == 'accept' ? 'swapConsumables' : null;	{	dragSlotId: droppableStatusData['slotId'],
																															dropSlotId: subCollectionKey,
																															dragCommandId: droppableStatusData['commandId'],
																															dropCommandId: slotComandId}"/>
					<block>
						<bind name="visible" value="installedEntityId"/>
						<style>
							<width value="60px"/>
							<height value="60px"/>
						</style>
						<bind name="style" value="'backgroundImage'; itemImageUrl"/>
						<bind name="alpha" value="	dragging ||
									droppableStatus == 'fadeIn' ? 0.3
																: 1"/>
						<bind name="top" value="isBitmapReady ? 0 : -4"/>
						<bind name="style" value="'dropShadowFilter'; mouseDown &amp;&amp; orderCustomizationActive	? '4 90 0x000000 0.7 4.0 4.0 0.7 1'
																							: '0 0 0x000000 0 2.0 2.0 1.0 1'"/>
					</block>
					<block>
						<bind name="visible" value="!installedEntityId"/>
						<style>
							<width value="60px"/>
							<height value="60px"/>
							<position value="absolute"/>
							<backgroundImage value="url:../service_kit/frames/64px_drop_field.png"/>
						</style>
						<bind name="alpha" value="	dragging ||
									droppableStatus == 'fadeIn' ? 0.3
																: 0.7"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="numConsumables &gt; 0 &amp;&amp; !orderCustomizationActive"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_NUMCONSUMABLES'}"/>
				<style>
					<top value="4px"/>
					<right value="5px"/>
					<position value="absolute"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block type="text">
					<style>
						<textAlign value="right"/>
						<alpha value="0.9"/>
					</style>
					<styleClass value="$TextDefaultBoldNM"/>
					<bind name="text" value="numConsumables"/>
				</block>
			</block>
			<block>
				<style>
					<bottom value="-18px"/>
					<left value="9px"/>
					<width value="46px"/>
					<height value="20px"/>
					<align value="center"/>
				</style>
				<bind name="var" value="{
					hotkeyActiveCT: {
					redMultiplier: 1,
					greenMultiplier: 1,
					blueMultiplier: 1,
					alphaMultiplier: 1,
					redOffset: 40,
					greenOffset: 40,
					blueOffset: 40,
					alphaOffset: 0}
			}"/>
				<bind name="colorTransform" value="	droppableStatus == 'fadeIn' ?	hotkeyActiveCT
																:	{}"/>
				<bind name="instance" value="'DockHotkeyIndicator'; slotComandId &gt;= 0 &amp;&amp; !isAircarrierConsumable	? {_commandId: slotComandId}
																								: null"/>
				<bind name="instance" value="'LabelAuto'; isAircarrierConsumable ? {} : null"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: isAircarrierConsumable	? 'IDS_HINT_BATTLE_COMMAND_AUTO'
																					: 'IDS_HINT_BATTLE_COMMAND_KEY'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="1280:4,1920:24aw"/>
			</style>
		</block>
	</block>
	<block className="ConsumablesInfotip">
		<style>
			<width value="400px"/>
		</style>
		<styleClass value="$VerticalInfotipBehaviourCenterForSlots"/>
		<bind name="stageSize"/>
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="watch" value="'needScroll'; (_itemsInSlot.length * 145) &gt; (stageHeight - 20)"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'isInFormation';	 ['ownShipEntity.ownShip.evUpdateLock']; ownShipEntity.ownShip.isInFormation"/>
		<bind name="watch" value="'isOwned'; ownShipEntity != null"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'height'; needScroll == true ? (stageHeight - 20) + 'px' : '100%f'"/>
			<block className="InfotipBg">
				<styleClass value="$FullsizeAbsolute"/>
				<block className="InfotipPanelBg">
					<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
					<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
					<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
					<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
					<block className="DeclareBlurLayer">
						<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
						<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
						<bind name="visible" value="isBlurEnabled"/>
						<block className="transparentPixel" type="native">
							<bind name="blurLayer" value="0"/>
						</block>
						<style>
							<position value="absolute"/>
						</style>
					</block>
					<style>
						<margin value="-2px"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
					<block>
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
						<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
						<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
					</block>
					<block>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<background9Slice value="[3]"/>
						</style>
						<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
					</block>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<margin value="-2px"/>
					</style>
					<block className="InfotipPins">
						<styleClass value="$FullsizeAbsolute"/>
						<params>
							<param name="name" value="pinContainer"/>
						</params>
						<block>
							<params>
								<param name="name" value="pinTop"/>
							</params>
							<style>
								<position value="absolute"/>
								<top value="-10px"/>
							</style>
							<block>
								<style>
									<position value="absolute"/>
								</style>
								<block className="mc_blurmap_infotip_arrow_vert" type="native">
									<style>
										<position value="absolute"/>
										<width value="22px"/>
										<height value="12px"/>
									</style>
									<bind name="visible" value="false"/>
								</block>
								<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
							</block>
							<block>
								<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
								<style>
									<width value="22px"/>
									<height value="12px"/>
									<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
								</style>
							</block>
						</block>
						<block>
							<params>
								<param name="name" value="pinBottom"/>
							</params>
							<style>
								<position value="absolute"/>
								<bottom value="-22px"/>
							</style>
							<bind name="scaleY" value="-1"/>
							<block>
								<style>
									<position value="absolute"/>
								</style>
								<block className="mc_blurmap_infotip_arrow_vert" type="native">
									<style>
										<position value="absolute"/>
										<width value="22px"/>
										<height value="12px"/>
									</style>
									<bind name="visible" value="false"/>
								</block>
								<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
							</block>
							<block>
								<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
								<style>
									<width value="22px"/>
									<height value="12px"/>
									<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
								</style>
							</block>
						</block>
						<block>
							<params>
								<param name="name" value="pinLeft"/>
							</params>
							<style>
								<position value="absolute"/>
								<left value="-10px"/>
							</style>
							<block>
								<style>
									<position value="absolute"/>
								</style>
								<block className="mc_blurmap_infotip_arrow_hor" type="native">
									<style>
										<position value="absolute"/>
										<width value="12px"/>
										<height value="22px"/>
									</style>
									<bind name="visible" value="false"/>
								</block>
								<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
							</block>
							<block>
								<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
									<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
								</style>
							</block>
						</block>
						<block>
							<params>
								<param name="name" value="pinRight"/>
							</params>
							<style>
								<position value="absolute"/>
								<right value="-10px"/>
							</style>
							<bind name="scaleX" value="-1"/>
							<block>
								<style>
									<position value="absolute"/>
								</style>
								<block className="mc_blurmap_infotip_arrow_hor" type="native">
									<style>
										<position value="absolute"/>
										<width value="12px"/>
										<height value="22px"/>
									</style>
									<bind name="visible" value="false"/>
								</block>
								<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
							</block>
							<block>
								<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
									<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
								</style>
							</block>
						</block>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="100%f"/>
					<overflow value="scroll"/>
				</style>
				<bind name="class" value="needScroll ? '$ModernizationAndConsumScrollBar' : '$None'"/>
				<bind name="collectionRepeatDH" value="CC.ability; 'ConsumablesInfotipItem'; 'shipAbilsBySlotId.' + _slotId; {}"/>
			</block>
			<block>
				<bind name="visible" value="isOwned &amp;&amp; isInFormation"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
						<marginBottom value="12px"/>
						<marginLeft value="16px"/>
						<marginRight value="16px"/>
					</style>
					<bind name="instance" value="'StatusLine'; {	_text: 'IDS_SET_UNREADY_DIVISION_FIRST_TO_CHANGE_CONSUMABLES',
												_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
												_width: '100%' }"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ConsumablesInfotipItem">
		<bind name="dataRefDH" value="'itemEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'slotId';			['']; itemEntity.ability.slotId"/>
		<bind name="watchDH" value="'isInstalled';		['itemEntity.ability.evIsInstalledChanged']; itemEntity.ability.isInstalled"/>
		<bind name="watchDH" value="'commandId';			['']; itemEntity.ability.commandId"/>
		<bind name="watchDH" value="'name';				['itemEntity.ability.evNameChanged']; itemEntity.ability.name"/>
		<bind name="watchDH" value="'squadType';			['']; itemEntity.ability.squadType"/>
		<bind name="watchDH" value="'hasLimitation';		['']; itemEntity.ability.hasLimitation"/>
		<bind name="watchDH" value="'attributesNegative';['itemEntity.attributes.evChanged']; itemEntity.attributes.negative"/>
		<bind name="watchDH" value="'attributesNeutral';	['itemEntity.attributes.evChanged']; itemEntity.attributes.neutral"/>
		<bind name="watchDH" value="'attributesPositive';['itemEntity.attributes.evChanged']; itemEntity.attributes.positive"/>
		<bind name="watch" value="'equipmentSlotPk'; SC.Ships.SHIP_SLOT_TYPES.ABILITY + '_' + slotId + '_'"/>
		<bind name="primaryEntityDH" value="'equipmentSlotEntity'; CC.equipmentSlot; equipmentSlotPk"/>
		<bind name="watchDH" value="'slotComandId'; ['equipmentSlotEntity.equipmentSlot.evCommandIdChanged']; equipmentSlotEntity.equipmentSlot.commandId"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipInsetEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'isLocked';	['shipInsetEntity.ownShip.evUpdateLock'];	shipInsetEntity.ownShip.isLocked"/>
		<bind name="watch" value="'isOwned'; !!shipInsetEntity"/>
		<bind name="watch" value="'verifiedInstalled'; isOwned ? isInstalled : false"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="$index &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'ConsumableTooltip'; {_abilityEntityId: itemEntity.id} ; TooltipBehaviour.simple"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="style" value="'marginTop'; $index &gt; 0 ? '1px' : '-1px'"/>
			<block className="dock_submenu_item" type="native">
				<bind name="request" value="'click'; isOwned &amp;&amp; !isLocked ? 'consumableClicked' : null; {abilityId: itemEntity.ability.abilId, slotId: slotId}"/>
				<bind name="dispatch" value="'click'; isOwned &amp;&amp; !isLocked ? 'consumableInfotipItemClicked' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP;"/>
				<bind name="selected" value="verifiedInstalled"/>
				<bind name="enabled" value="isOwned"/>
				<styleClass value="$FullsizeAbsolute"/>
				<params>
					<param name="soundSet" value="dropdown"/>
				</params>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="12px"/>
			</style>
			<block>
				<block>
					<bind name="style" value="'backgroundImage'; 'url:../consumables/consumable_' + name + '.png'"/>
					<style>
						<width value="60px"/>
						<height value="60px"/>
						<backgroundSize value="fill"/>
						<hitTest value="false"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="hasLimitation"/>
					<style>
						<position value="absolute"/>
						<width value="17px"/>
						<height value="15px"/>
						<bottom value="7px"/>
						<right value="7px"/>
						<backgroundImage value="bitmap:icon_consumable_attention"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="verifiedInstalled"/>
					<style>
						<position value="absolute"/>
						<left value="30px"/>
						<bottom value="-24px"/>
					</style>
					<bind name="instance" value="'DockHotkeyIndicator'; {_commandId: slotComandId}"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_BATTLE_COMMAND_KEY'}"/>
				</block>
			</block>
			<block>
				<style>
					<width value="300px"/>
					<hitTest value="false"/>
					<marginLeft value="12px"/>
					<marginTop value="4px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<style>
							<width value="100%"/>
						</style>
						<styleClass value="$TextDefaultBoldNM"/>
						<bind name="class" value="verifiedInstalled	? '$FontColorGolden' 
													: '$FontColorWhite'"/>
						<bind name="text" value="tr(toUpperCase('IDS_DOCK_CONSUME_TITLE_' + name))"/>
					</block>
					<block>
						<bind name="visible" value="verifiedInstalled"/>
						<style>
							<marginTop value="-6px"/>
							<marginLeft value="8px"/>
						</style>
						<block className="icon_module_state" type="native">
							<style>
								<marginTop value="5px"/>
							</style>
							<bind name="gotoAndStop!" value="'installed'"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<marginTop value="24px"/>
						<width value="100%"/>
						<marginBottom value="-11px"/>
						<alpha value="0.9"/>
					</style>
					<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: attributesPositive, _attributesNegative: attributesNegative, _attributesNeutral: attributesNeutral, _shrinkHeight: true}"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- nation_flags -->
	<block className="NationFlagsBig">
		<style>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '694px' "/>
		<bind name="style" value="'height'; _height ? _height : '426px' "/>
		<bind name="style" value="'alpha'; _alpha ? _alpha : '1' "/>
		<bind name="style" value="'backgroundImage'; 'url:../nation_flags/big/flag_' + _shipCountry + '.png'"/>
	</block>
	<block className="NationFlagsTiny">
		<block className="NationFlagsTiny" type="ublock">
			<bind name="build!" value="{ _shipCountry: _shipCountry }"/>
		</block>
	</block>

	<!-- new_guiding_tips -->
	<block className="NewGuidingTipPinAnimation">
		<style>
			<hitTest value="false"/>
			<alpha value="0.8"/>
			<marginLeft value="-29px"/>
			<marginTop value="-29px"/>
			<width value="58px"/>
			<height value="58px"/>
			<backgroundImage value="url:../animations/spine/guiding_tip_pin/guiding_tip_pin.skel"/>
		</style>
	</block>
	<block className="NewContextGuidingTipPointerPanel_up">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<style>
					<marginLeft value="1px"/>
					<width value="1px"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/up.png"/>
				</style>
				<bind name="style" value="'width'; _noArrow ? '50%' : _firstPinOffset"/>
			</block>
			<block>
				<bind name="visible" value="!_noPointer"/>
				<block>
					<bind name="visible" value="!_noPinAnimation"/>
					<style>
						<position value="absolute"/>
						<marginTop value="-19px"/>
						<marginLeft value="11px"/>
					</style>
					<bind name="style" value="'top'; _pointerOffset"/>
					<bind name="style" value="'left'; _oppositePointerOffset"/>
					<bind name="instance" value="'NewGuidingTipPinAnimation'; _noPinAnimation ? null : {}"/>
				</block>
				<block>
					<bind name="visible" value="!_noArrow"/>
					<style>
						<top value="-10px"/>
						<width value="22px"/>
						<height value="12px"/>
						<backgroundImage value="url:../service_kit/guiding_tip/port_tip_arrow/up.png"/>
					</style>
					<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
				</block>
			</block>
			<block>
				<style>
					<marginRight value="1px"/>
					<width value="1px"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/up.png"/>
				</style>
				<bind name="style" value="'width'; _noArrow ? '50%' : _secondPinOffset"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/guiding_tip/port_tip_box/up.png"/>
				<background9Slice value="[4]"/>
			</style>
			<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
		</block>
	</block>
	<block className="NewContextGuidingTipPointerPanel_down">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/guiding_tip/port_tip_box/down.png"/>
				<background9Slice value="[4]"/>
			</style>
			<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginTop value="-2px"/>
			</style>
			<block>
				<style>
					<marginLeft value="1px"/>
					<width value="1px"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/down.png"/>
				</style>
				<bind name="style" value="'width'; _noArrow ? '50%' : _firstPinOffset"/>
			</block>
			<block>
				<bind name="visible" value="!_noPointer"/>
				<block>
					<bind name="visible" value="!_noPinAnimation"/>
					<style>
						<position value="absolute"/>
						<marginTop value="22px"/>
						<marginLeft value="11px"/>
					</style>
					<bind name="style" value="'top'; _pointerOffset"/>
					<bind name="style" value="'left'; _oppositePointerOffset"/>
					<bind name="instance" value="'NewGuidingTipPinAnimation'; _noPinAnimation ? null : {}"/>
				</block>
				<block>
					<bind name="visible" value="!_noArrow"/>
					<style>
						<width value="22px"/>
						<height value="12px"/>
						<backgroundImage value="url:../service_kit/guiding_tip/port_tip_arrow/down.png"/>
					</style>
					<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
				</block>
			</block>
			<block>
				<style>
					<marginRight value="1px"/>
					<width value="1px"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/down.png"/>
				</style>
				<bind name="style" value="'width'; _noArrow ? '50%' : _secondPinOffset"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="NewContextGuidingTipPointerPanel_right">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/guiding_tip/port_tip_box/right.png"/>
				<background9Slice value="[4]"/>
			</style>
			<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<style>
					<marginTop value="2px"/>
					<right value="0px"/>
					<width value="2px"/>
					<height value="1px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/right.png"/>
				</style>
				<bind name="style" value="'height'; _noArrow ? '50%' : _firstPinOffset"/>
			</block>
			<block>
				<bind name="visible" value="!_noPointer"/>
				<style>
					<right value="-10px"/>
				</style>
				<block>
					<bind name="visible" value="!_noPinAnimation"/>
					<style>
						<position value="absolute"/>
						<marginTop value="10px"/>
						<marginLeft value="22px"/>
					</style>
					<bind name="style" value="'left'; _pointerOffset"/>
					<bind name="style" value="'top'; _oppositePointerOffset"/>
					<bind name="instance" value="'NewGuidingTipPinAnimation'; _noPinAnimation ? null : {}"/>
				</block>
				<block>
					<bind name="visible" value="!_noArrow"/>
					<style>
						<height value="22px"/>
						<width value="12px"/>
						<backgroundImage value="url:../service_kit/guiding_tip/port_tip_arrow/right.png"/>
					</style>
					<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
				</block>
			</block>
			<block>
				<style>
					<marginBottom value="1px"/>
					<right value="0px"/>
					<width value="2px"/>
					<height value="1px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/right.png"/>
				</style>
				<bind name="style" value="'height'; _noArrow ? '50%' : _secondPinOffset"/>
			</block>
		</block>
	</block>
	<block className="NewContextGuidingTipPointerPanel_left">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<style>
					<marginTop value="2px"/>
					<width value="2px"/>
					<height value="1px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/left.png"/>
				</style>
				<bind name="style" value="'height'; _noArrow ? '50%' : _firstPinOffset"/>
			</block>
			<block>
				<bind name="visible" value="!_noPointer"/>
				<block>
					<bind name="visible" value="!_noPinAnimation"/>
					<style>
						<position value="absolute"/>
						<marginTop value="10px"/>
						<marginLeft value="-21px"/>
					</style>
					<bind name="style" value="'left'; _pointerOffset"/>
					<bind name="style" value="'top'; _oppositePointerOffset"/>
					<bind name="instance" value="'NewGuidingTipPinAnimation'; _noPinAnimation ? null : {}"/>
				</block>
				<block>
					<bind name="visible" value="!_noArrow"/>
					<style>
						<left value="-10px"/>
						<height value="22px"/>
						<width value="12px"/>
						<backgroundImage value="url:../service_kit/guiding_tip/port_tip_arrow/left.png"/>
					</style>
					<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
				</block>
			</block>
			<block>
				<style>
					<marginBottom value="1px"/>
					<width value="2px"/>
					<height value="1px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/guiding_tip/port_tip_line/left.png"/>
				</style>
				<bind name="style" value="'height'; _noArrow ? '50%' : _secondPinOffset"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/guiding_tip/port_tip_box/left.png"/>
				<background9Slice value="[4]"/>
			</style>
			<bind name="alpha" value="!isBlurOptionEnabled || isUIContrastOptionEnabled ? 1.35 : 1"/>
		</block>
	</block>
	<block className="NewContextGuidingTip">
		<bind name="var" value="{inPort: true}"/>
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<bind name="var" value="{isVisible: true}"/>
		<bind name="visible" value="isVisible"/>
		<bind name="catch" value="'evNewContextGuidingTipHide'; {isVisible: false}"/>
		<bind name="catch" value="'evNewContextGuidingTipUnHide'; {isVisible: true}"/>
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="watch" value="'pinOffset'; _pinOffset ? _pinOffset : 50"/>
		<bind name="watch" value="'pointerOffset'; _pointerOffset ? _pointerOffset + 'px' : '0px'"/>
		<bind name="watch" value="'oppositePointerOffset'; _oppositePointerOffset ? _oppositePointerOffset + 'px' : '0px'"/>
		<style>
			<position value="absolute"/>
			<width value="340px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="isBlurOptionEnabled"/>
			<block className="mc_blurmap5" type="native">
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="child" value="_direction ? _direction : 'no_item'; 	{	_noPointer:				_noPointer,
																_noArrow:				_noArrow,
																_noPinAnimation:		_noPinAnimation,
																_firstPinOffset:		pinOffset + '%',
																_secondPinOffset:		(100 - pinOffset) + '%',
																_pointerOffset:			pointerOffset,
																_oppositePointerOffset: oppositePointerOffset	};
															{	up: 	'NewContextGuidingTipPointerPanel_up',
																down: 	'NewContextGuidingTipPointerPanel_down',
																left: 	'NewContextGuidingTipPointerPanel_left',
																right: 	'NewContextGuidingTipPointerPanel_right',
																no_item:'EmptyItem'}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="_tipDescription &amp;&amp; _tipHeader"/>
			<params>
				<param name="name" value="contextGuidingTip"/>
			</params>
			<block>
				<styleClass value="$NewContextGuidingTipTextMargins"/>
				<block type="text">
					<styleClass value="$TextDefaultBold19NM"/>
					<styleClass value="$FontColorGolden"/>
					<style>
						<width value="100%"/>
						<marginRight value="16"/>
					</style>
					<bind name="text" value="_tipHeader"/>
					<params>
						<param name="name" value="contextGuidingTipHeader"/>
					</params>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingLeft value="2px"/>
					<paddingRight value="2px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginLeft value="2px"/>
					<marginRight value="2px"/>
					<marginBottom value="3px"/>
				</style>
			</block>
			<block>
				<styleClass value="$NewContextGuidingTipTextMargins"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<alpha value="0.75"/>
						<width value="100%"/>
						<marginBottom value="8"/>
					</style>
					<bind name="text" value="_tipDescription"/>
					<params>
						<param name="name" value="contextGuidingTipDescription"/>
					</params>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingLeft value="2px"/>
					<paddingRight value="2px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="name" value="'btnCloseNewTip'"/>
			<style>
				<top value="16"/>
				<right value="16"/>
				<marginTop value="3px"/>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'CloseButton'; {
			_action: 'deactivateCurrentTipChain',
			_actionParams: { tip_id: _newTipId }
		}"/>
		</block>
		<block>
			<bind name="visible" value="_hasNextButton"/>
			<style>
				<align value="center|middle"/>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; { 	_width: '120px', 
											_size: 0,
											_enabled: true, 
											_isTransactionBtn: false, 
											_label: 'IDS_NEWBIE_QUESTS_TOOLTIP_BUTTON_NEXT',
											_action: 'nextTipButton'} "/>
		</block>
		<block>
			<bind name="visible" value="_hasFinishButton"/>
			<style>
				<align value="center|middle"/>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; { 	_width: '120px', 
											_size: 0,
											_enabled: true, 
											_isTransactionBtn: false, 
											_label: 'IDS_NEWBIE_QUESTS_TOOLTIP_BUTTON_FINISH',
											_action: 'deactivateCurrentTipChain',
											_actionParams: { tip_id: _newTipId }} "/>
		</block>
	</block>
	<block className="NewGuidingTipHub">
		<bind name="var" value="{entityActive: false, reasonOnStage: true}"/>
		<bind name="isOnTop"/>
		<bind name="catch" value="'addedToStage'; 		{reasonOnStage: true}"/>
		<bind name="catch" value="'removedFromStage'; 	{reasonOnStage: false}"/>
		<bind name="name" value="'NewGuidingTip_' + _newTipId"/>
		<bind name="primaryEntityDH" value="'newTipEntity'; CC.newGuidingTip; _newTipId"/>
		<bind name="watchDH" value="'header'; 	['newTipEntity.newGuidingTip.evChanged']; newTipEntity.newGuidingTip.header"/>
		<bind name="watchDH" value="'desc';		['newTipEntity.newGuidingTip.evChanged']; newTipEntity.newGuidingTip.desc"/>
		<bind name="watchDH" value="'isActive'; 	['newTipEntity.newGuidingTip.evChanged']; newTipEntity.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'targetID'; 	['newTipEntity.newGuidingTip.evChanged', 'newTipEntity.newGuidingTip.evTargetIDChanged']; newTipEntity.newGuidingTip.targetID"/>
		<bind name="watch" value="'entityActive'; !!newTipEntity"/>
		<bind name="watch" value="'tipVisible'; entityActive &amp;&amp; isOnTop &amp;&amp; isActive &amp;&amp; reasonOnStage"/>
		<bind name="changeDispatch" value="tipVisible; tipVisible ? 'NewGuidingTipOpen' : 'NewGuidingTipClose'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="_tipType == 'panel'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
				<margin value="-4px"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/new_tip_sector.png"/>
				<background9Slice value="[6]"/>
			</style>
		</block>
		<bind name="watch" value="'direction';	_tipPositioning == 'top'		?	'down'	:
								_tipPositioning == 'bottom'	?	'up'		:
								_tipPositioning == 'left'		?	'right'	:
								_tipPositioning == 'right'		?	'left'
																			:	'no_item'"/>
		<bind name="popupNoCache" value="'NewContextGuidingTip';
		{
			_newTipId:				_newTipId,
			_tipHeader:				tr(header),
			_tipDescription:		tr(desc),
			_direction:				direction,
			_pinOffset: 			_pinOffset,
			_pointerOffset: 		_pointerOffset,
			_oppositePointerOffset: _oppositePointerOffset,
			_tipChainId:			_tipChainId,
			_hasNextButton:			_hasNextButton,
			_hasFinishButton:		_hasFinishButton,
			_noPointer:				_noPointer,
			_noArrow:				_noArrow,
			_noPinAnimation:		_noPinAnimation,
		}; 1;
		{
			type: 'lesta.unbound.bindings.popup.UbNativeReasonPopupSpacingComponent',
			params:
			{
				directionsPriority: _keepOnNotFit ? [_tipPositioning] : [_tipPositioning, 'empty'],
				reasonOffsetTop:	_offset,
				reasonOffsetBottom: _offset,
				reasonOffsetRight:	_offset,
				reasonOffsetLeft:	_offset,

				oppositeDirectionOffsetTop:		(_tipPositioning == 'top')		&amp;&amp;	_oppositeDirectionOffset ? _oppositeDirectionOffset : 0,
				oppositeDirectionOffsetBottom: 	(_tipPositioning == 'bottom')	&amp;&amp;	_oppositeDirectionOffset ? _oppositeDirectionOffset : 0,
				oppositeDirectionOffsetRight:	(_tipPositioning == 'right') 	&amp;&amp;	_oppositeDirectionOffset ? _oppositeDirectionOffset : 0,
				oppositeDirectionOffsetLeft:	(_tipPositioning == 'left') 	&amp;&amp;	_oppositeDirectionOffset ? _oppositeDirectionOffset : 0,

				screenOffsetTop:	_screenOffsetTop 	? _screenOffsetTop 		: 0,
				screenOffsetBottom: _screenOffsetBottom ? _screenOffsetBottom 	: 0,
				screenOffsetRight:	_screenOffsetRight 	? _screenOffsetRight	: 0,
				screenOffsetLeft:	_screenOffsetLeft 	? _screenOffsetLeft		: 0,
			}
		};
		{
			reason:
			{
				removedFromStage: 		{ 	action:'hide',
											params: { duration:0.0, startProps: { alpha:1, x:0, y:0 }, finishProps: { alpha:0, x:0, y: -5 }}
										},
				click:					{ 	action: _hideOnReasonClick ? 'hide' : 'none', 
											params: { duration:0.1, startProps: { alpha:1, x:0, y:0 }, finishProps: { alpha:0, x:0, y: -5 }}
										}
			},

			reasonScope:
			{
				NewGuidingTipOpen: 		{ 	action: 'show', 
											params: { duration:0.3, startProps: { alpha:0, x:0, y:10 }, finishProps: { alpha:1, x:0, y: 0 }, delay: _onShowDelay ? _onShowDelay : 0.5}},

				NewGuidingTipClose: 	{ 	action: 'hide',
											params: { duration:0.0, startProps: { alpha:1, x:0, y:0 }, finishProps: { alpha:0, x:0, y: -5 }}}
			}
		}
	"/>
	</block>

	<!-- params_modifier -->
	<block className="ParamsModifierItem">
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginBottom';	(_isTooltipSystem == true)	? '12px' : '16px'"/>
		<bind name="style" value="'paddingTop';		(_shrinkHeight == true)		? '-8px' : '0'"/>
		<bind name="watch" value="'textColor';	category == 'positive'	? 0xFF4CE8AA :
								category == 'negative'	? 0xFFFF6600
														: 0xFFFFFFFF"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<leading value="-2"/>
					<alpha value="0.8"/>
					<width value="100%"/>
				</style>
				<bind name="style" value="'alpha';	(!measuredValue &amp;&amp; textColor == 0xFFFF6600)	? 1 : 0.8"/>
				<bind name="style" value="'textColor'; measuredValue ? 0xFFFFFFFF : textColor"/>
				<bind name="text" value="attributeIDS"/>
			</block>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<marginLeft value="12px"/>
				</style>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="substitute" value="5;	{	'[battleship]'	: 'battleship_small_own',
										'[aircarrier]'	: 'carrier_small_own',
										'[destroyer]'	: 'destroyer_small_own',
										'[submarine]'	: 'submarine_small_own'
									}; format(measuredValue)"/>
			</block>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<bind name="style" value="'alpha'; category == 'positive' ? 0.65 : 0.8"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="text" value="measure"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_dottedDivider"/>
			<style>
				<width value="100%"/>
				<marginTop value="1px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ParamsModifierList">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesPositive; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass, _isTooltipSystem: _isTooltipSystem}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesNegative; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass, _isTooltipSystem: _isTooltipSystem}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesNeutral; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass, _isTooltipSystem: _isTooltipSystem}"/>
		</block>
	</block>

	<!-- player -->
	<block className="PlayerContactItemWithRollover">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="primaryEntityDH" value="'routeEntityisInBalancer'; CC.route; SC.Ui_windows.ROUTE.BALANCER"/>
		<bind name="watchDH" value="'isInBalancer'; ['routeEntityisInBalancer.route.evIsActiveChanged']; routeEntityisInBalancer.route.isActive"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'accountLevel'; ['entityAccount.accountLevel.evLevelChanged']; entityAccount.accountLevel.level"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged']; !!entityAccount.contact.isIgnored"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="watchDH" value="'referralType'; 		['entityAccount.referral.evTypeUpdated']; entityAccount.referral.type"/>
		<bind name="watch" value="'isRefSysParticipant'; referralType != null"/>
		<bind name="name" value="'playerContactName_' + entityAccount.accountName.name"/>
		<bind name="watch" value="'isInDivision'; entityAccount.hasComponent(CC.preBattlePlayerSimple) &amp;&amp; !isInvitedToDivision"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watch" value="'actionDenyReason';	(_playerContext.type == 'inviteToDivision') ? 			!(accountOnline)		? 'IDS_INVITE_TO_DIVISION_ACTION_DENY_REASON_OFFLINE' :
																								isInvitedToDivision 	? 'IDS_INVITE_TO_DIVISION_ACTION_DENY_REASON_ALREADY_INVITED'
																														: 'no_reason'
																					: 	'no_reason'"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
		</style>
		<bind name="style" value="'alpha'; accountOnline ? 1 : 0.5"/>
		<block>
			<bind name="visible" value="isSelf"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-1px"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<bind name="gotoAndStop!" value="'down'"/>
			</block>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="transition" value="mouseDown &amp;&amp; !isSelf; 0.03; {alpha: 1}; {alpha: 0.7}"/>
			<bind name="transition" value="rollOver || contactContextMenuVisible; 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="style" value="'hitTest'; !isSuspended || (isSuspended &amp;&amp; groupIdsOfAccount != null)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="menu" value="'ContactContextMenu';	!isSelf	? 	{	_entityAccountId: _entityAccountId, 
															_currentGroupId: _currentGroupId, 
															_actionDenyReason: actionDenyReason,
															_playerContext: _playerContext, 
															_inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON,
															_channelId: _channelId }
														: 	null; null; null; 'contactContextMenuVisible'"/>
			<bind name="tooltip" value="'ContactInfoTooltip'; !isSuspended	?	{	_entityAccountId: _entityAccountId,
																	_playerContext: _playerContext,
																	_actionDenyReason: actionDenyReason,
																	_isContextMenuAvailable: !isSelf }
															:	null"/>
			<bind name="clickSplit"/>
			<bind name="watch" value="'isActionEnabled'; !isSelf &amp;&amp;  actionDenyReason == 'no_reason' &amp;&amp; !isSuspended"/>
			<bind name="var" value="{showBusyIndicator: false}"/>
			<bind name="watch" value="'isInvitedToDivision'; entityAccount.playerInvitedToPrebattleInfo != null"/>
			<bind name="action" value="'left_click';	(isActionEnabled == false)						? '' :
									(_playerContext.type == 'startPrivateChat')		? 'openChannelForPrivateMessages' :
									(_playerContext.type == 'inviteToChannel')		? 'sendChannelInvite' :
									(_playerContext.type == 'inviteToDivision')		? 'inviteToDivision' :
									(_playerContext.type == 'inviteToTrainingRoom')	? 'inviteToTrainingRoom' :
									(_playerContext.type == 'channelParticipants')	? 'openChannelForPrivateMessages'
																					: '';
									(isActionEnabled == false)						? {} :
									(_playerContext.type == 'startPrivateChat')		? {dbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'inviteToChannel')		? {channelId: _playerContext.channelId, inviteDbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'inviteToDivision')		? {playerId: entityAccount.accountSimple.dbId, playerName: entityAccount.accountName.name, inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON} :
									(_playerContext.type == 'inviteToTrainingRoom')	? {inviteeDBID: entityAccount.accountSimple.dbId, teamID: _teamId} :
									(_playerContext.type == 'channelParticipants')	? {dbId: entityAccount.accountSimple.dbId}
																					: {}"/>
			<block>
				<bind name="visible" value="isRefSysParticipant"/>
				<style>
					<position value="absolute"/>
					<top value="2px"/>
					<left value="-1px"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'IconReferralSystem'; isRefSysParticipant ? { _referralType: referralType} : null"/>
			</block>
			<block>
				<bind name="transition" value="(mouseDown &amp;&amp; !isSelf); 0.03; {alpha: 1}; {alpha: 0.7}"/>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'marginLeft';	_isShort	? '17px'
													: '19px'"/>
				<block>
					<styleClass value="$Fullsize"/>
					<bind name="instance" value="'PlayerContactItem'; {_entityAccountId: _entityAccountId, _playerContext: _playerContext, _isShort: _isShort, _nickNameWidth: _nickNameWidth }"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<block>
						<bind name="visible" value="!(isSelf)"/>
						<style>
							<marginTop value="4px"/>
						</style>
						<bind name="style" value="'marginRight'; _isShort ? '6px' : '10px'"/>
						<bind name="transition" value="rollOver; 0.3; {alpha: 0}; {alpha: 1.0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; 0.07"/>
						<bind name="watch" value="'isAddToContactsBtnVisible';	(groupIdsOfAccount==null) &amp;&amp;
																!isIgnored &amp;&amp;
																!isSuspended &amp;&amp;
																isChatServerAvailable"/>
						<block>
							<style>
								<marginTop value="1px"/>
								<marginRight value="3px"/>
							</style>
							<bind name="instance" value="'BusyIndicator'; showBusyIndicator ? { _showBusyIndicator: showBusyIndicator } : null"/>
						</block>
						<block>
							<bind name="visible" value="isAddToContactsBtnVisible"/>
							<style>
								<marginRight value="4px"/>
							</style>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_ADD_TO_CONTACTS'}"/>
							<bind name="instance" value="'ImageButton'; {_width: '23px',
														_height: '23px',
														_enabled: true,
														_action: 'addContact',
														_actionParams: {dbId: entityAccount.accountSimple.dbId},
														_backgroundImage: 'url:../service_kit/buttons/context/add_contact.png'}"/>
						</block>
						<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'playersInDivision'"/>
						<bind name="collectionDH" value="CC.playerInvitedToPrebattleInfo; 'playersInvitedToDivision'"/>
						<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
						<bind name="watchDH" value="'trMaxPlayers'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
						<bind name="watch" value="'maxPlayers';	isInTrainingRoom	? trMaxPlayers 
																	: shipRestrictions.maxPlayers"/>
						<bind name="watch" value="'freePlaces'; maxPlayers - playersInDivision.length - playersInvitedToDivision.length"/>
						<bind name="watch" value="'isInviteToDivisionBtnVisible';	((isSelfPlayerCommander &amp;&amp; (freePlaces &gt; 0)) || !isInDivision) &amp;&amp;
																	accountOnline &amp;&amp;
																	!_isShort &amp;&amp;
																	!isInBalancer &amp;&amp;
																	(_playerContext.type != 'inviteToTrainingRoom') &amp;&amp;
																	!isInTrainingRoom &amp;&amp;
																	!isSuspended"/>
						<block>
							<bind name="visible" value="isInviteToDivisionBtnVisible"/>
							<bind name="watch" value="'inviteToDivisionBtnEnabled'; 	!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp;
																	!entityAccount.hasComponent(CC.invitationToDivision) &amp;&amp;
																	!isInvitedToDivision"/>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: isInvitedToDivision ? 'IDS_INVITED_IN_DIVISION_ALREADY' : 'IDS_INVITE_IN_DIVISION'}"/>
							<style>
								<marginRight value="4px"/>
							</style>
							<bind name="instance" value="'ImageButton'; {_width: '23px',
														_height: '23px',
														_enabled: inviteToDivisionBtnEnabled,
														_action: 'inviteToDivision',
														_actionParams: {playerId: entityAccount.accountSimple.dbId,
																		playerName: entityAccount.accountName.name,
																		inviteType: SC.Pre_battle.PRE_BATTLE_INVITE_TYPE.COMMON},
														_backgroundImage: 'url:../service_kit/buttons/context/division_invite.png'}"/>
						</block>
						<block>
							<bind name="visible" value="!isSuspended &amp;&amp; isChatServerAvailable"/>
							<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_SEND_MESSAGE'}"/>
							<bind name="instance" value="'ImageButton'; {_width: '23px',
														_height: '23px',
														_enabled: true,
														_action: 'openChannelForPrivateMessages',
														_actionParams: {dbId: entityAccount.accountSimple.dbId},
														_backgroundImage: 'url:../service_kit/buttons/context/start_chat.png'}"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PlayerContactItem">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'nickName';			['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName';			['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watchDH" value="'accountOnline';		['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'inBattle'; 			['entityAccount.accountStatus.evInBattleChanged']; entityAccount.accountStatus.inBattle"/>
		<bind name="watchDH" value="'rank'; 				['entityAccount.accountRank.evRankChanged']; entityAccount.accountRank.rank"/>
		<bind name="watchDH" value="'rankLeague'; 				['entityAccount.accountRank.evRankChanged']; entityAccount.accountRank.league"/>
		<bind name="watchDH" value="'rankSeasonId'; 		['entityAccount.accountRank.evRankChanged']; entityAccount.accountRank.seasonId"/>
		<bind name="watchDH" value="'clanId'; 			['entityAccount.clanman.evClanIdChanged']; entityAccount.clanman.clanId"/>
		<bind name="watchDH" value="'isSelf'; 			[]; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'isInBattle'; 		['entityAccount.preBattlePlayerSimple.evIsInBattleChanged']; entityAccount.preBattlePlayerSimple.isInBattle"/>
		<bind name="watchDH" value="'isCommander'; 		['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isReady'; 			['entityAccount.preBattlePlayerSimple.evIsReadyChanged']; entityAccount.preBattlePlayerSimple.isReady"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; clanId"/>
		<bind name="watchDH" value="'clanTag'; 	['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'color'; 	['clanExtendedEntity.clanExtended.evColorChanged']; clanExtendedEntity.clanExtended.color"/>
		<bind name="watchDH" value="'league'; 	['clanExtendedEntity.clanExtended.evLeagueChanged']; clanExtendedEntity.clanExtended.league"/>
		<bind name="watch" value="'clanTagColor'; ('0xff' + color)"/>
		<bind name="watch" value="'isInvitedToDivision'; entityAccount.playerInvitedToPrebattleInfo != null"/>
		<bind name="watch" value="'isInDivision'; isInFormation &amp;&amp; !isInvitedToDivision"/>
		<bind name="watch" value="'isInFormation'; entityAccount.hasComponent(CC.preBattlePlayerSimple)"/>
		<bind name="watchDH" value="'isMercenary';	['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watch" value="'isInFormationBattle'; isInDivision &amp;&amp; (isInBattle || inBattle)"/>
		<bind name="watchDH" value="'inviteExpirationTime'; ['']; entityAccount.playerInvitedToPrebattleInfo.expirationTime"/>
		<bind name="var" value="{wantedInDivision: false}"/>
		<bind name="style" value="'alpha'; _isOfflineAlpha	? accountOnline ? 1
															: 0.5
											: 1"/>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<bind name="visible" value="accountOnline &amp;&amp; ((inBattle &amp;&amp; !(isInFormationBattle)) || wantedInDivision)"/>
				<style>
					<marginLeft value="3px"/>
					<marginTop value="5px"/>
				</style>
				<block className="icon_player_status" type="native">
					<bind name="gotoAndStop!" value="wantedInDivision								? 'wanted_in_division' :
									inBattle										? 'in_battle'
																					: 'not_ready'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="(isInDivision || (isInvitedToDivision &amp;&amp; !isSelf)) &amp;&amp; !isInTrainingRoom"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<marginTop value="9px"/>
						<marginLeft value="-12px"/>
					</style>
					<bind name="instance" value="'VoiceChatDockIcon'; (accountOnline &amp;&amp; isInFormation)	? {_playerName: pureName, _isSelf: isSelf}
																						: null"/>
				</block>
				<block>
					<style>
						<marginTop value="4px"/>
					</style>
					<bind name="instance" value="'FormationPlayerIcon';	{	_isEmptySlot: isInvitedToDivision,
															isCommander: isCommander,
															isMercenary: isMercenary,
															isReady: isReady,
															isInBattle: isInFormationBattle} "/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="rank != 0 &amp;&amp; !(_isShort || isInDivision)"/>
				<style>
					<marginTop value="6px"/>
				</style>
				<bind name="instance" value="'IconRankSmall'; {_rank: rank, _league: rankLeague}"/>
			</block>
			<block type="text">
				<bind name="name" value="'playerContactName_' + nickName"/>
				<bind name="watch" value="'_tfWidth' ; 	_nickNameWidth	? _nickNameWidth :
										_isShort		? 148
														: 235"/>
				<bind name="style" value="'width';	_notTrancated	? 'auto' :
									((rank != 0) || inBattle || wantedInDivision)	? isInDivision	? _tfWidth - 37 + 'px'
																									: _tfWidth - 20 + 'px'
																					: isInDivision	? _tfWidth - 20 + 'px'
																									: _tfWidth + 'px'"/>
				<style>
					<marginTop value="2px"/>
					<marginLeft value="2px"/>
					<multiline value="false"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<noTranslate value="true"/>
				</style>
				<bind name="class" value=" (isSelf || isInDivision) &amp;&amp; !isMercenary	? '$FontColorGolden'
																	: '$FontColorWhite'"/>
				<bind name="class" value=" isSelf ? '$Bold' : '$None'"/>
				<bind name="text" value="_playerContext.channelTypeIdent == 'clan' ? pureName : nickName"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ContactInfoTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<block className="ContactInfoTooltip" type="ublock">
			<bind name="build!" value="{	_entityAccountId: _entityAccountId,
						_playerContext: _playerContext,
						_actionDenyReason: _actionDenyReason ? _actionDenyReason : '',
						_expirationTime: _expirationTime ? _expirationTime : 0,
						_isChatServerAvailable: _isChatServerAvailable ? _isChatServerAvailable : false,
						_isContextMenuAvailable: _isContextMenuAvailable ? _isContextMenuAvailable : false	}"/>
		</block>
	</block>
	<block className="ContactContextMenu">
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="childParentScope" value="isSuspended ? 0 : 1; {}; 'SuspendedContactContextMenu'; 'NormalContactContextMenu'"/>
	</block>
	<block className="SuspendedContactContextMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="contrast"/>
		</block>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; false ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(false) ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
			</block>
		</block>
	</block>
	<block className="NormalContactContextMenu">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<bind name="primaryEntityDH" value="'routeEntityisInBalancer'; CC.route; SC.Ui_windows.ROUTE.BALANCER"/>
		<bind name="watchDH" value="'isInBalancer'; ['routeEntityisInBalancer.route.evIsActiveChanged']; routeEntityisInBalancer.route.isActive"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evTeamIdChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'selfPreBattlePlayerId'; []; selfPlayerEntity.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'isSelfPlayerTeamCommander'; ['selfPlayerEntity.trainingRoomPlayer.evUpdate']; selfPlayerEntity.trainingRoomPlayer.isCommander"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'prebattleInvitedPlayerId'; []; entityAccount.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'prebattlePlayerId'; []; entityAccount.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'prebattlePlayerTeamId'; ['entityAccount.preBattlePlayerSimple.evTeamIdChanged']; entityAccount.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'isPrebattlePlayerOwner'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isPrebattlePlayerMercenary'; ['entityAccount.preBattlePlayerSimple.evIsMercenaryChanged']; entityAccount.preBattlePlayerSimple.isMercenary"/>
		<bind name="watchDH" value="'isPrebattlePlayerTeamCommander'; ['entityAccount.trainingRoomPlayer.evUpdate']; entityAccount.trainingRoomPlayer.isCommander"/>
		<bind name="watch" value="'isInvitedToPrebattle'; (entityAccount.playerInvitedToPrebattleInfo != null)"/>
		<bind name="watch" value="'isInPrebattle'; (entityAccount.preBattlePlayerSimple != null &amp;&amp; !(isInvitedToPrebattle))"/>
		<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
		<bind name="watchDH" value="'trMaxPlayers';			['trainingRoomEntity.trainingRoom.evUpdate'];		trainingRoomEntity.trainingRoom.teamSize"/>
		<bind name="watchDH" value="'trainingRoomOwnerId';	['trainingRoomEntity.preBattle.evOwnerIdChanged'];	trainingRoomEntity.preBattle.ownerId"/>
		<bind name="watch" value="'isSelfPlayerTrainingRoomOwner'; isInTrainingRoom &amp;&amp; (trainingRoomOwnerId == selfPreBattlePlayerId)"/>
		<bind name="watch" value="'isPrebattlePlayerTrainingRoomOwner'; isInTrainingRoom &amp;&amp; (trainingRoomOwnerId == prebattlePlayerId)"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="collectionDH" value="CC.contactsGroup; 'contactsGroup'"/>
		<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged', 'entityAccount.evAdded']; !!entityAccount.contact.isIgnored"/>
		<bind name="watchDH" value="'canAddGroupEntitiesId'; ['entityAccount.elementInGroups.evCanAddGroupEntitiesChanged', 'chatEntity.chat.evRosterChanged']; (entityAccount.elementInGroups) ? entityAccount.elementInGroups.canAddGroupEntitiesId : chatEntity.chat.canAddGroupEntitiesId"/>
		<bind name="watch" value="'isInFormation'; (entityAccount.preBattlePlayerSimple != null)"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="watchDH" value="'shipRestrictions';	['divisionDataEntity.division.evShipRestrictionsChanged']; divisionDataEntity.division.shipRestrictions"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; accountDbId ? null : {_text: 'IDS_UNABLED_ACTION_WITH_PLAYER', _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING}"/>
		<bind name="style" value="'mouseChildren'; accountDbId ? true : false"/>
		<bind name="style" value="'alpha'; accountDbId ? 1 : 0.5"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="contrast"/>
		</block>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'InfotipBg'; false ? {} : null"/>
			<bind name="instance" value="'ContextMenuBg'; !(false) ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="(isSelfPlayerCommander || (isInTrainingRoom &amp;&amp; isSelfPlayerTeamCommander &amp;&amp; selfTeamId == prebattlePlayerTeamId)) &amp;&amp; 
					   (isInPrebattle || isInvitedToPrebattle) &amp;&amp; (!isInBalancer)"/>
			<block>
				<bind name="visible" value="isInvitedToPrebattle"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_RECALL_INVITATION'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'revokeInvitationToDivision'; {id: prebattlePlayerId}"/>
			</block>
			<block>
				<bind name="visible" value="(isInPrebattle &amp;&amp;
							(!isInTrainingRoom ||
							(isInTrainingRoom &amp;&amp; isSelfPlayerTrainingRoomOwner &amp;&amp; !isPrebattlePlayerTrainingRoomOwner) ))"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="isInTrainingRoom ? 'IDS_EXCLUDE_PLAYER_OUT_OF_TRAINING_ROOM' : 'IDS_EXCLUDE_PLAYER_OUT_OF_DIVISION'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="request" value="'click'; 'kickPlayerFromDivision'; {	playerId: prebattlePlayerId, name: nickName,
																		subtitle: isInTrainingRoom ? 	'IDS_MODAL_EXCLUDE_PLAYER_OUT_OF_TRAINING_ROOM' : 
																										'IDS_MODAL_EXCLUDE_PLAYER_OUT_OF_DIVISION'
																	}"/>
			</block>
			<block>
				<bind name="visible" value="(isSelfPlayerCommander || (isInTrainingRoom &amp;&amp; isSelfPlayerTeamCommander &amp;&amp; selfTeamId == prebattlePlayerTeamId)) &amp;&amp; 
				!(_isBot) &amp;&amp;
				((isInPrebattle &amp;&amp; !trainingRoomEntity) ||
				(trainingRoomEntity &amp;&amp; trainingRoomEntity.trainingRoom.commandersManagement)) &amp;&amp; 
				(prebattlePlayerTeamId != -1) &amp;&amp; !isInvitedToPrebattle &amp;&amp;
				!isPrebattlePlayerTeamCommander &amp;&amp; !isPrebattlePlayerMercenary"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_APPOINT_PLAYER_TO_COMMANDER'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'changeCommander'; {playerId: prebattlePlayerId, teamId: prebattlePlayerTeamId}"/>
				<bind name="dispatch" value="'click'; _isTrainingRoom ? '' : 'Tooltip.Close'; null; 2"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="2px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="visible" value="!_isBot &amp;&amp; isChatServerAvailable"/>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_playerContext.type == 'inviteToChannel'"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_INVITE_PLAYER_TO_CHANNEL'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'sendChannelInvite'; {channelId: _playerContext.channelId, inviteDbId: accountDbId}"/>
		</block>
		<block>
			<bind name="visible" value="!_isBot &amp;&amp; isChatServerAvailable"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_SEND_MESSAGE'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'openChannelForPrivateMessages'; {dbId: accountDbId}"/>
		</block>
		<block>
			<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'playersInDivision'"/>
			<bind name="collectionDH" value="CC.playerInvitedToPrebattleInfo; 'playersInvitedToDivision'"/>
			<bind name="watchDH" value="'trMaxPlayers'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.teamSize"/>
			<bind name="watch" value="'maxPlayers';	isInTrainingRoom	? trMaxPlayers 
														: shipRestrictions.maxPlayers"/>
			<bind name="watch" value="'freePlaces'; maxPlayers - playersInDivision.length - playersInvitedToDivision.length"/>
			<bind name="visible" value=" ((isSelfPlayerCommander &amp;&amp; (freePlaces &gt; 0)) || !isInDivision) &amp;&amp;
						accountOnline &amp;&amp;
						!isInFormation &amp;&amp;
						!isInBalancer &amp;&amp;
						(_playerContext.type != 'inviteToTrainingRoom') &amp;&amp;
						!isInvitedToPrebattle &amp;&amp;
						!isInTrainingRoom"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'alpha'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision)) ? 1 : 0.5 "/>
			<bind name="style" value="'hitTest'; (!entityAccount.hasComponent(CC.playerInvitedToPrebattleInfo) &amp;&amp; !entityAccount.hasComponent(CC.invitationToDivision))"/>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_INVITE_IN_DIVISION'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'inviteToDivision'; {playerId: accountDbId, playerName: pureName, inviteType: _inviteType}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="	isInTrainingRoom &amp;&amp; (isSelfPlayerCommander || isSelfPlayerTeamCommander) &amp;&amp;
						accountOnline &amp;&amp;
						!(isInFormation) &amp;&amp;
						!isInvitedToPrebattle"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_INVITE_IN_TRAINING_ROOM'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'inviteToTrainingRoom'; {inviteeDBID: accountDbId}"/>
			</block>
		</block>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<block>
			<bind name="visible" value="((groupIdsOfAccount==null) &amp;&amp; !isIgnored) &amp;&amp; !_isBot &amp;&amp; isChatServerAvailable"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_ADD_TO_CONTACTS'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'addContact'; {dbId: accountDbId}"/>
		</block>
		<block>
			<bind name="visible" value="!(isIgnored) &amp;&amp; ((canAddGroupEntitiesId.length &gt; 0) &amp;&amp; (contactsGroup.length &gt; 1)) &amp;&amp; !(_isBot)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_ADD_TO_GROUP'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<block className="button_expand_h" type="native">
				<style>
					<position value="absolute"/>
					<right value="6px"/>
				</style>
				<styleClass value="$MouseDisable"/>
				<styleClass value="$MiddleVAligned"/>
			</block>
			<bind name="tooltip" value="'MoveToGroupContextSubMenu'; {_entityAccountId: _entityAccountId, canAddGroupEntitiesId: canAddGroupEntitiesId, _dropDown: false}; TooltipBehaviour.submenu"/>
		</block>
		<block>
			<bind name="visible" value="(_currentGroupId &amp;&amp; !isIgnored) &amp;&amp; !_isBot"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_REMOVE_FROM_GROUP'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'removeContactFromGroup'; {dbId: entityAccount.accountSimple.dbId, fromGroupId: _currentGroupId}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_isBot &amp;&amp; isChatServerAvailable"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="(!isIgnored) ? 'IDS_IGNORE_PLAYER' : 'IDS_NOT_IGNORE_PLAYER'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'userIgnoreContact'; {dbId: accountDbId, ignore: !(isIgnored)}"/>
			</block>
			<bind name="instance" value="'MenuItemReportPortChatMisbehaviour'; {_dbId: entityAccount.accountSimple.dbId, _channelId: _channelId}"/>
		</block>
		<block>
			<bind name="visible" value="((groupIdsOfAccount!=null) &amp;&amp; !isIgnored) &amp;&amp; !_isBot &amp;&amp; isChatServerAvailable"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItemWithAction">
				<style>
					<width value="100%"/>
				</style>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
				<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
			</block>
		</block>
		<block>
			<bind name="primaryEntityDH" value="'selfVoiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
			<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEnabledEntity.preference.evValueChanged']; selfVoiceChatEnabledEntity.preference.value"/>
			<bind name="instance" value="'VoiceChatContextMenuItem'; ((selfVoiceChatEnabled || isSelf) &amp;&amp; isInFormation) ? {_isSelf: isSelf, _playerName: pureName, _nickName: nickName} : null"/>
		</block>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; selfPlayerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
		<bind name="watchDH" value="'isFull'; ['clanEntity.clanExtended.evIsFullChanged']; clanEntity.clanExtended.isFull"/>
		<bind name="watch" value="'haveOwnClan'; 			clanEntity != null"/>
		<bind name="watch" value="'canInvite'; 				(role == 'executive_officer' || role == 'recruitment_officer' || role == 'commander')"/>
		<bind name="watch" value="'alreadyInYourClan'; 		(entityAccount.clanman != null) &amp;&amp; (entityAccount.clanman.clanId == selfPlayerEntity.clanman.clanId)"/>
		<bind name="watch" value="'alreadyInAnotherClan'; 	(entityAccount.clanman != null) &amp;&amp; (entityAccount.clanman.clanId != selfPlayerEntity.clanman.clanId)"/>
		<bind name="watch" value="'noFreePlacesInClan'; 		isFull"/>
		<block>
			<bind name="visible" value="(haveOwnClan &amp;&amp; canInvite &amp;&amp; !isInBalancer &amp;&amp; !alreadyInYourClan &amp;&amp; !_isBot)"/>
			<bind name="action" value="'click'; 'AccountClanComponent.sendInvite'; { playerDBID: accountDbId }"/>
			<bind name="style" value="'alpha'; (alreadyInAnotherClan || noFreePlacesInClan) ? 0.5 : 1"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; (alreadyInAnotherClan || noFreePlacesInClan) ? { _text: 	noFreePlacesInClan 		? 'IDS_CLAN_INVITATION_DENY_REASON_CLAN_IS_FULL':
																										alreadyInAnotherClan 	? 'IDS_CLAN_INVITATION_DENY_REASON_PLAYER_ALREADY_IN_CLAN'
																																: '',
																							 _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING}
																							: null"/>
			<style>
				<width value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'hitTest'; (alreadyInAnotherClan || noFreePlacesInClan) ? false : true"/>
				<block className="MenuItem">
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
					<block>
						<style>
							<width value="100%"/>
							<padding value="8px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
							</style>
							<bind name="text" value="'IDS_INVITATION_TO_CLAN'"/>
							<bind name="name" value="'menu_item_' + _titleIds"/>
						</block>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="!isInBalancer &amp;&amp; !_isBot &amp;&amp; isChatServerAvailable"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_PROFILE'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'navigateTo'; {	route: isInTrainingRoom ? SC.Ui_windows.ROUTE.ROOT_PORTAL_SHOW : SC.Ui_windows.ROUTE.PORTAL,
												data: {url: SC.Ui_windows.GUI_URL.PLAYER_STATS, accountId: accountDbId + ''}}"/>
		</block>
	</block>
	<block className="VoiceChatContextMenuItem">
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; _playerName"/>
		<bind name="watch" value="'playerVoiceChatIsEnabled'; (playerVoiceChatEntity != null)"/>
		<bind name="watchDH" value="'playerVoiceChatIsMuted'; ['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watch" value="'voiceChatMenuText'; 	!(playerVoiceChatIsEnabled) ? 'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT' :
										playerVoiceChatIsMuted		? 'IDS_UNMUTE_PLAYER_VOICE_CHAT'
																	: 'IDS_MUTE_PLAYER_VOICE_CHAT'"/>
		<bind name="watch" value="'state'; 	!(playerVoiceChatIsEnabled)	? 'disabled' :
							playerVoiceChatIsMuted		? 'muted'
														: 'speak'"/>
		<bind name="style" value="'alpha'; !(playerVoiceChatIsEnabled)	? 0.9 : 1"/>
		<bind name="style" value="'hitTest'; !(playerVoiceChatIsEnabled)	? false : true"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="soundSet" value="dropdown"/>
			</params>
			<bind name="action" value="'buttonClick'; 'toggleVoice'; {playerName: _playerName, nickName: _nickname}"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$ContextMenuListItemContent"/>
			<block className="icon_voice_chat_small" type="native">
				<style>
					<marginTop value="6px"/>
					<marginRight value="4px"/>
				</style>
				<bind name="gotoAndStop!" value="state"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	!(playerVoiceChatIsEnabled)	? '$FontColorOrange' :
							playerVoiceChatIsMuted		? '$FontColorOrange'
														: '$FontColorWhite'"/>
				<style>
					<width value="100%"/>
					<marginBottom value="3px"/>
					<hitTest value="false"/>
					<leading value="-3"/>
				</style>
				<bind name="text" value="voiceChatMenuText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MoveToGroupContextSubMenu">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$DefaultSubMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; { _isInBattle: _isInBattle }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="canAddGroupEntitiesId; 'MoveToGroupContextMenuItem'; {_entityAccountId: _entityAccountId, _currentGroupId: _currentGroupId}"/>
		</block>
	</block>
	<block className="MoveToGroupContextMenuItem">
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="entityDH" value="'group'; $value"/>
		<bind name="visible" value="(group.groupOfElements.groupId != 1)"/>
		<bind name="watch" value="'_isToTranslate'; 	(group!=null &amp;&amp; (group.groupOfElements.isLocal || 
									group.groupOfElements.isIgnorList ||
									group.groupOfElements.isReferralsList || 
									group.groupOfElements.groupType=='channels'))"/>
		<styleClass value="$ContextMenuListItem"/>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<bind name="instance" value="'MenuItemInstance'; {_titleIds: group.groupOfElements.name, _isNoTranslate: !_isToTranslate}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<bind name="action" value="'click'; 'addContactToGroup'; {dbId: accountDbId, toGroupId: group.groupOfElements.groupId, fromGroupId: _currentGroupId}"/>
	</block>
	<block className="VoiceChatDockIcon">
		<bind name="primaryEntityDH" value="'selfVoiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEnabledEntity.preference.evValueChanged']; selfVoiceChatEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; _playerName"/>
		<bind name="watchDH" value="'playerVoiceChatIsMuted'; ['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watchDH" value="'playerVoiceChatIsSpeaking'; ['playerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; playerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="watch" value="'playerVoiceChatIsEnabled'; playerVoiceChatEntity != null"/>
		<bind name="watch" value="'isChatEnabled'; _isSelf	? selfVoiceChatEnabled
											: (selfVoiceChatEnabled ? playerVoiceChatIsEnabled : true)"/>
		<bind name="watch" value="'state';	!(isChatEnabled)			? 'disabled' :
							playerVoiceChatIsMuted		? 'muted' :
							playerVoiceChatIsSpeaking	? 'speak'
														: null"/>
		<bind name="transition" value="state; 0.1; {alpha: 0}; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<block className="icon_voice_chat_small" type="native">
			<bind name="gotoAndStop!" value="state"/>
		</block>
	</block>
	<block className="MenuTooltipBackground">
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'DeclareBlurLayer'; _isInBattle ?  null : {}"/>
			<bind name="instance" value="'BlurMap'; _isInBattle ? null : {}"/>
		</block>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<block>
			<bind name="visible" value="contrast || _isInBattle"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="!(_isInBattle)"/>
			<style>
				<marginTop value="-1px"/>
				<marginBottom value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
	</block>
	<block className="IconReferralSystem">
		<style>
			<width value="27px"/>
			<height value="27px"/>
		</style>
		<bind name="style" value="'backgroundImage'; _referralType == SC.Common.REFERRAL_TYPE.VETERAN 	? 'url:../service_kit/icons/icon_status_list_veteran.png'
																						: 'url:../service_kit/icons/icon_status_list_referal.png'"/>
	</block>
	<block className="MenuItemReportPortChatMisbehaviour">
		<bind name="visible" value="_channelId != null &amp;&amp; canReportPortChatMisbehaviour"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="primaryEntityDH" value="'channelEntity'; CC.channel; _channelId"/>
		<bind name="watchDH" value="'canReportPortChatMisbehaviour'; ['channelEntity.channel.evTypeChanged']; channelEntity.channel.typeIdent != SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE &amp;&amp; 
																								channelEntity.channel.typeIdent != SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _dbId"/>
		<bind name="watchDH" value="'banRequestAlreadySent'; ['playerEntity.accountSimple.evReportedChanged'];  playerEntity.accountSimple.reported"/>
		<bind name="style" value="'mouseChildren'; !banRequestAlreadySent"/>
		<bind name="style" value="'alpha'; banRequestAlreadySent ? 0.5 : 1.0"/>
		<block className="MenuItemWithAction">
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REQUEST_BAN_PLAYER_DOCK'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'makeChatComplaint'; {subjectSpaID: _dbId, channelID: _channelId}"/>
		</block>
	</block>

	<!-- player_profile -->
	<block className="ProfileMainInset">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="var" value="{lagEnded: false}"/>
		<bind name="catch" value="'lagAfterAddedToStage'; {lagEnded: true}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="primaryEntityDH" value="'featureEntity_3'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[3]"/>
		<bind name="watchDH" value="'feature_3'; ['featureEntity_3.accountFeature.evStateChanged']; featureEntity_3.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_3"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 3}"/>
		<bind name="primaryEntityDH" value="'featureEntity_16'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[16]"/>
		<bind name="watchDH" value="'feature_16'; ['featureEntity_16.accountFeature.evStateChanged']; featureEntity_16.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_16"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 16}"/>
		<bind name="primaryEntityDH" value="'featureEntity_19'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[19]"/>
		<bind name="watchDH" value="'feature_19'; ['featureEntity_19.accountFeature.evStateChanged']; featureEntity_19.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_19"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 19}"/>
		<bind name="primaryEntityDH" value="'featureEntity_24'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[24]"/>
		<bind name="watchDH" value="'feature_24'; ['featureEntity_24.accountFeature.evStateChanged']; featureEntity_24.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_24"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 24}"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'routeCollectionEntity'; CC.route; SC.Ui_windows.ROUTE.COLLECTIONS"/>
		<bind name="watchDH" value="'collectionPageData';		['routeCollectionEntity.dataComponent.evDataChanged'];	routeCollectionEntity.dataComponent.data"/>
		<bind name="watchDH" value="'isCollectionsAvailable';	['routeCollectionEntity.route.evIsAvailableChanged'];	routeCollectionEntity.route.isAvailable"/>
		<bind name="primaryEntityDH" value="'collectionPageDataEntity'; CC.collectionAlbum; collectionPageData.collectionId"/>
		<bind name="collectionDH" value="CC.collectionAlbum; 'albumCollectionEntity'; 'validAlbums.sortedAlbums'"/>
		<bind name="watch" value="'currentCollectionId'; collectionPageDataEntity.id	? collectionPageDataEntity.id
																	: albumCollectionEntity[0].id"/>
		<bind name="entityDH" value="'collectionEntity'; currentCollectionId"/>
		<bind name="watchDH" value="'collectionBackground'; ['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.background"/>
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.PROFILE"/>
		<bind name="watchDH" value="'isInProfile'; ['routeEntity.route.evIsActiveChanged']; routeEntity.route.isActive"/>
		<bind name="watchDH" value="'profilePage'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
		<bind name="watchDH" value="'prevProfileubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.prevActiveChild"/>
		<bind name="watchDH" value="'availableProfileSubroutes'; ['routeEntity.route.evChildrenChanged']; routeEntity.route.children"/>
		<bind name="soundOn" value="'addedToStage'; 'profile'; 'dock_inset'"/>
		<bind name="firstEntityDH" value="'clubHistoryEntity'; CC.rankedSeasonHistory; 'byGameType.' + SC.Common.BATTLE_TYPES.CLUB_BATTLE"/>
		<bind name="watch" value="'hasClubHistoryData'; clubHistoryEntity.rankedSeasonHistory.hasGamesPlayed"/>
		<bind name="firstEntityDH" value="'oldRankedHistoryEntity'; CC.rankedSeasonHistory; 'byGameType.' + SC.Common.BATTLE_TYPES.OLD_RANKED_BATTLE"/>
		<bind name="watch" value="'hasOldRankedHistoryData'; oldRankedHistoryEntity.rankedSeasonHistory.hasGamesPlayed"/>
		<bind name="watch" value="'_curItemIndex'; userPrefs.summaryInset == null
									|| (feature_3  == 'locked' &amp;&amp; userPrefs.summaryInset == 1)
									|| (feature_16 == 'locked' &amp;&amp; userPrefs.summaryInset == 2)
									|| (!(hasClubHistoryData || hasOldRankedHistoryData) &amp;&amp; userPrefs.summaryInset == 3) ? 0 : userPrefs.summaryInset"/>
		<bind name="changeDispatch" value="_curItemIndex; 'changeInsetInPrefs'"/>
		<bind name="action" value="'changeInsetInPrefs'; 'setUserPref' ; {value: _curItemIndex, name: 'summaryInset'}"/>
		<bind name="catch" value="'ItemChooserInnerEvent.battleTypeChanged'"/>
		<bind name="catch" value="'setBattleType'"/>
		<bind name="catch" value="'selectedAlbumChanged'"/>
		<bind name="watch" value="'isSummaryPage'; profilePage == SC.Ui_windows.ROUTE.SUMMARY"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-60px"/>
			</style>
			<block className="AnimatedBackground" type="ublock">
				<bind name="build!" value="{ _selectedCategory: 'profile', _type: SC.Ui_styles.ANIMATED_BG.DEFAULT, _startShow: lagEnded}"/>
			</block>
		</block>
		<bind name="timeFormat" value="maxOfflineTime; 'HIGHEST'; 'maxOfflineTimeFormatted'; true"/>
		<block className="icon_question_mark" type="native">
			<style>
				<position value="absolute"/>
				<top value="8px"/>
				<left value="6px"/>
			</style>
			<bind name="tooltip" value="'MultiParagraphHelpTooltip';
			profilePage == SC.Ui_windows.ROUTE.LEVELING 				? {_tooltipHeader: 'IDS_ACCESS_LEVEL',
																			_width: 350,
																			_multiParagraphArray: [ {_paragraphText: 'IDS_ACCESS_LEVELS_INSTRUCTION_0'},
																									{_paragraphText: 'IDS_ACCESS_LEVELS_INSTRUCTION_1'},
																									{_paragraphText: 'IDS_ACCESS_LEVELS_INSTRUCTION_2'}]} :
			profilePage == SC.Ui_windows.ROUTE.SUMMARY					? {	_tooltipHeader: 'IDS_PROFILE_SUMMARY',
																			_width: 350,
																			_multiParagraphArray: [ {_paragraphText: 'IDS_PROFILE_SUMMARY_INSTRUCTION_0'},
																									{_paragraphText: 'IDS_PROFILE_SUMMARY_INSTRUCTION_1'}]} :
			profilePage == SC.Ui_windows.ROUTE.ACHIEVEMENTS				? {	_tooltipHeader: 'IDS_PROFILE_ACHIEVEMENTS',
																			_width: 350,
																			_multiParagraphArray: [ {_paragraphText: 'IDS_PROFILE_ACHIEVEMENTS_INSTRUCTION'}]} :
			profilePage == SC.Ui_windows.ROUTE.RANKS 					? {	_tooltipHeader: 'IDS_PROFILE_RANKS',
																			_width: 350,
																			_multiParagraphArray: [ {_paragraphText: tr(toUpperCase('IDS_' + SC.Common.BATTLE_TYPES.RANKED_BATTLE + '_DESCRIPTION'))} ]	} :
			profilePage == SC.Ui_windows.ROUTE.COLLECTIONS				? {	_tooltipHeader: 'IDS_PROFILE_COLLECTIONS',
																			_width: 350,
																			_multiParagraphArray: [ {_paragraphText: 'IDS_PROFILE_COLLECTION_INSTRUCTION_0'},
																									{_paragraphText: 'IDS_PROFILE_COLLECTION_INSTRUCTION_1'}]} 
																		: null"/>
		</block>
		<bind name="firstEntityDH" value="'statDataEntity'; CC.rankedSeasonHistory"/>
		<bind name="watchDH" value="'statData'; ['statDataEntity.dataComponent.evDataChanged']; statDataEntity.dataComponent.data"/>
		<block>
			<style>
				<position value="absolute"/>
				<marginTop value="34px"/>
				<left value="6px"/>
			</style>
			<block type="text">
				<style>
					<marginLeft value="0px"/>
				</style>
				<styleClass value="$TextSecondary"/>
				<bind name="text" value="statData.basicStats.registrationDate"/>
			</block>
			<block type="text">
				<style>
					<marginTop value="-6px"/>
					<marginLeft value="0px"/>
				</style>
				<styleClass value="$TextSecondary"/>
				<bind name="class" value="'$FontColorGrey'"/>
				<default_text value="IDS_REGISTRATION_DATE"/>
			</block>
			<block>
				<bind name="visible" value="statData.basicStats.timeLastBattle &gt; 0"/>
				<block type="text">
					<bind name="timeFormat" value="statData.basicStats.timeLastBattle; 'hh:mm  dd.MM.yyyy'; 'timeLastBattleFormatted'; true"/>
					<style>
						<marginLeft value="0px"/>
					</style>
					<styleClass value="$TextSecondary"/>
					<bind name="text" value="timeLastBattleFormatted"/>
				</block>
				<block type="text">
					<style>
						<marginTop value="-6px"/>
						<marginLeft value="0px"/>
					</style>
					<styleClass value="$TextSecondary"/>
					<bind name="class" value="'$FontColorGrey'"/>
					<default_text value="IDS_LAST_BATTLE"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<style>
				<top value="21sh"/>
				<position value="absolute"/>
				<width value="200px"/>
			</style>
			<block className="ProfileSideTabButtons" type="ublock">
				<bind name="build!" value="{ _profilePage: profilePage }"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$Fullsize"/>
			<bind name="child" value="profilePage; {_curItemIndex: _curItemIndex}; {	leveling: 'PlayerAccount',
																	achievements: 'PlayerAchievements',
																	ranks: 'PlayerRanks',
																	summary: 'PlayerSummary',
																	collections: 'PlayerCollection' }"/>
		</block>
	</block>
	<block className="PlayerAchievements">
		<styleClass value="$Fullsize"/>
		<block className="PlayerAchievements" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{ _curItemIndex: _curItemIndex }"/>
		</block>
	</block>
	<block className="ProfileCarousel">
		<params>
			<param name="name" value="ProfileCarousel"/>
		</params>
		<style>
			<marginTop value="720:16,1080:32ah"/>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<width value="100%"/>
					<bottom value="-1px"/>
				</style>
				<block className="scroll_line" type="native">
					<style>
						<width value="100%"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="20px"/>
					<height value="100%"/>
					<marginRight value="12px"/>
				</style>
				<block className="button_slide_left" type="native">
					<styleClass value="$MiddleAligned"/>
					<params>
						<param name="focusable" value="false"/>
					</params>
					<style>
						<marginTop value="40px"/>
					</style>
					<bind name="name" value="'buttonCarouselLeft'"/>
					<bind name="dispatch" value="'buttonClick'; 'profileCarousel.scrollOneUnitLeft'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="catch" value="'mainCarouselElement.selectedIndexChanged'"/>
				<bind name="instance" value="_mainCarouselElementName; {}"/>
			</block>
			<block>
				<style>
					<width value="20px"/>
					<height value="100%"/>
					<marginLeft value="12px"/>
				</style>
				<block className="button_slide_right" type="native">
					<styleClass value="$MiddleAligned"/>
					<params>
						<param name="focusable" value="false"/>
					</params>
					<style>
						<marginTop value="40px"/>
					</style>
					<bind name="name" value="'buttonCarouselRight'"/>
					<bind name="dispatch" value="'buttonClick'; 'profileCarousel.scrollOneUnitRight'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="-8px"/>
				<marginRight value="-8px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="100%"/>
					<position value="absolute"/>
				</style>
				<block className="BlurMapCustom">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="mc_blurmap_half_sphere" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$Fullsize"/>
						<bind name="blurMap" value="0"/>
					</block>
				</block>
				<block className="gradient_half_sphere" type="native">
					<style>
						<width value="100%"/>
						<height value="110%"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="_rewardsCarouselElementName; {_carouselData: _carouselData, _selectedIndex: selectedIndex}"/>
			</block>
		</block>
	</block>

	<!-- player_profile_account -->
	<block className="PlayerAccount">
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.LEVELING"/>
		<bind name="watchDH" value="'pageData'; ['routeEntity.dataComponent.evDataChanged']; routeEntity.dataComponent.data"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="catch" value="'evAccountLevelingItemClicked'"/>
		<bind name="firstEntityDH" value="'accountLevelEntity'; CC.accountLevel"/>
		<bind name="watchDH" value="'curAccountLevel'; ['accountLevelEntity.accountLevel.evLevelChanged']; accountLevelEntity.accountLevel.level"/>
		<bind name="primaryEntityDH" value="'accountLevelingStepEntity'; CC.accountLevelingStep; curAccountLevel"/>
		<bind name="collectionDH" value="CC.accountLevelCarouselPosition; 'accountCarouselPositionCollection'; 'sorted'"/>
		<bind name="contains" value="accountCarouselPositionCollection; ($item.accountLevelingStep.level == curAccountLevel); 'accountLevelEntityIndex'; true"/>
		<bind name="catch" value="'addedToStage'; {	carouselItemSelectedIndex: 	pageData.isPortBannerClicked 	? pageData.rewardTypeReason == 'promo'	? (pageData.promoRewardLevel)
																																						: accountLevelEntityIndex
																								: accountLevelEntityIndex,

									carouselScrollIndex: 	pageData.isPortBannerClicked 	? pageData.rewardTypeReason == 'promo'	? (pageData.promoRewardLevel - 1)
																																					: (accountLevelEntityIndex - 1)
																							: (accountLevelEntityIndex - 1)}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<paddingLeft value="188px"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1280:868,1920:1052aw"/>
				<align value="middle"/>
				<position value="absolute"/>
				<top value="720:252,1080:352ah"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="1px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/al_carousel_divider.png"/>
					<background9Slice value="[37,0]"/>
					<align value="middle"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="300px"/>
					<alpha value="1.2"/>
					<hitTest value="false"/>
					<position value="absolute"/>
					<top value="1px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/AL_bg_info.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<style>
					<marginTop value="720:60,1080:160ah"/>
					<marginBottom value="720:0,1080:90ah"/>
				</style>
				<params>
					<param name="name" value="PlayerProfileAccount"/>
				</params>
				<block>
					<style>
						<width value="10px"/>
						<marginRight value="32px"/>
						<marginTop value="73px"/>
					</style>
					<block className="button_slide_left" type="native">
						<bind name="name" value="'buttonAccountCarouselLeft'"/>
						<params>
							<param name="focusable" value="false"/>
						</params>
						<bind name="enabled" value="ALCarouselCanScrollLeft"/>
						<bind name="event" value="'click'; scrollLeftByOneUnit"/>
					</block>
				</block>
				<block>
					<params>
						<param name="name" value="AccountCarouselMainBlock"/>
					</params>
					<bind name="controller" value="'lesta.unbound.controls.UbCarouselController'"/>
					<bind name="event" value="'profileCarousel.scrollOneUnitLeft'; scrollLeftByOneUnit"/>
					<bind name="event" value="'profileCarousel.scrollOneUnitRight'; scrollRightByOneUnit"/>
					<bind name="stageSize"/>
					<bind name="watch" value="'maxStageWidth'; stageWidth &lt; 1920 ? stageWidth : 1920"/>
					<bind name="watch" value="'widthOfItem'; math.round((maxStageWidth-1280)/(1920-1280)*(424-332)+332)"/>
					<style>
						<width value="1280:868,1920:1052aw"/>
						<height value="245px"/>
						<overflow value="scroll"/>
						<scrollArea value="ModernScrollAreaHorizontal"/>
						<scrollbarController value="lesta.unbound.style.UbScrollingControllerCarousel"/>
						<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
						<itemWidth value="1280:332,1920:424aw"/>
						<itemHeight value="164px"/>
						<backgroundColor value="0x01000000"/>
						<wheelScrollSpeed value="1280:332,1920:424aw"/>
						<generatorOffsetLeft value="332"/>
						<generatorOffsetRight value="332"/>
					</style>
					<bind name="event" value="'addedToStage'; setIndex; carouselScrollIndex"/>
					<bind name="catch" value="'evPromoRewardBannerClicked'"/>
					<bind name="dispatch" value="'evPromoRewardBannerClicked'; 'evDelayedPromoRewardBannerClicked'; {}; 2; 0.05"/>
					<bind name="event" value="'evDelayedPromoRewardBannerClicked'; scrollToIndex; carouselScrollIndex"/>
					<bind name="generatorDH" value="CC.accountLevelCarouselPosition; 'AccountLevellingCarouselItem'; 'sorted'; {_carouselItemSelectedIndex: carouselItemSelectedIndex}"/>
					<bind name="scrollController" value="'ALCarousel'; widthOfItem; 1"/>
					<block>
						<style>
							<width value="1px"/>
							<height value="1px"/>
							<marginRight value="1280:-151,1920:-243aw"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="10px"/>
						<marginLeft value="32px"/>
						<marginTop value="73px"/>
					</style>
					<block className="button_slide_right" type="native">
						<bind name="name" value="'buttonAccountCarouselRight'"/>
						<params>
							<param name="focusable" value="false"/>
						</params>
						<bind name="enabled" value="ALCarouselCanScrollRight"/>
						<bind name="event" value="'click'; scrollRightByOneUnit"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
				<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
				<bind name="collectionDH" value="CC.accountLevelCarouselPosition; 'accountLevelingCarouselElements'; 'sorted'"/>
				<bind name="watch" value="'entityId'; accountLevelingCarouselElements[carouselItemSelectedIndex].id"/>
				<bind name="watch" value="'isFeature'; carouselItemSelectedIndex &gt;= 0"/>
				<bind name="handleEventDH" value="'accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged'; 'currentPointsChanged'; {}; 2"/>
				<bind name="dispatch" value="'currentPointsChanged'; isFeature ? null : 'evAccountLevelingItemClicked'; { carouselItemSelectedIndex: curAccountLevel - 1}; 2; 0.05"/>
				<bind name="watch" value="'galleryItemRendererParams'; [{ carouselPosEntityId: entityId }]"/>
				<bind name="var" value="{ isHackedStep: false }"/>
				<bind name="changeDispatch" value="carouselItemSelectedIndex; 'selectedAccountStepChanged'; null; 2"/>
				<bind name="catch" value="'selectedAccountStepChanged'; {isHackedStep: true}"/>
				<bind name="dispatch" value="'selectedAccountStepChanged'; 'selectedAccountStepChangedDelayed'; {}; 2; 0.05"/>
				<bind name="catch" value="'selectedAccountStepChangedDelayed'; { isHackedStep: false }"/>
				<style>
					<marginLeft value="1280:70,1480:170aw"/>
				</style>
				<bind name="instance" value="'GalleryViewer'; isHackedStep	?	null
															:	{	_galleryItemRenderer: 'AccountLevellingStepInfo',
																	_galleryItemRendererParams: galleryItemRendererParams,
																	_galleryItemRendererImageIndicator: 'SelectedImageIndicatorAccountLeveling',
																	_galleryImageWidth: 844,
																	_galleryImageHeight: 265,
																	_galleryItemRendererImageIndicatorMarginLeft: 298,
																	_autoSwitchDelay: 8,
																	_currentImageIdx: 1,
																	_arrowsDisabled: true
																}"/>
			</block>
		</block>
	</block>

	<!-- player_profile_collections -->
	<block className="PlayerCollection">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'routeEntityisOnScreen'; CC.route; SC.Ui_windows.ROUTE.COLLECTIONS"/>
		<bind name="watchDH" value="'isOnScreen'; ['routeEntityisOnScreen.route.evIsActiveChanged']; routeEntityisOnScreen.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.COLLECTIONS"/>
		<bind name="watchDH" value="'pageData'; ['routeEntity.dataComponent.evDataChanged']; routeEntity.dataComponent.data"/>
		<bind name="primaryEntityDH" value="'collectionPageDataId'; CC.collectionAlbum; pageData.collectionId"/>
		<bind name="collectionDH" value="CC.collectionAlbum; 'albumCollection'; 'validAlbums.sortedAlbums'"/>
		<bind name="watch" value="'newCollectionId'; collectionPageDataId.id ? collectionPageDataId.id
															: albumCollection[0].id"/>
		<bind name="entityDH" value="'newCollectionEntity'; newCollectionId"/>
		<bind name="watch" value="'currentCollectionId';	newCollectionEntity.collectionAlbum.id"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; currentCollectionId"/>
		<bind name="watchDH" value="'cardsCollection';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.cards"/>
		<bind name="watchDH" value="'subAlbums';				['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.subAlbums"/>
		<bind name="watchDH" value="'isPuzzle';				['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isPuzzle"/>
		<bind name="watchDH" value="'unPastedCardIndex';		['collectionEntity.collectionAlbum.evUnPastedCardIndexChanged']; collectionEntity.collectionAlbum.unPastedCardIndex"/>
		<bind name="watchDH" value="'isFull';				['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isFull"/>
		<bind name="watch" value="'collectionPageID';	pageData.subAlbum	? subAlbums[pageData.subAlbum]
															: subAlbums[0]"/>
		<bind name="entityDH" value="'subCollectionEntity'; collectionPageID"/>
		<bind name="watchDH" value="'cardsSubCollection';		['subCollectionEntity.collectionSubAlbum.evUpdate']; subCollectionEntity.collectionSubAlbum.cards"/>
		<bind name="watchDH" value="'unPastedCardIndexSubColl';	['subCollectionEntity.collectionSubAlbum.evUnPastedCardIndexChanged']; subCollectionEntity.collectionSubAlbum.unPastedCardIndex"/>
		<bind name="watch" value="'currentCollectionCards'; (subAlbums.length &gt; 0) ? cardsSubCollection : cardsCollection"/>
		<bind name="catch" value="'selectedPageChanged'"/>
		<bind name="watch" value="'isUnPastedCard';	unPastedCardIndex &gt; 0 || unPastedCardIndexSubColl &gt; 0"/>
		<bind name="changeDispatch" value="isUnPastedCard; isUnPastedCard ? 'evPlayShowCardSound' : 'evStopShowCardSound'"/>
		<bind name="var" value="{ isWindowNotTop: 0,
				needRepeatUpdate: false,
				isAnimationTimeoutFin: false
				}"/>
		<bind name="dispatch" value="'currentCollectionId' + varChanged; 'selectedAlbumChangedEv'; null; 2"/>
		<bind name="dispatch" value="'collectionPageID' + varChanged; 'selectedAlbumChangedEv'; null; 2"/>
		<bind name="catch" value="'selectedAlbumChangedEv'; { needRepeatUpdate: true }"/>
		<bind name="dispatch" value="'selectedAlbumChangedEv'; 'selectedAlbumChangedDelayed'; {}; 2; 0.1"/>
		<bind name="catch" value="'selectedAlbumChangedDelayed'; { needRepeatUpdate: false }"/>
		<bind name="catch" value="'onLostTop';	{isWindowNotTop: isWindowNotTop + 1}"/>
		<bind name="dispatch" value="'onBecomeTop'; 'delayedOnBecomeTop'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.5"/>
		<bind name="catch" value="'delayedOnBecomeTop';	{isWindowNotTop: isWindowNotTop - 1}"/>
		<bind name="dispatch" value="'lagAfterAddedToStage';	'evAnimationTimeout'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.6"/>
		<bind name="catch" value="'evAnimationTimeout'; {isAnimationTimeoutFin: true}"/>
		<bind name="watch" value="'isSceneReadyToAnimation'; isOnScreen &amp;&amp; isWindowNotTop == 0 &amp;&amp; isAnimationTimeoutFin"/>
		<params>
			<param name="name" value="PlayerProfileCollections"/>
		</params>
		<styleClass value="$MiddleAligned"/>
		<style>
			<width value="1280:930,1920:1430aw"/>
			<marginTop value="6sh"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 0*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'CollectionCarousel'; { _selectedAlbumID: currentCollectionId }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$CollectionMarginTop"/>
				<style>
					<width value="100%"/>
					<height value="720:400,1080:700ah"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<styleClass value="$Fullsize"/>
					<block>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<align value="center|middle"/>
						</style>
						<bind name="instance" value="'CardsCollectionRepeat'; needRepeatUpdate || isPuzzle	? null
																							: {	_currentCollectionCards: currentCollectionCards,
																								_collectionPageID: collectionPageID,
																								_isSceneReadyToAnimation: isSceneReadyToAnimation }"/>
					</block>
					<block>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<align value="center"/>
							<top value="720:0,1080:16ah"/>
						</style>
						<bind name="instance" value="'PuzzleCollectionRepeat'; isPuzzle	? {	_collectionID: currentCollectionId,
																			_isSceneReadyToAnimation: isSceneReadyToAnimation }
																		: null"/>
					</block>
					<block>
						<styleClass value="$MiddleAligned"/>
						<style>
							<position value="absolute"/>
							<bottom value="-30px"/>
						</style>
						<bind name="repeat" value="subAlbums; 'RadioButtonControl'; {_collectionPageID: collectionPageID}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0.15; windowAppearLag + 3 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="1280:250,1920:340aw"/>
						<height value="100%"/>
						<marginRight value="10px"/>
					</style>
					<bind name="instance" value="'CollectionDescription'; {	_collectionID: currentCollectionId,
															_collectionPageID: collectionPageID,
															_selectedAlbumID: currentCollectionId }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="CollectionCarousel">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1280:860,1920:1360aw"/>
				<align value="middle"/>
				<position value="absolute"/>
				<bottom value="0"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="1px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/al_carousel_divider.png"/>
					<background9Slice value="[37,0]"/>
					<align value="middle"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="300px"/>
					<alpha value="1.2"/>
					<hitTest value="false"/>
					<position value="absolute"/>
					<top value="1px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/AL_bg_info.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<marginTop value="52px"/>
				</style>
				<block className="button_slide_left" type="native">
					<params>
						<param name="focusable" value="false"/>
					</params>
					<bind name="name" value="'buttonCarouselLeft'"/>
					<bind name="enabled" value="CollectionCarouselCanScrollLeft"/>
					<bind name="dispatch" value="'buttonClick'; 'collectionCarousel.scrollOneUnitLeft'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
				</block>
			</block>
			<block>
				<bind name="event" value="'collectionCarousel.scrollOneUnitLeft'; scrollLeftByOneUnit"/>
				<bind name="event" value="'collectionCarousel.scrollOneUnitRight'; scrollRightByOneUnit"/>
				<bind name="controller" value="'lesta.unbound.controls.UbCarouselController'"/>
				<bind name="scrollController" value="'CollectionCarousel'; 150; 1"/>
				<style>
					<marginLeft value="24px"/>
					<marginRight value="24px"/>
					<width value="1280:860,1920:1360aw"/>
					<backgroundColor value="0x01000000"/>
					<overflow value="scroll"/>
					<scrollArea value="ModernScrollAreaHorizontal"/>
					<scrollbarController value="lesta.unbound.style.UbScrollingControllerCarousel"/>
					<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
					<wheelScrollSpeed value="120"/>
					<itemWidth value="120px"/>
					<itemHeight value="144px"/>
					<generatorOffsetLeft value="240"/>
					<generatorOffsetRight value="240"/>
				</style>
				<bind name="generatorDH" value="CC.collectionAlbum; 'CollectionCarouselItem'; 'validAlbums.sortedAlbums'; {	_selectedAlbumID: _selectedAlbumID }"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<marginTop value="52px"/>
				</style>
				<block className="button_slide_right" type="native">
					<params>
						<param name="focusable" value="false"/>
					</params>
					<bind name="name" value="'buttonCarouselRight'"/>
					<bind name="enabled" value="CollectionCarouselCanScrollRight"/>
					<bind name="dispatch" value="'buttonClick'; 'collectionCarousel.scrollOneUnitRight'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CollectionCarouselItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'collectionEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'id';					['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.id"/>
		<bind name="watchDH" value="'name';					['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.name"/>
		<bind name="watchDH" value="'comingSoon';			['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.comingSoon"/>
		<bind name="watchDH" value="'inSubscription';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.inSubscription"/>
		<bind name="watchDH" value="'subscriptionEnable';	['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.subscriptionEnable"/>
		<bind name="watchDH" value="'isFull';				['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isFull"/>
		<bind name="watch" value="'isActive'; ((subscriptionEnable &amp;&amp; inSubscription) || !(subscriptionEnable) || isFull) &amp;&amp; !comingSoon"/>
		<bind name="watch" value="'isSelected'; id == _selectedAlbumID"/>
		<bind name="watch" value="'isCollected'; isFull &amp;&amp; isActive"/>
		<block>
			<style>
				<width value="120px"/>
				<height value="120px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="soundSet" value="comingSoon ? '' : 'button_collection_key'"/>
			<bind name="watch" value="'collectionNameQuotes'; comingSoon ? '' : (tr('IDS_' +  toUpperCase(name) + '_QUOTES'))"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: comingSoon 	? 'IDS_TOOLTIP_LEVEL_COMING_SOON'
																	: subst('IDS_COLLECTION_NAME_NO_ENTER', [], { _collectionName: collectionNameQuotes } )}"/>
			<bind name="action" value="'click'; comingSoon ? null : 'goToReward'; {	type: 'Lootbox', subtype: name, subAlbum: -1 }"/>
			<bind name="var" value="{	baseAlpha: 0.7,
						alphaModifier: 0.3}"/>
			<bind name="watch" value="'activeState'; rollOver ? baseAlpha + alphaModifier : baseAlpha"/>
			<bind name="watch" value="'inactiveState'; rollOver ? baseAlpha : baseAlpha - alphaModifier"/>
			<bind name="watch" value="'collectedState'; rollOver ? activeState + alphaModifier : baseAlpha + alphaModifier"/>
			<bind name="alpha" value="	isSelected || comingSoon	? 1 :
						isActive &amp;&amp; !isFull			? activeState :
						!isActive					? inactiveState :
						isCollected					? collectedState
													: activeState"/>
			<block>
				<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
				<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
				<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
				<bind name="colorTransform" value="	isActive &amp;&amp; ct_mouseDown &amp;&amp; !isSelected	? ctMouseDown :
							isActive &amp;&amp; (ct_rollOver || isSelected)	? ctRollOver
																		: {}"/>
				<block>
					<bind name="visible" value="!comingSoon"/>
					<bind name="colorTransform" value="isFull ? {redOffset:0,greenOffset:-41,blueOffset:-153} : {}"/>
					<style>
						<width value="120px"/>
						<height value="120px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../collections/collection_icons/small/' + name + '.png'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="comingSoon"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<width value="48px"/>
					<height value="48px"/>
					<alpha value="0.4"/>
					<backgroundImage value="url:../service_kit/icons/icon_lock.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="watchDH" value="'newCardsCounter';['collectionEntity.newItem.evCountChanged']; collectionEntity.newItem.count"/>
			<bind name="fade" value="!comingSoon &amp;&amp; newCardsCounter &gt; 0; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<top value="0px"/>
			</style>
			<bind name="instance" value="'MarkerNewCounter'; comingSoon ? null : { _newContentCounter: newCardsCounter }"/>
		</block>
		<block>
			<bind name="fade" value="isSelected; 0.07; {alpha: 0, scaleY: 0, top: 11}; {alpha: 1, scaleY: 1, top: 0}"/>
			<style>
				<position value="absolute"/>
				<bottom value="-24px"/>
				<left value="9px"/>
				<width value="102px"/>
				<height value="11px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/carousel_pointer_toggle.png"/>
				<backgroundSize value="fill"/>
			</style>
		</block>
	</block>
	<block className="PuzzleCollectionRepeat">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; _collectionID"/>
		<bind name="watchDH" value="'cardsCollection';	['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.cards"/>
		<bind name="watchDH" value="'isFull';			['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isFull"/>
		<bind name="watchDH" value="'name';				['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.name"/>
		<bind name="watchDH" value="'unPastedCardIndex';	['collectionEntity.collectionAlbum.evUnPastedCardIndexChanged']; collectionEntity.collectionAlbum.unPastedCardIndex"/>
		<bind name="handleEventDH" value="	'collectionEntity.collectionAlbum.evUnPastedCardIndexChanged'; 'puzzlePasted';
							{}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'puzzlePasted'; unPastedCardIndex == 0 &amp;&amp; isFull ? 'startCompleteAnimation' : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'startCompleteAnimation'; 'showFullPuzzleImage'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.27"/>
		<bind name="dispatch" value="'showFullPuzzleImage'; 'finishCompleteAnimation'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.07"/>
		<bind name="var" value="{isAnimation: false}"/>
		<bind name="catch" value="'startCompleteAnimation';	{isAnimation: true}"/>
		<bind name="catch" value="'showFullPuzzleImage';	{isAnimation: false}"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'minimalResolution';	stageWidth &lt; 1400"/>
		<bind name="watch" value="'smallResolution';		stageWidth &lt; 1500 || stageHeight &lt; 750"/>
		<bind name="watch" value="'originalResolution';	stageWidth &lt; 1650 || stageHeight &lt; 800"/>
		<bind name="watch" value="'scales';	minimalResolution	? 0.78 :
							smallResolution		? 0.9 :
							originalResolution	? 1
												: 1.1"/>
		<bind name="soundOn" value="'startCompleteAnimation'; 'puzzle_complete'; 'collection_item_complete'"/>
		<bind name="watch" value="'isFullPuzzleVisible'; isFull &amp;&amp; unPastedCardIndex == 0 &amp;&amp; !isAnimation"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<style>
				<width value="824px"/>
				<height value="504px"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'left'; -824*scales/2 + 'px'"/>
			<bind name="scaleX" value="scales"/>
			<bind name="scaleY" value="scales"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="style" value="'backgroundImage'; 'url:../bg/puzzle_collection/' + name + '_bg.jpg'"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<margin value="12px"/>
				</style>
				<block>
					<bind name="visible" value="!isFullPuzzleVisible"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<flow value="htile"/>
					</style>
					<bind name="repeat" value="isFullPuzzleVisible ? 0 : cardsCollection; 'PuzzleItem'; {_isSceneReadyToAnimation: _isSceneReadyToAnimation}"/>
				</block>
				<block>
					<bind name="visible" value="isFullPuzzleVisible"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="style" value="'backgroundImage'; 'url:../bg/puzzle_collection/' + name + '_full.jpg'"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'startCompleteAnimation'; 0.15; 0.1; {alpha: 0}; {alpha: 0.9}"/>
				<bind name="appear" value="'finishCompleteAnimation'; 0.15; 0; {alpha: 0.9}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0xFFFFFFFF"/>
					<alpha value="0"/>
					<hitTest value="false"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PuzzleItem">
		<bind name="primaryEntityDH" value="'collectionCardEntity'; CC.collectionCard; $value"/>
		<bind name="watchDH" value="'isOwned';		['collectionCardEntity.collectionCard.evOwn'];		collectionCardEntity.collectionCard.isOwned"/>
		<bind name="watchDH" value="'name';			['collectionCardEntity.collectionCard.evUpdate'];	collectionCardEntity.collectionCard.name"/>
		<bind name="watchDH" value="'collectionId';	['collectionCardEntity.collectionCard.evUpdate'];	collectionCardEntity.collectionCard.collectionId"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; collectionId"/>
		<bind name="watchDH" value="'unPastedCardIndex';	['collectionEntity.collectionAlbum.evUnPastedCardIndexChanged']; collectionEntity.collectionAlbum.unPastedCardIndex"/>
		<bind name="watch" value="'isCurrentAnimateCard'; unPastedCardIndex == $value"/>
		<bind name="watch" value="'isNew'; collectionCardEntity.newItem"/>
		<bind name="var" value="{isAnimated: false}"/>
		<bind name="watch" value="'isStartAnimation'; isCurrentAnimateCard &amp;&amp; _isSceneReadyToAnimation"/>
		<bind name="changeDispatch" value="isStartAnimation; 'evShowNewOwnedCard'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="catch" value="'evShowNewOwnedCard'; {isAnimated: true}"/>
		<bind name="dispatch" value="'evShowNewOwnedCard'; 'evMakeSeen'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.1"/>
		<bind name="action" value="'evMakeSeen'; 'makeSeen'; {entityId: collectionCardEntity.id}"/>
		<bind name="soundOn" value="'evShowNewOwnedCard'; 'puzzle_paste'; 'collection_item_paste'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 0.5,
			redOffset: 255,
			greenOffset: 255,
			blueOffset: 255,
			alphaOffset: 1
		},
		ctOwned: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 0,
			greenOffset: 0,
			blueOffset: 0,
			alphaOffset: 1
		},
		ctNotOwned: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 0,
			redOffset: 0,
			greenOffset: 0,
			blueOffset: 0,
			alphaOffset: 0
		}
	}"/>
		<style>
			<width value="102px"/>
			<height value="102px"/>
			<margin value="-11px"/>
		</style>
		<block>
			<bind name="visible" value="!isNew &amp;&amp; !isAnimated"/>
			<style>
				<width value="102px"/>
				<height value="102px"/>
				<backgroundSize value="cover"/>
				<hitTest value="false"/>
			</style>
			<bind name="colorTransform" value="	isOwned		? ctOwned :
								rollOver	? ctRollOver
											: ctNotOwned"/>
			<bind name="style" value="'backgroundImage'; 'url:../collections/object_icons/small/' + name + '.png'"/>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<bind name="soundSet" value="isOwned ? '' : 'button_collection_item'"/>
			<bind name="request" value="'click'; isOwned ? null : 'buyObjectWindow'; {objID: $value}"/>
			<bind name="tooltip" value="'CollectionCardItemTooltip'; {_objID: $value}"/>
			<styleClass value="$MiddleVHAbsolutely"/>
			<style>
				<width value="80px"/>
				<height value="80px"/>
				<backgroundColor value="0x01000000"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'evShowNewOwnedCard'; 0.2; 0; {alpha: 0, scaleX: 1.3, scaleY: 1.3}; {alpha: 1, scaleX: 1, scaleY: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="isNew || isAnimated"/>
			<styleClass value="$MiddleVHAbsolutely"/>
			<style>
				<alpha value="0"/>
				<hitTest value="false"/>
			</style>
			<block>
				<styleClass value="$MiddleVHAbsolutely"/>
				<style>
					<width value="102px"/>
					<height value="102px"/>
				</style>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<backgroundSize value="cover"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../collections/object_icons/small/' + name + '.png'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="CardsCollectionRepeat">
		<bind name="stageSize"/>
		<bind name="watch" value="'smallResolution';		(stageWidth &lt;= 1300) || (stageHeight &lt; 960)"/>
		<bind name="watch" value="'mediumResolution';	(stageWidth &gt; 1300) &amp;&amp; (stageWidth &lt; 1700) &amp;&amp; (stageHeight &gt;= 960)"/>
		<bind name="watch" value="'normalResolution';	(stageWidth &gt; 1700) &amp;&amp; (stageHeight &gt;= 960)"/>
		<bind name="watch" value="'isBigCards'; _currentCollectionCards.length &lt;= 6"/>
		<bind name="watch" value="'cardMargins';		smallResolution		? isBigCards 	? '12px' : '10px' :
									mediumResolution 	? isBigCards 	? '16px' : '12px' :
									normalResolution 	? isBigCards 	? '20px' : '16px'
														: isBigCards 	? '20px'
																		: '20px'"/>
		<bind name="watch" value="'cardSize'; 	smallResolution		? isBigCards	? '170px' : '80px' :
								mediumResolution 	? isBigCards	? '180px' : '90px' :
								normalResolution 	? isBigCards	? '220px': '100px'
													: isBigCards	? '220px'
																	: '120px'"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="htile"/>
			<align value="center"/>
		</style>
		<bind name="style" value="'width';	_currentCollectionCards.length &lt;= 4	?	smallResolution		? '388px' :
																	mediumResolution	? '440px' 
																						: '560px'
																:
							_currentCollectionCards.length &lt;= 6	?	smallResolution		? '582px' :
																	mediumResolution	? '660px' 
																						: '840px'
																: '1280:650,1920:1060aw' "/>
		<bind name="repeat" value="_currentCollectionCards; 'CollectionCardItem';	{	_collectionPageID: _collectionPageID,
																		_resolutionGrade: resolutionGrade,
																		_isSceneReadyToAnimation: _isSceneReadyToAnimation,
																		_cardMargins: cardMargins,
																		_cardSize: cardSize
																	}"/>
	</block>
	<block className="CollectionCardItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'collectionCardEntity'; CC.collectionCard; $value"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; collectionId"/>
		<bind name="entityDH" value="'subCollectionEntity'; _collectionPageID"/>
		<bind name="watchDH" value="'name';						['collectionCardEntity.collectionCard.evUpdate']; collectionCardEntity.collectionCard.name"/>
		<bind name="watchDH" value="'collectionId';				['collectionCardEntity.collectionCard.evUpdate']; collectionCardEntity.collectionCard.collectionId"/>
		<bind name="watchDH" value="'isOwned';					['collectionCardEntity.collectionCard.evOwn']; collectionCardEntity.collectionCard.isOwned"/>
		<bind name="watchDH" value="'unPastedCardIndex';			['collectionEntity.collectionAlbum.evUnPastedCardIndexChanged']; collectionEntity.collectionAlbum.unPastedCardIndex"/>
		<bind name="watchDH" value="'congratulationShown';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.congratulationShown"/>
		<bind name="watchDH" value="'unPastedCardIndexSubColl';	['subCollectionEntity.collectionSubAlbum.evUnPastedCardIndexChanged']; subCollectionEntity.collectionSubAlbum.unPastedCardIndex"/>
		<bind name="watchDH" value="'cardsSubCollection';		['subCollectionEntity.collectionSubAlbum.evUpdate']; subCollectionEntity.collectionSubAlbum.cards"/>
		<bind name="watch" value="'isCurrentAnimateCard'; unPastedCardIndex == $value || unPastedCardIndexSubColl == $value"/>
		<bind name="watch" value="'isNew'; collectionCardEntity.newItem"/>
		<bind name="var" value="{isAnimated: false}"/>
		<bind name="watch" value="'isStartAnimation'; isCurrentAnimateCard &amp;&amp; _isSceneReadyToAnimation"/>
		<bind name="changeDispatch" value="isStartAnimation; 'evShowNewOwnedCard'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; true"/>
		<bind name="catch" value="'evShowNewOwnedCard'; {isAnimated: true}"/>
		<bind name="dispatch" value="'evShowNewOwnedCard'; 'evMakeSeen'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; 0.1"/>
		<bind name="action" value="'evMakeSeen'; 'makeSeen'; {entityId: collectionCardEntity.id}"/>
		<bind name="soundOn" value="'evShowNewOwnedCard'; 'item_paste'; 'collection_item_paste'"/>
		<bind name="name" value="!isNew ? 'card_pasted_' + name : 'card_' + name"/>
		<bind name="soundSet" value="'button_collection_item'"/>
		<bind name="request" value="'click'; isOwned	? !isNew	? 'showPreviewWindow' 
												: null
									: 'buyObjectWindow'; { objID: $value }"/>
		<bind name="tooltip" value="'CollectionCardItemTooltip'; { _objID: $value }"/>
		<bind name="style" value="'width';  _cardSize"/>
		<bind name="style" value="'height'; _cardSize"/>
		<bind name="style" value="'marginTop';		_cardMargins"/>
		<bind name="style" value="'marginBottom';	_cardMargins"/>
		<bind name="style" value="'marginLeft';		_cardMargins"/>
		<bind name="style" value="'marginRight';		_cardMargins"/>
		<block>
			<bind name="visible" value="!isOwned"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../collections/object_icons/small/' + name + '_des.png'"/>
		</block>
		<block>
			<bind name="visible" value="isOwned &amp;&amp; !isNew &amp;&amp; !isAnimated"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../collections/object_icons/small/' + name + '.png'"/>
		</block>
		<block>
			<bind name="appear" value="'evShowNewOwnedCard'; 0.2; 0; {alpha: 0, scaleX: 1.3, scaleY: 1.3}; {alpha: 1, scaleX: 1, scaleY: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="isNew || isAnimated"/>
			<styleClass value="$MiddleVHAbsolutely"/>
			<style>
				<alpha value="0"/>
			</style>
			<block>
				<styleClass value="$MiddleVHAbsolutely"/>
				<bind name="style" value="'width'; _cardSize"/>
				<bind name="style" value="'height'; _cardSize"/>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<backgroundSize value="cover"/>
						<hitTest value="false"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../collections/object_icons/small/' + name + '.png'"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="transition" value="rollOver; 0.1; {alpha: 0}; {alpha: 0.1}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../collections/object_icons/small/' + name + '_over.png'"/>
		</block>
	</block>
	<block className="CollectionDescription">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; _collectionID"/>
		<bind name="entityDH" value="'subCollectionEntity'; subAlbums"/>
		<bind name="watchDH" value="'subAlbums';		[]; collectionEntity.collectionAlbum.subAlbums"/>
		<bind name="watchDH" value="'name';			[]; collectionEntity.collectionAlbum.name"/>
		<bind name="watchDH" value="'duplicates';	['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.duplicates"/>
		<bind name="watch" value="'collectionName'; tr('IDS_' + toUpperCase(name))"/>
		<bind name="watchDH" value="'isFull';				['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isFull"/>
		<bind name="watchDH" value="'subscriptionEnable';	['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.subscriptionEnable"/>
		<bind name="watchDH" value="'inSubscription';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.inSubscription"/>
		<bind name="watchDH" value="'isInArmory';			['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isInArmory"/>
		<bind name="watch" value="'switchTooltipDescription'; inSubscription ? 'IDS_COLLECTION_COLLECTING_TOOLTIP_DESCRIPTION' 
															: 'IDS_COLLECTION_NOT_COLLECTING_TOOLTIP_DESCRIPTION'"/>
		<bind name="watch" value="'switchAction'; inSubscription ? 'CollectionProxy.stopAlbumSubscription' : 'CollectionProxy.changeAlbumSubscription'"/>
		<bind name="watch" value="'switchActionParams'; inSubscription ? {} : { albumID: _selectedAlbumID }"/>
		<bind name="watch" value="'receiveCollectionDescription'; 	subscriptionEnable	? 'IDS_COLLECTION_RECEIVE_IN_DAILY_REWARDS' :
													isInArmory			? 'IDS_COLLECTION_RECEIVE_IN_ARMORY_BUNDLES'
																		: 'IDS_COLLECTION_DISCONTINUED_CANNOT_RECEIVE'"/>
		<bind name="stageSize"/>
		<styleClass value="$Fullsize"/>
		<block type="text">
			<styleClass value="$TextDefaultBold25NM"/>
			<style>
				<maxWidth value="320"/>
				<leading value="-4"/>
				<marginBottom value="16px"/>
				<marginTop value="720:0,1080:48ah"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="collectionName"/>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'cts_'"/>
			<bind name="var" value="{ 
		ctsMouseUp: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 0.7,
			redOffset: 0,
			greenOffset: 0,
			blueOffset: 0,
			alphaOffset: 0
		}
	}"/>
			<bind name="var" value="{ 
		ctsMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 0.5,
			redOffset: 0,
			greenOffset: 0,
			blueOffset: 0,
			alphaOffset: 0
		}
	}"/>
			<bind name="colorTransform" value="	true &amp;&amp; cts_mouseDown &amp;&amp; !false	? ctsMouseDown :
							true &amp;&amp; (cts_rollOver || false)	? {}
																		: ctsMouseUp"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
				<align value="middle"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip';	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
													_text: 'IDS_COLLECTION_DESCRIPRION_BUTTON_TOOLTIP'}"/>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<leading value="-4"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_COLLECTION_DESCRIPRION_BUTTON"/>
			</block>
			<block>
				<style>
					<width value="22px"/>
					<height value="22px"/>
					<marginLeft value="8px"/>
					<backgroundImage value="url:../service_kit/buttons/info_tab_new.png"/>
				</style>
			</block>
			<bind name="request" value="'click'; 'openCollectionDescriptionWindow'; {collectionID: _collectionID, isComplete: false}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block type="text">
			<bind name="visible" value="!isFull"/>
			<styleClass value="$TextDefault17NM"/>
			<style>
				<width value="100%"/>
				<maxWidth value="320"/>
				<leading value="-4"/>
				<marginBottom value="24px"/>
				<alpha value="0.75"/>
			</style>
			<bind name="text" value="receiveCollectionDescription"/>
		</block>
		<block>
			<style>
				<marginBottom value="24px"/>
			</style>
			<bind name="visible" value="!isFull &amp;&amp; (subscriptionEnable || isInArmory)"/>
			<block>
				<bind name="visible" value="subscriptionEnable"/>
				<bind name="tooltip" value="'HeaderDescriptionInstructionTooltip'; {	_headerText: 'IDS_COLLECTION_COLLECTING_TOOLTIP_HEADER',
																	_descriptionText: switchTooltipDescription }"/>
				<bind name="instance" value="'SwitchWithLeftLabel';	{	_state: inSubscription,
														_label: 'IDS_COLLECTION_START_COLLECTING_SWITCH',
														_enabled: !operationsAccountLocked,
														_action: switchAction,
														_actionParams: switchActionParams,
														_textClass: '$TextDefault17NM' }"/>
			</block>
			<block>
				<bind name="visible" value="!subscriptionEnable &amp;&amp; isInArmory"/>
				<style>
					<width value="210px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '210px',
												_name: 'buttonArmoryLink',
												_enabled: isInArmory,
												_request: 'showMetashopCollectionWindow',
												_requestParams: { collectionId: _collectionID },
												_label: 'IDS_COLLECTION_TOP_UP_COLLECTION_UPPER'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
			</style>
			<bind name="instance" value="'CollectionRewardAndProgress'; { _collectionID: _collectionID }"/>
		</block>
		<block>
			<bind name="appear" value="'_collectionPageID' + varChanged; 0.15; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="visible" value="subAlbums.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="16px"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'SubCollectionReward'; { _collectionID: _collectionID, _collectionPageID: _collectionPageID }"/>
			</block>
		</block>
	</block>
	<block className="CollectionRewardAndProgress">
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; _collectionID"/>
		<bind name="watchDH" value="'rewards';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.rewards"/>
		<bind name="watchDH" value="'rewardCategory';['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.rewardCategory"/>
		<bind name="watchDH" value="'duplicates';	['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.duplicates"/>
		<bind name="watchDH" value="'ownCards';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.ownCards"/>
		<bind name="watchDH" value="'cards';			['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.cards"/>
		<bind name="watchDH" value="'isFull';		['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.isFull"/>
		<bind name="watch" value="'actualRewardCategory'; rewardCategory != SC.Sse.SSE_REWARD_CATEGORY.NONE	? rewardCategory 
																							: SC.Sse.SSE_REWARD_CATEGORY.OTHER"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_COLLECTION_CARDS_AMOUNT_COLON"/>
				</block>
				<block>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold17NM',
															_curValue: ownCards.length,
															_curValueTooltipText: 'IDS_COLLECTION_PLAYER_POINTS_COUNTER',
															_maxValue: cards.length,
															_maxValueTooltipText: 'IDS_COLLECTION_TOTAL_POINTS_COUNTER'}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="tooltip" value="'HeaderDescriptionInstructionTooltip'; { _headerText: 'IDS_COLLECTION_DUPLICATES_TOOLTIP_HEADER',
																	_descriptionText: 'IDS_COLLECTION_DUPLICATES_TOOLTIP_DESCRIPTION' }"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_COLLECTION_DUPLICATES_IN_COLLECTION_COLON"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefaultBold17NM"/>
					<style>
						<marginLeft value="4px"/>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="duplicates"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'CollectionRewardTooltip'; { _rewards: rewards,
													_tooltipHeader: 'IDS_REWARD_FOR_COLLECTION',
													_unifiedStatus: isFull ? SC.Ui_styles.UNIFIED_STATUS.CHECK : SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
													_isRewardClaimed: isFull}"/>
			<style>
				<marginLeft value="8px"/>
				<marginRight value="8px"/>
			</style>
			<block>
				<bind name="instance" value="'RewardCategory'; rewardCategory	? { _rewardCategory: actualRewardCategory, _isReceived: isFull }
																: null"/>
			</block>
		</block>
	</block>
	<block className="SubCollectionReward">
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; _collectionID"/>
		<bind name="entityDH" value="'subCollectionEntity'; _collectionPageID"/>
		<bind name="watchDH" value="'cards';			['collectionEntity.collectionAlbum.evUpdate']; subCollectionEntity.collectionSubAlbum.cards"/>
		<bind name="watchDH" value="'ownCards';		['collectionEntity.collectionAlbum.evUpdate']; subCollectionEntity.collectionSubAlbum.ownCards"/>
		<bind name="watchDH" value="'name';			[]; subCollectionEntity.collectionSubAlbum.name"/>
		<bind name="watchDH" value="'rewards';		[]; subCollectionEntity.collectionSubAlbum.rewards"/>
		<bind name="watchDH" value="'rewardCategory';[]; subCollectionEntity.collectionSubAlbum.rewardCategory"/>
		<bind name="watch" value="'actualRewardCategory'; rewardCategory != SC.Sse.SSE_REWARD_CATEGORY.NONE	? rewardCategory 
																							: SC.Sse.SSE_REWARD_CATEGORY.OTHER"/>
		<bind name="watch" value="'isFull'; ownCards.length == cards.length"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<style>
					<width value="100%"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="name"/>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'CollectionRewardTooltip'; { _rewards: rewards,
													_tooltipHeader: 'IDS_REWARD_FOR_SUBCOLLECTION',
													_unifiedStatus: isFull ? SC.Ui_styles.UNIFIED_STATUS.CHECK : SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
													_isRewardClaimed: isFull}"/>
			<style>
				<marginLeft value="8px"/>
				<marginRight value="8px"/>
			</style>
			<block>
				<bind name="instance" value="'RewardCategory'; { _rewardCategory: actualRewardCategory, _isReceived: isFull }"/>
			</block>
		</block>
	</block>
	<block className="RadioButtonControl">
		<bind name="dataRefDH" value="'collectionPageButtonID'; '$dataRef.ref'"/>
		<bind name="entityDH" value="'subCollectionEntity'; collectionPageButtonID"/>
		<bind name="watchDH" value="'albumId'; ['subCollectionEntity.collectionSubAlbum.evUpdate']; subCollectionEntity.collectionSubAlbum.albumID"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; albumId"/>
		<bind name="watchDH" value="'albumName'; ['collectionEntity.collectionAlbum.evUpdate']; collectionEntity.collectionAlbum.name"/>
		<bind name="action" value="'click'; 'goToReward'; {type: 'Lootbox', subtype: albumName, subAlbum: $index}"/>
		<style>
			<marginLeft value="12px"/>
			<marginRight value="12px"/>
		</style>
		<block className="radiobutton_notext_big" type="native">
			<bind name="selected" value="collectionPageButtonID == _collectionPageID"/>
		</block>
		<block>
			<bind name="watchDH" value="'newCardsCounter'; ['subCollectionEntity.newItem.evCountChanged']; subCollectionEntity.newItem.count"/>
			<bind name="fade" value="newCardsCounter &gt; 0; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
			<style>
				<position value="absolute"/>
				<right value="-12px"/>
				<top value="-8px"/>
			</style>
			<bind name="instance" value="'MarkerNewCounter'; { _newContentCounter: newCardsCounter }"/>
		</block>
	</block>
	<block className="CollectionCardItemTooltip">
		<bind name="primaryEntityDH" value="'collectionCardEntity'; CC.collectionCard; _objID"/>
		<bind name="watchDH" value="'name';			[]; collectionCardEntity.collectionCard.name"/>
		<bind name="watchDH" value="'collectionId';	[]; collectionCardEntity.collectionCard.collectionId"/>
		<bind name="watchDH" value="'collectionName';[]; collectionCardEntity.collectionCard.collectionName"/>
		<bind name="watchDH" value="'isOwned';		['collectionCardEntity.collectionCard.evOwn']; collectionCardEntity.collectionCard.isOwned"/>
		<bind name="primaryEntityDH" value="'collectionEntity'; CC.collectionAlbum; collectionId"/>
		<bind name="watchDH" value="'isPuzzle';		['collectionEntity.collectionAlbum.evUpdate'];	collectionEntity.collectionAlbum.isPuzzle"/>
		<bind name="watchDH" value="'cardCost';		[]; 											collectionEntity.collectionAlbum.cardCost"/>
		<bind name="watch" value="'headerText';	isPuzzle	?	'IDS_PUZZLE_COLLECTION_OWNED_TOOLTIP_HEADER'
									 		:	tr('IDS_' + toUpperCase(name))"/>
		<bind name="watch" value="'cardCostText'; subst('IDS_COLLECTION_ITEM_TOOLTIP_DUPLICATE_PRICE_COLON', [], { amount: cardCost } )"/>
		<bind name="watch" value="'subheaderText'; subst('IDS_COLLECTION_NAME', [], { _collectionName: tr('IDS_' + toUpperCase(collectionName) + '_QUOTES' ) } )"/>
		<bind name="watch" value="'imagePath'; !isOwned &amp;&amp; isPuzzle	? 'url:../bg/puzzle_collection/default_puzzle_card.png'
													: 'url:../collections/object_icons/small/' + name + '.png'"/>
		<bind name="watch" value="'statusLineData'; isOwned 	? { _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK, _text: 'IDS_COLLECTION_ITEM_TOOLTIP_ACHIEVED' }
											: { _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.LOCK, _text: 'IDS_COLLECTION_ITEM_TOOLTIP_NOT_ACHIEVED' }"/>
		<bind name="watch" value="'mouseInstructionData';	!isOwned	? { _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT, _text: 'IDS_BUY_COLLECTION_FOR_DUPLICATE' } :
											!isPuzzle	? { _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT, _text: 'IDS_GO_TO_OBJECT_SCREEN' }
														: null"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="380px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText';	{	_headerText: headerText,
																	_subheaderText: subheaderText,
																	_unifiedStatus: isOwned ? SC.Ui_styles.UNIFIED_STATUS.CHECK : null,
																	_imageWidth: '120px',
																	_imageHeight: '120px',
																	_imageUrl: imagePath
																}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!isOwned"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; !isOwned ? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT, 
																_text:cardCostText}
															: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; statusLineData"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="mouseInstructionData"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; mouseInstructionData"/>
			</block>
		</block>
	</block>
	<block className="CollectionRewardTooltip">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: _tooltipHeader,
																_unifiedStatus: _unifiedStatus }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="_isRewardClaimed"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; _isRewardClaimed	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
																		_text: 'IDS_TOOLTIP_REWARD_TAKEN' }
																	: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="_rewards.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; { _rewards: _rewards }"/>
			</block>
		</block>
	</block>

	<!-- player_profile_ranks -->
	<block className="PlayerRanks">
		<bind name="lag" value="'lagAfterAddedToStage'"/>
		<bind name="catch" value="'lagAfterAddedToStage'; {isEndOfLag: true}"/>
		<bind name="transition" value="isEndOfLag; 0.1; {alpha: 0}; {alpha: 1}"/>
		<bind name="primaryEntityDH" value="'featureEntity_16'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[16]"/>
		<bind name="watchDH" value="'feature_16'; ['featureEntity_16.accountFeature.evStateChanged']; featureEntity_16.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_16"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 16}"/>
		<bind name="action" value="'addedToStage'; featureState == 'new' ? 'featureSeen' : null; {featureIndex: 16}"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason;"/>
		<bind name="watchDH" value="'seasonTitle';			['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.title"/>
		<bind name="watchDH" value="'hasNextSeason';			['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.hasNextSeason"/>
		<bind name="watchDH" value="'rankSeasonStartTime';	['rankSeasonEntity.timeOfBattleEvent.evChanged']; rankSeasonEntity.timeOfBattleEvent.startTime"/>
		<bind name="watchDH" value="'rankSeasonFinishTime';	['rankSeasonEntity.timeOfBattleEvent.evChanged']; rankSeasonEntity.timeOfBattleEvent.finishTime"/>
		<bind name="watchDH" value="'rankSeasonStage'; ['rankSeasonEntity.rankSeason.evStageChanged']; rankSeasonEntity.rankSeason.stage"/>
		<bind name="watch" value="'isRankSeasonActive';		rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.ACTIVE"/>
		<bind name="watch" value="'isRankSeasonInactive';	rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.INACTIVE"/>
		<bind name="watch" value="'isRankSeasonFinished';	rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.FINISHED || rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.CLOSED"/>
		<bind name="watch" value="'isRankSeasonWaiting';		rankSeasonStage == SC.Common.SEASON_BATTLES_STAGES.WAITING"/>
		<bind name="watchDH" value="'primeTimeStartTime';	['rankSeasonEntity.primeTime.evChanged']; rankSeasonEntity.primeTime.primeTimeStartTime"/>
		<bind name="watchDH" value="'primeTimeFinishTime';	['rankSeasonEntity.primeTime.evChanged']; rankSeasonEntity.primeTime.primeTimeFinishTime"/>
		<bind name="watchDH" value="'daylightshift';			['rankSeasonEntity.primeTime.evChanged']; rankSeasonEntity.primeTime.daylightshift"/>
		<bind name="timeFormat" value="primeTimeStartTime - daylightshift; 'hh:mm'; 'localStartTime'; true"/>
		<bind name="timeFormat" value="primeTimeFinishTime - daylightshift; 'hh:mm'; 'localFinishTime'; true"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeftToStart'; primeTimeStartTime - serverTime - daylightshift"/>
		<bind name="watch" value="'timeLeftToFinish'; primeTimeFinishTime - serverTime - daylightshift"/>
		<bind name="watchDH" value="'currentSprintId';	['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.currentSprintId"/>
		<bind name="watchDH" value="'previousSprintId';	['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.previousSprintId"/>
		<bind name="watchDH" value="'nextSprintId';		['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.nextSprintId"/>
		<bind name="primaryEntityDH" value="'currentRankSprintEntity'; CC.rankSprint; currentSprintId"/>
		<bind name="watch" value="'isActiveSprint'; currentSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT"/>
		<bind name="watch" value="'hasNextSprint'; nextSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT"/>
		<bind name="watch" value="'hasPreviousSprint'; previousSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT"/>
		<bind name="watchDH" value="'currentSprintStartTime'; []; currentRankSprintEntity.rankSprint.startTime"/>
		<bind name="watchDH" value="'currentSprintFinishTime'; []; currentRankSprintEntity.rankSprint.finishTime"/>
		<bind name="watch" value="'isSprintFinished'; !isActiveSprint &amp;&amp; hasNextSprint"/>
		<bind name="primaryEntityDH" value="'nextSprintEntity'; CC.rankSprint; nextSprintId"/>
		<bind name="watchDH" value="'nextSprintStartTime'; []; nextSprintEntity.rankSprint.startTime"/>
		<bind name="watch" value="'sprintTimeStatusData';	isActiveSprint	? {	_timeLeftTimeStamp: currentSprintFinishTime,
																_substTextIDS: 'IDS_RANKS_TILL_END'	} :
											hasNextSprint	? {	_timeLeftTimeStamp: nextSprintStartTime,
																_substTextIDS: 'IDS_RANKS_TILL_START'	}
															: null"/>
		<bind name="watch" value="'seasonTimeStatusData';	isRankSeasonActive	? {	_timeLeftTimeStamp: rankSeasonFinishTime,
																	_substTextIDS: 'IDS_RANKS_TILL_END'	}
																: {	_timeLeftTimeStamp: rankSeasonStartTime,
																	_substTextIDS: 'IDS_RANKS_TILL_START'	}"/>
		<bind name="var" value="{	WAIT_FOR_ANNOUNCEMENT:	'WAIT_FOR_ANNOUNCEMENT',
					SEASON_ANNOUNCEMENT:	'SEASON_ANNOUNCEMENT',
					SPRINT_ANNOUNCEMENT:	'SPRINT_ANNOUNCEMENT',
					PRIME_TIME_ACTIVE:		'PRIME_TIME_ACTIVE',
					PRIME_TIME_INACTIVE:	'PRIME_TIME_INACTIVE'	}"/>
		<bind name="watch" value="'periodStatus';	isRankSeasonFinished ||
									(!isActiveSprint &amp;&amp; !hasNextSprint)							? WAIT_FOR_ANNOUNCEMENT :
									isRankSeasonInactive || isRankSeasonWaiting					? SEASON_ANNOUNCEMENT :
									isQualificationPassed &amp;&amp; hasNextSprint || isSprintFinished	? SPRINT_ANNOUNCEMENT :
									timeLeftToStart &gt; 0											? PRIME_TIME_INACTIVE :
									timeLeftToFinish &gt; 0										? PRIME_TIME_ACTIVE
																								: WAIT_FOR_ANNOUNCEMENT"/>
		<bind name="watch" value="'rankStatusLineTimeStamp'; {	WAIT_FOR_ANNOUNCEMENT:	0,
												SEASON_ANNOUNCEMENT:	rankSeasonStartTime,
												SPRINT_ANNOUNCEMENT:	nextSprintStartTime,
												PRIME_TIME_ACTIVE:		primeTimeFinishTime,
												PRIME_TIME_INACTIVE:	primeTimeStartTime,}"/>
		<bind name="watch" value="'currentTimeStamp'; rankStatusLineTimeStamp[periodStatus]"/>
		<bind name="watch" value="'unifinedStatus'; (currentTimeStamp - serverTime) &gt; 86400	? SC.Ui_styles.UNIFIED_STATUS.DATE
																			: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION"/>
		<bind name="countdown" value="currentTimeStamp; 'formattedCountDown'; 'HIGHEST,WITH_DAYS';"/>
		<bind name="watch" value="'rankStatusLineData'; {
		WAIT_FOR_ANNOUNCEMENT:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_WAIT_FOR_NEXT_RANK_SEASON_ANNOUNCEMENT' },
		SEASON_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_SUBST_NTH_RANKED_SEASON_STARTS_IN', [], {	_seasonId: seasonTitle,
																									_timeTillStart: formattedCountDown }))},
		SPRINT_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_RANKED_SPRINT_STARTS_IN', [], {	_nextSprintId: nextSprintId + 1,
																							_timeLeft: formattedCountDown }))},
		PRIME_TIME_INACTIVE:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_STARTS_IN', [], { _timeLeft: formattedCountDown }))},
		PRIME_TIME_ACTIVE:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_ENDS_IN', [], { _timeLeft: formattedCountDown }))},
		UNDEFINED_PERIOD:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_RANKED_STAGE_UNDEFINED' }	}"/>
		<bind name="watch" value="'rankTitleString'; {
		WAIT_FOR_ANNOUNCEMENT:	subst('IDS_RANKED_BATTLES_SEASON_ENDED', [], { _seasonId: seasonTitle }),
		SEASON_ANNOUNCEMENT:	subst('IDS_RANKED_STATUS_SEASON_ANNOUNCED', [], { _seasonId: seasonTitle }),
		SPRINT_ANNOUNCEMENT:	hasPreviousSprint	? subst('IDS_RANKED_BATTLES_SPRINT_ENDED', [], { _sprintId: previousSprintId + 1 })
													: subst('IDS_RANKED_BATTLES_SPRINT', [], { _sprintId: nextSprintId + 1 }),
		PRIME_TIME_ACTIVE:		subst('IDS_RANKED_BATTLES_SPRINT', [], { _sprintId: currentSprintId + 1 }),
		PRIME_TIME_INACTIVE:	subst('IDS_RANKED_BATTLES_SPRINT', [], { _sprintId: currentSprintId + 1}),
		UNDEFINED_PERIOD:		'IDS_RANKED_STAGE_UNDEFINED'	}"/>
		<bind name="watch" value="'isSprintStatusWarning';	!hasNextSprint"/>
		<bind name="watch" value="'rankedSeasonTooltipData'; {	_headerText: 'IDS_RANKED_SEASON_TOOLTIP_TITLE',
												_tooltipData: [	{	_element: 'TooltipSystemTimeLeftStatusLine',
																	_params: seasonTimeStatusData },
																{	_element: 'TooltipSystemDescriptionText',
																	_params: { _descriptionText: 'IDS_RANKED_SEASON_TOOLTIP_DESC' }	}	]}"/>
		<bind name="watch" value="'rankedSprintTooltipData'; {	_headerText: isSprintStatusWarning	?	'IDS_RANKED_LAST_SPRINT_TOOLTIP_TITLE'
																					:	'IDS_RANKED_SPRINT_TOOLTIP_TITLE',
												_unifiedStatus: isSprintStatusWarning	? SC.Ui_styles.UNIFIED_STATUS.ATTENTION
																						: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
												_tooltipData: [	{	_element: 'TooltipSystemTimeLeftStatusLine',
																	_params: sprintTimeStatusData }, 
																{	_element: 'TooltipSystemDescriptionText',
																	_params: { _descriptionText: 'IDS_RANKED_SPRINT_TOOLTIP_DESC' } }	] }"/>
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.RANKS"/>
		<bind name="watchDH" value="'activeChild'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
		<bind name="watch" value="'isInRanksTab'; activeChild == SC.Ui_windows.ROUTE.RANKS_CAROUSEL"/>
		<bind name="watch" value="'isInRewardsTab'; activeChild == SC.Ui_windows.ROUTE.RANKS_REWARDS"/>
		<bind name="request" value="'addedToStage'; 'showRanksResults'; {}"/>
		<bind name="action" value="'removedFromStage'; 'rankProfileWindowClosed'; {}"/>
		<params>
			<param name="name" value="PlayerProfileRanks"/>
		</params>
		<styleClass value="$Fullsize"/>
		<style>
			<paddingLeft value="188px"/>
			<paddingTop value="720:60,1080:90ah"/>
		</style>
		<block>
			<bind name="visible" value="!rankSeasonEntity"/>
			<bind name="appear" value="'addedToStage'; 0.18; 0 + 0*0.075; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'NoItemsComeBackLater'; { _type: 'RANKED_SEASON' }"/>
		</block>
		<block>
			<bind name="visible" value="rankSeasonEntity"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1280:1000,1920:1480aw"/>
				<marginBottom value="120px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<block className="ProfileRanksMainTabButtons" type="ublock">
					<bind name="build!" value="{ _currentRanksRoute: activeChild }"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="100%f"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="720:16,1080:40ah"/>
						<marginBottom value="720:16,1080:40ah"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<block>
							<bind name="visible" value="(periodStatus != WAIT_FOR_ANNOUNCEMENT) &amp;&amp; (periodStatus != SEASON_ANNOUNCEMENT)"/>
							<bind name="watch" value="'rankedSeasonText'; subst('IDS_RANKED_BATTLES_SEASON', [], { _seasonId: seasonTitle })"/>
							<bind name="tooltip" value="'RankInfoTooltip'; rankedSeasonTooltipData"/>
							<style>
								<position value="absolute"/>
								<backgroundColor value="0x01000000"/>
								<height value="100%f"/>
							</style>
							<block>
								<style>
									<marginRight value="8"/>
									<bottom value="0"/>
								</style>
								<block type="text">
									<styleClass value="$TextDefault17NM"/>
									<style>
										<alpha value="0.9"/>
									</style>
									<bind name="text" value="rankedSeasonText"/>
								</block>
							</block>
							<block>
								<style>
									<top value="6px"/>
								</style>
								<block className="RanksInfoButton">
									<style>
										<width value="22px"/>
										<height value="22px"/>
										<backgroundImage value="url:../service_kit/buttons/info_tab_new.png"/>
									</style>
								</block>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="appear" value="'addedToStage'; 0.18; 0 + 0*0.075; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="watch" value="'seasonTabHeaderData';		{	_headerText:				rankTitleString[periodStatus],
																	_headerInfoButtonParams:	isRankSeasonWaiting	? rankedSeasonTooltipData : null }"/>
							<bind name="watch" value="'sprintTabHeaderData';		{	_headerText: 				rankTitleString[periodStatus],
																	_textColor:					isSprintStatusWarning	? SC.Ui_styles.SERVICE_COLORS.ORANGE
																														: SC.Ui_styles.SERVICE_COLORS.WHITE,
																	_headerInfoButtonParams:	isActiveSprint ? rankedSprintTooltipData : null }"/>
							<bind name="watch" value="'rewardsTabHeaderData';	{	_headerText:				'IDS_RANKED_REWARDS_TITLE',
																	_headerInfoButtonParams: 	{	_headerText: 'IDS_RANKED_REWARDS_TOOLTIP_TITLE',
																									_tooltipData: [	{	_element: 'TooltipSystemDescriptionText',
																														_params: { _descriptionText: 'IDS_RANKED_REWARDS_TOOLTIP_DESC' }	}] }	}"/>
							<style>
								<height value="22px"/>
							</style>
							<styleClass value="$MiddleAligned"/>
							<bind name="instance" value="'HeaderWithInfoButton'; isInRanksTab	? isRankSeasonActive	? sprintTabHeaderData
																										: seasonTabHeaderData
																				: rewardsTabHeaderData"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<style>
								<position value="absolute"/>
								<right value="0"/>
							</style>
							<block className="icon_issued" type="native">
								<bind name="visible" value="seasonTitle == 1"/>
								<style>
									<position value="absolute"/>
									<top value="-30%"/>
									<hitTest value="false"/>
									<alpha value="0.75"/>
								</style>
								<bind name="rotation" value="-4"/>
								<innerBind elementName="item.item" name="text" value="'IDS_SEASON_TITLE_0'"/>
								<bind name="gotoAndStop!" value="'issued'"/>
							</block>
							<block>
								<styleClass value="$MiddleVAligned"/>
								<bind name="instance" value="'DefaultButton'; {	_width: '140px',
																_enabled: true,
																_label: 'IDS_BATTLE_RULES',
																_request: 'showBattleTypeRules',
																_requestParams: {'_rulesType': SC.Common.BATTLE_TYPES.RANKED_BATTLE}}"/>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="watch" value="'isPrimeTimeTooltipVisible';	periodStatus == PRIME_TIME_ACTIVE || periodStatus == PRIME_TIME_INACTIVE"/>
						<bind name="watch" value="'primeTimetooltipData';	{	_tooltipName: 'PRIME_TIME',
																_tooltipDescData: { startsIn: localStartTime, endsIn: localFinishTime }	}"/>
						<style>
							<height value="720:24,1080:48ah"/>
							<align value="left|top"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<block>
							<bind name="visible" value="isInRanksTab"/>
							<bind name="tooltip" value="'RankInfoTooltip'; isPrimeTimeTooltipVisible ? {	_headerText: 'IDS_RANKED_PRIME_TIME_TOOLTIP_TITLE',
																						_tooltipData: [	{	_element: 'TooltipSystemDescriptionText',
																											_params: { _descriptionText:	subst('IDS_RANKED_PRIME_TIME_TOOLTIP_DESC', [],
																																			{ startsIn: localStartTime, endsIn: localFinishTime })}	}]}
																					 : null"/>
							<style>
								<marginTop value="720:12,1080:16ah"/>
							</style>
							<block>
								<bind name="instance" value="'StatusLine'; rankStatusLineData[periodStatus]"/>
							</block>
							<block>
								<bind name="visible" value="isPrimeTimeTooltipVisible"/>
								<style>
									<bottom value="5px"/>
									<marginLeft value="8"/>
									<marginRight value="-100%"/>
								</style>
								<block className="RanksInfoButton">
									<style>
										<width value="22px"/>
										<height value="22px"/>
										<backgroundImage value="url:../service_kit/buttons/info_tab_new.png"/>
									</style>
								</block>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'RanksAndRewards'; { _hasNextSprint: hasNextSprint }"/>
			</block>
		</block>
	</block>
	<block className="RanksAndRewards">
		<bind name="collectionDH" value="CC.rankLeague; 'leagues'"/>
		<bind name="catch" value="'selectedLeagueChanged'"/>
		<bind name="firstEntityDH" value="'rankPlayerEntity'; CC.rankPlayer;"/>
		<bind name="watchDH" value="'currentLeague'; ['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.currentLeague"/>
		<bind name="watch" value="'selectedLeague'; selectedTabLeague ? selectedTabLeague : currentLeague"/>
		<bind name="catch" value="'leagueChangedOnScroll'"/>
		<bind name="dispatch" value="'selectedLeagueChanged'; 'scrollToLeague'; { _selectedTabLeague: selectedTabLeague }; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'selectedLeagueChanged'; 'selectedTabLeagueChanged'; { selectedTabLeague: selectedTabLeague }; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="40px"/>
			</style>
			<bind name="name" value="'selectedLeague_' + selectedLeague"/>
			<bind name="repeat" value="leagues; 'RankLeague'; {_length: leagues.length, _selectedLeague: selectedLeague}; true"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RankCarousel'; { _hasNextSprint: _hasNextSprint }"/>
		</block>
	</block>
	<block className="RankLeague">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="entityDH" value="'rankLeagueEntity'; id"/>
		<bind name="watch" value="'rankLeagueId'; rankLeagueEntity.rankLeague.id"/>
		<bind name="watch" value="'isSelected'; _selectedLeague == rankLeagueId"/>
		<bind name="name" value="'RankLeague' + rankLeagueId"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<styleClass value="$MiddleVAligned"/>
		<block>
			<bind name="soundSet" value="'button_secondary'"/>
			<bind name="dispatch" value="'click'; 'selectedLeagueChanged'; {	selectedTabLeague: rankLeagueId	}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="transition" value="rollOver || isSelected; 0.15; {alpha: 0.45}; {alpha: 0.9}; {alpha: 0.45}; 0.5;"/>
			<style>
				<paddingLeft value="40px"/>
				<paddingRight value="40px"/>
				<marginBottom value="-1px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBoldNM"/>
				<bind name="transition" value="isSelected; 0.15; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; 0.5;"/>
				<bind name="text" value="toUpperCase(tr('IDS_RANKED_LEAGUE_' + rankLeagueId))"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="$index != 0"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<height value="24px"/>
				<width value="3px"/>
				<marginBottom value="-1px"/>
				<hitTest value="false"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="RankCarousel">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'rankPlayerEntity'; CC.rankPlayer;"/>
		<bind name="watchDH" value="'currentRank';					['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.currentRank"/>
		<bind name="watchDH" value="'currentLeague';					['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.currentLeague"/>
		<bind name="watchDH" value="'bestRankId';					['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.bestRankInSeason"/>
		<bind name="watchDH" value="'currentRankStars';				['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.currentStars"/>
		<bind name="watchDH" value="'currentVictories';				['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.victories"/>
		<bind name="watchDH" value="'previousRewardedVictoryCount';	['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.lastRewardedVictories"/>
		<bind name="watchDH" value="'isParticipated';				['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.isParticipated"/>
		<bind name="watchDH" value="'isInQualification';				['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.isInQualification"/>
		<bind name="watchDH" value="'hasQualificationPassed';		['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.hasQualificationPassed"/>
		<bind name="primaryEntityDH" value="'currentRankInfoEntity'; CC.rankInfo; currentRank + '_' + currentLeague;"/>
		<bind name="primaryEntityDH" value="'qualificationEntity'; CC.rankQualification; currentLeague;"/>
		<bind name="watch" value="'currentRankEntityId'; (isInQualification || hasQualificationPassed) &amp;&amp; qualificationEntity	? qualificationEntity.id
																												: currentRankInfoEntity.id"/>
		<bind name="catch" value="'addedToStage'; 	{selectedEntityId: currentRankEntityId, selectedLeagueRewardsId: currentLeague}"/>
		<bind name="catch" value="'removedFromStage'; {selectedEntityId: null, selectedLeagueRewardsId: null}"/>
		<bind name="catch" value="'selectedRankIdChanged'"/>
		<bind name="catch" value="'selectedTabLeagueChanged'"/>
		<bind name="catch" value="'leagueChangedOnScroll'"/>
		<bind name="primaryEntityDH" value="'routeEntityisInRewardsTab'; CC.route; SC.Ui_windows.ROUTE.RANKS_REWARDS"/>
		<bind name="watchDH" value="'isInRewardsTab'; ['routeEntityisInRewardsTab.route.evIsActiveChanged']; routeEntityisInRewardsTab.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInRanksTab'; CC.route; SC.Ui_windows.ROUTE.RANKS_CAROUSEL"/>
		<bind name="watchDH" value="'isInRanksTab'; ['routeEntityisInRanksTab.route.evIsActiveChanged']; routeEntityisInRanksTab.route.isActive"/>
		<bind name="entityDH" value="'selectedRank'; selectedEntityId"/>
		<bind name="watch" value="'isQualificationSelected'; !!selectedRank.rankQualification &amp;&amp; isInRanksTab"/>
		<bind name="watch" value="'selectedRankId';		isQualificationSelected ? SC.Ranked.RANK_CONSTANTS.TOP_RANK : selectedRank.rankInfo.id"/>
		<bind name="watch" value="'selectedLeagueId';	isQualificationSelected ? selectedRank.rankQualification.leagueId : selectedRank.rankInfo.leagueId"/>
		<bind name="primaryEntityDH" value="'selectedLeagueEntity'; CC.rankLeague; selectedLeagueId;"/>
		<bind name="watchDH" value="'selectedLeagueTopRankRewards';			[]; selectedLeagueEntity.rankLeague.firstRankRewards"/>
		<bind name="watchDH" value="'selectedLeagueQualificationRewards';	[]; selectedLeagueEntity.rankLeague.qualificationRewards"/>
		<bind name="watchDH" value="'hasQualification';						[]; selectedLeagueEntity.rankLeague.hasQualification"/>
		<bind name="watch" value="'isTopRank'; selectedRankId == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
		<bind name="watch" value="'isCurrentRankTop'; currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
		<bind name="primaryEntityDH" value="'selectedLeagueRewardsEntity'; CC.rankLeague; selectedTabLeague;"/>
		<bind name="watch" value="'selectedLeagueRewardsVictories'; selectedLeagueRewardsEntity.rankLeague.victories"/>
		<bind name="watchDH" value="'selectedLeagueRewardsVictories';	['selectedLeagueRewardsEntity.rankLeague.evChanged']; selectedLeagueRewardsEntity.rankLeague.victories"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<block>
				<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'left_'"/>
				<bind name="catch" value="'evCanScrollLeft'"/>
				<bind name="watch" value="'isLeftArrowEnabled'; (isInRanksTab &amp;&amp; _RankCarouselCanScrollLeft) || (isInRewardsTab &amp;&amp; _RewardsCarouselCanScrollLeft)"/>
				<bind name="watch" value="'leftArrowStatus';		!isLeftArrowEnabled	?	'disabled' :
												left_mouseDown		?	'down' :
												left_rollOver		?	'over'
																	:	'enabled'"/>
				<params>
					<param name="name" value="buttonCarouselLeft"/>
				</params>
				<bind name="dispatch" value="'click'; isInRanksTab ? 'clickedOnLeftRankArrow' : 'clickedOnLeftRewardsArrow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="soundSet" value="'default_button'"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<backgroundSize value="fill"/>
					<width value="20px"/>
					<height value="31px"/>
					<marginRight value="1280:24,1920:40aw"/>
				</style>
				<bind name="style" value="'hitTest'; isLeftArrowEnabled"/>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/buttons/arrow_left_' + leftArrowStatus + '.png'"/>
			</block>
			<block>
				<style>
					<backgroundImage value="url:../ranks/bg_carousel.png"/>
					<backgroundSize value="fill"/>
				</style>
				<bind name="child" value="isInRanksTab ? 0 : 1; {	_selectedEntityId: selectedEntityId,
													_selectedRankId: selectedRankId,
													_selectedLeagueId: selectedLeagueId,
													_currentLeague: currentLeague,
													_currentRank: currentRank,
													_currentRankStars: currentRankStars,
													_hasQualification: hasQualification,
													_previousRewardedVictoryCount: previousRewardedVictoryCount,
													_currentVictories: currentVictories,
													_currentRankEntityId: currentRankEntityId,
													_selectedTabLeague: selectedTabLeague,
													_isQualificationSelected: isQualificationSelected,
													_hasQualificationPassed: hasQualificationPassed,
													_isInQualification: isInQualification,
													_hasNextSprint: _hasNextSprint	}; 'RankCarouselContent'; 'RewardsCarousel'"/>
			</block>
			<block>
				<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'right_'"/>
				<bind name="catch" value="'evCanScrollRight'"/>
				<bind name="watch" value="'isRightArrowEnabled'; (isInRanksTab &amp;&amp; _RankCarouselCanScrollRight) || (isInRewardsTab &amp;&amp; _RewardsCarouselCanScrollRight)"/>
				<bind name="watch" value="'rightArrowStatus';	!isRightArrowEnabled	?	'disabled' :
												right_mouseDown			?	'down' :
												right_rollOver			?	'over'
																		:	'enabled'"/>
				<params>
					<param name="name" value="buttonCarouselRight"/>
				</params>
				<bind name="dispatch" value="'click'; isInRanksTab ? 'clickedOnRightRankArrow' : 'clickedOnRightRewardsArrow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
				<bind name="soundSet" value="'default_button'"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<backgroundSize value="fill"/>
					<width value="20px"/>
					<height value="31px"/>
					<marginLeft value="1280:24,1920:40aw"/>
				</style>
				<bind name="style" value="'hitTest'; isRightArrowEnabled"/>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/buttons/arrow_right_' + rightArrowStatus + '.png'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<bind name="watch" value="'leagueIdForDetailedView'; isInRanksTab ? selectedLeagueId : selectedTabLeague"/>
			<bind name="watch" value="'isCurrentRankTop'; currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
			<bind name="watch" value="'isCurrentLeague'; leagueIdForDetailedView == currentLeague"/>
			<bind name="watch" value="'isLeaguePassed'; currentLeague &lt; leagueIdForDetailedView || (isCurrentLeague &amp;&amp; isCurrentRankTop &amp;&amp; currentLeague == SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE)"/>
			<bind name="watch" value="'leagueStatus';	isLeaguePassed						? 'PASSED'		:
									isCurrentLeague					    ? 'CURRENT'		:
									!_hasNextSprint	                    ? 'UNAVALABLE'	:
									isCurrentRankTop &amp;&amp;
									((currentLeague - 1) == leagueIdForDetailedView)	? hasQualificationPassed	? 'QUAL_PASSED'
																									: 'QUAL_AVAILABLE'
																		: 'QUAL_LOCKED'"/>
			<bind name="watch" value="'isLeagueAchieved'; leagueStatus == 'PASSED'"/>
			<bind name="watch" value="'isRankAchieved'; isLeagueAchieved || (selectedLeagueId == currentLeague &amp;&amp; selectedRankId &gt; currentRank)"/>
			<bind name="watch" value="'isCurrentRank'; (selectedRankId == currentRank) &amp;&amp; isCurrentLeague"/>
			<bind name="watch" value="'isCurrentRankOnStage'; isCurrentRank &amp;&amp; isInRanksTab"/>
			<bind name="watch" value="'isCurrentLeague'; leagueIdForDetailedView == currentLeague"/>
			<bind name="watch" value="'isCurrentLeagueInRewards'; isInRewardsTab &amp;&amp; isCurrentLeague"/>
			<bind name="watch" value="'achievedRewardsCount'; indexOf(previousRewardedVictoryCount, selectedLeagueRewardsVictories) + 1"/>
			<bind name="watch" value="'countBlocks'; isTopRank &amp;&amp; isInRanksTab	? 2 : 1"/>
			<bind name="watch" value="'isAllRewardsReceived'; isLeagueAchieved || (achievedRewardsCount == selectedLeagueRewardsVictories.length)"/>
			<bind name="watch" value="'rankStatus';	(isRankAchieved &amp;&amp; isInRanksTab) || (isAllRewardsReceived &amp;&amp; isInRewardsTab)	? SC.Ui_styles.UNIFIED_STATUS.CHECK :
									isCurrentRankOnStage || isCurrentLeagueInRewards						? SC.Ui_styles.UNIFIED_STATUS.DEFAULT
																											: SC.Ui_styles.UNIFIED_STATUS.LOCK"/>
			<bind name="primaryEntityDH" value="'selectedQualificationEntity'; CC.rankQualification; leagueIdForDetailedView;"/>
			<bind name="watch" value="'shipsLevelMin';	selectedQualificationEntity.rankQualification.shipsLevelMin"/>
			<bind name="watch" value="'shipsLevelMax';	selectedQualificationEntity.rankQualification.shipsLevelMax"/>
			<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason"/>
			<bind name="watch" value="'isSeamlessRanked'; rankSeasonEntity.rankSeason.seamlessLeagues"/>
			<bind name="watch" value="'titleIds';	isQualificationSelected &amp;&amp; isInRanksTab	? 'IDS_RANKED_QUALIFICATION' :
									isInRanksTab							? 'IDS_RANK_IN_LEAGUE'
																			: 'IDS_RANKED_LEAGUE_REWARDS'"/>
			<bind name="watch" value="'titleStatus'; isCurrentLeague	?	isCurrentRankOnStage &amp;&amp; !isParticipated ? 'WAITING' : rankStatus
													:	leagueStatus"/>
			<bind name="watch" value="'pluralCount'; isCurrentLeague ? achievedRewardsCount : leagueIdForDetailedView - currentLeague"/>
			<bind name="watch" value="'statusLineIds'; (isCurrentLeague ? titleIds : 'IDS_RANK_LEAGUE_CAROUSEL') + '_STATUS_' + toUpperCase(titleStatus)"/>
			<style>
				<width value="100%"/>
				<height value="720:150,1080:170ah"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0.18; 0 + 0*0.075; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="style" value="'width'; (100 / countBlocks) + '%'"/>
				<style>
					<marginTop value="720:20,1080:30ah"/>
				</style>
				<block>
					<styleClass value="$MiddleAligned"/>
					<style>
						<align value="center"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBold21NM"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="isQualificationSelected ? titleIds : subst(titleIds + '_' + leagueIdForDetailedView, [], { _rankId: selectedRankId })"/>
					</block>
					<block>
						<bind name="visible" value="!((isQualificationSelected &amp;&amp; isInRanksTab) || (isCurrentLeagueInRewards &amp;&amp; (achievedRewardsCount == 0)))"/>
						<style>
							<marginTop value="720:12,1080:16ah"/>
						</style>
						<bind name="instance" value="'StatusLine';	{	_text: subst(statusLineIds, [],
															{	curCount: achievedRewardsCount,
																totalCount: selectedLeagueRewardsVictories.length	},
															pluralCount),
														_unifiedStatus: rankStatus	}"/>
					</block>
					<block>
						<bind name="visible" value="isQualificationSelected || isInRewardsTab"/>
						<style>
							<marginTop value="720:12,1080:16ah"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<alpha value="0.75"/>
								<textAlign value="center"/>
								<maxWidth value="500"/>
							</style>
							<bind name="text" value="titleIds + (isSeamlessRanked &amp;&amp; !isInRewardsTab ? '_SEAMLESS' : '') + '_DESC'"/>
						</block>
					</block>
					<block>
						<bind name="visible" value="isCurrentRankOnStage &amp;&amp; isParticipated &amp;&amp; !isQualificationSelected"/>
						<style>
							<marginTop value="720:20,1080:30ah"/>
						</style>
						<block>
							<style>
								<marginBottom value="720:20,1080:30ah"/>
								<width value="264px"/>
							</style>
							<block className="HorizontalDividerTwoPx">
								<style>
									<width value="100%"/>
									<height value="2px"/>
									<backgroundSize value="fill"/>
									<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
								</style>
							</block>
						</block>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="100%"/>
								<textAlign value="center"/>
								<alpha value="0.75"/>
							</style>
							<bind name="text" value="subst('IDS_BEST_RANK_IN_SEASON', [], { _rankId: bestRankId })"/>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="countBlocks &gt; 1"/>
				<bind name="appear" value="'addedToStage'; 0.18; 0 + 0*0.075; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<height value="100px"/>
					<width value="3px"/>
					<marginBottom value="-1px"/>
					<hitTest value="false"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<bind name="style" value="'width'; (100 / countBlocks) + '%'"/>
				<bind name="visible" value="isTopRank"/>
				<block>
					<bind name="visible" value="!isQualificationSelected"/>
					<bind name="appear" value="'addedToStage'; 0.18; 0 + 0*0.075; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<params>
						<param name="name" value="TopRankRewards"/>
					</params>
					<styleClass value="$MiddleAligned"/>
					<block>
						<styleClass value="$MiddleAligned"/>
						<bind name="instance" value="'StatusLine'; isCurrentRank || isLeagueAchieved	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
																						_text: 'IDS_RANKED_LEAGUE_REWARDS_STATUS_CHECK' }
																					: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																						_text: 'IDS_RANK_REWARDS_TOP_RANK' }"/>
					</block>
					<block>
						<bind name="name" value="selectedLeagueTopRankRewards"/>
						<styleClass value="$MiddleAligned"/>
						<style>
							<flow value="htile"/>
							<paddingLeft value="8px"/>
						</style>
						<bind name="repeat" value="selectedLeagueTopRankRewards; 'RewardItemAdapter'; {}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="visible" value="isQualificationSelected"/>
					<bind name="appear" value="'addedToStage'; 0.18; 0 + 0*0.075; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<params>
						<param name="name" value="QualificationRewards"/>
					</params>
					<styleClass value="$MiddleAligned"/>
					<block>
						<styleClass value="$MiddleAligned"/>
						<bind name="instance" value="'StatusLine';	(isCurrentRank &amp;&amp; hasQualificationPassed) || isLeagueAchieved	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
																														_text: 'IDS_RANKED_LEAGUE_REWARDS_STATUS_CHECK' }
																													: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																														_text: 'IDS_RANK_REWARDS_QUALIFICATION' }"/>
					</block>
					<block>
						<bind name="name" value="selectedLeagueQualificationRewards"/>
						<styleClass value="$MiddleAligned"/>
						<style>
							<flow value="htile"/>
							<paddingLeft value="8px"/>
						</style>
						<bind name="repeat" value="selectedLeagueQualificationRewards; 'RewardItemAdapter'; {}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="RankCarouselContent">
		<bind name="stageSize"/>
		<params>
			<param name="name" value="RanksCarouselMainBlock"/>
		</params>
		<bind name="scrollControllerCentered" value="'RankCarousel'; 0"/>
		<bind name="catch" value="'scrollToLeague'"/>
		<bind name="dispatch" value="'scrollToLeague'; 'RankCarouselScrollToName'; 'league_' + _selectedTabLeague"/>
		<bind name="catch" value="'selectedRankIdChanged'"/>
		<bind name="catch" value="'evScrollChosenToCenter'"/>
		<bind name="dispatch" value="'selectedRankIdChanged'; 'RankCarouselScrollChosenToCenter'; selectedElementName; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.1"/>
		<bind name="watch" value="'selectedElementName';	_isQualificationSelected	? 'qualification_' + _selectedLeagueId
																	: 'rank_' + _selectedLeagueId + _selectedRankId"/>
		<bind name="lag" value="'lagAfterAddedToStage'"/>
		<bind name="dispatch" value="'lagAfterAddedToStage';	'RankCarouselScrollChosenToCenter'; selectedElementName; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.1"/>
		<bind name="dispatch" value="'addedToStage';			'RankCarouselScrollChosenToCenter'; selectedElementName; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.1"/>
		<bind name="changeDispatch" value="!!_selectedRankId || !!_selectedLeagueId; !_selectedRankId || !_selectedLeagueId ? 'selectedRankIdChanged' : null; {	selectedEntityId: _currentRankEntityId	}"/>
		<bind name="dispatch" value="'addedToStage';	'selectedRankIdChanged';	{selectedEntityId: _currentRankEntityId};"/>
		<bind name="dispatch" value="'addedToStage'; 'leagueChangedOnScroll';	{selectedTabLeague:	_selectedLeagueId};"/>
		<bind name="dispatch" value="'clickedOnRightRankArrow'; 'RankCarouselScrollRight'"/>
		<bind name="dispatch" value="'clickedOnLeftRankArrow'; 'RankCarouselScrollLeft'"/>
		<bind name="changeDispatch" value="RankCarouselCanScrollRight;	'evCanScrollRight';	{	_RankCarouselCanScrollRight: RankCarouselCanScrollRight	}"/>
		<bind name="changeDispatch" value="RankCarouselCanScrollLeft;	'evCanScrollLeft';	{	_RankCarouselCanScrollLeft: RankCarouselCanScrollLeft	}"/>
		<style>
			<height value="720:300,1080:440ah"/>
			<width value="1280:910,1920:1300aw"/>
			<itemHeight value="720:300,1080:440ah"/>
			<overflow value="scroll"/>
			<scrollArea value="ModernScrollAreaHorizontal"/>
			<scrollbarController value="lesta.unbound.style.UbScrollingControllerCentering"/>
			<backgroundColor value="0x01000000"/>
			<wheelScrollSpeed value="1280:254,1920:196aw"/>
			<flow value="horizontal"/>
		</style>
		<bind name="collectionRepeatDH" value="CC.rankCarouselItem; 'RankStereotypeCarouselWrapper'; 'sorted'; {	_selectedEntityId: _selectedEntityId,
																								_selectedRankId: _selectedRankId,
																								_selectedLeagueId: _selectedLeagueId,
																								_currentLeague: _currentLeague,
																								_currentRank: _currentRank,
																								_currentRankStars: _currentRankStars,
																								_hasQualification: _hasQualification,
																								_hasQualificationPassed: _hasQualificationPassed,
																								_currentCenterIndex: currentCenterIndex,
																								_isInQualification: _isInQualification,
																								_hasNextSprint: _hasNextSprint	}"/>
	</block>
	<block className="RankStereotypeCarouselWrapper">
		<bind name="dataRefDH" value="'rankInfoDataref'; '$dataRef.ref'"/>
		<bind name="watch" value="'isLeagueComponent'; !!rankInfoDataref.rankLeague"/>
		<bind name="watch" value="'isQualificationComponent'; !!rankInfoDataref.rankQualification"/>
		<bind name="watch" value="'league';			isLeagueComponent			?		rankInfoDataref.rankLeague.id :
									isQualificationComponent	?		rankInfoDataref.rankQualification.leagueId
																:		rankInfoDataref.rankInfo.leagueId"/>
		<bind name="watch" value="'rank';			isQualificationComponent ? SC.Ranked.RANK_CONSTANTS.TOP_RANK : rankInfoDataref.rankInfo.id"/>
		<bind name="watch" value="'isGuaranteed';	rankInfoDataref.rankInfo.isGuaranteed"/>
		<bind name="watch" value="'starsToNextRank';	isQualificationComponent	? rankInfoDataref.rankQualification.starsToNext
																: rankInfoDataref.rankInfo.starsToNext"/>
		<bind name="watch" value="'isRankLocked'; rank &lt; _currentRank"/>
		<bind name="watch" value="'isLeagueLocked'; league &lt; _currentLeague"/>
		<bind name="watch" value="'rankStars'; 		isCurrentRank										? _currentRankStars : 
									(isCurrentLeague &amp;&amp; isRankLocked) || isLeagueLocked	? 0
																						: starsToNextRank"/>
		<bind name="watch" value="'elementName';	isLeagueComponent			? 'league_' + league :
								isQualificationComponent	? 'qualification_' + league
															: 'rank_' + league + rank"/>
		<bind name="name" value="elementName"/>
		<bind name="watch" value="'dispatchEvent'; _currentCenterIndex == $index + 1 ? 'leagueChangedOnScroll' : null"/>
		<bind name="changeDispatch" value="_currentCenterIndex; dispatchEvent;	{	selectedTabLeague:	league	};"/>
		<bind name="watch" value="'isSelected'; _selectedEntityId == rankInfoDataref.id"/>
		<bind name="watch" value="'isCurrentLeague'; _currentLeague == league"/>
		<bind name="watch" value="'isCurrentRank'; (_currentRank == rank) &amp;&amp; isCurrentLeague"/>
		<bind name="watch" value="'isTopRank'; rank == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
		<bind name="watch" value="'isQualificationVisible'; isSelected &amp;&amp; isTopRank &amp;&amp; _hasQualification"/>
		<bind name="var" value="{iconSize: 160}"/>
		<bind name="watch" value="'isCurrentRankTop'; _currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
		<bind name="watch" value="'isCurrentLeague'; league == _currentLeague"/>
		<bind name="watch" value="'isLeaguePassed'; _currentLeague &lt; league || (isCurrentLeague &amp;&amp; isCurrentRankTop &amp;&amp; _currentLeague == SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE)"/>
		<bind name="watch" value="'leagueStatus';	isLeaguePassed						? 'PASSED'		:
									isCurrentLeague					    ? 'CURRENT'		:
									!_hasNextSprint	                    ? 'UNAVALABLE'	:
									isCurrentRankTop &amp;&amp;
									((_currentLeague - 1) == league)	? _hasQualificationPassed	? 'QUAL_PASSED'
																									: 'QUAL_AVAILABLE'
																		: 'QUAL_LOCKED'"/>
		<bind name="primaryEntityDH" value="'leagueEntity'; CC.rankLeague; league;"/>
		<bind name="watch" value="'topRankRewards';					leagueEntity.rankLeague.firstRankRewards"/>
		<bind name="watch" value="'topRankRewardsCategory';			leagueEntity.rankLeague.firstRankRewardsCategory"/>
		<bind name="watch" value="'qualificationRewards';			leagueEntity.rankLeague.qualificationRewards"/>
		<bind name="watch" value="'qualificationRewardsCategory';	leagueEntity.rankLeague.qualificationRewardsCategory"/>
		<bind name="watch" value="'rankLeagueHasQualification';		leagueEntity.rankLeague.hasQualification"/>
		<bind name="watch" value="'isDesRank';	(isCurrentLeague &amp;&amp; isRankLocked) || (isLeagueLocked &amp;&amp; !isCurrentLeague)"/>
		<bind name="firstEntityDH" value="'rankPlayerEntity'; CC.rankPlayer"/>
		<bind name="watchDH" value="'isQualificationPassed';	['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.hasQualificationPassed"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason"/>
		<bind name="watchDH" value="'nextSprintId'; ['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.nextSprintId"/>
		<bind name="watch" value="'hasNextSprint'; nextSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT"/>
		<bind name="watch" value="'isSeamlessRanked'; rankSeasonEntity.rankSeason.seamlessLeagues"/>
		<bind name="primaryEntityDH" value="'nextSprintEntity'; CC.rankSprint; nextSprintId"/>
		<bind name="watch" value="'nextSprintStartTime'; nextSprintEntity.rankSprint.startTime"/>
		<bind name="var" value="{	WAIT_FOR_ANNOUNCEMENT:	'WAIT_FOR_ANNOUNCEMENT',
					SEASON_ANNOUNCEMENT:	'SEASON_ANNOUNCEMENT',
					SPRINT_ANNOUNCEMENT:	'SPRINT_ANNOUNCEMENT',
					PRIME_TIME_ACTIVE:		'PRIME_TIME_ACTIVE',
					PRIME_TIME_INACTIVE:	'PRIME_TIME_INACTIVE'	}"/>
		<bind name="watch" value="'periodStatus';	isRankSeasonFinished ||
									(!isActiveSprint &amp;&amp; !hasNextSprint)							? WAIT_FOR_ANNOUNCEMENT :
									isRankSeasonInactive || isRankSeasonWaiting					? SEASON_ANNOUNCEMENT :
									isQualificationPassed &amp;&amp; hasNextSprint || isSprintFinished	? SPRINT_ANNOUNCEMENT :
									timeLeftToStart &gt; 0											? PRIME_TIME_INACTIVE :
									timeLeftToFinish &gt; 0										? PRIME_TIME_ACTIVE
																								: WAIT_FOR_ANNOUNCEMENT"/>
		<bind name="watch" value="'rankStatusLineTimeStamp'; {	WAIT_FOR_ANNOUNCEMENT:	0,
												SEASON_ANNOUNCEMENT:	rankSeasonStartTime,
												SPRINT_ANNOUNCEMENT:	nextSprintStartTime,
												PRIME_TIME_ACTIVE:		primeTimeFinishTime,
												PRIME_TIME_INACTIVE:	primeTimeStartTime,}"/>
		<bind name="watch" value="'currentTimeStamp'; rankStatusLineTimeStamp[periodStatus]"/>
		<bind name="watch" value="'unifinedStatus'; (currentTimeStamp - serverTime) &gt; 86400	? SC.Ui_styles.UNIFIED_STATUS.DATE
																			: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION"/>
		<bind name="countdown" value="currentTimeStamp; 'formattedCountDown'; 'HIGHEST,WITH_DAYS';"/>
		<bind name="watch" value="'rankStatusLineData'; {
		WAIT_FOR_ANNOUNCEMENT:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_WAIT_FOR_NEXT_RANK_SEASON_ANNOUNCEMENT' },
		SEASON_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_SUBST_NTH_RANKED_SEASON_STARTS_IN', [], {	_seasonId: seasonTitle,
																									_timeTillStart: formattedCountDown }))},
		SPRINT_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_RANKED_SPRINT_STARTS_IN', [], {	_nextSprintId: nextSprintId + 1,
																							_timeLeft: formattedCountDown }))},
		PRIME_TIME_INACTIVE:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_STARTS_IN', [], { _timeLeft: formattedCountDown }))},
		PRIME_TIME_ACTIVE:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_ENDS_IN', [], { _timeLeft: formattedCountDown }))},
		UNDEFINED_PERIOD:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_RANKED_STAGE_UNDEFINED' }	}"/>
		<bind name="watch" value="'isNextLeagueTimerVisible'; isQualificationPassed &amp;&amp; hasNextSprint &amp;&amp; (league == (_currentLeague - 1))"/>
		<bind name="watch" value="'leagueTimerParams'; isNextLeagueTimerVisible ? rankStatusLineData[periodStatus] : null"/>
		<style>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
			<height value="100%"/>
			<width value="100%f"/>
		</style>
		<block>
			<bind name="transition" value="isSelected; 0.15; { alpha: 0, top: 10}; { alpha: 1, top: 0}"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="438px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../ranks/bg_selection_rank_stereotype.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block>
				<style>
					<top value="1"/>
					<width value="100%"/>
					<height value="48px"/>
					<backgroundImage value="url:../ranks/tile_up.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
			<block>
				<style>
					<height value="100%"/>
				</style>
			</block>
			<block>
				<style>
					<marginTop value="-100%"/>
					<width value="100%"/>
					<height value="48px"/>
					<backgroundImage value="url:../ranks/tile_down.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isLeagueComponent"/>
			<style>
				<height value="100%f"/>
				<bottom value="720:90,1080:20ah"/>
			</style>
			<bind name="style" value="'align'; $index &gt; 0 ? 'center' : 'left'"/>
			<bind name="style" value="'width'; $index &gt; 0 ? '312px' : '288px'"/>
			<bind name="instance" value="'LeagueStereotype'; {	_leagueStatus: leagueStatus,
												_league: league,
												_isLeagueLocked: isLeagueLocked,
												_leaguesBetween: _currentLeague - league,
												_leagueTimerParams: leagueTimerParams }"/>
		</block>
		<block>
			<bind name="visible" value="!isLeagueComponent"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<paddingBottom value="720:22,900:37ah"/>
				<align value="center"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="style" value="'width';	(isSelected || isQualificationComponent	? 324 : 196) + 'px'"/>
			<block>
				<bind name="dispatch" value="'click'; 'selectedRankIdChanged'; {	selectedEntityId: rankInfoDataref.id,
																rankElementName: elementName	}"/>
				<bind name="style" value="'height'; isQualificationComponent	? '100%f'
															: iconSize + (isSelected ? 98 : 64) + 'px'"/>
				<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
				<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
				<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
				<bind name="colorTransform" value="	!isSelected &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							!isSelected &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
				<block>
					<bind name="visible" value="!isQualificationComponent"/>
					<bind name="transition" value="isSelected; 0.15; { scaleX: 0.85, scaleY: 0.85, top: 10, left: 10}; { scaleX: 1, scaleY: 1, top: 0, left: 0}"/>
					<bind name="soundSet" value="!isSelected ? 'button_rank' : ''"/>
					<bind name="instance" value="'RankStereotype'; {	_iconSize: iconSize,
													_league: league,
													_rank: rank,
													_isTopRank: isTopRank,
													_isGuaranteed: isGuaranteed,
													_isDes: isDesRank,
													_starsToNextRank: isTopRank ? 0 : starsToNextRank,
													_currentStars: isTopRank &amp;&amp; isCurrentRank ? 1 : rankStars	}"/>
				</block>
				<block>
					<bind name="visible" value="isQualificationComponent"/>
					<bind name="watch" value="'qualificationStatus'; (league &gt; _currentLeague) ||
													(_hasQualificationPassed &amp;&amp; isCurrentRankTop &amp;&amp; isCurrentLeague)		?	SC.Ui_styles.UNIFIED_STATUS.CHECK :
													isCurrentLeague &amp;&amp; _isInQualification									?	SC.Ui_styles.UNIFIED_STATUS.DEFAULT
																															:	SC.Ui_styles.UNIFIED_STATUS.LOCK"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<bind name="instance" value="'Qualification'; {	_starsToNextRank: rankInfoDataref.rankQualification.starsToNext,
													_shipsLevelMin: rankInfoDataref.rankQualification.shipsLevelMin,
													_shipsLevelMax: rankInfoDataref.rankQualification.shipsLevelMax,
													_currentStars: rankStars,
													_league: league,
													_qualificationStatus: qualificationStatus,
													_hasNextSprint: hasNextSprint,
													_isSeamlessRanked: isSeamlessRanked	}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="RewardsCarousel">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="scrollControllerCentered" value="'RewardCarousel'; 0"/>
		<bind name="catch" value="'leagueChangedOnScroll'"/>
		<params>
			<param name="name" value="RanksRewardsCarousel"/>
		</params>
		<bind name="dispatch" value="'addedToStage'; 'RewardCarouselScrollToName'; 'league_' + _currentLeague"/>
		<bind name="dispatch" value="'addedToStage'; 'leagueChangedOnScroll'; {	selectedTabLeague: _currentLeague	}"/>
		<bind name="dispatch" value="'clickedOnLeftRewardsArrow'; 'RewardCarouselScrollToName';	'league_' + (selectedTabLeague + 1)"/>
		<bind name="dispatch" value="'clickedOnRightRewardsArrow'; 'RewardCarouselScrollToName';	'league_' + (selectedTabLeague - 1)"/>
		<bind name="catch" value="'selectedTabLeagueChanged'"/>
		<bind name="dispatch" value="'selectedTabLeagueChanged'; 'RewardCarouselScrollToName'; 'league_' + selectedTabLeague"/>
		<bind name="collectionDH" value="CC.rankLeague; 'rankLeaguesCollection'"/>
		<bind name="watch" value="'canScrollLeft';	selectedTabLeague != rankLeaguesCollection.length"/>
		<bind name="watch" value="'canScrollRight';	selectedTabLeague != SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE "/>
		<bind name="changeDispatch" value="canScrollRight; 'evCanScrollRight';	{	_RewardsCarouselCanScrollRight:	canScrollRight	}"/>
		<bind name="changeDispatch" value="canScrollLeft; 'evCanScrollLeft';		{	_RewardsCarouselCanScrollLeft:	canScrollLeft	}"/>
		<style>
			<height value="720:300,1080:440ah"/>
			<width value="1280:910,1920:1300aw"/>
			<overflow value="scroll"/>
			<scrollArea value="ModernScrollAreaHorizontal"/>
			<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
			<backgroundColor value="0x01000000"/>
			<wheelScrollSpeed value="1280:254,1920:220aw"/>
			<flow value="horizontal"/>
		</style>
		<bind name="collectionRepeatDH" value="CC.rankLeague; 'LeagueRewardsWrapper'; 'sorted'; {	_currentLeague: _currentLeague,
																					_currentRank: _currentRank,
																					_currentVictories: _currentVictories,
																					_leaguesLength: rankLeaguesCollection.length,
																					_previousRewardedVictoryCount: _previousRewardedVictoryCount,
																					_currentCenterIndex: currentCenterIndex,
																					_hasQualificationPassed: _hasQualificationPassed,
																					_hasNextSprint: _hasNextSprint	}"/>
	</block>
	<block className="LeagueRewardsWrapper">
		<bind name="name" value="'league_' + league"/>
		<bind name="dataRefDH" value="'rankLeagueDataref'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'league';			['rankLeagueDataref.rankLeague.evChanged']; rankLeagueDataref.rankLeague.id"/>
		<bind name="watchDH" value="'victoryRewards';	['rankLeagueDataref.rankLeague.evChanged']; rankLeagueDataref.rankLeague.victoryRewards"/>
		<bind name="watchDH" value="'victories';			['rankLeagueDataref.rankLeague.evChanged']; rankLeagueDataref.rankLeague.victories"/>
		<bind name="watchDH" value="'rewardsCategories';	['rankLeagueDataref.rankLeague.evChanged']; rankLeagueDataref.rankLeague.victoryRewardsCategories"/>
		<bind name="watch" value="'achievedRewardsCount'; indexOf(_previousRewardedVictoryCount, victories) + 1"/>
		<bind name="watch" value="'isLeagueLocked'; league &lt; _currentLeague"/>
		<bind name="watch" value="'isCurrentRankTop'; _currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
		<bind name="watch" value="'isCurrentLeague'; league == _currentLeague"/>
		<bind name="watch" value="'isLeaguePassed'; _currentLeague &lt; league || (isCurrentLeague &amp;&amp; isCurrentRankTop &amp;&amp; _currentLeague == SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE)"/>
		<bind name="watch" value="'leagueStatus';	isLeaguePassed						? 'PASSED'		:
									isCurrentLeague					    ? 'CURRENT'		:
									!_hasNextSprint	                    ? 'UNAVALABLE'	:
									isCurrentRankTop &amp;&amp;
									((_currentLeague - 1) == league)	? _hasQualificationPassed	? 'QUAL_PASSED'
																									: 'QUAL_AVAILABLE'
																		: 'QUAL_LOCKED'"/>
		<bind name="firstEntityDH" value="'rankPlayerEntity'; CC.rankPlayer"/>
		<bind name="watchDH" value="'isQualificationPassed';	['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.hasQualificationPassed"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason"/>
		<bind name="watchDH" value="'nextSprintId'; ['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.nextSprintId"/>
		<bind name="watch" value="'hasNextSprint'; nextSprintId != SC.Ranked.RANK_CONSTANTS.NO_SPRINT"/>
		<bind name="primaryEntityDH" value="'nextSprintEntity'; CC.rankSprint; nextSprintId"/>
		<bind name="watch" value="'nextSprintStartTime'; nextSprintEntity.rankSprint.startTime"/>
		<bind name="var" value="{	WAIT_FOR_ANNOUNCEMENT:	'WAIT_FOR_ANNOUNCEMENT',
					SEASON_ANNOUNCEMENT:	'SEASON_ANNOUNCEMENT',
					SPRINT_ANNOUNCEMENT:	'SPRINT_ANNOUNCEMENT',
					PRIME_TIME_ACTIVE:		'PRIME_TIME_ACTIVE',
					PRIME_TIME_INACTIVE:	'PRIME_TIME_INACTIVE'	}"/>
		<bind name="watch" value="'periodStatus';	isRankSeasonFinished ||
									(!isActiveSprint &amp;&amp; !hasNextSprint)							? WAIT_FOR_ANNOUNCEMENT :
									isRankSeasonInactive || isRankSeasonWaiting					? SEASON_ANNOUNCEMENT :
									isQualificationPassed &amp;&amp; hasNextSprint || isSprintFinished	? SPRINT_ANNOUNCEMENT :
									timeLeftToStart &gt; 0											? PRIME_TIME_INACTIVE :
									timeLeftToFinish &gt; 0										? PRIME_TIME_ACTIVE
																								: WAIT_FOR_ANNOUNCEMENT"/>
		<bind name="watch" value="'rankStatusLineTimeStamp'; {	WAIT_FOR_ANNOUNCEMENT:	0,
												SEASON_ANNOUNCEMENT:	rankSeasonStartTime,
												SPRINT_ANNOUNCEMENT:	nextSprintStartTime,
												PRIME_TIME_ACTIVE:		primeTimeFinishTime,
												PRIME_TIME_INACTIVE:	primeTimeStartTime,}"/>
		<bind name="watch" value="'currentTimeStamp'; rankStatusLineTimeStamp[periodStatus]"/>
		<bind name="watch" value="'unifinedStatus'; (currentTimeStamp - serverTime) &gt; 86400	? SC.Ui_styles.UNIFIED_STATUS.DATE
																			: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION"/>
		<bind name="countdown" value="currentTimeStamp; 'formattedCountDown'; 'HIGHEST,WITH_DAYS';"/>
		<bind name="watch" value="'rankStatusLineData'; {
		WAIT_FOR_ANNOUNCEMENT:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_WAIT_FOR_NEXT_RANK_SEASON_ANNOUNCEMENT' },
		SEASON_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_SUBST_NTH_RANKED_SEASON_STARTS_IN', [], {	_seasonId: seasonTitle,
																									_timeTillStart: formattedCountDown }))},
		SPRINT_ANNOUNCEMENT:	{	_unifiedStatus: unifinedStatus,
									_text: tr(subst('IDS_RANKED_SPRINT_STARTS_IN', [], {	_nextSprintId: nextSprintId + 1,
																							_timeLeft: formattedCountDown }))},
		PRIME_TIME_INACTIVE:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_STARTS_IN', [], { _timeLeft: formattedCountDown }))},
		PRIME_TIME_ACTIVE:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
									_text: tr(subst('IDS_RANKED_PRIME_TIME_ENDS_IN', [], { _timeLeft: formattedCountDown }))},
		UNDEFINED_PERIOD:		{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
									_text: 'IDS_RANKED_STAGE_UNDEFINED' }	}"/>
		<bind name="watch" value="'isNextLeagueTimerVisible'; isQualificationPassed &amp;&amp; hasNextSprint &amp;&amp; (league == (_currentLeague - 1))"/>
		<bind name="watch" value="'leagueTimerParams'; isNextLeagueTimerVisible ? rankStatusLineData[periodStatus] : null"/>
		<bind name="watch" value="'dispatchEvent'; _currentCenterIndex == $index + 1 ? 'leagueChangedOnScroll' : null"/>
		<bind name="changeDispatch" value="_currentCenterIndex; dispatchEvent; { selectedTabLeague: league };"/>
		<style>
			<flow value="horizontal"/>
			<align value="left"/>
			<height value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="720:300,1080:440ah"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="48px"/>
					<top value="1"/>
					<backgroundImage value="url:../ranks/tile_up.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
			<block>
				<style>
					<height value="100%"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="48px"/>
					<marginTop value="-100%"/>
					<backgroundImage value="url:../ranks/tile_down.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<height value="100%f"/>
				<width value="312px"/>
				<align value="left"/>
				<bottom value="720:90,1080:20ah"/>
			</style>
			<bind name="instance" value="'LeagueStereotype'; {	_leagueStatus: leagueStatus,
												_league: league,
												_isLeagueLocked: isLeagueLocked,
												_leaguesBetween: _currentLeague - league,
												_leagueTimerParams: leagueTimerParams }"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<bind name="style" value="'paddingRight'; $index &lt; _leaguesLength ? '160px' : '40px'"/>
			<bind name="repeat" value="victoryRewards; 'RewardWithProgress'; {	_victories: victories,
																_rewardsCategories: rewardsCategories,
																_currentVictories: _currentVictories,
																_achievedRewardsCount: achievedRewardsCount,
																_leagueStatus: leagueStatus,
																_previousRewardedVictoryCount: _previousRewardedVictoryCount }"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- player_profile_summary -->
	<block className="StatColumn">
		<style>
			<width value="33%"/>
			<margin value="12px|0"/>
		</style>
		<bind name="repeat" value="_array[$index]; 'StatRowProxy'; { _statData: _statData }"/>
	</block>
	<block className="StatRowProxy">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value=" isHeader ? 'StatItemHeader' : 'StatRow'; {	_header: header,
																_title: title,
																_value: value,
																_statData: _statData,
																_shipId: _shipId,
																_hintVehicleId: hintVehicleId }"/>
	</block>
	<block className="StatItemHeader">
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: _title + '_TOOLTIP' }"/>
		<styleClass value="$TableCell"/>
		<style>
			<flow value="horizontal"/>
			<marginBottom value="12px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold21NM"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_title"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold21NM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_value"/>
		</block>
	</block>
	<block className="StatRow">
		<bind name="tooltip" value="'StatsRowTooltip'; _title	? {	_tooltipText: _title + '_TOOLTIP',
													_hintVehicleId: _hintVehicleId }
												: null"/>
		<styleClass value="$TableCell"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="100%"/>
					<multiline value="false"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="_title"/>
			</block>
			<block>
				<bind name="visible" value="_value != null"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<bind name="alpha" value="(_value == 0) || (_value == '0%') ? 0.45 : 0.9"/>
					<bind name="text" value="_value == '100%' ? _value : format(_value)"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_title"/>
			<style>
				<width value="100%"/>
				<marginTop value="2px"/>
			</style>
			<bind name="instance" value="'TableDivider'; {}"/>
		</block>
	</block>
	<block className="PlayerSummary">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'featureEntity_3'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[3]"/>
		<bind name="watchDH" value="'feature_3'; ['featureEntity_3.accountFeature.evStateChanged']; featureEntity_3.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_3"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 3}"/>
		<bind name="primaryEntityDH" value="'featureEntity_16'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[16]"/>
		<bind name="watchDH" value="'feature_16'; ['featureEntity_16.accountFeature.evStateChanged']; featureEntity_16.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_16"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 16}"/>
		<bind name="primaryEntityDH" value="'featureEntity_24'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[24]"/>
		<bind name="watchDH" value="'feature_24'; ['featureEntity_24.accountFeature.evStateChanged']; featureEntity_24.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_24"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 24}"/>
		<bind name="collectionDH" value="CC.rankedSeasonHistory; 'statDataEntities'; 'statToShow'"/>
		<bind name="entityDH" value="'statDataEntity'; statDataEntities[0].id"/>
		<bind name="watchDH" value="'statData';	['statDataEntity.dataComponent.evDataChanged']; statDataEntity.dataComponent.data"/>
		<bind name="watch" value="'shipsList'; statData.shipsList"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; statData.vehicleId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="var" value="{ curSeasonIndex: 0 }"/>
		<bind name="catch" value="'curSeasonIndexChanged'"/>
		<bind name="var" value="{ curLeagueIndex: 0 }"/>
		<bind name="catch" value="'curLeagueIndexChanged'"/>
		<bind name="watch" value="'isSeasonResettable'; battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE || battleType == SC.Common.BATTLE_TYPES.OLD_RANKED_BATTLE"/>
		<bind name="changeDispatch" value="battleType; isSeasonResettable ? 'resetSeasonId' : ''; {curSeasonIndex: 0}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="catch" value="'resetSeasonId'"/>
		<bind name="changeDispatch" value="curSeasonIndex; 'resetLeagueId'; {curLeagueIndex: 0}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="catch" value="'resetLeagueId'"/>
		<bind name="firstEntityDH" value="'clubHistoryEntity'; CC.rankedSeasonHistory; 'byGameType.' + SC.Common.BATTLE_TYPES.CLUB_BATTLE"/>
		<bind name="watch" value="'hasClubHistoryData'; clubHistoryEntity.rankedSeasonHistory.hasGamesPlayed"/>
		<bind name="firstEntityDH" value="'oldRankedHistoryEntity'; CC.rankedSeasonHistory; 'byGameType.' + SC.Common.BATTLE_TYPES.OLD_RANKED_BATTLE"/>
		<bind name="watch" value="'hasOldRankedHistoryData'; oldRankedHistoryEntity.rankedSeasonHistory.hasGamesPlayed"/>
		<bind name="watch" value="'battleType';	_curItemIndex == 0					? SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE :
								_curItemIndex == 1				? SC.Common.BATTLE_TYPES.RANDOM_BATTLE :
								_curItemIndex == 2				? SC.Common.BATTLE_TYPES.RANKED_BATTLE :
								_curItemIndex == 3	? hasOldRankedHistoryData	? SC.Common.BATTLE_TYPES.OLD_RANKED_BATTLE
																													: SC.Common.BATTLE_TYPES.CLUB_BATTLE :
								_curItemIndex == 4					? SC.Common.BATTLE_TYPES.CLUB_BATTLE
																						: SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE "/>
		<bind name="watch" value="'battleTypes';  feature_3	== 'locked' 	? ['IDS_COOPERATIVEBATTLE'] :
								 feature_16 == 'locked'		? ['IDS_COOPERATIVEBATTLE', 'IDS_RANDOMBATTLE'] :
								 hasOldRankedHistoryData	? !hasClubHistoryData	? ['IDS_COOPERATIVEBATTLE', 'IDS_RANDOMBATTLE', 'IDS_RANKEDBATTLE', 'IDS_RANKEDBATTLE_OLD']
																					: ['IDS_COOPERATIVEBATTLE', 'IDS_RANDOMBATTLE', 'IDS_RANKEDBATTLE', 'IDS_RANKEDBATTLE_OLD', 'IDS_CLUBBATTLE']
								 							: !hasClubHistoryData	? ['IDS_COOPERATIVEBATTLE', 'IDS_RANDOMBATTLE', 'IDS_RANKEDBATTLE']
								 													: ['IDS_COOPERATIVEBATTLE', 'IDS_RANDOMBATTLE', 'IDS_RANKEDBATTLE', 'IDS_CLUBBATTLE']"/>
		<bind name="watch" value="'isRankedBattle';	battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE ||
									battleType == SC.Common.BATTLE_TYPES.OLD_RANKED_BATTLE"/>
		<bind name="watch" value="'isNewRankedBattle'; battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE"/>
		<bind name="action" value="'battleType' + varChanged;	'battleTypeChanged'; { battleType: battleType }"/>
		<bind name="action" value="'addedToStage';				'battleTypeChanged'; { battleType: battleType }"/>
		<params>
			<param name="name" value="PlayerProfileSummary"/>
		</params>
		<styleClass value="$Fullsize"/>
		<style>
			<marginTop value="720:30,1080:80ah"/>
			<marginBottom value="720:0,1080:60ah"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'PlayerSummaryItem'; {	_battleType: battleType,
												_curItemIndex: _curItemIndex,
												_curSeasonIndex: curSeasonIndex,
												_statData: statData,
												currentVehicleId: statData.vehicleId	}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<position value="absolute"/>
				<width value="1280:240,1920:320aw"/>
				<height value="100%"/>
				<right value="1280:5,1920:40aw"/>
				<marginTop value="5px"/>
				<marginBottom value="720:8,1080:24ah"/>
			</style>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<align value="center"/>
				</style>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text: 'IDS_CHOOSE_BATTLETYPE_STATS'	}"/>
					<bind name="instance" value="'ItemChooser'; {	_items: battleTypes,
													curIndex: _curItemIndex,
													_choosedItemRenderer: 'LargeTextChoosedItemRenderer',
													_listItemRenderer: 'TextListItemRenderer',
													onItemSelectedEvent: 'battleTypeChanged',
													_name: 'dropdown_battle_types'	}"/>
				</block>
				<block>
					<style>
						<align value="center"/>
					</style>
					<block>
						<style>
							<width value="152px"/>
							<align value="center"/>
						</style>
						<block>
							<style>
								<width value="136px"/>
								<height value="136px"/>
								<backgroundSize value="cover"/>
							</style>
							<bind name="style" value="'backgroundImage'; 'url:../service_kit/battle_types/' + battleType + '_big.png'"/>
						</block>
						<block>
							<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
							<style>
								<position value="absolute"/>
								<top value="-3"/>
								<left value="-10"/>
								<width value="75px"/>
								<height value="60px"/>
							</style>
							<bind name="style" value="'backgroundImage'; curSeasonIndex != 0	? 'url:' + statData.seasonList[curSeasonIndex].iconPath
																			: ''"/>
						</block>
					</block>
					<block>
						<bind name="instance" value="'RankedSeasonDropdown'; isRankedBattle &amp;&amp; statData.basicStats.gamesPlayed	? {	_items: statData.seasonList,
																													_curItemIndex: curSeasonIndex }
																												: null"/>
					</block>
					<block>
						<bind name="transition" value="isNewRankedBattle &amp;&amp; curSeasonIndex; 0.15;	{alpha: 0, scaleY: 0, ubScaleY: 0};
																					{alpha: 1, scaleY: 1, ubScaleY: 1}"/>
						<bind name="instance" value="'RankedLeagueDropdown'; isNewRankedBattle	? {	_items: statData.leagueList,
																					_curItemIndex: curLeagueIndex }
																				: null"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="statData.shipsList.length == 0"/>
					<style>
						<width value="100%"/>
						<marginTop value="16px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<block className="HorizontalDividerTwoPx">
							<style>
								<width value="100%"/>
								<height value="2px"/>
								<backgroundSize value="fill"/>
								<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
							</style>
						</block>
					</block>
					<block>
						<styleClass value="$MiddleAligned"/>
						<style>
							<marginTop value="4px"/>
						</style>
						<bind name="instance" value="'EmptyStatusParagraph'; {	_text: 'IDS_NO_BATTLES_PLAYED_IN_' + toUpperCase(battleType),
																_maxWidth: 200	}"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="16px"/>
					</style>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text: 'IDS_SELECT_ALL_SHIPS_FOR_DETAILED_STAT'	}"/>
					<bind name="instance" value="'AllShipsSelectedItem';
					statData.shipsList.length != 0 	? {	shipListLength: statData.shipsList.length,
														totalWinRate: statData.diagStats.totalWinRate,
														currentVehicleId: statData.vehicleId,
														gamesPlayed: statData.diagStats.gamesPlayed	}
													: null"/>
				</block>
				<block>
					<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
					<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
					<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
					<styleClass value="$DefaultScrollBar"/>
					<style>
						<width value="100%"/>
						<height value="100%f"/>
					</style>
					<bind name="repeat" value="shipsList; 'ShipRowItem'; {	battleType: battleType,
															currentVehicleId: statData.vehicleId,
															curSeasonIndex: curSeasonIndex,
															seasonId: seasonId,
															_curItemIndex: _curItemIndex	};
														!userPrefs.shipSortStatsDirection"/>
				</block>
				<block>
					<bind name="instance" value="'ShipSortingDropdown'; statData.shipsList.length &gt;= 2	? { statData: statData.shipsList }
																						: null"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipStatsTooltip">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="var" value="{	SHIP_STATS_SORT_TYPES_WITH_WIN_RATE: [0, 2, 3, 4],
					SHIP_STATS_SORT_TYPES_WITH_BATTLE_COUNT: [1]	 }"/>
		<bind name="watch" value="'isWinratePercentShown'; isIn(userPrefs.shipStatsSortIndex, SHIP_STATS_SORT_TYPES_WITH_WIN_RATE)"/>
		<bind name="watch" value="'shipTitle'; isWinratePercentShown	? 'IDS_PROFILE_SUMMARY_STATS_SHIP_WINRATE_COLON'
													: 'IDS_PROFILE_SUMMARY_STATS_SHIP_BATTLECOUNT_COLON' "/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderShip'; {	_shipId: _vehicleId,
														_withFlag: true	}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text: 'IDS_SELECT_SHIP_FOR_DETAILED_STAT'	}"/>
			</block>
		</block>
	</block>
	<block className="RankedSeasonDropdown">
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="catch" value="'ItemChooser.historySeasonChanged'"/>
		<bind name="var" value="{ _curItemIndex: _curItemIndex ? _curItemIndex : 0 }"/>
		<bind name="watch" value="'seasonId'; _items[_curItemIndex].id"/>
		<bind name="dispatch" value="'ItemChooser.historySeasonChanged'; 'curSeasonIndexChanged'; { curSeasonIndex: _curItemIndex }; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="dispatch" value="'curSeasonIndexChanged'; 'evExecuteActionDelayed'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.05"/>
		<bind name="action" value="'evExecuteActionDelayed'; 'rankedSeasonChanged'; { seasonId: seasonId }"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
											_text: 'IDS_CHOOSE_RANK_SEASON'	}"/>
		<bind name="instance" value="'ItemChooser'; {	_items: _items,
										curIndex: _curItemIndex,
										_choosedItemRenderer: 'LargeTextChoosedItemRendererRanked',
										_choosedItemRendererParams: { isSeasonDropdown: true },
										_listItemRenderer: 'TextListItemRendererRanked',
										_listItemRendererData: { isSeasonDropdown: true },
										onItemSelectedEvent: 'historySeasonChanged',
										_name: 'RankedSeason'	}"/>
	</block>
	<block className="RankedLeagueDropdown">
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="catch" value="'ItemChooser.historyLeagueChanged'"/>
		<bind name="var" value="{ _curItemIndex: _curItemIndex ? _curItemIndex : 0 }"/>
		<bind name="watch" value="'leagueId'; _items[_curItemIndex].id"/>
		<bind name="dispatch" value="'ItemChooser.historyLeagueChanged'; 'curLeagueIndexChanged'; { curLeagueIndex: _curItemIndex }; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="dispatch" value="'curLeagueIndexChanged'; 'evExecuteActionDelayed'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.05"/>
		<bind name="action" value="'evExecuteActionDelayed'; 'rankedLeagueChanged'; { leagueId: leagueId }"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
											_text: 'IDS_CHOOSE_RANK_LEAGUE'	}"/>
		<bind name="instance" value="'ItemChooser'; {	_items: _items,
										curIndex: _curItemIndex,
										_choosedItemRenderer: 'LargeTextChoosedItemRendererRanked',
										_listItemRenderer: 'TextListItemRendererRanked',
										onItemSelectedEvent: 'historyLeagueChanged',
										_name: 'RankedLeague'	}"/>
	</block>
	<block className="ShipSortingDropdown">
		<bind name="var" value="{ items: [	'IDS_SORT_BY_WIN_PERCENT',
							'IDS_SORT_BY_BATTLES_COUNT',
							'IDS_SORT_BY_LEVEL',
							'IDS_SORT_BY_NATION',
							'IDS_SORT_BY_SHIPTYPE'	]	}"/>
		<style>
			<width value="100%"/>
			<align value="center"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold17NM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<marginTop value="8px"/>
			</style>
			<default_text value="IDS_SORTING_TYPE_COLON"/>
		</block>
		<block>
			<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
			<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
			<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
			<bind name="watch" value="'_curItemIndex'; userPrefs.shipStatsSortIndex == null ? 0 : userPrefs.shipStatsSortIndex"/>
			<bind name="action" value="'shipSortStatsChanged'; 'setUserPref' ; { value: _curItemIndex, name: 'shipStatsSortIndex' }"/>
			<bind name="action" value="'shipSortStatsDirectionChanged'; 'setUserPref' ; {	value: !userPrefs.shipSortStatsDirection,
																			name: 'shipSortStatsDirection'	}"/>
			<bind name="request" value="'shipSortStatsChanged'; 'sortShipStats' ; { ids: items[_curItemIndex] }"/>
			<bind name="catch" value="'ItemChooser.shipsSortSelected'"/>
			<bind name="changeDispatch" value="_curItemIndex; 'shipSortStatsChanged'"/>
			<bind name="changeDispatch" value="_direction; 'shipSortStatsDirectionChanged'"/>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'ItemChooser'; {	_items: items,
											curIndex: _curItemIndex,
											_choosedItemRenderer: 'DefaultTextChoosedItemRenderer',
											_listItemRenderer: 'TextListItemRenderer',
											onItemSelectedEvent: 'shipsSortSelected',
											_itemChooserTooltipText: 'IDS_HINT_SHIP_CAROUSEL_SORT',
											_name: 'ShipSorting'	}"/>
		</block>
	</block>
	<block className="PlayerSummaryItem">
		<styleClass value="$Fullsize"/>
		<style>
			<marginLeft value="-32px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 1 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'PlayerSummaryCommon'; { _battleType: _battleType, _statData: _statData }"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0 + 2 * 0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<bind name="visible" value="_statData.diagStats.gamesPlayed &gt; 0 &amp;&amp; _statData.vehicleId == 0"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="190px"/>
			</style>
			<bind name="instance" value="'PlayerSummaryDiagrams'; {	_curItemIndex: _curItemIndex,
													_statData: _statData,
													_battleType: _battleType	}"/>
		</block>
	</block>
	<block className="PlayerSummaryCommon">
		<bind name="stageSize"/>
		<bind name="watch" value="'isNoShipSelected'; _statData.vehicleId == 0"/>
		<bind name="watch" value="'isBattlePlayed'; _statData.basicStats.gamesPlayed &gt; 0"/>
		<styleClass value="$Fullsize"/>
		<style>
			<marginBottom value="720:16,1080:32ah"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="24px"/>
			</style>
			<block>
				<bind name="instance" value="'ProfilePlayerPercentEfficiency'; {	_value: format(_statData.basicStats.gamesPlayed, -1), _label: 'IDS_GAME_PLAYED'}"/>
			</block>
			<block>
				<bind name="instance" value="'ProfilePlayerPercentEfficiency'; {	_value: _statData.basicStats.winRate, _label: 'IDS_VICTORY_PERCENT'}"/>
			</block>
			<block>
				<bind name="instance" value="'ProfilePlayerPercentEfficiency'; {	_value: format(_statData.basicStats.averageExp, -1), _label: 'IDS_EXPERIENCE_C_AVERAGE'}"/>
			</block>
			<block>
				<bind name="instance" value="'ProfilePlayerPercentEfficiency'; {	_value: _statData.basicStats.maxFrags, _label: 'IDS_MAX_SHIPS_PER_BATTLE'}"/>
			</block>
			<block>
				<bind name="instance" value="'ProfilePlayerPercentEfficiency'; {	_value: _statData.basicStats.killDeath, _label: 'IDS_DESTROY_RATIO'}"/>
			</block>
			<block>
				<bind name="visible" value="_battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE &amp;&amp; isBattlePlayed &amp;&amp; _statData.seasonStats.rank &amp;&amp; isNoShipSelected"/>
				<bind name="style" value="'width';		stageWidth &lt; 1440 ? '152px'	: '162px'"/>
				<bind name="style" value="'marginTop';	stageWidth &lt; 1440 ? '0'		: '5px'"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: 'IDS_BEST_RANK_TOOLTIP' }"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'RankStereotypeRenderer'; {	_iconSize: 64,
															_league: _statData.seasonStats.league,
															_rank: _statData.seasonStats.rank,
															_isTopRank: _statData.seasonStats.rank == SC.Ranked.RANK_CONSTANTS.TOP_RANK,
															_isGuaranteed: true,
															_isTooltipHidden: true	}"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefaultBoldNM"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<style>
						<width value="100%"/>
						<textAlign value="center"/>
					</style>
					<default_text value="IDS_BEST_RANK"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.24; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="100%f"/>
				<marginTop value="720:0,1080:16ah"/>
			</style>
			<block>
				<style>
					<width value="62sw"/>
					<maxWidth value="1100"/>
				</style>
				<bind name="repeat" value="_statData.basicStats.colData; 'StatColumn'; {	_array: _statData.basicStats.colData,
																		_statData: _statData }"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PlayerSummaryDiagrams">
		<style>
			<height value="190px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<height value="100%"/>
				<width value="1280:300,1920:310aw"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_STATISTICS_BY_NATIONS_TOOLTIP' }"/>
				<block type="text">
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_NATIONS"/>
				</block>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
				</style>
				<bind name="instance" value="'NationsDiagram'; {	_gamesPlayed: _statData.diagStats.gamesPlayed,
												_battlesByNation: _statData.diagStats.nations }"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<width value="1280:250,1920:310aw"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_STATISTICS_BY_SHIP_TYPES_TOOLTIP' }"/>
				<block type="text">
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_SHIP_TYPES"/>
				</block>
			</block>
			<block>
				<style>
					<marginTop value="12px"/>
				</style>
				<bind name="instance" value="'ShipTypeDiagram'; {	_gamesPlayed: _statData.diagStats.gamesPlayed,
													_battlesByShipType: _statData.diagStats.classes	}"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<width value="1280:280,1920:310aw"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_STATISTICS_BY_SHIP_LEVELS_TOOLTIP' }"/>
				<block type="text">
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_LEVELS"/>
				</block>
			</block>
			<block>
				<style>
					<height value="140px"/>
					<marginTop value="12px"/>
				</style>
				<bind name="repeat" value="_statData.diagStats.levels.shipLevels; 'LineDiagramItem'; { _maxValue: _statData.diagStats.levels.maxValue }"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="NationsDiagram">
		<bind name="catch" value="'sectorRollOver'"/>
		<bind name="catch" value="'sectorRollOut'"/>
		<bind name="var" value="{ showGamesPlayed: true, currentItemId: null }"/>
		<style>
			<marginLeft value="62px"/>
			<height value="140px"/>
		</style>
		<block>
			<style>
				<marginTop value="70px"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="_battlesByNation.diagram; 'CircleDiagramItem'; {	currentItemId: currentItemId,
																		showGamesPlayed: showGamesPlayed	}"/>
			<block>
				<bind name="transition" value="showGamesPlayed; 0.2; {alpha: 0}; {alpha: 1}"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_GAME_PLAYED_TOOLTIP' }"/>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAlignedAbsolutely"/>
				<block type="text">
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="_gamesPlayed"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="75px"/>
				<flow value="vtile"/>
			</style>
			<bind name="style" value="'height'; _battlesByNation.legend.length &lt;= 4	? (_battlesByNation.legend.length * 35) +'px'
																	: '140px' "/>
			<bind name="repeat" value="_battlesByNation.legend; 'NationLegendItem'; {	currentItemId: currentItemId,
																		showGamesPlayed: showGamesPlayed	}"/>
		</block>
	</block>
	<block className="ShipTypeDiagram">
		<bind name="catch" value="'sectorRollOver'"/>
		<bind name="catch" value="'sectorRollOut'"/>
		<bind name="var" value="{ showGamesPlayed: true, currentItemId: null }"/>
		<style>
			<marginLeft value="62px"/>
			<height value="140px"/>
		</style>
		<block>
			<style>
				<marginTop value="70px"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="_battlesByShipType.diagram; 'CircleDiagramItem'; {	currentItemId: currentItemId,
																			showGamesPlayed: showGamesPlayed }"/>
			<block>
				<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_GAME_PLAYED_TOOLTIP' }"/>
				<bind name="transition" value="showGamesPlayed; 0.2; {alpha: 0}; {alpha: 1}"/>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAlignedAbsolutely"/>
				<block type="text">
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="_gamesPlayed"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="75px"/>
				<flow value="vtile"/>
			</style>
			<bind name="style" value="'height'; _battlesByShipType.legend.length &lt;= 4 ? ((_battlesByShipType.legend.length * 35) + 'px') : '140px' "/>
			<bind name="repeat" value="_battlesByShipType.legend; 'ShipTypeLegendItem'; {	currentItemId: currentItemId,
																			showGamesPlayed: showGamesPlayed }"/>
		</block>
	</block>
	<block className="CircleDiagramItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: text }"/>
		<bind name="dispatch" value="'rollOver';	'sectorRollOver';	{ currentItemId: itemId, showGamesPlayed: false }"/>
		<bind name="dispatch" value="'rollOut';	'sectorRollOut';	{ currentItemId: itemId, showGamesPlayed: true }"/>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<block className="lesta.display.Sector" type="native">
				<bind name="appear" value="'addedToStage'; 0.2; 0.4; {radius: 44}; {radius: 62}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="transition" value="rollOver || (currentItemId == itemId &amp;&amp; !showGamesPlayed); 0.15; {radius: 62}; {radius: 65}"/>
				<bind name="color" value="color"/>
				<bind name="offset" value="offset"/>
				<bind name="arc" value="arc"/>
				<params>
					<param name="innerRadius" value="44"/>
					<param name="radius" value="62"/>
				</params>
			</block>
		</block>
		<block>
			<bind name="transition" value="rollOver || (currentItemId == itemId &amp;&amp; !showGamesPlayed); 0.2; {alpha: 0}; {alpha: 1}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<styleClass value="$MouseDisable"/>
			<block type="text">
				<styleClass value="$TextDefaultBold21NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="value"/>
			</block>
		</block>
	</block>
	<block className="NationLegendItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dispatch" value="'rollOver';	'sectorRollOver';	{ currentItemId: itemId, showGamesPlayed: false }"/>
		<bind name="dispatch" value="'rollOut';	'sectorRollOut';	{ currentItemId: itemId, showGamesPlayed: true }"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: text }"/>
		<style>
			<width value="55px"/>
			<height value="34px"/>
			<marginLeft value="8px"/>
			<align value="middle"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<height value="1px"/>
				<align value="middle"/>
			</style>
			<block className="lesta.display.Circle" type="native">
				<bind name="color" value="color"/>
				<bind name="appear" value="'addedToStage'; 0.3; 0; {radius: 0}; {radius: 4}"/>
				<bind name="transition" value="rollOver || (currentItemId == itemId &amp;&amp; !showGamesPlayed); 0.15; {radius: 4}; {radius: 6}"/>
			</block>
			<block>
				<style>
					<marginLeft value="12px"/>
				</style>
				<bind name="instance" value="'NationFlagsTiny'; { _shipCountry: itemId }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipTypeLegendItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dispatch" value="'rollOver';	'sectorRollOver';	{ currentItemId: itemId, showGamesPlayed: false }"/>
		<bind name="dispatch" value="'rollOut';	'sectorRollOut';	{ currentItemId: itemId, showGamesPlayed: true }"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: text }"/>
		<style>
			<flow value="horizontal"/>
			<width value="46px"/>
			<height value="34px"/>
			<marginLeft value="8px"/>
			<align value="middle"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<height value="1px"/>
				<align value="middle"/>
			</style>
			<block className="lesta.display.Circle" type="native">
				<bind name="color" value="color"/>
				<bind name="transition" value="rollOver || (currentItemId == itemId &amp;&amp; !showGamesPlayed); 0.15; {radius: 4}; {radius: 6}"/>
				<bind name="appear" value="'addedToStage'; 0.3; 0; {radius: 0}; {radius: 4}"/>
			</block>
			<block>
				<style>
					<marginLeft value="8px"/>
				</style>
				<bind name="instance" value="'ShipIcon'; { _shipType: itemId }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="LineDiagramItem">
		<bind name="watch" value="'animationTime'; 0.2 + value * 0.0007"/>
		<bind name="watch" value="'valueRation'; value/_maxValue * 100"/>
		<bind name="changeDispatch" value="value; 'valueChanged'"/>
		<bind name="changeDispatch" value="_maxValue; 'valueChanged'"/>
		<bind name="dispatch" value="'addedToStage'; 'valueChanged'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: text }"/>
		<style>
			<width value="26px"/>
			<height value="100%"/>
			<align value="center|bottom"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block type="text">
			<bind name="appear" value="'valueChanged'; animationTime; 0.4; {intValue: 0}; {intValue: value}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$TextDefault13NM"/>
			<style>
				<width value="30px"/>
				<textAlign value="center"/>
				<alpha value="0.9"/>
				<marginBottom value="4px"/>
			</style>
			<bind name="style" value="'fontSize'; _maxValue &gt; 999 ? 11 : 13"/>
			<bind name="text" value="value"/>
		</block>
		<block>
			<bind name="appear" value="'valueChanged'; animationTime; 0.4; {height: 0}; {height: value &amp;&amp; valueRation &gt; 1 ? valueRation : 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<style>
				<height value="0px"/>
				<width value="18px"/>
			</style>
			<bind name="style" value="'backgroundColor'; _columnColor ? _columnColor : 0xFF2DF0C9"/>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="label"/>
			</block>
		</block>
	</block>
	<block className="ProfilePlayerPercentEfficiency">
		<bind name="stageSize"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: _label + '_TOOLTIP' }"/>
		<style>
			<marginTop value="16px"/>
		</style>
		<bind name="style" value="'width'; stageWidth &lt; 1440 ? '152px' : '162px'"/>
		<block type="text">
			<bind name="class" value="stageWidth &lt; 1440 ? '$TextDefaultBold50NM' : '$TextDefaultBold60NM'"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_value"/>
			<bind name="name" value="'Stat_' + _label"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<marginTop value="8px"/>
			</style>
			<bind name="text" value="_label"/>
		</block>
	</block>
	<block className="LargeTextChoosedItemRendererRanked">
		<bind name="watch" value="'isSeasonDropdown'; _choosedItemRendererParams.isSeasonDropdown"/>
		<style>
			<height value="35px"/>
			<marginLeft value="4px"/>
			<marginTop value="1px"/>
		</style>
		<block type="text">
			<styleClass value="$TextItemChooserDockBig"/>
			<style>
				<hitTest value="false"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_item.id	? tr((	isSeasonDropdown	? 'IDS_SEASON_TITLE_'	: 'IDS_RANKED_LEAGUE_') + _item.id)
								: 		isSeasonDropdown	? 'IDS_ALL_SEASONS'		: 'IDS_ALL_LEAGUES'"/>
		</block>
	</block>
	<block className="TextListItemRendererRanked">
		<bind name="watch" value="'isSeasonDropdown'; _listItemRendererData.isSeasonDropdown"/>
		<bind name="watch" value="'text'; id == 0	? isSeasonDropdown ? 'IDS_ALL_SEASONS' : 'IDS_ALL_LEAGUES'
									: isSeasonDropdown ? ('IDS_SEASON_TITLE_' + id) : ('IDS_RANKED_LEAGUE_' + id)"/>
		<bind name="name" value="text"/>
		<bind name="dispatch" value="'click'; 'ItemChooserInnerEventDublicate.'	+ _onItemSelectedEvent"/>
		<bind name="dispatch" value="'click'; 'ItemChooserInnerEvent.'			+ _onItemSelectedEvent; { _curItemIndex: $index }"/>
		<styleClass value="$ContextMenuListItem"/>
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="_curItemIndex == $index"/>
		</block>
		<block>
			<bind name="visible" value="id != 0 &amp;&amp; isSeasonDropdown"/>
			<bind name="scaleX" value="0.4"/>
			<bind name="scaleY" value="0.4"/>
			<style>
				<width value="28px"/>
				<height value="22px"/>
				<marginLeft value="8px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:' + iconPath"/>
		</block>
		<block type="text">
			<bind name="class" value="_curItemIndex == $index ? '$TextDefaultBoldNM' : '$TextDefaultNM'"/>
			<style>
				<maxWidth value="250"/>
				<marginLeft value="8px"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="text"/>
		</block>
	</block>
	<block className="ShipRowItem">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; vehicleId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="tooltip" value="'ShipStatsTooltip'; { _vehicleId: vehicleId }"/>
		<style>
			<width value="100%"/>
			<height value="36px"/>
		</style>
		<block className="dock_submenu_item" type="native">
			<bind name="clickSplit"/>
			<bind name="action" value="'left_click'; 'vehicleIdChanged'; { vehicleId: vehicleId }"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-1px"/>
				<marginBottom value="2px"/>
			</style>
			<bind name="selected" value="currentVehicleId == vehicleId"/>
			<bind name="alpha" value="currentVehicleId == vehicleId ? 2 : 1"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<height value="100%"/>
				<hitTest value="false"/>
				<align value="middle"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginRight value="16px"/>
				</style>
				<bind name="instance" value="'ShipLineItemNM'; {	_shipId: vehicleId,
												_withFlag: true,
												_fontClass: '$TextDefaultBold17NM',
												_width: '100%'	}"/>
			</block>
			<block>
				<block type="text">
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="text" value="userPrefs.shipStatsSortIndex == 1 ? battlesCount : winRate"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="AllShipsSelectedItem">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'currentVehicleId'; 0"/>
		<bind name="var" value="{ vehicleId: 0 }"/>
		<style>
			<width value="100%"/>
			<height value="36px"/>
		</style>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginBottom value="2px"/>
				<marginTop value="2px"/>
			</style>
			<bind name="clickSplit"/>
			<bind name="action" value="'left_click'; 'vehicleIdChanged'; { vehicleId: 0 }"/>
			<bind name="selected" value="currentVehicleId == vehicleId"/>
			<bind name="style" value="'alpha'; currentVehicleId == vehicleId ? 2 : 1"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<height value="100%"/>
				<align value="middle"/>
				<hitTest value="false"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<style>
					<width value="100%"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="subst('IDS_SUBST_ALL_VEHICLES_WITH_COUNTER', [], { _shipCount: shipListLength })"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="userPrefs.shipStatsSortIndex == 1 ? gamesPlayed : totalWinRate"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
	</block>
	<block className="StatsRowTooltip">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _hintVehicleId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: _tooltipText }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="_hintVehicleId"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemShipWithTitle'; _hintVehicleId	? {	_title: 'IDS_ON_SHIP_STATS',
																			_shipId: _hintVehicleId,
																			_withFlag: true	}
																		: null"/>
			</block>
		</block>
	</block>

	<!-- player_profile_summary_pve -->
	<block className="PlayerSummaryPve">
		<styleClass value="$MiddleAligned"/>
		<style>
			<flow value="horizontal"/>
			<marginBottom value="24px"/>
		</style>
		<bind name="collectionDH" value="CC.rankedSeasonHistory; 'statDataEntities'; 'statToShow'"/>
		<bind name="entityDH" value="'statDataEntity'; statDataEntities[0].id"/>
		<bind name="watchDH" value="'statData'; ['statDataEntity.dataComponent.evDataChanged']; statDataEntity.dataComponent.data"/>
		<bind name="repeat" value="statData.basicStats.colData; 'PlayerSummaryItemPveRow'; {}"/>
	</block>
	<block className="PlayerSummaryItemPveRow">
		<style>
			<marginTop value="40px"/>
			<width value="1280:274,1920:310aw"/>
		</style>
		<block className="BlurMapCustom">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="mc_blurmap5_feather" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<block type="text">
			<style>
				<textAlign value="center"/>
				<width value="100%"/>
				<height value="720:70,1080:120ah"/>
			</style>
			<bind name="style" value="'marginTop'; $index == 1 ? '-15px' : '0px'"/>
			<styleClass value="$TextDefaultBold25NM"/>
			<bind name="text" value="'IDS_SUMMARY_HEADER_' + toUpperCase(block)"/>
		</block>
		<block>
			<style>
				<height value="720:70,1080:120ah"/>
				<minWidth value="70"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="style" value="'marginTop'; $index == 1 ? '15px' : '0px'"/>
			<styleClass value="$MiddleAligned"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_PVE_OPERATION_BATTLES_PLAYED_TOOLTIP_' + $index)}"/>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$ResultsReward"/>
				<bind name="text" value="gamesPlayed"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="274px"/>
				<marginTop value="720:40,1080:80ah"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<height value="140px"/>
					<marginTop value="5px"/>
				</style>
				<bind name="repeat" value="diag.battles; 'LineDiagramItem'; {maxValue: diag.maxValue, _columnColor: 0xFFf3ae5a}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>

	<!-- player_stereotype -->
	<block className="PlayerStereotypeDogTag">
		<style>
			<width value="100%f"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<block>
				<style>
					<width value="80px"/>
					<height value="80px"/>
				</style>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
													_text: 'IDS_TOOLTIP_PLAYER_STEREOTYPE_DOGTAG' }"/>
				<block className="PlayerDogTagContainer" type="ublock">
					<bind name="build!" value="{ _playerId: _playerDbId }"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%f"/>
				<marginLeft value="8px"/>
			</style>
			<bind name="instance" value="'PlayerStereotype'; {
											_playerDbId: _playerDbId,
											_clanTag: _clanTag,
											_clanTagColor: _clanTagColor,
											_noRank: _noRank,
											_isBot: _isBot,
											_isPlayerNameDisable: _isPlayerNameDisable,
											_isAccountButton: _isAccountButton,
											_isAbuser: _isAbuser,
											_ctkStatus: _ctkStatus,
											_abuseStatus: _abuseStatus,
											_isPremiumAccount: _isPremiumAccount,
											_isWithKarma: _isWithKarma
											}"/>
		</block>
	</block>
	<block className="PlayerStereotype">
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId"/>
		<bind name="watchDH" value="'isSelf';			[]; playerEntity.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'clanId';			['playerEntity.clanman.evClanIdChanged']; playerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'pureName';		['playerEntity.accountName.evChanged']; playerEntity.accountName.name"/>
		<bind name="watchDH" value="'rank'; 			['playerEntity.accountRank.evRankChanged']; playerEntity.accountRank.rank"/>
		<bind name="watchDH" value="'league'; 			['playerEntity.accountRank.evRankChanged']; playerEntity.accountRank.league"/>
		<bind name="watchDH" value="'seasonId'; 		['playerEntity.accountRank.evRankChanged']; playerEntity.accountRank.seasonId"/>
		<bind name="watchDH" value="'isInSameDivision';['playerEntity.divisionMember.evDivisionChanged']; playerEntity.divisionMember.isInSameDivision"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; 	['clanEntity.clan.evTagChanged']; _clanTag ? _clanTag : clanEntity.clan.tag"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; clanId"/>
		<bind name="watchDH" value="'clanTagColor'; 	['clanExtendedEntity.clanExtended.evColorChanged']; _clanTagColor ? _clanTagColor : clanExtendedEntity.clanExtended.color"/>
		<bind name="watch" value="'isWithRank'; !_noRank &amp;&amp; !_isBot &amp;&amp; rank != 0 &amp;&amp; rank != null"/>
		<bind name="firstEntityDH" value="'accountSelfEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'karma'; ['accountSelfEntity.accountSelf.evKarmaChanged']; accountSelfEntity.accountSelf.karma"/>
		<style>
			<width value="100%f"/>
			<marginTop value="16"/>
		</style>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<block>
				<style>
					<width value="100%f"/>
					<marginLeft value="-4px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="style" value="'hitTest'; _isPlayerNameDisable ? false : true"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_TOOLTIP_PLAYER_STEREOTYPE_NAME'}"/>
				<bind name="instance" value="'PlayerNameAndClanTag'; {
													_isSelf: 			isSelf,
													_isAbuser: 			_isAbuser || _abuseStatus == SC.Common.ABUSE_STATUS.SUSPECT,
													_ctkStatus:			_ctkStatus || _abuseStatus == SC.Common.ABUSE_STATUS.CONFIRMED,
													_isPremiumAccount:	_isPremiumAccount,
													_isInSameDivision:  isInSameDivision,
													_fontSize:			17,
													_playerName:		pureName,
													_clanTag:			clanTag,
													_clanTagColor:		clanTagColor,
													_isDead:			false,
													_isBot: _isBot
													}"/>
			</block>
			<block>
				<bind name="visible" value="_isWithKarma"/>
				<bind name="tooltip" value="'SimpleHeaderSubheaderTooltip'; {_headerText: 'IDS_TOOLTIP_KARMA_HEADER', _subheaderText: 'IDS_TOOLTIP_KARMA_DESCRIPTION'}"/>
				<style>
					<marginTop value="-14px"/>
					<marginLeft value="-4px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault13NM"/>
					<style>
						<margin value="8px"/>
					</style>
					<bind name="text" value="format(karma)"/>
					<bind name="name" value="'karma_account_progress_item'"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block type="text">
			<bind name="visible" value="isWithRank"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginTop value="8"/>
				<maxWidth value="152"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="subst('IDS_TOOLTIP_RANKED_RANK_X_LEAGUE_' + league, [], {_rank: rank})"/>
		</block>
	</block>

	<!-- price -->
	<block className="PriceTag">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<bind name="visible" value="priceInfo.basePrice &amp;&amp; priceInfo.finalPrice != priceInfo.basePrice &amp;&amp; _showDiscountTag"/>
			<bind name="tooltip" value="'DiscountTooltip'; { priceInfo: priceInfo, _customLabel: _customLabel, _isExternal: _isExternal }"/>
			<bind name="name" value="'icon_discount_' + priceInfo.id"/>
			<block className="icon_discount" type="native">
				<style>
					<marginTop value="4px"/>
					<marginRight value="-3px"/>
				</style>
				<bind name="gotoAndStop!" value="_large || _medium ? 'large' : 'normal'"/>
			</block>
		</block>
		<bind name="watch" value="'textColor';	priceInfo.currency == SC.Common.CURRENCIES.GOLD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
								priceInfo.currency == SC.Common.CURRENCIES.FREE_XP	? SC.Ui_styles.SERVICE_COLORS.LIGHT_GREEN :
								priceInfo.currency == SC.Common.CURRENCIES.ELITE_XP	? SC.Ui_styles.SERVICE_COLORS.LIGHT_BLUE
																					: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<block type="text">
			<bind name="name" value="'price_' + priceInfo.id"/>
			<bind name="class" value="	_customClass	?	_customClass :
						_small			?	'$TextSecondaryBold':
						_medium			? 	'$TextHeaderBold' :
						_large			?	'$TextAccentBold'
										:	'$TextDefaultBold'"/>
			<bind name="style" value="'textColor';	textColor"/>
			<bind name="alpha" value="textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.9 : 1"/>
			<bind name="text" value="format(priceInfo.finalPrice, -1)"/>
		</block>
		<block>
			<bind name="style" value="'marginTop';	_large	? '-2px' :
									_medium	? '-7px' :
									_small	? '0px'
											: '1px'"/>
			<bind name="style" value="'marginLeft';	_large	? '-1px' :
									_medium ? '0px' :
									_small	? '1px'
											: '0px'"/>
			<bind name="instance" value="'Currency'; (priceInfo.currency == SC.Common.CURRENCIES.MONEY)		?	null :
									(priceInfo.currency == SC.Common.CURRENCIES.ACC_POINTS)	?	null
																							:	{	_currency: priceInfo.currency,
																									_large: _large,
																									_medium: _medium }"/>
		</block>
	</block>
	<block className="Currency">
		<bind name="watch" value="'iconName';	_currency +	(	_extraLarge				? '_large' :
												(_large || _medium)		? ''
																		: '_small')"/>
		<bind name="style" value="'marginTop';	_extraLarge				? '0px' :
								(_large || _medium)		? '8px'
														: '3px'"/>
		<block>
			<bind name="style" value="'width';	_extraLarge				? '44px' :
								(_large || _medium)		? '26px'
														: '15px'"/>
			<bind name="style" value="'height';	_extraLarge				? '44px' :
								(_large || _medium)		? '26px'
														: '16px'"/>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/currencies/icon_' + iconName + '.png'"/>
		</block>
	</block>
	<block className="PriceDeficit">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="!_hideIcon"/>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_warning_red" type="native">
				<bind name="style" value="'marginTop'; _large ? '5px' : '0px'"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<default_text value="IDS_NOT_ENOUGH"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<bind name="style" value="'marginLeft'; _large ? '2px' : '0px'"/>
			<styleClass value="$TextDefaultBold"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="text" value="format(_deficit, -1)"/>
		</block>
		<block>
			<bind name="style" value="'marginTop';	_large	? '-2px' :
									_medium	? '-7px' :
									_small	? '0px'
											: '1px'"/>
			<bind name="style" value="'marginLeft';	_large	? '-1px' :
									_medium ? '0px' :
									_small	? '1px'
											: '0px'"/>
			<bind name="instance" value="'Currency'; (priceInfo.currency != SC.Common.CURRENCIES.MONEY)	?	{
																								_currency: priceInfo.currency,
																								_large: _large,
																								_medium: _medium,
																								_duplicateCurrency: _duplicateCurrency
																							}
																						:	null"/>
		</block>
	</block>
	<block className="PriceInLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextDefault"/>
				<default_text value="IDS_COST_COLON"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$AlignRight"/>
				<bind name="instance" value="'PriceTag'; { priceInfo: priceInfo }"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="priceInfo.finalPrice != priceInfo.basePrice "/>
			<bind name="countdown" value="priceInfo.till; 'timeLeft'; 'HIGHEST'; ''; ''; 'rawTimeLeft'"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-3"/>
				</style>
				<styleClass value="$TextSecondary"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="priceInfo.type == 2 				? 'IDS_SHARE_FROM_CLAN_BUILDINGS_TIMING' :
						priceInfo.type == 3	? 'IDS_PERMOFLAGE_FIRST_BUY_DISCOUNT' :
						(rawTimeLeft &gt; 0) 									? tr('IDS_SHARE_ENDS_IN') + ' ' + timeLeft
																			: tr('IDS_SHARE_IS_EXPIRING_WARNING')"/>
			</block>
			<block>
				<bind name="visible" value="priceInfo.basePrice != 0"/>
				<style>
					<marginRight value="15px"/>
				</style>
				<block type="text">
					<styleClass value="$TextSecondaryBold"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<bind name="text" value="format(priceInfo.basePrice, -1)"/>
				</block>
				<block className="icon_price_strikethrough" type="native">
					<style>
						<width value="110%"/>
						<height value="40%"/>
						<top value="60%"/>
						<marginTop value="-50%"/>
						<position value="absolute"/>
					</style>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PriceTagWithLabel">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="class" value="_bold ? '$FontFamilyDefaultBold' : '$None'"/>
			<bind name="text" value="_label"/>
		</block>
		<block>
			<style>
				<marginLeft value="4px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { 	priceInfo: priceInfo, _showDiscountTag: _showDiscountTag,
										_large: _large, _medium: _medium, _small: _small, _duplicateCurrency: _duplicateCurrency}"/>
		</block>
	</block>
	<block className="DiscountTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<styleClass value="$DefaultTooltipWidth"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="19px"/>
					<height value="17px"/>
					<backgroundImage value="url:../service_kit/icons/icon_discount.png"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorGolden'"/>
				<bind name="text" value="(	priceInfo.type == 1	? 'IDS_EVENT_SHARE' :
							priceInfo.type == 2	? 'IDS_SHARE_FROM_CLAN_BUILDINGS' :
							priceInfo.isPrivate 					? 'IDS_PERSONAL_DISCOUNT'
																	: 'IDS_PROMO_EVENT' )"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<style>
				<marginTop value="0px"/>
			</style>
			<bind name="instance" value="'PriceInLine'; { priceInfo: priceInfo }"/>
		</block>
		<block>
			<bind name="visible" value="_isExternal"/>
			<styleClass value="$InfoBlockIndent"/>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-5px"/>
					<marginLeft value="-12px"/>
					<marginRight value="-12px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="'IDS_HINT_REDIRECT_TO_STORE'"/>
			</block>
		</block>
	</block>
	<block className="DiscountTag">
		<bind name="visible" value="priceInfo.basePrice != null &amp;&amp; (priceInfo.finalPrice != priceInfo.basePrice)"/>
		<bind name="tooltip" value="'DiscountTooltip'; { priceInfo: priceInfo, _customLabel: _customLabel, _isExternal: _isExternal }"/>
		<bind name="name" value="'icon_discount_' + priceInfo.id"/>
		<bind name="watch" value="'large'; _large ? '_large' : ''"/>
		<block>
			<bind name="style" value="'width'; _large ? '22px' : '19px'"/>
			<bind name="style" value="'height'; _large ? '20px' : '17px'"/>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_discount' + large + '.png'"/>
		</block>
	</block>

	<!-- progress_bar -->
	<block className="DefaultProgressBar">
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="style" value="'height'; _height ? _height : '4px'"/>
		<style>
			<backgroundImage value="url:../service_kit/progress_bars/bar_default_bg.png"/>
			<background9Slice value="[2,2]"/>
			<paddingTop value="1px"/>
			<paddingLeft value="1px"/>
			<paddingRight value="1px"/>
			<paddingBottom value="1px"/>
		</style>
		<block>
			<style>
				<height value="100%"/>
			</style>
			<bind name="style" value="'backgroundColor'; _color ? _color : SC.Ui_styles.SERVICE_COLORS.YELLOW"/>
			<bind name="style" value="'width'; (_progress*100) + '%'"/>
		</block>
	</block>
	<block className="AnimatedProgressBar">
		<bind name="var" value="{ startAnimation: false }"/>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="style" value="'height'; _height ? _height : '4px'"/>
		<style>
			<backgroundImage value="url:../service_kit/progress_bars/bar_default_bg.png"/>
			<background9Slice value="[2,2]"/>
			<paddingTop value="1px"/>
			<paddingLeft value="1px"/>
			<paddingRight value="1px"/>
			<paddingBottom value="1px"/>
		</style>
		<block>
			<bind name="catch" value="'evProgressRise'; { startAnimation: true }"/>
			<bind name="dispatch" value="'evProgressRise'; 'evProgressEnd'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP;	_progressbarMotionDuration + 0.1"/>
			<bind name="dispatch" value="'evProgressRise'; 'evProgressEnd'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE;	_progressbarMotionDuration + 0.1"/>
			<bind name="catch" value="'evProgressEnd'; { startAnimation: false }"/>
			<bind name="transition" value="startAnimation; _progressbarMotionDuration; {width: _startProgress}; {width: _progress}; {}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0.03"/>
			<style>
				<height value="100%"/>
			</style>
			<bind name="style" value="'backgroundColor'; _color ? _color : SC.Ui_styles.SERVICE_COLORS.YELLOW"/>
			<bind name="style" value="'width'; _startProgress + 'px'"/>
		</block>
	</block>
	<block className="DoubleProgressBar">
		<bind name="watch" value="'progressLeftWidth';  math.round(_progress1 * 100) + '%'"/>
		<bind name="watch" value="'progressRightWidth'; math.round(_progress2 * 100) + '%'"/>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="style" value="'height'; (_height ? _height : 4) + 'px'"/>
		<style>
			<backgroundImage value="url:../service_kit/progress_bars/bar_default_bg.png"/>
			<background9Slice value="[2,2]"/>
			<paddingTop value="1px"/>
			<paddingLeft value="1px"/>
			<paddingRight value="1px"/>
			<paddingBottom value="1px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<height value="100%"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'backgroundColor'; _color1 ? _color1 : SC.Ui_styles.SERVICE_COLORS.YELLOW"/>
			<bind name="style" value="'width'; progressLeftWidth"/>
		</block>
		<block>
			<bind name="appear" value="'width' + varChanged; 0.15; 0.15; {scaleX: 0}; {scaleX: 1}"/>
			<style>
				<height value="100%"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'backgroundColor'; _color2 ? _color2 : SC.Ui_styles.SERVICE_COLORS.YELLOW"/>
			<bind name="style" value="'width'; progressRightWidth"/>
			<bind name="style" value="'left'; progressLeftWidth"/>
		</block>
	</block>

	<!-- pve_ship_restrictions -->
	<block className="ShipFilterRestrictions">
		<block className="ShipFilterRestrictions" type="ublock">
			<bind name="build!" value="{ _filters: _filters,
						_withShipTypeCounters: _withShipTypeCounters ? _withShipTypeCounters : false }"/>
		</block>
	</block>

	<!-- random_battle -->
	<block className="RandomBattleWindow">
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="watchDH" value="'playerShipId';	[]; 	balancerInfoEntity.balancerInfo.playerShipId"/>
		<bind name="watchDH" value="'isAddBots';		[]; 	balancerInfoEntity.balancerInfo.isAddBots"/>
		<bind name="watchDH" value="'maxWaitMin';	[]; 	balancerInfoEntity.balancerInfo.maxWaitMin"/>
		<bind name="watchDH" value="'maxWaitSec';	[]; 	balancerInfoEntity.balancerInfo.maxWaitSec"/>
		<bind name="watchDH" value="'timeToWait';			['balancerInfoEntity.balancerInfo.evTimeToWaitChanged']; 			balancerInfoEntity.balancerInfo.timeToWait"/>
		<bind name="watchDH" value="'playersTotal'; 			['balancerInfoEntity.balancerInfo.evPlayersTotalChanged']; 			balancerInfoEntity.balancerInfo.playersTotal"/>
		<bind name="watchDH" value="'playersInRange'; 		['balancerInfoEntity.balancerInfo.evPlayersInRangeChanged']; 		balancerInfoEntity.balancerInfo.playersInRange"/>
		<bind name="watchDH" value="'isPreparingForBattle';	['balancerInfoEntity.balancerInfo.evIsPreparingForBattleChanged']; 	balancerInfoEntity.balancerInfo.isPreparingForBattle"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; playerShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'selfClanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'isMercenary'; ['selfPlayerEntity.preBattlePlayerSimple.evIsMercenaryChanged']; selfPlayerEntity.preBattlePlayerSimple.isMercenary"/>
		<bind name="primaryEntityDH" value="'clanBattleInfoEntity'; CC.clanSquadLadderInfo; selfClanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'rating'; ['clanBattleInfoEntity.clanBattleInfo.evRatingChanged']; clanBattleInfoEntity.clanBattleInfo.rating"/>
		<bind name="watchDH" value="'divisionId'; ['clanBattleInfoEntity.clanBattleInfo.evDivisionIdChanged']; clanBattleInfoEntity.clanBattleInfo.divisionId"/>
		<bind name="watchDH" value="'leagueId'; ['clanBattleInfoEntity.clanBattleInfo.evLeagueIdChanged']; clanBattleInfoEntity.clanBattleInfo.leagueId"/>
		<bind name="watchDH" value="'stage'; ['clanBattleInfoEntity.clanBattleInfo.evStageChanged']; clanBattleInfoEntity.clanBattleInfo.stage"/>
		<bind name="watchDH" value="'targetLeagueId'; ['clanBattleInfoEntity.clanBattleInfo.evTargetLeagueIdChanged']; clanBattleInfoEntity.clanBattleInfo.targetLeagueId"/>
		<bind name="watchDH" value="'targetDivisionId'; ['clanBattleInfoEntity.clanBattleInfo.evTargetDivisionIdChanged']; clanBattleInfoEntity.clanBattleInfo.targetDivisionId"/>
		<bind name="watchDH" value="'battleProgress'; ['clanBattleInfoEntity.clanBattleInfo.evBattleProgressChanged']; clanBattleInfoEntity.clanBattleInfo.battleProgress"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason"/>
		<bind name="watch" value="'isDivisionAllowedInRanked'; rankSeasonEntity.rankSeason.isDivisionAllowed"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watchDH" value="'battleType'; ['selectedBattleTypeEntity.battleType.evBattleTypeChanged']; selectedBattleTypeEntity.battleType.type"/>
		<bind name="watch" value="'selectedEventBattleName'; selectedBattleTypes[0].eventBattleState.name"/>
		<bind name="watch" value="'isClanBattle';		battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<bind name="watch" value="'isRankedBattle';		battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE"/>
		<bind name="watch" value="'isEventBattle';		battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE"/>
		<bind name="watch" value="'isTrainingBattle';	battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isRandomBattle';		battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE"/>
		<bind name="watch" value="'battleTypeGameParamId'; selectedBattleTypes[0].battleType.battleTypeGameParamId"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; battleTypeGameParamId"/>
		<bind name="watchDH" value="'operationBG'; ['operationEntity.operation.evStatusChanged']; operationEntity.operation.customMatchmakerBG"/>
		<bind name="changeDispatch" value="isPreparingForBattle; 'preparingForBattleStarted'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; true"/>
		<bind name="watch" value="'bgRoot'; 	isEventBattle	? selectedEventBattleName : 
							operationBG		? operationBG 
											: battleType"/>
		<bind name="watch" value="'backgroundImageUrl';	'url:../bg/balancer/' + toLowerCase( bgRoot ) + '.jpg'"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="name" value="'backgroundID'"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.2; 0; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 0.2; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'BackgroundAnimatedSwitcher'; { _bgSymbol: backgroundImageUrl }"/>
		</block>
		<block>
			<bind name="visible" value="!isTrainingBattle"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'hitTest'; !isPreparingForBattle"/>
			<bind name="appear" value="'preparingForBattleStarted'; 0.15; 0.1; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 0.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 0.1; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="name" value="'buttonClose'"/>
				<bind name="input"/>
				<style>
					<position value="absolute"/>
					<right value="5px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="instance" value="'CloseButton'; {
				_isDisabled: !(!divisionDataEntity || isCommander),
				_tooltipText: (divisionDataEntity &amp;&amp; !isCommander)	? 'IDS_TOOLTIP_RANDOMBATTLE_IMPOSSIBLE_TO_LEAVEQUEUE'
																						: 'IDS_TOOLTIP_RANDOMBATTLE_LEAVEQUEUE'
			}"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'startHide'; 0.15; 0.1; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="-50%"/>
						<top value="38%"/>
						<align value="center"/>
					</style>
					<block>
						<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="tooltip" value="'SimpleStatusTooltip'; isClanBattle ? null : {_text: 'IDS_WAITING_TIME_HINT'}"/>
						<block type="text">
							<styleClass value="$TextHeaderWhiteBold"/>
							<bind name="class" value="'$FontSizeHeader4'"/>
							<bind name="text" value="toUpperCase(tr('IDS_IN_BATTLE_QUEUE'))"/>
						</block>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
						<style>
							<marginBottom value="12px"/>
							<align value="center"/>
						</style>
						<block>
							<bind name="tooltip" value="'SimpleHeaderSubheaderTooltip'; {	_headerText: 'IDS_CURRENT_WAITING_TIME_HINT',
																			_subheaderText: isClanBattle ? '' : 'IDS_WAITING_TIME_HINT'	}"/>
							<block type="text">
								<style>
									<width value="138px"/>
								</style>
								<styleClass value="$MatchMakerTimer"/>
								<bind name="text" value="timeToWait"/>
								<bind name="name" value="'waiting_time'"/>
							</block>
						</block>
						<block>
							<bind name="name" value="'max_waiting_in_battle'"/>
							<style>
								<marginTop value="-12px"/>
								<height value="18px"/>
								<marginBottom value="13px"/>
							</style>
							<block type="text">
								<styleClass value="$TextHeaderBigWhite"/>
								<bind name="text" value="tr('IDS_MAX_WAITING_IN_BATTLE_TYPE') +
										' ' +
										tr('IDS_IN_' + toUpperCase(isEventBattle ? selectedEventBattleName : battleType)) +
										' ' +
										toLowerCase(tr((maxWaitMin &gt; 0 || maxWaitSec &gt; 0) ? 'IDS_NOT_MORE_THAN' : 'IDS_NOT_LIMITED'))"/>
							</block>
							<block>
								<bind name="visible" value="maxWaitMin &gt; 0"/>
								<block type="text">
									<styleClass value="$TextHeaderBigWhite"/>
									<bind name="text" value="maxWaitMin"/>
								</block>
								<block type="text">
									<styleClass value="$TextHeaderBigWhite"/>
									<bind name="pluralText" value="'IDS_PL_MINUTE_FULL_ROD'; maxWaitMin"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="visible" value="maxWaitSec &gt; 0"/>
								<block type="text">
									<styleClass value="$TextHeaderBigWhite"/>
									<bind name="text" value="maxWaitSec"/>
								</block>
								<block type="text">
									<styleClass value="$TextHeaderBigWhite"/>
									<bind name="pluralText" value="'IDS_PL_SECONDS'; maxWaitSec"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="visible" value="isAddBots &amp;&amp; !isRandomBattle"/>
								<styleClass value="$MiddleAlignedAbsolutely"/>
								<style>
									<top value="18px"/>
								</style>
								<block type="text">
									<styleClass value="$TextHeaderBigWhite"/>
									<bind name="text" value="'IDS_FREE_PLACES_WILL_BE_FILLED_WITH_BOTS'"/>
								</block>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="isRankedBattle &amp;&amp; isDivisionAllowedInRanked &amp;&amp; divisionDataEntity"/>
							<block>
								<style>
									<marginTop value="-3px"/>
									<marginRight value="3px"/>
								</style>
								<block className="icon_division_commander" type="native"/>
							</block>
							<block type="text">
								<styleClass value="$TextHeaderBigWhite"/>
								<style>
									<marginTop value="-8px"/>
								</style>
								<bind name="style" value="'textColor'; 0xFFFFCC66"/>
								<default_text value="IDS_RANKED_MATCHMAKER_WAITING_FOR_OTHER_DIVISION"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<align value="center"/>
						</style>
						<block>
							<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="visible" value="!isClanBattle"/>
							<style>
								<marginBottom value="30px"/>
							</style>
							<block>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_YOUR_RANGE_HINT'}"/>
								<block type="text">
									<styleClass value="$TextAccent"/>
									<bind name="class" value="'$FontColorWhite'"/>
									<bind name="text" value="tr('IDS_PLAYERS_IN_YOUR_RANGE')+tr('IDS_COLON')+' '"/>
								</block>
							</block>
							<bind name="watch" value="'playersInRangeLength';	playersInRange &gt; 999	? 4 :
																playersInRange &gt; 99		? 3 :
																playersInRange &gt; 9		? 2
																						: 1"/>
							<bind name="watch" value="'playersTotalLength';	playersTotal &gt; 999	? 4 :
															playersTotal &gt; 99	? 3 :
															playersTotal &gt; 9	? 2
																				: 1"/>
							<bind name="watch" value="'playersQueueStrLength'; playersInRangeLength + playersTotalLength"/>
							<block>
								<style>
									<height value="28px"/>
								</style>
								<block>
									<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_PLAYERS_IN_YOUR_RANGE'}"/>
									<bind name="style" value="'marginTop';	playersQueueStrLength &gt; 5	? '0px' :
															playersQueueStrLength &gt; 3	? '-4px'
																						: '-8px'"/>
									<block type="text">
										<styleClass value="$TextAccentBold"/>
										<bind name="style" value="'fontSize';	playersQueueStrLength &gt; 5	? 25 :
																playersQueueStrLength &gt; 3	? 29
																							: 33"/>
										<bind name="class" value="'$FontColorWhite'"/>
										<bind name="name" value="'players_in_range'"/>
										<bind name="text" value="playersInRange == 0 ? '-' : playersInRange"/>
									</block>
								</block>
								<block>
									<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_TOTAL_PLAYERS_HINT'}"/>
									<bind name="style" value="'marginTop';	playersQueueStrLength &gt; 5	? '5px' :
															playersQueueStrLength &gt; 3	? '1px'
																						: '-3px'"/>
									<block type="text">
										<style>
											<alpha value="0.8"/>
											<marginLeft value="-3px"/>
										</style>
										<styleClass value="$TextHeader"/>
										<bind name="style" value="'fontSize';	playersQueueStrLength &gt; 5	? 19 :
																playersQueueStrLength &gt; 3	? 23
																							: 27"/>
										<bind name="class" value="'$FontColorWhite'"/>
										<bind name="class" value="'$Bold'"/>
										<bind name="name" value="playersTotal"/>
										<bind name="text" value="'/' + (!playersTotal ? '-' : playersTotal)"/>
									</block>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="instance" value="'BalancerShipTypes'; isClanBattle ? null : {}"/>
						</block>
						<block>
							<bind name="visible" value="playerShipId"/>
							<bind name="name" value="'your_ship_id'"/>
							<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
							<bind name="tooltip" value="'SimpleHeaderSubheaderTooltip'; {	_headerText:	'IDS_' + toUpperCase(shipInfo.subtype) + '_GOAL',
																			_subheaderText:	'IDS_' + toUpperCase(shipInfo.subtype) + '_GOAL_DESCRIPTION'	}"/>
							<block type="text">
								<style>
									<alpha value="0.8"/>
								</style>
								<styleClass value="$TextHeaderBigWhite"/>
								<bind name="text" value="'IDS_YOUR_SHIP'"/>
							</block>
							<block>
								<style>
									<marginLeft value="4px"/>
									<backgroundColor value="0x01000000"/>
								</style>
								<bind name="instance" value="'ShipTitleWithIconAndLevel'; playerShipId ? {_shipID : playerShipId} : null"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<style>
						<position value="absolute"/>
						<bottom value="0px"/>
						<width value="100%"/>
					</style>
					<block className="FooterWrapperForMatchmaking" type="ublock">
						<style>
							<position value="absolute"/>
							<bottom value="0px"/>
							<width value="100%"/>
						</style>
						<bind name="build!" value="{}"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="	(isClanBattle &amp;&amp; !isMercenary) || isRankedBattle"/>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<style>
						<position value="absolute"/>
						<top value="720:160,1080:300ah"/>
						<right value="1280:0,1920:160aw"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<block>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<marginLeft value="-28px"/>
							<marginRight value="-28px"/>
							<marginBottom value="-10px"/>
							<marginTop value="-10px"/>
						</style>
						<block className="DeclareBlurLayer">
							<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
							<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
							<bind name="visible" value="isBlurEnabled"/>
							<block className="transparentPixel" type="native">
								<bind name="blurLayer" value="0"/>
							</block>
							<style>
								<position value="absolute"/>
							</style>
						</block>
						<block className="BlurMapCustom">
							<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
							<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
							<styleClass value="$FullsizeAbsolute"/>
							<style>
								<hitTest value="false"/>
							</style>
							<bind name="visible" value="isBlurEnabled"/>
							<block className="mc_blurmap5_feather" type="native">
								<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
								<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
								<styleClass value="$Fullsize"/>
								<bind name="blurMap" value="0"/>
							</block>
						</block>
					</block>
					<block>
						<bind name="instance" value="'ClanStereotypeMatchmaker'; isClanBattle ? {} : null"/>
					</block>
					<block>
						<bind name="instance" value="'RankStereotypeMatchmaker'; isRankedBattle ? {} : null"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="RankStereotypeMatchmaker">
		<bind name="firstEntityDH" value="'rankPlayerEntity'; CC.rankPlayer"/>
		<bind name="watchDH" value="'currentLeague';		['rankPlayerEntity.rankPlayer.evChanged'];					rankPlayerEntity.rankPlayer.currentLeague"/>
		<bind name="watchDH" value="'currentRank';		['rankPlayerEntity.rankPlayer.evChanged'];					rankPlayerEntity.rankPlayer.currentRank"/>
		<bind name="watchDH" value="'currentStars';		['rankPlayerEntity.rankPlayer.evChanged'];					rankPlayerEntity.rankPlayer.currentStars"/>
		<bind name="watchDH" value="'isInQualification';	['rankPlayerEntity.rankPlayer.evChangedIsInQualification'];	rankPlayerEntity.rankPlayer.isInQualification"/>
		<bind name="primaryEntityDH" value="'rankInfoEntity'; CC.rankInfo; currentRank + '_' + currentLeague"/>
		<bind name="watch" value="'starsToNextRank'; rankInfoEntity.rankInfo.starsToNext"/>
		<bind name="watch" value="'isGuaranteed';	rankInfoEntity.rankInfo.isGuaranteed"/>
		<style>
			<width value="210px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="name" value="'your_rank_id'"/>
			<style>
				<marginBottom value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold21NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="isInQualification ? 'IDS_RANKED_QUALIFICATION' : 'IDS_YOUR_RANK'"/>
			</block>
		</block>
		<block>
			<bind name="instance" value="'RankStereotype'; {	_iconSize: 160,
											_league: currentLeague,
											_rank: currentRank,
											_isTopRank: currentRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK,
											_isTopLeague: currentLeague == SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE,
											_starsToNextRank: starsToNextRank,
											_currentStars: currentStars,
											_isGuaranteed: isGuaranteed,
											_hideIcon: isInQualification,
											_isTopRankTextHidden: true }"/>
		</block>
	</block>
	<block className="ClanStereotypeMatchmaker">
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="primaryEntityDH" value="'clanTeamEntity'; CC.clanTeam; selfPreBattleId"/>
		<bind name="watchDH" value="'squadId'; ['clanTeamEntity.clanTeam.evSquadIdChanged'];	clanTeamEntity.clanTeam.squadId"/>
		<bind name="primaryEntityDH" value="'clanSquadLadderInfoEntity'; CC.clanSquadLadderInfo; squadId"/>
		<bind name="watchDH" value="'rating'; 			['clanSquadLadderInfoEntity.clanSquadLadderInfo.evRatingChanged']; 			clanSquadLadderInfoEntity.clanSquadLadderInfo.rating"/>
		<bind name="watchDH" value="'divisionId'; 		['clanSquadLadderInfoEntity.clanSquadLadderInfo.evDivisionIdChanged']; 		clanSquadLadderInfoEntity.clanSquadLadderInfo.divisionId"/>
		<bind name="watchDH" value="'leagueId'; 			['clanSquadLadderInfoEntity.clanSquadLadderInfo.evLeagueIdChanged']; 		clanSquadLadderInfoEntity.clanSquadLadderInfo.leagueId"/>
		<bind name="watchDH" value="'stage'; 			['clanSquadLadderInfoEntity.clanSquadLadderInfo.evStageChanged']; 			clanSquadLadderInfoEntity.clanSquadLadderInfo.stage"/>
		<bind name="watchDH" value="'targetLeagueId'; 	['clanSquadLadderInfoEntity.clanSquadLadderInfo.evTargetLeagueIdChanged']; 	clanSquadLadderInfoEntity.clanSquadLadderInfo.targetLeagueId"/>
		<bind name="watchDH" value="'targetDivisionId'; 	['clanSquadLadderInfoEntity.clanSquadLadderInfo.evTargetDivisionIdChanged'];clanSquadLadderInfoEntity.clanSquadLadderInfo.targetDivisionId"/>
		<bind name="watchDH" value="'battleProgress'; 	['clanSquadLadderInfoEntity.clanSquadLadderInfo.evBattleProgressChanged']; 	clanSquadLadderInfoEntity.clanSquadLadderInfo.battleProgress"/>
		<bind name="primaryEntityDH" value="'clanLadderInfoEntity'; CC.clanLadderInfo; clanId"/>
		<bind name="watchDH" value="'leadingSquadId'; []; clanLadderInfoEntity.clanLadderInfo.leadingSquadId"/>
		<bind name="watch" value="'isLeading'; squadId == leadingSquadId"/>
		<bind name="watchDH" value="'hasClanSquadModifier'; ['selfPlayerEntity.clanmanSupplyInfo.evHasClanSquadModifierChanged']; selfPlayerEntity.clanmanSupplyInfo.hasClanSquadModifier"/>
		<bind name="var" value="{divisionMaxRating: 100}"/>
		<bind name="watch" value="'currentLeagueColor';			leagueId == 0		? 0xAB45E6 :
    											leagueId == 1		? 0xE5124A :
    											leagueId == 2		? 0xF1AE07 :
    											leagueId == 3		? 0x0644D9 :
    											leagueId == 4		? 0x00D8D0
    																: 0xFFFFFF "/>
		<style>
			<width value="210px"/>
			<height value="210px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundImage'; leagueId != undefined	? 'url:../clans/leagues/cvc_league_' + leagueId + '_small.png'
																: '' "/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<width value="90px"/>
				<height value="90px"/>
				<marginTop value="67px"/>
			</style>
			<bind name="style" value="'backgroundImage'; divisionId != undefined	? 'url:../clans/divisions/cvc_division_' + divisionId + '_small.png'
																: '' "/>
		</block>
		<block>
			<bind name="visible" value="stage != 'league'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundImage'; leagueId != undefined	? 'url:../clans/leagues/cvc_league_' + leagueId + '_stub_small.png'
																: '' "/>
		</block>
		<block>
			<bind name="visible" value="stage == 'league' &amp;&amp; leagueId != 0"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<marginTop value="63px"/>
			</style>
			<bind name="watch" value="'progress'; rating &lt; divisionMaxRating ? ((rating / divisionMaxRating) * 360) : 360"/>
			<block className="lesta.display.Sector" type="native">
				<style>
					<marginTop value="49px"/>
					<marginLeft value="49px"/>
				</style>
				<bind name="offset" value="-90"/>
				<bind name="arc" value="progress"/>
				<bind name="color" value="currentLeagueColor"/>
				<params>
					<param name="innerRadius" value="45"/>
					<param name="radius" value="49"/>
				</params>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'backgroundImage'; leagueId != undefined	? stage == 'league'	? 'url:../clans/leagues/cvc_league_' + leagueId + '_ribbon_small_small.png'
																					: 'url:../clans/leagues/cvc_league_' + leagueId + '_ribbon_big_small.png'
																: '' "/>
		</block>
		<block>
			<bind name="visible" value="stage != 'league'"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<marginTop value="162px"/>
			</style>
			<bind name="repeat" value="battleProgress; 'ClanBattleResultsStarStatic'; { _width: '40px', _height: '40px', _smallSize: true }"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="stage == 'league'"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<marginTop value="173px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold25NM"/>
				<bind name="text" value="rating"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="hasClanSquadModifier &amp;&amp; (squadId != undefined)"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<marginTop value="212px"/>
			</style>
			<block>
				<block type="text">
					<styleClass value="$TextHeader"/>
					<bind name="class" value="'$FontColorGrey'"/>
					<bind name="text" value="'['+clanTag+'] ' + tr('IDS_CLAN_SQUAD_' + squadId)"/>
				</block>
				<block>
					<bind name="visible" value="hasClanSquadModifier &amp;&amp; isLeading"/>
					<style>
						<marginLeft value="2px"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'LeadingClanSquadIcon'; hasClanSquadModifier &amp;&amp; isLeading ? { _isGolden: selected } : null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ClanBattleResultsStarStatic">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _width"/>
		<bind name="style" value="'height'; _height"/>
		<bind name="style" value="'marginRight'; _smallSize 	? '-5px': '5px'"/>
		<bind name="style" value="'marginLeft'; 	_smallSize 	? '-5px': '5px'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_CLAN_STAR_' + $value + '_DESCRIPTION')}; TooltipBehaviour.simple"/>
		<bind name="style" value="'backgroundImage'; _smallSize 	? 'url:../clans/stars/cvc_star_' + $value + '_small.png'
												: 'url:../clans/stars/cvc_star_' + $value + '.png'"/>
	</block>
	<block className="ShipTypeCounter">
		<bind name="watch" value="'tootipHeaderText'; 'IDS_' + toUpperCase(_subtype) + '_GOAL'"/>
		<bind name="watch" value="'tooltipSubheaderText'; 'IDS_' + toUpperCase(_subtype) + '_GOAL_DESCRIPTION'"/>
		<bind name="watch" value="'hasCount'; _count != 0"/>
		<style>
			<paddingLeft value="20px"/>
			<paddingRight value="20px"/>
			<align value="center"/>
		</style>
		<block>
			<bind name="style" value="'hitTest'; hasCount"/>
			<style>
				<marginBottom value="12px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleHeaderSubheaderTooltip'; { _headerText: tootipHeaderText, _subheaderText: tooltipSubheaderText }"/>
			<block type="text">
				<bind name="name" value="'ship_type_counter_' + _shipType"/>
				<styleClass value="$TextDefaultBold60NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="hasCount ? _count : ' '"/>
			</block>
		</block>
		<block>
			<style>
				<height value="37px"/>
				<align value="middle"/>
				<marginLeft value="-6px"/>
			</style>
			<bind name="tooltip" value="'SimpleHeaderSubheaderTooltip'; { _headerText: tootipHeaderText, _subheaderText: tooltipSubheaderText }"/>
			<block>
				<style>
					<marginRight value="4px"/>
					<marginTop value="2px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="instance" value="'ShipIcon'; { _shipType: _subtype, _iconSize: 31 }"/>
			</block>
			<block type="text">
				<bind name="name" value="'ship_type_' + _shipType"/>
				<styleClass value="$TextDefault19NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="_text"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="BalancerShipTypes">
		<bind name="firstEntityDH" value="'balancerInfoEntity'; CC.balancerInfo"/>
		<bind name="watchDH" value="'aircarrierNum';	['balancerInfoEntity.balancerInfo.evCarrierNumChanged']; 	balancerInfoEntity.balancerInfo.carrierNum"/>
		<bind name="watchDH" value="'battleshipNum'; ['balancerInfoEntity.balancerInfo.evBattleshipNumChanged']; balancerInfoEntity.balancerInfo.battleshipNum"/>
		<bind name="watchDH" value="'cruiserNum'; 	['balancerInfoEntity.balancerInfo.evCruiserNumChanged']; 	balancerInfoEntity.balancerInfo.cruiserNum"/>
		<bind name="watchDH" value="'destroyerNum'; 	['balancerInfoEntity.balancerInfo.evDestroyerNumChanged'];	balancerInfoEntity.balancerInfo.destroyerNum"/>
		<bind name="watchDH" value="'submarineNum'; 	['balancerInfoEntity.balancerInfo.evSubmarineNumChanged']; 	balancerInfoEntity.balancerInfo.submarineNum"/>
		<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<style>
			<flow value="horizontal"/>
			<marginBottom value="56px"/>
		</style>
		<bind name="watch" value="'counterList'; [	{
										_count: aircarrierNum,
										_text: 'IDS_CARRIERS',
										_shipType: 2,
										_subtype: SC.Common.SHIP_TYPE.AIRCARRIER
									},
									{
										_count: battleshipNum,
										_text: 'IDS_BATTLESHIPS',
										_shipType: 4,
										_subtype: SC.Common.SHIP_TYPE.BATTLESHIP
									},
									{
										_count: cruiserNum,
										_text: 'IDS_CRUISERS',
										_shipType: 3,
										_subtype: SC.Common.SHIP_TYPE.CRUISER
									},
									{
										_count: destroyerNum,
										_text: 'IDS_DESTROYERS',
										_shipType: 1,
										_subtype: SC.Common.SHIP_TYPE.DESTROYER
									},
									{
										_count: submarineNum,
										_text: 'IDS_SUBMARINES',
										_shipType: 5,
										_subtype: SC.Common.SHIP_TYPE.SUBMARINE
									}
								]"/>
		<bind name="repeat" value="counterList; 'ShipTypeCounter'; {}"/>
	</block>

	<!-- rank_elements -->
	<block className="IconRankSmall">
		<block className="IconRankSmall" type="ublock">
			<bind name="build!" value="{	_league: _league, _rank: _rank}"/>
		</block>
	</block>
	<block className="HeaderWithInfoButton">
		<bind name="tooltip" value="'RankInfoTooltip'; _headerInfoButtonParams"/>
		<style>
			<flow value="horizontal"/>
			<align value="left"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block type="text">
			<bind name="class" value="_headerTextClass || '$TextDefaultBold30NM'"/>
			<bind name="style" value="'textColor'; _textColor || SC.Ui_styles.SERVICE_COLORS.WHITE"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_headerText"/>
		</block>
		<block>
			<bind name="visible" value="_headerInfoButtonParams"/>
			<style>
				<marginLeft value="8px"/>
				<marginTop value="3px"/>
				<marginRight value="-100%"/>
			</style>
			<block className="RanksInfoButton">
				<style>
					<width value="22px"/>
					<height value="22px"/>
					<backgroundImage value="url:../service_kit/buttons/info_tab_new.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="RanksInfoButton">
		<style>
			<width value="22px"/>
			<height value="22px"/>
			<backgroundImage value="url:../service_kit/buttons/info_tab_new.png"/>
		</style>
	</block>
	<block className="RankHeaderWithStatusLine">
		<bind name="appear" value="'addedToStage'; 0.18; 0 + 0*0.075; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="720:12,1080:16ah"/>
			</style>
			<bind name="instance" value="'HeaderWithInfoButton'; {	_headerTextClass: _headerTextClass,
													_headerText: _headerText,
													_headerInfoButtonParams: _headerInfoButtonParams,	}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="_statusLineElement; _statusLineParams"/>
		</block>
	</block>
	<block className="RankInfoTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: _headerText, _unifiedStatus: _unifiedStatus }"/>
			</block>
			<bind name="repeat" value="_tooltipData; 'TooltipSystemRankedTimeStatusItem'; _tooltipData ? {} : null"/>
		</block>
	</block>
	<block className="TooltipSystemRankedTimeStatusItem">
		<style>
			<width value="100%"/>
		</style>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="!!_params"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="_element; _params ? _params : {}"/>
		</block>
	</block>
	<block className="RankStereotypeTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="275px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; { _headerText: subst('IDS_RANK_IN_LEAGUE_' + _league, [], {_rankId: _rank}) }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="_isGuaranteed"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; _isGuaranteed ? { _descriptionText: 'IDS_FIREPROOF_RANK' } : null"/>
			</block>
		</block>
	</block>
	<block className="RankStereotype">
		<style>
			<width value="100%f"/>
			<height value="100%f"/>
		</style>
		<bind name="name" value="'carouselRankItem' + '_' + _league + '_' + _rank"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="100%f"/>
				<height value="100%f"/>
			</style>
			<bind name="instance" value="'RankStereotypeRenderer'; {	_iconSize: _iconSize,
													_league: _league,
													_rank: _rank,
													_isTopRank: _isTopRank,
													_isGuaranteed: _isGuaranteed,
													_variations: 3,
													_isDes: _isDes }"/>
		</block>
		<block>
			<bind name="visible" value="!_isTopRank || _hideIcon == true"/>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'RankedStarsRenderer'; {	_starsToNextRank: _starsToNextRank,
													_currentStars: _currentStars }"/>
		</block>
		<block>
			<bind name="instance" value="'TopRankCongratulationText'; _isTopRank &amp;&amp; isUnlocked &amp;&amp; !_isTopRankTextHidden ? { _leagueId: _league } : null"/>
		</block>
	</block>
	<block className="RankedStarsRenderer">
		<bind name="watch" value="'maxStarsInLine'; _starsToNextRank &gt; 4 ? math.round(_starsToNextRank / 2) : _starsToNextRank"/>
		<bind name="style" value="'width';  (maxStarsInLine * 36) + ((maxStarsInLine - 1) * 4) + 'px'"/>
		<style>
			<flow value="htile"/>
			<align value="center"/>
		</style>
		<bind name="repeat" value="_starsToNextRank; 'AnimatedRankStar'; {	_starsToNextRank: _starsToNextRank,
															_currentStars: _currentStars,
															_maxStarsInLine: maxStarsInLine,
															_hasAnimation: _hasAnimation,
															_rankId: _rankId,
															_leagueId: thisRankInfo.rankInfo.leagueId,
															_maxStarsInLine: maxStarsInLine,
															_oldInfo: _oldInfo,
															_isStartAnimationRank: _isStartAnimationRank}"/>
	</block>
	<block className="RankStereotypeRenderer">
		<bind name="tooltip" value="'RankStereotypeTooltip'; !_isTooltipHidden	?	{	_league: _league,
																		_rank: _rank,
																		_isGuaranteed: _isGuaranteed }
																: null"/>
		<style>
			<width value="1px"/>
			<height value="1px"/>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'width'; _iconSize"/>
		<bind name="style" value="'height'; _iconSize"/>
		<bind name="style" value="'backgroundImage'; 'url:../ranks/pins/league_'
		+ _league + '_'
		+ _iconSize
		+ (_isTopRank ? '_top' : '')
		+ (_isGuaranteed ? '_guaranteed' : '')
		+ (_variations &gt; 0 &amp;&amp; !_isTopRank ? '_' + (math.randomfloor(_variations) + 1) : '')
		+ (_isDes ? '_des' : '')
		+ '.png'"/>
		<block>
			<style>
				<position value="absolute"/>
				<width value="1px"/>
				<height value="1px"/>
				<backgroundSize value="fill"/>
			</style>
			<bind name="style" value="'width'; _iconSize"/>
			<bind name="style" value="'height'; _iconSize"/>
			<bind name="style" value="'backgroundImage'; 'url:../ranks/numbers/league_'
			+ (_isDes ? 2 : _league)
			+ '_' + _rank
			+ '.png'"/>
		</block>
	</block>
	<block className="AnimatedRankStar">
		<bind name="primaryEntityDH" value="'rankInfo'; CC.rankInfo; _rankId + '_' + _leagueId"/>
		<bind name="var" value="{starIndex: $index + 1}"/>
		<bind name="watch" value="'animationState';	starIndex &lt;=  _currentStars	? 'earned'
																: 'not_earned'"/>
		<bind name="watch" value="'starConditionText'; isPermanentStar ? 'IDS_RANKED_STAR_CONDITION_SAFE' : 'IDS_RANKED_STAR_CONDITION_REGULAR'"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; !(rankInfo.starLossPlace == 0 &amp;&amp; rankInfo.starEarnPlace == 0)	? {	_text: starConditionText }
																										: null"/>
		<bind name="var" value="{dynamicNoAnimationFlag: true}"/>
		<bind name="var" value="{dynamicState:   _isStartAnimationRank	? ((starIndex &lt;= _oldInfo.stars)	? 'earned'
																							: 'not_earned')
														: ((_oldInfo.rank &gt; _rankId)		? 'not_earned'
																							: 'earned')}"/>
		<bind name="catch" value="('starEarn_'+_rankId+'_'+ starIndex); {dynamicNoAnimationFlag: false, dynamicState: 'earned'}"/>
		<bind name="catch" value="('starLost_'+_rankId+'_'+ starIndex); {dynamicNoAnimationFlag: false, dynamicState: 'not_earned'}"/>
		<bind name="dispatch" value="('starEarn_'+_rankId+'_'+ starIndex); 'animationStepFinished'; null; false; 0.8"/>
		<bind name="dispatch" value="('starLost_'+_rankId+'_'+ starIndex); 'animationStepFinished'; null; false; 0.8"/>
		<style>
			<width value="36px"/>
			<height value="36px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="style" value="'marginLeft'; $index &gt; 0 &amp;&amp; $index != _maxStarsInLine ? 4 + 'px' : 0"/>
		<block className="icon_star_animated_new" type="native">
			<style>
				<top value="18px"/>
				<left value="18px"/>
				<hitTest value="false"/>
			</style>
			<bind name="scaleX" value="0.375"/>
			<bind name="scaleY" value="0.375"/>
			<bind name="setState!" value="_hasAnimation ? dynamicState : animationState; dynamicNoAnimationFlag"/>
		</block>
	</block>
	<block className="TopRankCongratulationText">
		<bind name="watch" value="'isTopLeague'; _leagueId == SC.Ranked.RANK_CONSTANTS.TOP_LEAGUE"/>
		<style>
			<width value="100%"/>
			<align value="center"/>
			<marginTop value="32px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<default_text value="IDS_CONGRATULATIONS_FIRST_RANK"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<alpha value="0.75"/>
				<marginTop value="12px"/>
			</style>
			<bind name="text" value="isTopLeague ? 'IDS_RANK_REACHED_TOP' : 'IDS_RANK_REACHED_FIRST'"/>
		</block>
	</block>
	<block className="LeagueStereotype">
		<style>
			<width value="265px"/>
			<height value="478px"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../ranks/leagues/league_'
												+ _league
												+ (_isLeagueLocked ? '_des' : '')
												+ '.png'"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<top value="50%"/>
				<marginTop value="60%"/>
			</style>
			<bind name="instance" value="'RankHeaderWithStatusLine'; {	_headerText: 'IDS_RANKED_LEAGUE_' + _league,
														_headerInfoButtonParams: {	_headerText: 'IDS_RANKED_LEAGUE_TOOLTIP_TITLE',
																					_tooltipData: [	{	_element: 'TooltipSystemStatusLine',
																										_params: _leagueTimerParams },
																									{	_element: 'TooltipSystemDescriptionText',
																										_params: { _descriptionText: 'IDS_RANKED_LEAGUE_TOOLTIP_DESC' }	}	]},
														_statusLineElement: 'StatusLine',
														_statusLineParams: {	_text: subst(	'IDS_RANK_LEAGUE_CAROUSEL_STATUS_' + _leagueStatus, 
																								[], {}, _leaguesBetween	),
																				_unifiedStatus: _leagueStatus == 'CURRENT'	? SC.Ui_styles.UNIFIED_STATUS.DEFAULT :
																								_leagueStatus == 'PASSED'		? SC.Ui_styles.UNIFIED_STATUS.CHECK
																																			: SC.Ui_styles.UNIFIED_STATUS.LOCK }
													}"/>
		</block>
	</block>
	<block className="RewardWithProgress">
		<bind name="watch" value="'victories'; _victories[$index] ? _victories[$index] : null"/>
		<bind name="watch" value="'previousVictories'; _victories[$index-1] ? _victories[$index-1] : 0"/>
		<bind name="watch" value="'rewardsCategory'; _rewardsCategories[$index]"/>
		<bind name="watch" value="'isReceived'; (_leagueStatus == 'CURRENT' &amp;&amp; (_achievedRewardsCount &gt; $index)) ||
								_leagueStatus == 'PASSED'"/>
		<bind name="watch" value="'progress'; (_currentVictories - previousVictories) / (_victories[$index] - previousVictories)"/>
		<bind name="watch" value="'curLootboxProgress';	isReceived										? 1 :
										_leagueStatus == 'CURRENT' &amp;&amp;
										(_achievedRewardsCount == $index)				? progress
																						: 0"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="$index == 0 &amp;&amp; !_isZeroHidden"/>
			<style>
				<position value="absolute"/>
				<left value="-2px"/>
				<top value="17px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<alpha value="0.75"/>
				</style>
				<default_text value="0"/>
			</block>
		</block>
		<block>
			<style>
				<marginRight value="1px"/>
			</style>
			<bind name="instance" value="'DefaultProgressBar'; {_width: '95px', _height: '9px', _progress: curLootboxProgress}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="-2px"/>
				<top value="17px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<bind name="style" value="'alpha'; isReceived ? 0.75 : 0.9"/>
				<bind name="text" value="victories ? format(victories, -1) : ''"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<top value="-60px"/>
				<left value="75%"/>
			</style>
			<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: dataArray,
													_tooltipHeader: subst('IDS_PL_RANK_REWARDS_VICTORIES_CURRENT',
																		[], { _victoriesCount: victories }, victories),
													_isReceived: isReceived}"/>
			<bind name="instance" value="'RewardCategory'; { _rewardCategory: rewardsCategory, _isReceived: isReceived }"/>
		</block>
	</block>
	<block className="Qualification">
		<block>
			<bind name="watch" value="'_superShipsOnly'; _shipsLevelMin == SC.Ships.SHIP_LEVELS.SUPER_SHIP &amp;&amp; _shipsLevelMax == SC.Ships.SHIP_LEVELS.SUPER_SHIP"/>
			<bind name="watch" value="'_superShipsInMax'; _shipsLevelMax == SC.Ships.SHIP_LEVELS.SUPER_SHIP"/>
			<bind name="watch" value="'_displayShipLevelMax'; (_superShipsInMax &amp;&amp; !_superShipsOnly) ? _shipsLevelMax - 1 : _shipsLevelMax"/>
			<bind name="watch" value="'_postfix'; _superShipsInMax ? '_AND_SUPERSHIPS' : ''"/>
			<bind name="watch" value="'shipsRestrictionString'; subst(	_shipsLevelMin != 0 &amp;&amp; _displayShipLevelMax != 0 &amp;&amp;
										_shipsLevelMin == _displayShipLevelMax			?	'IDS_RANKED_QUALIFICATION' + '_ALLOWED_SHIPS_SINGLE' + (	_superShipsOnly	? '_SUPERSHIPS' :
																																			_superShipsInMax	? '_AND_SUPERSHIPS'
																																										: '') :
										_shipsLevelMin != 0 &amp;&amp; _displayShipLevelMax != 0	?	'IDS_RANKED_QUALIFICATION' + '_ALLOWED_SHIPS_FROM_TO' + _postfix :
										_displayShipLevelMax != 0							?	'IDS_RANKED_QUALIFICATION' + '_ALLOWED_SHIPS_TO' + _postfix :
										_shipsLevelMin != 0											?	'IDS_RANKED_QUALIFICATION' + '_ALLOWED_SHIPS_FROM'
																									:	'IDS_RANKED_QUALIFICATION' + '_ALLOWED_SHIPS_ALL', [], 0 &gt; 0	? {	levelMin: toRomanShipLevels(_shipsLevelMin),
																																							levelMax: toRomanShipLevels(_displayShipLevelMax),
																																							teamSize: 0}
																																						: {	levelMin: toRomanShipLevels(_shipsLevelMin),
																																							levelMax: toRomanShipLevels(_displayShipLevelMax)})"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginBottom value="720:12,1080:16ah"/>
			</style>
			<bind name="instance" value="'RankHeaderWithStatusLine'; {	_headerTextClass: '$TextDefaultBold21NM',
														_headerText: 'IDS_RANKED_QUALIFICATION',
														_statusLineElement: 'StatusLine',
														_statusLineParams: {	_text: 'IDS_RANKED_QUALIFICATION_STATUS_' + toUpperCase(_qualificationStatus),
																				_unifiedStatus: _qualificationStatus }
												}"/>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="264px"/>
				<height value="720:120,1080:160ah"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
					<flow value="htile"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'RankedStarsRenderer'; {	_starsToNextRank: _starsToNextRank,
														_currentStars: _currentStars }"/>
			</block>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_hasNextSprint == true"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="720:10,1080:32ah"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<alpha value="0.75"/>
					<textAlign value="center"/>
					<maxWidth value="185"/>
				</style>
				<bind name="text" value="_qualificationStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK	?	'IDS_RANKED_NEXT_LEAGUE_DETERMINED_' +
																						(_isSeamlessRanked ? 'SEAMLESS_' : '') +
																						(_league - 1)
																					: shipsRestrictionString"/>
			</block>
		</block>
	</block>
	<block className="RankedResults">
		<bind name="firstEntityDH" value="'battleResult'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'postBattleData'; ['battleResult.dataComponent.evDataChanged']; battleResult.dataComponent.data"/>
		<bind name="watch" value="'isEconomicallyPunished'; postBattleData['personal']['isEconomicallyPunished']"/>
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:16,1080:128ah"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold30NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="_rankStereotypeHeaderText"/>
			</block>
			<block type="text">
				<bind name="visible" value="_isRankStereotypeSubheaderTextVisible"/>
				<styleClass value="$TextDefault21NM"/>
				<style>
					<marginTop value="720:12,1080:16ah"/>
					<alpha value="0.75"/>
				</style>
				<bind name="text" value="_rankStereotypeSubheaderText"/>
			</block>
			<block>
				<style>
					<marginTop value="720:12,1080:16ah"/>
				</style>
				<bind name="instance" value="'StatusLine'; _rankStatusLineData"/>
			</block>
		</block>
		<block>
			<style>
				<width value="576px"/>
				<align value="center"/>
				<marginTop value="720:16,1080:40ah"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<width value="324px"/>
					<height value="100%"/>
					<backgroundImage value="url:../ranks/bg_selection_rank_stereotype.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="_isChangeRanksAnimationVisible"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
					<height value="256px"/>
					<marginTop value="720:16,1080:48ah"/>
					<marginBottom value="720:16,1080:48ah"/>
					<align value="center"/>
				</style>
				<block>
					<style>
						<width value="160px"/>
						<height value="160px"/>
					</style>
					<bind name="repeat" value="_changeRanks; 'RanksBlock'; { _oldInfo: _oldInfo,
															_isQualificationView: _isQualificationView,
															_isQualificationPassed: _isQualificationPassed }"/>
				</block>
				<block>
					<bind name="repeat" value="_changeRanks; 'RankStarsBlock'; { _oldInfo: _oldInfo, _isQualificationView: _isQualificationView }"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="isOutOfStars"/>
					<style>
						<marginTop value="720:16,1080:32ah"/>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<alpha value="0.75"/>
							<width value="100%"/>
							<textAlign value="center"/>
						</style>
						<default_text value="IDS_RANK_NO_CHANGES_DESCRIPTION"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="!_isChangeRanksAnimationVisible"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="160px"/>
					<height value="256px"/>
					<marginTop value="720:16,1080:48ah"/>
					<marginBottom value="720:16,1080:48ah"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'RankStereotype'; _historicalRankStereotypeData"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<bind name="visible" value="_isQualificationView &amp;&amp; _isQualificationPassed"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<width value="265px"/>
					<height value="720:293,1080:355ah"/>
					<overflow value="hidden"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<top value="720:-48,1080:-16ah"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../ranks/leagues/league_' + (_currentLeague - 1) + '.png'"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<paddingTop value="720:16,1080:40ah"/>
				<align value="center"/>
			</style>
			<block>
				<bind name="visible" value="_isOtherRewardAvailable"/>
				<style>
					<width value="100%"/>
					<marginBottom value="32px"/>
				</style>
				<bind name="repeat" value="_isOtherRewardAvailable ? removeNullOrEmpty(_rewardArray) : null; 'RankedRewardRepeater'; {}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="_isRemainingRewardAvailable"/>
				<style>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<marginBottom value="720:12,1080:32ah"/>
						<textAlign value="center"/>
						<alpha value="0.75"/>
					</style>
					<default_text value="IDS_RANK_REWARDS_FAST_QUALIFICATION"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<align value="center"/>
					</style>
					<bind name="repeat" value="_remainingRewardArray; 'RemainingRankedRewards'; _remainingRewardsParams"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="!_hasReceivedAllVictoryRewards &amp;&amp; _isVictoryRewardProgressIncreased &amp;&amp; !_isQualificationPassed"/>
				<style>
					<width value="304px"/>
					<align value="center"/>
					<marginBottom value="720:4,1080:16ah"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="subst('IDS_PL_RANK_REWARDS_VICTORIES_NEXT', [], {_victoriesCount: _victoriesTillNextReward}, _victoriesTillNextReward)"/>
				</block>
				<block>
					<style>
						<marginTop value="12px"/>
						<paddingTop value="64px"/>
					</style>
					<bind name="repeat" value="_victoryRewardsToShow; 'RewardWithProgress'; _rewardsParams"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<block type="text">
			<bind name="visible" value="isEconomicallyPunished"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="100%"/>
				<marginTop value="720:8,1080:16ah"/>
				<textAlign value="center"/>
				<alpha value="0.75"/>
			</style>
			<default_text value="IDS_ABUSE_RANKED_RESULTS_REASON"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 6*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 6 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="720:24,1080:48ah"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px',
											_name: 'btn_cancel',
											_enabled: true,
											_label: 'IDS_CLOSE_UPPER_CASE',
											_focusIndex: 1,
											_defaultFocused: true}"/>
		</block>
	</block>
	<block className="RanksBlock">
		<bind name="primaryEntityDH" value="'thisRankInfo';	CC.rankInfo; $value	+ '_' + _oldInfo.league"/>
		<bind name="watch" value="'leagueId'; thisRankInfo.rankInfo.leagueId"/>
		<bind name="watch" value="'nextLeagueId'; leagueId - 1"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason"/>
		<bind name="watch" value="'isSeamlessRanked'; rankSeasonEntity.rankSeason.seamlessLeagues"/>
		<bind name="watch" value="'isStartAnimationRank'; _oldInfo.rank == thisRankInfo.rankInfo.id"/>
		<bind name="appear" value="'rankUpTo_'	+ $value;		0.6; 0; {alpha: 0, left: 180};	{alpha: 1, left: 0};	SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'rankUpTo_'	+ ($value - 1);	0.6; 0; {alpha: 1, left: 0};	{alpha: 0, left: -180};	SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'rankDownTo_'	+ $value;		0.6; 0; {alpha: 0, left: -180};	{alpha: 1, left: 0};	SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'rankDownTo_'	+ ($value + 1);	0.6; 0; {alpha: 1, left: 0};	{alpha: 0, left: 180};	SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="alpha" value="isStartAnimationRank ? 1 : 0"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="instance" value="'RankStereotypeRenderer'; _isQualificationView ? null : {	_iconSize: 160,
																				_league: thisRankInfo.rankInfo.leagueId,
																				_isGuaranteed: thisRankInfo.rankInfo.isGuaranteed,
																				_rank: $value,
																				_isTopRank: $value == SC.Ranked.RANK_CONSTANTS.TOP_RANK,
																				_variations: 3 }"/>
		<block>
			<bind name="visible" value="_isQualificationView &amp;&amp; !_isQualificationPassed"/>
			<style>
				<position value="absolute"/>
				<bottom value="32px"/>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<width value="312px"/>
					<textAlign value="center"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="tr('IDS_RANKED_QUALIFICATION_NEXT_LEAGUE_' + (isSeamlessRanked ? 'SEAMLESS_' : '') + nextLeagueId)"/>
			</block>
		</block>
	</block>
	<block className="RankStarsBlock">
		<bind name="var" value="{thisRank: $value}"/>
		<bind name="primaryEntityDH" value="'oldRankInfo';	CC.rankInfo; _oldInfo.rank	+ '_' + _oldInfo.league"/>
		<bind name="primaryEntityDH" value="'prevRankInfo';	CC.rankInfo; (thisRank - 1)	+ '_' + _oldInfo.league"/>
		<bind name="primaryEntityDH" value="'thisRankInfo';	CC.rankInfo; thisRank		+ '_' + _oldInfo.league"/>
		<bind name="primaryEntityDH" value="'nextRankInfo';	CC.rankInfo; (thisRank + 1)	+ '_' + _oldInfo.league"/>
		<bind name="firstEntityDH" value="'rankPlayerEntity'; CC.rankPlayer;"/>
		<bind name="watchDH" value="'isQualificationPassed'; ['rankPlayerEntity.rankPlayer.evChanged']; rankPlayerEntity.rankPlayer.hasQualificationPassed"/>
		<bind name="watch" value="'rightOffsetX';	((thisRankInfo.rankInfo.starsToNext + nextRankInfo.rankInfo.starsToNext) * 113) / -2	- 10"/>
		<bind name="watch" value="'leftOffsetX';		((thisRankInfo.rankInfo.starsToNext + prevRankInfo.rankInfo.starsToNext) * 113) / 2		+ 10"/>
		<bind name="watch" value="'isStartAnimationRank'; oldRankInfo.rankInfo.id == thisRankInfo.rankInfo.id"/>
		<bind name="watch" value="'isTopRank'; thisRank == SC.Ranked.RANK_CONSTANTS.TOP_RANK"/>
		<bind name="watch" value="'leagueId'; thisRankInfo.rankInfo.leagueId"/>
		<bind name="appear" value="'rankUpTo_'	+ $value;		0.7; 0; {alpha: 0, left: leftOffsetX};	{alpha: 1, left: 0};			SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'rankUpTo_'	+ ($value - 1);	0.7; 0; {alpha: 1, left: 0};			{alpha: 0, left: rightOffsetX};	SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'rankDownTo_'	+ $value;		0.7; 0; {alpha: 0, left: rightOffsetX};	{alpha: 1, left: 0};			SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="appear" value="'rankDownTo_'	+ ($value + 1);	0.7; 0; {alpha: 1, left: 0};			{alpha: 0, left: leftOffsetX};	SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<bind name="dispatch" value="'rankUpTo_'	+ $value; 'animationStepFinished'; null; false; 1.2"/>
		<bind name="dispatch" value="'rankDownTo_'	+ $value; 'animationStepFinished'; null; false; 1.2"/>
		<bind name="style" value="'alpha'; isStartAnimationRank ? 1 : 0"/>
		<styleClass value="$MiddleAligned"/>
		<block>
			<bind name="visible" value="!(isTopRank &amp;&amp; !_isQualificationView) &amp;&amp; !isQualificationPassed"/>
			<bind name="instance" value="'RankedStarsRenderer'; {	_starsToNextRank: thisRankInfo.rankInfo.starsToNext,
													_rankId: $value,
													_leagueId: thisRankInfo.rankInfo.leagueId,
													_maxStarsInLine: maxStarsInLine,
													_oldInfo: _oldInfo,
													_isStartAnimationRank: isStartAnimationRank,
													_hasAnimation: true }"/>
		</block>
		<block>
			<style>
				<marginTop value="32px"/>
			</style>
			<bind name="instance" value="'TopRankCongratulationText'; isTopRank &amp;&amp; !_isQualificationView ? { _leagueId: leagueId } : null"/>
		</block>
	</block>
	<block className="RankedRewardRepeater">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<bind name="visible" value="$index &gt; 0"/>
			<style>
				<height value="100%"/>
				<width value="3px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="100%"/>
					<marginBottom value="720:4,1080:16ah"/>
					<textAlign value="center"/>
					<alpha value="0.75"/>
				</style>
				<bind name="text" value="dataArray[2]"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'RewardCategory'; { _rewardCategory: dataArray[1], _isReceived: dataArray[3] }"/>
				<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: dataArray[0],
														_tooltipHeader: dataArray[2],
														_isReceived: true }"/>
			</block>
		</block>
	</block>
	<block className="RemainingRankedRewards">
		<bind name="watch" value="'victories'; _remainingVictories[$index] ? _remainingVictories[$index] : null"/>
		<bind name="watch" value="'rewardsCategory'; _remainingRewardsCategories[$index]"/>
		<bind name="style" value="'marginLeft'; $index ? '24px' : '0'"/>
		<bind name="tooltip" value="'RewardContainerTooltip'; {	_rewards: dataArray,
												_tooltipHeader: subst('IDS_PL_RANK_REWARDS_VICTORIES_CURRENT',
																	[], { _victoriesCount: victories }, victories),
												_isReceived: true }"/>
		<bind name="instance" value="'RewardCategory'; { _rewardCategory: rewardsCategory, _isReceived: true }"/>
	</block>

	<!-- replays_table_content -->
	<block className="ReplaysTableHeader">
		<bind name="appear" value="'startShow'; 0.15; 0.3; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'index'; 5"/>
		<bind name="catch" value="'changeColumnSortingIndex'"/>
		<bind name="action" value="'changeColumnSortingIndex', '__TODO_requestNewSortingFromServer'; {sortIndex: index}"/>
		<bind name="var" value="{ReplaysTableHeaderItems: [
			{ids: 'GAMETYPE', width: '64px'},
			{ids: 'MAPANDGAMEMODE', width: '160px'},
			{ids: 'SHIPANDMATCHRESULT', width: '192px'},
			{ids: 'REPLAYNAME', width: '304px'},
			{ids: 'COMBATEFFICIENCYANDECONOMICS', width: '256px'},
			{ids: 'TIMEANDDATE', width: '112px'}
		]}"/>
		<block>
			<style>
				<height value="40px"/>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="ReplaysTableHeaderItems; 'ReplaysTableHeaderItem'; {_sortIndex: index}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ReplaysTableHeaderItem">
		<style>
			<height value="100%"/>
		</style>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dispatch" value="'click'; 'changeColumnSortingIndex'; {index: $index}"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<bind name="style" value="'width'; width"/>
			<bind name="style" value="'align'; $index == 5 ? 'right' : 'left'"/>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="style" value="'textColor'; rollOver &amp;&amp; !(_sortIndex == $index)	? '0xCFEDED'
																			: _sortIndex == $index 	? '0xFFFFFF'
																									: '0x9CBABA'"/>
				<bind name="text" value="tr('IDS_REPLAYS_TABLE_HEADER_') + tr(ids)"/>
			</block>
		</block>
	</block>
	<block className="ReplaysTableContentWrapper">
		<bind name="appear" value="'startShow'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'startHide'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
		<styleClass value="$DefaultScrollBar"/>
		<style>
			<width value="100%"/>
			<height value="1280:416, 1920:640aw"/>
		</style>
		<bind name="collectionRepeatDH" value="CC.replayMetadata; 'ReplaysTableRow'; _subcollection; {_selectedTabIndex: _selectedTabIndex}"/>
	</block>
	<block className="ReplaysTableRow">
		<bind name="appear" value="'addedToStage'; 0.15; 0 + $index/15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'startHide'; 0.15; 0 + $index/20; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
		<style>
			<height value="64px"/>
			<width value="100%"/>
			<backgroundColor value="0x33000000"/>
		</style>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="clickSplit"/>
		<bind name="dispatch" value="'right_click'; 'Tooltip.Close'"/>
		<bind name="action" value="'left_click';
					((!replay.isSaved &amp;&amp; (downloadProgress.status != DownloadStatuses.DOWNLOADING))
						? 'ReplaysProxy.download'
						: ((replay.isSaved &amp;&amp; replay.isCompatible)	? 'ReplaysProxy.playReplay'
																				 											: null));
					{replayId: replay.replayId}"/>
		<bind name="dataRefDH" value="'replayEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'replay'; ['replayEntity.replayMetadata.evUpdate']; replayEntity.replayMetadata"/>
		<bind name="watchDH" value="'downloadProgress'; ['replayEntity.downloadProgress.evUpdateState']; replayEntity.downloadProgress"/>
		<bind name="var" value="{DownloadStatuses: {
		NOT_DOWNLOADED: null,
		COMPLETE: 200,
		DOWNLOADING: 0,
		FORBIDDEN: 403,
		NOT_FOUND: 404,
		UNKNOWN_ERROR: 500,
		SERVICE_UNAVAILABLE: 503,
		NETWORK_ERROR: 504
	}}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="(rollOver || contextMenuVisible); 0.1; {alpha: 0}; {alpha: 1}"/>
			<block className="dock_submenu_item_bg" type="native">
				<bind name="transition" value="contextMenuVisible; 0.1; {alpha: 1}; {alpha: 0.62}"/>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="downloadProgress.status != DownloadStatuses.COMPLETE"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<height value="64px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<bind name="fade" value="downloadProgress.status == DownloadStatuses.DOWNLOADING; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 3; 0"/>
					<block>
						<styleClass value="$MiddleAligned"/>
						<block className="loading_bar_small_centered" type="native">
							<bind name="visible" value="!errors.description"/>
							<style>
								<top value="10px"/>
								<left value="-24px"/>
								<position value="absolute"/>
								<hitTest value="false"/>
							</style>
						</block>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<marginTop value="-1px"/>
							</style>
							<bind name="text" value="'IDS_REPLAYS_TABLE_ROW_STATUS_DOWNLOADING'"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="fade" value="downloadProgress.status &gt; DownloadStatuses.COMPLETE; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 3; 0"/>
					<block type="text">
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextDefaultBoldNM"/>
						<styleClass value="$FontColorCompareNegative"/>
						<style>
							<marginTop value="-1px"/>
						</style>
						<bind name="text" value="downloadProgress.status == DownloadStatuses.DOWNLOADING ? '' : toUpperCase(tr('IDS_REPLAYS_TABLE_ROW_STATUS_' + downloadProgress.status))"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="fade" value="(_selectedTabIndex == 0 
						&amp;&amp; (downloadProgress.status == DownloadStatuses.NOT_DOWNLOADED || downloadProgress.status == DownloadStatuses.COMPLETE)) 
						|| (_selectedTabIndex == 1); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 3; 0"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="menu" value="'TableRowMenu'; { _replayId: replay.replayId }; null; null; 'contextMenuVisible'"/>
			<block>
				<style>
					<width value="64px"/>
					<height value="100%"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$MiddleAligned"/>
					<style>
						<width value="35px"/>
						<height value="35px"/>
						<backgroundSize value="cover"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../service_kit/battle_types/' + replay.gameType + '_small.png'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_' + toUpperCase(replay.gameType)}"/>
				</block>
			</block>
			<block>
				<style>
					<width value="256px"/>
					<height value="100%"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="144px"/>
							<multiline value="false"/>
							<marginBottom value="8px"/>
						</style>
						<bind name="primaryEntityDH" value="'mapInfoEntity'; CC.mapInfo; replay.mapName"/>
						<bind name="text" value="mapInfoEntity.mapInfo.nameIds"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="144px"/>
							<multiline value="false"/>
							<alpha value="0.54"/>
						</style>
						<bind name="text" value="tr('IDS_' + toUpperCase(replay.gameMode) + '_TITLE')"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="648px"/>
					<height value="100%"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<block className="icon_check" type="native">
							<bind name="transition" value="(replay.isSaved &amp;&amp; _selectedTabIndex == 0); 0.15; {alpha: 0}; {alpha: 1}"/>
							<style>
								<position value="absolute"/>
								<left value="-20"/>
							</style>
						</block>
						<block type="text">
							<styleClass value="$TextDefaultNM"/>
							<style>
								<width value="500px"/>
								<multiline value="false"/>
								<alpha value="0.54"/>
							</style>
							<bind name="text" value="replay.replayName"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="112px"/>
					<height value="100%"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<styleClass value="$TextSecondary"/>
						<bind name="text" value="replay.dateTime.time"/>
					</block>
					<block type="text">
						<styleClass value="$TextSecondary"/>
						<bind name="text" value="replay.dateTime.date"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="!replay.isCompatible"/>
				<style>
					<width value="32px"/>
					<height value="100%"/>
					<position value="absolute"/>
					<right value="0"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<block className="icon_warning_orange" type="native"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="40px"/>
				<height value="100%"/>
				<position value="absolute"/>
				<right value="0"/>
				<top value="-1px"/>
			</style>
			<bind name="visible" value="replay.isFavourite"/>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_REPLAYS_TABLE_ROW_FAVOURITE'}"/>
			<block className="icon_primary_ribbon" type="native"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="0"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>

	<!-- replays_table_row_menu -->
	<block className="TableRowMenu">
		<bind name="primaryEntityDH" value="'replayEntity'; CC.replayMetadata; _replayId"/>
		<bind name="watchDH" value="'replay'; ['replayEntity.replayMetadata.evUpdate']; replayEntity.replayMetadata"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; {}"/>
		</block>
		<block>
			<bind name="visible" value="(!replay.isSaved &amp;&amp; replay.isCompatible)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_SAVE'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'ReplaysProxy.download'; {replayId: _replayId}"/>
		</block>
		<block>
			<bind name="visible" value="replay.isSaved &amp;&amp; replay.isCompatible"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_PLAY'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'ReplaysProxy.playReplay'; {replayId: _replayId}"/>
		</block>
		<block>
			<bind name="visible" value="false"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_POSTBATTLESTATS'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="request" value="'click'; replay.isSaved ? 'showReplayPostBattleStats' : 'getPostBattleStats'; {replayId: _replayId, isOnReplayWindow: true}"/>
		</block>
		<block>
			<bind name="visible" value="replay.isSaved"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="replay.isFavourite ? 'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_REMOVEFROMFAVOURITES' : 'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_ADDTOFAVOURITES'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'ReplaysProxy.toggleFavourite'; {replayId: _replayId}"/>
		</block>
		<block>
			<bind name="visible" value="replay.isSaved"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_RENAME'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="request" value="'click'; 'showRenameReplaysWindow'; {replayId: _replayId}"/>
		</block>
		<block>
			<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
			<bind name="watchDH" value="'isExternalPlatformClient'; ['loginEntity.loginData.evUpdate']; loginEntity.loginData.isExternalPlatformClient"/>
			<bind name="visible" value="replay.isSaved &amp;&amp; !isExternalPlatformClient"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_SHOWINFOLDER'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'ReplaysProxy.showLocation'; {replayId: _replayId}"/>
		</block>
		<block>
			<bind name="visible" value="replay.isSaved"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="MenuItem">
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
				<block>
					<style>
						<width value="100%"/>
						<padding value="8px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="'IDS_REPLAYS_TABLE_ROW_CONTEXTMENU_DELETE'"/>
						<bind name="name" value="'menu_item_' + _titleIds"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; 'ReplaysProxy.remove'; {replayId: _replayId}"/>
		</block>
	</block>

	<!-- results_screen -->
	<block className="TabBarResults">
		<block className="BattleResultsMainTabButtons" type="ublock">
			<bind name="build!" value="{ _currentTabIndex: _currentTabIndex,
						_isTeamResultVisible: _isTeamResultVisible,
						_isDetailedReportVisible: _isDetailedReportVisible }"/>
		</block>
	</block>
	<block className="ResultsScreen">
		<bind name="appear" value="'addedToStage'; 1; 0; {alpha: 0}; {alpha: 1}"/>
		<bind name="appear" value="'startHide'; 1; 0; {alpha: 1}; {alpha: 0}"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'PBSScreenActiveTabIndex'; userPrefs.PBSScreenActiveTabIndex == null ? SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT : userPrefs.PBSScreenActiveTabIndex"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'battleResults'; ['battleResultsDH.dataComponent.evDataChanged']; battleResultsDH.dataComponent.data"/>
		<bind name="watch" value="'gameData'; 			battleResults.game_data"/>
		<bind name="watch" value="'personal'; 			battleResults.personal"/>
		<bind name="watch" value="'teamResults'; 		battleResults.team_results"/>
		<bind name="watch" value="'creditsExperience'; 	battleResults.credits_experience"/>
		<bind name="watch" value="'result'; 				gameData.battle_result"/>
		<bind name="watch" value="'resultText'; result == SC.Battle.BATTLE_RESULT.WON_POSITION 	? subst('IDS_SYS_MSG_BATTLE_RESULTS_' + result, [], {_wonPosition: personal.wonPosition})
																				: UIStrings.getEndBattleResult(result)"/>
		<bind name="watch" value="'isSpectator'; gameData.isSpectator"/>
		<bind name="watch" value="'game_mode'; 	gameData.game_mode"/>
		<bind name="watch" value="'scenario'; 	gameData.scenario"/>
		<bind name="watch" value="'isPersonalResultsOnly';	scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'isBattleResultReasonHided'; false"/>
		<bind name="watch" value="'isTeamResultVisible'; 	game_mode != GameMode.BATTLE_CHALLENGES &amp;&amp; game_mode != GameMode.BATTLE_TRIALS"/>
		<bind name="watch" value="'isDetailedReportVisible'; game_mode != GameMode.BATTLE_CHALLENGES"/>
		<bind name="watch" value="'commentText'; UIStrings.getEndBattleComment(isBattleResultReasonHided || !battleResults ? {} : battleResults)"/>
		<bind name="watch" value="'validTabIndex';	isPersonalResultsOnly 	? SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT :
									isSpectator 			? SC.Common.POST_BATTLE_SCREEN_TAB.TEAM_REPORT
															: PBSScreenActiveTabIndex"/>
		<bind name="watch" value="'hideTabBars'; isSpectator || isPersonalResultsOnly"/>
		<bind name="watch" value="'battleType'; gameData.battleType"/>
		<bind name="watch" value="'deficitList'; battleResultsDH.battleResultsStructured.deficitList"/>
		<bind name="watch" value="'isDeficitListVisible'; deficitList &amp;&amp; !isReplayPlaying"/>
		<bind name="firstEntityDH" value="'battleInfoEntity'; CC.battleInfo"/>
		<bind name="watch" value="'isReplayPlaying'; battleInfoEntity.battleInfo.isReplayPlaying"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; playerShipId"/>
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'contrast'; ['contrastEntity.preference.evValueChanged']; contrastEntity.preference.value"/>
		<bind name="watchDH" value="'abuseStatus'; ['selfPlayerEntity.accountInfo.evAbuseStatusChanged']; selfPlayerEntity.accountInfo.abuseStatus"/>
		<bind name="watchDH" value="'accountLevel'; ['selfPlayerEntity.accountLevel.evLevelChanged']; selfPlayerEntity.accountLevel.level"/>
		<bind name="watchDH" value="'hasParentalControlRestriction'; ['selfPlayerEntity.accountSelf.evHasParentalControlRestrictionChanged']; selfPlayerEntity.accountSelf.hasParentalControlRestriction"/>
		<bind name="watchDH" value="'isShipReady'; ['shipOwnEntity.ownShip.evIsReadyChanged']; shipOwnEntity.ownShip.isReady"/>
		<bind name="catch" value="'onLostTop';	{ isOnTop: false }"/>
		<bind name="catch" value="'onBecomeTop';	{ isOnTop: true }"/>
		<bind name="var" value="{ isOnTop: false }"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'accountLevel';  ['selfPlayerEntity.accountLevel.evLevelChanged']; selfPlayerEntity.accountLevel.level"/>
		<bind name="firstEntityDH" value="'continuousBattleEnterEntity'; CC.continuousBattleEnter"/>
		<bind name="watchDH" value="'warningsMask';	['continuousBattleEnterEntity.continuousBattleEnter.evChanged']; continuousBattleEnterEntity.continuousBattleEnter.warningsMask"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.preBattle"/>
		<bind name="watch" value="'isAgainToBattleButtonVisible';	accountLevel &gt;= SC.Common.ACCOUNT_LEVEL.BATTLE_BONUSES &amp;&amp;
													!divisionDataEntity &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_TYPE)) &amp;&amp;
													!(warningsMask &amp; (1 &lt;&lt; SC.Common.CONTINUOUS_BATTLE_ENTER_WARNING_FLAG.BATTLE_SHIP)) &amp;&amp;
													battleType != SC.Common.BATTLE_TYPES.CLAN_BATTLE &amp;&amp;
													battleType != SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="action" value="'addedToStage'; 'setUserPref'; { name: 'PBSScreenActiveTabIndex', value: SC.Common.POST_BATTLE_SCREEN_TAB.PERSONAL_REPORT }"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="isBlurEnabled"/>
			<bind name="appear" value="'startShow'; 0.3; 0.8; {alpha: 0}; {alpha: 0.8}"/>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<block className="blurmap_low" type="native">
					<bind name="appear" value="'startShow'; 2.0; 0; {alpha: 0}; {alpha: 0.8}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.5; 0.8; {alpha: 0}; {alpha: 1.5}"/>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<alpha value="1.6"/>
				</style>
			</block>
		</block>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="((contrast) &amp;&amp; (validTabIndex != 0))"/>
		</block>
		<bind name="stageSize"/>
		<bind name="watch" value="'PBSWidth'; 1077 + (stageWidth - 1280)*0.536"/>
		<bind name="watch" value="'PBSHeight'; 630 + (stageHeight - 720)*0.3"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="100%"/>
				<width value="1280:1077,1920:1420aw"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; stageWidth &gt;= 1440 ? '24px' : '12px'"/>
				<bind name="appear" value="'startShow'; 0.3; 1.4; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'TabBarResults'; hideTabBars 	? null
																: { _currentTabIndex: validTabIndex,
																	_isTeamResultVisible: isTeamResultVisible,
																	_isDetailedReportVisible: isDetailedReportVisible }"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<top value="7px"/>
						<right value="-60px"/>
					</style>
					<bind name="instance" value="'ModalWindowCloseIcon'; {_tooltipText: isReplayPlaying ? 'IDS_TOOLTIP_MENU' : 'IDS_CLOSE'}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<style>
					<width value="100%"/>
					<height value="720:630,1080:738ah"/>
				</style>
				<bind name="style" value="'marginTop'; 10 + (stageHeight - 720) * 0.2"/>
				<bind name="child" value="validTabIndex; {	_data: {	team_results: teamResults,
														personal: personal,
														game_data: gameData,
														credits_experience: creditsExperience,
														resultText: resultText,
														commentText: commentText,
														_PBSWidth: PBSWidth, _PBSHeight: PBSHeight
													}
										}; 'PersonalResultSection'; 'TeamResultSection'; 'DetailedReportSection'; 'EconomicsSection'"/>
			</block>
			<block>
				<bind name="style" value="'bottom'; 10 + (stageHeight - 720) * 0.15"/>
				<style>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block>
					<bind name="name" value="'BottomTabBarButtonDebriefing'"/>
					<styleClass value="$MiddleAligned"/>
					<bind name="appear" value="'startShow'; 0.3; 2.0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
					<bind name="instance" value="'DefaultButton'; {	_width: '168px',
													_name: isReplayPlaying ? null : 'btn_close',
													_action: isReplayPlaying ? 'restartReplay' : null,
													_label: isReplayPlaying ? 'IDS_BATTLE_STATS_RESTART_REPLAY' : 'IDS_BATTLE_STATS_BACK_TO_DOCK',
													_enabled: true,
													_focusIndex: 1,
													_defaultFocused: true}"/>
					<block>
						<bind name="visible" value="isDeficitListVisible"/>
						<style>
							<position value="absolute"/>
							<left value="-48px"/>
							<top value="-2px"/>
							<backgroundColor value="0x01000000"/>
						</style>
						<bind name="instance" value="'MarkerAttention';		isDeficitListVisible	? { _size: 1 } : null"/>
						<bind name="tooltip" value="'SimpleStatusTooltip';	isDeficitListVisible	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																						_text: deficitList }
																					: null"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'startShow'; 0.3; 2.2; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
					<style>
						<position value="absolute"/>
						<right value="15px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; isAgainToBattleButtonVisible	? {	_width: '146px',
																					_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
																					_enabled: true,
																					_isTransactionBtn: true,
																					_label: 'IDS_AGAIN',
																					_name: 'btn_again_to_battle',
																					_focusIndex: 2}
																				: null"/>
				</block>
			</block>
		</block>
		<bind name="primaryEntityDH" value="'selfPlayerVoiceChatEntity'; CC.playerVoiceState; selfPlayerName"/>
		<bind name="watchDH" value="'selfPlayerVoiceChatIsSpeaking'; ['selfPlayerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; selfPlayerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$BottomMenu"/>
			<block>
				<style>
					<marginLeft value="10px"/>
					<marginTop value="4px"/>
					<width value="19px"/>
					<height value="17px"/>
				</style>
				<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isSpeaking: selfPlayerVoiceChatIsSpeaking}"/>
			</block>
		</block>
	</block>

	<!-- results_screen_detailed_report -->
	<block className="DetailedReportSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'RealDetailedReportSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealDetailedReportSection">
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="stageSize"/>
		<style>
			<width value="100%"/>
			<height value="720:630,1080:738ah"/>
			<alpha value="0"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginBottom'; 10 + (stageHeight - 720) * 0.04"/>
			<bind name="entityDH" value="'shipsInteractionsEntity'; battleResultsDH.battleResultsStructured.interactions[0]"/>
			<bind name="entityDH" value="'buildingInteractionsEntity'; battleResultsDH.battleResultsStructured.buildingInteractions[0]"/>
			<bind name="instance" value="'BattleStatsInteractionsCarousel'; ((	shipsInteractionsEntity.battleResultsEntry.children.length +
																buildingInteractionsEntity.battleResultsEntry.children.length) &gt; 0)	? {	_shipsInteractionsEntity: shipsInteractionsEntity,
																																		_buildingInteractionsEntity: buildingInteractionsEntity,
																																		_PBSWidth: _PBSWidth}
																																	: null"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<styleClass value="$DefaultScrollBar"/>
			<block>
				<style>
					<width value="1280:357,1920:471aw"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.causedDamage}"/>
			</block>
			<block>
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
					<width value="1280:357,1920:471aw"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.generalInfo, _battleResultsDH: battleResultsDH}"/>
			</block>
			<block>
				<style>
					<width value="1280:357,1920:471aw"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.takenDamage, _battleResultsDH: battleResultsDH}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsDetailedReportColumn">
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_list; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginTop';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE &amp;&amp; $index == 0		?	'5px'
																									:	'0px'"/>
		<bind name="style" value="'marginBottom';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp;
									(($index + 1) == _childrenLength)						? '12px' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE &amp;&amp;
									(($index + 1) == _childrenLength)	&amp;&amp;
									!(entity.battleResultsEntry.children.length)			? '12px'
 																							: '0px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER 		? 'BattleStatsDetailedReportHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBHEADER 		? 'BattleStatsDetailedReportSubHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE 			? 'BattleStatsDetailedReportLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE 		? 'BattleStatsDetailedReportSubLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LIST 			? 'BattleStatsDetailedReportList' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.EMPTY_LINE 	? 'BattleStatsDetailedReportEmptyLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL 			? 'BattleStatsDetailedReportTotalLine':
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLAIN_LINE 	? 'BattleStatsDetailedReportPlainLine'
																											: 'EmptyItem'"/>
			<bind name="instance" value="renderer; {_entity: entity, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportEmptyLine">
		<style>
			<width value="100%"/>
			<height value="3px"/>
		</style>
	</block>
	<block className="BattleStatsDetailedReportHeader">
		<bind name="watch" value="'iconPath'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
				<background9Slice value="[2]"/>
			</style>
			<bind name="style" value="'backgroundImage'; iconPath"/>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-1px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {	_entity :			_entity,																	
																	_labelClass :		'$TextLargeHeaderBold',
																	_valueSizeClass :	'$FontSizeHeader5'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportSubHeader">
		<bind name="watch" value="'iconPath'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
				<background9Slice value="[2]"/>
			</style>
			<bind name="style" value="'backgroundImage'; iconPath"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity : 			_entity,
																_battleResultsDH :	_battleResultsDH,
																_labelClass : 		'$TextHeaderWhiteBold',
																_valueSizeClass :	'$FontSizeHeader6'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportList">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<flow value="htile"/>
				<align value="center"/>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportListItem'"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefaultBold', _valueSizeClass: '$FontSizeDefault'}"/>
			</block>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<marginTop value="-3px"/>
					<alpha value="0.5"/>
				</style>
				<block className="DottedLine">
					<style>
						<backgroundImage value="bitmap:dotted_line"/>
						<backgroundRepeatX value="true"/>
						<width value="100%"/>
						<height value="1px"/>
						<alpha value="0.5"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportPlainLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault'}"/>
			</block>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<marginTop value="-3px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="4px"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportListItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLANE 			? 'BattleStatsDetailedReportListPlaneItem' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.MODULE_CRIT 	? 'BattleStatsDetailedReportListModuleItem'
																										: 'EmptyItem'"/>
		<bind name="instance" value="renderer; {_entity: entity}"/>
	</block>
	<block className="BattleStatsDetailedReportListModuleItem">
		<bind name="tooltip" value="'ListItemTooltip'; {	_entity: _entity}"/>
		<style>
			<width value="61px"/>
			<height value="60px"/>
		</style>
		<block>
			<style>
				<marginLeft value="4px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="instance" value="'PBSModuleIconWithAmount'; {_moduleType: _entity.battleResultsEntry.values[0].type,
														_amount: _entity.battleResultsEntry.values[0].value}"/>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportListPlaneItem">
		<style>
			<width value="61px"/>
			<height value="45px"/>
		</style>
		<bind name="tooltip" value="'ListItemTooltip'; {	_entity: _entity}"/>
		<block>
			<style>
				<marginLeft value="10px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="instance" value="'PBSPlaneIconWithAmount'; {	_planeType: _entity.battleResultsEntry.values[0].type,
														_amount: _entity.battleResultsEntry.values[0].value}"/>
			</block>
		</block>
	</block>
	<block className="PBSPlaneIconWithAmount">
		<style>
			<width value="25px"/>
			<height value="25px"/>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../service_kit/battle_results/icon_stat_' + _planeType + '.png')"/>
		<block type="text">
			<style>
				<position value="absolute"/>
				<top value="4px"/>
				<marginLeft value="24px"/>
			</style>
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="text" value="_amount"/>
		</block>
	</block>
	<block className="PBSModuleIconWithAmount">
		<block className="lesta.controls.BitmapEx" type="native">
			<bind name="bitmapDataClassName" value="'icon_module_' + _moduleType + '_1'"/>
		</block>
		<block type="text">
			<style>
				<position value="absolute"/>
				<top value="21px"/>
				<marginLeft value="35px"/>
			</style>
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="text" value="_amount"/>
		</block>
	</block>
	<block className="ListItemTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="64px"/>
				</style>
				<block>
					<style>
						<width value="64px"/>
						<height value="64px"/>
					</style>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$MiddleAligned"/>
						<bind name="watch" value="'renderer'; 	_entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLANE 		? 'PBSPlaneIconWithAmount' :
												_entity.battleResultsEntry.type == SC.Result_screen.TYPES.MODULE_CRIT 	? 'PBSModuleIconWithAmount'
																														: 'EmptyItem'"/>
						<bind name="instance" value="renderer;	{
													_planeType: 	_entity.battleResultsEntry.values[0].type,
													_moduleType: 	_entity.battleResultsEntry.values[0].type,
													_amount: 		_entity.battleResultsEntry.values[0].value
												}"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="10px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderWhiteBold"/>
						<bind name="text" value="_entity.battleResultsEntry.subtitle"/>
					</block>
					<block type="text">
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<marginTop value="-4px"/>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="_entity.battleResultsEntry.title"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
					<style>
						<width value="100%"/>
						<bottom value="0px"/>
						<position value="absolute"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginBottom value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
					<marginBottom value="10px"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _marginLeft: '3px'}"/>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportSubLine">
		<style>
			<width value="100%"/>
			<height value="20px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="2px"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault', _battleResultsDH: _battleResultsDH}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginTop value="-1px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportTotalLine">
		<style>
			<height value="48px"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<textAlign value="center"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextHeader"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="_entity.battleResultsEntry.title"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowItem">
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'alpha';	_entity.battleResultsEntry.values[0] == null ||
							(	_entity.battleResultsEntry.values[0].value ||
								_entity.battleResultsEntry.values[1].value ||
								_entity.battleResultsEntry.values[2].value)		?	1 : 0.5"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.hint	? {_text: _entity.battleResultsEntry.hint}: null"/>
			<bind name="tooltip" value="	_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TEAM_KILLER			? 'PBSTeamKillerTooltip':
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ARTILLERY		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_TORPEDOES		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_BOMBS			? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ROCKETS			? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_SKIP_BOMBS		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_AIRSUPPORT		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_NAVAL_MINES		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_DEPTH_CHARGES	? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_OTHER			? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.SCOUTING_DAMAGE		? 'TakenDamageTooltip'
																														: 'EmptyItem' ;
						_entity.battleResultsEntry.tooltipType	? {	_entity: _entity, _battleResultsDH: _battleResultsDH} : null"/>
		</block>
		<bind name="watch" value="'fontColorClass';	_entity.battleResultsEntry.color == SC.Result_screen.COLORS.PINK 	? '$FontColorTeamkiller' :
									_entity.battleResultsEntry.color == SC.Result_screen.COLORS.RED		? '$FontColorCompareNegative'
																										: '$None'"/>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="class" value="_labelClass"/>
				<bind name="class" value="fontColorClass"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
			<block>
				<style>
					<right value="0px"/>
					<position value="absolute"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.values; 'BattleStatsDetailedReportRowValue'; {_fontColorClass: '$None', _fontSizeClass: _valueSizeClass}; true"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="TakenDamageTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
		</style>
		<bind name="stageSize"/>
		<bind name="var" value="{isTakenArtilleryTooltip: _entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ARTILLERY}"/>
		<bind name="var" value="{constDecreaseTooltip: isTakenArtilleryTooltip ? 266 : 450}"/>
		<bind name="watch" value="'tooltipHeight'; (stageHeight - constDecreaseTooltip - (stageHeight - 720) * 0.4)"/>
		<bind name="style" value="'height'; tooltipHeight +'px'"/>
		<bind name="var" value="{paddingBottom: 15}"/>
		<bind name="watch" value="'heightTooltipPanel'; vTileHeight + paddingBottom"/>
		<bind name="watch" value="'shipInteractionsList';	_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ARTILLERY		? _battleResultsDH.battleResultsStructured.takenArtilleryTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_TORPEDOES		? _battleResultsDH.battleResultsStructured.takenTorpedoesTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_BOMBS			? _battleResultsDH.battleResultsStructured.takenBombsTooltip		:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_ROCKETS			? _battleResultsDH.battleResultsStructured.takenRocketsTooltip		:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_SKIP_BOMBS		? _battleResultsDH.battleResultsStructured.takenSkipBombsTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_AIRSUPPORT		? _battleResultsDH.battleResultsStructured.takenAirsupportTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_NAVAL_MINES		? _battleResultsDH.battleResultsStructured.takenNavalMinesTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_DEPTH_CHARGES	? _battleResultsDH.battleResultsStructured.takenDepthChargesTooltip	:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.TAKEN_OTHER			? _battleResultsDH.battleResultsStructured.takenOtherTooltip		:
											_entity.battleResultsEntry.tooltipType == SC.Result_screen.TOOLTIP_TYPES.SCOUTING_DAMAGE		? _battleResultsDH.battleResultsStructured.scoutingDamageTooltip
																																			: _battleResultsDH.battleResultsStructured.takenOtherTooltip"/>
		<block>
			<style>
				<width value="100%"/>
				<height value="100%"/>
			</style>
			<bind name="style" value="'height'; heightTooltipPanel +'px'"/>
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
			<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
			<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
			<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
			<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
			<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="vTileHack"/>
			<style>
				<height value="100%"/>
				<marginTop value="2px"/>
				<marginBottom value="1px"/>
				<marginLeft value="-1px"/>
				<flow value="vtile"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="shipInteractionsList; 'ShipInteractionsTooltipRow'; {_childrenLength: shipInteractionsList.length, _marginLeft: '3px'}"/>
		</block>
		<block>
			<bind name="visible" value="vTileWidth &gt; 318"/>
			<style>
				<left value="320px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'height'; heightTooltipPanel - 4"/>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="vTileWidth &gt; 643"/>
			<style>
				<left value="640px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'height'; heightTooltipPanel - 4"/>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowValue">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'hitTest'; hint ? true : false"/>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; hint ? {_text: hint} : null"/>
			<bind name="watch" value="'renderer'; 	type == SC.Result_screen.FORMAT.TIME 		? 'BattleStatsDetailedReportRowTimeValue' :
									type == SC.Result_screen.FORMAT.PERIOD 		? 'BattleStatsDetailedReportRowPeriodValue' :
									type == SC.Result_screen.FORMAT.DISTANCE 	? 'BattleStatsDetailedReportRowDistanceValue' :
									type == SC.Result_screen.FORMAT.BOLD 		? 'BattleStatsDetailedReportRowBoldValue' :
									type == SC.Result_screen.FORMAT.FLOAT 		? 'BattleStatsDetailedReportRowFloatValue' :
									type == SC.Result_screen.FORMAT.INTEGER 	? 'BattleStatsDetailedReportRowIntegerValue' :
									type == SC.Result_screen.FORMAT.NO_VALUE 	? 'EmptyItem'
																				: 'BattleStatsDetailedReportRowDefaultValue'"/>
			<bind name="instance" value="renderer; {_value: value, _fontColorClass: _fontColorClass, _fontSizeClass: _fontSizeClass}"/>
		</block>
		<block type="text">
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="(($index &gt; 0) &amp;&amp; (type != 'no_value') ? '/' : '')"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowTimeValue">
		<bind name="timeFormat" value="_value; 'hh:mm  dd.MM.yyyy'; 'formattedTime'; true"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="formattedTime"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowPeriodValue">
		<bind name="timeFormat" value="_value; 'mm:ss'; 'formattedTime'; false"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="formattedTime"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowDistanceValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, 2)+' '+tr('IDS_KILOMETER')"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowBoldValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="class" value="'$Bold'"/>
			<bind name="text" value="format(_value, -1)"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowDefaultValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, -1)"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowFloatValue">
		<bind name="watch" value="'pickedPowerupsCount';	math.floor(_value) - _value &lt; 0 ? format(_value, 1) : format(_value, 0)"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="pickedPowerupsCount"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowIntegerValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, 0)"/>
		</block>
	</block>
	<block className="PBSTeamKillerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
			<hitTest value="false"/>
		</style>
		<bind name="watch" value="'abuseStatus';_entity.battleResultsEntry.values[2].value"/>
		<bind name="firstEntityDH" value="'battleResultEntity'; CC.battleResultsStructured"/>
		<bind name="watchDH" value="'abuseReasons'; ['battleResultEntity.dataComponent.evDataChanged']; battleResultEntity.dataComponent.data['personal']['player']['abuse_components']"/>
		<block className="AbuseStatusProfileTooltip" type="ublock">
			<bind name="build!" value="	{	_abuseStatusPBS: abuseStatus,
							_abuseReasonsPBS: abuseReasons,
							_battlesToCleanPBS: _entity.battleResultsEntry.values[1].value
						}"/>
		</block>
	</block>

	<!-- results_screen_detailed_report_carousel -->
	<block className="BattleStatsInteractionsCarousel">
		<style>
			<width value="100%"/>
			<height value="124px"/>
		</style>
		<bind name="var" value="{itemWidth: 218}"/>
		<bind name="watch" value="'isScrollNeeded'; _PBSWidth &lt; ((	_shipsInteractionsEntity.battleResultsEntry.children.length +
													_buildingInteractionsEntity.battleResultsEntry.children.length) * itemWidth)"/>
		<bind name="child" value="isScrollNeeded; {	_repeatCollectionShips: _shipsInteractionsEntity.battleResultsEntry.children,
									_repeatCollectionBuildings: _buildingInteractionsEntity.battleResultsEntry.children,
									_interactionsEntity: _interactionsEntity, _itemWidth: itemWidth,
									_wheelScrollSpeed: itemWidth}; 'PBSCarouselNoScroll'; 'PBSCarouselScroll'"/>
	</block>
	<block className="PBSCarouselScroll">
		<styleClass value="$Fullsize"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<width value="18px"/>
				<height value="100%"/>
				<left value="-10px"/>
			</style>
			<block className="button_slide_left" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="enabled" value="RDCarouselCanScrollLeft"/>
				<bind name="event" value="'click'; scrollLeftByOneUnit"/>
			</block>
		</block>
		<block>
			<style>
				<marginRight value="18px"/>
				<marginLeft value="18px"/>
				<flow value="horizontal"/>
				<width value="100%"/>
				<height value="100%"/>
				<overflow value="scroll"/>
				<scrollArea value="ModernScrollAreaHorizontal"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
				<itemWidth value="218"/>
				<itemHeight value="124"/>
			</style>
			<bind name="style" value="'itemWidth'; _itemWidth"/>
			<bind name="style" value="'wheelScrollSpeed'; _wheelScrollSpeed"/>
			<bind name="controller" value="'lesta.unbound.controls.UbCarouselController'"/>
			<bind name="scrollController" value="'RDCarousel'; 0; 1"/>
			<bind name="repeat" value="_repeatCollectionShips; 'BattleResultsInteractionShipItem'; {_itemWidth: _itemWidth}"/>
			<bind name="repeat" value="_repeatCollectionBuildings; 'BattleResultsInteractionBuildingItem'; {_itemWidth: _itemWidth}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<width value="18px"/>
				<height value="100%"/>
				<right value="-10px"/>
			</style>
			<block className="button_slide_right" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="name" value="'buttonCarouselRight'"/>
				<bind name="enabled" value="RDCarouselCanScrollRight"/>
				<bind name="event" value="'click'; scrollRightByOneUnit"/>
			</block>
		</block>
	</block>
	<block className="PBSCarouselNoScroll">
		<style>
			<flow value="horizontal"/>
			<marginLeft value="-5px"/>
		</style>
		<bind name="repeat" value="_repeatCollectionShips; 'BattleResultsInteractionShipItem'; {_itemWidth: _itemWidth}"/>
		<bind name="repeat" value="_repeatCollectionBuildings; 'BattleResultsInteractionBuildingItem'; {_itemWidth: _itemWidth}"/>
	</block>
	<block className="BattleResultsInteractionBuildingItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'paramsId'; entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'name'; entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'suppressionCount'; entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'buildingType'; entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'causedDamage'; entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'totalHits'; entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'isKilledByMe'; entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'isAlive'; entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'planesKilled'; entity.battleResultsEntry.values[8].value"/>
		<style>
			<height value="124px"/>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
		</style>
		<bind name="style" value="'width'; ((_itemWidth - 10) + 'px')"/>
		<block className="pbs_slot_bg" type="native">
			<bind name="tooltip" value="'BattleResultsShipInteractionsTooltip'; {_list: entity.battleResultsEntry.children}"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="watch" value="'groundIconName'; !isAlive || (suppressionCount &gt; 0) ? (buildingType + '_dead') : buildingType"/>
			<block className="icons_team_result_ground_objects" type="native">
				<bind name="gotoAndStop!" value="groundIconName"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-3px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'BattleResultsBuildingIconWithTitle'; {_name: name, _buildingType: buildingType, _isAlive: isAlive, _suppressionCount: suppressionCount}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="8px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; buildingType == 'Complex' ?	{_text: 'IDS_BATTLE_STATS_FORT_BUILDING_SUPPRESSIONS_HINT'} :
																					{_text: 'IDS_BATTLE_STATS_WATCHTOWER_BUILDING_SUPPRESSIONS_HINT'}"/>
					<bind name="visible" value="suppressionCount &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="7px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'suppression'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="suppressionCount"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_YOU_DESTROYED_THIS_BUILDING'}"/>
					<bind name="visible" value="isKilledByMe"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="6px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'building_kill'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_AIRBASE_PLANES_HINT'}"/>
					<bind name="visible" value="planesKilled &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="3px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'plane'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-2px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="planesKilled"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: tr('IDS_BATTLE_STATS_' + toUpperCase(buildingType) + '_BUILDING_DAMAGE_HINT')}"/>
					<bind name="visible" value="causedDamage &gt; 0 || totalHits &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="2px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'damage'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="format(causedDamage, -1)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleResultsInteractionShipItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'playerName'; entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isEnemy'; !(entity.battleResultsEntry.values[2].value)"/>
		<bind name="watch" value="'isKilled'; !(entity.battleResultsEntry.values[3].value)"/>
		<bind name="watch" value="'isKilledByMe'; entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'planesKilled'; entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'causedDamage'; entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'totalHits'; entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'isBot'; entity.battleResultsEntry.values[9].value"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; entity.battleResultsEntry.values[0].value; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<height value="124px"/>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
		</style>
		<bind name="style" value="'width'; ((_itemWidth - 10) + 'px')"/>
		<block className="pbs_slot_bg" type="native">
			<bind name="tooltip" value="'BattleResultsShipInteractionsTooltip'; {_list: entity.battleResultsEntry.children}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="gotoAndStop!" value="(isEnemy ? 'enemy' : 'ally')"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<width value="122px"/>
					<height value="22px"/>
				</style>
				<bind name="style" value="'marginRight'; isEnemy ?	(shipInfo.subtype == ShipTypes.Destroyer)	? '-26px' :
													(shipInfo.subtype == ShipTypes.Cruiser)		? '-14px'
																									: '0px'
												:	(shipInfo.subtype == ShipTypes.Destroyer)	? '26px' :
													(shipInfo.subtype == ShipTypes.Cruiser)		? '14px'
																									: '0px'"/>
				<bind name="style" value="'right'; isEnemy ? '-122px' : '0'"/>
				<bind name="scaleX" value="isEnemy ? '-1' : '1'"/>
				<bind name="style" value="'backgroundImage'; 'url:' + (isKilled ? shipInfo.pathTinyDeadIcon : shipInfo.pathTinyIcon)"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-3px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'BattleResultsShipTitleWithIconAndLevel'; {_shipID : entity.battleResultsEntry.values[0].value, _isEnemy: isEnemy, _isKilled: isKilled}"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<style>
					<width value="180px"/>
					<textAlign value="center"/>
					<leading value="-5"/>
				</style>
				<bind name="style" value="'noTranslate'; !isBot"/>
				<bind name="class" value="	isKilled	? '$FontColorAlmostBlack'
										: '$None'"/>
				<bind name="class" value="isKilled ? '$FontDropShadowWhite' : '$None'"/>
				<bind name="text" value="playerName"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="8px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_KILL_HINT'}"/>
					<bind name="visible" value="isKilledByMe"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="5px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'kill'"/>
						<bind name="alpha" value="0.7"/>
					</block>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_PLANE_HINT'}"/>
					<bind name="visible" value="planesKilled &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="3px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'plane'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-2px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="planesKilled"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_DAMAGE_HINT'}"/>
					<bind name="visible" value="causedDamage &gt; 0 || totalHits &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="4px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'damage'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="format(causedDamage, -1)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleResultsShipInteractionsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxHeight'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36))"/>
		<bind name="style" value="'height'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36))+'px'"/>
		<style>
			<hitTest value="false"/>
		</style>
		<block>
			<style>
				<width value="318px"/>
				<height value="100px"/>
			</style>
			<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {width: vTileWidth + 4, height: vTileHeight + 10}; {width: vTileWidth + 4, height: vTileHeight + 10}"/>
			<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
			<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
			<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
			<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
			<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
			<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
			<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
			<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="vTileHack"/>
			<style>
				<height value="100%"/>
				<marginTop value="2px"/>
				<marginBottom value="1px"/>
				<marginLeft value="-1px"/>
				<flow value="vtile"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="_list; 'ShipInteractionsTooltipRow'; {_childrenLength: _list.length, _marginLeft: '3px'}"/>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight - 50))"/>
			<style>
				<left value="320px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
				<style>
					<height value="300px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight*2 - 50))"/>
			<style>
				<left value="640px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
				<style>
					<height value="300px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="318px"/>
		</style>
		<bind name="style" value="'marginLeft'; _marginLeft ? _marginLeft : '0px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginTop'; (entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLAYER) &amp;&amp; ($index == 0) ? '-5px' : '0px'"/>
			<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.BUILDING_TOOLTIP_HEADER 	? 'ShipInteractionsBuildingTooltipHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOOLTIP_HEADER 			? 'ShipInteractionsTooltipHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER 					? 'ShipInteractionsHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBHEADER 					? 'ShipInteractionsSubHeader' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE 						? 'ShipInteractionsLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE 					? 'ShipInteractionsSubLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.LIST 						? 'BattleStatsDetailedReportList' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.EMPTY_LINE 				? 'ShipInteractionsTooltipEmptyLine' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.PLAYER 					? 'ShipInteractionsPlayer' :
									entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOOLTIP_LINE 				? 'ShipInteractionsTooltipLine'
																														: 'EmptyItem'"/>
			<bind name="instance" value="renderer; {_entity: entity}"/>
		</block>
	</block>
	<block className="ShipInteractionsBuildingTooltipHeader">
		<bind name="watch" value="'buildingType'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'name'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'suppressionCount'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isAlive'; _entity.battleResultsEntry.values[3].value"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<backgroundColor value="0x12ffffff"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="6px"/>
				<marginTop value="5px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="instance" value="'BattleResultsBuildingIconWithTitle'; {_name: name, _buildingType: buildingType, _isAlive: isAlive, _suppressionCount: suppressionCount}"/>
		</block>
		<block>
			<style>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 285"/>
				<bind name="text" value="'IDS_BATTLE_STATS_BUILDING_DAMAGE_NOT_FOR_STATS'"/>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipHeader">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'shipId'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'playerName'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isPlayerAlly'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isPlayerSelf'; _entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'isPlayerInMyDivision'; false"/>
		<bind name="watch" value="'isPlayerTk'; _entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'killerShipId'; _entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'killerName'; _entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'isKillerAlly'; _entity.battleResultsEntry.values[8].value"/>
		<bind name="watch" value="'isKillerSelf'; _entity.battleResultsEntry.values[9].value"/>
		<bind name="watch" value="'isKillerInMyDivision'; _entity.battleResultsEntry.values[10].value"/>
		<bind name="watch" value="'isKillerTk'; _entity.battleResultsEntry.values[11].value"/>
		<bind name="watch" value="'death_reason_id'; _entity.battleResultsEntry.values[12].value"/>
		<bind name="watch" value="'isBot'; _entity.battleResultsEntry.values[13].value"/>
		<bind name="watch" value="'isKillerBot'; _entity.battleResultsEntry.values[14].value"/>
		<block>
			<style>
				<backgroundColor value="0x12ffffff"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="5px"/>
				<marginTop value="5px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: shipId, _name: playerName, _isEnemy: !(isPlayerAlly), _fontSizeClass: '$FontSizeHeader6',
													_isTeamKiller: isPlayerTk, _isSelf: isPlayerSelf, _isInMyDivision: isPlayerInMyDivision, _isBot: isBot}"/>
			</block>
			<block type="text">
				<bind name="visible" value="(death_reason_id !=  0)"/>
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="tr('IDS_BATTLE_STATS_DAMAGED_BY_' + death_reason_id)"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="instance" value="'PBSPlayerWithShip'; killerShipId	? {	_shipId: killerShipId, _name: killerName, _isEnemy: !(isKillerAlly), _fontSizeClass: '$FontSizeDefault',
																	_isTeamKiller: isKillerTk, _isSelf: isKillerSelf, _isInMyDivision: isKillerInMyDivision, _isBot: isKillerBot}
																: null"/>
			</block>
		</block>
	</block>
	<block className="PBSPlayerWithShip">
		<bind name="style" value="'width'; _noWidth ? 'auto' : '100%'"/>
		<bind name="style" value="'flow'; _noWidth ? 'horizontal' : 'htile'"/>
		<bind name="watch" value="'nameFontColorClass';	_isEnemy 													? '$FontColorCompareNegative' :
										_isTeamKiller												? '$FontColorTeamkiller' :
										_isInMyDivision &amp;&amp; !_isSelf									? '$FontColorGolden'
																									: '$FontColorWhite'"/>
		<bind name="watch" value="'shipFontColorClass';	_isEnemy 						? '$FontColorCompareNegative' :
										_isInMyDivision &amp;&amp; !_isSelf		? '$FontColorGolden'
																		: '$FontColorWhite'"/>
		<bind name="watch" value="'iconColorTransform';	_isEnemy 						? {redOffset:0,greenOffset:-153,blueOffset:-255} :
										_isInMyDivision &amp;&amp; !_isSelf		? {redOffset:0,greenOffset:-41,blueOffset:-153}
																		: {}"/>
		<bind name="watch" value="'playerName'; _isBot ? tr(_name) : _name"/>
		<block>
			<bind name="style" value="'width'; _noWidth ? 'auto' : '100%f'"/>
			<block type="text">
				<styleClass value="$TextHeaderWhite"/>
				<bind name="style" value="'width'; _noWidth ? 'auto' : '100%f'"/>
				<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
				<bind name="class" value="nameFontColorClass"/>
				<bind name="class" value="_fontSizeClass"/>
				<bind name="text" value="playerName + ' '"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="style" value="'marginTop';	_fontSizeClass == '$FontSizeDefault'	? '-3px' :
									_fontSizeClass == '$FontSizeLarge'		? '-2px' :
									_fontSizeClass == '$FontSizeHeader6'	? '-1px'
																			: '-1px'"/>
			<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_shipID: _shipId, _isSelf: _isSelf, _isEnemy: _isEnemy, _isTeamKiller: _isTeamKiller, _fontColorClass: shipFontColorClass, _fontSizeClass: _fontSizeClass, _iconColorTransform: iconColorTransform}"/>
		</block>
	</block>
	<block className="ShipInteractionsHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/pbs/grey.png"/>
				<background9Slice value="[2]"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="1px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderWhiteBold', _valueSizeClass: '$FontSizeHeader6'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="ShipInteractionsSubHeader"/>
	<block className="ShipInteractionsTooltipLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x12ffffff"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="5px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderWhiteBold', _valueSizeClass: '$FontSizeHeader6'}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="7px"/>
					<marginTop value="2px"/>
				</style>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<style>
						<maxWidth value="290"/>
						<leading value="-1"/>
					</style>
					<bind name="text" value="_entity.battleResultsEntry.hint"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsPlayer">
		<bind name="watch" value="'shipId'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'playerName'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isPlayerAlly'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isPlayerSelf'; _entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'isPlayerInMyDivision'; _entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'isPlayerTk'; _entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'isBot'; _entity.battleResultsEntry.values[6].value"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginBottom value="-2px"/>
				<marginTop value="10px"/>
			</style>
			<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: shipId, _name: playerName, _isEnemy: !(isPlayerAlly), _fontSizeClass: '$FontSizeLarge',
												_isTeamKiller: isPlayerTk, _isSelf: isPlayerSelf, _isInMyDivision: isPlayerInMyDivision, _isBot: isBot}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="2px"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="ShipInteractionsLine">
		<style>
			<height value="26px"/>
			<width value="100%"/>
			<backgroundImage value="url:../service_kit/panel_backgrounds/pbs/alphablack.png"/>
			<background9Slice value="[2]"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="0px"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderBold', _valueSizeClass: '$FontSizeLarge'}"/>
		</block>
	</block>
	<block className="ShipInteractionsSubLine">
		<style>
			<width value="100%"/>
			<marginTop value="1px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault'}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginTop value="-3px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipEmptyLine">
		<style>
			<width value="100%"/>
			<height value="8px"/>
		</style>
	</block>
	<block className="BattleResultsShipTitleWithIconAndLevel">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<height value="20px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="27px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype, _isEnemy: _isEnemy, _isKilled: _isKilled, _isWhite: true}"/>
		</block>
		<block>
			<bind name="watch" value="'isShowLevelIcon'; shipInfo.levelIcon.length &gt; 0"/>
			<style>
				<height value="100%"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'marginRight'; isShowLevelIcon ? '-8px' : '-2px'"/>
			<bind name="style" value="'marginTop'; isShowLevelIcon ? '1px' : '0px'"/>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: isShowLevelIcon ? shipInfo.levelIcon + (_isKilled ? '_sunk' : '') : '',
											_colorTransform : iconColorTransform,
											_levelRome : shipInfo.levelRome,
											_fontClass : '$TextHeaderBold',
											_fontColorClass :	_isKilled		? '$FontColorAlmostBlack'
																				: '$None',
											_fontSizeClass : _isKilled ? '$FontDropShadowWhite' : '$None',
										}"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="	_isKilled	? '$FontColorAlmostBlack'
									: '$FontColorWhite'"/>
			<bind name="class" value="_isKilled ? '$FontDropShadowWhite' : '$None'"/>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="ShipTitleWithIconAndLevelPBS">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<style>
			<flow value="horizontal"/>
			<align value="left|middle"/>
		</style>
		<block>
			<style>
				<marginTop value="2px"/>
				<marginLeft value="-4px"/>
				<marginRight value="1px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipType: shipInfo.subtype, _isEnemy: _isEnemy}"/>
		</block>
		<block>
			<style>
				<marginRight value="-5px"/>
			</style>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: shipInfo.levelIcon,
											_colorTransform : _iconColorTransform,
											_levelRome : shipInfo.levelRome,
											_fontClass : _isSelf ? '$TextHeaderWhiteBold' : '$TextHeaderWhite',
											_fontColorClass : _fontColorClass,
											_fontSizeClass : _fontSizeClass,
										}"/>
		</block>
		<block type="text">
			<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
			<styleClass value="$TextHeaderWhite"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="BattleResultsBuildingIconWithTitle">
		<style>
			<height value="20px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'buildingState'; _isAlive &amp;&amp; !_suppressionCount ? '_N' : '_D'"/>
		<block>
			<style>
				<width value="13px"/>
				<marginTop value="6px"/>
				<marginRight value="3px"/>
			</style>
			<block className="icon_ground_object" type="native">
				<bind name="gotoAndStop!" value="(_buildingType + buildingState)"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBold"/>
			<bind name="text" value="_name"/>
			<bind name="class" value="buildingState == '_D' ? '$FontColorAlmostBlack' : null"/>
			<bind name="class" value="buildingState == '_D' ? '$FontDropShadowWhite' : '$None'"/>
		</block>
	</block>

	<!-- results_screen_economics -->
	<block className="EconomicsSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'RealEconomicsSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealEconomicsSection">
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="firstEntityDH" value="'battleInfoEntity'; CC.battleInfo"/>
		<bind name="watch" value="'isReplayPlaying'; battleInfoEntity.battleInfo.isReplayPlaying"/>
		<bind name="watch" value="'isBuyPremButtonHided'; battleResultsDH.battleResultsStructured.isPremium || isReplayPlaying"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<height value="720:630,1080:738ah"/>
			<alpha value="0"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'BuyPremiumFromBattleResultElement'; isBuyPremButtonHided	? null
																					: {	_isHistoryPBS: _isHistoryPBS,
																						_battleWithPremium: battleResultsDH.battleResultsStructured.isPremium }"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<bind name="style" value="'alpha'; battleResultsDH.battleResultsStructured.isPremium ? 0.5 : 1"/>
				<style>
					<width value="1280:537,1920:709aw"/>
				</style>
				<bind name="instance" value="'BattleStatsEconomicsColumn'; {	list: battleResultsDH.battleResultsStructured.base_economics,
															_isPremium: false,
															_shipId: battleResultsDH.battleResultsStructured.shipId }"/>
			</block>
			<block>
				<bind name="style" value="'alpha'; battleResultsDH.battleResultsStructured.isPremium ? 1 : 0.5"/>
				<style>
					<marginLeft value="3px"/>
					<width value="1280:537,1920:709aw"/>
				</style>
				<bind name="instance" value="'BattleStatsEconomicsColumn'; {	list: battleResultsDH.battleResultsStructured.prem_economics,
															_isPremium: true,
															_shipId: battleResultsDH.battleResultsStructured.shipId }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsEconomicsColumn">
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="list; 'BattleStatsEconomicsRow'; { _isPremium: _isPremium, _shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'renderer'; 	entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER 			? 'BattleStatsEconomicsHeader' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBHEADER 			? 'BattleStatsEconomicsSubHeader' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.LINE 				? 'BattleStatsEconomicsLine' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE 			? 'BattleStatsEconomicsSubLine' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.LIST 				? 'BattleStatsEconomicsList' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL				? 'BattleStatsEconomicsTotal' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.EXP_WITH_PROGRESS	? 'BattleStatsEconomicsExpWithProgress' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOOLTIP_LINE		? 'BattleStatsEconomicsTooltipLine' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.EMPTY_LINE 		? 'BattleStatsEconomicsEmptyLine'
																											: 'EmptyItem'"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginTop';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp; $index == 0	?	'3px' :
								entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp; $index &gt; 0	?	'0px'
																												:	'0px'"/>
		<bind name="style" value="'marginBottom';	entity.battleResultsEntry.type == SC.Result_screen.TYPES.SUBLINE &amp;&amp; (($index + 1) == _childrenLength)	? '9px'
																																			: '0px'"/>
		<bind name="instance" value="renderer; { _entity: entity, _isPremium: _isPremium, _shipId: _shipId }"/>
	</block>
	<block className="BattleStatsEconomicsEmptyLine">
		<style>
			<width value="100%"/>
			<height value="3px"/>
		</style>
	</block>
	<block className="BattleStatsEconomicsHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="30px"/>
				<background9Slice value="[2]"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginTop value="-2px"/>
				</style>
				<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
																_class: '$TextLargeHeaderBold',
																_isPremium: _isPremium,
																_shipId: _shipId }"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow';	{	_childrenLength: _entity.battleResultsEntry.children.length,
																							_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsSubHeader">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'groupExpandedPref'; (userPrefs.PBSEconomicsExpand[_entity.battleResultsEntry.expandGroupName] == null) ? false : (userPrefs.PBSEconomicsExpand[_entity.battleResultsEntry.expandGroupName])"/>
		<bind name="action" value="'expandEconomicsGroup'; 'setUserPref'; { value: !(groupExpandedPref), name: 'PBSEconomicsExpand', subName: _entity.battleResultsEntry.expandGroupName }"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<bind name="tooltip" value="'DescriptionStatusLineTooltip'; _entity.battleResultsEntry.hint	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																								_statusText:  groupExpandedPref		? 'IDS_HINT_COLLAPSE_GROUP'
																																	: 'IDS_HINT_EXPAND_GROUP',
																								_descriptionText: _entity.battleResultsEntry.hint }
																						:	null"/>
			<bind name="instance" value="'BattleStatsExpandElement';	{	_entity: _entity,
														_expandGroupEvent: 'expandEconomicsGroup',
														_groupExpanded: groupExpandedPref,
														_stateOver: rollOver }"/>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.values[0].type  == 'warning_icon'"/>
			<style>
				<right value="260px"/>
				<position value="absolute"/>
				<marginTop value="2px"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_WARNING_ICON_HINT'}"/>
			<bind name="instance" value="'BattleStatsEconomicsRowWarningIcon';	_entity.battleResultsEntry.values[0].value == true	? {} : null"/>
		</block>
		<block>
			<bind name="fade" value="groupExpandedPref; 0.15; { scaleY: 0, ubScaleY: 0, alpha: 0 }; { scaleY: 1, ubScaleY: 1, alpha: 1 }; { scaleY: 0, ubScaleY: 0, alpha: 0 }; 2; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow';	{	_childrenLength: _entity.battleResultsEntry.children.length,
																							_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsTotal">
		<bind name="watch" value="'iconPath'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<style>
			<width value="100%"/>
			<height value="50px"/>
			<background9Slice value="[2]"/>
		</style>
		<bind name="style" value="'backgroundImage'; iconPath"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextLargeHeaderBold',
															_large: true,
															_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsExpandElement">
		<bind name="visible" value="_entity.battleResultsEntry.bgColor"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
			<background9Slice value="[2]"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/panel_backgrounds/pbs/' + _entity.battleResultsEntry.bgColor + '.png'"/>
		<block className="button_expand" type="native">
			<bind name="visible" value="!(_entity.battleResultsEntry.hideExpand)"/>
			<style>
				<width value="100%"/>
				<marginTop value="3px"/>
				<marginLeft value="9px"/>
				<position value="absolute"/>
			</style>
			<params>
				<param name="toggle" value="true"/>
				<param name="soundSet" value="dropdown"/>
				<param name="focusable" value="false"/>
			</params>
			<bind name="selected" value="_groupExpanded"/>
			<bind name="dispatch" value="'click'; _expandGroupEvent; {}"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="18px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextHeaderWhiteBold',
															_medium: true,
															_shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsTooltipLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginTop value="6px"/>
				<marginBottom value="-6px"/>
				<height value="26px"/>
				<width value="100%"/>
				<alpha value="0.95"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextHeaderBold',
															_shipId: _shipId }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; { _childrenLength: _entity.battleResultsEntry.children.length, _shipId: _shipId }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="20px"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
															_class: '$TextDefault' }"/>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<bottom value="1"/>
					<position value="absolute"/>
					<alpha value="0.5"/>
				</style>
				<block className="DottedLine">
					<style>
						<backgroundImage value="bitmap:dotted_line"/>
						<backgroundRepeatX value="true"/>
						<width value="100%"/>
						<height value="1px"/>
						<alpha value="0.5"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow' ; { _childrenLength: _entity.battleResultsEntry.children.length }"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsSubLine">
		<style>
			<width value="100%"/>
			<height value="20px"/>
			<backgroundColor value="0x01FFFFFF"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.hint ? { _text: _entity.battleResultsEntry.hint } : null"/>
		<bind name="instance" value="'BattleStatsEconomicsRowItem';	{	_entity: _entity,
														_class: '$TextDefault',
														_shipId: _shipId }"/>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<bottom value="1"/>
				<position value="absolute"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="bitmap:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsEconomicsList">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow' ;	{	_childrenLength: _entity.battleResultsEntry.children.length,
																						_shipId: _shipId }"/>
	</block>
	<block className="BattleStatsEconomicsExpWithProgress">
		<bind name="watch" value="'isCrewExpBlock'; _entity.battleResultsEntry.blockName == SC.Result_screen.BLOCKS.CREWEXP"/>
		<styleClass value="$InfoBlockIndent"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%f"/>
					<marginTop value="6px"/>
					<marginLeft value="3px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block>
					<style>
						<width value="100%f"/>
					</style>
					<block type="text">
						<style>
							<width value="100%f"/>
							<leading value="-4"/>
						</style>
						<styleClass value="$TextDefaultBold19NM"/>
						<bind name="text" value="_entity.battleResultsEntry.values[0].value"/>
					</block>
					<block>
						<bind name="visible" value="_entity.battleResultsEntry.values[7].value &gt; 0 &amp;&amp; (_entity.battleResultsEntry.values[7].type == 'skill_points')"/>
						<style>
							<marginLeft value="2px"/>
							<marginTop value="-8px"/>
							<backgroundColor value="0x01000000"/>
						</style>
						<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_HINT_FREE_SKILLPOINTS'}"/>
						<bind name="instance" value="'MarkerNewCounter'; _entity.battleResultsEntry.values[7].value != null	? { _newContentCounter: _entity.battleResultsEntry.values[7].value }
																											: null"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%f"/>
					</style>
					<bind name="visible" value="	isCrewExpBlock &amp;&amp;
								_entity.battleResultsEntry.values[5].value  &amp;&amp;
								(!_entity.battleResultsEntry.values[3].value || _entity.battleResultsEntry.values[6].value)"/>
					<block type="text">
						<style>
							<width value="100%f"/>
							<marginTop value="2px"/>
							<marginLeft value="-3px"/>
						</style>
						<styleClass value="$TextDefault"/>
						<default_text value="IDS_HIGHEST_RANK"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.values[3].value != 0"/>
			<style>
				<marginRight value="1px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleStatusTooltip'; {_text: 'IDS_BATTLE_STATS_CREW_EXP_HINT'}"/>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="child" value="isCrewExpBlock ? _entity.battleResultsEntry.values[6].value == true ? 1 : 0
										: 0;
							{_entity: _entity}; 'ProgressBarYellow'; 'ProgressBarOrange'"/>
			</block>
			<block>
				<bind name="watch" value="'crewUnderAdaptation'; isCrewExpBlock &amp;&amp; _entity.battleResultsEntry.values[6].value == true"/>
				<style>
					<hitTest value="false"/>
					<marginTop value="-2px"/>
					<marginRight value="-3px"/>
					<right value="-2px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<marginTop value="-2px"/>
						<fontSize value="17"/>
					</style>
					<bind name="style" value="'textColor'; crewUnderAdaptation ? SC.Ui_styles.SERVICE_COLORS.ORANGE : SC.Ui_styles.SERVICE_COLORS.WHITE"/>
					<bind name="text" value="format(_entity.battleResultsEntry.values[2].value, 0)"/>
				</block>
				<block>
					<style>
						<alpha value="0.5"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<style>
							<marginLeft value="-4px"/>
						</style>
						<bind name="style" value="'textColor'; crewUnderAdaptation ? SC.Ui_styles.SERVICE_COLORS.ORANGE : SC.Ui_styles.SERVICE_COLORS.WHITE"/>
						<bind name="text" value="' / '	+ format(_entity.battleResultsEntry.values[3].value, 0)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowItem">
		<bind name="watch" value="'fontColorClass';	_entity.battleResultsEntry.color == SC.Result_screen.COLORS.PINK 	? '$FontColorTeamkiller' :
									_entity.battleResultsEntry.color == SC.Result_screen.COLORS.RED		? '$FontColorCompareNegative'
																										: '$None'"/>
		<bind name="tooltip" value="	(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.ECOBOOSTS)	? 'EcoboostPostBattleTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.SSE)			? 'PostBattleSSEQuestTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.REAMMUNITION)	? 'PostBattleReammunitionTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.RECAMO)		? 'PostBattleRecamoTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.REBOOST)		? 'PostBattleReboostTooltip' :
					(_entity.battleResultsEntry.tooltipType	== SC.Result_screen.TOOLTIP_TYPES.RESIGNAL)		? 'PostBattleResignalTooltip'
																											: 'EmptyItem';
					{	_entity: _entity,
						_id: _entity.dataComponent.data.id,
						progressCurrent: 1,
						progressMax: 1,
						titleText: _entity.dataComponent.data.name,
						_arenaId: _entity.dataComponent.data.arenaId,
						_shipId: _shipId
					}"/>
		<styleClass value="$InfoBlockHorizontalIndent"/>
		<style>
			<height value="100%"/>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="style" value="'marginTop';	_medium	?	'-3px'	:
										_large	?	'1px'	: '0px'"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; 	_entity.battleResultsEntry.hint	&amp;&amp; 
												(_entity.battleResultsEntry.type == SC.Result_screen.TYPES.HEADER || _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL) ? 
												{_text: _entity.battleResultsEntry.hint}: null"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<bind name="class" value="	(_entity.battleResultsEntry.color == 'black')	? '$FontColorAlmostBlack'
																				: _class"/>
					<bind name="class" value="	(_entity.battleResultsEntry.color == 'black')	? '$FontDropShadowWhite'
																				: '$None'"/>
					<bind name="class" value="fontColorClass"/>
					<bind name="text" value="_entity.battleResultsEntry.title"/>
				</block>
			</block>
			<block>
				<bind name="style" value="'marginTop';	_medium	? '-1px' : 
										_large	? '-3px' : '0px'"/>
				<styleClass value="$AlignRight"/>
				<bind name="repeat" value="_entity.battleResultsEntry.values; 'BattleStatsEconomicsRowValue';	{	_entity: _entity,
																									_fontStyleClass: _class,
																									_large: _large,
																									_medium: _medium,
																									_shipId: _shipId }; true"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<right value="3"/>
				<position value="absolute"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<bind name="tooltip" value="'SimpleStatusTooltip';  {_text: _isPremium ? 'IDS_WITH_PREM_HINT' : 'IDS_WITHOUT_PREM_DESC'}"/>
			<block type="text">
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="class" value="_isPremium ? '$FontColorGolden': '$None'"/>
				<bind name="text" value="_entity.battleResultsEntry.subtitle"/>
			</block>
		</block>
	</block>
	<block className="ProgressBarYellow">
		<block className="indicator_progress_bar_yellow" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="ProgressBarOrange">
		<block className="indicator_progress_bar_orange" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowSubtitle">
		<style>
			<right value="0px"/>
		</style>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="class" value="'$FontColorGolden'"/>
			<bind name="text" value="toUpperCase(tr(_subtitle))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowValue">
		<bind name="watch" value="'renderer'; 	type == SC.Result_screen.FORMAT.CREDITS 					? 'BattleStatsEconomicsRowCredits' :
								type == SC.Result_screen.FORMAT.GOLD 						? 'BattleStatsEconomicsRowGold' :
								type == SC.Result_screen.FORMAT.CREDITS_APPLIED 			? 'BattleStatsEconomicsRowCreditsApplied' :
								type == SC.Result_screen.FORMAT.CREDITS_APPLIED_SHOW_ZERO 	? 'BattleStatsEconomicsRowCreditsAppliedShowZero' :
								type == SC.Result_screen.FORMAT.GOLD_APPLIED 				? 'BattleStatsEconomicsRowGoldApplied' :
								type == SC.Result_screen.FORMAT.GOLD_RIGHT 					? 'BattleStatsEconomicsRowGoldRight' :
								type == SC.Result_screen.FORMAT.CREDITS_ZERO_HIDE 			? 'BattleStatsEconomicsRowCreditsHideZero' :
								type == SC.Result_screen.FORMAT.EXP 						? 'BattleStatsEconomicsRowExp' :
								type == SC.Result_screen.FORMAT.FREE_XP 					? 'BattleStatsEconomicsRowFreeXP' :
								type == SC.Result_screen.FORMAT.FREE_XP_RIGHT 				? 'BattleStatsEconomicsRowFreeXPRight' :
								type == SC.Result_screen.FORMAT.CREW_XP 					? 'BattleStatsEconomicsRowCrewXP' :
								type == SC.Result_screen.FORMAT.PERCENTS 					? 'BattleStatsEconomicsRowPercents' :
								type == SC.Result_screen.FORMAT.SKILL_POINTS 				? 'EmptyItem' :
								type == SC.Result_screen.FORMAT.SUBTITLE 					? 'BattleStatsEconomicsRowSubtitle' :
								type == SC.Result_screen.FORMAT.AOGAS 						? 'BattleStatsEconomicsRowAOGAS' :
								type == SC.Result_screen.FORMAT.TOOLTIP_PERCENTS 			? 'BattleStatsEconomicsRowTooltipPercents' :
								type == SC.Result_screen.FORMAT.ELITE_XP 					? 'BattleStatsEconomicsRowEliteXP' :
								type == SC.Result_screen.FORMAT.WARNING_ICON 				? 'EmptyItem' :
								type == SC.Result_screen.FORMAT.NO_VALUE 					? 'EmptyItem'
																							: 'BattleStatsDetailedEconomicsRowDefaultValue'"/>
		<bind name="instance" value="renderer; {	_value: value, _type: type, _fontStyleClass: _fontStyleClass, _large: _large, _medium: _medium, _entity: _entity, _shipId: _shipId }"/>
	</block>
	<block className="BattleStatsDetailedEconomicsRowDefaultValue">
		<block type="text">
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="_value"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowCredits">
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? {_text: 'IDS_BATTLE_STATS_TOTAL_CREDITS_COUNT_HINT'}: null"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsApplied">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
			<flow value="horizontal"/>
		</style>
		<bind name="visible" value="_value.value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsAppliedShowZero">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGold">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? {_text: 'IDS_BATTLE_STATS_TOTAL_GOLD_COUNT_HINT'} : null"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.GOLD},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGoldApplied">
		<bind name="visible" value="_value.value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
			<flow value="horizontal"/>
			<hitTest value="false"/>
		</style>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: SC.Common.CURRENCIES.GOLD},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGoldRight">
		<style>
			<position value="absolute"/>
			<right value="0"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != 0	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.GOLD},
													_large: _large, _medium: _medium }
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsHideZero">
		<bind name="visible" value="_value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != 0	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.CREDITS},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowExp">
		<params>
			<param name="name" value="PureExp"/>
		</params>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? {_text: 'IDS_BATTLE_STATS_TOTAL_EXP_COUNT_HINT'}: null"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.XP},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowFreeXP">
		<bind name="tooltip" value="'PostBattleFreeExpTooltip'; { _entity: _entity, _shipId: _shipId }"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="visible" value="_value != 0"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.FREE_XP},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowFreeXPRight">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
		</style>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: SC.Common.CURRENCIES.FREE_XP},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCrewXP">
		<bind name="visible" value="_value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? { _text: 'IDS_BATTLE_STATS_TOTAL_CREW_EXP_COUNT_HINT' } : null"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'crewXP'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowAOGAS">
		<bind name="visible" value="_value"/>
		<style>
			<position value="absolute"/>
			<right value="270"/>
		</style>
		<bind name="tooltip" value="'AOGASPostBattleTooltip'; _value ? {_value: _value} : null"/>
		<block className="icon_warning_orange_big" type="native">
			<style>
				<marginTop value="5px"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowWarningIcon">
		<style>
			<alpha value="0.9"/>
		</style>
		<block className="icon_warning_orange_big" type="native"/>
	</block>
	<block className="BattleStatsEconomicsRowPercents">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="210"/>
			<hitTest value="false"/>
		</style>
		<block type="text">
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="((_value &gt; 0) 	? ('+' + (_value) + '%')
									: ((_value) + '%'))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowTooltipPercents">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="74"/>
		</style>
		<block type="text">
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="((_value &gt; 0) 	? ('+' + (_value) + '%')
									: ((_value) + '%'))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowEliteXP">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="tooltip" value="'PostBattleEliteExpTooltip'; _entity.battleResultsEntry.type == SC.Result_screen.TYPES.TOTAL ? { _entity: _entity } : null"/>
		<bind name="instance" value="'PriceTag';_value != null	?	{	priceInfo:	{	finalPrice: _value,
																		currency: 'eliteXP' },
														_large: true }
												:	null"/>
	</block>
	<block className="IconWarningSmall">
		<block className="icon_warning_orange" type="native">
			<style>
				<marginTop value="5px"/>
			</style>
		</block>
	</block>
	<block className="BuyPremiumFromBattleResultElement">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isSyncedWithWallet'; ['resourceEntity.accountResource.evChangedIsSyncedWithWallet']; resourceEntity.accountResource.isSyncedWithWallet"/>
		<bind name="watchDH" value="'walletAvailable'; ['resourceEntity.accountResource.evChangedWalletStatus']; resourceEntity.accountResource.walletStatus"/>
		<bind name="watch" value="'showWGWalletWarning'; ((isSyncedWithWallet == false) || (walletAvailable == false))"/>
		<bind name="watchDH" value="'activePremiumType'; ['resourceEntity.accountResource.evActivePremiumTypeChanged']; resourceEntity.accountResource.activePremiumType"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; ['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isResultScreenTop'; (windowQueue[windowQueue.length - 1] == SC.Ui_windows.MODAL.RESULT_SCREEN) || (windowQueue[windowQueue.length - 1] == SC.Ui_windows.MODAL.RESULT_SCREEN_PORT)"/>
		<bind name="handleEventDH" value="'resourceEntity.accountResource.evActivePremiumTypeChanged'; 'evWowsPremBoughtYet'"/>
		<bind name="catch" value="'evWowsPremBoughtYet'; { wowsPremBoughtYet: true }"/>
		<bind name="watch" value="'isShowPremiumPurchaseAnimation'; isResultScreenTop &amp;&amp; wowsPremBoughtYet &amp;&amp; !isSwitchFinished"/>
		<bind name="changeDispatch" value="isShowPremiumPurchaseAnimation; 'evSwitchStart'; {}; 2; true"/>
		<bind name="dispatch" value="'evSwitchStart'; 'evSwitchFinished'; {}; 0; 1.15"/>
		<bind name="catch" value="'evSwitchFinished'; { isSwitchFinished: true }"/>
		<bind name="var" value="{wowsPremBoughtYet: 	false,
				isSwitchFinished: 	false }"/>
		<bind name="watch" value="'isShowStatusLine'; isSwitchFinished || ((activePremiumType == SC.Common.PREMIUM_TYPE.WOWS) &amp;&amp; !wowsPremBoughtYet)"/>
		<style>
			<width value="100%"/>
			<height value="24px"/>
		</style>
		<block>
			<bind name="transition" value="isShowPremiumPurchaseAnimation; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}; {alpha: 0, top: 10}; SC.Common.UB1_EASING_FUNCTIONS.LINEAR; 1"/>
			<style>
				<position value="absolute"/>
				<right value="-2px"/>
			</style>
			<block>
				<bind name="style" value="'hitTest'; isShowStatusLine || showWGWalletWarning ? false : true"/>
				<bind name="style" value="'alpha'; 	isShowStatusLine 	? 0 :
								showWGWalletWarning ? 0.5
													: 1"/>
				<bind name="instance" value="'ButtonBuyPremiumPBS'; { _isHistoryPBS: _isHistoryPBS }"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'WGWalletServiceStatus'; showWGWalletWarning &amp;&amp; !isShowStatusLine ? {} : null"/>
			</block>
		</block>
		<block>
			<bind name="watch" value="'topMarginStatusLine'; isShowPremiumPurchaseAnimation ? -10 : 0"/>
			<bind name="transition" value="isShowPremiumPurchaseAnimation; 0.15; {alpha: 0, top: topMarginStatusLine}; {alpha: 1, top: 0}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.LINEAR; 1"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'alpha'; isShowStatusLine ? 1 : 0"/>
			<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
										_text: 'IDS_BOUGHT_WOWS_PREMIUM_ACCOUNT',
										_textClass: '$TextDefault17NM',
										_leading: -3 }"/>
		</block>
	</block>
	<block className="ButtonBuyPremiumPBS">
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="watchDH" value="'currentRegion'; []; realmConstantsEntity.realmConstants.currentRegion"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold'; ['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="primaryEntityDH" value="'premiumItemEntity'; CC.premiumItem; 'PREM_001_WOWS'"/>
		<bind name="watchDH" value="'smallestGoldPrice'; ['premiumItemEntity.premiumItem.evChangedGold']; premiumItemEntity.premiumItem.gold"/>
		<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
		<bind name="watchDH" value="'isEGSClient';	['loginEntity.loginData.evUpdate']; loginEntity.loginData.isEGS"/>
		<bind name="watch" value="'showModalWindowBuyPrem'; accountGold &gt;= smallestGoldPrice"/>
		<bind name="visible" value=" currentRegion != 'CN' || (currentRegion == 'CN' &amp;&amp; showModalWindowBuyPrem)"/>
		<bind name="watch" value="'requestBuyPremiumPBS';	_isHistoryPBS			?	showModalWindowBuyPrem	?	'buttonShowPremiumPeriods'
																								:	'openMetashop' :
											showModalWindowBuyPrem 	?	'buyPremiumBattleResult'
																	:	''"/>
		<bind name="watch" value="'requestParamsBuyPremiumPBS';	showModalWindowBuyPrem 	?	{ isFromPBS: true } :
												isEGSClient				?	{	url: SC.Ui_windows.GUI_URL.BUY_GOLD_AND_PREMIUM_EGS_IN_GAME	}
																		:	{	url: SC.Ui_windows.GUI_URL.BUY_GOLD_AND_PREMIUM_IN_GAME	}"/>
		<bind name="soundSet" value="'button_gold'"/>
		<bind name="request" value="'click'; requestBuyPremiumPBS; requestParamsBuyPremiumPBS"/>
		<bind name="action" value="'click'; requestBuyPremiumPBS ? null : 'navigateTo'; {route: _isHistoryPBS ? SC.Ui_windows.ROUTE.PORTAL : SC.Ui_windows.ROUTE.ROOT_PORTAL_SHOW, data: {url: SC.Ui_windows.GUI_URL.BUY_GOLD_AND_PREMIUM_IN_GAME}}"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	true &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							true &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<bind name="tooltip" value="'BuyPremResultScreenButtonTooltip'; {}"/>
		<style>
			<height value="24px"/>
		</style>
		<block className="button_buy_wows_premium" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="class" value="'$FontColorGolden'"/>
			<style>
				<marginLeft value="16px"/>
				<marginTop value="6px"/>
				<marginRight value="16px"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_BUY_PREMIUM_ACCOUNT'))"/>
		</block>
	</block>

	<!-- results_screen_economics_tooltips -->
	<block className="PostBattleReammunitionTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<style>
						<top value="2px"/>
					</style>
					<styleClass value="$AlignRight"/>
					<bind name="instance" value="'PriceTag';	{ priceInfo: {	finalPrice: tempValueCredits.value,
															currency: 'credits' },
											  _medium: true }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleFreeExpTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="430px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<default_text value="IDS_CURRENCY_FREE_XP"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<leading value="-3"/>
				<width value="100%"/>
				<marginTop value="5px"/>
				<marginBottom value="4px"/>
			</style>
			<default_text value="IDS_FREE_XP_DESC"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; { _childrenLength: _entity.battleResultsEntry.children.length, _shipId: _shipId }"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="tr('IDS_EARNED') + tr('IDS_COLON')"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<bind name="instance" value="'PriceTag';	{	priceInfo:	{	finalPrice: _entity.battleResultsEntry.values[1].value,
																currency: _entity.battleResultsEntry.values[1].type },
												_medium: true }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleEliteExpTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="430px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<default_text value="IDS_ELITE_EXPERIENCE_C"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block type="text">
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<leading value="-3"/>
				<width value="100%"/>
				<marginTop value="5px"/>
				<marginBottom value="10px"/>
			</style>
			<default_text value="IDS_ELITE_XP_DESC"/>
		</block>
	</block>
	<block className="EcoboostPostBattleTooltip">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watchDH" value="'attributes'; ['exteriorEntity.attributes.evChanged']; exteriorEntity.attributes"/>
		<bind name="primaryEntityDH" value="'ecoBoostEntity'; CC.ecoBoost; _id"/>
		<bind name="primaryEntityDH" value="'globalBoostModsEntity'; CC.globalboostPersistent; _arenaId"/>
		<bind name="watch" value="'attributesEntity'; _arenaId ? globalBoostModsEntity : ecoBoostEntity"/>
		<bind name="watchDH" value="'name'; []; ecoBoostEntity.ecoBoost.name"/>
		<bind name="watchDH" value="'type'; ['ecoBoostEntity.ecoBoost.evUpdated']; ecoBoostEntity.ecoBoost.type"/>
		<bind name="watchDH" value="'rarity'; []; ecoBoostEntity.ecoBoost.rarity"/>
		<bind name="watchDH" value="'attributesNegative';	['attributesEntity.attributes.evChanged'];		attributesEntity.attributes.negative"/>
		<bind name="watchDH" value="'attributesNeutral';		['attributesEntity.attributes.evChanged'];		attributesEntity.attributes.neutral"/>
		<bind name="watchDH" value="'attributesPositive';	['attributesEntity.attributes.evChanged'];		attributesEntity.attributes.positive"/>
		<bind name="watch" value="'headerText';	type == SC.Common.ECOBOOST_TYPES.COMMON		? 'IDS_' + toUpperCase(name) :
								type == SC.Common.ECOBOOST_TYPES.LINKABLE	? subst(_entity.battleResultsEntry.title, [], { shipName: toUpperCase(tr(shipInfo.nameIDS)) }) :
								type == SC.Common.ECOBOOST_TYPES.GLOBAL		? 'IDS_GLOBALBOOST_TITLE'
																			: 'IDS_CLANBOOST_TITLE'"/>
		<bind name="watch" value="'subheaderText'; type == SC.Common.ECOBOOST_TYPES.COMMON	? tr('IDS_ECONOMIC_BOOST_TYPE_EXPENDABLE_' + rarity)
																			: 'IDS_ECONOMIC_BOOST_TYPE_MULTIBOOST'"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText';	{	_imageWidth: 80,
																	_imageHeight: 80,
																	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																	_headerText: headerText,
																	_subheaderText: subheaderText,
																	_headerIconType: 5,
																	_iconAmount: 0,
																	_data: { paramsId: name, type: type } }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemParamsModifiersList';	{	_attributesPositive: attributesPositive,
																_attributesNeutral: attributesNeutral,
																_attributesNegative: attributesNegative }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemPriceTagLine';	{	_title:		tr('IDS_EARNED') + tr('IDS_COLON'),
															_priceInfo:	{	finalPrice: _entity.battleResultsEntry.values[0].value,
																			currency: _entity.battleResultsEntry.values[0].type },
															_isPriceTagOnRight: true }"/>
			</block>
		</block>
	</block>
	<block className="PostBattleRecamoTooltip">
		<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'tempValueGold'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watchDH" value="'camoColorSchemes'; ['exteriorEntity.ownCamouflage.evUpdated']; exteriorEntity.ownCamouflage.camoColorSchemes"/>
		<bind name="watch" value="'useRepaintedIcon'; camoColorSchemes.length &gt; 0"/>
		<bind name="watch" value="'headerText'; tr('IDS_' + toUpperCase(exteriorConfig.name))"/>
		<bind name="watch" value="'subheaderText'; 'IDS_EXTERIOR_TYPE_' + SC.Exteriors.EXTERIOR_TYPE.VALUE_TO_NAME[exteriorConfig.type]"/>
		<bind name="watch" value="'headerIconType'; useRepaintedIcon	? 2
													: 0"/>
		<bind name="watch" value="'imageUrl'; 'url:../exteriors/camouflages/' + exteriorConfig.name + '.png'"/>
		<bind name="watch" value="'failedToApply'; (tempValueCredits.value &amp;&amp; !tempValueCredits.applied) || (tempValueGold.value &amp;&amp; !tempValueGold.applied)"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText:	_entity.battleResultsEntry.title,
																_unifiedStatus:	SC.Ui_styles.UNIFIED_STATUS.DEFAULT }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl:			imageUrl,
																_imageWidth:		60,
																_imageHeight:		60,
																_unifiedStatus:		SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																_headerText:		headerText,
																_subheaderText:		subheaderText,
																_headerIconType:	headerIconType,
																_data:				{camouflageId: _id} }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="failedToApply"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; failedToApply	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																		_text: 'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT' }
																	: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemPriceTagLine'; {	_title:		'IDS_PRICE_Q',
														_priceInfo:	tempValueCredits.value != 0		? {	finalPrice:	tempValueCredits.value,
																										currency:	SC.Common.CURRENCIES.CREDITS }
																									: {	finalPrice:	tempValueGold.value,
																										currency:	SC.Common.CURRENCIES.GOLD },
														_isPriceTagOnRight: true }"/>
			</block>
		</block>
	</block>
	<block className="AOGASPostBattleTooltip">
		<style>
			<width value="330px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<styleClass value="$MouseDisable"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<style>
					<maxWidth value="260"/>
				</style>
				<default_text value="IDS_AOGAS_FACTOR"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<maxWidth value="260"/>
				</style>
				<bind name="text" value="subst('IDS_PL_TIME_SPENT_IN_GAME_MORE_THAN', [], {hours: _value.online}) "/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<marginTop value="1px"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'InstructionWarning'; { _instructionText: 'IDS_AOGAS_FACTOR_HINT', _maxWidth: '190'}"/>
				</block>
				<block type="text">
					<style>
						<position value="absolute"/>
						<right value="0"/>
					</style>
					<styleClass value="$WarningTextOrange"/>
					<bind name="text" value="-(1-_value.factor) * 100 + '%'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="PostBattleReboostTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="watch" value="'itemsList'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'tempValueGold'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<flow value="htile"/>
					<align value="center"/>
					<marginTop value="3px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="itemsList; 'PBSEcoboostIcon'; {}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="	(tempValueCredits.value &amp;&amp; !tempValueCredits.applied) ||
						(tempValueGold.value &amp;&amp; !tempValueGold.applied)"/>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="instance" value="'StatusLine'; {	_text: 'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT',
											_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
											_width: '100%' }"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<block>
						<bind name="visible" value="(tempValueGold.value != 0)"/>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueGold.value,
																 currency: 'gold'}, _medium: true }"/>
					</block>
					<block>
						<bind name="visible" value="(tempValueCredits.value != 0)"/>
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
																 currency: 'credits'}, _medium: true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleResignalTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="watch" value="'itemsList'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<marginTop value="1px"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<flow value="htile"/>
					<align value="center"/>
					<marginTop value="3px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="itemsList; 'PBSSignalIcon'; {}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="(tempValueCredits.value &amp;&amp; !tempValueCredits.applied)"/>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="instance" value="'StatusLine'; {	_text: 'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT',
											_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
											_width: '100%' }"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(tempValueCredits.value != 0)"/>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<block>
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
																 currency: 'credits'}, _medium: true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PBSEcoboostIcon">
		<style>
			<height value="80px"/>
			<width value="80px"/>
			<margin value="5px"/>
		</style>
		<bind name="primaryEntityDH" value="'ecoBoostEntity'; CC.ecoBoost; id"/>
		<bind name="watch" value="'name'; ecoBoostEntity.ecoBoost.name"/>
		<bind name="watch" value="'type'; ecoBoostEntity.ecoBoost.type"/>
		<bind name="instance" value="'EconomicBoostItemView';	{ _name: name, _type: type}"/>
	</block>
	<block className="PBSSignalIcon">
		<style>
			<width value="100%"/>
			<height value="60px"/>
			<width value="60px"/>
			<margin value="5px"/>
		</style>
		<bind name="primaryEntityDH" value="'signalEntity'; CC.signal; $value"/>
		<bind name="watch" value="'signalName'; signalEntity.signal.name"/>
		<bind name="watch" value="'headerIconPath'; 'url:../signal_flags/' + signalName + '.png'"/>
		<bind name="style" value="'backgroundImage'; headerIconPath"/>
	</block>
	<block className="BuyPremResultScreenButtonTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
														_text: 'IDS_PURCHASE_PREMIUM_WARNING_NEXT_BATTLE' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text: 'IDS_MOVE_TO_THE_PURCHASE_PREMIUM' }"/>
			</block>
		</block>
	</block>

	<!-- results_screen_personal_result -->
	<block className="PersonalResultSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="instance" value="'RealPersonalResultSection'; _data"/>
	</block>
	<block className="RealPersonalResultSection">
		<bind name="firstEntityDH" value="'player'; CC.accountSelf"/>
		<bind name="collectionDH" value="CC.sseCorePersistent; 'sseTasks'; 'byArenaId.' + game_data.arena_id"/>
		<bind name="firstEntityDH" value="'battleInfoEntity'; CC.battleInfo"/>
		<bind name="watch" value="'isReplayPlaying'; battleInfoEntity.battleInfo.isReplayPlaying"/>
		<bind name="watch" value="'bonusTagsTasksList';				personal.bonus_tags ? personal.bonus_tags : null"/>
		<bind name="watch" value="'campaignTasksDoneList';			personal.campaignTasksResults.done ? personal.campaignTasksResults.done : null"/>
		<bind name="watch" value="'campaignTasksInProgressList';		personal.campaignTasksResults.inProgress ? personal.campaignTasksResults.inProgress : null"/>
		<bind name="watch" value="'strategicActionsTaskEntityId';	personal.strategicActions ? personal.strategicActions : null"/>
		<bind name="watch" value="'rvrTasksDoneList';				personal.arc_details.done ? personal.arc_details.done : null"/>
		<bind name="watch" value="'rvrTasksInProgressList';			personal.arc_details.inProgress ? personal.arc_details.inProgress : null"/>
		<bind name="watch" value="'shipAcesTasksList';				personal.shipAces ? personal.shipAces : null"/>
		<bind name="watch" value="'sseTasksDoneList';				personal.tasksCollectionName.done ? personal.tasksCollectionName.done : null"/>
		<bind name="watch" value="'sseTasksInProgressList';			personal.tasksCollectionName.inProgress ? personal.tasksCollectionName.inProgress : null"/>
		<bind name="entityDH" value="'strategicActionsTaskEntity'; strategicActionsTaskEntityId"/>
		<bind name="watch" value="'numRibbons';						personal.ribbons.length"/>
		<bind name="watch" value="'numBonusTags';					Number(personal.bonus_tags.length)"/>
		<bind name="watch" value="'numCampaignTasksDone';			Number(campaignTasksDoneList.length)"/>
		<bind name="watch" value="'numCampaignTasksInProgress';		Number(campaignTasksInProgressList.length)"/>
		<bind name="watch" value="'numCampaignTasks';				numCampaignTasksDone + numCampaignTasksInProgress"/>
		<bind name="watch" value="'numStrategicActionsTasksCount';	strategicActionsTaskEntity ? 1 : 0"/>
		<bind name="watch" value="'numRvrTasksDone';					Number(rvrTasksDoneList.length)"/>
		<bind name="watch" value="'numRvrTasksInProgress';			Number(rvrTasksInProgressList.length)"/>
		<bind name="watch" value="'numRvrTasks';						numRvrTasksDone + numRvrTasksInProgress"/>
		<bind name="watch" value="'numShipAcesTasks';				Number(shipAcesTasksList.length)"/>
		<bind name="watch" value="'numSseTasksDone';					Number(sseTasksDoneList.length)"/>
		<bind name="watch" value="'numSseTasksInProgress';			Number(sseTasksInProgressList.length)"/>
		<bind name="watch" value="'numSseTasks';						numSseTasksDone + numSseTasksInProgress"/>
		<bind name="watch" value="'abuseStatus';						personal.player['abuseStatus']"/>
		<bind name="watch" value="'delay'; 1.6"/>
		<bind name="watch" value="'achievementDelay'; 2.3"/>
		<bind name="watch" value="'ribbonsDelay';			achievementDelay + (personal.achievements.length * 0.15) + 0.2"/>
		<bind name="watch" value="'bonusTagDelay';			ribbonsDelay + numRibbons * 0.2"/>
		<bind name="watch" value="'campTaskDoneDelay';		bonusTagDelay + numBonusTags * 0.2"/>
		<bind name="watch" value="'strategicActionsDelay';	campTaskDoneDelay + numBonusTags * 0.2"/>
		<bind name="watch" value="'rvrTasksDoneDelay';		strategicActionsDelay + numStrategicActionsTasksCount * 0.2"/>
		<bind name="watch" value="'shipAcesTasksDoneDelay';	rvrTasksDoneDelay + numRvrTasksDone * 0.2"/>
		<bind name="watch" value="'sseTasksDoneDelay';		shipAcesTasksDoneDelay + numShipAcesTasks * 0.2"/>
		<bind name="watch" value="'campTaskInProgressDelay';	sseTasksDoneDelay + numSseTasksDone * 0.2"/>
		<bind name="watch" value="'rvrTasksInProgressDelay';	campTaskInProgressDelay + numCampaignTasksInProgress * 0.2"/>
		<bind name="watch" value="'sseTasksInProgressDelay';	rvrTasksInProgressDelay + numRvrTasksInProgress * 0.2"/>
		<bind name="watch" value="'isBattleChallenge'; game_data.game_mode == GameMode.BATTLE_CHALLENGES"/>
		<bind name="watch" value="'wonPosition'; personal.wonPosition"/>
		<bind name="watch" value="'isFirstBattle'; game_data.scenario == SC.Common.FIRST_BATTLE_INFO.FIRST_BATTLE"/>
		<bind name="watch" value="'trialsDict'; game_data.battle_logic_info.trials"/>
		<bind name="watch" value="'resultTextColor';		game_data.battle_result == SC.Battle.BATTLE_RESULT.WON_POSITION &amp;&amp; wonPosition == 1 ? '$FontColorWinBattle' :
										isIn(game_data.battle_result, SC.Battle.BATTLE_RESULT.SUCCESS_RESULTS)				? '$FontColorWinBattle' :
										isIn(game_data.battle_result, SC.Battle.BATTLE_RESULT.FAIL_RESULTS)					? '$FontColorLoseBattle'
																															: '$FontColorGrey'"/>
		<bind name="watch" value="'battleTypeTitle'; game_data.battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE	? tr(toUpperCase('IDS_' + game_data.scenario)) :
									trialsDict													? tr(toUpperCase('IDS_' + game_data.scenario) + '_NAME') :
									isFirstBattle												? tr('IDS_FIRST_BATTLE_NAME')
																								: tr(toUpperCase('IDS_' + game_data.battleType))"/>
		<bind name="watch" value="'scenarioOrMapName'; game_data.game_mode == SC.Battle.GAME_MODE.PVE	? tr(toUpperCase('IDS_' + game_data.scenario) + '_NAME')
																						: tr(game_data.map_name)"/>
		<bind name="watch" value="'teamLadderPlace'; personal.teamLadderPlace"/>
		<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
		<bind name="var" value="{animationOn: true}"/>
		<bind name="dispatch" value="'addedToStage'; animationOn ? 'allAnimationsStarted' : ''; null; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.1"/>
		<bind name="catch" value="'allAnimationsStarted'; {animationOn: false}"/>
		<bind name="watch" value="'isEarnedBlockVisible'; !isFirstBattle || personal.achievements.length &gt; 0"/>
		<bind name="firstEntityDH" value="'battleResultsDH'; CC.battleResultsStructured"/>
		<bind name="entityDH" value="'causedDamageEntity'; battleResultsDH.battleResultsStructured.causedDamage[0]"/>
		<bind name="watch" value="'isPositiveBattleEfficiency'; numRibbons &gt; 0 || causedDamageEntity.battleResultsEntry.values[0].value &gt; 0"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.2; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<maxWidth value="1280"/>
				<width value="80sw"/>
				<height value="70sh"/>
				<top value="43%"/>
				<marginTop value="-50%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<bind name="name" value="'BattleResultText'"/>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<bind name="class" value="resultTextColor"/>
						<styleClass value="$TextDefaultBold75NM"/>
						<style>
							<marginBottom value="16px"/>
						</style>
						<bind name="text" value="resultText"/>
					</block>
					<block type="text">
						<bind name="name" value="'BattleResultSubText'"/>
						<bind name="visible" value="!isBattleChallenge"/>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.1 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefaultBold25NM"/>
						<styleClass value="$FontColorGrey"/>
						<style>
							<marginBottom value="8px"/>
						</style>
						<bind name="text" value="trialsDict	? subst('IDS_BATTLE_STATS_TRIAL_ROUNDS_PASSED', {'successRoundsCount': trialsDict.successRoundsCount, 'totalRoundsCount': trialsDict.totalRoundsCount})
											: subst(commentText, {'place': teamLadderPlace})"/>
					</block>
					<block>
						<bind name="visible" value="!isBattleChallenge"/>
						<style>
							<marginLeft value="-2px"/>
						</style>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.2 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<block>
							<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: personal.player.shipId, _name: personal.player.name, _isEnemy: false, _fontSizeClass: '$FontSizeLarge',
																_isTeamKiller: abuseStatus ? abuseStatus != SC.Common.ABUSE_STATUS.NORMAL : false, _isSelf: true, _isInMyDivision: false, _noWidth: true}"/>
						</block>
						<block>
							<bind name="instance" value="'PersonalResultKiller'; personal.killed ? { _killer: personal.killer, death_reason_id: personal.death_reason_id,
																					_relation: personal.killer.relation, _killerIsBuilding: personal.killerIsBuilding,
																					_killerBuildingName: personal.killerBuilding.ids_name,
																					_killerBuildingType: personal.killerBuilding.type,
																					_gameMode: game_data.game_mode} : null"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.25 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$AlignRight"/>
						<style>
							<top value="23px"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefault17NM"/>
							<styleClass value="$FontColorGrey"/>
							<bind name="name" value="'BattleResultMapAndType'"/>
							<style>
								<right value="0"/>
								<marginBottom value="8px"/>
							</style>
							<bind name="text" value="isBattleChallenge ? battleTypeTitle : subst('IDS_PERSONAL_RESULT_SCENARIO_OR_MAP_NAME_DASH_BATTLETYPE', [], {scenarioOrMapName: scenarioOrMapName, battleTypeTitle: battleTypeTitle})"/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault17NM"/>
							<styleClass value="$FontColorGrey"/>
							<style>
								<right value="0"/>
							</style>
							<bind name="text" value="subst('IDS_BATTLE_START_TIME', [], {battleDate: game_data.battle_date})"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="isEarnedBlockVisible"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<block type="text">
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.3 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<style>
							<marginBottom value="16px"/>
						</style>
						<styleClass value="$TextDefaultBold25NM"/>
						<styleClass value="$FontColorGrey"/>
						<default_text value="IDS_BATTLE_STATS_TAKEN_TILL_BATTLE"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.6 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<block type="text">
							<bind name="visible" value="personal.isEconomicallyPunished"/>
							<style>
								<marginBottom value="16px"/>
							</style>
							<styleClass value="$TextDefault17NM"/>
							<bind name="class" value="abuseStatus == SC.Common.ABUSE_STATUS.NORMAL ? '$FontColorOrange' : '$FontColorTeamkiller'"/>
							<bind name="text" value="'IDS_TEAMSHOOTER_PENALTY'"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<block>
							<bind name="visible" value="!personal.isEconomicallyPunished"/>
							<block>
								<style>
									<align value="middle"/>
								</style>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.4 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
								<block type="text">
									<styleClass value="$TextDefaultBold50NM"/>
									<bind name="class" value="'$DropShadowDisabler'"/>
									<style>
										<alpha value="0.9"/>
										<letterSpacing value="-2"/>
									</style>
									<bind name="name" value="'BattleResultCreditsGain'"/>
									<bind name="text" value="format(credits_experience.result.gui_main_credits, -1)"/>
								</block>
								<block>
									<style>
										<marginLeft value="4px"/>
										<marginBottom value="-10px"/>
									</style>
									<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.CREDITS, _extraLarge: true }"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.5 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
								<style>
									<marginLeft value="16px"/>
									<align value="middle"/>
								</style>
								<block type="text">
									<styleClass value="$TextDefaultBold50NM"/>
									<bind name="class" value="'$DropShadowDisabler'"/>
									<style>
										<alpha value="0.9"/>
										<letterSpacing value="-2"/>
									</style>
									<bind name="name" value="'BattleResultExperienceGain'"/>
									<bind name="text" value="format(credits_experience.result.gui_main_exp, -1)"/>
								</block>
								<block>
									<style>
										<marginLeft value="4px"/>
										<marginBottom value="-10px"/>
									</style>
									<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.XP, _extraLarge: true }"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="primaryEntityDH" value="'featureEntity_5'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[5]"/>
								<bind name="watchDH" value="'feature_5'; ['featureEntity_5.accountFeature.evStateChanged']; featureEntity_5.accountFeature.state"/>
								<bind name="watch" value="'featureState'; feature_5"/>
								<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 5}"/>
								<bind name="visible" value="feature_5 != 'locked'"/>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? delay + 0.6 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
								<style>
									<marginLeft value="16px"/>
									<align value="middle"/>
								</style>
								<block type="text">
									<bind name="name" value="'BattleResultFreeExperienceGain'"/>
									<styleClass value="$TextDefaultBold50NM"/>
									<bind name="class" value="'$DropShadowDisabler'"/>
									<style>
										<letterSpacing value="-2"/>
									</style>
									<bind name="style" value="'textColor'; 0xFFCCFF99"/>
									<bind name="text" value="format(credits_experience.result.gui_main_free_exp, -1)"/>
								</block>
								<block>
									<style>
										<marginLeft value="4px"/>
										<marginBottom value="-10px"/>
									</style>
									<bind name="instance" value="'Currency'; { _currency: SC.Common.CURRENCIES.FREE_XP, _extraLarge: true }"/>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="personal.achievements"/>
							<bind name="name" value="'BattleResultAchievements'"/>
							<bind name="style" value="'marginTop'; personal.isEconomicallyPunished ? '16px' : '-8px'"/>
							<bind name="style" value="'marginBottom'; personal.isEconomicallyPunished ? '24px' : '-24px'"/>
							<bind name="style" value="'marginLeft'; personal.isEconomicallyPunished ? '0px' : '16px'"/>
							<bind name="repeat" value="personal.achievements; 'AchievementAppearAnimation'; {_delay: achievementDelay,
																							_animationOn: animationOn}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="visible" value="!isBattleChallenge"/>
					<style>
						<marginTop value="32px"/>
						<width value="100%"/>
					</style>
					<block type="text">
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? ribbonsDelay-0.1 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefaultBold25NM"/>
						<styleClass value="$FontColorGrey"/>
						<style>
							<marginBottom value="16px"/>
						</style>
						<default_text value="IDS_BATTLE_EFFICIENCY"/>
					</block>
					<block type="text">
						<bind name="visible" value="!isPositiveBattleEfficiency"/>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? ribbonsDelay : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefault17NM"/>
						<styleClass value="$FontColorOrange"/>
						<default_text value="IDS_YOU_DIDNT_SHOW_RESULTS"/>
					</block>
					<block>
						<bind name="visible" value="isPositiveBattleEfficiency"/>
						<style>
							<width value="100%"/>
						</style>
						<block>
							<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
							<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
							<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
							<style>
								<flow value="htile"/>
								<width value="100%"/>
								<margin value="-4px"/>
							</style>
							<block>
								<style>
									<margin value="4px"/>
								</style>
								<block>
									<bind name="tooltip" value="'SimpleStatusTooltip'; { _text: 'IDS_RIBBON_TOTAL_DAMAGE'}"/>
									<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? ribbonsDelay + 0.15 : 0; {top: 10, alpha: 0}; {top: 0, alpha: 1}"/>
									<style>
										<marginTop value="6px"/>
										<align value="center"/>
									</style>
									<block type="text">
										<style>
											<minWidth value="141"/>
											<alpha value="0.9"/>
											<letterSpacing value="-2"/>
											<marginBottom value="10px"/>
											<textAlign value="center"/>
										</style>
										<styleClass value="$TextDefaultBold50NM"/>
										<bind name="class" value="'$DropShadowDisabler'"/>
										<bind name="text" value="format(causedDamageEntity.battleResultsEntry.values[0].value, -1)"/>
									</block>
									<block type="text">
										<styleClass value="$TextDefaultNM"/>
										<bind name="class" value="'$FontColorGrey'"/>
										<bind name="text" value="'IDS_TOTAL_DAMAGE'"/>
									</block>
								</block>
							</block>
							<bind name="repeat" value="personal.ribbons; 'RibbonItem'; {	_delay: ribbonsDelay + 0.30,
																		_animationOn: animationOn}"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="(numSseTasks || numCampaignTasks || numBonusTags || numRvrTasks || numShipAcesTasks || numStrategicActionsTasksCount) &amp;&amp; !isReplayPlaying"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<block type="text">
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? bonusTagDelay-0.05 : 0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$TextDefaultBold25NM"/>
						<styleClass value="$FontColorGrey"/>
						<style>
							<marginBottom value="16px"/>
						</style>
						<default_text value="IDS_TASKS"/>
					</block>
					<block>
						<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? bonusTagDelay : 0; {alpha: 0}; {alpha: 1}"/>
						<block>
							<bind name="appear" value="'addedToStage'; animationOn ? 0.01 : 0; animationOn ? bonusTagDelay : 0; {alpha: 0, scaleY: 0}; {alpha: 1, scaleY: 1} "/>
							<styleClass value="$FullsizeAbsolute"/>
							<block>
								<bind name="repeat" value="bonusTagsTasksList; 'PostBattleBonusTagItem'; {	_delay: bonusTagDelay,
																							_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="campaignTasksDoneList; 'PostBattleCampaignTasksItem'; {	_delay: campTaskDoneDelay,
																									_campaignTasksTotal: numCampaignTasksDone,
																									_battleTypePlayed: game_data.battleType,
																									_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="instance" value="'PostBattleStrategicAction'; strategicActionsTaskEntity	? {	_id: strategicActionsTaskEntityId,
																										_delay: strategicActionsDelay,
																										_animationOn: animationOn}
																									: null"/>
							</block>
							<block>
								<bind name="repeat" value="rvrTasksDoneList ; 'PostBattleRvrTask'; {	_delay: rvrTasksDoneDelay,
																					_rvrTasksTotal: numRvrTasksDone,
																					_bonusTagsTotal: numBonusTags,
																					_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="shipAcesTasksList; 'PostBattleShipAcesTask'; {	_delay: shipAcesTasksDoneDelay,
																							_animationOn: animationOn }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="sseTasksDoneList; 'PostBattleSseTask'; {	_delay: sseTasksDoneDelay,
																					_animationOn: animationOn }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="campaignTasksInProgressList; 'PostBattleCampaignTasksItem'; { _delay: campTaskInProgressDelay,
																										_campaignTasksTotal: numCampaignTasksInProgress,
																										_battleTypePlayed: game_data.battleType,
																										_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="rvrTasksInProgressList; 'PostBattleRvrTask'; {	_delay: rvrTasksInProgressDelay,
																							_rvrTasksTotal: numRvrTasksInProgress,
																							_bonusTagsTotal: numBonusTags,
																							_animationOn: animationOn}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="sseTasksInProgressList; 'PostBattleSseTask'; {	_delay: sseTasksInProgressDelay,
																							_animationOn: animationOn }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="appear" value="'addedToStage'; animationOn ? 0.15 : 0; animationOn ? sseTasksInProgressDelay + 1.3 : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
								<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																	_text: 'IDS_HINT_SSE_SHOW_POSTBATTLE_TASK_DETAILS' }"/>
								<style>
									<marginLeft value="16"/>
									<marginTop value="16px"/>
								</style>
								<bind name="instance" value="'DefaultButton';	sseTasks.length	?	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																						_width: '192px',
																						_label: subst('IDS_SUBST_PL_SSE_POSTBATTLE_TASKS_TOTAL', [], {taskCount: sseTasks.length}, sseTasks.length),
																						_request: 'showPostBattleSSE',
																						_requestParams: { tasksCollectionName: 'byArenaId.' + game_data.arena_id },
																						_enabled: true,
																						_name: 'all_tasks'}
																				: null"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="PostBattleShipAcesTask">
		<bind name="entityDH" value="'ssePostBattleEntity'; $value"/>
		<bind name="watch" value="'sseId'; ssePostBattleEntity.id"/>
		<bind name="watch" value="'taskConditions'; ssePostBattleEntity.sseTask.conditions"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions[0]"/>
		<bind name="watch" value="'countablesIds'; sseConditionEntity.sseConditions.countablesIds"/>
		<bind name="tooltip" value="'PostBattleShipAcesTaskTooltip'; {	_sseId: sseId,
														_taskDesk: countablesIds[0].ids }"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<marginTop value="8px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<width value="48px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'RewardCategory'; { _rewardCategory: ssePostBattleEntity.sseTask.rewardCategory,
		 									_isReceived: true }"/>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="12px"/>
				<marginTop value="-12px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<styleClass value="$FontColorGolden"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<bind name="text" value="ssePostBattleEntity.sseTask.name"/>
			</block>
		</block>
	</block>
	<block className="PostBattleShipAcesTaskTooltip">
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'stepsNumber';		[''];	sseEntity.shipAcesPersistent.stepsNumber"/>
		<bind name="watchDH" value="'shipId';			[''];	sseEntity.shipAcesPersistent.shipId"/>
		<bind name="watchDH" value="'shipAcesType';		[''];	sseEntity.shipAcesPersistent.shipAcesType"/>
		<bind name="watchDH" value="'sseTaskComponent';	['sseEntity.sseTask.evChanged'];	sseEntity.sseTask"/>
		<bind name="entityDH" value="'ssePostBattleEntity'; _sseId"/>
		<bind name="watch" value="'taskConditions'; ssePostBattleEntity.sseTask.conditions"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions[0]"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['ownShipEntity.upgradableShipInfo.evUpdate']; ownShipEntity.upgradableShipInfo"/>
		<bind name="watchDH" value="'dockShipNation';	['ownShipEntity.ship.evUpdate']; ownShipEntity.ship.nation"/>
		<bind name="watchDH" value="'dockShipType';		['ownShipEntity.ship.evUpdate']; ownShipEntity.ship.subtype"/>
		<bind name="var" value="{tooltipHeaderIDS:	shipAcesType == SC.Common.SHIP_ACES_TYPE.SHIP_TYPE	? 'IDS_' + dockShipType :
									shipAcesType == SC.Common.SHIP_ACES_TYPE.NATION		? 'IDS_' + dockShipNation
																						: 'IDS_' + dockShipNation + '_' + dockShipType}"/>
		<bind name="watchDH" value="'isPVEModifierApplied'; ['']; sseConditionEntity.sseConditions.pveModifierApplied"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: tooltipHeaderIDS,
																_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';  {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
														_text: 'IDS_SSE_STATUS_COMPLETED'	}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isPVEModifierApplied"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isPVEModifierApplied	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
																			_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}
																		: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; {	_descriptionText: _taskDesk }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK, _text: 'IDS_SSE_REWARD_RECEIVED_COLON' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; { _rewards: sseTaskComponent.rewards }"/>
			</block>
		</block>
	</block>
	<block className="PostBattleSseTask">
		<bind name="entityDH" value="'ssePostBattleEntity'; $value"/>
		<bind name="watch" value="'sseId'; ssePostBattleEntity.id"/>
		<bind name="watchDH" value="'isClaimed';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isClaimed"/>
		<bind name="watchDH" value="'isDone';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isDone"/>
		<bind name="watch" value="'isFailed';		ssePostBattleEntity.sseCorePersistent.isFailed"/>
		<bind name="watch" value="'taskConditions';	ssePostBattleEntity.sseTask.conditions"/>
		<bind name="watch" value="'isEpic'; !!ssePostBattleEntity.sseEpic"/>
		<bind name="watch" value="'isChain'; !!ssePostBattleEntity.sseChain"/>
		<bind name="watch" value="'isSseOpenEnded'; !!ssePostBattleEntity.sseOpenEnded"/>
		<bind name="watch" value="'isDailyTask'; ssePostBattleEntity.sseRefresh.isDaily"/>
		<bind name="watch" value="'isOrTask'; taskConditions.length &gt; 1"/>
		<bind name="watch" value="'isManualRewardClaim';	ssePostBattleEntity.sseChain.claimRewards ||
										ssePostBattleEntity.sseEpic.claimRewards ||
										ssePostBattleEntity.sseTask.claimRewards"/>
		<bind name="watch" value="'isClaimable'; isManualRewardClaim &amp;&amp; isDone &amp;&amp; !isClaimed"/>
		<bind name="watch" value="'epicTasksToComplete';	ssePostBattleEntity.sseEpic.tasksToComplete"/>
		<bind name="watch" value="'epicBattleProgress';	ssePostBattleEntity.sseEpic.battleProgress"/>
		<bind name="watch" value="'chainBattleProgress';	ssePostBattleEntity.sseChain.battleProgress"/>
		<bind name="watch" value="'progressCurrent';		ssePostBattleEntity.progress.value"/>
		<bind name="watch" value="'progressMax';			ssePostBattleEntity.progress.max"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions[0]"/>
		<bind name="watch" value="'countablesIds'; sseConditionEntity.sseConditions.countablesIds"/>
		<bind name="watch" value="'sseProgressCurrent';	(isEpic || isChain)	? progressCurrent :
										currentProgress		? currentProgress
															: countablesIds[0].currentProgress"/>
		<bind name="watch" value="'sseProgressMax';	isEpic		? epicTasksToComplete :
									isChain		? progressMax :
									maxProgress	? maxProgress
												: countablesIds[0].maxProgress"/>
		<bind name="watch" value="'sseProgressBattle';	isEpic	? epicBattleProgress :
										isChain	? chainBattleProgress
												: countablesIds[0].battleProgress"/>
		<bind name="watch" value="'progressBeforeBattle'; (sseProgressCurrent - sseProgressBattle) / sseProgressMax"/>
		<bind name="watch" value="'progressAfterBattle'; sseProgressBattle / sseProgressMax"/>
		<bind name="watch" value="'sseStatusIconType';	isDone						? SC.Ui_styles.UNIFIED_STATUS.CHECK :
										isFailed					? SC.Ui_styles.UNIFIED_STATUS.NEGATIVE :
										!daysLeft &amp;&amp; !isDailyTask	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																	: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="watch" value="'sseStopTimestamp'; ssePostBattleEntity.sseCorePersistent.stop"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeft'; sseStopTimestamp - serverTime"/>
		<bind name="watch" value="'daysLeft'; math.floor(timeLeft / 86400)"/>
		<bind name="watch" value="'sseName'; isEpic	? ssePostBattleEntity.sseEpic.name :
							isChain	? ssePostBattleEntity.sseChain.name
									: ssePostBattleEntity.sseTask.name"/>
		<bind name="watch" value="'sseTaskDescription';	sseName.length				? sseName :
										isEpic || isChain			? subst('IDS_PL_SSE_COMPLETE_TASKS', [], {count: maxTasks}, maxTasks) :
										countablesIds[0].ids.length	? countablesIds[0].ids
																	: 'IDS_TASK'"/>
		<bind name="watch" value="'_name'; 'sse_task_' + ssePostBattleEntity.sseCorePersistent.id + (isDone ? '_done' : '')"/>
		<bind name="tooltip" value="'PostBattleSseTaskTooltip'; { _sseId: sseId }"/>
		<bind name="request" value="'click'; isClaimable ? 'showSseClaimWindow' : ''; { sseId: sseId }"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<marginTop value="8px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	isClaimable &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							isClaimable &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<block>
			<style>
				<width value="48px"/>
				<hitTest value="false"/>
			</style>
			<block className="SseRewardCategory" type="ublock">
				<bind name="build!" value="{	_sseEntityId: sseId }"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="12px"/>
				<marginTop value="-12px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<bind name="name" value="_name"/>
				<styleClass value="$TextDefaultNM"/>
				<bind name="class" value="isDone ? '$FontColorGolden' : '$None'"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<bind name="style" value="'alpha'; isDone ? 1 : 0.9"/>
				<bind name="text" value="sseTaskDescription"/>
			</block>
			<block>
				<bind name="visible" value="!isDone &amp;&amp; !isSseOpenEnded"/>
				<style>
					<width value="120px"/>
					<marginTop value="8px"/>
				</style>
				<bind name="instance" value="'DoubleProgressBar'; isDone ? null : {	_progress1: progressBeforeBattle, _color1: SC.Ui_styles.SERVICE_COLORS.ORANGE,
																	_progress2: progressAfterBattle,  _color2: SC.Ui_styles.SERVICE_COLORS.YELLOW }"/>
			</block>
			<block type="text">
				<bind name="visible" value="!isDone &amp;&amp; isSseOpenEnded"/>
				<styleClass value="$TextDefaultBoldNM"/>
				<style>
					<width value="120px"/>
					<marginTop value="8px"/>
				</style>
				<bind name="text" value="'+' + format(countablesIds[0].battleProgress)"/>
			</block>
		</block>
	</block>
	<block className="PostBattleSseTaskTooltip">
		<bind name="collectionDH" value="CC.sseCorePersistent; 'sseTasks'; 'byArenaId.' + game_data.arena_id"/>
		<bind name="entityDH" value="'ssePostBattleEntity'; _sseId"/>
		<bind name="watchDH" value="'isClaimed';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isClaimed"/>
		<bind name="watchDH" value="'isDone';	['ssePostBattleEntity.sseCorePersistent.evIsClaimedChanged']; ssePostBattleEntity.sseCorePersistent.isDone"/>
		<bind name="watchDH" value="'doneConditionSetIndex';	[]; ssePostBattleEntity.sseCorePersistent.doneConditionSetIndex"/>
		<bind name="watch" value="'isFailed'; false"/>
		<bind name="watch" value="'taskConditions'; ssePostBattleEntity.sseTask.conditions"/>
		<bind name="watch" value="'isCompleted'; isDone || isFailed || isExpired"/>
		<bind name="watch" value="'isTask'; !(isEpic || isChain)"/>
		<bind name="watch" value="'epicBattleProgress';	ssePostBattleEntity.sseEpic.battleProgress"/>
		<bind name="watch" value="'chainBattleProgress';	ssePostBattleEntity.sseChain.battleProgress"/>
		<bind name="entityDH" value="'sseConditionEntity';	!isTask ? null :
											!isDone ? sseConditions[0]
													: sseConditions[doneConditionSetIndex]"/>
		<bind name="watch" value="'battleTypes'; sseConditionEntity.sseConditions.battleTypes"/>
		<bind name="watch" value="'selectedFilters'; sseConditionEntity.shipListRestrictions.selectedFilters"/>
		<bind name="watch" value="'conditionCategory'; sseConditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'countablesIds'; sseConditionEntity.sseConditions.countablesIds"/>
		<bind name="watch" value="'sseConditions'; isTask ? taskConditions : 1"/>
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'sseEpicComponent';			['sseEntity.sseEpic.evChanged'];	sseEntity.sseEpic"/>
		<bind name="watchDH" value="'sseChainComponent';			['sseEntity.sseChain.evChanged'];	sseEntity.sseChain"/>
		<bind name="watchDH" value="'sseTaskComponent';			['sseEntity.sseTask.evChanged'];	sseEntity.sseTask"/>
		<bind name="watchDH" value="'sseMaxProgress';			['sseEntity.progress.evChanged'];	sseEntity.progress.max"/>
		<bind name="watchDH" value="'taskConditions'; 			['sseEntity.sseTask.evChanged'];	sseEntity.sseTask.conditions"/>
		<bind name="watchDH" value="'chainId';					['sseEntity.sseTask.evChanged'];	sseEntity.sseTask.chainId"/>
		<bind name="watchDH" value="'progressMax';				['sseEntity.progress.evChanged'];	sseEntity.progress.max"/>
		<bind name="watchDH" value="'epicTasksToComplete';		['sseEntity.sseEpic.evChanged'];	sseEntity.sseEpic.tasksToComplete"/>
		<bind name="watchDH" value="'refreshTime';				['sseEntity.sseRefresh.evChanged'];	sseEntity.sseRefresh.refreshTime"/>
		<bind name="watchDH" value="'globalSsePersonalProgress';	['sseEntity.sseGlobal.evChanged'];	sseEntity.sseGlobal.personalProgress"/>
		<bind name="watchDH" value="'progressFreezeAt';			['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.freezeAt"/>
		<bind name="watchDH" value="'resultsPublicationAt';		['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.resultsAt"/>
		<bind name="watchDH" value="'isProgressFrozen'; 			['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.isFrozen"/>
		<bind name="watchDH" value="'isRewarded';				['sseEntity.sseOpenEnded.evChanged']; sseEntity.sseOpenEnded.isRewarded"/>
		<bind name="watch" value="'sseName'; isEpic	? sseEpicComponent.name :
							isChain	? sseChainComponent.name
									: sseTaskComponent.name"/>
		<bind name="watch" value="'isGlobalSse'; !!sseEntity.sseGlobal"/>
		<bind name="watch" value="'isSseOpenEnded'; !!sseEntity.sseOpenEnded"/>
		<bind name="watch" value="'isEpic'; !!sseEpicComponent"/>
		<bind name="watch" value="'isChain'; !!sseChainComponent"/>
		<bind name="watch" value="'isChainParent'; !!sseChainComponent"/>
		<bind name="watch" value="'maxTasks'; isEpic ? epicTasksToComplete : sseMaxProgress"/>
		<bind name="watch" value="'isOrTask'; taskConditions.length &gt; 1"/>
		<bind name="watch" value="'isWeeklyTask'; sseEntity.sseRefresh.weekly &gt; 0"/>
		<bind name="watch" value="'isDailyTask'; sseEntity.sseRefresh.isDaily &amp;&amp; !isWeeklyTask"/>
		<bind name="watch" value="'isRepeatableTask'; !isEpic &amp;&amp; !isChainParent &amp;&amp; (progressMax &gt; 1 || progressMax == 0)"/>
		<bind name="watch" value="'isAggregator'; conditionCategory == SC.Sse.SSE_CONDITION_CATEGORY.COMPLETE_TASK"/>
		<bind name="watch" value="'isManualRewardClaim';	sseChainComponent.claimRewards ||
										sseEpicComponent.claimRewards ||
										sseTaskComponent.claimRewards"/>
		<bind name="watch" value="'isClaimable'; isManualRewardClaim &amp;&amp; !isClaimed &amp;&amp; !_isSseTokenReward"/>
		<bind name="watch" value="'sseTag'; !!ssePostBattleEntity.sseCorePersistent ? ssePostBattleEntity.sseCorePersistent.tag : sseEntity.sseCore.tag"/>
		<bind name="primaryEntityDH" value="'customTagEntity'; CC.sseTag; sseTag"/>
		<bind name="watch" value="'customTagName'; customTagEntity.sseTag.name"/>
		<bind name="watch" value="'isCustomTag'; customTagEntity.sseTag.isCustom == true"/>
		<bind name="watch" value="'iconType';	isEpic				? 'epic' :
								isAggregator		? 'aggregator' :
								isChainParent		? 'chain' :
								isRepeatableTask	? 'task_repeatable' :
								isOrTask			? 'task_or'
													: 'task'"/>
		<bind name="watch" value="'rewards'; isEpic	? sseEpicComponent.rewards :
							isChain	? sseChainComponent.rewards
									: sseTaskComponent.rewards"/>
		<bind name="watch" value="'hasRewards'; rewards.length &gt; 0"/>
		<bind name="watch" value="'sseImageUrl'; 'url:../sse/type_icons/sse_type_' + iconType + '_24.png'"/>
		<bind name="watch" value="'sseHeaderText';	sseName.length		? sseName :
									isEpic || isChain	? subst('IDS_PL_SSE_COMPLETE_TASKS', [], {count: maxTasks}, maxTasks)
														: 'IDS_TASK'"/>
		<bind name="watch" value="'sseSubheaderText'; isCustomTag	? subst('IDS_SUBST_TAG_DESCRIPTION_CUSTOM', [], {eventName: customTagName})
													: 'IDS_SSE_TAG_DESCRIPTION_' + toUpperCase(sseTag)"/>
		<bind name="watch" value="'sseRewardTitle';	isClaimable							? 'IDS_SSE_STATUS_CLAIM_AVAILABLE_COLON' :
									isDone 								? 'IDS_SSE_REWARD_RECEIVED_COLON' :
									(isEpic || isChain || isAggregator)	? 'IDS_SSE_FINAL_REWARD_COLON'
																		: 'IDS_SSE_TASK_REWARD_COLON'"/>
		<bind name="watch" value="'sseRewardTitleUnifiedStatus';	isClaimable	? SC.Ui_styles.UNIFIED_STATUS.DEFAULT :
												isDone		? SC.Ui_styles.UNIFIED_STATUS.CHECK :
												isFailed	? SC.Ui_styles.UNIFIED_STATUS.NEGATIVE
															: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'sseRewardTitleUnifiedStatus';	isManualRewardClaim	? SC.Ui_styles.UNIFIED_STATUS.DEFAULT :
												isDone				? SC.Ui_styles.UNIFIED_STATUS.CHECK :
												isFailed			? SC.Ui_styles.UNIFIED_STATUS.NEGATIVE
																	: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'headerUnifiedStatus';	isDone	? SC.Ui_styles.UNIFIED_STATUS.CHECK
												: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'unifiedStatusCompletionOpenEndedSse'; isRewarded ? SC.Ui_styles.UNIFIED_STATUS.CHECK : SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"/>
		<bind name="watch" value="'statusCompletionOpenEndedSse'; isRewarded ? 'IDS_SSE_STATUS_PORTAL_REWARDS_RECEIVED' : 'IDS_SSE_STATUS_FAILED'"/>
		<bind name="watch" value="'sseProgressBattle';	isEpic	? epicBattleProgress :
										isChain	? chainBattleProgress
												: countablesIds[0].battleProgress"/>
		<bind name="watchDH" value="'isPVEModifierApplied'; ['']; sseConditionEntity.sseConditions.pveModifierApplied"/>
		<bind name="watch" value="'sseStopTimestamp'; isSseOpenEnded	? progressFreezeAt : sseEntity.sseCorePersistent.stop"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeft'; sseStopTimestamp - serverTime"/>
		<bind name="countdown" value="sseStopTimestamp; 'formattedLastDayLeft'; 'HH:mm:ss'"/>
		<bind name="watch" value="'daysLeft'; math.floor(timeLeft / 86400)"/>
		<bind name="watch" value="'isExpired'; timeLeft &lt; 0"/>
		<bind name="watch" value="'isResultPublished'; resultsPublicationAt &lt; serverTime"/>
		<bind name="watch" value="'isResultsCounting'; isProgressFrozen &amp;&amp; !isResultPublished"/>
		<bind name="countdown" value="refreshTime; 'timeTillNextDay'; 'hh:mm:ss'"/>
		<bind name="countdown" value="refreshTime; 'timeTillNextWeek'; 'HIGHEST'"/>
		<bind name="watch" value="'isRefreshStatus'; sseStopTimestamp &gt; refreshTime"/>
		<bind name="watch" value="'isWeeklyRefreshStatus'; isWeeklyTask &amp;&amp; isRefreshStatus"/>
		<bind name="watch" value="'timeLeftStatusText';
		subst(isDailyTask		? 'IDS_SUBST_SSE_DAILY_RESET_IN' :
		isWeeklyRefreshStatus	? 'IDS_SUBST_SSE_WEEKLY_RESET_IN' :
		daysLeft				? 'IDS_SUBST_PL_SSE_TIME_LEFT_DAYS'
								: 'IDS_SUBST_SSE_TIME_LEFT_LAST_DAY',
		[], 
		{ timeLeft: isDailyTask				? timeTillNextDay :
					isWeeklyRefreshStatus	? timeTillNextWeek:
					daysLeft				? daysLeft
											: formattedLastDayLeft },
		daysLeft)
	"/>
		<bind name="watch" value="'sseUnifiedStatus'; isDailyTask || isWeeklyRefreshStatus || daysLeft	? SC.Ui_styles.UNIFIED_STATUS.DATE
																						: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION"/>
		<bind name="watch" value="'sseStatus';	isSseOpenEnded	?	isResultsCounting	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
																			_text: 'IDS_SSE_STATUS_PORTAL_RESULTS_COUNTING' }
																		: {	_unifiedStatus: unifiedStatusCompletionOpenEndedSse,
																			_text: statusCompletionOpenEndedSse } :
								isDone 			? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
													_text: 'IDS_SSE_STATUS_COMPLETED'	}
												: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
													_text: 'IDS_SSE_STATUS_FAILED'	}"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: sseHeaderText,
																_unifiedStatus: headerUnifiedStatus }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isCompleted	? sseStatus : null"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; !isCompleted	? {	_unifiedStatus: sseUnifiedStatus,
																	_text: timeLeftStatusText }
																: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isPVEModifierApplied"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isPVEModifierApplied	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
																			_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}
																		: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="var" value="{isFirstTaskDone: false}"/>
				<bind name="catch" value="'evTaskIsDone'; {isFirstTaskDone: true}"/>
				<bind name="repeat" value="sseConditions; 'PostBattleSseTaskConditionRepeater'; { _sseId: _sseId, _isFirstTaskDone: isFirstTaskDone}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isGlobalSse"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemProgressParamsElement'; isGlobalSse	? {	_text: 'IDS_SSE_GLOBAL_PERSONAL_PROGRESS_COLON',
																				_param_1: isDone || isChain ? null : sseProgressBattle,
																				_param_2: globalSsePersonalProgress }
																			: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="hasRewards"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; hasRewards ? {_unifiedStatus: sseRewardTitleUnifiedStatus, _text: sseRewardTitle } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="hasRewards"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; hasRewards ? { _rewards: rewards } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isClaimable"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine';	isClaimable ? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																	_text: 'IDS_SSE_CLAIM_REWARD' }
																: null"/>
			</block>
		</block>
	</block>
	<block className="PostBattleSseTaskConditionRepeater">
		<bind name="entityDH" value="'ssePostBattleEntity'; _sseId"/>
		<bind name="watch" value="'isDone'; ssePostBattleEntity.sseCorePersistent.isDone"/>
		<bind name="watch" value="'isFailed'; false"/>
		<bind name="entityDH" value="'sseConditionEntity'; taskConditions.length == 1 ? taskConditions[0] : -1"/>
		<bind name="watchDH" value="'battleTypes';		['sseConditionEntity.sseConditions.evConditionSetChanged']; sseConditionEntity.sseConditions.battleTypes"/>
		<bind name="watchDH" value="'selectedFilters';	['sseConditionEntity.shipListRestrictions.evUpdate']; sseConditionEntity.shipListRestrictions.selectedFilters"/>
		<bind name="watchDH" value="'conditionCategory';	['sseConditionEntity.sseConditions.evUpdate']; sseConditionEntity.sseConditions.conditionCategory"/>
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'taskConditions'; ['sseEntity.sseTask.evChanged']; sseEntity.sseTask.conditions"/>
		<bind name="watch" value="'isEpic'; !!sseEntity.sseEpic"/>
		<bind name="watch" value="'isAggregator'; conditionCategory == SC.Sse.SSE_CONDITION_CATEGORY.COMPLETE_TASK"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="$index &gt; 0 &amp;&amp; !isDone"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="[$value]; 'TooltipSystemSseProgressBarBlockRepeater'; { _sseId: _sseId, _index: $index, _isFirstTaskDone: _isFirstTaskDone, _isDone: isDone }"/>
		</block>
	</block>
	<block className="TooltipSystemSseProgressBarBlockRepeater">
		<bind name="entityDH" value="'sseConditionEntity'; $value"/>
		<bind name="watch" value="'countablesIds'; sseConditionEntity.sseConditions.countablesIds[0]"/>
		<bind name="watch" value="'taskCategory'; sseConditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'achievements'; countablesIds.achievements"/>
		<bind name="entityDH" value="'sseEntity'; _sseId"/>
		<bind name="watchDH" value="'sseEpicComponent';		['sseEntity.sseEpic.evChanged'];		sseEntity.sseEpic"/>
		<bind name="watchDH" value="'sseChainComponent';		['sseEntity.sseChain.evChanged'];		sseEntity.sseChain"/>
		<bind name="watchDH" value="'sseOpenEndedComponent';	['sseEntity.sseOpenEnded.evChanged'];	sseEntity.sseOpenEnded"/>
		<bind name="watchDH" value="'epicTasksToComplete';	['sseEntity.sseEpic.evChanged'];		sseEntity.sseEpic.tasksToComplete"/>
		<bind name="watchDH" value="'epicBattleProgress';	['sseEntity.sseEpic.evChanged'];		sseEntity.sseEpic.battleProgress"/>
		<bind name="watchDH" value="'chainBattleProgress';	['sseEntity.sseChain.evChanged'];		sseEntity.sseChain.battleProgress"/>
		<bind name="watchDH" value="'progressCurrent';		['sseEntity.progress.evChanged'];		sseEntity.progress.value"/>
		<bind name="watchDH" value="'progressMax';			['sseEntity.progress.evChanged'];		sseEntity.progress.max"/>
		<bind name="watchDH" value="'taskConditionsNum'; 	['sseEntity.sseTask.evChanged'];		sseEntity.sseTask.conditions.length"/>
		<bind name="watch" value="'sseName'; isEpic	? sseEpicComponent.name :
							isChain	? sseChainComponent.name
									: sseTaskComponent.name"/>
		<bind name="watch" value="'isEpic'; !!sseEpicComponent"/>
		<bind name="watch" value="'isChain'; !!sseChainComponent"/>
		<bind name="watch" value="'isSseOpenEnded'; !!sseOpenEndedComponent"/>
		<bind name="watch" value="'maxTasks'; isEpic ? epicTasksToComplete : progressMax"/>
		<bind name="watch" value="'sseProgressCurrent';	(isEpic || isChain || isBinaryTask)	? progressCurrent :
										currentProgress		? currentProgress
															: countablesIds.currentProgress"/>
		<bind name="watch" value="'sseProgressBattle';	isEpic	? epicBattleProgress :
										isChain	? chainBattleProgress
												: countablesIds.battleProgress"/>
		<bind name="watch" value="'sseProgressMax';	isEpic		? epicTasksToComplete :
									isChain		? progressMax :
									maxProgress	? maxProgress
												: countablesIds.maxProgress"/>
		<bind name="watch" value="'isTaskDone'; sseProgressCurrent &gt;= sseProgressMax"/>
		<bind name="watch" value="'isBinaryTask'; sseProgressMax == 1"/>
		<bind name="watch" value="'sseProgressValueIncrement'; sseProgressBattle &gt; sseProgressMax ? sseProgressMax : sseProgressBattle"/>
		<bind name="watch" value="'isProgressShown'; !isBinaryTask &amp;&amp; !isTaskDone"/>
		<bind name="watch" value="'sseTaskDescription';
				isSseOpenEnded		? 'IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + taskCategory + '_FULL' :
				isEpic || isChain	? subst('IDS_PL_SSE_COMPLETE_TASKS', [], {count: maxTasks}, maxTasks) :
				ids					? ids
									: countablesIds.ids"/>
		<bind name="changeDispatch" value="isTaskDone; isTaskDone &amp;&amp; _index == 0 ? 'evTaskIsDone': 'evFake'"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="visible" value="_index &gt; 0 &amp;&amp; !_isDone"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
			</style>
			<default_text value="IDS_OR"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="_index &gt; 0 &amp;&amp; !_isDone"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-16px"/>
				<marginLeft value="-16px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isDone 	? _index == 0 &amp;&amp; isTaskDone || _index &gt; 0 &amp;&amp; !_isFirstTaskDone	? true
																								: false
								: true"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginLeft value="-16px"/>
					<marginRight value="-16px"/>
					<marginTop value="-12px"/>
					<marginBottom value="-12px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginBottom'; isSseOpenEnded ? '12px' : '0'"/>
				<bind name="instance" value="'TooltipSystemDescriptionText';	isProgressShown &amp;&amp; !isSseOpenEnded &amp;&amp; !achievements	? null
																												: { _descriptionText: sseTaskDescription }"/>
			</block>
			<block>
				<bind name="visible" value="achievements"/>
				<style>
					<flow value="htile"/>
					<marginTop value="8px"/>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="achievements; 'AchievementItem'; {_id: _id, _achievementsList: achievements.length, _isPostBattle: true}"/>
			</block>
			<bind name="instance" value="'TooltipSystemDoubleProgressBarBlock'; isProgressShown &amp;&amp; !isSseOpenEnded	? { _currentValue: sseProgressCurrent,
																										_valueIncrement: sseProgressValueIncrement,
																										_maxValue: sseProgressMax,
																										_title: achievements ? '' : sseTaskDescription }
																									: null"/>
			<bind name="instance" value="'TooltipSystemProgressParamsElement'; isSseOpenEnded	? { _text: 'IDS_SSE_PORTAL_RESULT_COLON',
																					_param_1: sseProgressBattle,
																					_param_2: sseProgressCurrent }
																				: null"/>
		</block>
	</block>
	<block className="PostBattleSSEQuestTooltip">
		<bind name="watch" value="'sseData'; _entity.dataComponent.data"/>
		<bind name="primaryEntityDH" value="'ssePostBattleEntity'; CC.sseCorePersistent; str(sseData.arena_id)+'_'+str(sseData.sse_id)"/>
		<bind name="instance" value="'PostBattleSseTaskTooltip'; { _sseId: ssePostBattleEntity.id }"/>
	</block>
	<block className="PostBattleCampaignTasksItem">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; id"/>
		<bind name="primaryEntityDH" value="'missionEntity'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaignEntity'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watch" value="'number'; campaignTaskEntity.campaignTaskParams.taskNumber"/>
		<bind name="watch" value="'campaignName'; campaignEntity.campaignParams.name"/>
		<bind name="watch" value="'uiNumber'; missionEntity.campaignMissionParams.uiNumber"/>
		<bind name="watch" value="'isFinalTask'; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="tooltip" value="'TaskItemTooltip'; {	_taskID: id, _isInPostbattle: true, _battleTypePlayed: _battleTypePlayed}"/>
		<bind name="style" value="'marginRight'; _campaignTasksTotal == ($index + 1) ? 32 : 24"/>
		<style>
			<flow value="horizontal"/>
			<height value="70px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<block>
				<style>
					<width value="70px"/>
					<height value="70px"/>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
				<bind name="style" value="'alpha'; isDone ? 0.3 : 1"/>
				<block type="text">
					<style>
						<alpha value="0.9"/>
						<position value="absolute"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$TextAccentBold"/>
					<bind name="text" value="uiNumber"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isDone"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<top value="12px"/>
					<width value="48px"/>
					<height value="48px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../reward_categories/icon_check.png'"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<bind name="class" value="isDone ? '$FontColorGolden' : '$None'"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<bind name="style" value="'alpha'; isDone ? 1 : 0.9"/>
				<bind name="text" value="isFinalTask	? tr('IDS_MISSION_FINAL_TASK')
									: tr('IDS_CAMPAIGN_TASK') + ' ' + number"/>
			</block>
			<block>
				<bind name="visible" value="!isDone"/>
				<style>
					<width value="120px"/>
					<marginTop value="8px"/>
				</style>
				<bind name="instance" value="'DefaultProgressBar'; isDone ? null : { _progress: progress/total }"/>
			</block>
		</block>
	</block>
	<block className="PersonalResultKiller">
		<block>
			<bind name="visible" value="!_killerIsBuilding"/>
			<bind name="watch" value="'isEventEnemy';_killer.dbId &lt; 0 &amp;&amp; (_gameMode == GameMode.KEY_BATTLE || _gameMode == GameMode.PORTAL_2021 || _gameMode == GameMode.TEAM_BATTLE_ROYALE_2021)"/>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorGrey'"/>
				<bind name="text" value="tr('IDS_BATTLE_STATS_DAMAGED_BY_' + death_reason_id)"/>
			</block>
			<block>
				<bind name="visible" value="!isEventEnemy"/>
				<bind name="instance" value="'PBSPlayerWithShip'; _killer.shipId ? {	_shipId: _killer.shipId,
																	_name: _killer.name,
																	_isEnemy: (_killer.relation == 2),
																	_fontSizeClass: '$FontSizeLarge',
																	_isTeamKiller: _killer.isAbuser,
																	_isSelf: (_killer.relation == 0),
																	_isInMyDivision: _killer.isInSameDivision,
																	_noWidth: true,
																	_isBot: _killer.dbId &lt; 0}
																: null"/>
			</block>
			<block>
				<bind name="visible" value="isEventEnemy"/>
				<block>
					<style>
						<backgroundSize value="cover"/>
						<width value="20px"/>
						<height value="20px"/>
						<marginTop value="3px"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../events/halloween20/death_reason_monster.png'"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="3px"/>
						<marginRight value="3px"/>
					</style>
					<styleClass value="$TextHeaderBigDefaultBold"/>
					<bind name="class" value="'$FontColorCompareNegative'"/>
					<default_text value="IDS_BATTLE_STATS_DAMAGED_BY_MONSTER"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_killerIsBuilding"/>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorGrey'"/>
				<default_text value="IDS_BATTLE_STATS_DAMAGED_BY_FORT"/>
			</block>
			<block>
				<bind name="visible" value="_killerBuildingType != 'AirBase'"/>
				<style>
					<backgroundSize value="cover"/>
					<width value="11px"/>
					<height value="15px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'bitmap:icon_ground_artillery_type_1_enemy'"/>
			</block>
			<block>
				<bind name="visible" value="_killerBuildingType == 'AirBase'"/>
				<style>
					<backgroundSize value="cover"/>
					<width value="17px"/>
					<height value="17px"/>
					<marginTop value="4px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'bitmap:icon_ground_airbase_enemy'"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefaultBold"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<bind name="text" value="toUpperCase(_killerBuildingName)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="RibbonItem">
		<bind name="name" value="'ribbon_' + ribbonId"/>
		<bind name="appear" value="'addedToStage'; (_animationOn ? 0.15 : 0 ); (_animationOn ? (0.15 * $index + _delay) : 0); {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="tooltip" value="'RibbonTooltip'; {_ribbonId: ribbonId, _amount: amount, _subRibbons: subRibbons }"/>
		<style>
			<margin value="4px"/>
			<align value="center"/>
		</style>
		<block>
			<style>
				<marginBottom value="4px"/>
			</style>
			<bind name="instance" value="'RibbonIcon'; {_amount: amount, _iconName: iconName}"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<bind name="class" value="'$FontColorGrey'"/>
			<bind name="text" value="tr('IDS_RIBBON_' + ids)"/>
		</block>
	</block>
	<block className="RibbonIcon">
		<style>
			<height value="51px"/>
			<width value="133px"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('url:../ribbons/' + _iconName + '.png')"/>
		<block type="text">
			<style>
				<marginTop value="22px"/>
				<right value="2px"/>
			</style>
			<styleClass value="$TextLargeHeaderBold"/>
			<bind name="text" value="'x' + _amount"/>
		</block>
	</block>
	<block className="PostBattleBonusTagItem">
		<bind name="entityDH" value="'bonusTagEntity'; $value"/>
		<bind name="watch" value="'bonusTagType'; bonusTagEntity.bonusTag.type"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="sharedTooltip" value="'BonusTagsTooltip'; { _bonusTagId: $value, _isReceived: true }"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<block>
				<style>
					<width value="54px"/>
					<height value="54px"/>
					<marginTop value="8px"/>
					<backgroundSize value="fill"/>
					<alpha value="0.3"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/bonus_tags/bonus_' + bonusTagType + '_big.png'"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<top value="12"/>
					<width value="48px"/>
					<height value="48px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../reward_categories/icon_check.png'"/>
			</block>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="8px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<styleClass value="$FontColorGolden"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<bind name="text" value="tr(toUpperCase('IDS_BONUSTAG_' + bonusTagType + '_HEADER'))"/>
			</block>
		</block>
	</block>
	<block className="PostBattleStrategicAction">
		<bind name="entityDH" value="'strategicActionsTaskEntity'; _id"/>
		<bind name="tooltip" value="'PostBattleStrategicActionsTooltip'; { _entityId: strategicActionsTaskEntity.id}"/>
		<bind name="watch" value="'elementAppearDelayBase'; 0.15 + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<height value="64px"/>
			<marginRight value="32px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<width value="48px"/>
				<marginTop value="8px"/>
				<backgroundImage value="url:../events/strategic_actions/postbattle/icon_strategic_actions_NY_received.png"/>
			</style>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<marginLeft value="8px"/>
				<align value="left|middle"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<styleClass value="$FontColorGolden"/>
				<style>
					<maxWidth value="136"/>
				</style>
				<default_text value="IDS_STRATEGIC_ACTIONS_COMMON_EVENT_TITLE"/>
			</block>
		</block>
	</block>
	<block className="PostBattleStrategicActionsTooltip">
		<bind name="entityDH" value="'strategicActionsTaskEntity'; _entityId"/>
		<bind name="watchDH" value="'rewards';				[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.rewards"/>
		<bind name="watchDH" value="'isPVEModifierApplied';	[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.pveModifierApplied"/>
		<bind name="watchDH" value="'conditionsSets';		[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.conditionsSets"/>
		<bind name="watchDH" value="'doneConditionSetIndex'; []; strategicActionsTaskEntity.strategicActionsTaskPersistent.doneConditionSetIndex"/>
		<bind name="watchDH" value="'taskType';				[]; strategicActionsTaskEntity.strategicActionsTaskPersistent.taskType"/>
		<bind name="watch" value="'isThresholdTask'; taskType == SC.Common.STRATEGIC_ACTIONS_TASK_TYPE.THRESHOLD"/>
		<bind name="watch" value="'isOrTask'; taskType == SC.Common.STRATEGIC_ACTIONS_TASK_TYPE.OR"/>
		<bind name="watch" value="'isAndTask'; taskType == SC.Common.STRATEGIC_ACTIONS_TASK_TYPE.AND"/>
		<bind name="watch" value="'conditionsEntities'; isOrTask ? [conditionsSets[doneConditionSetIndex]] : conditionsSets"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText';	{	_headerText: 'IDS_STRATEGIC_ACTIONS_COMMON_EVENT_TITLE',
																_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {	_text: 'IDS_TASK_COMPLETED',
														_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isPVEModifierApplied"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isPVEModifierApplied	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.PVE_MODIFIER,
																			_text: 'IDS_PVE_MODIFIER_TOOLTIP_DESC_TASK'}
																		: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="conditionsEntities; 'TooltipSystemStrategicActionsTaskDescriptionItem'; {	_isThresholdTask: isThresholdTask,
																								_isAndTask: isAndTask }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
														_text: 'IDS_TOOLTIP_REWARD_TAKEN' }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; { _rewards: rewards }"/>
			</block>
		</block>
	</block>
	<block className="TooltipSystemStrategicActionsTaskDescriptionItem">
		<bind name="entityDH" value="'conditionsSetEntity'; $value"/>
		<bind name="watchDH" value="'countablesIds'; ['conditionsSetEntity.sseConditions.evConditionSetChanged']; conditionsSetEntity.sseConditions.countablesIds"/>
		<bind name="watchDH" value="'conditionCategory'; []; conditionsSetEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'thresholdTaskIds'; 'IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + toUpperCase(conditionCategory) + '_FULL'"/>
		<bind name="watch" value="'taskDescription'; _isThresholdTask ? thresholdTaskIds : countablesIds[0].ids"/>
		<bind name="watch" value="'isConjunctionVisible'; _isAndTask &amp;&amp; $index == 0"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: taskDescription }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.45"/>
			</style>
			<bind name="style" value="'marginTop'; isConjunctionVisible ? '8' : 0"/>
			<bind name="style" value="'marginBottom'; isConjunctionVisible ? '8' : 0"/>
			<bind name="instance" value="'TooltipSystemDescriptionText'; isConjunctionVisible ? { _descriptionText: 'IDS_AND' } : null"/>
		</block>
	</block>
	<block className="PostBattleRvrTask">
		<bind name="entityDH" value="'arcEventTaskEntity'; $value"/>
		<bind name="watch" value="'pointsArray';		arcEventTaskEntity.progressWithRewardsPersistent.pointsArray"/>
		<bind name="watch" value="'progressIndex';	arcEventTaskEntity.progressWithRewardsPersistent.activeIndex - 1"/>
		<bind name="watch" value="'isDone'; progressIndex == pointsArray.length - 1"/>
		<bind name="entityDH" value="'conditionEntity'; arcEventTaskEntity.arcEventTaskPersistent.conditions[0]"/>
		<bind name="watch" value="'taskConditions';	conditionEntity.sseConditions.countablesIds[0]"/>
		<bind name="watch" value="'taskCategory';	conditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'taskDescription';	taskConditions.ids"/>
		<bind name="watch" value="'currentProgress';	taskConditions.currentProgress"/>
		<bind name="watch" value="'maxProgress';		taskConditions.maxProgress"/>
		<bind name="watch" value="'battleProgress';	taskConditions.battleProgress"/>
		<bind name="watch" value="'progressBeforeBattle'; (currentProgress - battleProgress) / maxProgress"/>
		<bind name="watch" value="'progressAfterBattle'; battleProgress / maxProgress"/>
		<bind name="tooltip" value="'PostBattleRvrTaskTooltip'; { _taskId: $value }"/>
		<bind name="watch" value="'elementAppearDelayBase'; ($index*0.15) + _delay"/>
		<bind name="appear" value="'addedToStage'; _animationOn ? 0.15 : 0; _animationOn ? elementAppearDelayBase : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<flow value="horizontal"/>
			<marginRight value="24"/>
			<height value="64px"/>
			<marginTop value="8px"/>
		</style>
		<block>
			<style>
				<height value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block>
				<style>
					<width value="48px"/>
				</style>
				<bind name="style" value="'backgroundImage';	'url:../events/arc_event/postbattle/icon_arc_event_task_reward_points' + 
											(isDone ? '_received' : '' ) +
											'.png'"/>
			</block>
			<block>
				<style>
					<height value="100%"/>
					<marginLeft value="8px"/>
					<marginTop value="-12px"/>
					<align value="left|middle"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<bind name="class" value="isDone ? '$FontColorGolden' : '$None'"/>
					<style>
						<maxWidth value="136"/>
					</style>
					<bind name="style" value="'alpha'; isDone ? 1 : 0.9"/>
					<bind name="text" value="tr('IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + toUpperCase(taskCategory) + '_FULL')"/>
				</block>
				<block>
					<bind name="visible" value="!isDone"/>
					<style>
						<width value="120px"/>
						<marginTop value="8px"/>
					</style>
					<bind name="instance" value="'DoubleProgressBar'; isDone ? null : {	_progress1: progressBeforeBattle, _color1: SC.Ui_styles.SERVICE_COLORS.ORANGE,
																		_progress2: progressAfterBattle,  _color2: SC.Ui_styles.SERVICE_COLORS.YELLOW }"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PostBattleRvrTaskTooltip">
		<bind name="entityDH" value="'arcEventTaskEntity'; _taskId"/>
		<bind name="watch" value="'finishTime';	arcEventTaskEntity.arcEventTaskPersistent.finishTime"/>
		<bind name="watch" value="'personalPoints';	arcEventTaskEntity.arcEventTaskPersistent.personalPoints"/>
		<bind name="watch" value="'pointsArray';		arcEventTaskEntity.progressWithRewardsPersistent.pointsArray"/>
		<bind name="watch" value="'progressIndex';	arcEventTaskEntity.progressWithRewardsPersistent.activeIndex - 1"/>
		<bind name="watch" value="'isDone'; progressIndex == pointsArray.length - 1"/>
		<bind name="watch" value="'hasPointsForThisBattle'; personalPoints &gt; 0"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeft'; finishTime - serverTime"/>
		<bind name="watch" value="'isExpired'; serverTime &gt; finishTime"/>
		<bind name="watch" value="'isFailed'; isExpired &amp;&amp; !isDone"/>
		<bind name="timeFormat" value="timeLeft; 'hh:mm:ss'; 'formattedLastDayLeft'"/>
		<bind name="watch" value="'daysLeft'; math.floor(timeLeft / 86400)"/>
		<bind name="entityDH" value="'conditionEntity'; arcEventTaskEntity.arcEventTaskPersistent.conditions[0]"/>
		<bind name="watchDH" value="'taskConditions'; ['conditionEntity.sseConditions.evConditionSetChanged']; conditionEntity.sseConditions.countablesIds[0]"/>
		<bind name="watch" value="'taskCategory';	conditionEntity.sseConditions.conditionCategory"/>
		<bind name="watch" value="'taskDescription';	taskConditions.ids"/>
		<bind name="watch" value="'taskDescription'; tr('IDS_SSE_CONDITION_CATEGORY_DESCRIPTION_' + toUpperCase(taskCategory) + '_FULL')"/>
		<bind name="watch" value="'currentProgress';	taskConditions.currentProgress"/>
		<bind name="watch" value="'maxProgress';		taskConditions.maxProgress"/>
		<bind name="watch" value="'battleProgress';	taskConditions.battleProgress"/>
		<bind name="watch" value="'progressBeforeBattle'; (currentProgress - battleProgress) / maxProgress"/>
		<bind name="watch" value="'progressAfterBattle'; battleProgress / maxProgress"/>
		<bind name="watch" value="'headerUnifiedStatus';	isDone	? SC.Ui_styles.UNIFIED_STATUS.CHECK
												: SC.Ui_styles.UNIFIED_STATUS.DEFAULT"/>
		<bind name="watch" value="'taskStatus'; hasPointsForThisBattle	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
															_text: subst(	'IDS_SUBST_PL_ARC_EVENT_POSTBATTLE_TOOLTIP_POINTS_RECEIVED', [],
																			{ _points: personalPoints },
																			personalPoints	)	}
														: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE,
															_text: 'IDS_SSE_STATUS_FAILED'	}"/>
		<bind name="watch" value="'timeLeftStatusText';
		subst(daysLeft		? 'IDS_SUBST_PL_SSE_TIME_LEFT_DAYS'
							: 'IDS_SUBST_SSE_TIME_LEFT_LAST_DAY',
		[], 
		{ timeLeft: daysLeft	? format(daysLeft, 0)
								: formattedLastDayLeft },
		daysLeft)"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="344px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: taskDescription,
																_unifiedStatus: headerUnifiedStatus }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="hasPointsForThisBattle || isExpired"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; hasPointsForThisBattle || isExpired	? taskStatus : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!isDone &amp;&amp; !isExpired"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemTimeLeftStatusLine';
			!isDone &amp;&amp; !isExpired ? { _timeLeftTimeStamp: finishTime, _substTextIDS: timeLeftStatusText } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!isDone"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDoubleProgressBarBlock'; !isDone	? {	_title: 'IDS_SSE_PROGRESS_COLON',
																			_currentValue: currentProgress,
																			_valueIncrement: battleProgress,
																			_maxValue: maxProgress,
																			_showPercent: false	}
																		: null"/>
			</block>
		</block>
	</block>

	<!-- results_screen_team_result -->
	<block className="TeamResultSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<style>
			<align value="center"/>
		</style>
		<block type="text">
			<bind name="visible" value="_data.game_data.isSpectator"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<marginTop value="8sh"/>
				<marginBottom value="2sh"/>
				<alpha value="0"/>
			</style>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.1; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<styleClass value="$TextDefaultBold60NM"/>
			<bind name="text" value="_data.game_data.winner_team_text"/>
		</block>
		<block>
			<bind name="instance" value="'RealTeamResultSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealTeamResultSection">
		<bind name="var" value="{complaintsAvailable: true}"/>
		<bind name="catch" value="'disableComplaints'; {complaintsAvailable: false}"/>
		<bind name="countdown" value="game_data.keep_until_time; 'countdownText'; 'mm:ss'; 'timeoutPostBattleComplaints'"/>
		<bind name="dispatch" value="'timeoutPostBattleComplaints'; 'disableComplaints'"/>
		<style>
			<alpha value="0"/>
			<marginTop value="3sh"/>
		</style>
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block className="BattleResultsPlayersTable" type="ublock">
			<bind name="build!" value="{		_teamResults: team_results,
							_gameData: game_data,
							_personal: personal, 
							_complaintsAvailable: complaintsAvailable }"/>
		</block>
	</block>

	<!-- scenario_battle_stats -->
	<block className="TaskBattleStats">
		<bind name="firstEntityDH" value="'customElementsVisibilityEntity'; CC.customElementsVisibility"/>
		<bind name="watchDH" value="'enabledElements'; ['customElementsVisibilityEntity.customElementsVisibility.evChanged']; customElementsVisibilityEntity.customElementsVisibility.enabledElements"/>
		<bind name="watch" value="'isTrialsDescriptionVisible'; (enabledElements &amp; (1 &lt;&lt; SC.Battle.CUSTOM_BATTLE_ELEMENTS.TRIALS_DESCR_ON_LOADING)) &gt; 0"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="var" value="{specialGameModeExtraDescriptions: 0}"/>
		<bind name="watch" value="'specialGameModeExtraDescriptions';	gameModeId == GameMode.ARMS_RACE  			? 4 :
											gameModeId == GameMode.PORTAL_2021			? 4 :
											gameModeId == GameMode.CONVOY_EVENT			? 2 :
											gameModeId == GameMode.CONVOY_AIRSHIP		? 4 :
											gameModeId == GameMode.TEAM_BATTLE_ROYALE	? 2
																						: null "/>
		<bind name="appear" value="'addedToStage'; 0.15; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<bind name="style" value="'width'; localWeatherEntity || specialGameModeExtraDescriptions &gt; 0 ? '1000px' : '500px'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<block>
			<block>
				<style>
					<flow value="horizontal"/>
					<width value="100%"/>
				</style>
				<block>
					<block>
						<bind name="instance" value="(gameModeId == GameMode.PVE) ? 'PVEBattleGoal' : 'PVPBattleGoal'; {}"/>
					</block>
					<bind name="watch" value="'bulletsCount';			gameModeId == GameMode.ANTI_STANDARD		? 2:
											gameModeId == GameMode.ATTACK_DEFENSE		? 5:
											gameModeId == GameMode.TEAM_BATTLE_ROYALE	? 3:
											gameModeId == GameMode.ARMS_RACE			? 2:
											gameModeId == GameMode.PORTAL_2021			? 1
																						: null "/>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="visible" value="bulletsCount"/>
						<bind name="instance" value="'GameModeRulesDescription'; bulletsCount ? {_bulletsCount: bulletsCount, _gameMode: gameMode} : null"/>
					</block>
					<block>
						<bind name="visible" value="gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
						<style>
							<marginTop value="16"/>
							<width value="100%"/>
						</style>
						<block type="text">
							<style>
								<marginBottom value="16"/>
							</style>
							<styleClass value="$TextDefaultBold23NM"/>
							<bind name="text" value="'IDS_GAMEMODE_TEAM_BATTLE_ROYALE_RULES_HEADER'"/>
						</block>
						<bind name="repeat" value="3; 'GameModeRulesDescriptionWithIcons'; gameModeId == GameMode.ESCAPE_TO_PORTAL ? {} : null"/>
					</block>
					<block>
						<bind name="visible" value="isTrialsDescriptionVisible"/>
						<style>
							<width value="100%"/>
							<marginTop value="16px"/>
						</style>
						<bind name="instance" value="'BattleTrialsDescriptionOnLoadingContainer'; isTrialsDescriptionVisible ? {} : null"/>
					</block>
				</block>
				<block>
					<style>
						<marginLeft value="50px"/>
						<width value="400px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="visible" value="specialGameModeExtraDescriptions"/>
						<bind name="instance" value="'GameModeRulesDescriptionWithIconsBlock'; specialGameModeExtraDescriptions ? {_bulletsCount: specialGameModeExtraDescriptions, _gameMode: gameMode} : null"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="instance" value="'TasksList'; {}"/>
			</block>
		</block>
		<block>
			<style>
				<marginLeft value="50px"/>
				<width value="450px"/>
			</style>
			<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
			<bind name="instance" value="'LocalWeatherDescription'; localWeatherEntity &amp;&amp; specialGameModeExtraDescriptions &lt;= 0 ? {} : null"/>
		</block>
	</block>
	<block className="PVEBattleGoal">
		<style>
			<width value="500px"/>
			<marginBottom value="16px"/>
		</style>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="'IDS_PVE_OPERATION_GOAL'"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-3"/>
				<alpha value="0.85"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="tr('IDS_' + toUpperCase(battleDataEntity.battleInfo.scenario) + '_GOAL')"/>
		</block>
	</block>
	<block className="PVPBattleGoal">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="watch" value="'gameModeDescription';	battleDataEntity.battleInfo.gameModeDescription"/>
		<bind name="watch" value="'gameModeGoal'; gameModeId == GameMode.KEY_BATTLE || gameModeId == GameMode.PORTAL_2021 || gameModeId == GameMode.TEAM_BATTLE_ROYALE_2021	? 'IDS_YOUR_GOAL' :
								 gameModeId == GameMode.BATTLE_CHALLENGES || gameModeId == GameMode.BATTLE_TRIALS											? 'IDS_JUST_GOAL'
																																							: 'IDS_TEAM_GOALS'"/>
		<style>
			<width value="500px"/>
			<marginBottom value="16px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold23NM"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="text" value="gameModeGoal"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-3"/>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="gameModeDescription"/>
		</block>
	</block>
	<block className="LocalWeatherDescription">
		<style>
			<width value="100%"/>
		</style>
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<bind name="watchDH" value="'gpName'; ['localWeatherEntity.localWeather.evChanged']; localWeatherEntity.localWeather.gpName"/>
		<bind name="watch" value="'weatherBulletsCount'; gpName == 'PCOW012_Night_Logic'			? 3 :
										gpName == 'PCOW013_1April_Hailstorm'	? 3 :
										gpName == 'PCOW014_1April_Cloudburst'	? 3 :
										gpName == 'PCOW015_1April_IceCrumbs'	? 0 :
										gpName == 'PCOW019_Fog_Logic'			? 3 :
										gpName == 'PCOW020_Snow_Logic'			? 3 :
										gpName == 'PCOW021_Downpour'			? 3 :
										gpName == 'PCOW023_Rain_Greece'			? 3
																				: 0"/>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="tr(toUpperCase('IDS_LOCAL_WEATHER_SHIP_PARAM_HEADER_' + gpName))"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginBottom value="14px"/>
				<leading value="-3"/>
				<alpha value="0.85"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="tr(toUpperCase('IDS_LOCAL_WEATHER_DESCRIPTION_' + gpName))"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="weatherBulletsCount; 'ListWithBulletsElement'; {_marginBottom: '12px', _bulletType: '-', _textClass: '$TextDefault19NM', _text: ('IDS_LOCAL_WEATHER_DESCRIPTION_ITEM_' + toUpperCase(gpName) + '_'), _bulletIndex: true, _textAlpha: 0.9}"/>
		</block>
	</block>
	<block className="SubmarineBattleDescription">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="'IDS_BATTLE_LOADING_SUBMARINE_INFO_HEADER'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="4; 'ListWithBulletsElement'; {_marginBottom: '12px', _textClass: '$TextDefault19NM', _textAlpha: 0.9, _text: 'IDS_BATTLE_LOADING_SUBMARINE_INFO_DESCRIPTION_', _bulletIndex: true}"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="substitute" value="6; null; tr('IDS_BATTLE_LOADING_SUBMARINE_DEEP_UP_TIP'); '_bg'"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="substitute" value="6; null; tr('IDS_BATTLE_LOADING_SUBMARINE_DEEP_DOWN_TIP'); '_bg'"/>
		</block>
	</block>
	<block className="TasksList">
		<style>
			<width value="500px"/>
		</style>
		<bind name="collectionDH" value="CC.task; 'primaryTasksCollection'; 'category.primary'"/>
		<bind name="collectionDH" value="CC.task; 'secondaryTasksCollection'; 'category.secondary'"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'headerTextPrimary'; 	(gameModeId == GameMode.PVE) ? 'IDS_PRIMARYHEADER' 	: 'IDS_PVP_PERSONAL_TASK'"/>
		<bind name="watch" value="'headerTextSecondary'; (gameModeId == GameMode.PVE) ? 'IDS_SECONDARYHEADER' 	: 'IDS_PVP_PERSONAL_TASK'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="primaryTasksCollection.length &gt; 0"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="4px"/>
				</style>
				<bind name="instance" value="'TasksHeader'; {_headerText: headerTextPrimary}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="collectionRepeatDH" value="CC.task; 'TaskItemScenario'; 'category.primary'; {}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="secondaryTasksCollection.length &gt; 0"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="4px"/>
				</style>
				<bind name="instance" value="'TasksHeader'; {_headerText: headerTextSecondary}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="collectionRepeatDH" value="CC.task; 'TaskItemScenario'; 'category.secondary'; {}"/>
			</block>
		</block>
	</block>
	<block className="TasksHeader">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="_headerText"/>
		</block>
	</block>
	<block className="TaskItemScenario">
		<bind name="dataRefDH" value="'taskEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'text'; []; taskEntity.task ? taskEntity.task.text : text"/>
		<bind name="watchDH" value="'type'; []; taskEntity.task ? taskEntity.task.progressType : type"/>
		<bind name="watchDH" value="'status'; ['taskEntity.task.evStatusChanged']; taskEntity.task ? taskEntity.task.status : status"/>
		<bind name="watch" value="'hasTimer'; (type == 2 || type == 3) &amp;&amp; taskEntity.timeout"/>
		<bind name="watchDH" value="'taskTime'; ['taskEntity.timeout.evTimeChanged']; hasTimer ? taskEntity.timeout.time : null"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleTimer"/>
		<bind name="watchDH" value="'battleTime'; ['battleDataEntity.battleTimer.evBattleTimeChanged']; battleDataEntity.battleTimer.battleTime"/>
		<bind name="watch" value="'timerValue'; taskTime ? taskTime - battleTime : 0"/>
		<bind name="timeFormat" value="timerValue; 'mm:ss'; 'countdownText'"/>
		<bind name="watch" value="'timeText'; hasTimer ? ' ' + countdownText : ''"/>
		<bind name="dataRefDH" value="'progress'; 'taskEntity.progress'"/>
		<bind name="watchDH" value="'progressValue'; ['progress.evChanged']; taskEntity.progress ? progress.value : progressValue"/>
		<bind name="watchDH" value="'progressMax'; ['progress.evChanged']; taskEntity.progress ?  progress.max : progressMax"/>
		<bind name="watch" value="'progressText'; 	type == 1 			? '&lt;h3&gt; ('+ progressValue + '/' + progressMax + ')&lt;/h3&gt;'  :
									type == 5 	? '&lt;h3&gt; ('+ progressValue + ')&lt;/h3&gt;'
																			: ''"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<marginBottom value="12px"/>
		</style>
		<bind name="watch" value="'taskText'; '&lt;body&gt;' + text + timeText + progressText + '&lt;/body&gt;'"/>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_task_status" type="native">
				<bind name="gotoAndStop!" value="status == 2		? 'success' :
								status == 0 ? 'not_started' :
								status == 1	? 'not_started'
																		: 'fail'"/>
			</block>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginLeft value="24px"/>
				<leading value="-3"/>
				<styleSheet value="h3{color: #9CBABA}"/>
			</style>
			<bind name="style" value="'alpha'; status == 3 || status == 2  ? 0.5 : 0.85"/>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="taskText"/>
		</block>
	</block>

	<!-- ship_management -->
	<block className="ShipManagementMainInset">
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="handleEventDH" value="'dockEntity.shipSelection.evViewedShipIdChanged'; 'viewedShipIdChanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; viewedShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watch" value="'isOwned'; ownShipEntity != null"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'carouselAreaHeightEntity'; CC.preference; 'ui.carousel.carouselAreaHeight'"/>
		<bind name="watchDH" value="'carouselAreaHeight'; ['carouselAreaHeightEntity.preference.evValueChanged']; Number(carouselAreaHeightEntity.preference.value)"/>
		<bind name="firstEntityDH" value="'featuresEntity'; CC.shipUniqueFeatures"/>
		<bind name="watchDH" value="'featuresList'; ['featuresEntity.shipUniqueFeatures.evChanged']; featuresEntity.shipUniqueFeatures.featuresList"/>
		<bind name="watchDH" value="'isSpecialPointsVisible'; []; featuresList.length &gt; 0"/>
		<bind name="soundOn" value="'addedToStage'; 'management'; 'dock_inset'"/>
		<bind name="watch" value="'previewModuleId'; userPrefs.previewModuleId"/>
		<bind name="action" value="'previewModuleId' + varChanged; 'setCompareData'; {moduleId: previewModuleId ? previewModuleId : null}"/>
		<bind name="action" value="'removedFromStage'; previewModuleId ? 'setUserPref' : null; {value: 0, name: 'previewModuleId'}"/>
		<bind name="action" value="'onLostTop';	previewModuleId ? 'setUserPref' : null; {value: 0, name: 'previewModuleId'}"/>
		<bind name="action" value="'delayedViewedShipIdChanged';	previewModuleId	? 'setUserPref'
																		: null; {value: 0, name: 'previewModuleId'}"/>
		<bind name="action" value="'isInFormation' + varChanged;	previewModuleId	? 'setUserPref'
																: null; {value: 0, name: 'previewModuleId'}"/>
		<bind name="action" value="'removedFromStage'; userPrefs.consumablesOrderCustomizationActive ? 'setUserPref'
																					: null; {value: false, name: 'consumablesOrderCustomizationActive'}"/>
		<bind name="action" value="'removedFromStage'; userPrefs.consumablesOrderCustomizationActive ? 'setConsumablesOrderCustomizationActivity'
																					: null; {isActive: false}"/>
		<bind name="watch" value="'showConsumableCustomization'; !isOwned || shipInfo.subtype == ShipTypes.AircraftCarrier"/>
		<bind name="action" value="'showConsumableCustomization' + varChanged;	userPrefs.consumablesOrderCustomizationActive &amp;&amp; showConsumableCustomization	? 'setUserPref'
																																				: null; {value: false, name: 'consumablesOrderCustomizationActive'}"/>
		<bind name="action" value="'showConsumableCustomization' + varChanged;	userPrefs.consumablesOrderCustomizationActive &amp;&amp; showConsumableCustomization	? 'setConsumablesOrderCustomizationActivity'
																																				: null; {isActive: false}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="!isBlurEnabled"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.3; 0.05; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
			<style>
				<marginTop value="-60px"/>
			</style>
			<bind name="instance" value="'BackgroundAnimatedSwitcher'; { _bgSymbol: 'url:../bg/nations_tree_v2.jpg' }"/>
		</block>
		<block>
			<bind name="visible" value="isBlurEnabled"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-60px"/>
			</style>
			<block className="mc_blurmap_medium" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.3; 0.05; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.3; 0.05; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<bind name="style" value="'backgroundColor'; SC.Ui_styles.SHARED_COLOR.MODAL_WINDOW"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<style>
				<position value="absolute"/>
				<top value="8px"/>
				<left value="8px"/>
				<width value="22px"/>
				<height value="22px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_question_mark_grey.png'"/>
			<bind name="sharedTooltip" value="'QuestionMarkIconOnShipManagmentScreenTooltip'; {}"/>
		</block>
		<bind name="var" value="{isManagementVisible: true}"/>
		<bind name="dispatch" value="'viewedShipIdChanged'; 'delayedViewedShipIdChanged'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.05"/>
		<bind name="lag" value="'lagAfterViewedShipIdChanged'; null; true; 0.4; 'delayedViewedShipIdChanged'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; null"/>
		<bind name="catch" value="'viewedShipIdChanged'; {isManagementVisible: false}"/>
		<bind name="catch" value="'lagAfterViewedShipIdChanged'; {isManagementVisible: true}"/>
		<bind name="var" value="{isScreenOpened: false}"/>
		<bind name="catch" value="'addedToStage'; {isScreenOpened: false}"/>
		<bind name="dispatch" value="'addedToStage'; 'delayedAddedToStage'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.1"/>
		<bind name="catch" value="'delayedAddedToStage'; {isScreenOpened: true}"/>
		<block>
			<bind name="appear" value="'viewedShipIdChanged'; 0; 0; {visible: 0}; {visible: 0}"/>
			<bind name="appear" value="'lagAfterViewedShipIdChanged'; 0; 0; {visible: 1}; {visible: 1}"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<styleClass value="$Fullsize"/>
			<style>
				<marginRight value="330px"/>
				<marginTop value="38px"/>
			</style>
			<bind name="style" value="'marginBottom'; carouselAreaHeight"/>
			<block>
				<bind name="visible" value="isManagementVisible"/>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<width value="100%"/>
					<height value="100%f"/>
					<itemHeight value="22px"/>
				</style>
				<bind name="controller" value="'lesta.unbound.controls.ControllerAutoScroll'"/>
				<bind name="event" value="'lagAfterViewedShipIdChanged'; instantScrollToFirstItem"/>
				<bind name="event" value="'addedToStage'; instantScrollToFirstItem"/>
				<block>
					<bind name="fade" value="isManagementVisible; isScreenOpened ? 0.2 : 0; {alpha: 0}; {alpha: 1}"/>
					<style>
						<width value="100%"/>
						<paddingTop value="720:0,1080:24ah"/>
					</style>
					<block>
						<style>
							<width value="50%"/>
							<marginLeft value="1280:12,1920:48aw"/>
							<marginRight value="1280:4,1920:24aw"/>
						</style>
						<block>
							<style>
								<width value="100%"/>
							</style>
							<bind name="style" value="'marginBottom'; isSpecialPointsVisible ? '24px' : 0"/>
							<bind name="instance" value="'ShipModulesLayout'; {}"/>
						</block>
						<block>
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'ShipSpecialPointsLayout'; isSpecialPointsVisible ? {} : null"/>
						</block>
					</block>
					<block>
						<style>
							<width value="50%"/>
							<marginLeft value="1280:4,1920:24aw"/>
							<marginRight value="1280:12,1920:48aw"/>
						</style>
						<bind name="instance" value="'CommonMiscLayout'; { shipSubType: shipInfo.subtype }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipModulesLayout">
		<style>
			<width value="100%"/>
		</style>
		<block className="ShipModulesLayout" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="ShipSpecialPointsLayout">
		<style>
			<width value="100%"/>
		</style>
		<block className="ShipSpecialPointsLayout" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="CommonMiscLayout">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; viewedShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'isCustomConsumablesOrder'; ['shipEntity.ship.consOrderChanged']; shipEntity.ship.hasCustomConsOrder"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; viewedShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watch" value="'isOwned'; ownShipEntity != null"/>
		<bind name="primaryEntityDH" value="'featureEntity_14'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[14]"/>
		<bind name="watchDH" value="'feature_14'; ['featureEntity_14.accountFeature.evStateChanged']; featureEntity_14.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_14"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 14}"/>
		<bind name="collectionDH" value="CC.ownShip; 'playerShips'"/>
		<bind name="watch" value="'hideSignalsTag'; (ownShipInfo.tagsMask &amp; (1 &lt;&lt; SC.Ships.SHIP_TAG.HIDE_SIGNALS)) != 0 &amp;&amp; playerShips.length &gt; 0 &amp;&amp; viewedShipId &gt; 0"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'isOrderCustomizationActive'; !!userPrefs.consumablesOrderCustomizationActive"/>
		<bind name="watch" value="'isOrderCustomizationVisible'; isOwned &amp;&amp; shipSubType != ShipTypes.AircraftCarrier"/>
		<bind name="collectionDH" value="CC.visualSlotData; 'weaponCollection'; 'byAvatarId.' + 0"/>
		<bind name="collectionDH" value="CC.visualSlotData; 'airCarrierWeaponsCollection'; 'myAirCarrierWeapons'"/>
		<bind name="watch" value="'selectedWeaponId'; airCarrierWeaponsCollection[0].id"/>
		<bind name="catch" value="'evWeaponItemClicked'"/>
		<bind name="catch" value="'airCarrierWeaponsCollection' + varChanged; {selectedWeaponId: airCarrierWeaponsCollection ? airCarrierWeaponsCollection[0].id : 0}"/>
		<bind name="entityDH" value="'selectedSquadronEntity'; selectedWeaponId"/>
		<bind name="watchDH" value="'selectedSquadronType';	['']; selectedSquadronEntity.visualSlotData.squadType"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged']; resourceEntity.accountResource.operationsLocked"/>
		<bind name="watchDH" value="'isInFormation';				['shipEntity.ownShip.evUpdateLock']; shipEntity.ownShip.isInFormation"/>
		<bind name="watchDH" value="'isLocked';					['shipEntity.ownShip.evUpdateLock']; shipEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isNeedRepair';				['shipEntity.ownShip.evUpdateDockState']; shipEntity.ownShip.isNeedRepair"/>
		<bind name="firstEntityDH" value="'fireModeSlotEntity'; CC.fireModeSlot"/>
		<bind name="watchDH" value="'isSwitchableFireMode'; ['fireModeSlotEntity.fireModeSlot.evUpdated']; fireModeSlotEntity.fireModeSlot.isSwitchable"/>
		<bind name="watch" value="'isActionsAvailable'; !(operationsAccountLocked || isInFormation || isLocked || isNeedRepair)"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="var" value="{isSoundOverDelayEnabled: false}"/>
		<bind name="var" value="{isStartDragConsumableSlotItem: false}"/>
		<bind name="watch" value="'isActiveDragging'; isOrderCustomizationActive &amp;&amp; isStartDragConsumableSlotItem"/>
		<bind name="dispatch" value="'mouseUp'; 'enableMouse'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.1"/>
		<bind name="catch" value="'mouseUp';		{isSoundOverDelayEnabled : true}"/>
		<bind name="catch" value="'enableMouse';	{isSoundOverDelayEnabled : false}"/>
		<bind name="catch" value="'startDragging';	{isStartDragConsumableSlotItem: true}"/>
		<bind name="catch" value="'stopDragging';	{isStartDragConsumableSlotItem: false}"/>
		<block type="text">
			<styleClass value="$ManagementBlockHeader"/>
			<bind name="text" value="'IDS_SHIP_MANAGEMENT_WEAPONS_BLOCK_HEADER'"/>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$ManagementBlock"/>
			<block>
				<block>
					<bind name="repeat" value="weaponCollection; 'WeaponSlotItem'; {_selectedWeaponId: selectedWeaponId}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="!!selectedSquadronEntity"/>
				<styleClass value="$ManagementSubBlock"/>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
				<block>
					<styleClass value="$ManagementBlock"/>
					<block>
						<styleClass value="$MiddleAlignedAbsolutely"/>
						<bind name="repeat" value="weaponCollection; 'WeaponSlotTabPin'; {_selectedWeaponId: selectedWeaponId}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<block>
							<bind name="collectionRepeatDH" value="CC.visualSlotData; 'WeaponSlotItem'; 'byAvatarIdAndSquadType.' + 0 + '_' + selectedSquadronType; {_selectedWeaponId: selectedWeaponId}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="collectionRepeatDH" value="CC.equipmentSlot; 'ConsumableSlotItem'; 'squadronAbilitySlotsBySquadType.' + selectedSquadronType; {}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block type="text">
						<bind name="visible" value="airCarrierWeaponsCollection.length &gt; 0"/>
						<style>
							<marginTop value="32px"/>
							<alpha value="0.75"/>
						</style>
						<styleClass value="$TextDefaultNM"/>
						<bind name="text" value="tr('IDS_SHIP_MANAGEMENT_' + toUpperCase(selectedSquadronType) + '_SUBBLOCK_DESCR')"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-1px"/>
			</style>
			<styleClass value="$ManagementBlockBottomMargin"/>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$ManagementBlockHeader"/>
				<bind name="text" value="'IDS_SHIP_MANAGEMENT_CONSUMABLES_BLOCK_HEADER'"/>
			</block>
			<block>
				<bind name="visible" value="isOrderCustomizationVisible"/>
				<style>
					<marginRight value="2px"/>
				</style>
				<bind name="action" value="'isOrderCustomizationActive' + varChanged; 'setConsumablesOrderCustomizationActivity'; {isActive: isOrderCustomizationActive}"/>
				<bind name="instance" value="'UserPrefsSwitchWithLabel';	{	_userPrefName: 'consumablesOrderCustomizationActive',
															_tooltipData:	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																				_text: !!userPrefs['consumablesOrderCustomizationActive']	? 'IDS_CONSUMABLES_ORDER_SWITCH_OFF_TOOLTIP'
																																			: 'IDS_CONSUMABLES_ORDER_SWITCH_ON_TOOLTIP' },
															_label: 'IDS_CONSUMABLES_ORDER_SWITCH_LABEL',
															_enabled: true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDividerTwoPx">
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$ManagementBlock"/>
			<bind name="soundOn" value="'mouseUp'; isActiveDragging ? 'click' : null; 'drag_n_drop'"/>
			<block>
				<bind name="soundOn" value="'mouseOver'; isOrderCustomizationActive &amp;&amp; !isSoundOverDelayEnabled	? 'over' : null; 'drag_n_drop'"/>
				<bind name="collectionRepeatDH" value="CC.equipmentSlot; 'ConsumableSlotItem'; 'bySlotType.' + SC.Ships.SHIP_SLOT_TYPES.ABILITY + '.sortingByCommandId'; {_isStartDragConsumableSlotItem: isStartDragConsumableSlotItem}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="fade" value="isOrderCustomizationActive; 0.15; {height: 0}; {height: 32}; {height: 0}; 2"/>
				<style>
					<width value="1px"/>
					<height value="0"/>
				</style>
			</block>
			<block>
				<bind name="fade" value="isOrderCustomizationActive &amp;&amp; !isCustomConsumablesOrder; 0.15; {ubScaleY: 0}; {ubScaleY: 1}; {ubScaleY: 0}; 2"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<bind name="fade" value="isOrderCustomizationActive &amp;&amp; !isCustomConsumablesOrder; 0.12; {alpha: 0}; {alpha: 0.75}; {alpha: 0}; 2; isOrderCustomizationActive ? 0.15 : 0"/>
					<style>
						<width value="100%"/>
						<textAlign value="center"/>
						<alpha value="0"/>
						<marginRight value="1280:4,1920:24aw"/>
						<marginLeft value="1280:4,1920:24aw"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="'IDS_CONSUMABLES_ORDER_CUSTOMIZATION_TIP'"/>
				</block>
			</block>
			<block>
				<bind name="fade" value="isOrderCustomizationActive &amp;&amp; isCustomConsumablesOrder; 0.15; {height: 0}; {height: 4}; {height: 0}; 2"/>
				<style>
					<width value="1px"/>
					<height value="0"/>
				</style>
			</block>
			<block>
				<bind name="fade" value="isOrderCustomizationActive &amp;&amp; isCustomConsumablesOrder; 0.15; {ubScaleY: 0}; {ubScaleY: 1}; {ubScaleY: 0}; 2"/>
				<style>
					<height value="0"/>
				</style>
				<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
				<bind name="action" value="'click'; 'resetSlotsKeyBinding'; {}"/>
				<bind name="soundSet" value="'button_secondary'"/>
				<block>
					<bind name="fade" value="isOrderCustomizationActive &amp;&amp; isCustomConsumablesOrder; 0.13; {alpha: 0}; {alpha: 1}; {alpha: 0}; 2; isOrderCustomizationActive ? 0.15 : 0"/>
					<style>
						<margin value="-8px"/>
					</style>
					<block className="button_dock_bg" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="gotoAndStop!" value="'down'"/>
						<bind name="transition" value="(rollOver &amp;&amp; !mouseDown); 0.07; {alpha: 0.4}; {alpha: 0.9}"/>
					</block>
					<block type="text">
						<bind name="transition" value="(rollOver &amp;&amp; !mouseDown); 0.07; {alpha: 0.75}; {alpha: 0.9}"/>
						<style>
							<margin value="8px"/>
							<alpha value="0.75"/>
						</style>
						<styleClass value="$TextDefaultNM"/>
						<bind name="text" value="'IDS_BUTTON_REVERT_CONSUMABLE_ORDER_CHANGES'"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-1px"/>
			</style>
			<styleClass value="$ManagementBlockBottomMargin"/>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'SignalsManagementBlockWrapper'; (!hideSignalsTag &amp;&amp; feature_14 != 'locked') ? {} : null"/>
		</block>
	</block>
	<block className="SignalsManagementBlockWrapper">
		<style>
			<width value="100%"/>
		</style>
		<block className="SignalsManagementBlock" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="WeaponSlotTabPin">
		<bind name="dataRefDH" value="'weaponSlotEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'weaponType'; ['weaponSlotEntity.visualSlotData.evUpdated']; weaponSlotEntity.visualSlotData.weaponType"/>
		<bind name="watch" value="'isSlotInteractive'; weaponType == SC.Ships.SHIP_WEAPON_TYPES.AIRPLANES"/>
		<bind name="watch" value="'isSlotSelected'; _selectedWeaponId == weaponSlotEntity.id"/>
		<bind name="firstEntityDH" value="'fireModeSlotEntity'; CC.fireModeSlot"/>
		<bind name="watchDH" value="'isFireModeSlot'; []; weaponSlotEntity.id == fireModeSlotEntity.id"/>
		<bind name="watchDH" value="'isSwitchableFireMode'; []; fireModeSlotEntity.fireModeSlot.isSwitchable"/>
		<bind name="watch" value="'isHideFireModeSlot'; isFireModeSlot ? isSwitchableFireMode : true"/>
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<styleClass value="$ManagementSlotItem"/>
		<style>
			<marginTop value="-24px"/>
		</style>
		<bind name="visible" value="isHideFireModeSlot"/>
		<block>
			<bind name="visible" value="isSlotInteractive &amp;&amp; isSlotSelected"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<top value="-12px"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
			</block>
			<block>
				<style>
					<width value="22px"/>
					<height value="12px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/tabs/tabs_pin_vert' + (isBlurOptionEnabled ? '' : '_noblur') + '.png'"/>
			</block>
		</block>
	</block>

	<!-- ship_management_elements -->
	<block className="ModuleElementModalWindow">
		<bind name="primaryEntityDH" value="'moduleEntity'; CC.module; _modulePK"/>
		<bind name="watchDH" value="'moduleInfo'; ['moduleEntity.module.evUpdated']; moduleEntity.module"/>
		<bind name="primaryEntityDH" value="'moduleExplorePriceEntity'; CC.priceComponent; moduleInfo.id + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'moduleExplorePrice'; ['moduleExplorePriceEntity.priceComponent.evChanged']; moduleExplorePriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'moduleBuyPriceEntity'; CC.priceComponent; moduleInfo.id + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'moduleBuyPrice'; ['moduleBuyPriceEntity.priceComponent.evChanged']; moduleBuyPriceEntity.priceComponent"/>
		<bind name="watchDH" value="'isExplored'; ['moduleEntity.module.evUpdated']; moduleEntity.module.isExplored"/>
		<bind name="watch" value="'priceInfo'; isExplored ? moduleBuyPrice : moduleExplorePrice"/>
		<bind name="watch" value="'headerText'; toUpperCase('IDS_'+ moduleInfo.name)"/>
		<bind name="watch" value="'subheaderText'; moduleInfo.subTypeIDS != '' ? moduleInfo.subTypeIDS : toUpperCase('IDS_MODULE_TYPE' + moduleInfo.type)"/>
		<bind name="watch" value="'iconPath';	'url:../modules/icon_module' +
								moduleInfo.type +
								(isExplored						? '_researched'
																: '_not_owned') +
								'.png'"/>
		<block className="ModalWindowSystemExpendableIconWithHeaderAndSubheader" type="ublock">
			<bind name="build!" value="{	_headerIconType:	'ModalWindowSystemModuleIcon',
						_imageWidth:		60,
						_imageHeight:		60,
						_maxWidth:			_maxWidth,
						_headerText:		headerText,
						_subheaderText:		subheaderText,
						_unifiedStatus:		SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
						_data:				{ moduleInfoType:	moduleInfo.type,
											  isExplored:		isExplored } }"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'ModuleTooltip'; {_modulePK: _modulePK, _noMouseInstructions: true}"/>
		</block>
		<block className="icon_discount" type="native">
			<bind name="visible" value="priceInfo.finalPrice != priceInfo.basePrice"/>
			<bind name="tooltip" value="'DiscountTooltip'; { priceInfo: priceInfo}"/>
			<style>
				<position value="absolute"/>
				<left value="45px"/>
				<marginTop value="4px"/>
			</style>
			<bind name="gotoAndStop!" value="'normal'"/>
		</block>
	</block>

	<!-- ship_research -->
	<block className="ShipResearchMainInset">
		<bind name="stageSize"/>
		<styleClass value="$Fullsize"/>
		<block className="ShipResearchMainInset" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>

	<!-- ship_select -->
	<block className="PortMainInset">
		<bind name="collectionDH" value="CC.ownShip; 'playerShips'"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="firstEntityDH" value="'realmConstantsEntity'; CC.realmConstants"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; playerShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity2'; CC.ship; playerShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity2.ship.evUpdate', 'shipEntity2.ship.evCurrentSkinChanged', 'shipEntity2.ship.evFlagNameWithCrewChanged']; shipEntity2.ship"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; shipEntity.ownShip.crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watchDH" value="'isNeedRepair';	['shipEntity.ownShip.evUpdateDockState'];	shipEntity.ownShip.isNeedRepair"/>
		<bind name="watchDH" value="'isLocked';		['shipEntity.ownShip.evUpdateLock'];		shipEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';	['shipEntity.ownShip.evUpdateLock'];		shipEntity.ownShip.isInFormation"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'carouselAreaHeightEntity'; CC.preference; 'ui.carousel.carouselAreaHeight'"/>
		<bind name="watchDH" value="'carouselAreaHeight'; ['carouselAreaHeightEntity.preference.evValueChanged']; Number(carouselAreaHeightEntity.preference.value)"/>
		<styleClass value="$Fullsize"/>
		<bind name="style" value="'marginBottom'; carouselAreaHeight + 29"/>
		<bind name="soundOn" value="'addedToStage'; 'main'; 'dock_inset'"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'selectedBattleType'; selectedBattleTypes[0].battleType.type"/>
		<bind name="watch" value="'isClanBattle'; selectedBattleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<width value="900px"/>
				<bottom value="0px"/>
				<align value="center"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'ShipStatusDockHeader'; playerShips.length == 0								? { _texts: [{_paragraphText: tr('IDS_NO_SHIPS') }] } :
													isNeedRepair 										? { _texts: [{_paragraphText: tr('IDS_SHIP_NEEDS_SERVICE_MESSAGE') }] } :
													isInFormation &amp;&amp; isCommander						? { _texts: [{_paragraphText: tr('IDS_SHIP_IN_DIVISION_MESSAGE_COMMANDER_0')}, {_paragraphText: tr('IDS_SHIP_IN_FORMATION_MESSAGE_1') }] } :
													isInFormation 										? { _texts: [{_paragraphText: tr('IDS_SHIP_IN_DIVISION_MESSAGE_NOT_COMMANDER_0')}, {_paragraphText: tr('IDS_SHIP_IN_FORMATION_MESSAGE_1') }] } :
													isLocked 											? { _texts: [{_paragraphText: tr('IDS_SHIP_IN_BATTLE_MESSAGE') }] } :
													isClanBattle &amp;&amp; !canCreate &amp;&amp; !divisionDataEntity	? { _texts: [{_paragraphText: tr('IDS_CLAN_BATTLES_ROLE_NOT_ALLOWED_TO_START_CLAN_BATTLE') }] } :
													isClanBattle &amp;&amp; !divisionDataEntity					? { _texts: [{_paragraphText: tr('IDS_NOT_IN_DIVISION_FOR_CLAN_BATTLE_WITH_TRANSFER') }] }
																										: null"/>
			</block>
			<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
			<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
			<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
			<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
			<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
			<bind name="watchDH" value="'role'; 	 ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
			<bind name="watch" value="'canCreate'; role == 'executive_officer' || role == 'recruitment_officer' || role == 'commander'"/>
			<block>
				<bind name="visible" value="isClanBattle &amp;&amp; canCreate &amp;&amp; !divisionDataEntity"/>
				<style>
					<marginTop value="12px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '160px',
												_enabled: true,
												_action: 'DockProxy.createDivision',
												_actionParams: {battleType: SC.Common.BATTLE_TYPES.CLAN_BATTLE},
												_label: 'IDS_CREATE_DIVISION'}"/>
			</block>
			<block>
				<bind name="visible" value="isNeedRepair"/>
				<style>
					<marginTop value="9px"/>
				</style>
				<bind name="instance" value="'ShipStatusDock'; isNeedRepair ? { _shipId: playerShipId } : null"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<top value="38px"/>
				<height value="100%"/>
			</style>
			<block className="LeftSideBanners" type="ublock">
				<style>
					<height value="100%"/>
				</style>
				<bind name="eventToUB2" value="'startShow'"/>
				<bind name="eventToUB2" value="'startHide'"/>
				<bind name="build!" value="{}"/>
			</block>
		</block>
	</block>
	<block className="ShipPreview">
		<styleClass value="$FullsizeAbsolute"/>
		<block className="ShipPreview" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="NewbieGifts">
		<bind name="collectionDH" value="CC.giftCounterComponent; 'giftShipEntitiesList'"/>
		<bind name="entityDH" value="'giftShipEntity'; giftShipEntitiesList[0].id"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; viewedShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'isGiftShipAvailable'; ['giftShipEntity.giftCounterComponent.evChanged']; giftShipEntity.giftCounterComponent.canClaim"/>
		<bind name="watch" value="'currentBattleCount'; giftShipEntity.giftCounterComponent.currentBattleCount"/>
		<bind name="watch" value="'totalBattleCount'; giftShipEntity.giftCounterComponent.totalBattleCount"/>
		<bind name="watch" value="'battlesLeft'; totalBattleCount-currentBattleCount"/>
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="action" value="'addedToStage'; 'selectShip'; {shipId: giftShipEntity.ship.id}"/>
		<bind name="action" value="'removedFromStage'; isGiftShipAvailable ? '' : 'selectShip'; {shipId: playerShipId}"/>
		<bind name="request" value="'lagAfterAddedToStage'; isGiftShipAvailable ? 'enterNewbieGiftsClaim' : ''"/>
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<align value="bottom"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
			<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
			<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
			<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
			<block>
				<style>
					<width value="1200px"/>
					<align value="center"/>
					<backgroundImage value="url:../bg/shadow_half_sphere_1200.png"/>
				</style>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block className="BlurMapCustom">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="mc_blurmap_half_sphere" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$Fullsize"/>
						<bind name="blurMap" value="0"/>
					</block>
				</block>
				<block type="text">
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<styleClass value="$TextDefault25NM"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<bind name="text" value="isGiftShipAvailable ? 'IDS_NEWBIE_GIFTS_CHOOSE_SHIP'
												: tr(subst('IDS_SUBST_NEWBIE_GIFTS_CONDITION_TO_GET_SHIP', [], {battleCount: battlesLeft}, battlesLeft))"/>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<bind name="collectionRepeatDH" value="CC.giftCounterComponent; 'NewbieGiftsShipCard'; ''; {_selectedId: viewedShipId}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<style>
						<marginTop value="40px"/>
						<marginBottom value="32px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_width: '140px',
													_enabled: true,
													_focusIndex: 1,
													_defaultFocused: true,
													_request: isGiftShipAvailable ? 'giftShipGettingConfirm' : null,
													_requestParams: isGiftShipAvailable ? { shipId: viewedShipId } : null,
													_action: isGiftShipAvailable ? null : 'navigateTo',
													_actionParams: isGiftShipAvailable ? null : { route: SC.Ui_windows.ROUTE.MAIN },
													_label: isGiftShipAvailable ? toUpperCase(tr('IDS_NEWBIE_GIFTS_GET_GIFT_SHIP_SHOT')) : toUpperCase(tr('IDS_TO_DOCK'))}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="NewbieGiftsShipCard">
		<bind name="dataRefDH" value="'shipEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'shipId'; ['shipEntity.ship.evUpdate']; shipEntity.ship.id"/>
		<bind name="action" value="'click'; 'selectShip'; {shipId: shipId}"/>
		<style>
			<marginRight value="16px"/>
		</style>
		<block className="NewbieGiftsShipSlot" type="ublock">
			<bind name="build!" value="{ _shipEntityId: shipId, _selectedId: _selectedId }"/>
		</block>
	</block>

	<!-- ship_status_widget -->
	<block className="ShipStatusDock">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; _shipId"/>
		<bind name="watchDH" value="'creditsDeficit';	['shipEntity.ownShip.evCreditsDeficitChanged'];		shipEntity.ownShip.creditsDeficit"/>
		<bind name="watchDH" value="'isNeedRepair';		['shipEntity.ownShip.evUpdateDockState'];			shipEntity.ownShip.isNeedRepair"/>
		<bind name="watchDH" value="'costRepair';		['shipEntity.ownShip.evUpdateDockState'];			shipEntity.ownShip.costRepair"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0.3; {alpha: 0}; {alpha: 1}"/>
		<styleClass value="$MiddleAligned"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-64px"/>
				<marginRight value="-64px"/>
			</style>
			<block className="BlurMapCustom">
				<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="isBlurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="300px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<marginBottom value="12px"/>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<alpha value="0.9"/>
						<leading value="-2"/>
						<marginRight value="8px"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<default_text value="IDS_SERVICE_COST"/>
				</block>
				<block>
					<style>
						<marginTop value="-6px"/>
					</style>
					<bind name="instance" value="'PriceTag'; {priceInfo: {finalPrice: costRepair, currency: SC.Common.CURRENCIES.CREDITS}}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDividerTwoPx">
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="!(creditsDeficit &gt; 0)"/>
			<bind name="instance" value="'DefaultButton';	isNeedRepair &amp;&amp; (creditsDeficit &lt;= 0)	?	{	_width: '200px',
																							_label: 'IDS_PURCHASE_BUTTON',
																							_enabled: true,
																							_action: 'serveShip',
																							_actionParams: {shipId: _shipId},
																						}
																					: null"/>
		</block>
		<block>
			<bind name="visible" value="creditsDeficit &gt; 0"/>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<marginRight value="8px"/>
				</style>
				<bind name="instance" value="'StatusLine'; {_text: 'IDS_NOT_ENOUGH', _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE}"/>
			</block>
			<block>
				<style>
					<marginTop value="-6px"/>
				</style>
				<bind name="instance" value="'PriceTag'; {priceInfo: {finalPrice: creditsDeficit, currency: SC.Common.CURRENCIES.CREDITS} }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipStatusDockHeader">
		<bind name="appear" value="'addedToStage'; 0.15; 0.3; {alpha: 0}; {alpha: 1}"/>
		<styleClass value="$MiddleAligned"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="700px"/>
				<marginBottom value="-10px"/>
			</style>
			<block>
				<bind name="name" value="'ShipStatusDockHeaderId'"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_texts; 'RepeatParagraphItem'; {	_maxWidth: 700, _marginBottom: '4px', _class: '$DockShipStatus',
															_middleAligned: true, _textAlign: 'center', _toUpperCase: true}"/>
			</block>
		</block>
	</block>

	<!-- ship_ttx_panel -->
	<block className="ShipTTXPanelDock">
		<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.PORT"/>
		<bind name="watchDH" value="'isInPort'; ['routeEntity.route.evIsActiveChanged']; routeEntity.route.isActive"/>
		<bind name="watchDH" value="'currentPortSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
		<bind name="watchDH" value="'prevPortSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.prevActiveChild"/>
		<bind name="watchDH" value="'availablePortSubroutes'; ['routeEntity.route.evChildrenChanged']; routeEntity.route.children"/>
		<bind name="primaryEntityDH" value="'routeEntityisInPreview'; CC.route; SC.Ui_windows.ROUTE.SHIP_PREVIEW"/>
		<bind name="watchDH" value="'isInPreview'; ['routeEntityisInPreview.route.evIsActiveChanged']; routeEntityisInPreview.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInShipyard'; CC.route; SC.Ui_windows.ROUTE.SHIPYARD"/>
		<bind name="watchDH" value="'isInShipyard'; ['routeEntityisInShipyard.route.evIsActiveChanged']; routeEntityisInShipyard.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInResearch'; CC.route; SC.Ui_windows.ROUTE.RESEARCH"/>
		<bind name="watchDH" value="'isInResearch'; ['routeEntityisInResearch.route.evIsActiveChanged']; routeEntityisInResearch.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInRepairDock'; CC.route; SC.Ui_windows.ROUTE.REPAIR_DOCK"/>
		<bind name="watchDH" value="'isInRepairDock'; ['routeEntityisInRepairDock.route.evIsActiveChanged']; routeEntityisInRepairDock.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInCrewManagement'; CC.route; SC.Ui_windows.ROUTE.CREW_MANAGEMENT"/>
		<bind name="watchDH" value="'isInCrewManagement'; ['routeEntityisInCrewManagement.route.evIsActiveChanged']; routeEntityisInCrewManagement.route.isActive"/>
		<bind name="firstEntityDH" value="'repairDockDataEntity'; CC.repairDockData"/>
		<bind name="watchDH" value="'isRepairingInProgress'; ['repairDockDataEntity.repairDockData.evIsRepairingInProgressChanged']; repairDockDataEntity.repairDockData.isRepairingInProgress"/>
		<bind name="watch" value="'isRepairDockUiVisible'; isInRepairDock &amp;&amp; !isRepairingInProgress"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isCrewModalWindow'; isIn('ModalWindowCrewManagement', windowQueue)"/>
		<bind name="watch" value="'isEconomicsModalWindow'; isIn('ModalWindowEconomicsManagement', windowQueue)"/>
		<bind name="watch" value="'isModalWindowInBlackList';	isIn('ModalWindowAlmanacs', windowQueue)				||
												isIn('ModalWindowSnowflakesTakeBonuses', windowQueue)	||
												isIn('ModalWindowArcEventMainScreen', windowQueue)		||
												isIn('ModalWindowArcEventChooseSide', windowQueue)		||
												isIn('ModalWindowArcEventConfirmSide', windowQueue)		||
												isIn('ModalWindowArcEventFinish', windowQueue)			||
												isIn('ModalWindowArcEventLore', windowQueue)			||
												(isIn('ModalWindowBattlePassMain', windowQueue) &amp;&amp; !isInPreview)"/>
		<bind name="watch" value="'currentShipId';	viewedShipId"/>
		<bind name="var" value="{ verifiedShipId: currentShipId }"/>
		<bind name="catch" value="'changeVerifiedShipId'"/>
		<bind name="dispatch" value="'currentShipId'+varChanged; 'changeVerifiedShipId'; {verifiedShipId: currentShipId ? currentShipId : verifiedShipId}"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; verifiedShipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; verifiedShipId"/>
		<bind name="watchDH" value="'crewId';		['shipOwnEntity.ownShip.evCrewChanged'];	shipOwnEntity.ownShip.crewId"/>
		<bind name="watchDH" value="'ownShipExp';	['shipOwnEntity.ownShip.evUpdateConfig'];	shipOwnEntity.ownShip.exp"/>
		<bind name="collectionDH" value="CC.ecoBoost; 'preinstalledBoosts'; 'availableToUser.' + 'byType.' + SC.Common.ECOBOOST_TYPES.COMMON + '.preinstalled'"/>
		<bind name="collectionDH" value="CC.portBuff; 'portBuffCollection'"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isLocked"/>
		<bind name="watch" value="'isOwned'; currentShipId &amp;&amp; shipOwnEntity != null"/>
		<bind name="primaryEntityDH" value="'metashopRouteEntity'; CC.route; SC.Ui_windows.ROUTE.PORTAL"/>
		<bind name="watchDH" value="'isInMetashop'; ['metashopRouteEntity.route.evIsActiveChanged']; metashopRouteEntity.route.isActive"/>
		<bind name="watchDH" value="'metashopShowTTX'; ['metashopRouteEntity.dataComponent.evDataChanged']; metashopRouteEntity.dataComponent.data.showTTX"/>
		<bind name="watch" value="'shipParamsVisibility'; ((SC.Ui_windows.ROUTE.TTX_VISIBLE.indexOf(currentPortSubroute) &gt;= 0) || isInPreview || (isInMetashop &amp;&amp; metashopShowTTX) || isRepairDockUiVisible || isInCrewManagement) &amp;&amp; !isModalWindowInBlackList"/>
		<bind name="primaryEntityDH" value="'shipComponentEntity'; CC.shipComponent; verifiedShipId"/>
		<bind name="watch" value="'isShipShardsBlockVisible'; isRepairDockUiVisible &amp;&amp; shipComponentEntity != null"/>
		<bind name="primaryEntityDH" value="'researchExpNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.RESEARCH_EXP"/>
		<bind name="primaryEntityDH" value="'researchExpRepeatNewTip';	CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.RESEARCH_EXP_REPEAT"/>
		<bind name="primaryEntityDH" value="'crewHasCrewNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CREW_HAS_CREW"/>
		<bind name="primaryEntityDH" value="'crewHasCrewRepeatNewTip';	CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CREW_HAS_CREW_REPEAT"/>
		<bind name="primaryEntityDH" value="'crewNoCrewNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CREW_NO_CREW"/>
		<bind name="primaryEntityDH" value="'crewNoCrewRepeatNewTip';	CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.CREW_NO_CREW_REPEAT"/>
		<bind name="primaryEntityDH" value="'portBuffNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.PORT_BUFF_FOR_HALLOWEEN"/>
		<bind name="watchDH" value="'isResearchExpNewTipNewTipActive';	['researchExpNewTip.newGuidingTip.evChanged']; 	 		researchExpNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'isResearchExpRepeatNewTipActive';	['researchExpRepeatNewTip.newGuidingTip.evChanged']; 	researchExpRepeatNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'isCrewHasCrewNewTipActive';		 	['crewHasCrewNewTip.newGuidingTip.evChanged'];			crewHasCrewNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'isCrewHasCrewRepeatNewTipActive';	['crewHasCrewRepeatNewTip.newGuidingTip.evChanged'];	crewHasCrewRepeatNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'isCrewNoCrewNewTipActive';		 	['crewNoCrewNewTip.newGuidingTip.evChanged'];			crewNoCrewNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'isCrewNoCrewRepeatNewTipActive'; 	['crewNoCrewRepeatNewTip.newGuidingTip.evChanged'];		crewNoCrewRepeatNewTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'isPortBuffNewTipActive'; 			['portBuffNewTip.newGuidingTip.evChanged'];				portBuffNewTip.newGuidingTip.isActive"/>
		<bind name="watch" value="'researchTipId';	isResearchExpNewTipNewTipActive ? SC.Context_guiding_tip.TIP_TYPE.RESEARCH_EXP :
									isResearchExpRepeatNewTipActive ? SC.Context_guiding_tip.TIP_TYPE.RESEARCH_EXP_REPEAT
																	: SC.Context_guiding_tip.TIP_TYPE.NONE"/>
		<bind name="watch" value="'crewTipId';	isCrewHasCrewNewTipActive 		? SC.Context_guiding_tip.TIP_TYPE.CREW_HAS_CREW :
								isCrewHasCrewRepeatNewTipActive ? SC.Context_guiding_tip.TIP_TYPE.CREW_HAS_CREW_REPEAT :
								isCrewNoCrewNewTipActive 		? SC.Context_guiding_tip.TIP_TYPE.CREW_NO_CREW :
								isCrewNoCrewRepeatNewTipActive 	? SC.Context_guiding_tip.TIP_TYPE.CREW_NO_CREW_REPEAT 
																: SC.Context_guiding_tip.TIP_TYPE.NONE "/>
		<bind name="watch" value="'portBuffTipId'; SC.Context_guiding_tip.TIP_TYPE.PORT_BUFF_FOR_HALLOWEEN "/>
		<bind name="watch" value="'pointerOffset'; isCrewNoCrewNewTipActive || isCrewNoCrewRepeatNewTipActive ? 150 : 0"/>
		<bind name="watch" value="'isResearchNewTipActive'; researchTipId != SC.Context_guiding_tip.TIP_TYPE.NONE"/>
		<bind name="watch" value="'isCrewBlockVisible';	isOwned &amp;&amp;
										(feature_13 != 'locked') &amp;&amp;
										!isInShipyard &amp;&amp;
										!isCrewModalWindow &amp;&amp;
										!isInMetashop"/>
		<bind name="watch" value="'isCrewNewTipActive'; crewTipId != SC.Context_guiding_tip.TIP_TYPE.NONE &amp;&amp; isCrewBlockVisible"/>
		<bind name="watch" value="'isTTXpanelVisible'; shipParamsVisibility &amp;&amp; currentShipId"/>
		<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'excursionOffTag'; (shipInfo.tagsMask &amp; (1 &lt;&lt; SC.Ships.SHIP_TAG.EXCURSION_OFF)) != 0"/>
		<bind name="watch" value="'excursionOff'; 	(isOwned &amp;&amp; isLocked) ||
									excursionOffTag ||
									isCrewModalWindow ||
									isEconomicsModalWindow ||
									((currentPortSubroute != SC.Ui_windows.ROUTE.MAIN) &amp;&amp; !isInPreview &amp;&amp; !isInMetashop)"/>
		<bind name="watch" value="'expandUnavailable';	currentPortSubroute == SC.Ui_windows.ROUTE.MANAGEMENT ||
										currentPortSubroute == SC.Ui_windows.ROUTE.RESEARCH ||
										isInShipyard ||
										isCrewModalWindow ||
										isEconomicsModalWindow"/>
		<bind name="watch" value="'isExpanded';	expandUnavailable									? true :
								currentPortSubroute == SC.Ui_windows.ROUTE.EXTERIOR ? (userPrefs.shipPanelExpandedOnExteriors == null)	? false
																																		: userPrefs.shipPanelExpandedOnExteriors :
								(userPrefs.shipPanelExpanded == null)				? true
																					: userPrefs.shipPanelExpanded"/>
		<params>
			<param name="name" value="panelShipStats"/>
		</params>
		<bind name="primaryEntityDH" value="'carouselAreaHeightEntity'; CC.preference; 'ui.carousel.carouselAreaHeight'"/>
		<bind name="watchDH" value="'carouselAreaHeight'; ['carouselAreaHeightEntity.preference.evValueChanged']; Number(carouselAreaHeightEntity.preference.value)"/>
		<bind name="primaryEntityDH" value="'featureEntity_11'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[11]"/>
		<bind name="watchDH" value="'feature_11'; ['featureEntity_11.accountFeature.evStateChanged']; featureEntity_11.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_11"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 11}"/>
		<bind name="dispatch" value="'addedToStage'; feature_11 == 'new' ? 'resetExpandDueEcoBoostsUnlock'
														: null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="changeDispatch" value="feature_11; 'resetExpandDueEcoBoostsUnlock'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 'new'"/>
		<bind name="action" value="'resetExpandDueEcoBoostsUnlock'; !userPrefs.shipPanelExpanded	? 'setUserPref' : null; {value: true, name: 'shipPanelExpanded'}"/>
		<bind name="watch" value="'canNotConvertExpFromThisShip'; (shipInfo.group == SC.Ships.SHIP_GROUPS.START || shipInfo.group == SC.Ships.SHIP_GROUPS.UPGRADEABLE) &amp;&amp; !upgradableShipInfo.isElite"/>
		<bind name="watch" value="'isActiveRouteResearch'; currentPortSubroute == SC.Ui_windows.ROUTE.RESEARCH"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="style" value="'hitTest'; isTTXpanelVisible"/>
		<bind name="fade" value="isTTXpanelVisible;	isTTXpanelVisible ? 0.2 : 0;	{alpha: 0, top: 10};
																	{alpha: 1, top: 0};
																	{alpha: 0, top: 10}; 1; isTTXpanelVisible ? 0.2 : 0"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
			<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
			<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
			<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
			<bind name="style" value="'marginBottom'; isActiveRouteResearch || isInShipyard ? '40px' : carouselAreaHeight"/>
			<bind name="stageSize"/>
			<bind name="watch" value="'crewOrEconomicModalWindowTopMargin'; 47 + 2 + 4 + (stageHeight &gt;= 960	? 45
																							: ((stageHeight - 720) * 0.16944))"/>
			<bind name="watch" value="'topMargin'; isCrewModalWindow || isEconomicsModalWindow	? crewOrEconomicModalWindowTopMargin
																				: 98"/>
			<block>
				<style>
					<height value="1px"/>
					<width value="10px"/>
				</style>
				<bind name="transition" value="topMargin; 0.1;	{height: topMargin};
												{height: topMargin};
												{height: topMargin}"/>
			</block>
			<block>
				<style>
					<width value="320px"/>
					<height value="100%f"/>
					<right value="10px"/>
				</style>
				<block className="BlurMap">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<style>
						<hitTest value="false"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="mc_blurmap_medium" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="blurMap" value="0"/>
					</block>
					<block className="inner_panel" type="native">
						<style>
							<alpha value="0.2"/>
						</style>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="isHighContrast"/>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
						<background9Slice value="[3]"/>
						<margin value="-1px"/>
					</style>
				</block>
				<block className="stat_panel" type="native">
					<bind name="visible" value="!isHighContrast"/>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="2px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
							<marginTop value="-2px"/>
						</style>
						<bind name="sharedTooltip" value="'ShipExtendedTooltip'; isExpanded ? null : { _shipId: verifiedShipId }"/>
						<block className="button_expand_right_aligned" type="native">
							<bind name="visible" value="!(expandUnavailable)"/>
							<bind name="var" value="{isExpandClickable: true}"/>
							<bind name="catch" value="'click'; {isExpandClickable: false}; 'expandClickDisabledEv'"/>
							<bind name="dispatch" value="'expandClickDisabledEv'; 'expandClickEnabledEv'; null; 2; 0.12"/>
							<bind name="catch" value="'expandClickEnabledEv'; {isExpandClickable: true}"/>
							<bind name="style" value="'hitTest'; isExpandClickable"/>
							<style>
								<position value="absolute"/>
								<top value="5px"/>
								<width value="100%"/>
								<marginRight value="3px"/>
							</style>
							<params>
								<param name="toggle" value="true"/>
								<param name="soundSet" value="dropdown"/>
								<param name="buttonMode" value="false"/>
							</params>
							<bind name="selected" value="isExpanded"/>
							<bind name="action" value="'click'; 'setUserPref'; {value: !isExpanded, name: currentPortSubroute == SC.Ui_windows.ROUTE.EXTERIOR	? 'shipPanelExpandedOnExteriors'
																																				: 'shipPanelExpanded'}"/>
						</block>
						<block>
							<style>
								<hitTest value="false"/>
							</style>
							<bind name="instance" value="'ShipInfoTabHeader'; {	_shipId: verifiedShipId,
																_isNotExpanded: !(isExpanded),
																_fromShipPanel: true,
																_expandShipClassDesc: true}"/>
						</block>
					</block>
					<bind name="watch" value="'isShipExperienceVisible'; isEconomicsModalWindow ||
														(isExpanded &amp;&amp;
														isOwned &amp;&amp;
														!isCrewModalWindow &amp;&amp;
														!isInPreview &amp;&amp;
														!isInShipyard &amp;&amp;
														(	currentPortSubroute == SC.Ui_windows.ROUTE.MAIN ||
															currentPortSubroute == SC.Ui_windows.ROUTE.RESEARCH)) &amp;&amp;
														!isRepairDockUiVisible"/>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="fade" value="isActiveRouteResearch || isInMetashop; 0.15; {alpha: 0, ubScaleY: 0, scaleY: 0}; {alpha: 1, ubScaleY: 1, scaleY: 1}; {alpha: 0, ubScaleY: 0, scaleY: 0}"/>
						<block>
							<style>
								<width value="100%"/>
								<paddingLeft value="1px"/>
								<paddingRight value="1px"/>
							</style>
							<block className="HorizontalDividerTwoPx">
								<style>
									<width value="100%"/>
									<height value="2px"/>
									<backgroundSize value="fill"/>
									<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
								</style>
							</block>
						</block>
						<block>
							<style>
								<paddingTop value="8px"/>
								<paddingLeft value="35px"/>
								<paddingBottom value="8px"/>
							</style>
							<bind name="instance" value="'ComplexityLevel'; {	_size: 0,
																_complexityLevel: shipInfo.currentComplexityLevel,
																_maxComplexityLevel: shipInfo.maxComplexityLevel }"/>
						</block>
						<block>
							<bind name="visible" value="isCrewBlockVisible"/>
							<style>
								<width value="100%"/>
								<paddingLeft value="1px"/>
								<paddingRight value="1px"/>
							</style>
							<block className="HorizontalDividerTwoPx">
								<style>
									<width value="100%"/>
									<height value="2px"/>
									<backgroundSize value="fill"/>
									<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
								</style>
							</block>
						</block>
					</block>
					<block>
						<bind name="fade" value="isShipExperienceVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																{alpha: 1, ubScaleY: 1, scaleY: 1};
																{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
						<bind name="sharedTooltip" value="'CurrencyTooltip'; {	_currency: SC.Common.CURRENCIES.XP,
																_amount: ownShipExp }"/>
						<block>
							<style>
								<marginTop value="2px"/>
							</style>
						</block>
						<block>
							<style>
								<marginLeft value="35px"/>
								<marginBottom value="8px"/>
							</style>
							<bind name="instance" value="'CurrentXPLarge'; { _exp: ownShipExp, _label: 'IDS_SHIP_EXPERIENCE'}"/>
						</block>
						<bind name="instance" value="'NewGuidingTipHub'; isResearchNewTipActive ? {	_newTipId: researchTipId,
																					_tipPositioning: 'left',
																					_offset: 5,
																					_hasNextButton: true,
																					_noPointer: !isShipExperienceVisible,
																					_noPinAnimation: true}
																				: null"/>
					</block>
					<block>
						<bind name="primaryEntityDH" value="'featureEntity_13'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[13]"/>
						<bind name="watchDH" value="'feature_13'; ['featureEntity_13.accountFeature.evStateChanged']; featureEntity_13.accountFeature.state"/>
						<bind name="watch" value="'featureState'; feature_13"/>
						<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 13}"/>
						<bind name="watch" value="'isCrewBlockVisible';	isOwned &amp;&amp;
														(feature_13 != 'locked') &amp;&amp;
														!isInShipyard &amp;&amp;
														!isCrewModalWindow &amp;&amp;
														!isInMetashop &amp;&amp;
														!isRepairDockUiVisible"/>
						<style>
							<width value="100%"/>
						</style>
						<block>
							<style>
								<width value="100%"/>
								<paddingLeft value="1px"/>
								<paddingRight value="1px"/>
							</style>
							<block className="HorizontalDividerTwoPx">
								<style>
									<width value="100%"/>
									<height value="2px"/>
									<backgroundSize value="fill"/>
									<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
								</style>
							</block>
						</block>
						<block>
							<style>
								<width value="100%"/>
								<paddingLeft value="1px"/>
								<paddingRight value="1px"/>
							</style>
							<bind name="instance" value="'ShipTTXCrewBlock'; isRepairDockUiVisible	? null
																				: {	_crewId: crewId,
																					_currentTTXShipId: verifiedShipId,
																					_isNotExpanded: !isExpanded,
																					_isCrewBlockVisible: isCrewBlockVisible}"/>
						</block>
						<bind name="instance" value="'NewGuidingTipHub'; isCrewNewTipActive	? {	_newTipId: crewTipId,
																				_tipPositioning: 'left',
																				_offset: 5,
																				_pointerOffset: pointerOffset}
																			: null"/>
					</block>
					<bind name="watch" value="'hideBoostsTag'; (shipInfo.tagsMask &amp; (1 &lt;&lt; SC.Ships.SHIP_TAG.HIDE_ECO_BOOST)) != 0 &amp;&amp; verifiedShipId &gt; 0"/>
					<block>
						<bind name="watch" value="'isEconomicsBlockVisible';	!hideBoostsTag &amp;&amp;
															isOwned &amp;&amp;
															(feature_11 != 'locked') &amp;&amp;
															!isInShipyard &amp;&amp;
															!isInMetashop &amp;&amp;
															!isRepairDockUiVisible"/>
						<bind name="fade" value="isEconomicsBlockVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																{alpha: 1, ubScaleY: 1, scaleY: 1};
																{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'ShipTTXEconomicsBlock'; {	_isExpandedTTX: isExpanded,
																_isAnyBoostExpired: preinstalledBoosts.length,
																_currentTTXShipId: verifiedShipId,
																_isEconomicsModalWindow: isEconomicsModalWindow }"/>
					</block>
					<block>
						<bind name="watch" value="'isShipEventModifierContainerVisible';	(feature_11 != 'locked') &amp;&amp;
																		!isInShipyard &amp;&amp;
																		!isInMetashop &amp;&amp;
																		!isInResearch &amp;&amp;
																		!isRepairDockUiVisible &amp;&amp;
																		portBuffCollection.length &gt; 0"/>
						<bind name="fade" value="isShipEventModifierContainerVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																			{alpha: 1, ubScaleY: 1, scaleY: 1};
																			{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
						<style>
							<width value="100%"/>
							<marginTop value="-1px"/>
						</style>
						<bind name="instance" value="'ShipEventModifierContainer'; isShipEventModifierContainerVisible ? {_portBuffTipId: portBuffTipId, _isPortBuffNewTipActive: isPortBuffNewTipActive} : null"/>
					</block>
				</block>
				<bind name="watch" value="'isShipTTXVisible'; isExpanded &amp;&amp; (!(shipInfo.isEventLike) || isOwned)"/>
				<block>
					<bind name="watch" value="'hideArmorTag'; (shipInfo.tagsMask &amp; (1 &lt;&lt; SC.Ships.SHIP_TAG.HIDE_ARMOR)) != 0"/>
					<bind name="watch" value="'isArmourBlockVisible';	!(hideArmorTag) &amp;&amp;
														!isCrewModalWindow &amp;&amp;
														!isEconomicsModalWindow &amp;&amp;
														(isExpanded &amp;&amp; (	currentPortSubroute == SC.Ui_windows.ROUTE.MAIN ||
																			isInPreview ||
																			(isInMetashop &amp;&amp; metashopShowTTX)	))"/>
					<bind name="changeDispatch" value="isArmourBlockVisible; 'hideArmourEv'; {}; 2; false"/>
					<bind name="action" value="'hideArmourEv'; 'hideArmour'"/>
					<style>
						<width value="100%"/>
						<height value="100%f"/>
					</style>
					<block>
						<bind name="fade" value="isArmourBlockVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
															{alpha: 1, ubScaleY: 1, scaleY: 1};
															{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
						<style>
							<width value="100%"/>
							<marginTop value="-1px"/>
						</style>
						<bind name="instance" value="'ShipTTXArmourBlock'; { _isExpanded: isExpanded }"/>
					</block>
					<block>
						<styleClass value="$DefaultScrollBar"/>
						<style>
							<height value="100%f"/>
							<width value="100%"/>
						</style>
						<block className="CurrentShipTTX" type="ublock">
							<style>
								<width value="100%"/>
							</style>
							<bind name="build!" value="{ _isExpanded : isShipTTXVisible }"/>
						</block>
					</block>
				</block>
				<bind name="watch" value="'isManagementContainerVisible';	((isInPreview &amp;&amp; isExpanded) || isInResearch) &amp;&amp;
															!isCrewModalWindow &amp;&amp; !isEconomicsModalWindow &amp;&amp;
															verifiedShipId &amp;&amp; !isRepairDockUiVisible"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'ShipManagementContainer'; isManagementContainerVisible ? { _shipId: verifiedShipId, _isExpanded: isExpanded }
																						: null"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'margin'; isShipShardsBlockVisible ? '12px' : '0px'"/>
					<bind name="instance" value="'ShipTTXShards'; isShipShardsBlockVisible ? {_shipId: verifiedShipId} : null"/>
				</block>
			</block>
			<block>
				<bind name="watch" value="'showLabelComingSoon'; (shipInfo.group == SC.Ships.SHIP_GROUPS.DEMO_WITHOUT_STATS || shipInfo.group == SC.Ships.SHIP_GROUPS.DEMO_WITHOUT_STATS_PREM) &amp;&amp; isExpanded"/>
				<bind name="var" value="{ isTestSampleLabel: false }"/>
				<bind name="changeDispatch" value="isOwned;  showLabelComingSoon ? 'evChangeLabel' : 'evShowLabelAnimation'"/>
				<bind name="dispatch" value="'evShowLabelAnimation'; 'evChangeLabel'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE; 0.15"/>
				<bind name="catch" value="'evChangeLabel'; { isTestSampleLabel: isOwned }"/>
				<bind name="fade" value="isExpanded &amp;&amp; showLabelComingSoon; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																	{alpha: 1, ubScaleY: 1, scaleY: 1};
																	{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
				<style>
					<height value="80px"/>
					<width value="320px"/>
					<right value="0px"/>
				</style>
				<block>
					<style>
						<align value="center|middle"/>
					</style>
					<bind name="instance" value="'LabelComingSoon'; { _showTestSampleLabel: isTestSampleLabel }"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipTTXShards">
		<style>
			<width value="100%"/>
		</style>
		<block className="ShipTTXShards" type="ublock">
			<style>
				<width value="100%"/>
			</style>
			<bind name="build!" value="{_shipId: Number(_shipId)}"/>
		</block>
	</block>
	<block className="ShipTTXArmourBlock">
		<style>
			<width value="100%"/>
			<paddingLeft value="1px"/>
			<paddingRight value="1px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="26px"/>
			</style>
			<bind name="instance" value="'ArmourDisplaySwitcher'; {}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ShipInfoArmourBlock'; {}"/>
		</block>
	</block>
	<block className="ShipTTXEconomicsBlock">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'ecoBonusIntroTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.ECO_BONUS_INTRO"/>
		<bind name="primaryEntityDH" value="'ecoBonusIntroRepeatTip';	CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.ECO_BONUS_INTRO_REPEAT"/>
		<bind name="watchDH" value="'ecoBonusIntroTipActive';		['ecoBonusIntroTip.newGuidingTip.evChanged']; ecoBonusIntroTip.newGuidingTip.isActive"/>
		<bind name="watchDH" value="'ecoBonusIntroRepeatTipActive';	['ecoBonusIntroRepeatTip.newGuidingTip.evChanged']; ecoBonusIntroRepeatTip.newGuidingTip.isActive"/>
		<bind name="watch" value="'newTipID';	ecoBonusIntroTipActive			? SC.Context_guiding_tip.TIP_TYPE.ECO_BONUS_INTRO :
								ecoBonusIntroRepeatTipActive	? SC.Context_guiding_tip.TIP_TYPE.ECO_BONUS_INTRO_REPEAT
																: SC.Context_guiding_tip.TIP_TYPE.NONE"/>
		<bind name="watch" value="'isNewTipVisible'; newTipID != SC.Context_guiding_tip.TIP_TYPE.NONE"/>
		<bind name="tooltip" value="'EconomicModifiersSummaryTooltip';	_isAnyBoostExpired &amp;&amp; !_isExpandedTTX		? {	_isAnyBoostExpired: _isAnyBoostExpired,
																															_noMouseInstructions: _isExpandedTTX }
																									: null"/>
		<bind name="tooltip" value="'SimpleStatusTooltip';				!_isAnyBoostExpired &amp;&amp; !_isExpandedTTX								? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																																_text: 'IDS_ECONOMIC_BOOSTS_TTX_GO_TO_MODAL_WINDOW_TOOLTIP' }
																															: null"/>
		<style>
			<width value="100%"/>
			<paddingLeft value="1px"/>
			<paddingRight value="1px"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<top value="50%"/>
			</style>
			<bind name="instance" value="'NewGuidingTipHub'; isNewTipVisible	?	{	_newTipId: newTipID,
																	_tipPositioning: 'left',
																	_offset: 5,
																	_pointerOffset: 3}
															: null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'EconomicsDisplaySwitcher';	!_isExpandedTTX ? {	_isExpandedTTX: _isExpandedTTX,
																		_isAnyBoostExpired: _isAnyBoostExpired}
																	: null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ShipInfoEconomicsBlock'; {	_isExpandedTTX:			_isExpandedTTX,
													_isAnyBoostExpired:		_isAnyBoostExpired,
													_currentTTXShipId:		_currentTTXShipId,
													_isEconomicsModalWindow: _isEconomicsModalWindow }"/>
		</block>
	</block>
	<block className="ShipEventModifierContainer">
		<style>
			<width value="100%"/>
			<paddingLeft value="1px"/>
			<paddingRight value="1px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="BuffContainer" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{}"/>
			</block>
			<bind name="instance" value="'NewGuidingTipHub';	_isPortBuffNewTipActive ? {	_newTipId: _portBuffTipId,
																		_tipPositioning: 'left',
																		_offset: 5,
																		_pointerOffset: 3 }
																	: null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipManagementContainer">
		<bind name="primaryEntityDH" value="'shipExplorePriceEntity'; CC.priceComponent; _shipId + '_' + SC.Common.PRICE_ACTION.RESEARCH"/>
		<bind name="watchDH" value="'shipExplorePrice'; ['shipExplorePriceEntity.priceComponent.evChanged']; shipExplorePriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'shipBuyPriceEntity'; CC.priceComponent; _shipId + '_' + SC.Common.PRICE_ACTION.BUY"/>
		<bind name="watchDH" value="'shipBuyPrice'; ['shipBuyPriceEntity.priceComponent.evChanged']; shipBuyPriceEntity.priceComponent"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; _shipId"/>
		<bind name="watchDH" value="'isRented'; ['shipOwnEntity.ownShip.evUpdateDockState']; shipOwnEntity.ownShip.timeRent &gt; 0"/>
		<bind name="watch" value="'canBuy'; shipInfo.canBuy"/>
		<bind name="watch" value="'isOwned'; shipOwnEntity != null"/>
		<bind name="watch" value="'isResearchableShip';	shipInfo.group != SC.Ships.SHIP_GROUPS.DEMO_WITHOUT_STATS &amp;&amp;
										shipInfo.group != SC.Ships.SHIP_GROUPS.DEMO_WITHOUT_STATS_PREM &amp;&amp;
										shipInfo.group != SC.Ships.SHIP_GROUPS.EARLY_ACCESS"/>
		<bind name="watchDH" value="'isFreeExpAvailable'; 				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isFreeExpAvailable"/>
		<bind name="watchDH" value="'isPrevShipResearched';				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isPrevShipResearched"/>
		<bind name="watchDH" value="'isResearchPriceVisible';			['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isResearchPriceVisible"/>
		<bind name="watchDH" value="'isFreeExpCost';						['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isFreeExpCost"/>
		<bind name="watchDH" value="'isResearchDeficit';					['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isResearchDeficit"/>
		<bind name="watchDH" value="'researchPriceInfo';					['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.researchPriceInfo"/>
		<bind name="watchDH" value="'dependenciesResearchPriceInfo';		['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.dependenciesResearchPriceInfo"/>
		<bind name="watchDH" value="'dependenciesResearchPriceVisible';	['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.dependenciesResearchPriceVisible"/>
		<bind name="watchDH" value="'researchDeficitPriceInfoDH';		['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.researchDeficitPriceInfo"/>
		<bind name="watchDH" value="'isResearchPreviousShipLockVisible';	['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isResearchPreviousShipLockVisible"/>
		<bind name="watchDH" value="'isResearchAvailable';				['shipEntity.shipCrossResearchInfo.evChanged']; shipEntity.shipCrossResearchInfo.isResearchAvailable"/>
		<bind name="watch" value="'researchDeficitPriceInfo'; {	finalPrice: researchDeficitPriceInfoDH.finalPrice &gt;= 0 ? researchDeficitPriceInfoDH.finalPrice : 0,
												currency: researchDeficitPriceInfoDH.currency}"/>
		<bind name="watch" value="'dependenciesResearchTitle'; isPrevShipResearched 	? 'IDS_RESEARCH_WITH_MODULES_COST_TTX'
																	: 'IDS_RESEARCH_WITH_SHIPS_COST_TTX'"/>
		<bind name="firstEntityDH" value="'superShipFeatureEntity'; CC.superShipFeature"/>
		<bind name="watchDH" value="'isUnlockedSuperShipFeature'; ['superShipFeatureEntity.superShipFeature.evUpdate']; superShipFeatureEntity.superShipFeature.isUnlocked"/>
		<bind name="watchDH" value="'topShipsExplored'; ['superShipFeatureEntity.superShipFeature.evUpdate']; superShipFeatureEntity.superShipFeature.topShipsExplored"/>
		<bind name="watch" value="'isSuperShipReseachInfoVisible'; !upgradableShipInfo.isExplored &amp;&amp; shipInfo.group == SC.Ships.SHIP_GROUPS.SUPER_SHIP"/>
		<bind name="watch" value="'isSuperShipReseached'; upgradableShipInfo.isExplored &amp;&amp; shipInfo.group == SC.Ships.SHIP_GROUPS.SUPER_SHIP"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountResource'; ['resourceEntity.accountResource.evChangedGold','resourceEntity.accountResource.evChangedCredit']; resourceEntity.accountResource"/>
		<bind name="watch" value="'isBuyPriceVisible';		(!isOwned || isRented) &amp;&amp; isResearchableShip &amp;&amp; canBuy"/>
		<bind name="watch" value="'totalMoneyAfterPurchase';	accountResource[shipBuyPrice.currency] - shipBuyPrice.finalPrice"/>
		<bind name="watch" value="'isMoneyDeficit';			totalMoneyAfterPurchase &lt; 0"/>
		<bind name="watch" value="'isMoneyDeficitVisible';	isMoneyDeficit &amp;&amp; (isFreeExpAvailable || upgradableShipInfo.dependencyResearched || isSuperShipReseached)"/>
		<bind name="watch" value="'isBuyAvailable';			isBuyPriceVisible &amp;&amp; upgradableShipInfo.isExplored &amp;&amp; !isMoneyDeficit"/>
		<bind name="watch" value="'moneyDeficit';			isMoneyDeficit	? (totalMoneyAfterPurchase * -1) : 0"/>
		<bind name="watch" value="'moneyDeficitPriceInfo'; {	finalPrice: moneyDeficit,
											currency: shipBuyPrice.currency }"/>
		<bind name="watchDH" value="'isGiftShipAvailable';	['shipEntity.giftCounterComponent.evChanged']; shipEntity.giftCounterComponent.canClaim"/>
		<bind name="watch" value="'isGiftShip';				!!shipEntity.giftCounterComponent"/>
		<bind name="watch" value="'currentBattleCount';		shipEntity.giftCounterComponent.currentBattleCount"/>
		<bind name="watch" value="'totalBattleCount';		shipEntity.giftCounterComponent.totalBattleCount"/>
		<bind name="watch" value="'rewardIdx';				shipEntity.giftCounterComponent.rewardIndex"/>
		<bind name="watch" value="'isGettingShipButtonsVisible';	isGiftShip ||
												(!isOwned || isRented) &amp;&amp;
													(isBuyAvailable || isResearchAvailable) &amp;&amp;
													(	shipInfo.group == SC.Ships.SHIP_GROUPS.SUPER_SHIP ||
														shipInfo.group == SC.Ships.SHIP_GROUPS.UPGRADEABLE ||
														shipInfo.group == SC.Ships.SHIP_GROUPS.UPGRADEABLE_ULT ||
														shipInfo.group == SC.Ships.SHIP_GROUPS.UPGRADEABLE_EXCL ||
														shipInfo.group == SC.Ships.SHIP_GROUPS.EVENT ||
														shipInfo.group == SC.Ships.SHIP_GROUPS.START ||
														shipInfo.group == SC.Ships.SHIP_GROUPS.PREMIUM)"/>
		<bind name="primaryEntityDH" value="'routeEntityisInResearch'; CC.route; SC.Ui_windows.ROUTE.RESEARCH"/>
		<bind name="watchDH" value="'isInResearch'; ['routeEntityisInResearch.route.evIsActiveChanged']; routeEntityisInResearch.route.isActive"/>
		<bind name="primaryEntityDH" value="'routeEntityisInPreview'; CC.route; SC.Ui_windows.ROUTE.SHIP_PREVIEW"/>
		<bind name="watchDH" value="'isInPreview'; ['routeEntityisInPreview.route.evIsActiveChanged']; routeEntityisInPreview.route.isActive"/>
		<style>
			<width value="100%"/>
			<margin value="12px|16px"/>
		</style>
		<block>
			<bind name="transition" value="isSuperShipReseachInfoVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																{alpha: 1, ubScaleY: 1, scaleY: 1};
																{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginBottom'; isSuperShipReseachInfoVisible ? '16px' : '0px'"/>
			<block>
				<bind name="visible" value="!isUnlockedSuperShipFeature"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginBottom'; !isPrevShipResearched ? '16px' : '0px'"/>
				<bind name="tooltip" value="'HeaderDescriptionInstructionTooltip'; {	_headerText: 'IDS_RESEARCH_TOP_TIER',
																	_descriptionText: 'IDS_RESEARCH_SUPERSHIP_TOP_TIER_SHIPS_INFO' }"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_RESEARCH_TOP_TIER_COLON"/>
				</block>
				<block>
					<bind name="instance" value="'DefaultDividedCounter'; !isUnlockedSuperShipFeature ? { _curValueTextClass: '$TextDefaultBold17NM',
																						_curValue: topShipsExplored,
																						_maxValue: '3',
																						_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT}
																					 : null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="!isPrevShipResearched"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="tooltip" value="'HeaderDescriptionInstructionTooltip'; {	_headerText: 'IDS_RESEARCH_SHIP' ,
																	_descriptionText: 'IDS_RESEARCH_SUPERSHIP_PREVIOUS_SHIP_INFO' }"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<alpha value="0.9"/>
					</style>
					<default_text value="IDS_RESEARCH_ACTION"/>
				</block>
				<block>
					<bind name="instance" value="'ShipLineItemNM'; { _shipId: shipInfo.previousShipId, _fontClass: '$TextDefaultBold17NM'}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="transition" value="isGiftShip &amp;&amp; !isGiftShipAvailable; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																	{alpha: 1, ubScaleY: 1, scaleY: 1};
																	{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginBottom'; isGiftShip &amp;&amp; !isGiftShipAvailable ? '16px' : '0px'"/>
			<bind name="tooltip" value="'GiftShipBattleInfoTooltip'; {}"/>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<width value="100%"/>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_NEWBIE_GIFTS_BATTLES_COUNTER_COLON"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold17NM',
														_curValue: currentBattleCount,
														_maxValue: totalBattleCount}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="transition" value="isResearchPriceVisible &amp;&amp; !isGiftShipAvailable; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
														{alpha: 1, ubScaleY: 1, scaleY: 1};
														{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PriceTagWithLabelRow'; Number(shipInfo.level) &lt; SC.Ships.SHIP_LEVELS.SUPER_SHIP &amp;&amp; isResearchPriceVisible	? {	_priceInfo: researchPriceInfo,
																																			_title: 'IDS_RESEARCH_COST_TTX',
																																			_showDiscountTag: true}
																																		: null"/>
			</block>
			<block>
				<bind name="transition" value="dependenciesResearchPriceVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																		{alpha: 1, ubScaleY: 1, scaleY: 1};
																		{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PriceTagWithLabelRow'; dependenciesResearchPriceVisible	? {	_priceInfo: dependenciesResearchPriceInfo,
																							_title: dependenciesResearchTitle,
																							_showDiscountTag: true,
																							_marginTop: 8}
																						: null"/>
			</block>
			<block>
				<bind name="transition" value="isResearchDeficit; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
														{alpha: 1, ubScaleY: 1, scaleY: 1};
														{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
				<style>
					<width value="100%"/>
					<marginRight value="7px"/>
				</style>
				<bind name="instance" value="'PriceTagWithDeficitAndLabelRow'; isResearchDeficit	? { _priceInfo: researchDeficitPriceInfo,
																					_title: 'IDS_NOT_ENOUGH',
																					_marginTop: 8 }
																				: null"/>
			</block>
			<block>
				<style>
					<height value="16px"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="transition" value="isBuyPriceVisible &amp;&amp; !isGiftShipAvailable; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
													{alpha: 1, ubScaleY: 1, scaleY: 1};
													{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PriceTagWithLabelRow'; {	_priceInfo: shipBuyPrice,
														_title: 'IDS_PURCHASE_COST_TTH',
														_showDiscountTag: true}"/>
			</block>
			<block>
				<bind name="transition" value="isMoneyDeficitVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
															{alpha: 1, ubScaleY: 1, scaleY: 1};
															{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
				<style>
					<width value="100%"/>
					<marginRight value="8px"/>
				</style>
				<bind name="instance" value="'PriceTagWithDeficitAndLabelRow'; { _priceInfo: moneyDeficitPriceInfo,
																_title: 'IDS_NOT_ENOUGH',
																_marginTop: 8}"/>
			</block>
			<block>
				<style>
					<height value="16px"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="transition" value="isResearchPreviousShipLockVisible &amp;&amp; !isGiftShip; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																	{alpha: 1, ubScaleY: 1, scaleY: 1};
																	{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="16px"/>
				</style>
				<bind name="instance" value="'StatusLine'; {	_text: 'IDS_RESEARCH_PREVIOUS_SHIPS',
											_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
											_width: '100%' }"/>
			</block>
		</block>
		<block>
			<bind name="transition" value="isGettingShipButtonsVisible; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																{alpha: 1, ubScaleY: 1, scaleY: 1};
																{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="tooltip" value="'GiftShipBattleInfoTooltip'; isGetGiftShipButtonVisible &amp;&amp; !isGiftShipAvailable ? {} : null"/>
			<bind name="watch" value="'isGetGiftShipButtonVisible'; isGiftShip &amp;&amp; !isBuyAvailable &amp;&amp; !isResearchAvailable || isGiftShipAvailable"/>
			<bind name="watch" value="'isPurchaseButtonVisible'; upgradableShipInfo.isExplored &amp;&amp; !isGiftShipAvailable"/>
			<bind name="watch" value="'isResearchPurchaseButtonsVisible'; !isMoneyDeficit &amp;&amp; !isGiftShipAvailable"/>
			<bind name="watch" value="'isButtonEnabled'; isBuyAvailable || isResearchAvailable"/>
			<bind name="watch" value="'buttonData';	isGetGiftShipButtonVisible			? {	label: toUpperCase(tr('IDS_NEWBIE_GIFTS_GET_GIFT_SHIP')),
																			request: 'giftShipGettingConfirm',
																			requestParams: {shipId: _shipId},
																			enabled: isGiftShipAvailable} :
									isPurchaseButtonVisible				? { label: 'IDS_PURCHASE_UPPER_CASE',
																			action: 'purchaseShip',
																			enabled: isButtonEnabled } :
									isResearchPurchaseButtonsVisible	? { label: 'IDS_RESEARCH_PURCHASE_UPPER_CASE',
																			action: 'researchShip',
																			enabled: isButtonEnabled }
																		: { label: 'IDS_RESEARCH_UPPER_CASE',
																			action: 'researchShip',
																			enabled: isButtonEnabled }"/>
			<bind name="watch" value="'isCrossResearchHighlightEnabled'; isInResearch &amp;&amp; !upgradableShipInfo.dependencyResearched &amp;&amp; buttonData.action == 'researchShip' &amp;&amp; !isFreeExpCost"/>
			<bind name="action" value="'rollOver'; isCrossResearchHighlightEnabled ? 'evHighlightCrossResearchShipsOver' : null; {shipId: _shipId}"/>
			<bind name="action" value="'rollOut'; isCrossResearchHighlightEnabled ? 'evHighlightCrossResearchShipsOut' : null; {country: shipInfo.country}"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_label: buttonData.label,
												_focusIndex: 0,
												_width: '100%',
												_defaultFocused: 0,
												_action: buttonData.action,
												_actionParams: { shipId: _shipId },
												_request: buttonData.request,
												_requestParams: buttonData.requestParams,
												_enabled: buttonData.enabled,
												_isTransactionBtn: true,
												_name: 'ButtonResearchAndBuy'}"/>
				<bind name="instance" value="'NewGuidingTipHub'; {	_newTipId: SC.Context_guiding_tip.TIP_TYPE.RESEARCH_FINAL_BUY_RESEARCH,
													_tipPositioning: 'left', 
													_offset: 5,
													_hasNextButton: false}"/>
			</block>
		</block>
		<block>
			<bind name="transition" value="shipInfo.isManagementAvailable; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																{alpha: 1, ubScaleY: 1, scaleY: 1};
																{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<bind name="action" value="'click'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.MANAGEMENT, data: {shipId: _shipId}}"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'DefaultButton';	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
												_width: '100%',
												_label: 'IDS_TO_MANAGEMENT_BUTTON_UPPER_CASE',
												_action: 'selectShip',
												_actionParams: {shipId: _shipId},
												_enabled: true}"/>
		</block>
		<block>
			<bind name="transition" value="isInPreview || isInResearch; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																{alpha: 1, ubScaleY: 1, scaleY: 1};
																{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<bind name="action" value="'click'; isInPreview &amp;&amp; (!isOwned || isRented) ? 'selectShip' : null; {shipId: _shipId}"/>
			<bind name="action" value="'click'; isInPreview ? null : 'selectShip'; {shipId: _shipId}"/>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
			</style>
			<bind name="name" value="isOwned ? 'to_port' : null"/>
			<bind name="instance" value="'DefaultButton';	isInPreview	?	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																_width: '100%',
																_label: isOwned ? 'IDS_TO_DOCK'
																				: 'IDS_RETURN_TO_TECH_TREE',
																_action: 'navigateTo',
																_actionParams: {route: isOwned	?	SC.Ui_windows.ROUTE.MAIN
																								:	shipInfo.nation,
																				shipId: _shipId},
																_enabled: true}

														:	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																_width: '100%',
																_name: 'LookAtShipButton',
																_label: 'IDS_TO_SHIP_PREVIEW_BUTTON_UPPER_CASE',
																_action: 'navigateTo',
																_actionParams: {route: SC.Ui_windows.ROUTE.SHIP_PREVIEW},
																_enabled: true}"/>
		</block>
	</block>
	<block className="PriceTagWithLabelRow">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : 0"/>
		<bind name="style" value="'marginTop'; _marginTop ? _marginTop : 0"/>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<marginTop value="-7px"/>
				<marginBottom value="-8px"/>
				<marginLeft value="-3px"/>
				<marginRight value="-4px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { _showDiscountTag: _showDiscountTag, _medium: true, priceInfo: _priceInfo }"/>
		</block>
	</block>
	<block className="PriceTagWithDeficitAndLabelRow">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginTop'; _marginTop ? _marginTop : 0"/>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="100%"/>
				<leading value="-2"/>
			</style>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<bind name="text" value="_title"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<bind name="text" value="format(_priceInfo.finalPrice, -1)"/>
		</block>
		<block>
			<style>
				<marginLeft value="3px"/>
				<marginTop value="-5px"/>
				<marginBottom value="-3px"/>
			</style>
			<bind name="instance" value="'Currency'; { _currency: _priceInfo.currency, _small: _small}"/>
		</block>
	</block>
	<block className="GiftShipBattleInfoTooltip">
		<bind name="firstEntityDH" value="'shipEntity'; CC.giftCounterComponent"/>
		<bind name="watch" value="'currentBattleCount'; shipEntity.giftCounterComponent.currentBattleCount"/>
		<bind name="watch" value="'totalBattleCount'; shipEntity.giftCounterComponent.totalBattleCount"/>
		<bind name="watch" value="'battlesLeft'; totalBattleCount - currentBattleCount"/>
		<bind name="watch" value="'descriptionText'; tr(subst('IDS_SUBST_NEWBIE_GIFTS_CONDITION_TEXT_1_TOOLTIP', [], {battleCount: battlesLeft}, battlesLeft))"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="270px"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="visible" value="true"/>
					<style>
						<width value="100%"/>
						<marginBottom value="12px"/>
					</style>
					<bind name="instance" value="'TooltipSystemSecondaryHeaderText'; { _headerText: 'IDS_NEWBIE_GIFTS_CONDITION_HEADER_TOOLTIP'}"/>
				</block>
				<block>
					<bind name="visible" value="true"/>
					<style>
						<width value="100%"/>
						<marginBottom value="12px"/>
					</style>
					<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: descriptionText }"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'TooltipSystemDescriptionText'; { _descriptionText: 'IDS_NEWBIE_GIFTS_CONDITION_TEXT_2_TOOLTIP' }"/>
				</block>
			</block>
		</block>
	</block>

	<!-- ship_ttx_panel_elements -->
	<block className="ShipTTXCrewBlock">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watch" value="'isDisabledBarracks';			!crew.canMove"/>
		<bind name="watch" value="'isDisabledCrewFire';			!crew.canDismiss"/>
		<bind name="watch" value="'isDisabledLearnSkills';		!crew.canLearnSkills"/>
		<bind name="watch" value="'isDisabledCrewLevelUp';		!crew.canLevelUp"/>
		<bind name="watch" value="'hasCrewRestrictions'; isDisabledBarracks &amp;&amp; isDisabledCrewFire &amp;&amp; isDisabledCrewLevelUp &amp;&amp; isDisabledLearnSkills"/>
		<bind name="primaryEntityDH" value="'featureEntity_13'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[13]"/>
		<bind name="watchDH" value="'feature_13'; ['featureEntity_13.accountFeature.evStateChanged']; featureEntity_13.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_13"/>
		<bind name="action" value="'click'; 'click' ? 'featureSeen' : null; {featureIndex: 13}"/>
		<style>
			<width value="100%"/>
			<height value="85px"/>
		</style>
		<bind name="transition" value="_isNotExpanded;	0.15; {height: 85}; {height: 30}; {height: 85}"/>
		<bind name="fade" value="_isCrewBlockVisible;	0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
												{alpha: 1, ubScaleY: 1, scaleY: 1};
												{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
		<bind name="watch" value="'isCrewAssigned'; _crewId &gt; 0"/>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<bind name="visible" value="isCrewAssigned"/>
			<styleClass value="$Fullsize"/>
			<bind name="clickSplit"/>
			<bind name="action" value="'left_click'; 'navigateTo'; {route: SC.Ui_windows.ROUTE.CREW_MANAGEMENT}"/>
			<bind name="soundSet" value="'default_button'"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginTop value="-1px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="transition" value="(crewMenuVisible || rollOver); 0.1; {alpha: 0}; {alpha: 1.0}"/>
				<bind name="sharedTooltip" value="'CrewTooltip';	isCrewAssigned	? { _crewId: _crewId, _fromDock: true}
																: null"/>
				<bind name="menu" value="'CrewMenu'; isCrewAssigned	&amp;&amp; crew.skillMatrixId &amp;&amp; !hasCrewRestrictions 	?	{ _crewId: _crewId }
																									:	null; null; null; 'crewMenuVisible'"/>
				<block>
					<styleClass value="$Fullsize"/>
					<bind name="transition" value="crewMenuVisible; 0.1; {alpha: 1}; {alpha: 0.7}"/>
					<style>
						<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
						<background9Slice value="[3,3]"/>
						<hitTest value="false"/>
					</style>
				</block>
			</block>
			<bind name="instance" value="'ShipTTXAssignedCrew';	isCrewAssigned	? { _crewId: _crewId,
																	_isNotExpanded: _isNotExpanded,
																	_isCrewBlockVisible: _isCrewBlockVisible }
																: null"/>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<bind name="visible" value="!isCrewAssigned"/>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="instance" value="'ShipTTXEmptyCrew';	!isCrewAssigned	? { _currentTTXShipId: _currentTTXShipId,
																_rollOver: rollOver,
																_isCrewBlockVisible: _isCrewBlockVisible,
																_isNotExpanded: _isNotExpanded}
															: null"/>
		</block>
		<block>
			<bind name="style" value="'hitTest'; _isNotExpanded"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="10px"/>
				<bottom value="-10px"/>
				<backgroundColor value="0x01000000"/>
			</style>
		</block>
		<block>
			<bind name="fade" value="feature_13 == 'new'; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
			<style>
				<position value="absolute"/>
				<bottom value="22px"/>
				<right value="2px"/>
			</style>
			<bind name="instance" value="'MarkerNewAttention'; {}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipTTXAssignedCrew">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'crewsSingleton'; ['dockEntity.crewData.evUpdate']; dockEntity.crewData"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; crew.shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="name" value="'CrewShipPanelBlock'"/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<bottom value="0px"/>
			</style>
			<bind name="transition" value="!(_isNotExpanded) &amp;&amp; _isCrewBlockVisible; 0.06;	{ alpha: 0};
																			{ alpha: 1};
																			{ alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD; _isNotExpanded	? 0
																																				: 0.04"/>
			<bind name="instance" value="'CrewPortraitBig'; {_baseUrl: crew.baseUrl, _overlayUrl: crew.overlayUrl}"/>
		</block>
		<block>
			<style>
				<width value="180px"/>
				<height value="100%"/>
				<marginLeft value="34px"/>
				<paddingTop value="8px"/>
				<paddingBottom value="8px"/>
			</style>
			<block>
				<bind name="transition" value="_isCrewBlockVisible;	0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
															{alpha: 1, ubScaleY: 1, scaleY: 1};
															{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
				<style>
					<width value="100%"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'CrewNameWithIcon'; {	_crewId: _crewId,
													_iconLeftOffset: '-31px',
													_hideRank: _isNotExpanded,
													_isBig: false,
													_isTTX: true}"/>
			</block>
			<block>
				<bind name="transition" value="!(_isNotExpanded) &amp;&amp; _isCrewBlockVisible; 0.09;	{alpha: 0, ubScaleY: 0, scaleY: 0};
																				{alpha: 1, ubScaleY: 1, scaleY: 1};
																				{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
				<bind name="style" value="'hitTest'; !(_isNotExpanded) &amp;&amp; _isCrewBlockVisible"/>
				<style>
					<width value="150px"/>
					<position value="absolute"/>
					<bottom value="0px"/>
				</style>
				<bind name="instance" value="'CrewExperienceBar'; crew.skillMatrixId ? {_crewId: _crewId} : null"/>
			</block>
		</block>
		<block>
			<bind name="transition" value="_isCrewBlockVisible;	0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
														{alpha: 1, ubScaleY: 1, scaleY: 1};
														{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
			<style>
				<position value="absolute"/>
				<right value="10px"/>
				<bottom value="4px"/>
			</style>
			<bind name="instance" value="'CrewSkillPoints'; crew.allSkillPoints &gt; 0 &amp;&amp; crew.skillMatrixId	? {	_crewId: _crewId,
																								_shipClass: shipInfo.subtype,
																								_isBig: false}
																							: null"/>
		</block>
	</block>
	<block className="ShipTTXEmptyCrew">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'crewsSingleton'; ['dockEntity.crewData.evUpdate']; dockEntity.crewData"/>
		<bind name="primaryEntityDH" value="'ownShipEntity'; CC.ownShip; _currentTTXShipId"/>
		<bind name="watchDH" value="'ownShipInfo'; ['ownShipEntity.ship.evUpdate', 'ownShipEntity.ship.evCurrentSkinChanged']; ownShipEntity.ship"/>
		<bind name="watchDH" value="'lastBoardedCrewId'; 	['ownShipEntity.ship.evLastBoardedCrewIdChanged', 'ownShipEntity.ship.evUpdate']; 	ownShipEntity.ship.lastBoardedCrewId"/>
		<bind name="watchDH" value="'isWithoutCrewPenalty'; 	['ownShipEntity.ship.evUpdate']; 													ownShipEntity.ship.isWithoutCrewPenalty"/>
		<bind name="watchDH" value="'crewId';				['ownShipEntity.ownShip.evCrewChanged'];		ownShipEntity.ownShip.crewId"/>
		<bind name="primaryEntityDH" value="'lastBoardedCrewEntity'; CC.crew; lastBoardedCrewId"/>
		<bind name="watchDH" value="'lastBoardedCrew'; [	'lastBoardedCrewEntity.crew.evDismissDelayChanged', 'lastBoardedCrewEntity.crew.evLevelUp',
									'lastBoardedCrewEntity.crew.evExpChanged', 'lastBoardedCrewEntity.crew.evShipChanged',
									'lastBoardedCrewEntity.crew.evSkillsChanged', 'lastBoardedCrewEntity.crew.evResetCostChanged',
									'lastBoardedCrewEntity.crew.evAdaptationUpdated', 'lastBoardedCrewEntity.crew.evChanged',
									'lastBoardedCrewEntity.crew.evRecentnessUpdated','lastBoardedCrewEntity.crew.evIsPenaltiesActiveChanged']; lastBoardedCrewEntity.crew"/>
		<bind name="watchDH" value="'lastBoardedCrew'+'Retraining'; ['lastBoardedCrewEntity.retraining.evRetrainingUpdated']; lastBoardedCrewEntity.retraining"/>
		<bind name="watch" value="'hasLastBoardedCrew'; lastBoardedCrewEntity != null"/>
		<bind name="watch" value="'isReturnLastCrewButtonVisible'; !_isNotExpanded &amp;&amp; crewId == 0 &amp;&amp; lastBoardedCrewId != 0 &amp;&amp; hasLastBoardedCrew"/>
		<bind name="primaryEntityDH" value="'otherShipEntity'; CC.ownShip; lastBoardedCrew.shipID"/>
		<bind name="watch" value="'isOtherShipExist'; otherShipEntity != null"/>
		<bind name="watchDH" value="'isOtherShipLocked';			['otherShipEntity.ownShip.evUpdateLock'];		otherShipEntity.ownShip.isLocked"/>
		<bind name="watch" value="'isLastBoardedCrewLocked'; isOtherShipExist &amp;&amp; isOtherShipLocked"/>
		<bind name="watch" value="'isLastBoardedCrewInBasket'; hasLastBoardedCrew &amp;&amp; lastBoardedCrew.dismissDelay &gt; 0"/>
		<bind name="watchDH" value="'isLocked';			['ownShipEntity.ownShip.evUpdateLock'];			ownShipEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';		['ownShipEntity.ownShip.evUpdateLock'];			ownShipEntity.ownShip.isInFormation"/>
		<bind name="watch" value="'canAssignWithoutRetrain';	lastBoardedCrew.specializationID == _currentTTXShipId ||
											isWithoutCrewPenalty"/>
		<bind name="watch" value="'isButtonDisabled'; isLocked || isInFormation || isLastBoardedCrewLocked || isLastBoardedCrewInBasket"/>
		<bind name="fade" value="_isCrewBlockVisible;	0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
												{alpha: 1, ubScaleY: 1, scaleY: 1};
												{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="fade" value="!(_rollOver); 0.15; {alpha: 0, top: -10}; {alpha: 1, top: 0}"/>
			<style>
				<width value="100%"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<block type="text">
				<bind name="name" value="'No_Crew'"/>
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<textColor value="0xFFFF9933"/>
				</style>
				<styleClass value="$TextDefaultBoldNM"/>
				<bind name="text" value="toUpperCase(tr('IDS_NO_CREW'))"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="fade" value="_rollOver; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<style>
					<width value="200px"/>
				</style>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
													_text: 'IDS_ASSIGN_OR_RECRUIT_CREW_MOUSE_INSTRUCTION'}"/>
				<bind name="instance" value="'DefaultButton';	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
													_width: '100%',
													_name: 'AssignCrewButton',
													_label: 'IDS_ASSIGN_CREW',
													_action: 'navigateTo',
													_actionParams: {route: SC.Ui_windows.ROUTE.CREW_MANAGEMENT},
													_enabled: true}"/>
			</block>
			<block>
				<bind name="visible" value="isReturnLastCrewButtonVisible"/>
				<block>
					<bind name="fade" value="_rollOver; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}; 1;_rollOver ? 0.1 : 0"/>
					<style>
						<width value="200px"/>
						<marginTop value="4px"/>
					</style>
					<bind name="sharedTooltip" value="'CrewTooltip'; { _crewId: lastBoardedCrewId, _targetShipId: _currentTTXShipId, _noContextMenuInstruction: true}"/>
					<bind name="instance" value="'DefaultButton';	canAssignWithoutRetrain ?	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																					_width: '100%',
																					_label: 'IDS_CREW_HIRE_LAST_CREW',
																					_isTransactionBtn: true,
																					_request: null,
																					_action: 'assignCrewToShip',
																					_actionParams: {	crewId: lastBoardedCrewId,
																										shipId: _currentTTXShipId},
																					_enabled: !isButtonDisabled
																				}
																			:	{	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
																					_width: '100%',
																					_label: 'IDS_CREW_HIRE_LAST_CREW',
																					_isTransactionBtn: true,
																					_request: 'openRetrainCrewWindow',
																					_requestParams: { 	crewId: lastBoardedCrewId, 
																										shipId: _currentTTXShipId },
																					_action: null,
																					_enabled: !isButtonDisabled
																				}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="EconomicsDisplaySwitcher">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="primaryEntityDH" value="'featureEntity_11'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[11]"/>
		<bind name="watchDH" value="'feature_11'; ['featureEntity_11.accountFeature.evStateChanged']; featureEntity_11.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_11"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 11}"/>
		<bind name="request" value="'click';	_isExpandedTTX ? null : 'showEconomicsManagement'; {}"/>
		<style>
			<width value="100%"/>
			<height value="26px"/>
		</style>
		<bind name="fade" value="!_isExpandedTTX; 0.15;	{alpha: 0, ubScaleY: 0, scaleY: 0};
										{alpha: 1, ubScaleY: 1, scaleY: 1};
										{alpha: 0, ubScaleY: 0, scaleY: 0}"/>
		<block>
			<bind name="transition" value="(mouseDown || rollOver); 0.1; {alpha: 0}; {alpha: 1}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-1px"/>
				<marginBottom value="1px"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
				<background9Slice value="[3,3]"/>
			</style>
		</block>
		<block>
			<bind name="fade" value="!_isExpandedTTX; 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}; 0; 0.05"/>
			<style>
				<width value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<style>
					<marginLeft value="32px"/>
					<textColor value="0xffffffff"/>
				</style>
				<bind name="text" value="'IDS_ECONOMIC_BOOSTS_TTX_LABEL'"/>
			</block>
			<block>
				<bind name="fade" value="feature_11 == 'new'; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
				<style>
					<position value="absolute"/>
					<bottom value="14px"/>
					<right value="2px"/>
				</style>
				<bind name="instance" value="'MarkerNewAttention'; {}"/>
			</block>
			<block>
				<bind name="fade" value="_isAnyBoostExpired &amp;&amp; !_isExpandedTTX; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
				<style>
					<marginTop value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<bind name="instance" value="'MarkerAttention'; { _size: 0 }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipInfoEconomicsBlock">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'shipAttrs'; CC.shipEconomicAttributes"/>
		<bind name="watchDH" value="'modifiers'; ['shipAttrs.attributes.evChanged']; shipAttrs.attributes.modifiers"/>
		<bind name="collectionDH" value="CC.ecoBoost; 'ecoBoostsCol'; 'availableToUser.' + 'byType.' + SC.Common.ECOBOOST_TYPES.COMMON + '.installed'"/>
		<bind name="watch" value="'currentlyInstalledCount'; ecoBoostsCol.length"/>
		<bind name="watch" value="'itemsInstalled'; currentlyInstalledCount &gt; 0"/>
		<bind name="watch" value="'totalCreditsModifier';	modifiers[SC.Common.ECOBOOST_MODIFIERS.CREDITS]"/>
		<bind name="watch" value="'totalExpModifier';		modifiers[SC.Common.ECOBOOST_MODIFIERS.EXP]"/>
		<bind name="watch" value="'totalCrewExpModifier';	modifiers[SC.Common.ECOBOOST_MODIFIERS.CREW_EXP]"/>
		<bind name="watch" value="'totalFreeExpModifier';	modifiers[SC.Common.ECOBOOST_MODIFIERS.FREE_EXP]"/>
		<bind name="watch" value="'isModifiersVisible'; !!(totalCreditsModifier || totalExpModifier || totalCrewExpModifier || totalFreeExpModifier) || itemsInstalled"/>
		<style>
			<width value="100%"/>
			<height value="1px"/>
		</style>
		<bind name="style" value="'hitTest'; _isExpandedTTX"/>
		<bind name="transition" value="_isExpandedTTX; 0.15;	{height: 0, alpha: 0};
											{height: 85, alpha: 1};
											{height: 0, alpha: 0}"/>
		<block>
			<styleClass value="$Fullsize"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<align value="center|middle"/>
			</style>
			<bind name="instance" value="'EconomicModifiersSummary'; {	_rollOver:			rollOver,
														_isAnyBoostExpired:	_isAnyBoostExpired,
														_currentTTXShipId:	_currentTTXShipId,
														_isExpandedTTX:		_isExpandedTTX,
														_isEconomicsModalWindow: _isEconomicsModalWindow}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-1px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
	</block>
	<block className="EconomicModifiersSummary">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="primaryEntityDH" value="'featureEntity_11'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[11]"/>
		<bind name="watchDH" value="'feature_11'; ['featureEntity_11.accountFeature.evStateChanged']; featureEntity_11.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_11"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 11}"/>
		<bind name="watch" value="'tooltipElementName'; _isAnyBoostExpired &amp;&amp; !_isExpandedTTX	? 'EconomicModifiersSummaryTooltip'
																				: 'SimpleStatusTooltip'"/>
		<bind name="request" value="'click'; 'showEconomicsManagement'; {}"/>
		<bind name="action" value="'click'; _currentTTXShipId != viewedShipId	? 'selectShip'
																: null; {shipId: _currentTTXShipId}"/>
		<bind name="soundSet" value="'default_button'"/>
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<align value="center|middle"/>
		</style>
		<block>
			<bind name="transition" value="!_isEconomicsModalWindow &amp;&amp; (mouseDown || rollOver); 0.1; {alpha: 0}; {alpha: 1}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="style" value="'hitTest'; !_isEconomicsModalWindow"/>
			<bind name="tooltip" value="tooltipElementName;	_isAnyBoostExpired &amp;&amp; !_isExpandedTTX	? { _isAnyBoostExpired: _isAnyBoostExpired,
																						_noWarning: true }
																					: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																						_text: 'IDS_ECONOMIC_BOOSTS_TTX_GO_TO_MODAL_WINDOW_TOOLTIP' }"/>
			<style>
				<marginTop value="-1px"/>
				<marginBottom value="2px"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
				<background9Slice value="[3,3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<align value="center|middle"/>
			</style>
			<block>
				<style>
					<marginTop value="-3px"/>
				</style>
				<bind name="repeat" value="SC.Ships.SHIP_SLOT_TYPES.ECOBOOSTS; 'EconomicModifierItemInTTXSummary'; { _isEconomicsModalWindow: _isEconomicsModalWindow}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<top value="4px"/>
					<right value="2px"/>
					<hitTest value="false"/>
				</style>
				<bind name="fade" value="feature_11 == 'new'; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; _isExpandedTTX ? 0.1 : 0"/>
				<bind name="instance" value="'MarkerNewAttention'; {}"/>
			</block>
		</block>
	</block>
	<block className="EconomicModifiersSummaryTooltip">
		<bind name="watch" value="'mouseInstruction'; _noMouseInstructions	? null
															: {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
																_text: 'IDS_ECONOMIC_BOOSTS_TTX_GO_TO_MODAL_WINDOW_TOOLTIP' }"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; _isAnyBoostExpired &amp;&amp; !_noWarning	?	{ _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																							  _text: 'IDS_WARNING_NOT_ALL_ECOBOOSTS_ARE_ACTIVE' }
																						:	null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="_isAnyBoostExpired &amp;&amp; !_noMouseInstructions &amp;&amp; !_noWarning"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; mouseInstruction"/>
			</block>
		</block>
	</block>
	<block className="EconomicModifierItemInTTXSummary">
		<bind name="watch" value="'ecoBoostSlotPk'; $value + '_0_'"/>
		<bind name="primaryEntityDH" value="'ecoBoostSlotEntity'; CC.equipmentSlot; ecoBoostSlotPk"/>
		<bind name="watchDH" value="'slotType';			['']; ecoBoostSlotEntity.equipmentSlot.type"/>
		<bind name="watchDH" value="'installedEntityId';	['ecoBoostSlotEntity.equipmentSlot.evInstalledEntityIdChanged']; ecoBoostSlotEntity.equipmentSlot.installedEntityId"/>
		<bind name="entityDH" value="'ecoBoostEntity';	installedEntityId"/>
		<bind name="watchDH" value="'amount';			['ecoBoostEntity.countComponent.evUpdate'];	ecoBoostEntity.countComponent.value"/>
		<bind name="watchDH" value="'rarity';			[];	ecoBoostEntity.ecoBoost.rarity"/>
		<bind name="watch" value="'bgPostfix';	rarity == 1	? SC.Ui_common.ECOBOOST_RARITY.STANDART	:
								rarity == 2	? SC.Ui_common.ECOBOOST_RARITY.SPECIAL	:
								rarity == 3	? SC.Ui_common.ECOBOOST_RARITY.RARE
											: SC.Ui_common.ECOBOOST_RARITY.UNIQUE"/>
		<bind name="watch" value="'boostTypeTxt';		SC.Ships.SHIP_SLOT_TYPES.VALUE_TO_NAME[slotType]"/>
		<bind name="watch" value="'boostTypeModifier';	SC.Common.ECOBOOST_MODIFIERS[boostTypeTxt]"/>
		<bind name="watchDH" value="'permanentAttributesPositive';	['ecoBoostSlotEntity.attributes.evChanged'];	ecoBoostSlotEntity.attributes.positive"/>
		<bind name="watch" value="'isInstalledPermanentEcoboost';	permanentAttributesPositive.length"/>
		<bind name="watch" value="'isInstalledAndInactive';	installedEntityId &amp;&amp; amount == 0"/>
		<bind name="watch" value="'isInstalledAndActive';	installedEntityId &amp;&amp; amount &gt; 0"/>
		<bind name="watch" value="'isNoBoost';	!installedEntityId &amp;&amp; !isInstalledPermanentEcoboost"/>
		<bind name="watch" value="'currency'; SC.Common.CURRENCIES[SC.Ships.SHIP_SLOT_TYPES.TO_CURRENCY[slotType]]"/>
		<bind name="firstEntityDH" value="'shipAttrs'; CC.shipEconomicAttributes"/>
		<bind name="watchDH" value="'modifiers'; ['shipAttrs.attributes.evChanged']; shipAttrs.attributes.modifiers"/>
		<style>
			<marginLeft value="12px"/>
			<marginRight value="12px"/>
			<align value="center"/>
			<width value="42px"/>
			<height value="56px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="sharedTooltip" value="'EconomicBoostSlotTooltipTTX'; {	_ecoBoostSlotEntityId: ecoBoostSlotEntity.id,
															_boostTypeModifier: boostTypeModifier,
															_isEconomicsModalWindow: _isEconomicsModalWindow }"/>
		<block>
			<style>
				<marginTop value="2px"/>
			</style>
			<bind name="instance" value="'EconomicEntityImage';	{	_isInstalledAndInactive: isInstalledAndInactive,
													_isInstalledAndActive: isInstalledAndActive,
													_isNoBoost: isNoBoost,
													_bgPostfix: bgPostfix,
													_slotType: slotType }"/>
		</block>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<bottom value="0px"/>
			</style>
			<bind name="alpha" value="!isInstalledAndActive ? 0.45 : 1"/>
			<block type="text">
				<styleClass value="$TextDefaultBoldNM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="modifiers[boostTypeModifier]	? format('+' + modifiers[boostTypeModifier], -1)
														: '—'"/>
			</block>
			<block type="text">
				<bind name="visible" value="modifiers[boostTypeModifier]"/>
				<styleClass value="$TextDefaultBoldNM"/>
				<style>
					<alpha value="0.75"/>
					<marginLeft value="4px"/>
				</style>
				<default_text value="%"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="EconomicEntityImage">
		<bind name="watch" value="'currency';	SC.Common.CURRENCIES[SC.Ships.SHIP_SLOT_TYPES.TO_CURRENCY[_slotType]]"/>
		<style>
			<align value="center|middle"/>
			<width value="38px"/>
			<height value="38px"/>
		</style>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="alpha" value="!_isInstalledAndActive ? 0.45 : 1"/>
			<bind name="style" value="'backgroundImage'; _isInstalledAndActive	?	'url:../service_kit/currencies/icon_' + currency + '_' + _bgPostfix + '.png'
																:	'url:../service_kit/currencies/icon_' + currency + '_large.png'"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<top value="-2px"/>
			</style>
			<bind name="instance" value="'MarkerAttention'; _isInstalledAndInactive ? { _size: 1 } : null"/>
		</block>
	</block>

	<!-- shipinfo_elements -->
	<block className="ShipLineItemNM">
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; _shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'textColor'; (shipInfo.isFarming || shipInfo.uiSpecial)	? SC.Ui_styles.SERVICE_COLORS.YELLOW
																			: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha'; textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW	? 1
																				: 0.9"/>
		<bind name="watch" value="'showFlag'; (shipInfo.flagName != SC.Common.NATION.EVENTS) &amp;&amp; _withFlag"/>
		<bind name="watch" value="'iconColorTransform'; textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW	? {redOffset:0,greenOffset:-41,blueOffset:-153}
																						: {}"/>
		<bind name="watch" value="'showName'; !_hideName"/>
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block>
			<bind name="visible" value="showFlag"/>
			<style>
				<marginRight value="8px"/>
				<marginTop value="-10px"/>
				<marginBottom value="-11px"/>
			</style>
			<bind name="instance" value="'NationFlagsTiny'; showFlag ? { _shipCountry: shipInfo.flagName} : null"/>
		</block>
		<block>
			<style>
				<marginTop value="-8px"/>
				<marginBottom value="-10px"/>
				<marginLeft value="-5px"/>
				<marginRight value="4px"/>
			</style>
			<bind name="style" value="'marginRight'; showName ? '4px' : '3px'"/>
			<bind name="instance" value="'ShipIcon'; {	_shipType: shipInfo.subtype,
										_isSpecial: shipInfo.uiSpecial,
										_isFarming: shipInfo.isFarming,
										_isElite: upgradableShipInfo.isElite	}"/>
		</block>
		<block>
			<bind name="style" value="'marginLeft'; shipInfo.levelIcon.length &gt; 0 ? '-4px' : '0px'"/>
			<bind name="style" value="'marginRight'; shipInfo.levelIcon.length &gt; 0 ? '-1px' : '0px'"/>
			<bind name="instance" value="'ShipLevelNM';	{	_levelIcon: shipInfo.levelIcon,
											_colorTransform : iconColorTransform,
											_levelRome : shipInfo.levelRome,
											_fontClass : _fontClass,
											_textColor : textColor,
											_alpha : textAlpha
										}"/>
		</block>
		<block type="text">
			<bind name="visible" value="showName"/>
			<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultBoldNM'"/>
			<style>
				<multiline value="false"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="alpha" value="textAlpha"/>
			<bind name="name" value="'ttc_ship_name'"/>
			<bind name="text" value="showName ? toUpperCase(tr(shipInfo.nameIDS)) : ''"/>
		</block>
	</block>
	<block className="ShipClassLineItemNM">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watch" value="'isSupership'; shipInfo.level == SC.Ships.SHIP_LEVELS.SUPER_SHIP"/>
		<bind name="watch" value="'shipClass'; tr(toUpperCase('IDS_' + shipInfo.subtype + (isSupership ? '_LEGENDARY' : '')))"/>
		<bind name="watch" value="'textColor';	shipInfo.isFarming || shipInfo.uiSpecial	? SC.Ui_styles.SERVICE_COLORS.YELLOW
																			: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'shipClassText'; isSupership ? shipClass : subst('IDS_SHIP_LEVEL', [], {_shipClass: shipClass, _shipLevel: shipInfo.levelRome})"/>
		<block type="text">
			<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
			<bind name="style" value="'alpha'; textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW ? 1 : 0.75"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="text" value="shipClassText"/>
		</block>
	</block>
	<block className="ShipLevelNM">
		<bind name="watch" value="'isShowLevelIcon'; _levelIcon.length &gt; 0"/>
		<bind name="watch" value="'shipLevelText'; (isShowLevelIcon ? '' : _levelRome) + ' '"/>
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<bind name="alpha" value="_alpha ? _alpha : '1'"/>
		<block>
			<bind name="visible" value="isShowLevelIcon"/>
			<style>
				<height value="100%"/>
				<align value="middle"/>
			</style>
			<bind name="instance" value="'LevelIconNM'; isShowLevelIcon	? {_levelIcon: _levelIcon, _colorTransform: _colorTransform}
														: null"/>
		</block>
		<block type="text">
			<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultBoldNM'"/>
			<bind name="class" value="_fontColorClass ? _fontColorClass : '$None'"/>
			<bind name="class" value="_fontSizeClass ? _fontSizeClass : '$None'"/>
			<bind name="style" value="'textColor'; _textColor"/>
			<bind name="text" value="shipLevelText"/>
		</block>
	</block>
	<block className="LevelIconNM">
		<block className="LevelIconNM" type="ublock">
			<bind name="build!" value="{_levelIcon: _levelIcon, _colorTransform: _colorTransform ? _colorTransform : {}}"/>
		</block>
	</block>
	<block className="ShipInfoTabHeader">
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; _shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'isOwned'; shipOwnEntity != null"/>
		<bind name="watchDH" value="'crewId'; ['shipOwnEntity.ownShip.evCrewChanged'];	shipOwnEntity.ownShip.crewId"/>
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; crewId"/>
		<bind name="watchDH" value="'crew'; [	'crewEntity.crew.evDismissDelayChanged', 'crewEntity.crew.evLevelUp',
									'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged',
									'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged',
									'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged',
									'crewEntity.crew.evRecentnessUpdated','crewEntity.crew.evIsPenaltiesActiveChanged']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.retraining.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watchDH" value="'crewFlagName'; ['crewEntity.crew.evFlagNameChanged'];	crewEntity.crew.flagName"/>
		<bind name="changeDispatch" value="_shipId; 'evShipIdChanged'"/>
		<bind name="action" value="'evShipIdChanged'; 'ttxShipIdChanged'; {shipId: _shipId}"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="primaryEntityDH" value="'featureEntity_13'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[13]"/>
			<bind name="watchDH" value="'feature_13'; ['featureEntity_13.accountFeature.evStateChanged']; featureEntity_13.accountFeature.state"/>
			<bind name="watch" value="'featureState'; feature_13"/>
			<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 13}"/>
			<bind name="primaryEntityDH" value="'featureEntity_11'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[11]"/>
			<bind name="watchDH" value="'feature_11'; ['featureEntity_11.accountFeature.evStateChanged']; featureEntity_11.accountFeature.state"/>
			<bind name="watch" value="'featureState'; feature_11"/>
			<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 11}"/>
			<style>
				<width value="300px"/>
				<height value="184px"/>
				<position value="absolute"/>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="_isNotExpanded; 0.1;	{ width: 300, height: 184 };
												isOwned	?	feature_13 != 'locked'	? { width: 142, height: 87 } :
															feature_11 != 'locked'	? { width: 106, height: 65 }
																					: { width: 69, height: 43 }
														:	{ width: 69, height: 43 };
												{ width: 300, height: 184 }"/>
			<bind name="instance" value="'NationFlagsBig'; _isHideFlag	? null
														: {	_width: '100%',
															_height: '100%',
															_alpha: 0.5,
															_shipCountry: _fromShipPanel &amp;&amp; crewFlagName	? crewFlagName
																											: shipInfo.flagName }"/>
		</block>
		<block>
			<style>
				<marginLeft value="9px"/>
				<marginTop value="9px"/>
				<marginBottom value="8px"/>
			</style>
			<block>
				<bind name="instance" value="'ShipLineItemNM'; { _shipId: _shipId, _fontClass: '$TextDefaultBold21NM'}"/>
			</block>
			<block>
				<style>
					<marginLeft value="26px"/>
					<width value="100%"/>
				</style>
				<bind name="transition" value="_isNotExpanded; 0.15;	{alpha: 1, ubScaleY: 1, scaleY: 1};
													{alpha: 0, ubScaleY: 0, scaleY: 0};
													{alpha: 1, ubScaleY: 1, scaleY: 1}"/>
				<block>
					<style>
						<height value="8px"/>
					</style>
				</block>
				<bind name="instance" value="'ShipClassLineItemNM'; { _shipId: _shipId, _width : _expandShipClassDesc ? '256px' : '192px'}"/>
			</block>
		</block>
	</block>
	<block className="ShipSilhouetteRightAligned">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged', 'shipEntity.ship.evFlagNameWithCrewChanged']; shipEntity.ship"/>
		<style>
			<width value="122px"/>
			<height value="22px"/>
		</style>
		<bind name="style" value="'right';	(shipInfo.subtype == ShipTypes.Submarine)	? '-38px' :
							(shipInfo.subtype == ShipTypes.Destroyer)	? '-26px' :
							(shipInfo.subtype == ShipTypes.Cruiser)		? '-12px'
																		: '0px'"/>
		<bind name="style" value="'backgroundImage'; 'url:' + shipInfo.pathTinyIcon"/>
	</block>
	<block className="LabelComingSoon">
		<block>
			<style>
				<width value="100%"/>
				<height value="80px"/>
			</style>
			<block className="icon_issued" type="native">
				<style>
					<marginLeft value="150px"/>
					<marginTop value="40px"/>
				</style>
				<bind name="rotation" value="-3"/>
				<innerBind elementName="item.item" name="text" value="_showTestSampleLabel ? toUpperCase(tr('IDS_TEST_SAMPLE')) : toUpperCase(tr('IDS_UNAVAILABLE_TO_DISPLAY_SOON'))"/>
				<bind name="gotoAndPlay!" value="'issued'"/>
			</block>
		</block>
	</block>

	<!-- ships_carousel_panel -->
	<block className="ShipsCarouselPanelContainer">
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'ShipsCarouselPanel'; {}"/>
		</block>
	</block>
	<block className="ShipsCarouselPanel">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="primaryEntityDH" value="'routeEntityisShipPreviewWindow'; CC.route; SC.Ui_windows.ROUTE.SHIP_PREVIEW"/>
		<bind name="watchDH" value="'isShipPreviewWindow'; ['routeEntityisShipPreviewWindow.route.evIsActiveChanged']; routeEntityisShipPreviewWindow.route.isActive"/>
		<bind name="collectionDH" value="CC.ownShip; 'playerShips'"/>
		<bind name="watch" value="'hasShips'; playerShips.length &gt; 0"/>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isCrewModalWindow'; isIn('ModalWindowCrewManagement', windowQueue)"/>
		<bind name="watch" value="'isEconomicsModalWindow'; isIn('ModalWindowEconomicsManagement', windowQueue)"/>
		<bind name="watch" value="'isTrainingModalWindow'; trainingRoomActiveChild == SC.Ui_windows.ROUTE.TRAINING_ROOM_MAIN"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountSlotsNum'; ['resourceEntity.accountResource.evChangedSlotsNum']; resourceEntity.accountResource.slotsNum"/>
		<bind name="watch" value="'isSlotsNumVisible'; feature_17 != 'locked'"/>
		<bind name="var" value="{delayedShowCarousel: false}"/>
		<bind name="dispatch" value="'addedToStage'; 'delayedAddedToStage'; null; 2; 1.5"/>
		<bind name="catch" value="'delayedAddedToStage'; {delayedShowCarousel: true}"/>
		<bind name="primaryEntityDH" value="'routeEntity'; CC.route; SC.Ui_windows.ROUTE.PORT"/>
		<bind name="watchDH" value="'isInPort'; ['routeEntity.route.evIsActiveChanged']; routeEntity.route.isActive"/>
		<bind name="watchDH" value="'currentPortSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.activeChild"/>
		<bind name="watchDH" value="'prevPortSubroute'; ['routeEntity.route.evActiveChildChanged']; routeEntity.route.prevActiveChild"/>
		<bind name="watchDH" value="'availablePortSubroutes'; ['routeEntity.route.evChildrenChanged']; routeEntity.route.children"/>
		<bind name="watch" value="'carouselVisibility';	delayedShowCarousel &amp;&amp;
										(SC.Ui_windows.ROUTE.CAROUSEL_VISIBLE.indexOf(currentPortSubroute) &gt;= 0 ||
										isCrewModalWindow		||
										isEconomicsModalWindow	||
										isAlmanacsModalWindow	||
										isTrainingModalWindow	||
										isShipPreviewWindow)"/>
		<bind name="fade" value="carouselVisibility;	carouselVisibility ? 0.15 : 0;	{alpha: 0, top: 10};
																	{alpha: 1, top: 0};
																	{alpha: 0, top: 10}; 1; carouselVisibility ? 0.1 : 0"/>
		<bind name="primaryEntityDH" value="'featureEntity_17'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[17]"/>
		<bind name="watchDH" value="'feature_17'; ['featureEntity_17.accountFeature.evStateChanged']; featureEntity_17.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_17"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 17}"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="hasShips"/>
			<bind name="primaryEntityDH" value="'isSmallCarouselViewEntity'; CC.preference; 'ui.carousel.isSmallView'"/>
			<bind name="watchDH" value="'isSmallCarouselView'; ['isSmallCarouselViewEntity.preference.evValueChanged']; isSmallCarouselViewEntity.preference.value"/>
			<bind name="directEvent" value="'carouselViewChanged'; 'option.set'; ['ui.carousel.isSmallView', !isSmallCarouselView]"/>
			<bind name="watch" value="'isFilteredShipsHided'; (userPrefs.isFilteredShipsHided == null) ? false : userPrefs.isFilteredShipsHided"/>
			<bind name="catch" value="'carouselHideFilteredChanged'; {isFilteredShipsHided: !(isFilteredShipsHided)}; 'saveCarouselHideFilteredState'"/>
			<bind name="action" value="'saveCarouselHideFilteredState'; 'setUserPref' ; {value : isFilteredShipsHided, name: 'isFilteredShipsHided'}"/>
			<bind name="catch" value="'carouselRowsCountChanged'"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<bottom value="36px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<top value="-30px"/>
				</style>
				<block className="CarouselFilters" type="ublock">
					<bind name="build!" value="{}"/>
				</block>
			</block>
			<block className="ShipCarousel" type="ublock">
				<style>
					<width value="100%"/>
				</style>
				<bind name="build!" value="{}"/>
			</block>
			<block>
				<bind name="transition" value="rollOver; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}; SC.Common.UB1_EASING_FUNCTIONS.LINEAR; rollOver ? 0 : 3"/>
				<style>
					<position value="absolute"/>
					<right value="40px"/>
					<flow value="horizontal"/>
				</style>
				<bind name="style" value="'top'; isSlotsNumVisible ? '-32px' : '-22px'"/>
				<block>
					<block type="text">
						<style>
							<alpha value="0.75"/>
							<right value="0px"/>
							<hitTest value="false"/>
						</style>
						<styleClass value="$TextDefaultBoldNM"/>
						<bind name="text" value="tr('IDS_SHIPS') + tr('IDS_COLON') + ' ' + playerShips.length"/>
					</block>
					<block type="text">
						<bind name="visible" value="isSlotsNumVisible"/>
						<styleClass value="$TextDefaultBoldNM"/>
						<style>
							<alpha value="0.75"/>
							<right value="0px"/>
							<marginTop value="6px"/>
							<hitTest value="false"/>
						</style>
						<bind name="text" value="tr('IDS_FREE_SLOTS') + ' ' + accountSlotsNum"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<top value="-26px"/>
					<right value="16px"/>
				</style>
				<block className="button_settings_small" type="native">
					<params>
						<param name="name" value="peculiarityFilter"/>
					</params>
					<bind name="selected" value="contentFiltersInfotipIsVIsible"/>
					<bind name="tooltip" value="'PeculiarityFiltersContent'; {}; TooltipBehaviour.verticalInfotipSwitchUp; 'contentFiltersInfotipIsVIsible'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
														_text: 'IDS_TOOLTIP_CAROUSEL_FILTERS_SPECIAL'}"/>
				</block>
			</block>
		</block>
	</block>

	<!-- signal_item -->
	<block className="SignalItemStatic">
		<block className="SignalItemStatic" type="ublock">
			<bind name="build!" value="{	_id:		_id,
						_amount:	_amount,
						_isReward:	_isReward }"/>
		</block>
	</block>

	<!-- snowflakes_confirm_choice -->
	<block className="ModalWindowSnowflakesConfirmChoice">
		<bind name="request" value="'evZeroSnowflakesCollection'; 'closeSnowflakesModal'; {}"/>
		<bind name="request" value="'evZeroSnowflakesCount'; 'closeSnowflakesModal'; {}"/>
		<bind name="instance" value="'SmallModalWindow'; { _headerText: 'IDS_CONFIRMATION', _contentElement: 'ModalWindowSnowflakesConfirmChoiceContent' }"/>
	</block>
	<block className="ModalWindowSnowflakesConfirmChoiceContent">
		<bind name="collectionDH" value="CC.snowflakeSelected; 'selectedShips'; 'sorted'"/>
		<bind name="collectionFields" value="'selectedShips'; ['ship.id']"/>
		<bind name="firstEntityDH" value="'bonusTagSeasonEntity'; CC.bonusTagSeason; 'snowflakeSeasonCollection'"/>
		<bind name="watchDH" value="'bonusSnowflakesCount';	['bonusTagSeasonEntity.bonusTagSeason.evChanged']; bonusTagSeasonEntity.bonusTagSeason.bonusSnowflakes"/>
		<bind name="watchDH" value="'rewards';				['bonusTagSeasonEntity.rewardsStack.evChanged']; bonusTagSeasonEntity.rewardsStack.rewards"/>
		<bind name="changeDispatch" value="selectedShips.length; 'evZeroSnowflakesCollection'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; 0"/>
		<bind name="changeDispatch" value="bonusSnowflakesCount; 'evZeroSnowflakesCount'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP; 0"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'listHeight'; stageHeight &lt;= 1080 ? 270 : stageHeight &lt; 1440 ? 540 : 900"/>
		<style>
			<width value="560px"/>
		</style>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="32px"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<width value="100%"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/background_green.png"/>
				<background9Slice value="[1]"/>
				<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
				<itemWidth value="100%"/>
				<itemHeight value="48px"/>
				<wheelScrollSpeed value="16"/>
			</style>
			<bind name="style" value="'maxHeight'; listHeight"/>
			<bind name="generatorDH" value="CC.snowflakeSelected; 'ShipRowSelectableElement'; 'sorted'; {	_selectedShips: selectedShips_ship_id,
																							_isConfirmedList: true,
																							_showed: true,
																							_isSnowflakesModal: true	}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
				<marginTop value="40px"/>
				<marginBottom value="32px"/>
				<align value="center"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<alpha value="0.9"/>
				</style>
				<default_text value="IDS_SNOWFLAKES_TAKE_BONUSES_REWARDS_COLON"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="16px"/>
					<align value="center"/>
				</style>
				<bind name="repeat" value="rewards; 'RewardItemAdapter'"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDividerTwoPx">
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<style>
				<marginTop value="16px"/>
				<width value="100%"/>
				<align value="center"/>
			</style>
			<block>
				<style>
					<marginRight value="16px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '154px',
												_name: 'btn_ok',
												_label: 'IDS_YES',
												_enabled: true,
												_request: 'goToPort',
												_action: 'SSEProxyCommonUSS.dropBonusSnowflakes',
												_actionParams: {shipIds: selectedShips_ship_id},
												_focusIndex: 1,
												_defaultFocused: true}"/>
			</block>
			<block>
				<bind name="instance" value="'DefaultButton'; {	_width: '154px',
												_name: 'btn_cancel',
												_label: 'IDS_NO',
												_enabled: true,
												_focusIndex: 2}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>

	<!-- snowflakes_take_bonuses -->
	<block className="ModalWindowSnowflakesTakeBonuses">
		<bind name="lag" value="'lagAfterAddedToStage'; null; true; 0.4; 'addedToStage'; 3; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="collectionDH" value="CC.ownShip; 'shipsHaveSnowflakes'; 'shipsHaveSnowflakes.sorted'"/>
		<bind name="collectionDH" value="CC.snowflakeSelected; 'selectedShips'"/>
		<bind name="collectionFields" value="'selectedShips'; ['ship.id']"/>
		<bind name="collectionDH" value="CC.ownShip; 'playerShips'"/>
		<bind name="firstEntityDH" value="'bonusTagSeasonEntity'; CC.bonusTagSeason; 'snowflakeSeasonCollection'"/>
		<bind name="watchDH" value="'rewards';					['bonusTagSeasonEntity.rewardsStack.evChanged']; bonusTagSeasonEntity.rewardsStack.rewards"/>
		<bind name="watchDH" value="'currentSnowflakesCount';	['bonusTagSeasonEntity.bonusTagSeason.evChanged']; bonusTagSeasonEntity.bonusTagSeason.bonusSnowflakes"/>
		<bind name="watchDH" value="'bannerState';				['bonusTagSeasonEntity.bonusTagSeason.evBannerStateChanged']; bonusTagSeasonEntity.bonusTagSeason.bannerState"/>
		<bind name="watchDH" value="'minShipsCount';				['bonustagSeasonEntity.bonusTagSeason.evBannerStateChanged']; bonusTagSeasonEntity.bonusTagSeason.minShipsCount"/>
		<bind name="watch" value="'isActive'; !(currentSnowflakesCount == 0 || (currentSnowflakesCount &amp;&amp; bannerState == SC.Ui_common.SNOWFLAKES_BANNER_STATE.INACTIVE))"/>
		<bind name="watch" value="'shipsCount'; selectedShips_ship_id.length"/>
		<bind name="watch" value="'isSelected'; math.min(shipsHaveSnowflakes.length, currentSnowflakesCount) == shipsCount"/>
		<bind name="watch" value="'hasSelectedShips'; shipsCount &gt; 0"/>
		<bind name="watch" value="'isNotEnoughShips'; playerShips.length &lt; minShipsCount"/>
		<bind name="watch" value="'statusText'; isNotEnoughShips	? subst('IDS_SNOWFLAKES_TOOLTIP_DESCRIPTION_INFO', [], {_minShipsCount: minShipsCount}, minShipsCount)
												: 'IDS_SNOWFLAKES_SHIPS_NOT_ENOUGH_REWARDS_DESCRIPTION'"/>
		<bind name="watch" value="'isZeroShipsCollectionLength'; shipsHaveSnowflakes.length == 0"/>
		<bind name="watchDH" value="'bonusTagsFinishTime'; ['bonusTagSeasonEntity.bonusTagSeason.evChanged']; bonusTagSeasonEntity.bonusTagSeason.finishTime"/>
		<bind name="timeFormat" value="bonusTagsFinishTime; 'dd.MM.yy'; 'formattedBonusTagsFinishTime'; true"/>
		<styleClass value="$Fullsize"/>
		<style>
			<align value="center"/>
		</style>
		<block>
			<bind name="visible" value="!isZeroShipsCollectionLength"/>
			<style>
				<height value="100%"/>
				<align value="center|middle"/>
			</style>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 0*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 0 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'ModalWindowShortHeader'; {_header: toUpperCase(tr('IDS_SNOWFLAKES_TAKE_BONUSES_TITLE'))}"/>
			</block>
			<block>
				<style>
					<width value="560px"/>
				</style>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<height value="50px"/>
						<align value="center|middle"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<marginRight value="4px"/>
							<alpha value="0.9"/>
						</style>
						<default_text value="IDS_SNOWFLAKES_COUNTER_COLON"/>
					</block>
					<block>
						<style>
							<marginTop value="1px"/>
						</style>
						<bind name="instance" value="'PriceTag'; { priceInfo: {finalPrice: currentSnowflakesCount, currency: SC.Common.CURRENCIES.SNOWFLAKE}, _medium: true}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="visible" value="isActive"/>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<height value="50px"/>
						<align value="middle"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBold17NM"/>
						<style>
							<marginRight value="4px"/>
						</style>
						<bind name="class" value="'$FontColorBlueish'"/>
						<default_text value="IDS_SORTING_TYPE_COLON"/>
					</block>
					<block>
						<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
						<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
						<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
						<bind name="watch" value="'selectedSortingOrder'; userPrefs.shipsHaveSnowflakesSortOrder ? userPrefs.shipsHaveSnowflakesSortOrder
																								: 0"/>
						<bind name="watch" value="'selectedSortingDirection'; userPrefs.shipsHaveSnowflakesSortReverse	? userPrefs.shipsHaveSnowflakesSortReverse
																										: false"/>
						<bind name="catch" value="'ItemChooser.shipsSortSelected'; null; 'shipSortChanged'"/>
						<bind name="watch" value="'items'; [	'IDS_SORT_BY_LEVEL',
											'IDS_SORT_BY_NATION',
											'IDS_SORT_BY_SHIPTYPE',
											'IDS_SORT_BY_LASTBATTLETIME'	]"/>
						<style>
							<marginTop value="4px"/>
						</style>
						<bind name="instance" value="'ItemChooser'; {	_items: items,
														_choosedItemRenderer: 'DefaultTextChoosedItemRenderer',
														_listItemRenderer: 'TextListItemRenderer',
														_itemChooserTooltipText: 'IDS_HINT_SHIP_CAROUSEL_SORT',
														_name: 'bonusTagShipsOrdering',
														curIndex: selectedSortingOrder,
														curDirection: selectedSortingDirection,
														onItemSelectedEvent: 'shipsSortSelected'}"/>
						<bind name="action" value="'shipSortChanged'; 'resortBonusTagShipsCollections'; {sortOrder: _curItemIndex, sortReverse: _direction}"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<align value="right"/>
						</style>
						<bind name="instance" value="'SnowflakesShipsAutoSelectButton'; {_isSelected: isSelected}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 1.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<bind name="stageSize"/>
						<bind name="watch" value="'listHeight'; stageHeight &lt; 1080 ? 240 : stageHeight &lt; 1440 ? 520 : stageHeight &lt; 2000 ? 880 : 1220"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="style" value="'height'; math.min(shipsHaveSnowflakes.length * 48, listHeight) + 'px'"/>
						<block>
							<styleClass value="$FullsizeAbsolute"/>
							<style>
								<backgroundImage value="url:../service_kit/panel_backgrounds/background_green.png"/>
								<background9Slice value="[1]"/>
							</style>
						</block>
						<block>
							<styleClass value="$DefaultScrollBar"/>
							<styleClass value="$Fullsize"/>
							<style>
								<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
								<itemWidth value="100%"/>
								<itemHeight value="48px"/>
								<wheelScrollSpeed value="16"/>
								<overflow value="scroll"/>
								<marginTop value="-2px"/>
							</style>
							<bind name="controller" value="'lesta.unbound.controls.ControllerAutoScroll'"/>
							<bind name="event" value="'evScrollToFirstOnAutoSelect'; instantScrollToFirstItem"/>
							<bind name="generatorDH" value="CC.ownShip; 'ShipRowSelectableElement'; 'shipsHaveSnowflakes.sorted'; {	_needSelectionChange: true,
																													_selectedShips: selectedShips_ship_id,
																													_isAllSelected: isSelected,
																													_isLocked: !isActive,
																													_showed: true,
																													_isSnowflakesModal: true,
																													_hasMouseInstructions: true }"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="isActive &amp;&amp; !hasSelectedShips"/>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<height value="185px"/>
						<align value="center|middle"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault21NM"/>
						<style>
							<alpha value="0.9"/>
							<textAlign value="center"/>
						</style>
						<default_text value="IDS_SNOWFLAKES_TAKE_BONUSES_SELECT_SHIPS"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="isActive &amp;&amp; hasSelectedShips"/>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<marginTop value="40px"/>
						<marginBottom value="24px"/>
						<align value="center"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<alpha value="0.9"/>
						</style>
						<default_text value="IDS_SNOWFLAKES_TAKE_BONUSES_REWARDS_COLON"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginTop value="16px"/>
							<align value="center"/>
						</style>
						<bind name="repeat" value="rewards; 'RewardItemAdapter'; hasSelectedShips ? {} : null"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="visible" value="!isActive"/>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
						<marginTop value="32px"/>
						<marginBottom value="32px"/>
						<align value="center"/>
					</style>
					<block>
						<style>
							<marginBottom value="16px"/>
						</style>
						<bind name="instance" value="'StatusLine'; {	_text: 'IDS_SNOWFLAKES_SHIPS_NOT_ENOUGH_REWARDS_STATUS',
													_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION}"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefaultNM"/>
						<style>
							<width value="100%"/>
							<alpha value="0.9"/>
							<textAlign value="center"/>
						</style>
						<bind name="text" value="statusText"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 3.5*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 3.5 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<width value="100%"/>
					</style>
					<block className="HorizontalDividerTwoPx">
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
					<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
					<style>
						<marginTop value="16px"/>
						<width value="100%"/>
						<align value="center"/>
					</style>
					<block>
						<style>
							<marginRight value="16px"/>
						</style>
						<bind name="instance" value="'DefaultButton'; {	_width: '166px',
														_label: 'IDS_SNOWFLAKES_TAKE_BONUSES_BUTTON',
														_name: 'btn_takeBonuses',
														_enabled: hasSelectedShips &amp;&amp; isActive,
														_focusIndex: 1,
														_defaultFocused: true,
														_request: 'snowflakesConfirmChoice'}"/>
					</block>
					<block>
						<bind name="instance" value="'DefaultButton'; {	_width: '166px',
														_label: 'IDS_CLOSE_UPPER_CASE',
														_name: 'btn_cancel',
														_enabled: true,
														_focusIndex: 2}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="isZeroShipsCollectionLength"/>
			<styleClass value="$Fullsize"/>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 1*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 1 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$EyeLevelVAligned"/>
				<bind name="instance" value="'NoItemsComeBackLater'; isZeroShipsCollectionLength ? { _type: 'SNOWFLAKES_SHIPS',
																					_subText: 'IDS_NO_CURRENT_SNOWFLAKES_SHIPS_DESCRIPTION' }
																				: null"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 2*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<bind name="appear" value="'startHide'; 0.15; 2 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
				<style>
					<position value="absolute"/>
					<bottom value="64"/>
					<width value="100%"/>
					<align value="center"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '166px',
												_label: 'IDS_CLOSE_UPPER_CASE',
												_name: 'btn_cancel',
												_enabled: true,
												_defaultFocused: true,
												_focusIndex: 1}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!isZeroShipsCollectionLength"/>
			<bind name="appear" value="'addedToStage'; 0; 0; {alpha: 0}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'lagAfterAddedToStage'; 0.15; 4*0.075; {alpha: 0, top: 10}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="appear" value="'startHide'; 0.15; 4 * 0.055; {alpha: 1, top: 0}; {alpha: 0, top: -10}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<align value="center"/>
				<bottom value="720:12,1080:40ah"/>
			</style>
			<block>
				<style>
					<align value="middle"/>
				</style>
				<block>
					<style>
						<marginRight value="16px"/>
						<alpha value="0.75"/>
					</style>
					<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE,
												_text: subst('IDS_SUBST_SNOWFLAKES_DATE_FINISH_COLON', [], {date: formattedBonusTagsFinishTime})}"/>
				</block>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
						<backgroundSize value="fill"/>
						<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
					</style>
				</block>
				<block>
					<style>
						<marginLeft value="16px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
													_width: '184px',
													_label: 'IDS_SNOWFLAKES_RULES_LINK_TEXT',
													_request: 'showSnowflakeRules',
													_requestParams: { '_rulesType': 'SNOWFLAKES' },
													_enabled: true}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="SnowflakesShipsAutoSelectButton">
		<bind name="collectionDH" value="CC.ownShip; 'shipsHaveSnowflakes'; 'shipsHaveSnowflakes.sorted'"/>
		<bind name="firstEntityDH" value="'bonusTagSeasonEntity'; CC.bonusTagSeason; 'snowflakeSeasonCollection'"/>
		<bind name="watchDH" value="'currentSnowflakesCount'; ['bonusTagSeasonEntity.bonusTagSeason.evChanged']; bonusTagSeasonEntity.bonusTagSeason.bonusSnowflakes"/>
		<bind name="watch" value="'mouseInstructions'; _isSelected	? 'IDS_SNOWFLAKES_TOOLTIP_DESELECT_ALL_SHIPS'
													: subst('IDS_SNOWFLAKES_SELECT_SEVERAL_SHIPS',
														[], { shipsCount: math.min(shipsHaveSnowflakes.length, currentSnowflakesCount)}, math.min(shipsHaveSnowflakes.length, currentSnowflakesCount))"/>
		<bind name="catch" value="'evChangeSelectionShips'"/>
		<bind name="dispatch" value="'evChangeSelectionShips'; _isSelected ? '' : 'evScrollToFirstOnAutoSelect'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT,
											_text: mouseInstructions }"/>
		<bind name="instance" value="'DefaultButton'; {	_type: SC.Ui_styles.BUTTON_TYPE.SECONDARY,
										_size: 0,
										_width: _isSelected ? '86px' : '167px',
										_label: _isSelected ? 'IDS_SNOWFLAKES_UNINSTALL_ALL'
															: 'IDS_SNOWFLAKES_AUTOSELECT',
										_dispatch: 'evChangeSelectionShips',
										_action: 'selectFirstShips',
										_actionParams: {selectionState: !_isSelected},
										_enabled: true}"/>
	</block>
	<block className="SnowflakesRewardsTooltip">
		<bind name="watch" value="'instructionText'; _isSelected	? 'IDS_HINT_LEFT_DESELECT_SHIPS'
												: 'IDS_SNOWFLAKES_TOOLTIP_SELECT_SHIP'"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: 'IDS_SNOWFLAKES_SHIP_TOOLTIP_TITLE',
																_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT }"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDHRewards'; {_rewards: _rewards}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; { _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT, _text: instructionText }"/>
			</block>
		</block>
	</block>

	<!-- start_battle_button -->
	<block className="StartBattleButtonSmall">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="collectionDH" value="CC.ownShip; 'shipsInFormation'; 'shipsInFormation'"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'playerShipId'; ['dockEntity.shipSelection.evPlayerShipIdChanged']; dockEntity.shipSelection.playerShipId"/>
		<bind name="watchDH" value="'viewedShipId'; ['dockEntity.shipSelection.evViewedShipIdChanged']; dockEntity.shipSelection.viewedShipId"/>
		<bind name="collectionDH" value="CC.battleType; 'campaignBattleTypes'; 'campaign'"/>
		<bind name="collectionFields" value="'campaignBattleTypes'; ['battleType.type']"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'battleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watch" value="'selectedBattleType'; battleTypeEntity.battleType.type"/>
		<bind name="watchDH" value="'fightButtonDenyReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.fightButtonReasons"/>
		<bind name="watch" value="'isBattleTypeAllowrdForCampaigns'; isIn(selectedBattleType, campaignBattleTypes_battleType_type)"/>
		<bind name="watch" value="'buttonEnabled';	(	(fightButtonDenyReasons.length == 0) &amp;&amp;
										(operationsAccountLocked != true) &amp;&amp;
										(isBattleTypeAllowrdForCampaigns || !campaignBattleTypes)	) &amp;&amp;
									!_isLockedExternally"/>
		<bind name="tooltip" value="'StartButtonWarningsTooltip'; fightButtonDenyReasons.length	? { _warningsArr: fightButtonDenyReasons }
																				: null"/>
		<bind name="tooltip" value="'StartBattleTooltip'; buttonEnabled 	? {	_shipID: shipsInFormation.length &gt; 0	? shipsInFormation[0].ownShip.id
																									: playerShipId,
															_battleType: selectedBattleType,
															_battleTypeEntityId: battleTypeEntity.id,
															_instructionType: 'left' }
												 		: null"/>
		<bind name="instance" value="'DefaultButton'; {	_width: '96px',
										_type: SC.Ui_styles.BUTTON_TYPE.ACCENT,
										_enabled: buttonEnabled,
										_action: 'onBattleButtonClick',
										_name: 'buttonStartBattleSmall',
										_label: 'IDS_START_BATTLE'}"/>
	</block>
	<block className="BattleTypeChooser">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="entityDH" value="'selectedBattleTypeEntity'; selectedBattleTypes[0].id"/>
		<bind name="watch" value="'battleType'; selectedBattleTypeEntity.battleType.type"/>
		<bind name="watchDH" value="'selected'; 	['selectedBattleTypeEntity.battleType.evSelectionChanged']; selectedBattleTypeEntity.battleType.selected"/>
		<bind name="watchDH" value="'status'; 	['selectedBattleTypeEntity.battleType.evStatusChanged']; 	selectedBattleTypeEntity.battleType.status"/>
		<bind name="watchDH" value="'battleTypeGameParamId'; 	['']; 	selectedBattleTypeEntity.battleType.battleTypeGameParamId"/>
		<bind name="watch" value="'isDisabled'; status == 3"/>
		<bind name="watchDH" value="'selectedEventBattleName'; ['selectedBattleTypeEntity.eventBattleState.evChanged'];	selectedBattleTypeEntity.eventBattleState.name"/>
		<bind name="watch" value="'isRandomBattle'; 		battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE"/>
		<bind name="watch" value="'isCooperativeBattle';	battleType == SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE"/>
		<bind name="watch" value="'isRankedBattle';		battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE"/>
		<bind name="watch" value="'isPVEBattle';			battleType == SC.Common.BATTLE_TYPES.PVE_BATTLE"/>
		<bind name="watch" value="'isClanBattle';		battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE"/>
		<bind name="watch" value="'isEventBattle';		battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE"/>
		<bind name="watch" value="'isBrawlBattle';		battleType == SC.Common.BATTLE_TYPES.BRAWL_BATTLE"/>
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evStateChanged']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evInsetLabelChanged']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evNotReadyWindowStateChanged']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="primaryEntityDH" value="'trainingRouteEntity'; CC.route; SC.Ui_windows.ROUTE.TRAINING_ROOM"/>
		<bind name="watchDH" value="'trainingRoomActiveChild'; ['trainingRouteEntity.route.evActiveChildChanged']; trainingRouteEntity.route.activeChild"/>
		<bind name="watch" value="'isActiveTrainingBattle'; trainingRoomEntity &amp;&amp; battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watch" value="'isCommonBattle';		isRandomBattle || isCooperativeBattle"/>
		<bind name="primaryEntityDH" value="'unseenBattleTypes'; CC.newContent; SC.Common.CONTENT_CATEGORY.BATTLE_TYPES"/>
		<bind name="watchDH" value="'unseenBattleTypesCount'; ['unseenBattleTypes.newContent.evCountChanged']; unseenBattleTypes.newContent.count"/>
		<bind name="watch" value="'isNew'; 	unseenBattleTypesCount"/>
		<bind name="watch" value="'pveBattleButtonText'; tr('IDS_' + toUpperCase(selectedBattleTypeEntity.operation.gpName) + '_NAME')"/>
		<bind name="watch" value="'battleTypeLabel'; isPVEBattle		? pveBattleButtonText :
									isEventBattle	? tr(toUpperCase('IDS_' + selectedEventBattleName))
													: tr(toUpperCase('IDS_' + battleType))"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; battleTypeGameParamId"/>
		<bind name="watchDH" value="'pveOperationCustomIconName'; ['operationEntity.operation.evStatusChanged']; operationEntity.operation.customIconName"/>
		<bind name="watch" value="'battleTypeIcon';	pveOperationCustomIconName	?	pveOperationCustomIconName :
									isEventBattle				?	selectedEventBattleName
																:	battleType"/>
		<bind name="primaryEntityDH" value="'featureEntity_3'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[3]"/>
		<bind name="watchDH" value="'feature_3'; ['featureEntity_3.accountFeature.evStateChanged']; featureEntity_3.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_3"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 3}"/>
		<bind name="primaryEntityDH" value="'featureEntity_16'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[16]"/>
		<bind name="watchDH" value="'feature_16'; ['featureEntity_16.accountFeature.evStateChanged']; featureEntity_16.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_16"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 16}"/>
		<bind name="primaryEntityDH" value="'featureEntity_24'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[24]"/>
		<bind name="watchDH" value="'feature_24'; ['featureEntity_24.accountFeature.evStateChanged']; featureEntity_24.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_24"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 24}"/>
		<bind name="primaryEntityDH" value="'featureEntity_27'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[27]"/>
		<bind name="watchDH" value="'feature_27'; ['featureEntity_27.accountFeature.evStateChanged']; featureEntity_27.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_27"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 27}"/>
		<bind name="primaryEntityDH" value="'featureEntity_28'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[28]"/>
		<bind name="watchDH" value="'feature_28'; ['featureEntity_28.accountFeature.evStateChanged']; featureEntity_28.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_28"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 28}"/>
		<bind name="primaryEntityDH" value="'featureEntity_31'; CC.accountFeature; SC.Common.ACCOUNT_FEATURE.BIT_MASKS[31]"/>
		<bind name="watchDH" value="'feature_31'; ['featureEntity_31.accountFeature.evStateChanged']; featureEntity_31.accountFeature.state"/>
		<bind name="watch" value="'featureState'; feature_31"/>
		<bind name="action" value="''; '' ? 'featureSeen' : null; {featureIndex: 31}"/>
		<bind name="watch" value="'btnChooserEnable'; (isCommander || !divisionDataEntity) &amp;&amp; !_isLockedExternally"/>
		<bind name="tooltip" value="'EventBattleTypeTooltip';	btnChooserEnable &amp;&amp; isEventBattle	?	{ _battleTypeEntityId: selectedBattleTypeEntity.id, _isFromPort: true } : null"/>
		<bind name="tooltip" value="'RankedBattleTypeTooltip';	btnChooserEnable &amp;&amp; isRankedBattle	?	{ _battleTypeEntityId: selectedBattleTypeEntity.id, _isFromPort: true } : null"/>
		<bind name="tooltip" value="'ClanBattleTypeTooltip';		btnChooserEnable &amp;&amp; isClanBattle	?	{ _battleTypeEntityId: selectedBattleTypeEntity.id, _isFromPort: true } : null"/>
		<bind name="tooltip" value="'PVEOperationTooltip';		btnChooserEnable &amp;&amp; isPVEBattle		?	{ _battleTypeEntityId: selectedBattleTypeEntity.id, _isFromPort: true } : null"/>
		<bind name="tooltip" value="'BrawlBattleTypeTooltip';	btnChooserEnable &amp;&amp; isBrawlBattle	?	{ _battleTypeEntityId: selectedBattleTypeEntity.id, _isFromPort: true } : null"/>
		<bind name="tooltip" value="'CommonBattleTypeTooltip';	btnChooserEnable &amp;&amp; isCommonBattle	?	{ _battleTypeEntityId: selectedBattleTypeEntity.id, _isFromPort: true } : null"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; !btnChooserEnable 	? { _text: 'IDS_STARTBATTLE_LOCK_REASON_NOT_COMMANDER_DIVISION',
																	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING }
																: null"/>
		<bind name="tooltip" value="'BattletypeInfotip'; (btnChooserEnable &amp;&amp; !_isFromPort) ? {} : null; TooltipBehaviour.verticalInfoWidget; 'battletypeInfotipIsVisible'"/>
		<style>
			<width value="100%f"/>
			<height value="60px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="style" value="'hitTest'; !isActiveTrainingBattle"/>
		<bind name="action" value="'click'; (btnChooserEnable &amp;&amp; _isFromPort) ? 'navigateTo' : null; {route: SC.Ui_windows.ROUTE.BATTLE_TYPE_CHOOSER_SHOW}"/>
		<bind name="soundSet" value="'button_battle_type'"/>
		<block>
			<bind name="style" value="'alpha'; btnChooserEnable ? 1 : 0.7"/>
			<style>
				<width value="100%f"/>
				<height value="100%f"/>
				<flow value="horizontal"/>
				<marginTop value="11px"/>
			</style>
			<bind name="name" value="'ButtonDock'"/>
			<block>
				<bind name="name" value="isPVEBattle ? 'operationType_' + operationEntity.operation.gpName : ''"/>
				<style>
					<width value="35px"/>
					<height value="35px"/>
					<backgroundSize value="cover"/>
					<marginTop value="2px"/>
					<hitTest value="false"/>
				</style>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.07; {alpha: 0.85}; {alpha: 1.0}"/>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/battle_types/' + battleTypeIcon + (isDisabled ? '_disabled' : '') +  '_small.png'"/>
			</block>
			<block>
				<style>
					<width value="1280:7,1920:11aw"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%f"/>
					<hitTest value="false"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<style>
						<width value="100%f"/>
					</style>
					<block type="text">
						<bind name="name" value="'battleTypeChooserBtn'"/>
						<style>
							<width value="100%f"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextDefaultBold17NM"/>
						<bind name="class" value="'$FontColorBlueish'"/>
						<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.07; {alpha: 0.85}; {alpha: 1.0}"/>
						<bind name="text" value="battleTypeLabel"/>
					</block>
					<block>
						<bind name="fade" value="isNew; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
						<style>
							<position value="absolute"/>
							<top value="-8px"/>
							<right value="-38px"/>
						</style>
						<bind name="instance" value="'MarkerNewAttention'; _isFromPort ? {} : null"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block type="text">
					<bind name="visible" value="!isActiveTrainingBattle"/>
					<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.07; {alpha: 0.75}; {alpha: 1.0}"/>
					<styleClass value="$TextDefault13NM"/>
					<bind name="class" value="'$FontColorStrongBlueish'"/>
					<style>
						<width value="100%f"/>
						<multiline value="false"/>
						<marginTop value="8"/>
					</style>
					<bind name="text" value="'IDS_CHOOSE_BATTLE_TYPE'"/>
				</block>
				<bind name="primaryEntityDH" value="'pvpIntroNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.PVP_INTRO"/>
				<bind name="primaryEntityDH" value="'repeatPvpIntroNewTip';		CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.PVP_INTRO_REPEAT"/>
				<bind name="primaryEntityDH" value="'pveIntroNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.PVE_INTRO"/>
				<bind name="primaryEntityDH" value="'pveIntroRepeatNewTip';		CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.PVE_INTRO_REPEAT"/>
				<bind name="primaryEntityDH" value="'rankIntroNewTip';			CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.RANK_INTRO"/>
				<bind name="primaryEntityDH" value="'rankIntroRepeatNewTip';		CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.RANK_INTRO_REPEAT"/>
				<bind name="primaryEntityDH" value="'battleChooserBlockedTip';	CC.newGuidingTip; SC.Context_guiding_tip.TIP_TYPE.BATTLE_TYPE_BLOCKED_DIVISION"/>
				<bind name="watchDH" value="'isPvpIntroNewTipActive';			['pvpIntroNewTip.newGuidingTip.evChanged']; 		pvpIntroNewTip.newGuidingTip.isActive"/>
				<bind name="watchDH" value="'isRepeatPvpIntroNewTipActive';		['repeatPvpIntroNewTip.newGuidingTip.evChanged']; 	repeatPvpIntroNewTip.newGuidingTip.isActive"/>
				<bind name="watchDH" value="'isPVEIntroNewTipActive';			['pveIntroNewTip.newGuidingTip.evChanged']; 		pveIntroNewTip.newGuidingTip.isActive"/>
				<bind name="watchDH" value="'isPVEIntroRepeatNewTipActive';		['pveIntroRepeatNewTip.newGuidingTip.evChanged']; 	pveIntroRepeatNewTip.newGuidingTip.isActive"/>
				<bind name="watchDH" value="'isRankIntroNewTipActive';			['rankIntroNewTip.newGuidingTip.evChanged']; 		rankIntroNewTip.newGuidingTip.isActive"/>
				<bind name="watchDH" value="'isRankIntroRepeatNewTipActive';		['rankIntroRepeatNewTip.newGuidingTip.evChanged']; 	rankIntroRepeatNewTip.newGuidingTip.isActive"/>
				<bind name="watchDH" value="'isBattleChooserBlockedTipActive';	['battleChooserBlockedTip.newGuidingTip.evChanged'];battleChooserBlockedTip.newGuidingTip.isActive"/>
				<bind name="watch" value="'newTipId'; 	isPvpIntroNewTipActive 				? SC.Context_guiding_tip.TIP_TYPE.PVP_INTRO :
										isRepeatPvpIntroNewTipActive 		? SC.Context_guiding_tip.TIP_TYPE.PVP_INTRO_REPEAT :
										isPVEIntroNewTipActive				? SC.Context_guiding_tip.TIP_TYPE.PVE_INTRO :
										isPVEIntroRepeatNewTipActive		? SC.Context_guiding_tip.TIP_TYPE.PVE_INTRO_REPEAT :
										isRankIntroNewTipActive 			? SC.Context_guiding_tip.TIP_TYPE.RANK_INTRO :
										isRankIntroRepeatNewTipActive 		? SC.Context_guiding_tip.TIP_TYPE.RANK_INTRO_REPEAT :
										isBattleChooserBlockedTipActive 	? SC.Context_guiding_tip.TIP_TYPE.BATTLE_TYPE_BLOCKED_DIVISION
																			: SC.Context_guiding_tip.TIP_TYPE.NONE"/>
				<bind name="watch" value="'isNewTipVisible'; _isFromPort &amp;&amp; newTipId != SC.Context_guiding_tip.TIP_TYPE.NONE"/>
				<bind name="instance" value="'NewGuidingTipHub'; isNewTipVisible	? {	_newTipId: newTipId,
																	_tipPositioning: 'bottom', 
																	_offset: isBattleChooserBlockedTipActive ? 0 : 5,
																	_noArrow: isBattleChooserBlockedTipActive,
																	_oppositeDirectionOffset: isBattleChooserBlockedTipActive ? 128 : 0}
																: null"/>
			</block>
		</block>
	</block>
	<block className="BattletypeInfotip">
		<bind name="firstEntityDH" value="'dockDataEntity'; CC.dockData"/>
		<bind name="watchDH" value="'isShipOverviewEnabled';  ['dockDataEntity.dockData.evIsShipOverviewEnabledChanged']; dockDataEntity.dockData.isShipOverviewEnabled"/>
		<bind name="transition" value="isShipOverviewEnabled; isShipOverviewEnabled ? 0.3 : 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; !isShipOverviewEnabled &amp;&amp; !(inPort) ? 0.15 : 0.3"/>
		<bind name="style" value="'hitTest'; !isShipOverviewEnabled"/>
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<style>
			<width value="288px"/>
		</style>
		<block className="InfotipBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="InfotipPanelBg">
				<bind name="primaryEntityDH" value="'isBlurOptionEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
				<bind name="watchDH" value="'isBlurOptionEnabled'; ['isBlurOptionEnabledEntity.preference.evValueChanged']; isBlurOptionEnabledEntity.preference.value"/>
				<bind name="primaryEntityDH" value="'isUIContrastOptionEnabledEntity'; CC.preference; 'graphics.GUI.contrast'"/>
				<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['isUIContrastOptionEnabledEntity.preference.evValueChanged']; isUIContrastOptionEnabledEntity.preference.value"/>
				<bind name="watch" value="'isHighContrast'; isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
				<block className="DeclareBlurLayer">
					<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
					<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
					<bind name="visible" value="isBlurEnabled"/>
					<block className="transparentPixel" type="native">
						<bind name="blurLayer" value="0"/>
					</block>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<style>
					<margin value="-2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
					<bind name="instance" value="'InfotipBlurmap'; !isHighContrast ? {} : null"/>
				</block>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<background9Slice value="[3]"/>
					</style>
					<bind name="style" value="'backgroundImage'; !isHighContrast	? 'url:../service_kit/panel_backgrounds/infotip_panel.png'
														: 'url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png'"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<margin value="-2px"/>
				</style>
				<block className="InfotipPins">
					<styleClass value="$FullsizeAbsolute"/>
					<params>
						<param name="name" value="pinContainer"/>
					</params>
					<block>
						<params>
							<param name="name" value="pinTop"/>
						</params>
						<style>
							<position value="absolute"/>
							<top value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinBottom"/>
						</params>
						<style>
							<position value="absolute"/>
							<bottom value="-22px"/>
						</style>
						<bind name="scaleY" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_vert" type="native">
								<style>
									<position value="absolute"/>
									<width value="22px"/>
									<height value="12px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapVert'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<width value="22px"/>
								<height value="12px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_vert.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinLeft"/>
						</params>
						<style>
							<position value="absolute"/>
							<left value="-10px"/>
						</style>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
					<block>
						<params>
							<param name="name" value="pinRight"/>
						</params>
						<style>
							<position value="absolute"/>
							<right value="-10px"/>
						</style>
						<bind name="scaleX" value="-1"/>
						<block>
							<style>
								<position value="absolute"/>
							</style>
							<block className="mc_blurmap_infotip_arrow_hor" type="native">
								<style>
									<position value="absolute"/>
									<width value="12px"/>
									<height value="22px"/>
								</style>
								<bind name="visible" value="false"/>
							</block>
							<bind name="instance" value="'InfotipPinBlurmapHor'; isBlurOptionEnabled ? {} : null"/>
						</block>
						<block>
							<bind name="alpha" value="isBlurOptionEnabled ? 1 : 1.35"/>
							<style>
								<position value="absolute"/>
								<width value="12px"/>
								<height value="22px"/>
								<backgroundImage value="url:../service_kit/panel_backgrounds/infotip_pin_hor.png"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="collectionRepeatDH" value="CC.battleType; 'ListBattleTypeRenderer'; 'campaign'; { _lastTypeIndex: battleTypes.length - 1 }"/>
		</block>
	</block>
	<block className="ListBattleTypeRenderer">
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
		<bind name="dataRefDH" value="'battleTypeEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'battleType'; []; battleTypeEntity.battleType.type"/>
		<bind name="watchDH" value="'battleTypeGameParamId'; []; battleTypeEntity.battleType.battleTypeGameParamId"/>
		<bind name="watchDH" value="'isSelected'; ['battleTypeEntity.battleType.evSelectionChanged']; battleTypeEntity.battleType.selected"/>
		<bind name="watchDH" value="'status'; ['battleTypeEntity.battleType.evStatusChanged']; battleTypeEntity.battleType.status"/>
		<bind name="watchDH" value="'battleTypeDenyReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.battleTypeReasons"/>
		<bind name="watchDH" value="'featureId'; []; battleTypeEntity.battleType.featureId"/>
		<bind name="watchDH" value="'selectedEventBattleName'; ['battleTypeEntity.eventBattleState.evChanged'];	battleTypeEntity.eventBattleState.name"/>
		<bind name="primaryEntityDH" value="'accountFeatureEntity'; CC.accountFeature; featureId"/>
		<bind name="watchDH" value="'featureState'; ['accountFeatureEntity.accountFeature.evStateChanged']; accountFeatureEntity.accountFeature.state"/>
		<bind name="visible" value="featureState != 'locked' || featureId == null"/>
		<bind name="action" value="'click'; 'setBattleType'; {battleType: battleType, battleTypeGameParamId: battleTypeGameParamId}"/>
		<bind name="watch" value="'isBright'; (isSelected || rollOver) &amp;&amp; status != 3"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="tooltip" value="'SimpleStatusTooltip'; status != 3	? {	_text: 'IDS_CHOOSE_BATTLE_TYPE',
																				_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT }
																			: null"/>
		<block>
			<bind name="name" value="'typeItem' + battleType"/>
			<bind name="soundSet" value="'dropdown'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
				<background9Slice value="[1]"/>
			</style>
			<bind name="style" value="'hitTest'; status != 3"/>
			<bind name="alpha" value="rollOver	? 1 :
					isSelected	? 0.7
								: 0"/>
		</block>
		<block>
			<bind name="transition" value="isBright; 0.1; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}"/>
			<style>
				<width value="100%"/>
				<marginLeft value="12px"/>
				<marginTop value="12px"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="watch" value="'battleTypeIcon';	battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE	?	status == 3 	? 'RankedBattle_disabled'
																																			: SC.Common.BATTLE_TYPES.RANKED_BATTLE :
												battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE	?	status == 3	? 'ClanBattle_disabled'
																																			: SC.Common.BATTLE_TYPES.CLAN_BATTLE :
												battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE	?	status == 3	? 'RandomBattle_disabled'
																																			: SC.Common.BATTLE_TYPES.RANDOM_BATTLE :
												battleType == SC.Common.BATTLE_TYPES.PVE_BATTLE 	?	status == 3	? 'PVEBattle_disabled'
																																			: 'PVEBattle' :
												battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE	?	status == 3	? 'EventBattle_disabled'
																																			: selectedEventBattleName
																									:	battleType"/>
					<style>
						<width value="80px"/>
						<height value="80px"/>
						<marginBottom value="12px"/>
						<backgroundSize value="cover"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:../service_kit/battle_types/' + battleTypeIcon + '.png'"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginLeft value="8px"/>
						<marginRight value="9px"/>
					</style>
					<block type="text">
						<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) || isSelected; 0.1; {alpha: 0.9}; {alpha: 1}; {alpha: 0.9}; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD"/>
						<styleClass value="$TextDefaultBold19NM"/>
						<style>
							<width value="100%"/>
							<marginTop value="8px"/>
						</style>
						<bind name="alpha" value="isSelected ? 1 : 0.9"/>
						<bind name="style" value="'textColor'; isSelected ? 0xFFFFCC66 : 0xFFFFFFFF"/>
						<bind name="text" value="tr(toUpperCase('IDS_' + battleType))"/>
					</block>
					<block type="text">
						<style>
							<maxWidth value="182"/>
							<marginTop value="12px"/>
							<marginBottom value="12px"/>
							<alpha value="0.75"/>
						</style>
						<styleClass value="$TextDefault13NM"/>
						<bind name="text" value="tr(toUpperCase('IDS_' + battleType + '_DESCRIPTION'))"/>
					</block>
					<block>
						<bind name="visible" value="isSelected"/>
						<style>
							<position value="absolute"/>
							<top value="5px"/>
							<right value="2px"/>
							<width value="19px"/>
							<height value="19px"/>
						</style>
						<bind name="style" value="'backgroundImage'; 'url:../service_kit/unified_status_icons/icon_check.png'"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="battleTypeDenyReasons.length &gt; 0 || battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE"/>
				<style>
					<width value="100%"/>
					<marginLeft value="4px"/>
					<marginBottom value="16px"/>
				</style>
				<bind name="instance" value="'BattletypeDenyReason';
				battleTypeDenyReasons.length &gt; 0				? { _neutral: false,
																	_reasonText: battleTypeDenyReasons[0],
																	_maxWidth: 270 } : null"/>
			</block>
			<block>
				<bind name="visible" value="_lastTypeIndex != $index"/>
				<style>
					<width value="100%"/>
					<bottom value="0px"/>
					<marginLeft value="-1px"/>
					<marginRight value="-1px"/>
					<position value="absolute"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="BattletypeDenyReason">
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<leading value="-3"/>
			</style>
			<bind name="style" value="'textColor'; _neutral ? SC.Ui_styles.SERVICE_COLORS.WHITE : SC.Ui_styles.SERVICE_COLORS.ORANGE"/>
			<bind name="style" value="'alpha'; _neutral ? 0.9 : 1"/>
			<bind name="style" value="'textAlign'; _textAlign ? _textAlign : 'left'"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 250"/>
			<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; (_neutral ? _reasonText : ('[icon] ' + _reasonText))"/>
		</block>
	</block>

	<!-- switch -->
	<block className="UserPrefsSwitchWithLabel">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'state'; !!userPrefs[_userPrefName]"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipData"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_enabled &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_enabled &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<block>
			<bind name="style" value="'alpha'; _enabled ? 1: 0.7"/>
			<block type="text">
				<bind name="class" value="_textClass ? _textClass : '$TextDefaultNM'"/>
				<style>
					<marginRight value="8px"/>
					<alpha value="0.75"/>
				</style>
				<bind name="text" value="_label"/>
			</block>
			<block>
				<style>
					<marginBottom value="-3px"/>
					<marginTop value="-4px"/>
				</style>
				<bind name="instance" value="'SwitchView'; {_state: state}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="-3px"/>
				<marginTop value="-4px"/>
			</style>
			<block>
				<bind name="visible" value="_enabled"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="soundSet" value="'switch_default'"/>
				<bind name="action" value="'click'; 'setUserPref'; {value: !state, name: _userPrefName}"/>
			</block>
		</block>
	</block>
	<block className="SwitchWithRightLabel">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged']; resourceEntity.accountResource.operationsLocked"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipData"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_enabled &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_enabled &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<block>
			<bind name="style" value="'alpha'; _enabled ? 1: 0.7"/>
			<block>
				<style>
					<marginBottom value="-3px"/>
					<marginTop value="-4px"/>
					<marginRight value="8px"/>
				</style>
				<bind name="instance" value="'SwitchView'; { _state: _state}"/>
			</block>
			<block type="text">
				<bind name="class" value="_textClass ? _textClass : '$TextDefaultNM'"/>
				<style>
					<alpha value="0.75"/>
				</style>
				<bind name="text" value="_label"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="-3px"/>
				<marginTop value="-4px"/>
			</style>
			<block>
				<bind name="visible" value="_enabled &amp;&amp; !operationsAccountLocked"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="soundSet" value="'switch_default'"/>
				<bind name="dispatch" value="'click'; _eventName ? _eventName : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
				<bind name="event" value="'click'; _method ? _method : null"/>
				<bind name="request" value="'click'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
				<bind name="action" value="'click'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			</block>
		</block>
	</block>
	<block className="SwitchWithLeftLabel">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged']; resourceEntity.accountResource.operationsLocked"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipData"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'; null; 'ct_'"/>
		<bind name="var" value="{
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_enabled &amp;&amp; ct_mouseDown &amp;&amp; !false	? ctMouseDown :
							_enabled &amp;&amp; (ct_rollOver || false)	? ctRollOver
																		: {}"/>
		<block>
			<bind name="style" value="'alpha'; _enabled ? 1: 0.7"/>
			<block type="text">
				<bind name="class" value="_textClass ? _textClass : '$TextDefaultNM'"/>
				<style>
					<marginRight value="8px"/>
					<alpha value="0.75"/>
				</style>
				<bind name="text" value="_label"/>
			</block>
			<block>
				<style>
					<marginBottom value="-3px"/>
					<marginTop value="-4px"/>
				</style>
				<bind name="instance" value="'SwitchView'; {_state: _state}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="-3px"/>
				<marginTop value="-4px"/>
			</style>
			<block>
				<bind name="visible" value="_enabled &amp;&amp; !operationsAccountLocked"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="soundSet" value="'switch_default'"/>
				<bind name="dispatch" value="'click'; _eventName ? _eventName : null; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.UP"/>
				<bind name="event" value="'click'; _method ? _method : null"/>
				<bind name="request" value="'click'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
				<bind name="action" value="'click'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			</block>
		</block>
	</block>
	<block className="SwitchView">
		<style>
			<backgroundImage value="url:../service_kit/switch/switch_bg.png"/>
			<background9Slice value="[7]"/>
			<width value="36px"/>
			<height value="20px"/>
		</style>
		<block>
			<style>
				<backgroundImage value="url:../service_kit/switch/switch_bg_on.png"/>
				<background9Slice value="[7]"/>
				<width value="22px"/>
				<height value="20px"/>
				<position value="absolute"/>
			</style>
			<bind name="transition" value="_state; 0.07; {alpha: 0}; {alpha: 1}; {alpha: 0}"/>
		</block>
		<block>
			<style>
				<backgroundImage value="url:../service_kit/switch/switch_btn.png"/>
			</style>
			<bind name="transition" value="_state; 0.07; {x: 0}; {x: 16}; {x: 0}"/>
		</block>
	</block>

	<!-- tabs -->
	<block className="MainTabButton">
		<bind name="watch" value="'tabBarSoundSet'; 'main_tab_' + _actionParams.inset"/>
		<bind name="watch" value="'newContentCounter'; _newContentCounter &gt; 0 &amp;&amp; !(_hideContentCounter &amp;&amp; _selected) ? _newContentCounter : 0"/>
		<bind name="watch" value="'isNewContentCounter'; newContentCounter &gt; 0 &amp;&amp; !_isNewMarker &amp;&amp; !_isAttentionMarker"/>
		<bind name="name" value="_name"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _statusTooltipData ? _statusTooltipData : null"/>
		<bind name="style" value="'width'; _width ? _width : '143px'"/>
		<bind name="style" value="'height'; _height ? _height : '25px'"/>
		<style>
			<align value="center|middle"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="mouseDown; 0.05; {alpha: 1}; {alpha: 0.7}"/>
			<bind name="name" value="_selected"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 1}; {alpha: 1.75}"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="transition" value="_selected || rollOver; 0.05; {alpha: 0}; {alpha: 0.7}"/>
					<style>
						<backgroundImage value="url:../service_kit/panel_backgrounds/menu_item_panel.png"/>
						<background9Slice value="[2,2]"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<block type="text">
				<styleClass value="$TabButtonFontUp"/>
				<style>
					<multiline value="false"/>
					<hitTest value="false"/>
				</style>
				<bind name="class" value="	rollOver	? '$FontColorWhite' :
							_selected	? '$FontColorDefaultButtonUp'
										: '$FontColorBlueish'"/>
				<bind name="alpha" value="	_disabled || mouseDown	? 0.45 :
							_selected				? 1
													: 0.9"/>
				<bind name="text" value="toUpperCase(tr(_label))"/>
			</block>
			<block>
				<bind name="fade" value="isNewContentCounter; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
				<style>
					<position value="absolute"/>
					<right value="-2px"/>
					<top value="-6px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
					</style>
					<bind name="instance" value="'MarkerNewCounter'; { _newContentCounter: _newContentCounter }"/>
				</block>
			</block>
			<block>
				<bind name="fade" value="_isNewMarker; 0.15; { alpha: 0, top: 10 }; { alpha: 1, top: 0 }; { alpha: 0, top: -10 }; SC.Common.UB1_EASING_FUNCTIONS.IN_QUAD; 0"/>
				<style>
					<position value="absolute"/>
					<right value="-38px"/>
					<top value="-6px"/>
				</style>
				<bind name="instance" value="'MarkerNewAttention'; { }"/>
			</block>
			<block>
				<bind name="fade" value="_isAttentionMarker &amp;&amp; !_isNewMarker; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
				<style>
					<position value="absolute"/>
					<right value="-24px"/>
					<top value="-8px"/>
				</style>
				<bind name="instance" value="'MarkerAttention'; { _size: 0 }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="soundSet" value="'button_tab'"/>
			<bind name="style" value="'hitTest'; !(_disabled || _selected)"/>
			<bind name="action" value="'click';		_action 	? _action : null; 	_actionParams 	? _actionParams : {}"/>
			<bind name="request" value="'click'; 	_request 	? _request : null; 	_requestParams 	? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; 	_dispatch 	? _dispatch : null; _dispatchParams ? _dispatchParams : null"/>
		</block>
	</block>
	<block className="TextSwitchTab">
		<bind name="watch" value="'tabBarSoundSet'; 'main_tab_' + _actionParams.inset"/>
		<bind name="name" value="_name"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; _statusTooltipData ? _statusTooltipData : null"/>
		<bind name="style" value="'width'; _width ? _width : '93px'"/>
		<bind name="style" value="'height'; _height ? _height : '23px'"/>
		<style>
			<backgroundColor value="0x01000000"/>
			<align value="middle"/>
		</style>
		<block>
			<bind name="name" value="_selected"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="mouseDown; 0.05; {alpha: 1}; {alpha: 0.7}"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.05; {alpha: 0.65}; {alpha: 1}"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<background9Slice value="[3,2]"/>
					</style>
					<bind name="transition" value="!_disabled &amp;&amp; (_selected || rollOver); 0.05; {alpha: 0}; {alpha: 1}"/>
					<bind name="style" value="'backgroundImage'; _isReadyBtn ? 'url:../service_kit/buttons/text_switcher/over.png'
															: 'url:../service_kit/buttons/text_switcher/over_orange.png'"/>
				</block>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TabButtonSmallFontUp"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<multiline value="false"/>
				<hitTest value="false"/>
			</style>
			<bind name="class" value="	_disabled								? '$FontColorWhite' :
						rollOver &amp;&amp; !_selected					? '$FontColorWhite' :
						_selected &amp;&amp; _isReadyBtn				? '$FontColorGreen' :
						_selected &amp;&amp; !_isReadyBtn				? '$FontColorCompareNegative'
																: '$FontColorBlueish'"/>
			<bind name="style" value="'fontSize';	_size == 2	? '25'
														: '13'"/>
			<bind name="alpha" value="	_disabled	? 0.25	:
						mouseDown	? 0.45	:
						_selected	? 1
									: 0.9"/>
			<bind name="text" value="toUpperCase(tr(_label))"/>
		</block>
		<block>
			<bind name="controller" value="'lesta.unbound.controls.UbInteractiveController'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="soundSet" value="'button_text_switch'"/>
			<bind name="style" value="'hitTest'; !(_disabled || (!_selectedClickable &amp;&amp; _selected))"/>
			<bind name="action" value="'click';		_action 	? _action : null; 	_actionParams 	? _actionParams : {}"/>
			<bind name="request" value="'click'; 	_request 	? _request : null; 	_requestParams 	? _requestParams : {}"/>
			<bind name="dispatch" value="'click'; 	_dispatch 	? _dispatch : null; _dispatchParams ? _dispatchParams : null"/>
		</block>
	</block>

	<!-- tooltip -->
	<block className="MultipleWarningsTooltip">
		<styleClass value="$WarningTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block>
				<bind name="repeat" value="_warningsArr; 'SimpleWarningText'; {}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="SimpleWarningText">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="'$FontColorOrange'"/>
			<style>
				<maxWidth value="240"/>
				<leading value="-3"/>
			</style>
			<bind name="text" value="$value"/>
		</block>
	</block>
	<block className="StartButtonWarningsTooltip">
		<styleClass value="$WarningTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !isBlurOptionEnabled"/>
		<bind name="watch" value="'isBlurEnabled'; isBlurOptionEnabled &amp;&amp; !isInBattle"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipSystemBlur'; isBlurEnabled ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="isHighContrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!(isHighContrast)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block>
				<params>
					<param name="name" value="MultipleWarningsTooltip"/>
				</params>
				<bind name="repeat" value="_warningsArr; 'StartButtonWarningText'; {}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="StartButtonWarningText">
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'cbs_primeTimeStartTime'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.primeTimeStartTime"/>
		<bind name="watchDH" value="'cbs_primeTimeFinishTime'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.primeTimeFinishTime"/>
		<bind name="countdown" value="cbs_primeTimeStartTime; 'startPrimeTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
		<bind name="countdown" value="cbs_primeTimeFinishTime; 'finishPrimeTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="'$FontColorOrange'"/>
			<style>
				<maxWidth value="240"/>
				<leading value="-3"/>
			</style>
			<bind name="text" value="$value == 'IDS_CLAN_BATTLES_PRIMETIME_STARTS_IN'	?	subst('IDS_CLAN_BATTLES_PRIMETIME_STARTS_IN', [], {timeLeft: startPrimeTimeText}) 
																		:	$value"/>
		</block>
	</block>
	<block className="PlayerTooltipInvitationCountdown">
		<bind name="countdown" value="_expirationTime; 'countdownText'; 'mm:ss'"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<marginTop value="-5px"/>
					<marginBottom value="-9px"/>
				</style>
				<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: true}"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBoldNM"/>
				<style>
					<marginLeft value="4px"/>
					<maxWidth value="158"/>
					<leading value="-3"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="_text"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block type="text">
			<styleClass value="$AlignRight"/>
			<styleClass value="$TextDefaultBoldNM"/>
			<style>
				<alpha value="0.9"/>
			</style>
			<bind name="pureText" value="countdownText"/>
		</block>
	</block>

	<!-- tooltip_account_completion_reward -->
	<block className="AccountCompletionRewardItemTooltip">
		<bind name="entityDH" value="'rewardEntity'; _rewardEntityId"/>
		<bind name="watch" value="'rewardType'; rewardEntity.rewardComponent.type"/>
		<bind name="watch" value="'rewardSubtype'; rewardEntity.rewardComponent.subtype"/>
		<bind name="watch" value="'rewardAmountPremium'; rewardSubtype == SC.Common.REWARD_SUBTYPE.PREMIUM || rewardSubtype == SC.Common.REWARD_SUBTYPE.WOWS_PREMIUM"/>
		<bind name="watch" value="'rewardAmountLootbox'; rewardType == SC.Common.REWARD_TYPE.LOOTBOX"/>
		<bind name="watch" value="'rewardName';	rewardAmountLootbox	? tr(toUpperCase('IDS_REWARD_LOOTBOX_' + rewardSubtype + '_TITLE'))
													: tr(toUpperCase('IDS_REWARD_' + rewardSubtype + '_TITLE'))"/>
		<bind name="watch" value="'tooltipDescHeader'; 	rewardAmountPremium ? SC.Common.REWARD_SUBTYPE.WOWS_PREMIUM :
										rewardAmountLootbox ? SC.Common.REWARD_TYPE.LOOTBOX
															: SC.Common.REWARD_TYPE.RESOURCE"/>
		<bind name="watch" value="'tooltipDescHeaderText'; tr(toUpperCase('IDS_ACCOUNT_COMPLETION_REWARD_TOOLTIP_HEADER_' + tooltipDescHeader))"/>
		<bind name="watch" value="'tooltipDescSubheaderText'; tr(toUpperCase('IDS_ACCOUNT_COMPLETION_REWARD_TOOLTIP_DESC_' + rewardSubtype))"/>
		<bind name="watch" value="'howToGetSubheaderText'; tr(toUpperCase('IDS_ACCOUNT_COMPLETION_REWARD_TOOLTIP_HOW_TO_GET_DESC_' + rewardSubtype))"/>
		<bind name="watch" value="'rewardAmount';	rewardAmountPremium	? rewardEntity.rewardComponent.params.text 
														: format(rewardEntity.rewardComponent.amount, -1)"/>
		<bind name="var" value="{pricesWithTag:[ {currency: SC.Common.CURRENCIES.CREDITS},			{currency: SC.Common.CURRENCIES.GOLD},			{currency: SC.Common.CURRENCIES.XP},			{currency: SC.Common.CURRENCIES.FREE_XP},
								{currency: SC.Common.CURRENCIES.ELITE_XP},			{currency: SC.Common.CURRENCIES.EVENTUM_1},		{currency: SC.Common.CURRENCIES.EVENTUM_2},		{currency: SC.Common.CURRENCIES.PARAGON_XP},
								{currency: SC.Common.CURRENCIES.COAL},				{currency: SC.Common.CURRENCIES.STEEL},			{currency: SC.Common.CURRENCIES.BRASS},			{currency: SC.Common.CURRENCIES.MOLYBDENUM},
								{currency: SC.Common.CURRENCIES.CLAN_RESOURCE},		{currency: 'duplicate'},						{currency: 'brotherhood'},
								{currency: SC.Common.CURRENCIES.EVENTUM_3},			{currency: SC.Common.CURRENCIES.EVENTUM_4},		{currency: SC.Common.CURRENCIES.EVENTUM_5},		{currency: SC.Common.CURRENCIES.EVENTUM_6},
								{currency: SC.Common.CURRENCIES.EVENTUM_7},			{currency: SC.Common.CURRENCIES.EVENTUM_8},		{currency: SC.Common.CURRENCIES.EVENTUM_9},		{currency: SC.Common.CURRENCIES.EVENTUM_10},
								{currency: SC.Common.CURRENCIES.EVENTUM_CN},		{currency: SC.Common.CURRENCIES.CLIENTUM_1},	{currency: SC.Common.CURRENCIES.CLIENTUM_2},	{currency: SC.Common.CURRENCIES.SANTIUM},
								{currency: SC.Common.CURRENCIES.DOCKYARDUM_1},		{currency: SC.Common.CURRENCIES.DOCKYARDUM_2},
								]}"/>
		<bind name="indexOf" value="pricesWithTag; 'indexOfPricesWithTag'; { 'currency': rewardSubtype }"/>
		<bind name="watch" value="'isPricesWithTag'; indexOfPricesWithTag &gt; -1"/>
		<bind name="watch" value="'priceInfo'; { currency: rewardSubtype,
								finalPrice: rewardEntity.rewardComponent.amount }"/>
		<bind name="watch" value="'rewardPath'; 'icon_reward_' + (rewardAmountLootbox ? 'lootbox_' : '') + rewardSubtype"/>
		<bind name="watch" value="'imageUrl'; 'url:../reward_icons/' + rewardPath + '.png'"/>
		<bind name="appear" value="'addedToStage'; 0.25; 0.3 + $index*0.5; {alpha: 0, top: 35}; {alpha: 1, top: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
		<style>
			<hitTest value="false"/>
			<width value="340px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText';	{	_imageUrl: imageUrl,
																	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																	_headerText: rewardName,
																	_imageWidth: 80,
																	_imageHeight: 80
																}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemPriceTagLine'; 	isPricesWithTag		? { _title: 'IDS_ACCOUNT_COMPLETION_REWARD_TOOLTIP_WILL_RECEIVE', _priceInfo: priceInfo }
																			: null"/>
				<bind name="instance" value="'TooltipSystemCounterLine'; 	rewardAmountLootbox ? {_title: 'IDS_ACCOUNT_COMPLETION_REWARD_TOOLTIP_WILL_RECEIVE_LOOTBOX', _count: rewardAmount } 
																			: null"/>
				<bind name="instance" value="'TooltipSystemDescriptionText'; rewardAmountPremium ? {_descriptionText: subst('IDS_ACCOUNT_COMPLETION_REWARD_TOOLTIP_WILL_RECEIVE_SUBST', [], {_amount: rewardAmount}) } 
																			: null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: tooltipDescHeaderText,
																_subheaderText: tooltipDescSubheaderText}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: 'IDS_ACCOUNT_COMPLETION_REWARD_TOOLTIP_HOW_TO_GET',
																_subheaderText: howToGetSubheaderText}"/>
			</block>
		</block>
	</block>

	<!-- tooltip_convert_unbound -->
	<block className="WeaponTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<block className="WeaponTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_slotEntityId: _slotEntityId ? _slotEntityId : 0,
						_isActiveBurst: _isActiveBurst ? _isActiveBurst : false,
						}"/>
		</block>
	</block>
	<block className="ConsumableTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ConsumableTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_abilityEntityId: _abilityEntityId ? _abilityEntityId : 0,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false,
						_isAircarrierConsumable: _isAircarrierConsumable ? _isAircarrierConsumable : false,
						_hasAlternatives: _hasAlternatives ? _hasAlternatives : false }"/>
		</block>
	</block>
	<block className="ModuleTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ModuleTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_modulePK: _modulePK,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false }"/>
		</block>
	</block>
	<block className="CrewTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CrewTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_targetShipId: _targetShipId ? _targetShipId : 0,
						_noContextMenuInstruction: _noContextMenuInstruction ? _noContextMenuInstruction : false,
						_noMouseInstruction: _noMouseInstruction ? _noMouseInstruction : false,
						_fromDock: _fromDock ? _fromDock : false,
						_crewId: _crewId ? _crewId : 0,
						_crewHistoryId: _crewHistoryId ? _crewHistoryId : 0 }"/>
		</block>
	</block>
	<block className="HeaderDescriptionInstructionTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="HeaderDescriptionInstructionTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_headerText: _headerText ? _headerText : '',
						_descriptionText: _descriptionText ? _descriptionText : '',
						_mouseInstructionText: _mouseInstructionText ? _mouseInstructionText : '' }"/>
		</block>
	</block>
	<block className="SimpleStatusTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SimpleStatusTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_text: _text ? _text : '',
						_unifiedStatus: _unifiedStatus ? _unifiedStatus : SC.Ui_styles.UNIFIED_STATUS.DEFAULT }"/>
		</block>
	</block>
	<block className="RepeatStatusTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="RepeatStatusTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_tooltipDataArray: _tooltipDataArray }"/>
		</block>
	</block>
	<block className="DescriptionStatusLineTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="DescriptionStatusLineTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_descriptionText: _descriptionText ? _descriptionText : '',
						_statusText: _statusText ? _statusText : '',
						_unifiedStatus: _unifiedStatus ? _unifiedStatus : SC.Ui_styles.UNIFIED_STATUS.DEFAULT }"/>
		</block>
	</block>
	<block className="AchievementTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="AchievementTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{ _id: _id,
						_amount: _amount ? _amount : 0 }"/>
		</block>
	</block>
	<block className="SimpleHeaderSubheaderTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SimpleHeaderSubheaderTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_headerText: _headerText ? _headerText : '',
						_subheaderText: _subheaderText ? _subheaderText : '' }"/>
		</block>
	</block>
	<block className="DogTagComponentTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="DogTagComponentTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_elementEntityId: _elementEntityId ? _elementEntityId : 0,
						_isNotSelf: _isNotSelf ? _isNotSelf : false,
						_canInstall: _canInstall ? _canInstall : false,
						_isRewardTooltip: _isRewardTooltip ? _isRewardTooltip : false,
						_isClickDisabled: _isClickDisabled ? _isClickDisabled : false }"/>
		</block>
	</block>
	<block className="AbuseStatusProfileTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="AbuseStatusProfileTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_mouseInstructionText: _mouseInstructionText ? _mouseInstructionText : '' }"/>
		</block>
	</block>
	<block className="ShipFeatureTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ShipFeatureTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_feature: _feature,
						_isOwn: _isOwn,
						_featureName: _featureName,
						_imageUrl: _imageUrl,
						_rentUntil: _rentUntil ? _rentUntil : 0 }"/>
		</block>
	</block>
	<block className="QuestionMarkIconOnShipManagmentScreenTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="QuestionMarkIconOnShipManagmentScreenTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{ }"/>
		</block>
	</block>
	<block className="AutoPurchaseTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="AutoPurchaseTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_type: _type,
						_isAutopurchaseOn: _isAutopurchaseOn }"/>
		</block>
	</block>
	<block className="CamouflageTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CamouflageTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: Number(_id),
						_isReward: _isReward ? _isReward : false,
						_amount: _amount ? _amount : 0,
						_fakeColorScheme: _fakeColorScheme ? _fakeColorScheme : {},
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false,
						_rewardShipId: _rewardShipId ? Number(_rewardShipId) : 0 }"/>
		</block>
	</block>
	<block className="EnsignTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="EnsignTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: _id,
						_isReward: _isReward ? _isReward : false,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false }"/>
		</block>
	</block>
	<block className="MultiBoostTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="MultiBoostTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: _id,
						_amount: _amount ? _amount : 0,
						_isReward: _isReward ? _isReward : false,
						_rewardShipId: _rewardShipId ? _rewardShipId : 0,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false }"/>
		</block>
	</block>
	<block className="GlobalBoostTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="GlobalBoostTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: _id,
						_isReward: _isReward ? _isReward : false,
						_isInstalled: _isInstalled ? _isInstalled : false }"/>
		</block>
	</block>
	<block className="EconomicBoostTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="EconomicBoostTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_id: _id,
						_amount: _amount ? _amount : 0,
						_isInstalled: _isInstalled ? _isInstalled : false,
						_isReward: _isReward ? _isReward : false,
						_noMouseInstructions: _noMouseInstructions ? _noMouseInstructions : false }"/>
		</block>
	</block>
	<block className="EconomicBoostSlotTooltipTTX">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="EconomicBoostSlotTooltipTTX" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_ecoBoostSlotEntityId: _ecoBoostSlotEntityId,
						_boostTypeModifier: _boostTypeModifier,
						_isEconomicsModalWindow: _isEconomicsModalWindow }"/>
		</block>
	</block>
	<block className="EmptyEconomicBoostSlotTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="EmptyEconomicBoostSlotTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_type: _type,
						_boostTypeModifier: _boostTypeModifier,
						_slotId: _slotId }"/>
		</block>
	</block>
	<block className="BonusTagsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="BonusTagsTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_shipEntityId: _shipEntityId ? _shipEntityId : 0,
						_isInShipResearch: _isInShipResearch ? _isInShipResearch : false,
						_isReceived: _isReceived ? _isReceived : false,
						_bonusTagId: _bonusTagId ? _bonusTagId : 0 }"/>
		</block>
	</block>
	<block className="CrewSkillPointsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CrewSkillPointsTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_isMaxLevelCrew: _isMaxLevelCrew,
						_freeSkillPoints: _freeSkillPoints,
						_crewLevel: _crewLevel }"/>
		</block>
	</block>
	<block className="ModernizationTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ModernizationTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_modernizationEntityId: _modernizationEntityId,
						_noMouseInstruction: _noMouseInstruction ? _noMouseInstruction : false,
						_isSlotTooltip: _isSlotTooltip ? _isSlotTooltip : false }"/>
		</block>
	</block>
	<block className="CurrencyTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CurrencyTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_currency: _currency,
						_amount: _amount ? _amount : 0,
						_isReceived: _isReceived ? _isReceived : false,
						_isEventumReward: _isEventumReward ? _isEventumReward : false,
						_isUnavailableStatusVisible: _isUnavailableStatusVisible ? _isUnavailableStatusVisible : false,
						_hasMouseInstruction: _hasMouseInstruction ? _hasMouseInstruction : false }"/>
		</block>
	</block>
	<block className="ArcEventSideStereotypeTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ArcEventSideStereotypeTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{ _sideId: _sideId }"/>
		</block>
	</block>
	<block className="ReferralSystemTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ReferralSystemTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="CommonBattleTypeTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CommonBattleTypeTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_isFromPort: _isFromPort ? _isFromPort : false }"/>
		</block>
	</block>
	<block className="EventBattleTypeTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="EventBattleTypeTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_isFromPort: _isFromPort ? _isFromPort : false }"/>
		</block>
	</block>
	<block className="RankedBattleTypeTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="RankedBattleTypeTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_isFromPort: _isFromPort ? _isFromPort : false }"/>
		</block>
	</block>
	<block className="BrawlBattleTypeTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="BrawlBattleTypeTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_isFromPort: _isFromPort ? _isFromPort : false }"/>
		</block>
	</block>
	<block className="ClanBattleTypeTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ClanBattleTypeTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_isFromPort: _isFromPort ? _isFromPort : false }"/>
		</block>
	</block>
	<block className="PVEOperationTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="PVEOperationTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_battleTypeEntityId: _battleTypeEntityId,
						_isFromPort: _isFromPort ? _isFromPort : false }"/>
		</block>
	</block>
	<block className="FormationNotReadyButtonTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="FormationNotReadyButtonTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_isReadyBtnEnabled: _isReadyBtnEnabled }"/>
		</block>
	</block>
	<block className="FormationReadyButtonTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="FormationReadyButtonTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="ArcEventBannerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ArcEventBannerTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{ }"/>
		</block>
	</block>
	<block className="CvCBannerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="CvCBannerTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="ShipyardBannerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ShipyardBannerTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="ProspectiveEventBannerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ProspectiveEventBannerTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="ProspectiveEventLeftBannerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ProspectiveEventLeftBannerTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="SnowflakesBannerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SnowflakesBannerTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="RepairDockTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="RepairDockTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="ShipExtendedTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="style" value="'userData'; { rightOffset: _hOffset }"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ShipExtendedTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_shipId: Number(_shipId),
						_isFromTree: _isFromTree ? _isFromTree : false,
						_isRewards: _isRewards ? _isRewards : false,
						_hasShipImage: _hasShipImage ? _hasShipImage : false,
						_rewardRentUntil: _rewardRentUntil ? _rewardRentUntil : 0,
						_rewardRentDuration: _rewardRentDuration ? _rewardRentDuration : 0,
						_isKeyTargetVisible: _isKeyTargetVisible ? _isKeyTargetVisible : false,
						_isSelf: _isSelf ? _isSelf : false,
						_relation: _relation ? _relation : SC.Battle.PLAYER_RELATION.SELF,
						_isCompare: _isCompare ? _isCompare : false,
						_isReversedCompare: _isReversedCompare ? _isReversedCompare : false }"/>
		</block>
	</block>
	<block className="ShortSseTaskConditionTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ShortSseTaskConditionTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_isTask:				_isTask,
						_headerText:			_headerText,
						_sseConditionId:		_sseConditionId ? _sseConditionId : 0,
						_descriptionText:		_descriptionText ? _descriptionText : '',
						_hasMouseInstruction:	_hasMouseInstruction ? _hasMouseInstruction : false,
						_conditionId:			_conditionId ? _conditionId : 0,
						_rewards:				_rewards ? _rewards : [],
						_conditionText:			_conditionText ? _conditionText : '',
						_stepsNumber:			_stepsNumber ? _stepsNumber : 0,
						_nation:				_nation ? _nation : '',
						_shipType:				_shipType ? _shipType : ''}"/>
		</block>
	</block>
	<block className="ContactsAndChannelsInfotip">
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="ContactsAndChannelsInfotip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_isFromDockChatBtn: _isFromDockChatBtn ? _isFromDockChatBtn : false,
						_playerContext: _playerContext ? _playerContext : false,
						_isResizeInfotip: _isResizeInfotip ? _isResizeInfotip : false }"/>
		</block>
	</block>
	<block className="DivisionEntranceInfotip">
		<styleClass value="$DivisionEntranceInfotipBehaviour"/>
		<bind name="class" value="_isFromDockFormationBtn ? '$Fullsize' : '$DefaultFormationWidgetSize'"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="DivisionEntranceInfotip" type="ublock">
			<styleClass value="$Fullsize"/>
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_isFromDockFormationBtn: _isFromDockFormationBtn ? _isFromDockFormationBtn : false,
						_isFromTrainingRoomBtn: _isFromTrainingRoomBtn ? _isFromTrainingRoomBtn : false,
						_teamId: _teamId ? _teamId : 0 }"/>
		</block>
	</block>
	<block className="TrainingRoomTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="TrainingRoomTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{_trainingRoomComponent: _trainingRoomComponent}"/>
		</block>
	</block>
	<block className="SeasonShipRestrictionsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SeasonShipRestrictionsTooltip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{}"/>
		</block>
	</block>
	<block className="SeasonShipRestrictionsInfotip">
		<styleClass value="$VerticalInfotipBehaviourCenterUpper"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evStartShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'evStartHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.NONE"/>
		<block className="SeasonShipRestrictionsInfotip" type="ublock">
			<bind name="eventToUB2" value="'evStartShow'"/>
			<bind name="eventToUB2" value="'evStartHide'"/>
			<bind name="build!" value="{	_limitedShips: _limitedShips ? _limitedShips : [],
						_excludedShips: _excludedShips ? _excludedShips : [] }"/>
		</block>
	</block>

	<!-- tooltip_dock -->
	<block className="StartBattleTooltip">
		<bind name="firstEntityDH" value="'divisionDataEntity'; CC.division"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="firstEntityDH" value="'rankSeasonEntity'; CC.rankSeason"/>
		<bind name="watchDH" value="'isDivisionAllowedInRanked';	['rankSeasonEntity.rankSeason.evChanged']; rankSeasonEntity.rankSeason.isDivisionAllowed"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPreBattleId'; ['selfPlayerEntity.preBattlePlayerSimple.evPreBattleIdChanged']; selfPlayerEntity.preBattlePlayerSimple.preBattleId"/>
		<bind name="watchDH" value="'selfPlayerShipId'; ['selfPlayerEntity.preBattlePlayerSimple.evShipIdChanged']; selfPlayerEntity.preBattlePlayerSimple.shipId"/>
		<bind name="watch" value="'preBattlePlayersFilter'; 'byPreBattle.' + selfPreBattleId + '.preBattleMembers.sorted'"/>
		<bind name="collectionDH" value="CC.preBattlePlayerSimple; 'preBattlePlayers'; preBattlePlayersFilter"/>
		<bind name="entityDH" value="'battleTypeEntity'; _battleTypeEntityId"/>
		<bind name="watchDH" value="'status'; ['battleTypeEntity.battleType.evStatusChanged']; battleTypeEntity.battleType.status"/>
		<bind name="watchDH" value="'battleType'; ['battleTypeEntity.battleType.evStatusChanged']; battleTypeEntity.battleType.type"/>
		<bind name="collectionDH" value="CC.battleType; 'selectedBattleTypes'; 'selected'"/>
		<bind name="watch" value="'battleTypeGameParamId'; selectedBattleTypes[0].battleType.battleTypeGameParamId"/>
		<bind name="watch" value="'battleTypeLabel'; battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE	? tr(toUpperCase('IDS_' + selectedEventBattleName))
																						: tr(toUpperCase('IDS_' + battleType))"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; battleTypeGameParamId"/>
		<bind name="watchDH" value="'operationIconName'; ['operationEntity.operation.evStatusChanged']; operationEntity.operation.customIconName"/>
		<bind name="watchDH" value="'selectedEventBattleName'; ['battleTypeEntity.eventBattleState.evChanged'];	battleTypeEntity.eventBattleState.name"/>
		<bind name="watch" value="'battleTypeName';	operationIconName									?	operationIconName :
									battleType == SC.Common.BATTLE_TYPES.EVENT_BATTLE	?	selectedEventBattleName
																						:	battleType"/>
		<bind name="watch" value="'battleTypeIcon';	status == 3 ? battleTypeName + '_disabled' : battleTypeName"/>
		<bind name="watch" value="'isNotBattleTypeWithDivision';	divisionDataEntity &amp;&amp;
												isCommander &amp;&amp;
												_battleType == SC.Common.BATTLE_TYPES.RANKED_BATTLE &amp;&amp;
												!isDivisionAllowedInRanked"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: 'url:../service_kit/battle_types/' + battleTypeIcon + '_small.png',
																_imageWidth: 35, _imageHeight: 35,
																_headerText: battleTypeLabel}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemShipStereotype'; { _shipID: _shipID, _isReady: true }"/>
				<bind name="repeat" value="preBattlePlayers; 'ShipStereotypeRepeatByCollectionItem'; {}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isNotBattleTypeWithDivision"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; isNotBattleTypeWithDivision	? {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
																					_text: 'IDS_DIVISIONS_ARE_NOT_ALLOWED_IN_RANK_BATTLES' }
																				: null"/>
			</block>
		</block>
	</block>
	<block className="ShipStereotypeRepeatByCollectionItem">
		<bind name="visible" value="!isSelfPlayer"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="entityDH" value="'preBattlePlayerEntity'; id"/>
		<bind name="watch" value="'shipId'; preBattlePlayerEntity.preBattlePlayerSimple.shipId"/>
		<bind name="watch" value="'isSelfPlayer'; preBattlePlayerEntity.accountSimple.isSelfPlayer"/>
		<bind name="instance" value="'TooltipSystemShipStereotype'; { _shipID: shipId, _isReady: shipId ? true : false}"/>
	</block>

	<!-- tooltip_postbattle -->
	<block className="UIListPlayerContextMenu">
		<bind name="primaryEntityDH" value="'entityAccountBattle'; CC.avatar; _playerId"/>
		<bind name="watchDH" value="'name'; 						['']; 																entityAccountBattle.avatar.name"/>
		<bind name="watchDH" value="'pureName'; 					['']; 																entityAccountBattle.avatar.pureName"/>
		<bind name="watchDH" value="'isInSameDivisionOnStart';	['']; 																entityAccountBattle.divisionMember.isInSameDivisionOnStart"/>
		<bind name="watchDH" value="'isInSameDivision'; 			['']; 																entityAccountBattle.divisionMember.isInSameDivision"/>
		<bind name="watchDH" value="'isLeaver'; 					['entityAccountBattle.avatar.evIsLeaverChanged']; 					entityAccountBattle.avatar.isLeaver"/>
		<bind name="watchDH" value="'division'; 					['entityAccountBattle.divisionMember.evDivisionChanged']; 			entityAccountBattle.divisionMember.division"/>
		<bind name="watchDH" value="'inviteCooldown'; 			['entityAccountBattle.battleInvite.evInviteCooldownChanged']; 		entityAccountBattle.battleInvite.inviteCooldown"/>
		<bind name="watchDH" value="'invitationsEnabled'; 		['entityAccountBattle.battleInvite.evInvitationsEnabledChanged']; 	entityAccountBattle.battleInvite.invitationsEnabled"/>
		<bind name="watchDH" value="'relation'; 					['entityAccountBattle.relation.evChanged']; 						entityAccountBattle.relation.value"/>
		<bind name="watchDH" value="'isAlive'; 					['entityAccountBattle.health.evIsAliveChanged']; 					entityAccountBattle.health.isAlive"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; pureName"/>
		<bind name="watchDH" value="'isMuted'; 					['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; 			playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watch" value="'isInVoiceChat';	!!playerVoiceChatEntity.playerVoiceState"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'divisionId'; ['selfPlayerEntity.divisionMember.evDivisionChanged']; selfPlayerEntity.divisionMember.divisionId"/>
		<bind name="watchDH" value="'isSelfAlive'; ['selfPlayerEntity.health.evIsAliveChanged']; selfPlayerEntity.health.isAlive"/>
		<bind name="watchDH" value="'isCommander'; ['selfPlayerEntity.divisionMember.evIsDivisionCommanderUpdated']; selfPlayerEntity.divisionMember.isDivisionCommander"/>
		<bind name="watch" value="'isDynamicDivisionsEnabled';	isIn(battleType, SC.Common.BATTLE_TYPES.DYNAMIC_DIVISION_AVAILABLE)"/>
		<bind name="primaryEntityDH" value="'dynamicDivisionEntity'; CC.division; divisionId"/>
		<bind name="watchDH" value="'inPortParticipantsCount'; 		['dynamicDivisionEntity.division.evInPortParticipantsCountChanged']; dynamicDivisionEntity.division.inPortParticipantsCount"/>
		<bind name="collectionDH" value="CC.dynamicDivisionMember; 'dynamicDivisionsByPrebattle'; 'byPreBattleId.' + divisionId"/>
		<bind name="watch" value="'membersCount'; dynamicDivisionsByPrebattle.length"/>
		<bind name="primaryEntityDH" value="'preBattlePlayerSimpleEntity'; CC.preBattlePlayerSimple; _playerId"/>
		<bind name="watch" value="'isInvited'; preBattlePlayerSimpleEntity.hasComponent(CC.playerInvitedToPrebattleInfo)"/>
		<bind name="primaryEntityDH" value="'voiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'voiceChatEnabled'; ['voiceChatEnabledEntity.preference.evValueChanged']; voiceChatEnabledEntity.preference.value"/>
		<bind name="firstEntityDH" value="'evaluationLimits'; CC.evaluationLimitsInfo"/>
		<bind name="watchDH" value="'evaluationLimitsComplain';	['evaluationLimits.evaluationLimitsInfo.evComplainChanged'];	evaluationLimits.evaluationLimitsInfo.complain"/>
		<bind name="watchDH" value="'evaluationLimitsPraise';	['evaluationLimits.evaluationLimitsInfo.evPraiseChanged'];		evaluationLimits.evaluationLimitsInfo.praise"/>
		<bind name="watchDH" value="'entityAccountBattleDbId'; [];  entityAccountBattle.accountSimple.dbId"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId ? _playerDbId : entityAccountBattleDbId"/>
		<bind name="watchDH" value="'isSuspended'; ['playerEntity.accountSimple.evSuspendedChanged']; playerEntity.accountSimple.suspended"/>
		<bind name="watchDH" value="'isPlayerMessagesMuted'; ['playerEntity.avatar.evMuteChanged']; playerEntity.avatar.mute"/>
		<bind name="watchDH" value="'isBotAvatar'; []; playerEntity.avatar.isBot"/>
		<bind name="watchDH" value="'accountDbId'; [];  playerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['playerEntity.elementInGroups.evGroupsChanged']; playerEntity.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['playerEntity.contact.evIsIgnoredChanged']; !!playerEntity.contact.isIgnored"/>
		<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
		<bind name="watchDH" value="'canAddGroupEntitiesId'; ['playerEntity.elementInGroups.evCanAddGroupEntitiesChanged', 'chatEntity.chat.evRosterChanged']; (playerEntity.elementInGroups) ? playerEntity.elementInGroups.canAddGroupEntitiesId : chatEntity.chat.canAddGroupEntitiesId"/>
		<bind name="watchDH" value="'playerEntityId'; []; playerEntity.id"/>
		<bind name="watch" value="'isInSameDivisionOnStart'; _isInPBS ? _isInSameDivisionOnStart : isInSameDivisionOnStart"/>
		<bind name="watch" value="'isBot'; _isInPBS ? _isBot  : isBotAvatar"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="timeFormat" value="(inviteCooldown - serverTime); 'mm:ss'; 'cooldownTimeText'"/>
		<bind name="watch" value="'isEnemyPlayer'; relation == 2 || _relation == 2"/>
		<bind name="watch" value="'isFreePlacesInDivision'; (membersCount ? membersCount : 0) + (inPortParticipantsCount ? inPortParticipantsCount : 0) &lt; 3"/>
		<bind name="watch" value="'isBotInRandom'; isBot &amp;&amp; _battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE"/>
		<bind name="watch" value="'invitationDisableReason'; isLeaver						? 'IDS_INVITATION_DISABLE_REASON_PLAYER_IS_OUT_OF_BATTLE':
											division != 0					? 'IDS_INVITATION_DISABLE_REASON_ALREADY_IN_DIVISION' :
											!isSelfAlive					? 'IDS_DIVISION_MANAGEMENT_LOCKED_FOR_DESTROYED' :
											!isAlive						? 'IDS_INVITATION_DISABLE_REASON_DESTROYED' :
											!isFreePlacesInDivision			? 'IDS_INVITATION_DISABLE_REASON_NO_FREE_PLACES' :
											!invitationsEnabled				? 'IDS_INVITATION_DISABLE_REASON_INVITATIONS_DISABLED' :
											inviteCooldown &gt; serverTime		? (tr('IDS_WAIT_TIMEOUT_TO_INVITE_TO_DIVISION')+' '+cooldownTimeText)
																			: 'no_reason'"/>
		<bind name="watch" value="'isDivisionControlsEnable';	isDynamicDivisionsEnabled &amp;&amp;
												_isInPBS != true &amp;&amp;
												!isEnemyPlayer &amp;&amp;
												!isBot &amp;&amp;
												(isCommander || !divisionId) &amp;&amp;
												!isSuspended"/>
		<bind name="watch" value="'canBeInChat';	((_battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE) &amp;&amp; voiceChatEnabled &amp;&amp; !(isEnemyPlayer)) ||
								((isInSameDivision &amp;&amp; voiceChatEnabled) &amp;&amp; ((_battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE) ||
																						 (_battleType == SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE) ||
																						 (_battleType == SC.Common.BATTLE_TYPES.PVE_BATTLE)))"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInDock'; isIn('Dock', windowQueue)"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; {_isInBattle: _isBattleStats}"/>
		</block>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="class" value="_isBattleStats ? '$ComplaintMenuListItemBattleMargins' : '$ComplaintMenuListItemPostbattleMargins'"/>
			<block>
				<bind name="visible" value="isDivisionControlsEnable"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="visible" value="isCommander &amp;&amp; isInSameDivision"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="alpha" value="isSelfAlive ? 1 : 0.5"/>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<block className="MenuItem">
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
							<block>
								<style>
									<width value="100%"/>
									<padding value="8px"/>
								</style>
								<block type="text">
									<styleClass value="$TextDefaultNM"/>
									<style>
										<width value="100%"/>
									</style>
									<bind name="text" value="'IDS_APPOINT_PLAYER_TO_COMMANDER'"/>
									<bind name="name" value="'menu_item_' + _titleIds"/>
								</block>
							</block>
						</block>
						<bind name="action" value="'click'; 'changeCommander'; {playerId: _playerId, teamId:playerEntity.preBattlePlayerSimple.teamId}"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<block className="MenuItem">
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
							<block>
								<style>
									<width value="100%"/>
									<padding value="8px"/>
								</style>
								<block type="text">
									<styleClass value="$TextDefaultNM"/>
									<style>
										<width value="100%"/>
									</style>
									<bind name="text" value="'IDS_EXCLUDE_PLAYER_OUT_OF_DIVISION'"/>
									<bind name="name" value="'menu_item_' + _titleIds"/>
								</block>
							</block>
						</block>
						<bind name="action" value="'click'; 'kickPlayerFromDivision'; {playerId: _playerId}"/>
					</block>
					<block>
						<bind name="visible" value="!isSelfAlive"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<backgroundColor value="0x0100000"/>
						</style>
						<bind name="tooltip" value="'SimpleStatusTooltip'; !isSelfAlive ? {_text: tr('IDS_DIVISION_MANAGEMENT_LOCKED_FOR_DESTROYED'), _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING } : null"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="!isInSameDivision"/>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<bind name="visible" value="!isInSameDivision &amp;&amp; !isInvited"/>
						<bind name="style" value="'alpha'; (invitationDisableReason == 'no_reason') ? 1 : 0.5"/>
						<bind name="tooltip" value="'SimpleStatusTooltip'; (invitationDisableReason != 'no_reason') ? {_text: invitationDisableReason, _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION } : null"/>
						<style>
							<backgroundColor value="0x01000000"/>
						</style>
						<styleClass value="$ContextMenuListItem"/>
						<block>
							<style>
								<width value="100%"/>
							</style>
							<bind name="style" value="'hitTest';  (invitationDisableReason == 'no_reason') ? true : false"/>
							<block className="MenuItem">
								<style>
									<width value="100%"/>
								</style>
								<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
								<block>
									<style>
										<width value="100%"/>
										<padding value="8px"/>
									</style>
									<block type="text">
										<styleClass value="$TextDefaultNM"/>
										<style>
											<width value="100%"/>
										</style>
										<bind name="text" value="'IDS_INVITE_IN_DIVISION'"/>
										<bind name="name" value="'menu_item_' + _titleIds"/>
									</block>
								</block>
							</block>
						</block>
						<bind name="action" value="'click'; (invitationDisableReason == 'no_reason') &amp;&amp; !isBot ? 'inviteToDivision' : null; {playerId: _playerId, playerName: name, inviteType: InviteType.COMMON}"/>
					</block>
					<block>
						<bind name="visible" value="isInvited"/>
						<style>
							<width value="100%"/>
						</style>
						<block className="MenuItem">
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
							<block>
								<style>
									<width value="100%"/>
									<padding value="8px"/>
								</style>
								<block type="text">
									<styleClass value="$TextDefaultNM"/>
									<style>
										<width value="100%"/>
									</style>
									<bind name="text" value="'IDS_RECALL_INVITATION'"/>
									<bind name="name" value="'menu_item_' + _titleIds"/>
								</block>
							</block>
						</block>
						<bind name="action" value="'click'; 'revokeInvitationToDivision'; {id: preBattlePlayerSimpleEntity.preBattlePlayerSimple.id}"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="!isInSameDivision"/>
					<style>
						<width value="100%"/>
						<marginTop value="3px"/>
						<marginBottom value="2px"/>
						<marginLeft value="-2px"/>
						<marginRight value="-2px"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="2px"/>
							<backgroundSize value="fill"/>
							<marginTop value="1px"/>
							<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="!_isBattleLoading &amp;&amp; !isSuspended || isBotInRandom"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="alpha" value="isBot ? 0.5 : 1"/>
				<bind name="style" value="'hitTest'; !isBot"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="name" value="'id_complain'"/>
					<bind name="instance" value="'PlayerMenuItemExpanded'; 	{ 	_text: 'IDS_COMPLAIN', _battleType: _battleType, _isInBattle: _isBattleStats,
																_wantPraisePlayer: false, _evaluationLimitsComplain: evaluationLimitsComplain,
																_playerName: name, _isInPBS: _isInPBS, _playerDbId: _playerDbId ? _playerDbId : entityAccountBattleDbId,
																_arenaId: _arenaId, _isInSameDivisionOnStart: isInSameDivisionOnStart, _complaintsAvailable: _complaintsAvailable,
																_sortedBy: isEnemyPlayer ? 'team.enemy.complaint.sorted' : 'team.ally.complaint.sorted',
															 }"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="name" value="'id_praise'"/>
					<bind name="instance" value="'PlayerMenuItemExpanded'; 	{ 	_text: 'IDS_PRAISE', _battleType: _battleType, _isInBattle: _isBattleStats, 
																_wantPraisePlayer: true, _evaluationLimitsPraise: evaluationLimitsPraise,
																_playerName: name, _isInPBS: _isInPBS, _playerDbId: _playerDbId ? _playerDbId : entityAccountBattleDbId,
																_arenaId: _arenaId, _isInSameDivisionOnStart: isInSameDivisionOnStart, _complaintsAvailable: _complaintsAvailable,
																_sortedBy: isEnemyPlayer ? 'team.enemy.praise.sorted' : 'team.ally.praise.sorted'
															 }"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="_isBattleStats &amp;&amp; (!isSuspended &amp;&amp; !isIgnored)"/>
				<bind name="watch" value="'playerMuteIdses'; isPlayerMessagesMuted 	? 'IDS_UNMUTE_PLAYER_CHAT'
																	: 'IDS_MUTE_PLAYER_CHAT'"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; {	_text: playerMuteIdses + '_HINT' }"/>
				<bind name="name" value="'id_mute'"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'hitTest'; !isBot"/>
				<bind name="alpha" value="isBot ? 0.5 : 1"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="action" value="'buttonClick'; isPlayerMessagesMuted ? 'unmuteUser' : 'muteUser'; {id: _playerId}"/>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
						<marginLeft value="7px"/>
						<marginBottom value="3px"/>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="text" value="playerMuteIdses"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="(canBeInChat &amp;&amp; !(_isInPBS) &amp;&amp; !(isBot) &amp;&amp; !(isSuspended))"/>
				<bind name="name" value="'id_mute_voice'"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="watch" value="'voiceChatMenuText'; 	!isInVoiceChat 		? 'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT' :
												isMuted				? 'IDS_UNMUTE_PLAYER_VOICE_CHAT'
																	: 'IDS_MUTE_PLAYER_VOICE_CHAT'"/>
				<bind name="watch" value="'state'; 	!isInVoiceChat		? 'disabled' :
									isMuted				? 'muted'
														: 'speak'"/>
				<bind name="style" value="'alpha'; !isInVoiceChat	? 0.9 : 1"/>
				<bind name="style" value="'hitTest'; isInVoiceChat"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="action" value="'buttonClick'; 'toggleVoice'; {playerName: pureName, nickName: name}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginLeft value="7px"/>
						<hitTest value="false"/>
					</style>
					<block type="text">
						<style>
							<width value="100%"/>
							<marginBottom value="3px"/>
							<hitTest value="false"/>
							<marginRight value="4px"/>
							<leading value="-3"/>
						</style>
						<styleClass value="$TextDefault"/>
						<bind name="class" value="	!isInVoiceChat		? '$FontColorOrange' :
									isMuted				? '$FontColorOrange'
														: '$FontColorWhite'"/>
						<bind name="text" value="voiceChatMenuText"/>
					</block>
					<block className="icon_voice_chat_small" type="native">
						<style>
							<marginTop value="6px"/>
							<marginRight value="4px"/>
						</style>
						<bind name="gotoAndStop!" value="state"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="!isSuspended &amp;&amp; (canBeInChat &amp;&amp; _isBattleLoading || !_isBattleLoading) &amp;&amp; !isBot"/>
				<style>
					<width value="100%"/>
					<marginTop value="3px"/>
					<marginBottom value="2px"/>
					<marginLeft value="-2px"/>
					<marginRight value="-2px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<bind name="firstEntityDH" value="'chatEntity'; CC.chat"/>
			<bind name="collectionDH" value="CC.contactsGroup; 'contactsGroup'"/>
			<bind name="var" value="{isChatServerAvailable: false}"/>
			<bind name="watchDH" value="'isChatServerAvailable'; ['chatEntity.chat.evConnected', 'chatEntity.chat.evDisConnected']; chatEntity.chat.isConnected"/>
			<bind name="watch" value="'isHitTestEnabled'; isChatServerAvailable &amp;&amp; !isBot"/>
			<block>
				<bind name="visible" value="!isSuspended || isBotInRandom"/>
				<style>
					<backgroundColor value="0x01000000"/>
					<width value="100%"/>
				</style>
				<bind name="style" value="'alpha'; isChatServerAvailable ? 1 : 0.5"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; !(isChatServerAvailable) ? {_text: tr('IDS_CONTACT_DISABLE_REASON_SERVER_CHAT_DISABLED'), _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING} : null"/>
				<block>
					<bind name="visible" value="((groupIdsOfAccount==null) &amp;&amp; !(isIgnored))"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'hitTest';  isHitTestEnabled"/>
					<bind name="alpha" value="isBot ? 0.5 : 1"/>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_ADD_TO_CONTACTS'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; isBot ? null : 'addContact'; {dbId: accountDbId}"/>
				</block>
				<block>
					<bind name="visible" value="groupIdsOfAccount &amp;&amp; !isIgnored"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'hitTest';  isHitTestEnabled"/>
					<bind name="alpha" value="isBot ? 0.5 : 1"/>
					<block className="MenuItemWithAction">
						<style>
							<width value="100%"/>
						</style>
						<block className="MenuItem">
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
							<block>
								<style>
									<width value="100%"/>
									<padding value="8px"/>
								</style>
								<block type="text">
									<styleClass value="$TextDefaultNM"/>
									<style>
										<width value="100%"/>
									</style>
									<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
									<bind name="name" value="'menu_item_' + _titleIds"/>
								</block>
							</block>
						</block>
						<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="!(isIgnored) &amp;&amp; ((canAddGroupEntitiesId.length &gt; 0) &amp;&amp; (contactsGroup.length &gt; 1))"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'hitTest'; isHitTestEnabled"/>
					<bind name="alpha" value="isBot ? 0.5 : 1"/>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_ADD_TO_GROUP'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<block className="button_expand_h" type="native">
						<style>
							<position value="absolute"/>
							<right value="6px"/>
						</style>
						<styleClass value="$MouseDisable"/>
						<styleClass value="$MiddleVAligned"/>
					</block>
					<bind name="tooltip" value="'MoveToGroupContextSubMenu'; {_entityAccountId: playerEntityId, canAddGroupEntitiesId: canAddGroupEntitiesId, _dropDown: false, _isInBattle: _isBattleStats}; TooltipBehaviour.submenu"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="watch" value="'ignoreIdses'; (!isIgnored) ? 'IDS_IGNORE_PLAYER' : 'IDS_NOT_IGNORE_PLAYER'"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; isChatServerAvailable	?	{ _text: ignoreIdses + '_HINT' }
																			:	null"/>
					<bind name="style" value="'hitTest'; isHitTestEnabled"/>
					<bind name="alpha" value="isBot ? 0.5 : 1"/>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="ignoreIdses"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; isBot ? null : 'userIgnoreContact'; {dbId: accountDbId, ignore: !(isIgnored)}"/>
				</block>
				<bind name="watchDH" value="'clanId'; 	['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
				<bind name="watchDH" value="'role'; 		['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
				<bind name="watchDH" value="'isFull'; 	['clanEntity.clanExtended.evIsFullChanged']; clanEntity.clanExtended.isFull"/>
				<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
				<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
				<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
				<bind name="watch" value="'haveOwnClan'; 			clanEntity != null"/>
				<bind name="watch" value="'canInvite'; 				(role == 'executive_officer' || role == 'recruitment_officer' || role == 'commander')"/>
				<bind name="watch" value="'alreadyInYourClan'; 		(playerEntity.clanman != null) &amp;&amp; (playerEntity.clanman.clanId == selfPlayerEntity.clanman.clanId)"/>
				<bind name="watch" value="'alreadyInAnotherClan'; 	(playerEntity.clanman != null) &amp;&amp; (playerEntity.clanman.clanId != selfPlayerEntity.clanman.clanId)"/>
				<bind name="watch" value="'noFreePlacesInClan'; 		isFull"/>
				<block>
					<bind name="visible" value="(haveOwnClan &amp;&amp; canInvite &amp;&amp; !alreadyInYourClan)"/>
					<bind name="action" value="'click'; 'sendInviteToClan'; { playerDBID: accountDbId }"/>
					<bind name="style" value="'alpha'; (alreadyInAnotherClan || noFreePlacesInClan) ? 0.5 : 1"/>
					<bind name="tooltip" value="'SimpleStatusTooltip'; (alreadyInAnotherClan || noFreePlacesInClan)	? {	_text: 	noFreePlacesInClan 		? 'IDS_CLAN_INVITATION_DENY_REASON_CLAN_IS_FULL':
																												alreadyInAnotherClan 	? 'IDS_CLAN_INVITATION_DENY_REASON_PLAYER_ALREADY_IN_CLAN'
																																		: '',
																										_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.WARNING} 
																									: null"/>
					<style>
						<width value="100%"/>
						<backgroundColor value="0x01000000"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="style" value="'hitTest'; isHitTestEnabled &amp;&amp; (!alreadyInAnotherClan || !noFreePlacesInClan)"/>
						<bind name="alpha" value="isBot ? 0.5 : 1"/>
						<block className="MenuItem">
							<style>
								<width value="100%"/>
							</style>
							<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
							<block>
								<style>
									<width value="100%"/>
									<padding value="8px"/>
								</style>
								<block type="text">
									<styleClass value="$TextDefaultNM"/>
									<style>
										<width value="100%"/>
									</style>
									<bind name="text" value="'IDS_INVITATION_TO_CLAN'"/>
									<bind name="name" value="'menu_item_' + _titleIds"/>
								</block>
							</block>
						</block>
					</block>
				</block>
				<block>
					<params>
						<param name="name" value="id_profile"/>
					</params>
					<bind name="visible" value="_isInPBS"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'hitTest';  isHitTestEnabled"/>
					<bind name="alpha" value="isBot ? 0.5 : 1"/>
					<block className="MenuItem">
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
						<block>
							<style>
								<width value="100%"/>
								<padding value="8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultNM"/>
								<style>
									<width value="100%"/>
								</style>
								<bind name="text" value="'IDS_PROFILE'"/>
								<bind name="name" value="'menu_item_' + _titleIds"/>
							</block>
						</block>
					</block>
					<bind name="action" value="'click'; 'navigateTo'; {	route: isInDock ? SC.Ui_windows.ROUTE.PORTAL : SC.Ui_windows.ROUTE.ROOT_PORTAL_SHOW,
														data: {url: SC.Ui_windows.GUI_URL.PLAYER_STATS, accountId: accountDbId + ''}}"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="isSuspended"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<marginLeft value="7px"/>
					<marginBottom value="3px"/>
					<hitTest value="false"/>
					<marginRight value="4px"/>
					<leading value="-3"/>
					<alpha value="0.7"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="'IDS_NO_AVAILABLE_ACTIONS'"/>
				<bind name="name" value="'noAvailableActionLabel'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBotInRandom"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="3px"/>
					<marginBottom value="2px"/>
					<marginLeft value="-2px"/>
					<marginRight value="-2px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="2px"/>
						<backgroundSize value="fill"/>
						<marginTop value="1px"/>
						<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginLeft value="12px"/>
					<marginTop value="8px"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
											_text: 'IDS_BOT_WARNING'}"/>
			</block>
		</block>
	</block>
	<block className="PlayerMenuItemExpanded">
		<style>
			<width value="100%"/>
		</style>
		<block className="MenuItem">
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'DefaultMenuItemBackground'; {}"/>
			<block>
				<style>
					<width value="100%"/>
					<padding value="8px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="text" value="_text"/>
					<bind name="name" value="'menu_item_' + _titleIds"/>
				</block>
			</block>
		</block>
		<block className="button_expand_h" type="native">
			<style>
				<position value="absolute"/>
				<right value="6px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MouseDisable"/>
		</block>
		<bind name="tooltip" value="'PlayerSubMenu'; {	_battleType: _battleType, _isInBattle: _isInBattle, _sortedBy: _sortedBy, _playerName: _playerName,
										_isInPBS: _isInPBS, _playerDbId: _playerDbId, _arenaId: _arenaId, _wantPraisePlayer: _wantPraisePlayer,
										_evaluationLimitsComplain: _evaluationLimitsComplain, _evaluationLimitsPraise: _evaluationLimitsPraise,
										_isInSameDivisionOnStart: _isInSameDivisionOnStart, _complaintsAvailable: _complaintsAvailable};
										TooltipBehaviour.submenu"/>
	</block>
	<block className="PlayerSubMenu">
		<bind name="watch" value="'isEvaluationDisabledReason';	(_battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE) 		? _wantPraisePlayer		? 'IDS_PRAISE_DISABLED_FOR_CLAN_BATTLES'
																														: 'IDS_COMPLAIN_DISABLED_FOR_CLAN_BATTLES' 
																								: 
												(_battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE)							? 'IDS_TRAININGBATTLE' :
												(_evaluationLimitsComplain == 0) || (_evaluationLimitsPraise == 0)		? 'IDS_DAY_LIMIT_IS_OFF' :
												_isInSameDivisionOnStart						? _wantPraisePlayer 	? 'IDS_PRAISE_DISABLED_FOR_DIVISION_MEMBERS'
																														: 'IDS_COMPLAIN_DISABLED_FOR_DIVISION_MEMBERS' :
												!(_complaintsAvailable)							? _wantPraisePlayer		? 'IDS_PRAISE_TIMEOUT'
																														: 'IDS_COMPLAIN_TIMEOUT'
																								: false"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<style>
			<width value="270px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; { _isInBattle: _isInBattle }"/>
		</block>
		<block>
			<bind name="collectionRepeatDH" value="CC.playerEvaluationInfo; 'PlayerSubMenuItem'; _sortedBy;
									{ 	_isEvaluationDisabledReason: isEvaluationDisabledReason, _isInPBS: _isInPBS,
									 	_playerDbId: _playerDbId, _arenaId: _arenaId, _playerName: _playerName}"/>
		</block>
		<block>
			<bind name="instance" value="'WarningsAndDisableReasons'; { 	_evaluationLimitsComplain: _evaluationLimitsComplain, 
														_evaluationLimitsPraise: _evaluationLimitsPraise, 
														_isEvaluationDisabledReason: isEvaluationDisabledReason }"/>
		</block>
	</block>
	<block className="PlayerSubMenuItem">
		<bind name="dataRefDH" value="'infoEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'evaluationType'; 	[]; infoEntity.playerEvaluationInfo.evaluationType"/>
		<bind name="watchDH" value="'evaluationTopic'; 	[]; infoEntity.playerEvaluationInfo.evaluationTopic"/>
		<bind name="watchDH" value="'messageIDS'; 		[]; infoEntity.playerEvaluationInfo.messageIDS"/>
		<style>
			<width value="270px"/>
		</style>
		<styleClass value="$ContextMenuListItem"/>
		<bind name="name" value="'id_' + messageIDS"/>
		<bind name="style" value="'alpha'; _isEvaluationDisabledReason ? 0.5 : 1"/>
		<bind name="action" value="'buttonClick'; 'sendEvaluation'; _isInPBS ? {type: evaluationType, topic: evaluationTopic, accountDBID: _playerDbId, arenaId: _arenaId}
															: {type: evaluationType, topic: evaluationTopic, nickname: _playerName, arenaId: _arenaId}"/>
		<block className="dock_submenu_item" type="native">
			<bind name="style" value="'hitTest'; _isEvaluationDisabledReason ? false : true"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<maxWidth value="252"/>
				<marginLeft value="6px"/>
			</style>
			<bind name="text" value="messageIDS"/>
		</block>
	</block>
	<block className="WarningsAndDisableReasons">
		<bind name="watch" value="'isEvaluationDisabledReason'; 	_isEvaluationDisabledReason "/>
		<bind name="watch" value="'disableReasonComplain'; 		(_evaluationLimitsComplain &gt; 0) &amp;&amp; !(_isEvaluationDisabledReason)"/>
		<bind name="watch" value="'disableReasonPraise'; 		(_evaluationLimitsPraise &gt; 0) &amp;&amp; !(_isEvaluationDisabledReason) "/>
		<bind name="watch" value="'warningTextClass'; 	(disableReasonComplain || disableReasonPraise) 	? '$FontColorOrange' : 
										isEvaluationDisabledReason 						? '$FontColorCompareNegative'
																						: '$None'"/>
		<bind name="watch" value="'warningText'; 		disableReasonComplain 							? (tr('IDS_DAY_LIMIT') + ' ' + _evaluationLimitsComplain) :
										disableReasonPraise 							? (tr('IDS_DAY_LIMIT') + ' ' + _evaluationLimitsPraise) :
										isEvaluationDisabledReason 						? isEvaluationDisabledReason
																						: ''"/>
		<style>
			<marginLeft value="9px"/>
			<marginBottom value="6px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="disableReasonComplain || disableReasonPraise"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="4px"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isEvaluationDisabledReason"/>
			<block className="icon_warning_red" type="native">
				<style>
					<marginTop value="4px"/>
				</style>
			</block>
		</block>
		<block type="text">
			<params>
				<param name="name" value="warningsAndDisableReasons"/>
			</params>
			<style>
				<maxWidth value="240"/>
				<marginLeft value="1px"/>
			</style>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="warningTextClass"/>
			<bind name="text" value="warningText"/>
		</block>
	</block>
	<block className="UIListVoiceTextChatIcons">
		<bind name="primaryEntityDH" value="'voiceChatEnabledEntity'; CC.preference; 'sound.voice.chat.enabled'"/>
		<bind name="watchDH" value="'voiceChatEnabled'; ['voiceChatEnabledEntity.preference.evValueChanged']; voiceChatEnabledEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.avatar; _playerId"/>
		<bind name="watchDH" value="'pureName';			[]; playerEntity.avatar.pureName"/>
		<bind name="watchDH" value="'isPlayerMessagesMuted'; ['playerEntity.avatar.evMuteChanged']; playerEntity.avatar.mute"/>
		<bind name="watchDH" value="'relation'; 			['playerEntity.relation.evChanged']; playerEntity.relation.value"/>
		<bind name="watch" value="'isSelf'; (relation == 0)"/>
		<bind name="watchDH" value="'isIgnored';['playerEntity.contact.evIsIgnoredChanged']; !!playerEntity.contact.isIgnored"/>
		<bind name="watch" value="'playerCanBeInChat';	((_battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE) &amp;&amp; voiceChatEnabled) ||
										((_isInSameDivision &amp;&amp; voiceChatEnabled) &amp;&amp;	((_battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE) ||
																							(_battleType == SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE) ||
																							(_battleType == SC.Common.BATTLE_TYPES.PVE_BATTLE)))"/>
		<bind name="watch" value="'selfCanBeInChat';	((_battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE) &amp;&amp; isSelf) ||
									((isSelf &amp;&amp; _selfPlayerDivisionId) &amp;&amp;  ((_battleType == SC.Common.BATTLE_TYPES.RANDOM_BATTLE) ||
																			(_battleType == SC.Common.BATTLE_TYPES.COOPERATIVE_BATTLE) ||
																			(_battleType == SC.Common.BATTLE_TYPES.PVE_BATTLE)))"/>
		<bind name="watch" value="'canBeInChat'; (playerCanBeInChat || selfCanBeInChat)"/>
		<bind name="name" value="isPlayerMessagesMuted ? 'mute_' + pureName
								: 'not_mute_' + pureName"/>
		<block>
			<bind name="visible" value="canBeInChat"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="transition" value="canBeInChat &amp;&amp; (isPlayerMessagesMuted || isIgnored) &amp;&amp; (_isSpeaking || _isVoiceChatMuted || !(_isInVoiceChat)); 0.15; {alpha: 1, top: 9}; {alpha: 1, top: 3}; {alpha: 1, top: 9}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<bind name="watch" value="'state';	!(_isInVoiceChat)	? 'disabled' :
								_isVoiceChatMuted	? 'muted' :
								_isSpeaking			? 'speak'
													: null"/>
			<block>
				<bind name="transition" value="state; 0.1; {alpha: 0}; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<block className="icon_voice_chat_small" type="native">
					<bind name="gotoAndStop!" value="state"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="transition" value="canBeInChat &amp;&amp; (isPlayerMessagesMuted || isIgnored) &amp;&amp; (_isSpeaking || _isVoiceChatMuted || !(_isInVoiceChat)); 0.15; {alpha: 1, top: 8}; {alpha: 1, top: 14}; {alpha: 1, top: 8}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
			<block>
				<bind name="transition" value="(isPlayerMessagesMuted || isIgnored); 0.1; {alpha: 0}; {alpha: 1}; {alpha: 0}; SC.Common.UB1_EASING_FUNCTIONS.OUT_QUAD"/>
				<block className="icon_text_chat_small" type="native">
					<bind name="gotoAndStop!" value="'muted'"/>
				</block>
			</block>
		</block>
	</block>

	<!-- tooltip_ribbon -->
	<block className="RibbonTooltip">
		<bind name="primaryEntityDH" value="'ribbonEntity'; CC.ribbon; _ribbonId"/>
		<bind name="watchDH" value="'iconName'; []; ribbonEntity.ribbonInfo.iconName"/>
		<bind name="watchDH" value="'ribbonIds'; []; ribbonEntity.ribbonInfo.ids"/>
		<bind name="watch" value="'headerIconPath'; 'url:../ribbons/' + iconName + '.png'"/>
		<bind name="watch" value="'headerText'; tr('IDS_RIBBON_' + ribbonIds)"/>
		<bind name="watch" value="'description'; 'IDS_RIBBON_DESCRIPTION_' + (ribbonIds)"/>
		<bind name="watch" value="'amount'; ('x' + _amount)"/>
		<bind name="watch" value="'isSubribbonsVisible'; (_subRibbons.length &gt; 1)"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="primaryEntityDH" value="'_blurEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurOptionEnabled'; ['_blurEntity.preference.evValueChanged']; _blurEntity.preference.value"/>
		<bind name="primaryEntityDH" value="'_contrastEntity'; CC.preference; 'graphics.GUI.contrast'"/>
		<bind name="watchDH" value="'isUIContrastOptionEnabled'; ['_contrastEntity.preference.evValueChanged']; _contrastEntity.preference.value"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; 	['windowManagerEntity.windowManager.evWindowQueueChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isInBattle'; isIn('Battle', windowQueue)"/>
		<bind name="watch" value="'isHighContrast'; isInBattle || isUIContrastOptionEnabled || !(isBlurOptionEnabled)"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'startShow'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<bind name="dispatch" value="'Tooltip.selfClosed'; 'startHide'; {}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipSystemBlur'; !(isHighContrast) ? {} : null"/>
			</block>
			<block>
				<bind name="visible" value="!(isHighContrast)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="isHighContrast"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundImage value="url:../service_kit/panel_backgrounds/hint_panel_high_contrast.png"/>
					<background9Slice value="[3]"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="16px"/>
				<paddingLeft value="16px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText';	{	_imageUrl: headerIconPath,
																	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DEFAULT,
																	_headerText: headerText,
																	_headerIconType: 3,
																	_iconAmount: amount
																}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemDescriptionText'; {_descriptionText: description}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isSubribbonsVisible"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-16px"/>
					<marginLeft value="-16px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemItemsList'; isSubribbonsVisible	? {	_itemsType: 2,
																			_items: _subRibbons}
																		: null"/>
			</block>
		</block>
	</block>

	<!-- tooltip_system -->
	<block className="TooltipSystemBlur">
		<styleClass value="$FullsizeAbsolute"/>
		<block className="DeclareBlurLayer">
			<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
			<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
			<bind name="visible" value="isBlurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="mc_blurmap_medium" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.2; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.1; 0; {alpha: 1}; {alpha: 0}"/>
			<bind name="blurMap" value="0"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderWithIconAndText">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
		</style>
		<bind name="watch" value="'headerIconType'; _headerIconType	? _headerIconType
													: 0"/>
		<block>
			<style>
				<marginRight value="12px"/>
				<top value="0"/>
			</style>
			<bind name="child" value="headerIconType;	{
											_imageWidth:	_imageWidth,
											_imageHeight:	_imageHeight,
											_imageUrl:		_imageUrl,
											_iconAmount:	_iconAmount,
											_data:			_data
										};
										{
											0:		'TooltipSystemSimpleIcon',
											1:	'TooltipSystemIconWithCounter',
											2:		'TooltipSystemHeaderIconCamoRepaint',
											3:			'TooltipSystemHeaderIconRibbon',
											4:				'TooltipSystemHeaderIconCrew',
											5:			'TooltipSystemHeaderIconEcoBoost'
										}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText:	_headerText,
																_subheaderText: _subheaderText,
																_unifiedStatus: _unifiedStatus
															}"/>
		</block>
	</block>
	<block className="TooltipSystemSimpleIcon">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="colorTransform" value="_data.colorTransform	?	_data.colorTransform
												:	{}"/>
		<bind name="style" value="'width'; _imageWidth + 'px'"/>
		<bind name="style" value="'height'; _imageHeight + 'px'"/>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
	</block>
	<block className="TooltipSystemIconWithCounter">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _imageWidth + 'px'"/>
		<bind name="style" value="'height'; _imageHeight + 'px'"/>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
		<block>
			<style>
				<right value="0px"/>
				<bottom value="0px"/>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderIconCounter'; !!_iconAmount ? { _iconAmount: _iconAmount } : null"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderIconCounter">
		<block type="text">
			<style>
				<position value="absolute"/>
			</style>
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="text" value="_iconAmount"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="text" value="_iconAmount"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderSubheaderText">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block type="text">
			<params>
				<param name="name" value="tooltipSystemHeader"/>
			</params>
			<style>
				<width value="100%"/>
				<leading value="-4"/>
			</style>
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_headerText"/>
		</block>
		<block type="text">
			<bind name="visible" value="_subheaderText"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'alpha'; textColor == SC.Ui_styles.SERVICE_COLORS.WHITE ? 0.75 : 1"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_subheaderText"/>
		</block>
	</block>
	<block className="TooltipSystemSecondaryHeaderText">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block type="text">
			<params>
				<param name="name" value="tooltipSystemSecondaryHeader"/>
			</params>
			<style>
				<width value="100%"/>
				<leading value="-4"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_headerText"/>
		</block>
	</block>
	<block className="TooltipSystemInnerHeaderText">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-4"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_headerText"/>
		</block>
	</block>
	<block className="TooltipSystemShipsRange">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<style>
			<width value="100%"/>
			<marginTop value="-9px"/>
			<marginBottom value="-10px"/>
			<alpha value="0.7"/>
		</style>
		<block>
			<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_isSelf: true, _shipID: _startShipId, _fontSizeClass: '$FontSizeSmall'}"/>
		</block>
		<block type="text">
			<bind name="visible" value="!_isSingleShipFeature"/>
			<style>
				<marginTop value="7px"/>
				<marginLeft value="8"/>
				<marginRight value="8"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="text" value="'—'"/>
		</block>
		<block>
			<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; !_isSingleShipFeature ? {_isSelf: true,
																				_shipID: _endShipId,
																				_fontSizeClass: '$FontSizeSmall'}
																			 : null"/>
		</block>
	</block>
	<block className="TooltipSystemDueDateStatusLine">
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeft'; _dueDateTimeStamp - serverTime"/>
		<bind name="watch" value="'isTimeRunningOut'; timeLeft &lt; 86400"/>
		<bind name="timeFormat" value="_dueDateTimeStamp; 'dd.MM.yy'; 'formattedDueDate'; true"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemStatusLine';	{	_unifiedStatus: isTimeRunningOut	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																						: SC.Ui_styles.UNIFIED_STATUS.DATE,
													_text: subst(_substTextIDS, [], { _date: formattedDueDate }) 									
												}"/>
	</block>
	<block className="TooltipSystemTimeLeftStatusLine">
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'timeLeftTimeStamp'; _timeLeftTimeStamp	? _timeLeftTimeStamp
															: (math.toNum(serverTime)+(86400 * _daysLeft))"/>
		<bind name="watch" value="'timeLeft'; timeLeftTimeStamp - serverTime"/>
		<bind name="watch" value="'isTimeRunningOut'; timeLeft &lt; 86400"/>
		<bind name="countdown" value="timeLeftTimeStamp; 'formattedTimeLeft'; 'HIGHEST,WITH_DAYS'"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemStatusLine'; timeLeft &lt;= 0 &amp;&amp;
												_zeroTimeTextIDS	?	{	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION,
																			_text: _zeroTimeTextIDS}
																	:	{	_unifiedStatus: isTimeRunningOut	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																												: SC.Ui_styles.UNIFIED_STATUS.DATE,
																			_text: subst(_substTextIDS, [], { _timeLeft: formattedTimeLeft }) 									
																		}"/>
	</block>
	<block className="TooltipSystemStatusLine">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'StatusLine'; {	_unifiedStatus: _unifiedStatus, _text: _text,
									_textClass: '$TextDefaultNM', _leading: -3,
									_width: '100%'}"/>
	</block>
	<block className="TooltipSystemDescriptionText">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<params>
				<param name="name" value="tooltipSystemDescription"/>
			</params>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_descriptionText"/>
		</block>
	</block>
	<block className="TooltipSystemParamsModifiersList">
		<bind name="entityDH" value="'paramsModifiersEntity'; _paramsModifiersEntityId"/>
		<bind name="watch" value="'attributesPositive'; 	_attributesPositive	? _attributesPositive
															: paramsModifiersEntity.attributes.positive"/>
		<bind name="watch" value="'attributesNegative'; 	_attributesNegative	? _attributesNegative
															: paramsModifiersEntity.attributes.negative"/>
		<bind name="watch" value="'attributesNeutral';	_attributesNeutral	? _attributesNeutral
															: paramsModifiersEntity.attributes.neutral"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-16px"/>
				<marginRight value="-16px"/>
				<marginTop value="-12px"/>
				<marginBottom value="-13px"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/inner_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-12px"/>
			</style>
			<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: attributesPositive,
												_attributesNegative: attributesNegative,
												_attributesNeutral: attributesNeutral,
												_isTooltipSystem: true}"/>
		</block>
	</block>
	<block className="TooltipSystemPriceTagLine">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginRight value="8px"/>
			</style>
			<bind name="style" value="'width'; _isPriceTagOnRight ? '100%' : '100%f'"/>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<marginTop value="-6px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'PriceTag'; { priceInfo: _priceInfo, _showDiscountTag: true }"/>
		</block>
	</block>
	<block className="TooltipSystemCounterLine">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%f"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginRight value="8px"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block type="text">
			<style>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="format(_count, -1)"/>
		</block>
	</block>
	<block className="TooltipSystemProgressBarBlock">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'progress'; _currentValue/_maxValue"/>
		<bind name="watch" value="'curValue'; _showPercent ? (format(progress*100, 0) + '%') : _currentValue"/>
		<bind name="watch" value="'maxValue'; _showPercent ? 0 : _maxValue"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="-1px"/>
				<marginLeft value="-1px"/>
			</style>
			<bind name="instance" value="'DefaultProgressBar'; { _progress: progress, _color: _barColor}"/>
		</block>
		<block>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultNM',
													_doNotHideOnZeroMaxValue: true,
													_curValue: curValue,
													_maxValue: maxValue,
													_unifiedStatus: _unifiedStatus}"/>
		</block>
	</block>
	<block className="TooltipSystemDoubleProgressBarBlock">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'progress'; _currentValue/_maxValue"/>
		<bind name="watch" value="'progressIncrement'; _valueIncrement	? _currentValue == _maxValue	? 1 - progressBefore
																						: _valueIncrement / _maxValue
														: null"/>
		<bind name="watch" value="'progressBefore'; (_currentValue - _valueIncrement) / _maxValue"/>
		<bind name="watch" value="'curValue'; _showPercent ? (format(progress*100, 0) + '%') : _currentValue"/>
		<bind name="watch" value="'maxValue'; _showPercent ? 0 : _maxValue"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginBottom value="12px"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="-1px"/>
				<marginLeft value="-1px"/>
			</style>
			<bind name="instance" value="'DoubleProgressBar'; {	_progress1: progressBefore,
												_color1: progressIncrement	? SC.Ui_styles.SERVICE_COLORS.ORANGE : SC.Ui_styles.SERVICE_COLORS.YELLOW,
												_progress2: progressIncrement,
												_color2: SC.Ui_styles.SERVICE_COLORS.YELLOW } "/>
		</block>
		<block>
			<style>
				<marginTop value="4px"/>
			</style>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultNM',
													_doNotHideOnZeroMaxValue: true,
													_curValue: curValue,
													_maxValue: maxValue }"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderIconCamoRepaint">
		<block className="CamouflageRepaintedIcon" type="ublock">
			<bind name="build!" value="{_camouflageId: _data.camouflageId}"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderIconRibbon">
		<style>
			<height value="51px"/>
			<width value="133px"/>
			<margin value="-2px"/>
		</style>
		<bind name="style" value="'backgroundImage'; _imageUrl"/>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="6px"/>
				<right value="6px"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderIconCounter'; !!_iconAmount ? {_iconAmount: _iconAmount} : null"/>
		</block>
	</block>
	<block className="TooltipSystemShipStereotype">
		<bind name="visible" value="_isReady ? _isReady : isReady"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'ShipTitleWithIconAndLevel'; { _shipID: _shipID ? _shipID : shipId, _size: 'medium' }"/>
	</block>
	<block className="TooltipSystemHeaderIconCrew">
		<bind name="instance" value="'CrewStereotype'; {	_crewHistoryId: _data.crewHistoryId,
										_crewId: _data.crewId,
										_shipClass: _data.shipSubtype,
										_size: 0}"/>
	</block>
	<block className="TooltipSystemShipWithTitle">
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION				? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CALENDAR_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RETRAINING			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_CONFIRMED		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WITHOUT_COMMANDER		? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK					? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CAMPAIGN_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CONTAINER_REWARD		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BROTHERHOOD_REWARD	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SALE_AVAILABLE		? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.EARLY_ACCESS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.OUT_BATTLE			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.UNIQUE_CREW			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.RECOMMENDED			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.BATTLEPASS			? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.SHIP_CRAFT_AVAILABLE	? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.VICTORY				? SC.Ui_styles.SERVICE_COLORS.GREEN :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFEAT				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING				? SC.Ui_styles.SERVICE_COLORS.RED :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ABUSE_SUSPECT			? SC.Ui_styles.SERVICE_COLORS.PINK
																										: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor != SC.Ui_styles.SERVICE_COLORS.WHITE ? 1 : 0.9"/>
		<style>
			<width value="100%"/>
			<marginTop value="-12px"/>
		</style>
		<block type="text">
			<style>
				<marginRight value="12px"/>
				<marginTop value="12px"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
			</style>
			<bind name="instance" value="'ShipLineItemNM'; { _shipId: _shipId, _withFlag: _withFlag }"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderShip">
		<style>
			<width value="100%"/>
			<marginTop value="4px"/>
		</style>
		<bind name="instance" value="'ShipLineItemNM'; { _shipId: _shipId, _withFlag: _withFlag, _fontClass: '$TextDefaultBold19NM' }"/>
	</block>
	<block className="TooltipSystemHeaderIconEcoBoost">
		<style>
			<width value="80px"/>
			<height value="80px"/>
		</style>
		<bind name="style" value="'backgroundImage';	_data.type == SC.Common.ECOBOOST_TYPES.COMMON	? 'url:../eco_boosts/common/' + _data.paramsId + '.png' :
									_data.type == SC.Common.ECOBOOST_TYPES.LINKABLE	? 'url:../eco_boosts/multiboosts/linkable.png' :
									_data.type == SC.Common.ECOBOOST_TYPES.GLOBAL	? 'url:../eco_boosts/multiboosts/globalboost.png'
																					: 'url:../eco_boosts/multiboosts/clanboost.png'"/>
	</block>
	<block className="TooltipSystemProgressParamsElement">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'ProgressParamsElement'; { _width: '100%', _text: _text, _param_1: _param_1, _param_2: _param_2 }"/>
	</block>

	<!-- tooltip_system_items_list -->
	<block className="TooltipSystemItemsList">
		<style>
			<width value="100%"/>
			<marginBottom value="-12px"/>
		</style>
		<bind name="style" value="'marginTop'; !_title ? '-12px' : '0px'"/>
		<block type="text">
			<bind name="visible" value="_title"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="child" value="_itemsType ? _itemsType : 0; {_items: _items}; {	0	: 'TooltipSystemAchievementsList',
																		2	: 'TooltipSystemSubribbonsList' }"/>
		</block>
	</block>
	<block className="TooltipSystemListItem">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<align value="middle"/>
			<marginTop value="12px"/>
			<marginBottom value="12px"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<top value="0"/>
			</style>
			<bind name="instance" value="'TooltipSystemIconWithCounter'; {	_imageWidth:	_imageWidth,
															_imageHeight:	_imageHeight,
															_imageUrl:		_imageUrl,
															_iconAmount:	_iconAmount}"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-2"/>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="text" value="_title"/>
		</block>
	</block>
	<block className="TooltipSystemAchievementsList">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_items; 'TooltipSystemAchievementItem'"/>
	</block>
	<block className="TooltipSystemAchievementItem">
		<bind name="primaryEntityDH" value="'achievementEntity'; CC.achievement; id ? id : $value"/>
		<bind name="watch" value="'_imageUrl'; ('url:../achievements/icon_achievement_' + achievementEntity.achievementInfo.name + '.png')"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemListItem'; {	_imageWidth: 40,
												_imageHeight: 40,
												_imageUrl: _imageUrl,
												_title: achievementEntity.achievementInfo.nameIDS}"/>
	</block>
	<block className="TooltipSystemSubribbonsList">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_items; 'TooltipSystemSubribbonItem'"/>
	</block>
	<block className="TooltipSystemSubribbonItem">
		<bind name="watch" value="'imageUrl'; 'url:../ribbons/subribbons/' + iconName + '.png'"/>
		<bind name="watch" value="'title'; tr('IDS_RIBBON_' + ids)"/>
		<bind name="watch" value="'amount'; 'x' + count"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemListItem'; count &gt; 0	? {	_imageWidth: 65,
															_imageHeight: 51,
															_imageUrl: imageUrl,
															_iconAmount: amount,
															_title: title}
														: null"/>
	</block>

	<!-- tooltip_system_rewards -->
	<block className="TooltipSystemRewards">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-16px"/>
				<marginRight value="-16px"/>
				<marginTop value="-12px"/>
				<marginBottom value="-12px"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/inner_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block type="text">
			<bind name="visible" value="_rewardsTitle"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginBottom value="8px"/>
			</style>
			<bind name="text" value="_rewardsTitle"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_rewards; 'RewardContainerTooltipItem'"/>
		</block>
	</block>
	<block className="TooltipSystemDHRewards">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-16px"/>
				<marginRight value="-16px"/>
				<marginTop value="-12px"/>
				<marginBottom value="-12px"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/inner_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block type="text">
			<bind name="visible" value="_rewardsTitle"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
				<marginBottom value="8px"/>
			</style>
			<bind name="text" value="_rewardsTitle"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_rewards; 'RewardContainerTooltipItemAdapter'"/>
		</block>
	</block>
	<block className="TooltipSystemRewardsList">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-16px"/>
				<marginRight value="-16px"/>
				<marginTop value="-12px"/>
				<marginBottom value="-12px"/>
				<backgroundImage value="url:../service_kit/panel_backgrounds/inner_panel.png"/>
				<background9Slice value="[3]"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-12px"/>
			</style>
			<bind name="repeat" value="_rewards; 'TooltipSystemRewardListItem'"/>
		</block>
	</block>
	<block className="TooltipSystemRewardListItem">
		<style>
			<width value="100%"/>
			<marginBottom value="12px"/>
		</style>
		<bind name="watch" value="'isCurrency'; isIn(subtype, SC.Common.CURRENCIES.ALL) || subtype == SC.Common.REWARD_SUBTYPE.CLANRESOURCE"/>
		<bind name="watch" value="'currency'; 	subtype == SC.Common.REWARD_SUBTYPE.CLANRESOURCE	?	SC.Common.CURRENCIES.CLAN_RESOURCE
																					:	subtype"/>
		<bind name="watch" value="'title'; isCurrency || isAdditionalLine	? tr(toUpperCase('IDS_REWARD_' + subtype + '_TITLE'))
															: tr(toUpperCase('IDS_REWARD_LOOTBOX_' + subtype + '_TITLE'))"/>
		<bind name="watch" value="'priceInfo'; { finalPrice: amount, currency: currency}"/>
		<bind name="instance" value="'TooltipSystemRewardPriceTag'; isCurrency ? {_title: title, _priceInfo: priceInfo} : null"/>
		<bind name="instance" value="'TooltipSystemRewardCounter'; !isCurrency || isAdditionalLine ? {_title: title, _count: amount} : null"/>
	</block>
	<block className="TooltipSystemRewardPriceTag">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<marginTop value="-6px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'PriceTag'; {priceInfo: _priceInfo, _showDiscountTag: _showDiscountTag}"/>
		</block>
	</block>
	<block className="TooltipSystemRewardCounter">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block type="text">
			<style>
				<alpha value="0.9"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="text" value="format(_count, -1)"/>
		</block>
	</block>

	<!-- training_room_elements -->
	<block className="TrainingRoomAppliedFilter">
		<style>
			<flow value="htile"/>
			<hitTest value="false"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '185px'"/>
		<bind name="style" value="'align'; _align ? _align : 'left'"/>
		<bind name="style" value="'paddingRight'; _align == 'right' ? '16px' : '0px'"/>
		<bind name="entityDH" value="'trainingRoomEntity'; _trainingRoomEntityId"/>
		<bind name="watchDH" value="'selectedFilters'; ['trainingRoomEntity.shipListRestrictions.evUpdate']; trainingRoomEntity.shipListRestrictions.selectedFilters"/>
		<bind name="watchDH" value="'typesCount'; ['trainingRoomEntity.divisionRestrictions.evUpdate']; trainingRoomEntity.divisionRestrictions.typesCount"/>
		<bind name="primaryEntityDH" value="'defaultRestrictionsEntity'; CC.battleTypeCommonRestrictions; SC.Common.BATTLE_TYPES.TRAINING_BATTLE"/>
		<bind name="watchDH" value="'defaultTypesCount' ; ['defaultRestrictionsEntity.divisionRestrictions.evUpdate']; defaultRestrictionsEntity.divisionRestrictions.typesCount"/>
		<bind name="watch" value="'isCarriersRestricted'; typesCount[ShipTypes.AircraftCarrier] &amp;&amp; typesCount[ShipTypes.AircraftCarrier][1] != defaultTypesCount[ShipTypes.AircraftCarrier][1]"/>
		<bind name="watch" value="'isBattleShipsRestricted'; typesCount[ShipTypes.BattleShip] &amp;&amp; typesCount[ShipTypes.BattleShip][1] != defaultTypesCount[ShipTypes.BattleShip][1]"/>
		<bind name="watch" value="'isCruisersRestricted'; typesCount[ShipTypes.Cruiser] &amp;&amp; typesCount[ShipTypes.Cruiser][1] != defaultTypesCount[ShipTypes.Cruiser][1]"/>
		<bind name="watch" value="'isDestroyersRestricted'; typesCount[ShipTypes.Destroyer] &amp;&amp; typesCount[ShipTypes.Destroyer][1] != defaultTypesCount[ShipTypes.Destroyer][1]"/>
		<bind name="watch" value="'isSubmarinesRestricted'; typesCount[ShipTypes.Submarine] &amp;&amp; typesCount[ShipTypes.Submarine][1] != defaultTypesCount[ShipTypes.Submarine][1]"/>
		<bind name="watch" value="'isAnyShipTypeRestricted'; (isCarriersRestricted || isBattleShipsRestricted || isCruisersRestricted || isDestroyersRestricted || isSubmarinesRestricted) &amp;&amp; _showShipRestrictions != false"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'selectedItemsLevels'+'ROOT'; 'byFilterType.level'"/>
		<bind name="collectionDesign" value="'DES_'+'selectedItemsLevels'+'ROOT'; 'selectedItemsLevels'; {'filter':isIn($entity.id, selectedFilters)}; []"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'selectedItemsNations'+'ROOT'; 'byFilterType.nation'"/>
		<bind name="collectionDesign" value="'DES_'+'selectedItemsNations'+'ROOT'; 'selectedItemsNations'; {'filter':isIn($entity.id, selectedFilters)}; []"/>
		<bind name="collectionFields" value="'selectedItemsLevels'; ['shipFilterItem.field']"/>
		<block>
			<style>
				<height value="30px"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'ShipLevelRome'; { _levelRange: selectedItemsLevels_shipFilterItem_field }"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="selectedItemsLevels.length &gt; 0 &amp;&amp; (isAnyShipTypeRestricted || selectedItemsNations.length &gt; 0)"/>
			<style>
				<height value="26px"/>
				<margin value="6px|3px|2px|0"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isAnyShipTypeRestricted"/>
			<style>
				<height value="30px"/>
				<paddingTop value="3px"/>
			</style>
			<bind name="instance" value="'ShipFilterRestrictions'; isAnyShipTypeRestricted ? {_filters: typesCount, _withShipTypeCounters: _withShipTypeCounters} : null"/>
		</block>
		<block>
			<bind name="visible" value="selectedItemsNations.length &gt; 0 &amp;&amp; isAnyShipTypeRestricted"/>
			<style>
				<height value="26px"/>
				<marginRight value="6px"/>
				<marginTop value="2px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
				</style>
			</block>
		</block>
		<bind name="repeat" value="selectedItemsNations; 'FilterItemWrapper'; {_maxFiltersCount: _maxFiltersCount}"/>
	</block>
	<block className="FilterItemWrapper">
		<style>
			<height value="30px"/>
		</style>
		<bind name="dataRefDH" value="'filterEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'_field'; ['filterEntity.shipFilterItem.evUpdate']; filterEntity.shipFilterItem.field"/>
		<bind name="watch" value="'isItemOverflow'; _maxFiltersCount ? $index + 1 &gt; _maxFiltersCount : false"/>
		<block>
			<bind name="visible" value="!isItemOverflow"/>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<style>
						<marginRight value="4px"/>
					</style>
					<bind name="instance" value="'NationFlagsTiny'; { _shipCountry: _field}"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="$index == _maxFiltersCount"/>
			<style>
				<height value="30px"/>
				<marginRight value="6px"/>
				<alpha value="0.75"/>
			</style>
			<block type="text">
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="text" value="'...'"/>
			</block>
		</block>
	</block>
	<block className="CurrentTotalIndicator">
		<block>
			<block type="text">
				<bind name="class" value="_currentTextClass"/>
				<bind name="class" value="_colorClass"/>
				<style>
					<marginRight value="2px"/>
				</style>
				<bind name="text" value="_withBrackets == true ? '(' + _current : _current"/>
			</block>
			<block type="text">
				<bind name="class" value="_totalTextClass"/>
				<bind name="class" value="_colorClass"/>
				<style>
					<marginTop value="1px"/>
					<marginRight value="1px"/>
					<alpha value="0.8"/>
				</style>
				<bind name="text" value="'/' + _total"/>
			</block>
			<block type="text">
				<bind name="visible" value="_withBrackets"/>
				<bind name="class" value="_currentTextClass"/>
				<bind name="class" value="_colorClass"/>
				<bind name="text" value="')'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="TextDataBlock">
		<style>
			<width value="100%"/>
		</style>
		<styleClass value="$MiddleVAligned"/>
		<bind name="style" value="'paddingLeft'; _align != 'right' ? '16px' : '0px'"/>
		<bind name="style" value="'paddingRight'; _align == 'right' ? '16px' : '0px'"/>
		<block>
			<bind name="visible" value="_headerText"/>
			<style>
				<alpha value="0.9"/>
				<width value="100%"/>
				<marginBottom value="10px"/>
				<marginTop value="-6px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-2"/>
				</style>
				<styleClass value="$TextDefaultBold19NM"/>
				<bind name="style" value="'textAlign'; _align ? _align : 'left'"/>
				<bind name="visible" value="_headerText"/>
				<bind name="text" value="_headerText"/>
			</block>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.85"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="style" value="'textAlign'; _align ? _align : 'left'"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="TrainingRoomTextInputPassword">
		<style>
			<width value="100%"/>
		</style>
		<block className="TrainingRoomTextInputContent">
			<bind name="style" value="'width'; _width ? _width : '100%'"/>
			<style>
				<flow value="horizontal"/>
			</style>
			<bind name="var" value="{textInput: ''}"/>
			<bind name="catch" value="'removedFromStage'; {textInput: ''}"/>
			<bind name="changeDispatch" value="_defaultInputValue; 'setDefaultValue'"/>
			<bind name="catch" value="'setDefaultValue'; {textInput: _defaultInputValue}"/>
			<bind name="dispatch" value="'wrongSymbolInputed' + varChanged; 'evWrongSymbolInputed'"/>
			<block className="text_input_caps_enter" type="native">
				<bind name="name" value="'organizerSearchField'"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? {_text: _tooltipText} : null"/>
				<style>
					<width value="100%"/>
				</style>
				<params>
					<param name="soundSet" value="hard_textinput"/>
					<param name="actAsButton" value="true"/>
				</params>
				<bind name="maxChars" value="_maxChars ? _maxChars : 32"/>
				<bind name="defaultText" value="_defaultText"/>
				<bind name="ubFocus" value="_focusIndex; _defaultFocused; true; true"/>
				<bind name="restrict" value="_restrict ? _restrict : restrict"/>
				<bind name="restrictFeedback" value="_restrictRegexp ? _restrictRegexp : null; 'wrongSymbolInputed'"/>
				<bind name="text" value="textInput"/>
				<bind name="sync" value="'text'; 'change'; 'textInput'"/>
				<bind name="dispatch" value="'change'; 'TrainingRoomTextInput.' + onInputStrChangedEvent; {pwdStr: textInput}"/>
				<bind name="dispatch" value="'textInputEnter'; 'TrainingRoomTextInput.' + onEnterEvent; {pwdStr: textInput}"/>
				<block className="button_dock" type="native">
					<bind name="tooltip" value="'SimpleStatusTooltip'; _onEnterTooltipText ? {_text: _onEnterTooltipText} : null"/>
					<styleClass value="$TextInputEnterButton"/>
					<bind name="enabled" value="textInput.length &gt; 0"/>
					<bind name="dispatch" value="'buttonClick'; 'TrainingRoomTextInput.' + onEnterEvent; {pwdStr: textInput}"/>
				</block>
			</block>
			<block>
				<bind name="name" value="'cancelOrganizerSearch'"/>
				<style>
					<marginLeft value="6px"/>
					<marginTop value="10px"/>
				</style>
				<bind name="instance" value="'CloseButton'; _disableCloseBtn	? null
														: { _event: 'TrainingRoomTextInput.' + onCancelEvent,
															_tooltipText: _closeButtonTooltipText }"/>
			</block>
		</block>
	</block>
	<block className="TrainingRoomTextInputPlayerName">
		<style>
			<width value="100%"/>
		</style>
		<block className="TrainingRoomTextInputContent">
			<bind name="style" value="'width'; _width ? _width : '100%'"/>
			<style>
				<flow value="horizontal"/>
			</style>
			<bind name="var" value="{textInput: ''}"/>
			<bind name="catch" value="'removedFromStage'; {textInput: ''}"/>
			<bind name="changeDispatch" value="_defaultInputValue; 'setDefaultValue'"/>
			<bind name="catch" value="'setDefaultValue'; {textInput: _defaultInputValue}"/>
			<bind name="dispatch" value="'wrongSymbolInputed' + varChanged; 'evWrongSymbolInputed'"/>
			<block className="text_input_caps_enter" type="native">
				<bind name="name" value="'organizerSearchField'"/>
				<bind name="tooltip" value="'SimpleStatusTooltip'; _tooltipText ? {_text: _tooltipText} : null"/>
				<style>
					<width value="100%"/>
				</style>
				<params>
					<param name="soundSet" value="hard_textinput"/>
					<param name="actAsButton" value="true"/>
				</params>
				<bind name="maxChars" value="_maxChars ? _maxChars : 32"/>
				<bind name="defaultText" value="_defaultText"/>
				<bind name="ubFocus" value="_focusIndex; _defaultFocused; true; true"/>
				<bind name="restrict" value="_restrict ? _restrict : restrict"/>
				<bind name="restrictFeedback" value="_restrictRegexp ? _restrictRegexp : null; 'wrongSymbolInputed'"/>
				<bind name="text" value="textInput"/>
				<bind name="sync" value="'text'; 'change'; 'textInput'"/>
				<bind name="dispatch" value="'change'; 'TrainingRoomTextInput.' + onInputStrChangedEvent; {pNameStr: textInput}"/>
				<bind name="dispatch" value="'textInputEnter'; 'TrainingRoomTextInput.' + onEnterEvent; {pNameStr: textInput}"/>
				<block className="button_dock" type="native">
					<bind name="tooltip" value="'SimpleStatusTooltip'; _onEnterTooltipText ? {_text: _onEnterTooltipText} : null"/>
					<styleClass value="$TextInputEnterButton"/>
					<bind name="enabled" value="textInput.length &gt; 0"/>
					<bind name="dispatch" value="'buttonClick'; 'TrainingRoomTextInput.' + onEnterEvent; {pNameStr: textInput}"/>
				</block>
			</block>
			<block>
				<bind name="name" value="'cancelOrganizerSearch'"/>
				<style>
					<marginLeft value="6px"/>
					<marginTop value="10px"/>
				</style>
				<bind name="instance" value="'CloseButton'; _disableCloseBtn	? null
														: { _event: 'TrainingRoomTextInput.' + onCancelEvent,
															_tooltipText: _closeButtonTooltipText }"/>
			</block>
		</block>
	</block>

	<!-- utils -->
	<block className="HorizontalDivider">
		<styleClass value="$PxHorizontalCorrection"/>
		<style>
			<width value="100%"/>
			<height value="2px"/>
			<backgroundSize value="fill"/>
			<marginTop value="1px"/>
			<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
		</style>
	</block>
	<block className="HorizontalDividerTwoPx">
		<style>
			<width value="100%"/>
			<height value="2px"/>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
		</style>
	</block>
	<block className="DottedHorizontalDivider">
		<style>
			<width value="100%"/>
			<height value="2px"/>
			<backgroundRepeatX value="true"/>
			<backgroundImage value="url:../service_kit/dividers/divider_h_secondary.png"/>
		</style>
	</block>
	<block className="VerticalDivider">
		<style>
			<height value="100%"/>
			<width value="3px"/>
			<backgroundSize value="fill"/>
			<backgroundImage value="url:../service_kit/dividers/divider_v.png"/>
		</style>
	</block>
	<block className="TableDivider">
		<style>
			<backgroundImage value="bitmap:dotted_line"/>
			<backgroundRepeatX value="true"/>
			<width value="100%"/>
			<height value="1px"/>
			<alpha value="0.25"/>
		</style>
	</block>
	<block className="Underline">
		<bind name="style" value="'backgroundColor'; (rollOver &amp;&amp; !mouseDown) ? '0xFFFFFFFF' : '0x00856933'"/>
		<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) == true; 0.3; {scaleX : 0, alpha : 0}; {scaleX : 1, alpha :1}"/>
		<style>
			<backgroundColor value="0xFFFFFFFF"/>
			<position value="absolute"/>
			<height value="1px"/>
			<width value="100%"/>
			<bottom value="0px"/>
			<marginLeft value="2px"/>
			<marginRight value="2px"/>
		</style>
	</block>
	<block className="BlurMap">
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="visible" value="isBlurEnabled"/>
		<style>
			<hitTest value="false"/>
		</style>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="mc_blurmap_medium" type="native">
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="blurMap" value="0"/>
		</block>
		<block className="inner_panel" type="native">
			<style>
				<alpha value="0.2"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
	</block>
	<block className="DeclareBlurLayer">
		<bind name="primaryEntityDH" value="'isBlurEnabledEntity'; CC.preference; 'graphics.GUI.blur'"/>
		<bind name="watchDH" value="'isBlurEnabled'; ['isBlurEnabledEntity.preference.evValueChanged']; isBlurEnabledEntity.preference.value"/>
		<bind name="visible" value="isBlurEnabled"/>
		<block className="transparentPixel" type="native">
			<bind name="blurLayer" value="0"/>
		</block>
		<style>
			<position value="absolute"/>
		</style>
	</block>
	<block className="DropShadow">
		<styleClass value="$FullsizeAbsolute"/>
		<styleClass value="$MouseDisable"/>
		<block className="drop_shadow" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<marginTop value="-2px"/>
				<marginRight value="-6px"/>
				<marginBottom value="-10px"/>
				<marginLeft value="-6px"/>
			</style>
		</block>
	</block>
	<block className="EmptyItem">
		<bind name="visible" value="false"/>
	</block>
	<block className="DottedLine">
		<style>
			<backgroundImage value="bitmap:dotted_line"/>
			<backgroundRepeatX value="true"/>
			<width value="100%"/>
			<height value="1px"/>
			<alpha value="0.5"/>
		</style>
	</block>

	<!-- voice_chat_elements -->
	<block className="VoiceChatOutgoingIcon">
		<bind name="firstEntityDH" value="'voiceChatEntity'; CC.voiceChat"/>
		<bind name="watchDH" value="'voiceChatOutgoing'; ['voiceChatEntity.voiceChat.evOutgoingChanged']; voiceChatEntity.voiceChat.outgoing"/>
		<bind name="transition" value="voiceChatOutgoing; 0.15; {alpha: 0}; {alpha: 1}"/>
		<bind name="tooltip" value="'SimpleStatusTooltip'; voiceChatOutgoing	? {	_text: 'IDS_VOICE_CHAT_OUTGOING_STATE_HINT' }
															: null"/>
		<block>
			<bind name="transition" value="_isSpeaking; 0.15; {alpha: 0.6}; {alpha: 1}"/>
			<block className="icon_voice_chat" type="native"/>
		</block>
	</block>
</ui>
