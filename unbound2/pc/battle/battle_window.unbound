(def element BattleWindow ()
	(macro MODAL_WINDOW_INIT)
	(scope
		(var battleStateComponent:dhComponent =	"getSingleComponent(CC.battleState)")
		(var cameraComponent:dhComponent =	"getSingleComponent(CC.camera)")
		(var isCinematicActive:bool = "cameraComponent.isCinematicActive" (event "cameraComponent.evIsCinematicActiveChanged"))
		(var devModeComponent:dhComponent =	"getSingleComponent(CC.devMode)")

		(var isUIVisible:bool = "!isCinematicActive")
		(var isElementVisible:bool = "devModeComponent ? !devModeComponent.hideBattleHUDElements : true" (event "devModeComponent.evHideBattleHUDElementsChanged"))
	)

	(bind visible "isUIVisible")

	(controller $Animation
		(bindcall play duration="SC.Common.END_BATTLE_IDLING.UI_HIDE_TIME" from="{ alpha: 1 }" to="{ alpha: 0 }" (event "battleStateComponent.evBattleStartHideUI"))
	)

	(element BinocularsBackground $autoPerfTestGroup='binoculars'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element FullScreenEffectsContainer $autoPerfTestGroup='fullscreen_effect'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element MarkersContainer $autoPerfTestGroup='markers'
		
		(style (hitTest = true))
	)

	(element POIIndicatorsContainer $autoPerfTestGroup='poi_indicators'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element OwnShipHealth $autoPerfTestGroup='shipInfo'
		_isVisible = "isElementVisible"
	)

	(element SpeedControl $autoPerfTestGroup='indicator_speed'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element CompassContainer $autoPerfTestGroup='indicator_compass'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element FpsPanel $autoPerfTestGroup='header_texts'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element UbObservedPlayerLabel $autoPerfTestGroup='header_texts'
		_isVisible = "isElementVisible"
	)

	(element CrosshairContainer $autoPerfTestGroup='crosshair'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element TacticalMapHelpElement $autoPerfTestGroup='tactical_map'
		_isVisible = "isElementVisible"
	)

	(element FlyOffDamageContainer $autoPerfTestGroup='flyoff_damage'
		
		(style (hitTest = false))
	)

	(element TacticalMapTextGridContainer $autoPerfTestGroup='tactical_map'
		_isVisible = "isElementVisible"
	)

	(element MainHud $autoPerfTestGroup='header'
		_isVisible = "isElementVisible"
	)

	(element TutorialContextHintsContainer $autoPerfTestGroup='header_texts'
		_isVisible = "isElementVisible"
		(style (hitTest = false))
	)

	(element BattleStats
		_isVisible = "isElementVisible"
	)

	(element ModalQuickCommandsFullscreenContainer $autoPerfTestGroup='quick_commands'
		_isVisible = "isElementVisible"
	)

	(element ModalWindowQuickCommandsSmallContainer $autoPerfTestGroup='quick_commands'
		_isVisible = "isElementVisible"
	)

	(element EventIngameBattleResultsContainer $autoPerfTestGroup='pve_progress'
		_isVisible = "isElementVisible"
	)

	(element HUDModalWindowsContainer $autoPerfTestGroup='header'
		_isVisible = "isElementVisible"
	)
)