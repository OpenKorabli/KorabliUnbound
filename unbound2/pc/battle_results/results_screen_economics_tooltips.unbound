(def element BuyPremResultScreenButtonTooltip ()
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)
	)

	(style (width = 300px))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemStatusLine
			_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.ATTENTION"
			_text =				'IDS_PURCHASE_PREMIUM_WARNING_NEXT_BATTLE'
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemStatusLine
			_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT"
			_text =				'IDS_MOVE_TO_THE_PURCHASE_PREMIUM'
		)
	)
)

(def element PostBattleFreeExpTooltip (_entity:dhEntity)
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)

		(var childrenRows:array =	"_entity.battleResultsEntry.children ?: []")
		(var priceInfo:dict =		"_entity.battleResultsEntry.values[1]")
	)

	(style (width = 430px))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = 'IDS_CURRENCY_FREE_XP'
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemDescriptionText
			_descriptionText = 'IDS_FREE_XP_DESC'
		)

		(element TooltipSystemHorizontalDivider)

		(block
			(style (width = 100%))
			(macro TOOLTIP_SYSTEM_INNER_PANEL_BACKGROUND)

			(block
				(style
					(width = 100%)
					(paddingTop = -9px)
					(paddingBottom = -9px)
					(paddingLeft = "-SXS")
					(paddingRight = "-SXS")
				)

				(controller $Repeat renderer='BattleStatsEconomicsRow'
					(bind count "childrenRows.length")
					(args
						_entityId =			"childrenRows[$index]"
						_childrenLength =	"childrenRows.length"
					)
				)
			)
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemPriceTagLine
			_title =			'IDS_RECEIVED_COLON'
			_labelTextClass =	'$TextDefaultBold20NM'
			_priceInfo =		"{ finalPrice: priceInfo.value, currency: priceInfo.type }"
			_priceTagSize =		"SIZE.MEDIUM"
		)
	)
)

(def element PostBattleEliteExpTooltip ()
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)
	)

	(style (width = 340px))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = 'IDS_ELITE_XP'
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemDescriptionText
			_descriptionText = 'IDS_ELITE_XP_DESC'
		)
	)
)

(def element EcoboostPostBattleTooltip (_entity:dhEntity)
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)

		(var boostId:number =	"_entity.dataComponent.data.id ?: 0")
		(var arenaId:number =	"_entity.dataComponent.data.arenaId ?: 0")
		(var title:str =		"_entity.battleResultsEntry.title ?: ''")

		(var priceInfo:dict =	"_entity.battleResultsEntry.values[0]")

		(var battleResultsDH:dhEntity =		"getSingleEntity(CC.battleResultsStructured)")
		(var shipId:number =				"battleResultsDH.battleResultsStructured.shipId")

		(var shipEntity:dhEntity =				"getPrimaryEntity(CC.ship, shipId)")
		(var shipComponent:dhComponent =		"shipEntity.ship")
		(var shipIDS:str = 						"shipComponent.nameIDS")

		(var ecoBoostEntity:dhEntity =			"getPrimaryEntity(CC.ecoBoost, boostId)")
		(var globalBoostModsEntity:dhEntity =	"getPrimaryEntity(CC.globalboostPersistent, arenaId)")
		(var attributesEntity:dhEntity =		"arenaId ? globalBoostModsEntity : ecoBoostEntity")
		(var ecoBoost:dhComponent =				"ecoBoostEntity.ecoBoost")
		(var attributes:dhComponent =			"attributesEntity.attributes")

		(var name:str =			"ecoBoost.name ?: ''")
		(var type:number =		"ecoBoost.type ?: 0"		(event "ecoBoost.evUpdated"))
		(var rarity:number =	"ecoBoost.rarity ?: 0")

		(var attributesNegative:array =	"attributes.negative ?: []"		(event "attributes.evChanged"))
		(var attributesNeutral:array =	"attributes.neutral ?: []"		(event "attributes.evChanged"))
		(var attributesPositive:array =	"attributes.positive ?: []"		(event "attributes.evChanged"))

		(var headerText:str =		"type == SC.Common.ECOBOOST_TYPES.COMMON	? 'IDS_' + toUpper(name) :
									 type == SC.Common.ECOBOOST_TYPES.LINKABLE	? 'IDS_MULTIBOOST_TITLE' :
									 type == SC.Common.ECOBOOST_TYPES.GLOBAL	? 'IDS_GLOBALBOOST_TITLE'
																				: 'IDS_CLANBOOST_TITLE'")
		(var subheaderText:str =	"type == SC.Common.ECOBOOST_TYPES.COMMON	? tr('IDS_ECONOMIC_BOOST_TYPE_EXPENDABLE_' + rarity)
																				: 'IDS_ECONOMIC_BOOST_TYPE_MULTIBOOST'")
	)

	(style (width = 334px))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderWithIconAndText
			_imageWidth =		80px
			_imageHeight =		80px
			_headerText =		"headerText"
			_subheaderText =	"subheaderText"
			_headerIconType =	"SC.Ui_styles.TOOLTIP_SYSTEM_HEADER_ICON_TYPE.ECO_BOOST"
			_iconAmount=		'0'
			_data =				"{ paramsId: name, type: type }"
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemParamsModifiersList
			_attributesPositive =	"attributesPositive"
			_attributesNeutral =	"attributesNeutral"
			_attributesNegative =	"attributesNegative"
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemPriceTagLine
			_title =		'IDS_RECEIVED_COLON'
			_priceInfo =	"{ finalPrice: priceInfo.value, currency: priceInfo.type }"
		)
	)
)

(def element PostBattleSSEQuestTooltip (_entity:dhEntity)
	(scope
		(var sseData:dict =						"_entity.dataComponent.data")
		(var ssePostBattleEntity:dhEntity =		"getPrimaryEntity(CC.sseCorePersistent, toString(sseData.arena_id) + '_' + toString(sseData.sse_id))")
	)

	(element PostBattleSseTaskTooltip
		_entityId = "ssePostBattleEntity.id"
	)
)

(def element PostBattleRecamoTooltip (_entity:dhEntity)
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)

		(var tempValueCredits:dict =	"_entity.battleResultsEntry.values[0].value")
		(var tempValueGold:dict =		"_entity.battleResultsEntry.values[1].value")
		(var title:str =				"_entity.battleResultsEntry.title")

		(var exteriorId:number =			"_entity.dataComponent.data.id ?: 0")
		(var exteriorEntity:dhEntity =		"getPrimaryEntity(CC.exteriorConfig, exteriorId)")
		(var exteriorConfig:dhComponent =	"exteriorEntity.exteriorConfig")
		(var ownCamouflage:dhComponent =	"exteriorEntity.ownCamouflage")

		(var camoColorSchemes:array =		"ownCamouflage.camoColorSchemes ?: []"		(event "ownCamouflage.evUpdated"))
		(var useRepaintedIcon:bool =		"camoColorSchemes.length > 0")

		(var headerText:str =			"tr('IDS_' + toUpper(exteriorConfig.name))")
		(var subheaderText:str =		"'IDS_EXTERIOR_TYPE_' + SC.Exteriors.EXTERIOR_TYPE.VALUE_TO_NAME[exteriorConfig.type]")
		(var headerIconType:number =	"useRepaintedIcon ? SC.Ui_styles.TOOLTIP_SYSTEM_HEADER_ICON_TYPE.CAMO_REPAINT : SC.Ui_styles.TOOLTIP_SYSTEM_HEADER_ICON_TYPE.SIMPLE")
		(var imageUrl:str =				"'url:../exteriors/camouflages/' + exteriorConfig.name + '.png'")

		(var isFailedToApply:bool =		"(tempValueCredits.value && !tempValueCredits.applied) || (tempValueGold.value && !tempValueGold.applied)")
	)

	(style (width = "DEFAULT_TOOLTIP_WIDTH"))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = "title"
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemHeaderWithIconAndText
			_headerText =		"headerText"
			_subheaderText =	"subheaderText"
			_headerIconType =	"headerIconType"
			_imageUrl =			"imageUrl"
			_imageWidth =		60px
			_imageHeight =		60px
			_data =				"{ camouflageId: exteriorId }"
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider' (bind enabled "isFailedToApply"))
		)

		(block
			(style (width = "100%"))
			(controller $Instance renderer='TooltipSystemStatusLine'
				(bind enabled "isFailedToApply")
				(args
					_text =				'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT'
					_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
				)
			)
		)

		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemPriceTagLine
			_title =			'IDS_COST_COLON'
			_priceInfo =		"tempValueCredits.value != 0	? { finalPrice: tempValueCredits.value,		currency: SC.Common.CURRENCIES.CREDITS }
																: { finalPrice: tempValueGold.value,		currency: SC.Common.CURRENCIES.GOLD }"
		)
	)
)

(def element WaffentragerBoosterTooltip (_entity:dhEntity)
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)

		(var titleText:str = "_entity.dataComponent.data.name ?: ''")
	)

	(style (width = "DEFAULT_TOOLTIP_WIDTH"))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemStatusLine
			_text = "titleText"
		)
	)
)

(def element PostBattleReboostTooltip (_entity:dhEntity)
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)

		(var tempValueGold:dict =		"_entity.battleResultsEntry.values[1].value")
		(var itemsList:array =			"_entity.battleResultsEntry.values[2].value")
		(var title:str =				"_entity.battleResultsEntry.title")
		(var isFailedToApply:bool =		"tempValueGold.value && !tempValueGold.applied")
	)

	(style (width = 384px))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = "title"
		)

		(element TooltipSystemHorizontalDivider)

		(hblock
			(style
				(align = "center")
				(width = 100%)
				(marginTop = "-XS")
				(marginBottom = "-XS")
			)

			(controller $Repeat renderer='PBSEcoboostIcon'
				(bind count "itemsList.length")
				(args
					_id = "itemsList[$index].id"
				)
			)
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider' (bind enabled "isFailedToApply"))
		)

		(block
			(style (width = "100%"))
			(controller $Instance renderer='TooltipSystemStatusLine'
				(bind enabled "isFailedToApply")
				(args
					_text =				'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT'
					_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
				)
			)
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider' (bind enabled "tempValueGold.value != 0"))
		)

		(block
			(style (width = 100%))

			(controller $Instance renderer='TooltipSystemPriceTagLine'
				(bind enabled "tempValueGold.value != 0")
				(args
					_title =		'IDS_COST_COLON'
					_priceInfo =	"{ finalPrice: tempValueGold.value, currency: SC.Common.CURRENCIES.GOLD }"
				)
			)
		)
	)
)

(def element PostBattleResignalTooltip (_entity:dhEntity)
	(scope
		(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_SCOPE)

		(var tempValueCredits:dict =	"_entity.battleResultsEntry.values[0].value")
		(var itemsList:array =			"_entity.battleResultsEntry.values[1].value")
		(var title:str =				"_entity.battleResultsEntry.title")
		(var isFailedToApply:bool =		"tempValueCredits.value && !tempValueCredits.applied")
	)

	(style (width = 400px))
	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND_MARKUP)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = "title"
		)

		(element TooltipSystemHorizontalDivider)

		(hblock
			(style
				(align = "center")
				(width = 100%)
				(marginTop = "-XS")
				(marginBottom = "-XS")
			)

			(controller $Repeat renderer='PBSSignalIcon'
				(bind count "itemsList.length")
				(args
					_id = "itemsList[$index]"
				)
			)
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider' (bind enabled "isFailedToApply"))
		)

		(block
			(style (width = "100%"))
			(controller $Instance renderer='TooltipSystemStatusLine'
				(bind enabled "isFailedToApply")
				(args
					_text =				'IDS_AUTOPURCHASE_NOT_APPLIED_DEFICIT'
					_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
				)
			)
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider' (bind enabled "tempValueCredits.value != 0"))
		)

		(block
			(style (width = 100%))

			(controller $Instance renderer='TooltipSystemPriceTagLine'
				(bind enabled "tempValueCredits.value != 0")
				(args
					_title =		'IDS_COST_COLON'
					_priceInfo =	"{ finalPrice: tempValueCredits.value, currency: SC.Common.CURRENCIES.CREDITS }"
				)
			)
		)
	)
)

(def element PBSEcoboostIcon (_id:number)
	(scope
		(var ecoBoostEntity:dhEntity =	"getPrimaryEntity(CC.ecoBoost, _id)")
		(var ecoBoost:dhComponent =		"ecoBoostEntity.ecoBoost")
	)

	(style (margin = "XS"))

	(element EconomicBoostItemView
		_ecoBoostName =	"ecoBoost.name"
		_ecoBoostType =	"ecoBoost.type"
	)
)

(def element PBSSignalIcon (_id:number)
	(scope
		(var signalEntity:dhEntity =	"getPrimaryEntity(CC.signal, _id)")
		(var signal:dhComponent =		"signalEntity.signal")
	)

	(style (margin = "XS"))

	(element SignalItemView
		_signalName = "signal.name"
	)
)