(def element WaffentragerBannerEventTooltip ()
	(style (width = "BANNER_TOOLTIP_WIDTH"))
	(name = 'WaffentragerBannerEventTooltip')

	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = 'IDS_WT_ABOUT_EVENT_TITLE'
		)
		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemDescriptionText
			_descriptionText = 'IDS_WT_ABOUT_EVENT_TOOLTIP_TEXT'
		)
		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemStatusLine
			_text = 'IDS_WT_ABOUT_EVENT_TOOLTIP_MOUSE_INSTRUCTION'
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT"
		)
	)
)

(def element WaffentragerBannerPortalTooltip ()
	(style (width = "BANNER_TOOLTIP_WIDTH"))
	(name = 'WaffentragerBannerEventTooltip')

	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = 'IDS_WT_PORTAL_TOOLTIP_TITLE'
		)
		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemDescriptionText
			_descriptionText = 'IDS_WT_PORTAL_TOOLTIP_TEXT'
		)
		(element TooltipSystemHorizontalDivider)

		(element TooltipSystemStatusLine
			_text = 'IDS_WT_PORTAL_TOOLTIP_MOUSE_INSTRUCTION'
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT"
		)
	)
)

(def element WaffentragerBannerProgressTooltip (_isWaffentragerSelected:bool = false)
	(scope
		(var waffentragerEvent:dhComponent = "getSingleComponent(CC.waffentragerEvent)")
		(var activationKeys:number = "waffentragerEvent.activationKeys" (event "waffentragerEvent.evChanged"))

		(struct waffentragerState = PULL_WAFFENTRAGER_EVENT_STATE(_component = "waffentragerEvent"))
		(struct waffentragerTimer = PULL_WAFFENTRAGER_EVENT_TIMER(_component = "waffentragerEvent"))
		(struct waffentragerProgression = PULL_WAFFENTRAGER_PROGRESSION(_component = "waffentragerEvent"))

		(struct serverTime = SERVER_TIME())
		(struct eventFinishTime = COUNTDOWN(_time = "waffentragerTimer.mainProgressionUntil" _serverTime = "serverTime.value" _format = "'HIGHEST,WITH_DAYS'"))
		(struct countdownRewardsClaimUntil = COUNTDOWN(_time = "waffentragerTimer.rewardsClaimUntil" _serverTime = "serverTime.value" _format = "'HIGHEST'"))
		(var eventFinishText:str = "(waffentragerTimer.rewardsClaimUntil - serverTime.value) < HOUR_IN_SEC	? 'IDS_WT_PROGRESS_EVENT_FINISH_TIME_LEFT_MINUTES'
																											: 'IDS_WT_PROGRESS_EVENT_FINISH_TIME_LEFT'")

		(var isDeficitLineVisible:bool = "activationKeys == 0 && waffentragerState.isActive && _isWaffentragerSelected")
		(var isPriceTagLineVisible:bool = "!waffentragerProgression.isCompleted && !waffentragerState.isFinalStatsTimeReached")
		(var isLastThresholdInProgress:bool = "waffentragerProgression.currentThreshold == waffentragerProgression.mainProgressionLen")
		(var progressText:str = "isLastThresholdInProgress ? 'IDS_WT_PROGRESS_TILL_FINISH' : 'IDS_WT_PROGRESS_TILL_NEXT_LEVEL'")

		(var timeLeft:number = "waffentragerTimer.mainProgressionUntil - serverTime.value")
		(var timerUnifiedStatus:str = "timeLeft < DAY_IN_SEC || waffentragerState.isFinalStatsTimeReached	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																											: SC.Ui_styles.UNIFIED_STATUS.DATE")
		(var timerText:str = "waffentragerState.isFinalStatsTimeReached	? subst(eventFinishText, [], { _timeLeft: countdownRewardsClaimUntil.value }, countdownRewardsClaimUntil.value)
																		: subst('IDS_WT_PROGRESS_TIME_LEFT', [], { _timeLeft: eventFinishTime.value })")
		(var isTimerStatusVisible:bool = "waffentragerState.isActive || waffentragerState.isFinalStatsTimeReached")

	)
	(style (width = "BANNER_TOOLTIP_WIDTH"))
	(name = 'WaffentragerBannerProgressTooltip')

	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = 'IDS_WT_PROGRESS_TITLE'
		)
		(element TooltipSystemHorizontalDivider)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemStatusLine'
				(bind enabled "waffentragerState.hasAvailableRewards")
				(args
					_text = 'IDS_AVAILABLE_REWARD'
					_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.REWARD_AVAILABLE"
				)
			)
		)
		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider'
				(bind enabled "waffentragerState.hasAvailableRewards")
			)
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemStatusLine'
				(bind enabled "isTimerStatusVisible")
				(args
					_unifiedStatus = "timerUnifiedStatus"
					_text = "timerText"
				)
			)
		)
		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider'
				(bind enabled "isTimerStatusVisible")
			)
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemPriceTagLine'
				(bind enabled "isPriceTagLineVisible")
				(args
					_isAutoWidth = true
					_title = "progressText"
					_priceInfo = "{	finalPrice: waffentragerProgression.pointsTillNext,
									currency: SC.Common.CURRENCIES.WAFFENTRAGER_RELAY}"
				)
			)
		)
		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider'
				(bind enabled "isPriceTagLineVisible")
			)
		)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemStatusLine'
				(bind enabled "isDeficitLineVisible")
				(args
					_text = 'IDS_WT_PROGRESS_TOOLTIP_STATUS_WARNING'
					_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
				)
			)
		)
		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider'
				(bind enabled "isDeficitLineVisible")
			)
		)

		(element TooltipSystemStatusLine
			_text = 'IDS_WT_PROGRESS_TOOLTIP_MOUSE_INSTRUCTION'
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT"
		)
	)
)

(def element WaffentragerBannerBureauTooltip (_isWaffentragerSelected:bool = false)
	(scope
		(struct waffentragerBoosterTotals = PULL_WAFFENTRAGER_TOTAL_ACTIVE_BOOSTERS())

		(var unifiedStatus:str = "!waffentragerBoosterTotals.attributes.hasActiveBoosters	? SC.Ui_styles.UNIFIED_STATUS.DEFAULT
																							: SC.Ui_styles.UNIFIED_STATUS.NEGATIVE")
		(var text:str = "!waffentragerBoosterTotals.attributes.hasActiveBoosters	? 'IDS_WT_BUREAU_TOOLTIP_TEXT_INACTIVE'
																					: 'IDS_WT_BUREAU_TOOLTIP_TEXT_WARNING'")
		(var isStatusLineVisible:bool = "!waffentragerBoosterTotals.attributes.hasActiveBoosters || _isWaffentragerSelected")
		(var isParamsModifierListVisible:bool = "waffentragerBoosterTotals.attributes.hasActiveBoosters || _isWaffentragerSelected")
	)
	(style (width = "BANNER_TOOLTIP_WIDTH"))
	(name = 'WaffentragerBannerBureauTooltip')

	(macro TOOLTIP_SYSTEM_DEFAULT_BACKGROUND)

	(element TOOLTIP_SYSTEM_DEFAULT_CONTAINER
		(element TooltipSystemHeaderSubheaderText
			_headerText = 'IDS_WT_BUREAU_TOOLTIP_TITLE'
		)
		(element TooltipSystemHorizontalDivider)

		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemStatusLine'
				(bind enabled "isStatusLineVisible")
				(args
					_unifiedStatus = "unifiedStatus"
					_text = "text"
				)
			)
		)
		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider'
				(bind enabled "isStatusLineVisible")
			)
		)

		(block
			(bind visible "waffentragerBoosterTotals.attributes.hasActiveBoosters")
			(style (width = 100%))
			(macro TOOLTIP_SYSTEM_INNER_PANEL_BACKGROUND)
			(controller $Instance renderer='TooltipSystemParamsModifiersList'
				(bind enabled "waffentragerBoosterTotals.attributes.hasActiveBoosters")
				(args
					_attributesNegative="waffentragerBoosterTotals.attributes.negative"
					_attributesPositive="waffentragerBoosterTotals.attributes.positive"
					_attributesNeutral="waffentragerBoosterTotals.attributes.neutral"
				)
			)
		)
		(block
			(style (width = 100%))
			(controller $Instance renderer='TooltipSystemHorizontalDivider'
				(bind enabled "waffentragerBoosterTotals.attributes.hasActiveBoosters")
			)
		)

		(element TooltipSystemStatusLine
			_text = 'IDS_WT_BUREAU_TOOLTIP_MOUSE_INSTRUCTION'
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.MOUSE_LEFT"
		)
	)
)