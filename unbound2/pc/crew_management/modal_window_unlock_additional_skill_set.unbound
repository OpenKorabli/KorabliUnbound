(def element ModalUnlockAdditionalSkillSet ()
	(macro MODAL_WINDOW_INIT)
	(macro MODAL_WINDOW_BG)

	(scope
		(var accountResourceComponent:dhComponent = "getSingleComponent(CC.accountResource)")
		(var accountGold:number = "accountResourceComponent.gold ?: 0"		(event "accountResourceComponent.evChangedGold"))

		(struct additionalSkillPrice = PULL_PRICE(_entityId = "'RARE_CREW_BOOK_ALT_SKILL_PACK'"	_actionId = "SC.Common.PRICE_ACTION.BUY"))
		(var priceInfo:dict =	"additionalSkillPrice.info")

		(var currenciesPanelPrices:array =	"[{ currency: SC.Common.CURRENCIES.GOLD, finalPrice: -priceInfo.finalPrice }]")

		(var deficit:number = "priceInfo.finalPrice - accountGold")
		(var isDeficit:bool = "deficit > 0")

		(var windowWidth:number = 480)
	)

	(style (align = "center|middle"))

	(block
		(style
			(align = "center")
			(width = "windowWidth")
		)

		(block
			(macro DEFAULT_MODAL_WINDOW_ANIMATION 1)

			(style
				(align = "center")
				(width = 100%)
				(marginBottom = "M")
			)

			(element ModalWindowShortHeader
				_header =		'IDS_WINDOW_HEADER_CONFIRMATION'
				_hasDivider =	false
			)

			(element CurrenciesPanel
				_priceInfo =	"currenciesPanelPrices"
				_width =		"windowWidth"
			)
		)

		(block
			(macro DEFAULT_MODAL_WINDOW_ANIMATION 2)

			(style
				(width = 100%)
				(marginBottom = "M")
			)

			(element ModalWindowSystemPurchaseItemPriceAndInfo
				_priceInfo =					"priceInfo"
				_questionString =				'IDS_QUESTION_UNLOCK_ADDITIONAL_SKILL_SET_FOR'
				_isWarningText = 				"isDeficit"
				_isDeficit =					"isDeficit"
				_deficit =						"deficit"
				_additionalInfoUnifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.ATTENTION"
				_additionalInfoStr =			'IDS_UNLOCK_ADDITIONAL_SKILL_SET_FOR_ADDITIONAL_INFO'
			)
		)

		(block
			(macro DEFAULT_MODAL_WINDOW_ANIMATION 3)

			(style
				(align = "center")
				(width = 100%)
				(marginTop = "M")
			)

			(element ModalWindowSystemPurchaseItemYesNoCloseButtons
				_isDeficit =	"isDeficit"
				_okMethods =	"[{ type: 'inputMapping.onAction',	name: SC.Ui_methods.CREW_METHODS.UNLOCK_RARE_CREW_BOOK_ADDITIONAL_SKILL_SET,	args: {} }]"
			)
		)
	)
)