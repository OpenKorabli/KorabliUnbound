(def element ModalWindowCollectionDescription (_collectionID:number, _isComplete:bool = false)
	(macro MODAL_WINDOW_INIT)
	(macro MODAL_WINDOW_BG)

	(scope
		(var isSmallResolution:bool = "stageWidth <= 1300 || stageHeight < 960")

		(var collectionEntity:dhEntity = "getPrimaryEntity(CC.collectionAlbum, _collectionID)")
		(var name:str = "collectionEntity.collectionAlbum.name")
		(var description:str = "collectionEntity.collectionAlbum.description")
		(var rewards:array = "collectionEntity.collectionAlbum.rewards")
		(var isFull:bool = "collectionEntity.collectionAlbum.isFull")

		(var windowHeader:str = "isFull	?	'IDS_COLLECTION_WINDOW_TITLE_COLLECTED_UPPER'	:	'IDS_COLLECTION_WINDOW_TITLE_UPPER'")
		(var descriptionStr:str = "'<body>' + tr(description) + '</body>'")
	)

	(bindcall externalCall "_isComplete ? 'sound.playSetSoundDirect' : ''" "['collection_window', 'collection_item_complete']" on='addedToStage')
	(bindcall externalCall "'windowShown'" "[_isComplete	?	'CollectionProxy.makeCollectionCongratulation'
															:	'', { albumId: _collectionID }]" (event "startShow"))

	(name = "'modal_full_collection'")
	(class $Fullsize)

	
	(block
		(macro DEFAULT_MODAL_WINDOW_ANIMATION 1)
		(style (width = 100%))

		(element ModalWindowHeaderFullSize
			_windowName = "windowHeader"
			_backButtonText = 'IDS_RETURN_FROM_MODAL_WINDOW_BUTTON'
			_paddingTop = "LS"
			_paddingRight = "MS"
			_paddingLeft = "MS"
			_methods = "[{type: 'inputMapping.onRequest', name: 'goToPort', args: {}}]"
		)
	)

	
	(block
		(class $EyeLevelAligned)
		(style (align = "center"))

		(hblock

			
			(block
				(macro DEFAULT_MODAL_WINDOW_ANIMATION 2)
				(style
					(height = 370px)
					(width = 370px)
					(marginRight = "XLM")
					(bind backgroundImage "'url:../collections/collection_icons/big/' + name + '.png'")
				)
			)

			
			(block
				(style (width = 450px))

				
				(block
					(macro DEFAULT_MODAL_WINDOW_ANIMATION 2)
					(style
						(width = 100%)
						(marginBottom = "L")
					)

					(tf
						(class $TextDefaultBold30NM)
						(style (alpha = "TA"))
						(bind text "toUpper(tr(toUpper('IDS_' + name)))")
					)
				)

				
				(scrollArea
					(macro DEFAULT_MODAL_WINDOW_ANIMATION 2)
					(style
						(width = 100%)
						(bind maxHeight "isSmallResolution ? 270px : 450px")
						(marginBottom = "XL")
					)

					(style (backgroundColor = "NO_COLOR"))

					(macro DEFAULT_VERTICAL_SCROLL_PARAMS)

					(content
						(style (width = 100%))

						(tf
							(class $TextDefault18NM)
							(style
								(width = 100%)
								(alpha = "TC")
								(multiline = true)
								(leading = -1)
								(marginBottom = "S")
								(styleSheet = '.p_spacing { font-size: 18px; }')
							)

							(bind htmlText "descriptionStr")
						)
					)
				)

				
				(tf
					(macro DEFAULT_MODAL_WINDOW_ANIMATION 2.5)
					(class $TextDefaultBold22NM)
					(style (marginBottom = "XS"))

					(bind text "isFull	?	'IDS_COLLECTION_MODAL_DESCRIPTION_REWARD_RECEIVED'
										:	'IDS_COLLECTION_MODAL_DESCRIPTION_REWARD'")
				)

				
				(hblock
					(macro DEFAULT_MODAL_WINDOW_ANIMATION 2.5)
					(style (width = 100%))

					(controller $Repeat renderer='RewardItemAdapter'
						(bind count "rewards.length")
						(args
							_entityId = "rewards[$index]"
						)
					)
				)
			)
		)
	)

	(block
		(macro DEFAULT_MODAL_WINDOW_ANIMATION 2.5)
		(style
			(width = 100%)
			(align = "center")
			(position = "absolute")
			(bottom = "isSmallResolution ? MS : L")
		)

		(element DefaultButton
			_width = 140px
			_label = 'IDS_CLOSE_UPPER_CASE'
			_focusIndex = 0
			_defaultFocused = true
			_name = 'btn_cancel'
		)
	)
)