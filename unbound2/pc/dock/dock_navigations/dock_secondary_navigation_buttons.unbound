(def constant SECONDARY_DOCK_TAB_HEIGHT 34px)
(def constant SECONDARY_DOCK_TAB_RESEARCH_HEIGHT 34px)

(def constant DOCK_SECONDARY_TAB_BUTTON_ICON_ALPHA "{
	SC.Ui_styles.BUTTON_STATE.DISABLED:	0.45,
	SC.Ui_styles.BUTTON_STATE.SELECTED:	1,
	SC.Ui_styles.BUTTON_STATE.DOWN:		0.8,
	SC.Ui_styles.BUTTON_STATE.OVER:		1,
	SC.Ui_styles.BUTTON_STATE.UP:		1
}")

(def element DockSecondaryTabButtonWrapper (_route:str, _routeLen:number)
	(scope
		(var isResearchTreeTab:bool = "_route in SC.Common.NATION.RESEARCH_TREE_ORDER")
		(var renderSecondaryTabItem:str = "isResearchTreeTab	? 'NationTabButton'
																: ROUTE_SECONDARY_TAB_ELEMENTS[_route]")
	)
	(bind name "isResearchTreeTab ? 'NationTabButton_' + _route : ROUTE_SECONDARY_TAB_ELEMENTS[_route]")

	(controller $Instance
		(bind renderer "renderSecondaryTabItem")
		(args
			_nationRoute =		"_route"
			_sidePaddings =		"$index == _routeLen - 1	? { left: DOCK_TAB_PADDINGS.SIDE_LEFT, right: DOCK_TAB_PADDINGS.DEFAULT } :
								 $index == 0				? { left: DOCK_TAB_PADDINGS.DEFAULT, right: DOCK_TAB_PADDINGS.SIDE_RIGHT }
															: { left: DOCK_TAB_PADDINGS.DEFAULT, right: DOCK_TAB_PADDINGS.DEFAULT }"
		)
	)
)

(def element SecondaryTabButtonWaffentrager (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct waffentragerRoute = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.WAFFENTRAGER"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.WAFFENTRAGER"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_WAFFENTRAGER'
		_isSelected = "waffentragerRoute.isActive"
		_isEnabled = "waffentragerRoute.isEnabled"
		_markerType = "markerData.markerType"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.WAFFENTRAGER } }]"
		_sidePaddings = "_sidePaddings"
	)
)

(def element SecondaryTabButtonEvents (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct stageSize = STAGE_SIZE())

		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.EVENTS_PORT"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.EVENTS"))

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[ SC.Context_guiding_tip.TIP_TYPE.NEW_EVENT_AVAILABLE ]"))

		(struct pinOffset = ADAPTIVE_HORIZONTAL_SIZE (	_minStageWidth =	1280px
														_minValue =			-139px
														_maxStageWidth =	1920px
														_maxValue =			-119px
														_stageWidth =		"stageSize.width"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_EVENTS'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.EVENTS_PORT } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =				"checkedTipId.value"
			_tipPositioning =		"TIP_POSITION_BOTTOM"
			_pointerOffset =		-18
			_alongPointerOffset =	"pinOffset.value"
			_screenOffsetLeft =		10
			_modalWindowName =		"SC.Ui_windows.WINDOWS.DOCK"
		)
	)
)

(def element SecondaryTabButtonSse (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.SSE"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.SSE"))

		(struct featureSse = FEATURES(_state = "SC.Common.ACCOUNT_FEATURE.ACTIONS_USE"))
		(var isFeatureSseLocked:bool = "featureSse.state == 'locked'")
		(var title:str = "isFeatureSseLocked	? 'IDS_DOCK_BANNER_SSE_NEWBIE_QUESTS'
												: 'IDS_DOCK_BANNER_SSE_BATTLE_TASKS'")

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[	SC.Context_guiding_tip.TIP_TYPE.NEWBIE_QUESTS_INTRO,
																												SC.Context_guiding_tip.TIP_TYPE.SSE_INTRO,
																												SC.Context_guiding_tip.TIP_TYPE.CAMPAIGN_SECONDARY_TAB,
																												SC.Context_guiding_tip.TIP_TYPE.SHIP_ACES,
																												SC.Context_guiding_tip.TIP_TYPE.SHIP_ACES_NATION,
																												SC.Context_guiding_tip.TIP_TYPE.SHIP_ACES_SHIP_TYPE ]"))
	)

	(element DockSecondaryTabButton
		_label =				"title"
		_isEnabled =			"routeMenuData.isEnabled"
		_isSelected =			"routeMenuData.isActive"
		_markerType =			"markerData.markerType"
		_markerNewCounter =		"markerData.markerCounter"
		_methods =				"[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.SSE } }]"
		_sidePaddings =			"_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =				"checkedTipId.value"
			_tipPositioning =		"TIP_POSITION_BOTTOM"
			_pointerOffset =		-18
			_alongPointerOffset =	-10
			_screenOffsetLeft =		10
			_modalWindowName =		"SC.Ui_windows.WINDOWS.DOCK"
		)
	)
)

(def element SecondaryTabButtonLootboxes (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.LOOTBOXES"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.LOOTBOXES"))

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[	SC.Context_guiding_tip.TIP_TYPE.LOOTBOXES_SELF_TAB,
																												SC.Context_guiding_tip.TIP_TYPE.LOOTBOXES_SELF_TAB_REPEAT ]"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_LOOTBOXES'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.LOOTBOXES } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =			"checkedTipId.value"
			_tipPositioning =	"TIP_POSITION_BOTTOM"
			_pointerOffset =	-18
			_modalWindowName =	"SC.Ui_windows.WINDOWS.DOCK"
		)
	)
)

(def element SecondaryTabButtonShipMastery (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.SHIP_MASTERY"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.SHIP_MASTERY"))

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[ SC.Context_guiding_tip.TIP_TYPE.SHIP_MASTERY_INTRO ]"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_SHIP_MASTERY'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.SHIP_MASTERY } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =			"checkedTipId.value"
			_tipPositioning =	"TIP_POSITION_BOTTOM"
			_pointerOffset =	-18
			_modalWindowName =	"SC.Ui_windows.WINDOWS.DOCK"
		)
	)
)

(def element SecondaryTabButtonOverview (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.OVERVIEW"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.OVERVIEW"))

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[ SC.Context_guiding_tip.TIP_TYPE.PORT_BUFF_FOR_EVENT_GO_TO_OVERVIEW_TAB ]"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_OVERVIEW'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.OVERVIEW } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =				"checkedTipId.value"
			_tipPositioning =		"TIP_POSITION_BOTTOM"
			_pointerOffset =		-18
			_alongPointerOffset =	-96
			_modalWindowName =		"SC.Ui_windows.WINDOWS.DOCK"
		)
	)
)

(def element SecondaryTabButtonUpgrades (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.UPGRADES"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.UPGRADES"))

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[	SC.Context_guiding_tip.TIP_TYPE.BATTLE_BONUS_UPGRADES_TAB,
																												SC.Context_guiding_tip.TIP_TYPE.BATTLE_BONUS_UPGRADES_TAB_REPEAT,
																												SC.Context_guiding_tip.TIP_TYPE.FREE_XP_MODULE_UPGRADES_TAB,
																												SC.Context_guiding_tip.TIP_TYPE.FREE_XP_MODULE_UPGRADES_TAB_REPEAT,
																												SC.Context_guiding_tip.TIP_TYPE.MODERNIZATIONS_SECONDARY_TAB ]"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_UPGRADES'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.UPGRADES } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =			"checkedTipId.value"
			_tipPositioning =	"TIP_POSITION_BOTTOM"
			_pointerOffset =	-18
			_modalWindowName =	"SC.Ui_windows.WINDOWS.DOCK"
		)
	)
)

(def element SecondaryTabButtonArmor (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.ARMOR"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_ARMOR'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.ARMOR } }]"
		_sidePaddings = "_sidePaddings"
	)
)

(def element SecondaryTabButtonCrewManagement (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.CREW_MANAGEMENT"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.CREW_MANAGEMENT"))

		
		(macro PULL_SHIP_ID)
		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[ SC.Context_guiding_tip.TIP_TYPE.CREW_SECONDARY_TAB ]"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_CREW_MANAGEMENT'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.CREW_MANAGEMENT } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =			"checkedTipId.value"
			_tipPositioning =	"TIP_POSITION_BOTTOM"
			_pointerOffset =	-18
			_modalWindowName =	"SC.Ui_windows.WINDOWS.DOCK"
		)
	)

	(controller $Tooltip
		(renderer ='SimpleStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length == 1")
		(args
			_text = "routeMenuData.activeBlockingReasons[0]"
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)

	(controller $Tooltip
		(renderer ='MultiparagraphStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length > 1")
		(args
			_items =			"routeMenuData.activeBlockingReasons"
			_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)
)

(def element SecondaryTabButtonEcoboost (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.ECOBOOSTS"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.ECOBOOSTS"))

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[	SC.Context_guiding_tip.TIP_TYPE.ECO_BONUS_ECOBOOSTS_TAB,
																												SC.Context_guiding_tip.TIP_TYPE.ECO_BONUS_ECOBOOSTS_TAB_REPEAT ]"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_ECOBOOST'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.ECOBOOSTS } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =			"checkedTipId.value"
			_tipPositioning =	"TIP_POSITION_BOTTOM"
			_pointerOffset =	-18
			_modalWindowName =	"SC.Ui_windows.WINDOWS.DOCK"
		)
	)

	(controller $Tooltip
		(renderer ='SimpleStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length == 1")
		(args
			_text = "routeMenuData.activeBlockingReasons[0]"
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)

	(controller $Tooltip
		(renderer ='MultiparagraphStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length > 1")
		(args
			_items =			"routeMenuData.activeBlockingReasons"
			_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)
)

(def element SecondaryTabButtonCamouflage (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.CAMOUFLAGE"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.CAMOUFLAGE"))


		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[	SC.Context_guiding_tip.TIP_TYPE.EXTERIOR_DESC_1,
																												SC.Context_guiding_tip.TIP_TYPE.EXTERIOR_DESC_1_REPEAT,
																												SC.Context_guiding_tip.TIP_TYPE.EXTERIOR_TAB_LOCKED ]"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_CAMOUFLAGE'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.CAMOUFLAGE } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "checkedTipId.value")
		(args
			_tipId =			"checkedTipId.value"
			_tipPositioning =	"TIP_POSITION_BOTTOM"
			_pointerOffset =	-18
			_noPointer =		"checkedTipId.value == SC.Context_guiding_tip.TIP_TYPE.EXTERIOR_TAB_LOCKED"
			_modalWindowName =	"SC.Ui_windows.WINDOWS.DOCK"
		)
	)

	(controller $Tooltip
		(renderer ='SimpleStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length == 1")
		(args
			_text = "routeMenuData.activeBlockingReasons[0]"
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)

	(controller $Tooltip
		(renderer ='MultiparagraphStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length > 1")
		(args
			_items =			"routeMenuData.activeBlockingReasons"
			_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)
)

(def element SecondaryTabButtonEnsign (_sidePaddings:dict = "DOCK_TAB_PADDINGS.DEFAULT")
	(scope
		(struct routeMenuData = ROUTE_MENU_DATA(_route = "SC.Ui_windows.ROUTE.ENSIGN"))
		(struct markerData = PULL_MARKER_NEW(_groupName = "SC.Ui_common.CONTENT_MARKER_GROUPS.ENSIGN"))
	)

	(element DockSecondaryTabButton
		_label = 'IDS_SECONDARY_TAB_BUTTON_ENSIGN'
		_isEnabled = "routeMenuData.isEnabled"
		_isSelected = "routeMenuData.isActive"
		_markerType = "markerData.markerType"
		_markerNewCounter = "markerData.markerCounter"
		_methods = "[{ type: 'inputMapping.onAction',	name: 'navigateTo',		args: { route: SC.Ui_windows.ROUTE.ENSIGN } }]"
		_sidePaddings = "_sidePaddings"
	)

	(controller $Tooltip
		(renderer ='SimpleStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length == 1")
		(args
			_text = "routeMenuData.activeBlockingReasons[0]"
			_unifiedStatus = "SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)

	(controller $Tooltip
		(renderer ='MultiparagraphStatusTooltip')
		(bind enabled "routeMenuData.activeBlockingReasons.length > 1")
		(args
			_items =			"routeMenuData.activeBlockingReasons"
			_unifiedStatus =	"SC.Ui_styles.UNIFIED_STATUS.NEGATIVE"
		)
		(macro DEFAULT_TOOLTIP_BEHAVIOUR)
	)
)

(def element DockSecondaryTabButton (	_label:str = '',
										_isSelected:bool = false,
										_isEnabled:bool = true,
										_markerType:number = "SC.Ui_common.CONTENT_MARKER_TYPE.NONE",
										_markerNewCounter:number = 0,
										_sidePaddings:dict = "{ left: SXS, right: SXS }",
										_dispatchedEv:str = '',
										_dispatchParams:dict = {},
										_methods:array = [])
	(scope
		(macro MOUSE_HANDLER_SCOPE)

		(var state:number = "	!_isEnabled	? SC.Ui_styles.BUTTON_STATE.DISABLED :
								_isSelected	? SC.Ui_styles.BUTTON_STATE.SELECTED :
								mouseDown	? SC.Ui_styles.BUTTON_STATE.DOWN :
								rollOver	? SC.Ui_styles.BUTTON_STATE.OVER
											: SC.Ui_styles.BUTTON_STATE.UP")
	
		(var selectionState:number = "_isEnabled		?	_isSelected				? SC.Ui_styles.BUTTON_STATE.SELECTED :
															mouseDown				? SC.Ui_styles.BUTTON_STATE.DOWN :
															rollOver				? SC.Ui_styles.BUTTON_STATE.OVER
																					: SC.Ui_styles.BUTTON_STATE.UP
														:	SC.Ui_styles.BUTTON_STATE.DISABLED")

		(var textAlpha:number = "DOCK_SECONDARY_TAB_BUTTON_LABEL_ALPHA[state]")

		(var newMarkerElement:str = "MARKER_ELEMENT[_markerType] ?: ''")
		(var isNew:bool = "_isEnabled && newMarkerElement && !_isSelected")
	)

	(style
		(height = "SECONDARY_DOCK_TAB_HEIGHT")
		(backgroundColor = "NO_COLOR")
	)

	
	(block
		(style
			(bind paddingLeft "_sidePaddings.left")
			(bind paddingRight "_sidePaddings.right")
			(height = 100%)
			(align = "middle")
		)

		(block
			(tf
				(bind name "'secondary_tab_button_label_' +_label")
				(class $TextDefaultBoldNM)
				(style
					(hitTest = false)
					(alpha = "textAlpha")
				)

				(macro DEFAULT_CONTROL_STATE_ANIMATION_ALPHA
					_trigger = "state"
					_alpha = "textAlpha"
					_duration = "0.12"
				)

				(bind text "toUpper(tr(_label))")
			)

			(block
				(macro DEFAULT_CONTROL_MARKER_ANIMATION "isNew")
				(style
					(position = "absolute")
					(top = "-SXS")
					(bind right "	_markerType == SC.Ui_common.CONTENT_MARKER_TYPE.NEW			? 20px :
									_markerType == SC.Ui_common.CONTENT_MARKER_TYPE.NEW_COUNT	? { 1280: SXS , 1920: S }
																								: { 1280: S , 1920: XXS }")
				)

				(controller $Instance
					(bind enabled "newMarkerElement")
					(bind renderer "newMarkerElement")
					(args
						_newContentCounter = "_markerNewCounter"
					)
				)
			)
		)

		(block
			(style
				(position = "absolute")
				(bottom = 0)
				(width = 100%)
			)

			(element TabSelectionStatePanel
				_state = "selectionState"
				_sideOffset = 6px
			)
		)
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "NO_COLOR")
			(bind hitTest "_isEnabled && !_isSelected")
		)

		(macro MOUSE_EVENTS_DISPATCHER)
		(macro SOUND_HANDLER "'button_tab'")
		(macro MOUSE_LMB_EXTERNAL_CALL_REPEAT "_methods")
		(macro DISPATCH_HANDLER _dispatchedEv = "_dispatchedEv" _dispatchParams = "_dispatchParams")
	)
)

(def constant PIN_OFFSET_BY_NATION "{
	SC.Common.NATION.RUSSIA:		{ min: 152, max: 132 },
	SC.Common.NATION.JAPAN:			{ min: 106, max: 70 },
	SC.Common.NATION.USA:			{ min: 60, max: 8 },
	SC.Common.NATION.GERMANY:		{ min: 14, max: 0 },
	SC.Common.NATION.UK:			{ min: 0, max: 0 },
	SC.Common.NATION.FRANCE:		{ min: 0, max: 0 },
	SC.Common.NATION.ITALY:			{ min: 0, max: 0 },
	SC.Common.NATION.PANASIA:		{ min: 0, max: 0 },
	SC.Common.NATION.EUROPE:		{ min: 0, max: 0 },
	SC.Common.NATION.NETHERLANDS:	{ min: 0, max: 0 },
	SC.Common.NATION.PANAMERICA:	{ min: 0, max: 0 },
	SC.Common.NATION.SPAIN:			{ min: 0, max: 0 }
}")

(def element DockSecondaryImageTabButton	(	_imageUrl:str,
												_imageWidth:number = 30px,
												_imageHeight:number = 30px,
												_isSelected:bool = false,
												_isEnabled:bool = true,
												_sidePaddings:dict = "{ left: SXS, right: SXS }",
												_methods:array = [],
												_dispatchedEv:str = '',
												_dispatchParams:dict = {},
												_data:dict = {})
	(scope
		(macro MOUSE_HANDLER_SCOPE)

		(var state:number = "	!_isEnabled	? SC.Ui_styles.BUTTON_STATE.DISABLED :
								_isSelected	? SC.Ui_styles.BUTTON_STATE.SELECTED :
								mouseDown	? SC.Ui_styles.BUTTON_STATE.DOWN :
								rollOver	? SC.Ui_styles.BUTTON_STATE.OVER
											: SC.Ui_styles.BUTTON_STATE.UP")

		(var iconAlpha:number = "DOCK_SECONDARY_TAB_BUTTON_ICON_ALPHA[state]")
	
		(var selectionState:number = "_isEnabled		?	_isSelected				? SC.Ui_styles.BUTTON_STATE.SELECTED :
															mouseDown				? SC.Ui_styles.BUTTON_STATE.DOWN :
															rollOver				? SC.Ui_styles.BUTTON_STATE.OVER
																					: SC.Ui_styles.BUTTON_STATE.UP
														:	SC.Ui_styles.BUTTON_STATE.DISABLED")

		(var nationName:str = "_data && 'nation' in _data ? _data.nation : ''")

		(struct activeTip =			PULL_ACTIVE_GUIDING_TIP())
		(struct checkedTipId =		SAFE_CHECK_ACTIVE_TIP_ID(_tipId = "activeTip.tipId"		_validValues = "[ SC.Context_guiding_tip.TIP_TYPE.PARAGONS_DROP_NATION ]"))

		(var isGuidingTipVisible:bool = "!_isSelected && checkedTipId.value && activeTip.targetId == nationName")

		(struct stageSize = STAGE_SIZE())
		(struct alongsidePinOffset = ADAPTIVE_HORIZONTAL_SIZE (	_minStageWidth =	1280px
																_minValue =			"nationName ? PIN_OFFSET_BY_NATION[nationName].min : 0"
																_maxStageWidth =	"nationName == SC.Common.NATION.GERMANY ? 1420px : 1920px"
																_maxValue =			"nationName ? PIN_OFFSET_BY_NATION[nationName].max : 0"
																_stageWidth =		"stageSize.width"))
	)

	(style
		(height = "SECONDARY_DOCK_TAB_RESEARCH_HEIGHT")
		(backgroundColor = "NO_COLOR")
	)

	
	(block
		(style
			(bind paddingLeft "_sidePaddings.left")
			(bind paddingRight "_sidePaddings.right")
			(height = 100%)
			(align = "middle")
		)

		(block
			(block
				(style
					(bind backgroundImage "_imageUrl")
					(backgroundSize = "cover")
					(bind width "_imageWidth")
					(bind height "_imageHeight")
					(alpha = "iconAlpha")
				)

				(macro DEFAULT_CONTROL_STATE_ANIMATION_ALPHA
					_trigger = "state"
					_alpha = "iconAlpha"
					_duration = "0.12"
				)
			)
		)

		(block
			(style
				(position = "absolute")
				(bottom = 0)
				(width = 100%)
			)

			(element TabSelectionStatePanel
				_state = "selectionState"
				_sideOffset = 6px
			)
		)
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "NO_COLOR")
			(bind hitTest "_isEnabled && !_isSelected")
		)

		(macro MOUSE_EVENTS_DISPATCHER)
		(macro SOUND_HANDLER "'button_tab'")
		(macro MOUSE_LMB_EXTERNAL_CALL_REPEAT "_methods")
		(macro DISPATCH_HANDLER _dispatchedEv = "_dispatchedEv" _dispatchParams = "_dispatchParams")
	)

	(controller $Instance renderer='GuidingTipHub'
		(bind enabled "isGuidingTipVisible")
		(args
			_tipId =				"checkedTipId.value"
			_tipPositioning =		"TIP_POSITION_BOTTOM"
			_alongPointerOffset =	"-alongsidePinOffset.value"
			_screenOffsetLeft =		"S"
			_offsetY =				"XS"
			_pointerOffset =		"-MS"
			_modalWindowName =		"SC.Ui_windows.WINDOWS.DOCK"
		)
	)
)

(def constant DOCK_SECONDARY_TAB_SELECTION_PANEL_STATE "{
	SC.Ui_styles.BUTTON_STATE.SELECTED:				{	visualScaleY: 1,
														colorTransform:	{	redMultiplier:0, greenMultiplier:0, blueMultiplier:0, alphaMultiplier: 1,
																			redOffset: 76,	greenOffset: 214,	blueOffset: 232 }},
	SC.Ui_styles.BUTTON_STATE.DOWN:					{	visualScaleY: 1,
														colorTransform:	{	redMultiplier:0, greenMultiplier:0, blueMultiplier:0, alphaMultiplier: 1,
																			redOffset: 180,	greenOffset: 180,	blueOffset: 180 }},
	SC.Ui_styles.BUTTON_STATE.OVER:					{	visualScaleY: 1,
														colorTransform:	{	redMultiplier:0, greenMultiplier:0, blueMultiplier:0, alphaMultiplier: 1, 
																			redOffset: 230,	greenOffset: 230,	blueOffset: 230 }},
	SC.Ui_styles.BUTTON_STATE.UP:					{	visualScaleY: 0,
														colorTransform:	{	redMultiplier:0, greenMultiplier:0, blueMultiplier:0, alphaMultiplier: 0, 
																			redOffset: 230,	greenOffset: 230,	blueOffset: 230 }},
	SC.Ui_styles.BUTTON_STATE.DISABLED:				{	visualScaleY: 0,
														colorTransform:	{	redMultiplier:0, greenMultiplier:0, blueMultiplier:0, alphaMultiplier: 1,
																			redOffset: 140,	greenOffset: 140,	blueOffset: 140 }}
}")

(def element TabSelectionStatePanel (_state:number = "SC.Ui_styles.BUTTON_STATE.UP", _sideOffset:number = 0)
	(style
		(width = 100%)
		(height = 4px)
		(backgroundColor = "NO_COLOR")
		(align = "center|bottom")
		(bind paddingLeft "-(_sideOffset)")
		(bind paddingRight "-(_sideOffset)")
	)

	(block
		(style
			(width = 100%)
			(height = 2px)
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")

			(visualScaleY = "DOCK_SECONDARY_TAB_SELECTION_PANEL_STATE[_state].visualScaleY")
			(pivotY = 100%)
		)
		(colorTransform = "DOCK_SECONDARY_TAB_SELECTION_PANEL_STATE[_state].colorTransform")

		(controller $Animation
			(bindcall play
				duration = 0.12
				to = "DOCK_SECONDARY_TAB_SELECTION_PANEL_STATE[_state]"
				easing = "Easing.line"
				action = "kill"
				watch = false
				(bind trigger "_state")
			)
		)
	)
)
