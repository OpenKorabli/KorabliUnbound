(def element DefaultProgressBar (_progress:number, _width:number=100%, _height:number=4px, _color:number=null, _isBorderless:bool=false)
	(scope
		(var progressValue:number = "_progress	?	_progress > 1	? 1
																	: _progress
												:	0")
		(var progressWidth:str = "toString(progressValue * 100)  + '%'")
	)

	(style
		(bind width "_width")
		(bind height "_height")
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.DARK_BLUE")
			(alpha = 0.2)
		)
	)

	(block
		(bind visible "!_isBorderless")
		(class $FullsizeAbsolute)
		(style
			(alpha = 0.15)
			(backgroundImage = 'url:../service_kit/frames/one_pixel_frame.png')
			(scale9grid = 2)
		)
	)

	(block
		(style
			(height = 100%)
			(width = 100%)
			(bind padding "!_isBorderless ? 1px : 0px")
		)

		(block
			(style
				(height = 100%)
				(bind width "progressWidth")
				(bind backgroundColor "_color ? _color : SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
			)
		)
	)
)


(def element RoundedProgressBar (_progress:number, _width:number=100%, _height:number=4px, _color:number=null, _borderRadius:dict = {})
	(scope
		(var progressValue:number = "_progress	?	_progress > 1	? 1
																	: _progress
												:	0")
		(var progressWidth:str = "toString(progressValue * 100)  + '%'")
	)

	(style
		(bind width "_width")
		(bind height "_height")
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.DARK_BLUE")
			(alpha = 0.2)
			(bind borderRadiusBottomLeft "_borderRadius.bottomLeft ?: 0")
			(bind borderRadiusTopLeft "_borderRadius.topLeft ?: 0")
			(bind borderRadiusBottomRight "_borderRadius.bottomRight ?: 0")
			(bind borderRadiusTopRight "_borderRadius.topRight ?: 0")
		)
	)

	(block
		(style
			(height = 100%)
			(width = 100%)
			(paddingRight = -1px)
			(paddingLeft = -1px)
		)

		(block
			(style
				(height = 100%)
				(bind width "progressWidth")
				(bind backgroundColor "_color ? _color : SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
				(bind borderRadiusBottomLeft "_borderRadius.bottomLeft ?: 0")
				(bind borderRadiusTopLeft "_borderRadius.topLeft ?: 0")
				(bind borderRadiusBottomRight "_borderRadius.bottomRight ?: 0")
				(bind borderRadiusTopRight "_borderRadius.topRight ?: 0")
			)
		)
	)
)

(def element ProfileRatingProgressBar ( _progress:number, _width:number=100%, _height:number=4px, _color:number=null)
	(scope
		(var progressValue:number = "_progress	?	_progress > 1	? 1
																	: _progress
												:	0")
		(var progressWidth:str = "toString(progressValue * 100)  + '%'")
	)

	(style
		(bind width "_width")
		(bind height "_height ")
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.DARK_BLUE")
			(alpha = 0.2)
		)
	)

	(block
		(style
			(height = 100%)
			(bind width "progressWidth")
			(bind backgroundColor "_color ? _color : SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
		)
	)
)


(def element DoubleProgressBar ( _progress1:number, _progress2:number, _color1:number=null, _color2:number=null, _width:number=0, _height:number=0)
	(scope
		(var progressLeftWidth:str = "toString(round(_progress1 * 100)) + '%'")
		(var progressRightWidth:str = "toString(round(_progress2 * 100)) + '%'")
	)

	(style
		(flow = "tile_horizontal")
		(bind width "_width ? _width : 100%")
		(bind height "_height ? _height : 4px")
		(backgroundImage = "'url:../service_kit/progress_bars/bar_default_bg.png'")
		(scale9grid = 2)
		(padding = "1px")
	)

	(block
		(style
			(height = "100%")
			(position = "absolute")
			(bind width "progressLeftWidth")
			(bind backgroundColor "_color1 ? _color1 : SC.Ui_styles.SERVICE_COLORS.WHITE")
		)
	)

	(block
		(style
			
			
			(height = "100%")
			(position = "absolute")
			(bind width "progressRightWidth")
			(bind left "progressLeftWidth")
			(bind backgroundColor "_color2 ? _color2 : SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
		)
	)
)

(def element AnimatedProgressBar (	_startProgress:number=0, _progress:number=0, _progressbarMotionDuration:number=0,
									_width:number=0, _height:number=0, _color:str='') layout=true
	(scope
		(event evAddedToStage)
		(var paramScaleX:number = "_startProgress / 100" watch=false)

		(controller $Animation
			(bindcall play	to = "{paramScaleX: _progress / 100}"
							duration = "_progressbarMotionDuration"
							delay=0.1
							(bind trigger "_progress") (event "evAddedToStage")
			)
		)
	)

	(style
		(bind width "_width ? _width : 100%")
		(bind height "_height ? _height : 4px")

		(backgroundImage = "'url:../service_kit/progress_bars/bar_default_bg.png'")
		(scale9grid = 2)
		(padding = 1px)
	)

	(dispatch evAddedToStage on='addedToStage')

	(block
		(style
			(height = 100%)
			(width = 100%)
			(position = "absolute")
			(bind backgroundColor "_color ? _color : SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
			(bind ubScaleX "paramScaleX")
		)
	)
)