(def struct PULL_PROGRESS_BAR_HEIGHT (_size:number = "SIZE.SMALL")
	(var value:number = "_size == SIZE.EXTRA_LARGE	? 25px :
						_size == SIZE.LARGE			? 14px :
						_size == SIZE.MEDIUM		? 8px
													: 3px")
)

(def element DefaultProgressBar (_progress:number = 0,
								_width:number = 100%,
								_size:number = "SIZE.SMALL",
								_color:number = "SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
	(scope
		(struct progressBarHeight = PULL_PROGRESS_BAR_HEIGHT(_size = "_size"))
		(var progressValue:number = "_progress	?	_progress > 1	? 1
																	: _progress
												:	0")
	)

	(style
		(bind width "_width")
		(bind height "progressBarHeight.value")
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
			(borderRadius = "XXS")
			(alpha = 0.3)
		)
	)

	(block
		(class $Fullsize)

		(block
			(class $FullsizeAbsolute)
			(style
				(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
				(borderRadiusTopRight = "XXS")
				(borderRadiusBottomRight = "XXS")
			)
			(isMask = true)
		)

		(block
			(style
				(height = 100%)
				(bind width "toPercent(round(progressValue * 100))")
				(borderRadiusTopLeft = "XXS")
				(borderRadiusBottomLeft = "XXS")
				(bind backgroundColor "_color")
			)
		)
	)
)


(def element DoubleProgressBar (	_progress1:number = 0,
									_progress2:number = 0,
									_color1:number = 0xFFEEEEEE,
									_color2:number = "SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE",
									_width:number = 100%,
									_size:number = "SIZE.SMALL")
	(scope
		(struct progressBarHeight = PULL_PROGRESS_BAR_HEIGHT(_size = "_size"))
	)

	(style
		(flow = "horizontal")
		(bind width "_width")
		(bind height "progressBarHeight.value")
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
			(borderRadius = "XXS")
			(alpha = 0.3)
		)
	)

	(hblock
		(class $Fullsize)
		(style (hgap = 1px))

		(block
			(class $FullsizeAbsolute)
			(style
				(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
				(borderRadius = "XXS")
			)
			(isMask = true)
		)

		(block
			(style
				(height = 100%)
				(bind width "toPercent(round(_progress1 * 100))")
				(bind backgroundColor "_color1")
			)
		)

		(block
			(style
				(height = 100%)
				(bind width "toPercent(round(_progress2 * 100))")
				(bind backgroundColor "_color2")
			)
		)
	)
)

(def element AnimatedProgressBar (	_startProgress:number = 0,
									_progress:number = 0,
									_progressbarMotionDuration:number = 0.3,
									_width:number = 100%,
									_size:number = "SIZE.SMALL",
									_color:number = "SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE",
									_isRounded:bool = true )
	(scope
		(event evAddedToStage)
		(var paramScaleX:number = "_startProgress / 100" watch=false)

		(struct progressBarHeight = PULL_PROGRESS_BAR_HEIGHT(_size = "_size"))

		(controller $Animation
			(bindcall play	to = "{paramScaleX: _progress / 100}"
							duration = "_progressbarMotionDuration"
							delay=0.1
							(bind trigger "_progress") (event "evAddedToStage")
			)
		)
	)
	(dispatch evAddedToStage on='addedToStage')

	(style
		(bind width "_width")
		(bind height "progressBarHeight.value")
	)

	(block
		(class $FullsizeAbsolute)
		(style
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
			(bind borderRadius "_isRounded ? XXS : 0px")
			(alpha = 0.3)
		)
	)

	(block
		(class $Fullsize)

		(block
			(class $FullsizeAbsolute)
			(style
				(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
				(bind borderRadiusTopRight "_isRounded ? XXS : 0px")
				(bind borderRadiusBottomRight "_isRounded ? XXS : 0px")
			)
			(isMask = true)
		)

		(block
			(class $Fullsize)
			(style
				(bind backgroundColor "_color")
				(bind borderRadiusTopLeft "_isRounded ? XXS : 0px")
				(bind borderRadiusBottomLeft "_isRounded ? XXS : 0px")
				(bind ubScaleX "paramScaleX")
			)
		)
	)
)