(def constant RADIOBUTTON_BACKGROUND_ALPHA "{
	SC.Ui_styles.BUTTON_STATE.DOWN		: 0.25,
	SC.Ui_styles.BUTTON_STATE.OVER		: 0.3,
	SC.Ui_styles.BUTTON_STATE.UP		: 0.15,
	SC.Ui_styles.BUTTON_STATE.SELECTED	: 0.15,
	SC.Ui_styles.BUTTON_STATE.DISABLED	: 0.1
}")

(def element RadioButton (	_isSelected:bool=false, _isDisabled:bool=false, _name:str='',	_dispatchedEv:str='',
							_dispatchParams:dict={}, _methods:array=[], _safetyZone:number=0px)
	(scope
		(macro MOUSE_HANDLER_SCOPE)

		(var state:number = "	_isDisabled		? SC.Ui_styles.BUTTON_STATE.DISABLED :
								_isSelected		? SC.Ui_styles.BUTTON_STATE.SELECTED :
								mouseDown 		? SC.Ui_styles.BUTTON_STATE.DOWN :
								rollOver		? SC.Ui_styles.BUTTON_STATE.OVER
												: SC.Ui_styles.BUTTON_STATE.UP")

		(var hoverBackgroundStateAlpha:number = "RADIOBUTTON_BACKGROUND_ALPHA[state]")
		(var activeStateEnabled:bool = "state == SC.Ui_styles.BUTTON_STATE.SELECTED")
	)

	(bind name "_name")

	(style
		(width = 24px)
		(height = 24px)
		(bind padding "-_safetyZone")
		(align = "center|middle")
	)

	(block
		(style
			(hitTest = false)
			(width = 24px)
			(height = 24px)
			(alpha = "hoverBackgroundStateAlpha")
			(align = "center|middle")
			(borderRadius = "SXS")
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
		)

		(macro DEFAULT_CONTROL_STATE_ANIMATION_ALPHA
			_trigger = "state"
			_alpha = "hoverBackgroundStateAlpha"
		)
	)

	(block
		(class $MiddleVHAbsolutely)
		(style
			(hitTest = false)
			(width = 12px)
			(height = 12px)
			(alpha = "activeStateEnabled ? 1 : 0")
			(scaleX = "activeStateEnabled ? 1 : 0.5")
			(scaleY = "activeStateEnabled ? 1 : 0.5")
			(pivotX = 50%)
			(pivotY = 50%)
			(borderRadius = "6px")
			(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
		)

		(controller $Animation
			(bindcall play
				from="{alpha: 0, scaleX: 0.5, scaleY: 0.5}"
				to="{alpha: 1, scaleX: 1, scaleY: 1}"
				duration=0.1
				easing="Easing.quad_in_out"
				action="kill"
				reverse = "!activeStateEnabled"
				(bind trigger "activeStateEnabled")
			)
		)
	)

	(block
		(class $FullsizeAbsolute)
		(style (backgroundColor = "NO_COLOR"))

		(macro MOUSE_HANDLER
			_enabled = "!(_isDisabled || _isSelected)"
			_dispatchedEv = "_dispatchedEv"
			_dispatchParams = "_dispatchParams"
			_methods = "_methods"
			_soundSet = "'button_tab'"
		)
	)
)

(def element RadioButtonWithLabel (	_isSelected:bool=false, _isDisabled:bool=false, _name:str='', _dispatchedEv:str='',
									_dispatchParams:dict={}, _methods:array=[], _safetyZone:number=0px, _label:str='',
									_maxTfWidth:number=300px, _flow:number="horizontal")
	(scope
		(struct mouseHandler = MOUSE_HANDLER())

		(var state:number = "	_isDisabled					? SC.Ui_styles.BUTTON_STATE.DISABLED :
								_isSelected					? SC.Ui_styles.BUTTON_STATE.SELECTED :
								mouseHandler.mouseDown 		? SC.Ui_styles.BUTTON_STATE.DOWN :
								mouseHandler.rollOver		? SC.Ui_styles.BUTTON_STATE.OVER
															: SC.Ui_styles.BUTTON_STATE.UP")

		(var hoverBackgroundStateAlpha:number = "RADIOBUTTON_BACKGROUND_ALPHA[state]")
		(var activeStateEnabled:bool = "state == SC.Ui_styles.BUTTON_STATE.SELECTED")
	)
	(bind name "_name")

	(style
		(bind flow "_flow")
		(bind align "_flow == vertical ? center : left|middle")
	)

	
	(block
		(style
			(hitTest = false)
			(width = 24px)
			(height = 24px)
			(align = "center|middle")
		)

		(block
			(style
				(width = 24px)
				(height = 24px)
				(alpha = "hoverBackgroundStateAlpha")
				(align = "center|middle")
				(borderRadius = "SXS")
				(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.WHITE")
			)

			(macro DEFAULT_CONTROL_STATE_ANIMATION_ALPHA
				_trigger = "state"
				_alpha = "hoverBackgroundStateAlpha"
			)
		)

		(block
			(class $MiddleVHAbsolutely)
			(style
				(hitTest = false)
				(width = 12px)
				(height = 12px)
				(alpha = "activeStateEnabled ? 1 : 0")
				(scaleX = "activeStateEnabled ? 1 : 0.5")
				(scaleY = "activeStateEnabled ? 1 : 0.5")
				(pivotX = 50%)
				(pivotY = 50%)
				(borderRadius = "6px")
				(backgroundColor = "SC.Ui_styles.SERVICE_COLORS.ACCENT_BLUE")
			)

			(controller $Animation
				(bindcall play
					from="{alpha: 0, scaleX: 0.5, scaleY: 0.5}"
					to="{alpha: 1, scaleX: 1, scaleY: 1}"
					duration=0.1
					easing="Easing.quad_in_out"
					action="kill"
					reverse = "!activeStateEnabled"
					(bind trigger "activeStateEnabled")
				)
			)
		)
	)

	
	(block
		(style
			(hitTest = false)
			(marginLeft = "S")
			(bind marginTop "_flow == vertical ? XS : 0")
			(alpha = "mouseHandler.rollOver ? TA : TC")
		)

		(controller $Animation
			(bindcall play
				duration = 0.05
				from	 = "{ alpha: TC }"
				to		 = "{ alpha: TA }"
				reverse	 = "!mouseHandler.rollOver"
				(bind trigger "mouseHandler.rollOver")
			)
		)

		(tf
			(class $TextDefault18NM)
			(style
				(bind marginTop "_flow == vertical ? S : -1px")
				(bind maxWidth "_maxTfWidth")
				(bind textAlign "_flow == vertical ? center : left")
			)
			(bind text "_label")
		)
	)


	(block
		(class $FullsizeAbsolute)
		(style (bind padding "-_safetyZone"))

		(block
			(class $Fullsize)
			(style (backgroundColor = "NO_COLOR"))

			(macro STRUCT_MOUSE_HANDLER
				_mouseHandler = "mouseHandler"
				_dispatchedEv = "_dispatchedEv"
				_dispatchParams = "_dispatchParams"
				_methods = "_methods"
			)
		)
	)
)