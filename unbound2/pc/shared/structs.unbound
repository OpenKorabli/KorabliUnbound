









(def struct PULL_PRICE (_entityId:str, _actionId:number)
	(var priceComponent:dhComponent = "getPrimaryComponent(CC.priceComponent, _entityId + '_' + toString(_actionId))")
	(var info:dict = "{	currency: 			priceComponent.currency			?: '',
						basePrice: 			priceComponent.basePrice		?: 0,
						finalPrice: 		priceComponent.finalPrice		?: 0,
						discountPercent: 	priceComponent.discountPercent	?: 0,
						type: 				priceComponent.type				?: 0,
						till: 				priceComponent.till				?: 0,
						isPrivate: 			priceComponent.isPrivate }" (event "priceComponent.evChanged"))
)

(def struct PULL_PRICE_WITH_REFUND_OPERATIONS (_entityId:str, _actionId:number)
	(var priceEntity:dhEntity =			"getPrimaryEntity(CC.priceComponent, _entityId + '_' + toString(_actionId))")
	(var priceComponent:dhComponent =	"priceEntity.priceComponent")
	(var refundComponent:dhComponent =	"priceEntity.refundComponent")

	(var info:dict =					"{	currency: 			priceComponent.currency			?: '',
											basePrice: 			priceComponent.basePrice		?: 0,
											finalPrice: 		priceComponent.finalPrice		?: 0,
											discountPercent: 	priceComponent.discountPercent	?: 0,
											type: 				priceComponent.type				?: 0,
											till: 				priceComponent.till				?: 0,
											isPrivate: 			priceComponent.isPrivate }" (event "priceComponent.evChanged"))
)

(def struct PULL_GUIDING_TIP (_type:number)
	(var entity:dhEntity =			"getPrimaryEntity(CC.newGuidingTip, _type)")
	(var component:dhComponent =	"entity.newGuidingTip")
	(var targetId:str =				"component.targetID ?: ''"	(event "component.evChanged") (event "component.evTargetIDChanged"))
)

(def struct PULL_ACTIVE_GUIDING_TIP ()
	(var entity:dhEntity =			"getSingleEntity(CC.activeGuidingTip)")
	(var component:dhComponent =	"entity.newGuidingTip")
	(var tipId:number =				"component.id")
	(var chainId:number =			"component.chainID ?: SC.Context_guiding_tip.TIP_CHAIN_ID.NONE"		(event "component.evChanged"))
	(var targetId:str =				"component.targetID ?: ''"											(event "component.evTargetIDChanged"))
)

(def struct SAFE_CHECK_ACTIVE_TIP_ID (_tipId:number, _validValues:array)
	(var value:number = "isIn(_tipId, _validValues) ? _tipId : SC.Context_guiding_tip.TIP_TYPE.NONE")
)

(def struct PULL_OWN_SHIP (_playerShipId:number)
	(var shipEntity:gfx = "$datahub.getPrimaryEntity(CC.ownShip, _playerShipId)")
	(var shipComponent:gfx = "shipEntity.ship")
	(var ownShipComponent:gfx = "shipEntity.ownShip")
)

(def struct GET_COMMAND (_commandName:str, _binding:number=0)
	(var commandEntity:gfx = "$datahub.getPrimaryEntity(CC.preference, 'commands.' + _commandName + '.value' + toString(_binding + 1))")
	(var keyCode:number = "commandEntity.preference.value[0] ?: 0" (event "commandEntity.preference.evValueChanged "))
	(var mods:number = "commandEntity.preference.value[1] ?: 0" (event "commandEntity.preference.evValueChanged "))
)

(def struct PULL_CLANINFO (_clanId:number)
	(var clanEntity:dhEntity = "getPrimaryEntity(CC.clan, _clanId)")
	(var tag:str = "clanEntity.clan.tag" (event "clanEntity.clan.evTagChanged"))
	(var name:str = "clanEntity.clanExtended.name" (event "clanEntity.clanExtended.evNameChanged"))
)

(def struct PULL_CLANLADDER (_clanId:number, _squadId:number)
	(var entity:dhEntity = "getPrimaryEntity(CC.clanLadderInfo, _clanId)")
	(var leadingSquadId:number = "entity.clanLadderInfo.leadingSquadId")
	(var isLeadingSquad:bool = "_squadId == leadingSquadId")
)

(def struct PULL_CLAN_BATTLE_STAGE_RESULTS (_arenaId:str = '')
	(var entity:dhEntity = "getPrimaryEntity(CC.clanBattleStageResult, _arenaId)")
	(var component:dhComponent = "entity.clanBattleStageResult")
	(var fromLeagueIdStage:number = "component.fromLeagueId ?: 0")
	(var toLeagueIdStage:number = "component.toLeagueId ?: 0")
	(var fromDivisionIdStage:number = "component.toLeagueId ?: 0")
	(var toDivisionIdStage:number = "component.toDivisionId ?: 0")
	(var stage:str = "component.stage ?: ''")
	(var isProgressFinished:bool = "component.isProgressFinished")
	(var toBattleProgress:array = "component.toBattleProgress ?: []")
)

(def struct PULL_CLAN_BATTLE_RESULTS (_arenaId:str = '')
	(var entity:dhEntity = "getPrimaryEntity(CC.clanBattleResult, _arenaId)")
	(var component:dhComponent = "entity.clanBattleResult")
	(var battleResult:str = "component.battleResult ?: ''")
	(var fromRating:number = "component.fromRating ?: 0")
	(var toRating:number = "component.toRating ?: 0")
	(var fromPublicRating:number = "component.fromPublicRating ?: 0")
	(var toPublicRating:number = "component.toPublicRating ?: 0")
	(var fromDivisionId:number = "component.fromDivisionId ?: 0")
	(var toDivisionId:number = "component.toDivisionId ?: 0")
	(var fromLeagueId:number = "component.fromLeagueId ?: 0")
	(var toLeagueId:number = "component.toLeagueId ?: 0")
	(var squadId:number = "component.squadId ?: 0")
)

(def struct USER_PREF_DATA ()
	(var userPrefsEntity:gfx =	"$datahub.getSingleEntity(CC.userPrefs)")
	(var prefs:dict = "userPrefsEntity.userPrefs.userPrefs ?: {}" (event "userPrefsEntity.userPrefs.evUserPrefsChanged"))
)

(def struct PULL_ROUTE (_id:str)
	(var routeEntity:dhEntity = "getPrimaryEntity(CC.route, _id)")
	(var isActive:bool = "routeEntity.route.isActive" (event "routeEntity.route.evIsActiveChanged"))
)

(def struct PULL_FULL_ROUTE (_id:str)
	(var routeEntity:dhEntity = 		"getPrimaryEntity(CC.route, _id)")
	(var componentRoute:dhComponent =	"routeEntity.route")
	(var isActive:bool =				"componentRoute.isActive"			(event "componentRoute.evIsActiveChanged"))
	(var prevActiveChild:str =			"componentRoute.prevActiveChild"	(event "componentRoute.evPrevActiveChildChanged"))
	(var activeChild:str =				"componentRoute.activeChild"		(event "componentRoute.evActiveChildChanged"))
	(var children:array =				"componentRoute.children ?: []"		(event "componentRoute.evChildrenChanged"))
)

(def struct FEATURES (_state:number)
	(var featureComponent:dhComponent = "getPrimaryEntity(CC.accountFeature, pow(2, _state)).accountFeature")
	(var state:str ="featureComponent.state" (event "featureComponent.evStateChanged"))
)

(def struct PULL_PRIME_TIME (_id:number)
	(var primeTimeEntity:dhEntity = "getEntity(_id)")
	(var primeTime:dhComponent = "primeTimeEntity.primeTime")
	(var startTime:number = "primeTime.primeTimeStartTime ?: 0" (event "primeTime.evChanged"))
	(var finishTime:number = "primeTime.primeTimeFinishTime ?: 0" (event "primeTime.evChanged"))
	(var daylightshift:number = "primeTime.daylightshift ?: 0" (event "primeTime.evChanged"))
	(var serverTime:number = "currentServerSeconds()" (event "evInfrequent"))
	(var isActive:bool = "startTime - daylightshift <= serverTime && serverTime <= finishTime - daylightshift")
)

(def struct PULL_CURRENT_CLAN_BATTLE_PRIME_TIME ()
	(var primeTimesChosenCollection:gfx = "$datahub.getCollection(CC.clanBattlePrimeTime).getChildByPath('chosen')")
	(var chosenPrimeTimeEntity:gfx = "primeTimesChosenCollection.items[0]" (event "primeTimesChosenCollection.evUpdated"))
	(var primeTimesFixedCollection:gfx = "$datahub.getCollection(CC.clanBattlePrimeTime).getChildByPath('fixed')")
	(var fixedPrimeTimeEntity:gfx = "primeTimesFixedCollection.items[0]" (event "primeTimesFixedCollection.evUpdated"))
	(var currentPrimeTimeEntity:gfx = "fixedPrimeTimeEntity ?: chosenPrimeTimeEntity")
)

(def struct GET_PREF_BOOL (_option:expression)
	(var preferenceComponent:dhComponent = "getPrimaryEntity(CC.preference, _option).preference")
	(var value:bool = "toBool(preferenceComponent.value)" (event "preferenceComponent.evValueChanged"))
)

(def struct GET_PREF_NUMBER (_option:expression)
	(var preferenceComponent:dhComponent = "getPrimaryEntity(CC.preference, _option).preference")
	(var value:number = "toNumber(preferenceComponent.value)" (event "preferenceComponent.evValueChanged"))
)

(def struct GET_PREF_STR (_option:expression)
	(var preferenceComponent:dhComponent = "getPrimaryEntity(CC.preference, _option).preference")
	(var value:str = "toString(preferenceComponent.value)" (event "preferenceComponent.evValueChanged"))
)

(def struct HIGH_CONTRAST_INFO ()
	(struct uiContrastOptionEnabledPref =	GET_PREF_BOOL(_option = "'graphics.GUI.contrast'"))
	(struct blurOptionEnabledPref =			GET_PREF_BOOL(_option = "'graphics.GUI.blur'"))
	(var isEnabled:bool = "uiContrastOptionEnabledPref.value || !blurOptionEnabledPref.value")
)

(def struct PULL_NEW_CONTENT (_type:expression)
	(var newContentComponent:dhComponent = "getPrimaryEntity(CC.newContent, _type).newContent")
	(var value:number = "newContentComponent.count ?: 0" (event "newContentComponent.evCountChanged"))
)

(def struct PORT_BANNER_ALPHA (_alphaBannerVariants:dict, _isMouseDown:bool, _isRollOver:bool)
	(var state:number = "_isMouseDown	? SC.Ui_styles.BUTTON_STATE.DOWN :
						_isRollOver		? SC.Ui_styles.BUTTON_STATE.OVER
										: SC.Ui_styles.BUTTON_STATE.UP")

	(var alpha:number = "_alphaBannerVariants[state]")
)

(def struct SSE_TASKS_STATUS_FLAGS (_sseOpenEnded:dhComponent, _sseCorePersistent:dhComponent, _sseCore:dhComponent, _isManualRewardClaim:bool=false, _sseGlobal:dhComponent=null)
	(var isPostBattle:bool =	"toBool(_sseCorePersistent)")
	(var isDone:bool =			"isPostBattle	? _sseCorePersistent.isDone		: _sseCore.isDone"		(event "_sseCore.evChanged"))
	(var isFailed:bool =		"isPostBattle	? false							: _sseCore.isFailed"	(event "_sseCore.evChanged"))
	(var isLocked:bool =		"isPostBattle	? false							: _sseCore.isLocked"	(event "_sseCore.evChanged"))
	(var isClaimed:bool =		"isPostBattle	? _sseCorePersistent.isClaimed	: _sseCore.isClaimed"	(event "_sseCore.evChanged") (event "_sseCorePersistent.evIsClaimedChanged"))
	(var isFeatured:bool =		"isPostBattle	? _sseCorePersistent.isFeatured	: _sseCore.isFeatured"	(event "_sseCore.evChanged"))
	(var isGlobalSse:bool = 	"toBool(_sseGlobal)")

	(var isRewarded:bool =		"_sseOpenEnded.isRewarded" (event "_sseOpenEnded.evChanged"))
	(var isReceived:bool =		"_isManualRewardClaim || isGlobalSse 	? isClaimed :
								 toBool(_sseOpenEnded)					? isRewarded
																		: isDone")

	(var hasGlobalSseProgress:bool = "_sseGlobal.personalProgress > 0" (event "_sseGlobal.evChanged"))
	(var isNotParticipatedInGlobalSse:bool = "isDone && isGlobalSse && (!_isManualRewardClaim && !isClaimed || _isManualRewardClaim && !hasGlobalSseProgress)")
	(var isInactive:bool = "isReceived || isFailed || isLocked || isNotParticipatedInGlobalSse")
)

(def struct SSE_INTERACTIVE_BACKGROUND (	_isInactiveBackground:bool = false,
											_isPinnedTask:bool = false,
											_mouseDown:bool = false,
											_rollOver:bool = false)
	(var backgroundState:number = "	_isInactiveBackground	? SC.Ui_styles.BUTTON_STATE.UP :
									_mouseDown				? SC.Ui_styles.BUTTON_STATE.DOWN :
									_rollOver				? SC.Ui_styles.BUTTON_STATE.OVER
															: SC.Ui_styles.BUTTON_STATE.UP")

	(var pinState:number = "	_isInactiveBackground	? SC.Ui_styles.BUTTON_STATE.UP :
								_isPinnedTask			? SC.Ui_styles.BUTTON_STATE.SELECTED :
								_mouseDown				? SC.Ui_styles.BUTTON_STATE.DOWN :
								_rollOver				? SC.Ui_styles.BUTTON_STATE.OVER
														: SC.Ui_styles.BUTTON_STATE.UP")
)

(def struct GET_PINNED_TASKS ()
	(var collection:dhCollection = "getCollectionByPath(CC.sseCore, 'motivator.pinned')")
	(var isMaxReached:bool = "collection.length == SC.Sse.SSE_MOTIVATION_BANNER.MAX_PINNED_TASKS")
)

(def struct PULL_WINDOW_QUEUE ()
	(var entity:dhEntity =			"getSingleEntity(CC.windowManager)")
	(var component:dhComponent =	"entity.windowManager")
	(var queue:array =				"component.windowQueue ?: []" (event "component.evWindowQueueChanged"))
)

(def struct GET_MOTIVATOR_INFO (_sseId:number = 0, _isFromTooltip:bool = false)
	(var entity:dhEntity = "getEntity(_sseId)")
	(var chain:dhComponent = "entity.sseChain")
	(var epic:dhComponent = "entity.sseEpic")
	(var task:dhComponent = "entity.sseTask")
	(var core:dhComponent = "entity.sseCore")

	(var sseTaskId:str = "entity.sseCore.id" (event "entity.sseCore.evChanged"))

	(var progressCurrent:number = "entity.progress.value ?: 0" (event "entity.progress.evChanged"))
	(var progressMax:number = "entity.progress.max ?: 0" (event "entity.progress.evChanged"))

	(var isManualRewardClaim:bool = "chain.claimRewards || epic.claimRewards || task.claimRewards")
	(var statuses:array = "core.statuses ?: []" (event "core.evStatusesChanged"))
	(var isClaimRewardState:bool = "isManualRewardClaim && isIn(SC.Sse.SSE_STATUSES.DONE, statuses)")

	
	(var isEpic:bool = "entity && epic != null")
	(var epicMaxTasks:number = "epic.tasksToComplete ?: 0")
	(var epicName:str = "epic.name ?: subst('IDS_PL_SSE_COMPLETE_TASKS', [], { count: epicMaxTasks }, epicMaxTasks)" (event "epic.evChanged"))
	(var isEpicTask:bool = "task.epicId != null")
	(var epicTaskEntity:dhEntity = "getPrimaryEntity(CC.sseCore, task.epicId)")
	(var epicTaskName:str = "epicTaskEntity.sseEpic.name ?: tr('IDS_SSE_MOTIVATOR_EPIC_TASK_COMMON_TITLE')" (event "epicTaskEntity.sseEpic.evChanged"))

	
	(var isChainTask:bool = "task.chainId != null")
	(var isChain:bool = "entity && chain != null")
	(var currentTaskId:str = "isChain ? chain.currentTaskId : ''" (event "chain.evChanged"))
	(var coreEntity:dhEntity = "getPrimaryEntity(CC.sseCore, currentTaskId)")
	(var chainName:str = "	chain.name	? chain.name
										: subst('IDS_PL_SSE_COMPLETE_TASKS', [],
												{ count: progressMax }, progressMax)" (event "chain.evChanged"))

	
	(var infoSourceComponent:dhComponent = "	isChainTask	? task :
												isChain		? coreEntity.sseTask :
												isEpic		? epic
															: task")

	(var nameToDisplay:str = "	isEpic						? epicName :
								isEpicTask					? epicTaskName :
								isChain						? chainName + (_isFromTooltip ? '' : tr('IDS_COLON')):
								infoSourceComponent.name	? infoSourceComponent.name
															: 'IDS_TASK'")

	
	(var rewardSourceComponent:dhComponent = "	!isChain			? infoSourceComponent :
												isClaimRewardState	? chain
																	: coreEntity.sseTask")
	(var rewards:array = "rewardSourceComponent.rewards" (event "rewardSourceComponent.evChanged"))

	
	(var taskConditions:array = "infoSourceComponent.conditions ?: []" (event "infoSourceComponent.evChanged"))
	(var conditionId:number = "taskConditions[0] ?: 0")
	(var conditionEntity:dhEntity = "getEntity(conditionId)")
	(var conditions:dhComponent = "conditionEntity.sseConditions")
)

(def struct GET_SSE_TYPE_ICON (_sseEntityId:number = 0)
	(var sseEntity:dhEntity = "getEntity(_sseEntityId)")
	(var sseTaskComponent:dhComponent =		"sseEntity.sseTask")
	(var progressComponent:dhComponent =	"sseEntity.progress")
	(var sseCoreComponent:dhComponent =		"sseEntity.sseCore")

	(var progressMax:number = "progressComponent.max" (event "progressComponent.evChanged") (event "progressComponent.evMaxChanged"))
	(var taskConditions:array = "sseTaskComponent.conditions" (event "sseTaskComponent.evChanged"))

	(var sseConditionEntity:dhEntity = "getEntity(taskConditions.length == 1 ? taskConditions[0] : -1)")
	(var conditionCategory:str = "sseConditionEntity.sseConditions.conditionCategory" (event "sseConditionEntity.sseConditions.evUpdate"))

	(var isGlobalSse:bool =		"sseEntity.hasComponent(CC.sseGlobal)")
	(var isEpic:bool =			"sseEntity.hasComponent(CC.sseEpic)")
	(var isChainParent:bool =	"sseEntity.hasComponent(CC.sseChain)")

	(var isChainTask:bool = "sseTaskComponent.chainId != null")
	(var isGlobal:bool = "isGlobalSse && isChainParent || isGlobalSse && !isChainTask")
	(var isOrTask:bool = "sseTaskComponent.conditions.length > 1")
	(var isRepeatableTask:bool = "!isEpic && !isChainParent && (progressMax > 1 || progressMax == 0)")
	(var isAggregator:bool = "conditionCategory == SC.Sse.SSE_CONDITION_CATEGORY.COMPLETE_TASK")
	(var type:str = "	isEpic				? SSE_TYPE_ICON.EPIC :
						isGlobal			? SSE_TYPE_ICON.GLOBAL :
						isAggregator		? SSE_TYPE_ICON.AGGREGATOR :
						isChainParent		? SSE_TYPE_ICON.CHAIN :
						isRepeatableTask	? SSE_TYPE_ICON.TASK_REPEATABLE :
						isOrTask			? SSE_TYPE_ICON.TASK_OR
											: SSE_TYPE_ICON.TASK")
)

(def struct GET_TEAM_NAME (_isChallenge:bool=false)
	(var battleResultsStructuredEntity:dhEntity = "getSingleEntity(CC.battleResultsStructured)")
	(var battleResultsStructuredComponent:dhComponent = "battleResultsStructuredEntity.battleResultsStructured")
	(var gameData:dict = "battleResultsStructuredEntity.dataComponent.data.game_data")

	(var battleInfoComponent:dhComponent = "getSingleEntity(CC.battleData).battleInfo")

	
	(var actualBattleInfoComponent:dhComponent = "battleInfoComponent != null ? battleInfoComponent : battleResultsStructuredComponent")
	(var alphaTeamNameFromDH:str = 	"actualBattleInfoComponent.alphaTeamName")
	(var bravoTeamNameFromDH:str = 	"actualBattleInfoComponent.bravoTeamName")

	(var battleType:str = " battleInfoComponent.battleType ?: gameData.battleType")
	(var isCustomTeamName:bool = "battleType == SC.Common.BATTLE_TYPES.CLAN_BATTLE || battleType == SC.Common.BATTLE_TYPES.TRAINING_BATTLE || battleType == SC.Common.BATTLE_TYPES.TOURNAMENT_BATTLE")
	(var isFogOfWar:bool = "battleInfoComponent.isFogOfWar")

	(var alphaTeamName:str = "	_isChallenge 		? 'IDS_PARTICIPANTS' :
								isCustomTeamName	? alphaTeamNameFromDH
													: 'IDS_ALLY_TEAM'")
	(var bravoTeamName:str = "isCustomTeamName ? bravoTeamNameFromDH : 'IDS_ENEMY_TEAM'")
)

(def struct GET_AVATAR_HEALTH_PROGRESS (_healthComponent:expression)
	(var isAlive:bool = "_healthComponent.isAlive" (event "_healthComponent.evIsAliveChanged"))
	(var healthValue:number = "_healthComponent.value" (event "_healthComponent.evValueChanged"))
	(var healthMaxValue:number = "_healthComponent.max" (event "_healthComponent.evMaxChanged"))
	(var healthProgress:number = "	healthMaxValue 	? healthValue * 100 / healthMaxValue :
									isAlive 		? 100
													: 0")
)

(def struct SHIP_DATA_SCOPE (_shipId:number)
	(var shipEntity:dhEntity = "getPrimaryEntity(CC.ship, _shipId)")
	(var shipComponent:dhComponent = "shipEntity.ship")
	(var subType:str = 			"shipComponent.subtype")
	(var shipIDS:str = 			"shipComponent.nameIDS")
	(var shipLevelRome:str =	"shipComponent.levelRome")
	(var shipLevelIcon:str =	"shipComponent.levelIcon")
	(var flagName:str =			"shipComponent.flagName")
)

(def struct VISIBLE_DRUM_FIRE_MODE_SLOT (_equipmentSlotComponentId:number)
	(var selectedShipInfoEntity:dhEntity = "getSingleEntity(CC.selectedShipInfo)")
	(var shipTTX:dict = "selectedShipInfoEntity.selectedShipInfo.shipTTX" (event "selectedShipInfoEntity.selectedShipInfo.evChanged"))
	(var isSwitchableDrum:bool = "shipTTX.artillery.drumFireMode.isSwitchable.value")
	(var showSlot:bool = "_equipmentSlotComponentId != SC.Ships.SHIP_INFO_WEAPON_TYPE.VALUE_TO_NAME[SC.Ships.SHIP_INFO_WEAPON_TYPE.FIRE_MODE] || isSwitchableDrum")
)

(def struct SERVER_TIME ()
	(var value:number = "currentServerSeconds()" (event "evInfrequent"))
)

(def struct COUNTDOWN (_time:number, _serverTime:number, _format:str, _declination:str='', _isLocalTime:bool=false)
	(var value:str = "formatTime(_time - _serverTime, _format, _declination, _isLocalTime)")
)

(def struct STAGE_SIZE ()
	(var stageComponent:dhComponent = "getSingleComponent(CC.stage)")
	(var width:number = "stageComponent.width" (event "stageComponent.evStageSizeChanged"))
	(var height:number = "stageComponent.height" (event "stageComponent.evStageSizeChanged"))
)

(def struct ADAPTIVE_RESIZE_RELATIVE_DIMENTION (_stageWidth:number, _stageHeight:number)
	(var isByWidth:bool = "1.777 > _stageWidth/_stageHeight") 
)

(def struct ADAPTIVE_HORIZONTAL_SIZE (_minStageWidth:number, _maxStageWidth:number, _minValue:number, _maxValue:number, _stageWidth:number)
	(var value:number = "round(_minValue + (_maxValue - _minValue) * (min(_stageWidth, _maxStageWidth) - _minStageWidth) / (_maxStageWidth - _minStageWidth))")			
)

(def struct ADAPTIVE_VERTICAL_SIZE (_minStageHeight:number, _maxStageHeight:number, _minValue:number, _maxValue:number, _stageHeight:number)
	(var value:number = "round(_minValue + (_maxValue - _minValue) * (min(_stageHeight, _maxStageHeight) - _minStageHeight) / (_maxStageHeight - _minStageHeight))")	
)

(def struct CURRENT_TOP_WINDOW ()
	(var windowManagerComponent:dhComponent = "getSingleComponent(CC.windowManager)")
	(var name:str = "windowManagerComponent.topWindowNodeName" (event "windowManagerComponent.evTopWindowNodeNameChanged"))
	(var mainWindow:str = "windowManagerComponent.mainWindow" (event "windowManagerComponent.evMainWindowChanged"))
)

(def struct PULL_SELF_PLAYER ()
	(var entity:dhEntity = "getSingleEntity(CC.accountSelf)")
	(var dbId:number =	"entity.accountSimple.dbId")
	(var name:str =		"entity.accountName.name"		(event "entity.accountName.evChanged"))
	(var nickName:str =	"entity.accountName.nickName"	(event "entity.accountName.evChanged"))
)

(def struct PULL_MARKER_NEW (_groupName:number)
	(var entity:dhEntity =		"getPrimaryEntity(CC.contentMarker, _groupName)")
	(var marker:dhComponent = 	"entity.contentMarker")
	(var markerType:number =	"marker.type"		(event "marker.evChanged"))
	(var markerCounter:number =	"marker.count"		(event "marker.evChanged"))
	(var messageIDS:str =		"marker.messageIDS"	(event "marker.evChanged"))
	(var isVisible:bool =		"markerType != SC.Ui_common.CONTENT_MARKER_TYPE.NONE")
)

(def struct CORRECT_REWARD_RESOURCE_SUBNAME (_subtype:str)
	(var value:str = "'_premium' in _subtype && _subtype != 'ship_premium' ? 'mk_premium' : _subtype")
)

(def struct PULL_STORAGE_INFO (_primaryKey:str)
	(var entity:dhEntity =			"getPrimaryEntity(CC.storage, _primaryKey)")
	(var component:dhComponent =	"entity.storage")
	(var value:number =				"component.value ?: 0"		(event "component.evValueChanged"))
)
