(def element ModalWindowShipMasteryTrialsReset (taskID:number = 0)
	(macro MODAL_WINDOW_INIT)
	(macro MODAL_WINDOW_BG)

	(scope
		(macro PULL_SHIP_ID)

		(var accountResourceComponent:dhComponent =	"getSingleComponent(CC.accountResource)")
		(var accountCredits:number = "accountResourceComponent.credits ?: 0" (event "accountResourceComponent.evChangedCredit"))

		(struct creditsExchange = PULL_PRICE(_entityId = "'SHIP_MASTERY_TASK_REPLACEMENT'" _actionId = "SC.Common.PRICE_ACTION.BUY"))

		(var priceInfo:dict = "{ finalPrice: -creditsExchange.info.finalPrice, currency: SC.Common.CURRENCIES.CREDITS}")
		(var deficit:number = "creditsExchange.info.finalPrice - accountCredits")
		(var isDeficit:bool = "deficit > 0")
	)
	(macro HIDE_UI_ON_SHIPOVERVIEW)
	(bindcall externalCall 'inputMapping.onRequest' "['closeModalWindowShipMasteryTrialsReset', {}]" watch=false (bind trigger "playerShipId"))

	(name = 'ModalWindowShipMasteryTrialsReset')
	(style (align = "center|middle"))

	(block
		(style
			(width = 380px)
			(align = "center")
		)

		(block
			(macro DEFAULT_MODAL_WINDOW_ANIMATION 1)
			(style (width = 100%))
			(element ModalWindowShortHeader
				_header = 'IDS_SHIPS_MASTERY_SINGLE_TRIAL_REPLACE_TITLE'
				_hasDivider = false
			)
		)

		(block
			(macro DEFAULT_MODAL_WINDOW_ANIMATION 1.5)
			(style (marginBottom = "M"))
			(element CurrenciesPanel
				_priceInfo = "[priceInfo]"
				_width = 380px
			)
		)

		(block
			(macro DEFAULT_MODAL_WINDOW_ANIMATION 2.5)
			(style (marginBottom = "MS"))
			(element ModalWindowSystemPurchaseItemPriceAndInfo
				_questionString =	'IDS_SHIPS_MASTERY_SINGLE_TRIAL_REPLACE_QUESTION'
				_priceInfo =		"creditsExchange.info"
				_isDeficit =		"isDeficit"
				_isWarningText =	"isDeficit"
				_deficit =			"deficit"
			)
		)

		(block
			(macro DEFAULT_MODAL_WINDOW_ANIMATION 3.5)
			(style
				(width = 100%)
				(align = "center")
			)
			(element ModalWindowSystemPurchaseItemYesNoCloseButtons
				_isDeficit = "isDeficit"
				_okMethods = "	[
									{
										type: 'inputMapping.onAction',
										name: 'ShipsMasteryProxyUSS.replaceMasteryTask',
										args: {shipID: playerShipId, taskID: taskID}
									}
								]"
			)
		)
	)
)
